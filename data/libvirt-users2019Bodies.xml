<?xml version="1.0" encoding="utf-8"?>
<emails><email><emailId>20190801022156</emailId><senderName>Christian Kujau</senderName><senderEmail>lists@nerdbynature.de</senderEmail><timestampReceived>2019-08-01 02:21:56-0400</timestampReceived><subject>[libvirt-users] libvirt/dnsmasq is not adhering to static DHCP assignments</subject><body>

This is basically a continuation of an older posting[0] I found, but 
apparently no solution has been posted. So, I'm trying to setup static 
DHCP leases with dnsmasq that is being started by libvirtd:


-----------------------------------------------------------
$ sudo virsh net-dumpxml --network default
&lt;network&gt;
  [...]
  &lt;dns enable='no'/&gt;
  &lt;ip address='192.168.122.1' netmask='255.255.255.0'&gt;
    &lt;dhcp&gt;
      &lt;range start='192.168.122.130' end='192.168.122.250'/&gt;
      &lt;host mac='08:00:27:e2:81:39' name='f30' ip='192.168.56.139'/&gt;
-----------------------------------------------------------


And the domain is indeed being started with that hardware address:


-----------------------------------------------------------
$ virsh dumpxml --domain f30 | grep -B1 -A3 mac\ a
    &lt;interface type='bridge'&gt;
      &lt;mac address='08:00:27:e2:81:39'/&gt;
      &lt;source bridge='virbr0'/&gt;
      &lt;target dev='tap0'/&gt;
      &lt;model type='virtio'/&gt;
-----------------------------------------------------------
  


But for some reason the domain gets a different address assigned, albeit 
from the correct DHCP pool:


-----------------------------------------------------------
$ ssh 192.168.122.233 "ip addr show"
[...]
2: enp1s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state 
UP group default qlen 1000
    link/ether 08:00:27:e2:81:39 brd ff:ff:ff:ff:ff:ff
    inet 192.168.122.233/24 brd 192.168.122.255 scope global dynamic enp1s0
-----------------------------------------------------------


See below for even more details. I've removed the virbr0.status file, 
restarted the network, still it gets this .233 address instead of the 
configured .139. Also, I'm not able to add a debug log to the 
libvirtd/dnsmasq instance, although it should be possible[1], the 
xmlns:dnsmasq stanza is overwritten as soon as the configuration is saved. 
Short of a debug (queries) log, strace on the libvirtd/dnsmasq process 
reveals that the client seems to request this strange IP address:

23002 19:01:59.053558 write(11, "&lt;30&gt;Jul 31 19:01:59 dnsmasq-dhcp[23002]: \
DHCPREQUEST(virbr0) 192.168.122.233 08:00:27:e2:81:39 ", 95) = 95 23002 \
19:01:59.054024 write(11, "&lt;30&gt;Jul 31 19:01:59 dnsmasq-dhcp[23002]: DHCPACK(virbr0) \
192.168.122.233 08:00:27:e2:81:39 f30", 94) = 94

So I restarted the dhclient process in the domain (a freshly installed 
Fedora 30), removed all state files with "192.168.122.233" in them, but 
still the domains gets assigned the .233 instead of the .139 address.

The next step would be to disable libvirtd/dnsmasq altogether and run my 
own dnsmasq instance, but I wanted to avoid that. Any idead on where to 
look next?

Thanks,
Christian.

[0] https://www.redhat.com/archives/libvirt-users/2017-October/msg00070.html
[1] https://libvirt.org/formatnetwork.html#elementsNamespaces


# cd /var/lib/libvirt/dnsmasq/
# grep -r . . | fgrep -v \#
./default.conf:strict-order
./default.conf:port=0
./default.conf:pid-file=/var/run/libvirt/network/default.pid
./default.conf:except-interface=lo
./default.conf:bind-dynamic
./default.conf:interface=virbr0
./default.conf:dhcp-range=192.168.122.130,192.168.122.250,255.255.255.0
./default.conf:dhcp-no-override
./default.conf:dhcp-authoritative
./default.conf:dhcp-lease-max=121
./default.conf:dhcp-hostsfile=/var/lib/libvirt/dnsmasq/default.hostsfile
./default.hostsfile:08:00:27:e2:81:39,192.168.56.139,f30
./virbr0.status:[
./virbr0.status:  {
./virbr0.status:    "ip-address": "192.168.122.233",
./virbr0.status:    "mac-address": "08:00:27:e2:81:39",
./virbr0.status:    "hostname": "f30",
./virbr0.status:    "client-id": \
                "ff:27:e2:81:39:00:04:8c:ad:c4:7d:04:e8:4b:de:93:4b:76:d8:75:82:86:c8",
                
./virbr0.status:    "expiry-time": 1564628519
./virbr0.status:  }
./virbr0.status:]





-- 
BOFH excuse #40:

not enough memory, go get system upgrade

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20190802072447</emailId><senderName>Michal Privoznik</senderName><senderEmail>mprivozn@redhat.com</senderEmail><timestampReceived>2019-08-02 07:24:47-0400</timestampReceived><subject>Re: [libvirt-users] libvirt/dnsmasq is not adhering to static DHCP assignments</subject><body>

On 8/1/19 4:21 AM, Christian Kujau wrote:
&gt; This is basically a continuation of an older posting[0] I found, but
&gt; apparently no solution has been posted. So, I'm trying to setup static
&gt; DHCP leases with dnsmasq that is being started by libvirtd:
&gt; 
&gt; 
&gt; -----------------------------------------------------------
&gt; $ sudo virsh net-dumpxml --network default
&gt; &lt;network&gt;
&gt;    [...]
&gt;    &lt;dns enable='no'/&gt;
&gt;    &lt;ip address='192.168.122.1' netmask='255.255.255.0'&gt;
&gt;      &lt;dhcp&gt;
&gt;        &lt;range start='192.168.122.130' end='192.168.122.250'/&gt;
&gt;        &lt;host mac='08:00:27:e2:81:39' name='f30' ip='192.168.56.139'/&gt;

This is clearly a misconfiguration. 192.168.56.139 is not from 
192.168.122.130/24 subnet. Libvirt should report an error in this case 
but it doesn't (tested right now with the current git HEAD), which is a 
bug. I believe if you'd s/56/122/ in the &lt;host/&gt; you'll find it working 
again.

Michal

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190809020620</emailId><senderName>Christian Kujau</senderName><senderEmail>lists@nerdbynature.de</senderEmail><timestampReceived>2019-08-09 02:06:20-0400</timestampReceived><subject>Re: [libvirt-users] libvirt/dnsmasq is not adhering to static DHCP assignments</subject><body>

On Fri, 2 Aug 2019, Michal Privoznik wrote:
&gt; On 8/1/19 4:21 AM, Christian Kujau wrote:
&gt; &gt;        &lt;range start='192.168.122.130' end='192.168.122.250'/&gt;
&gt; &gt;        &lt;host mac='08:00:27:e2:81:39' name='f30' ip='192.168.56.139'/&gt;
&gt; 
&gt; This is clearly a misconfiguration. 192.168.56.139 is not from
&gt; 192.168.122.130/24 subnet. Libvirt should report an error in this case but it

Yes, thanks for pointing this out. A little while after my posting I 
noticed the same but failed to post the error to the mailing list.

&gt; doesn't (tested right now with the current git HEAD), which is a bug. I
&gt; believe if you'd s/56/122/ in the &lt;host/&gt; you'll find it working again.

Indeed, this fixed the issue.

Sorry for the noise,
Christian.
-- 
BOFH excuse #353:

Second-system effect.

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190204235729</emailId><senderName>Lianjie Cao</senderName><senderEmail>gongbaifei@gmail.com</senderEmail><timestampReceived>2019-02-04 23:57:29-0400</timestampReceived><subject>[libvirt-users] Installing libvirt and Xen on Red Hat 7.5</subject><body>

[Attachment #2 (multipart/alternative)]


Hi,

I am installing OpenStack on Red Hat 7.5. For Nova compute component, I
choose libvirt and Xen.
However, I am running into some problems. It seems libvirt is unable to
communicate with Xen.

Xen installation:
I installed Xen410 using "Xen make easy"
https://xen.crc.id.au/support/guides/install/. Here is a list of packages
installed and verification that Xen is running.

# lsb_release -a
LSB Version:    :core-4.1-amd64:core-4.1-noarch
Distributor ID: RedHatEnterpriseServer
Description:    Red Hat Enterprise Linux Server release 7.5 (Maipo)
Release:        7.5
Codename:       Maipo

# yum list | grep xen
 * kernel-xen: us3.mirror.crc.id.au
 * kernel-xen-extra: us3.mirror.crc.id.au
kernel-xen.x86_64                4.14.94-6.el7xen @kernel-xen
kernel-xen.x86_64                4.14.97-6.el7xen @kernel-xen
kernel-xen-devel.x86_64          4.14.97-6.el7xen @kernel-xen
kernel-xen-firmware.x86_64       4.14.97-6.el7xen @kernel-xen
kernel-xen-headers.x86_64        4.14.97-6.el7xen @kernel-xen
kernel-xen-release.noarch        1:7-13           @kernel-xen
xen410.x86_64                    4.10.2-7.el7     @kernel-xen
xen410-devel.x86_64              4.10.2-7.el7     @kernel-xen
xen410-hypervisor.x86_64         4.10.2-7.el7     @kernel-xen
xen410-libs.x86_64               4.10.2-7.el7     @kernel-xen
xen410-licenses.x86_64           4.10.2-7.el7     @kernel-xen
xen410-ocaml.x86_64              4.10.2-7.el7     @kernel-xen
xen410-runtime.x86_64            4.10.2-7.el7     @kernel-xen
xen46-licenses.x86_64            4.6.6-16.el7     @kernel-xen

# xl info
host                   : nfv-sec-cn01-pa.labs.hpecorp.net
release                : 4.14.97-6.el7xen.x86_64
version                : #2 SMP Fri Feb 1 00:33:52 AEDT 2019
machine                : x86_64
nr_cpus                : 32
max_cpu_id             : 63
nr_nodes               : 2
cores_per_socket       : 8
threads_per_core       : 2
cpu_mhz                : 1995
hw_caps                :
bfebfbff:17bee3ff:2c100800:00000001:00000001:00000000:00000000:00000100
virt_caps              : hvm hvm_directio
total_memory           : 131034
free_memory            : 96587
sharing_freed_memory   : 0
sharing_used_memory    : 0
outstanding_claims     : 0
free_cpus              : 0
xen_major              : 4
xen_minor              : 10
xen_extra              : .3-pre
xen_version            : 4.10.3-pre
xen_caps               : xen-3.0-x86_64 xen-3.0-x86_32p hvm-3.0-x86_32
hvm-3.0-x86_32p hvm-3.0-x86_64
xen_scheduler          : credit
xen_pagesize           : 4096
platform_params        : virt_start=0xffff800000000000
xen_changeset          : Tue Nov 20 15:45:04 2018 +0100 git:b6e203b-dirty
xen_commandline        : placeholder dom0_mem=32768M cpufreq=xen
dom0_max_vcpus=8 dom0_vcpus_pin console=tty0 console=com1 com1=115200,8n1
cc_compiler            : gcc (GCC) 4.8.5 20150623 (Red Hat 4.8.5-28)
cc_compile_by          : mockbuild
cc_compile_domain      :
cc_compile_date        : Wed Nov 21 02:09:26 AEDT 2018
build_id               : 2d53c8b15aaf737b0351e78ad863eb5a530e7df0
xend_config_format     : 4


libvirt was installed as dependencies of openstack-nova-compute from yum.

====================================================================================== \
============================================================================================================
  Package                                            Arch
  Version                                Repository
                                  Size
====================================================================================== \
============================================================================================================
 Installing:
 openstack-nova-compute                             noarch
  1:17.0.9-1.el7                         openstack-queens
                                 7.9 k
Installing for dependencies:
 OpenIPMI-modalias                                  x86_64
  2.0.23-2.el7                           RedHat-7Server-x86_64-errata
                                  16 k
 attr                                               x86_64
  2.4.46-13.el7                          RedHat-7Server-x86_64-errata
                                  66 k
 dosfstools                                         x86_64
  3.0.20-9.el7                           RedHat-7.1Server-x86_64
                                101 k
 fuse                                               x86_64
  2.9.2-10.el7                           RedHat-7Server-x86_64-errata
                                  86 k
 gdisk                                              x86_64
  0.8.6-5.el7                            RedHat-7.1Server-x86_64
                                187 k
 glusterfs-cli                                      x86_64
  3.8.4-53.el7                           RedHat-7Server-x86_64-errata
                                 176 k
 hivex                                              x86_64
  1.3.10-6.9.el7                         RedHat-7Server-x86_64-errata
                                 101 k
 ipmitool                                           x86_64
  1.8.18-7.el7                           RedHat-7Server-x86_64-errata
                                 441 k
 libguestfs                                         x86_64
  1:1.36.10-6.el7_5.2                    RedHat-7Server-x86_64-errata
                                 1.9 M
 libreport-filesystem                               x86_64
  2.1.11-40.el7                          RedHat-7Server-x86_64-errata
                                  39 k
 libvirt-daemon                                     x86_64
  3.9.0-14.el7_5.6                       RedHat-7Server-x86_64-errata
                                 852 k
 libvirt-daemon-driver-interface                    x86_64
  3.9.0-14.el7_5.6                       RedHat-7Server-x86_64-errata
                                 220 k
 libvirt-daemon-driver-network                      x86_64
  3.9.0-14.el7_5.6                       RedHat-7Server-x86_64-errata
                                 389 k
 libvirt-daemon-driver-nodedev                      x86_64
  3.9.0-14.el7_5.6                       RedHat-7Server-x86_64-errata
                                 221 k
 libvirt-daemon-driver-nwfilter                     x86_64
  3.9.0-14.el7_5.6                       RedHat-7Server-x86_64-errata
                                 243 k
 libvirt-daemon-driver-qemu                         x86_64
  3.9.0-14.el7_5.6                       RedHat-7Server-x86_64-errata
                                 714 k
 libvirt-daemon-driver-secret                       x86_64
  3.9.0-14.el7_5.6                       RedHat-7Server-x86_64-errata
                                 210 k
 libvirt-daemon-driver-storage                      x86_64
  3.9.0-14.el7_5.6                       RedHat-7Server-x86_64-errata
                                 173 k
 libvirt-daemon-driver-storage-core                 x86_64
  3.9.0-14.el7_5.6                       RedHat-7Server-x86_64-errata
                                 405 k
 libvirt-daemon-driver-storage-disk                 x86_64
  3.9.0-14.el7_5.6                       RedHat-7Server-x86_64-errata
                                 182 k
 libvirt-daemon-driver-storage-gluster              x86_64
  3.9.0-14.el7_5.6                       RedHat-7Server-x86_64-errata
                                 183 k
 libvirt-daemon-driver-storage-iscsi                x86_64
  3.9.0-14.el7_5.6                       RedHat-7Server-x86_64-errata
                                 179 k
 libvirt-daemon-driver-storage-logical              x86_64
  3.9.0-14.el7_5.6                       RedHat-7Server-x86_64-errata
                                 183 k
 libvirt-daemon-driver-storage-mpath                x86_64
  3.9.0-14.el7_5.6                       RedHat-7Server-x86_64-errata
                                 178 k
 libvirt-daemon-driver-storage-rbd                  x86_64
  3.9.0-14.el7_5.6                       RedHat-7Server-x86_64-errata
                                 185 k
 libvirt-daemon-driver-storage-scsi                 x86_64
  3.9.0-14.el7_5.6                       RedHat-7Server-x86_64-errata
                                 179 k
 libvirt-daemon-kvm                                 x86_64
  3.9.0-14.el7_5.6                       RedHat-7Server-x86_64-errata
                                 173 k
 libvirt-python                                     x86_64
  3.9.0-1.el7                            RedHat-7Server-x86_64-errata
                                 335 k
 mdadm                                              x86_64
  4.0-13.el7                             RedHat-7Server-x86_64-errata
                                 431 k
 mtools                                             x86_64
  4.0.18-5.el7                           RedHat-7.1Server-x86_64
                                203 k
 perl-hivex                                         x86_64
  1.3.10-6.9.el7                         RedHat-7Server-x86_64-errata
                                  41 k
 python-libguestfs                                  x86_64
  1:1.36.10-6.el7_5.2                    RedHat-7Server-x86_64-errata
                                 203 k
 scrub                                              x86_64
  2.5.2-7.el7                            RedHat-7Server-x86_64-errata
                                  41 k
 squashfs-tools                                     x86_64
  4.3-0.21.gitaae0aff4.el7               RedHat-7.1Server-x86_64
                                101 k
 supermin5                                          x86_64
  5.1.19-1.el7                           RedHat-7Server-x86_64-errata
                                 631 k
 syslinux                                           x86_64
  4.05-13.el7                            RedHat-7Server-x86_64-errata
                                 990 k
 syslinux-extlinux                                  x86_64
  4.05-13.el7                            RedHat-7Server-x86_64-errata
                                 363 k


However, after installation, Nova complains "no connection driver available
for xen:///".
Also, virsh cannot connect Xen.

/var/log/nova/nova-compute.log
2019-02-01 15:13:29.965 5091 INFO nova.service [-] Starting compute node
(version 18.1.0-1.el7)
2019-02-01 15:13:30.023 5091 ERROR nova.virt.libvirt.host [-] Connection to
libvirt failed: no connection driver available for xen:///: libvirtError:
no connection driver available for xen:///
2019-02-01 15:13:30.023 5091 ERROR nova.virt.libvirt.host Traceback (most
recent call last):
2019-02-01 15:13:30.023 5091 ERROR nova.virt.libvirt.host   File
"/usr/lib/python2.7/site-packages/nova/virt/libvirt/host.py", line 460, in
get_connection
2019-02-01 15:13:30.023 5091 ERROR nova.virt.libvirt.host     conn =
self._get_connection()
2019-02-01 15:13:30.023 5091 ERROR nova.virt.libvirt.host   File
"/usr/lib/python2.7/site-packages/nova/virt/libvirt/host.py", line 443, in
_get_connection
2019-02-01 15:13:30.023 5091 ERROR nova.virt.libvirt.host     {'msg': ex})
2019-02-01 15:13:30.023 5091 ERROR nova.virt.libvirt.host   File
"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py", line 220, in
__exit__
2019-02-01 15:13:30.023 5091 ERROR nova.virt.libvirt.host
 self.force_reraise()
2019-02-01 15:13:30.023 5091 ERROR nova.virt.libvirt.host   File
"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py", line 196, in
force_reraise
2019-02-01 15:13:30.023 5091 ERROR nova.virt.libvirt.host
 six.reraise(self.type_, self.value, self.tb)
2019-02-01 15:13:30.023 5091 ERROR nova.virt.libvirt.host   File
"/usr/lib/python2.7/site-packages/nova/virt/libvirt/host.py", line 432, in
_get_connection
2019-02-01 15:13:30.023 5091 ERROR nova.virt.libvirt.host
 self._wrapped_conn = self._get_new_connection()
2019-02-01 15:13:30.023 5091 ERROR nova.virt.libvirt.host   File
"/usr/lib/python2.7/site-packages/nova/virt/libvirt/host.py", line 386, in
_get_new_connection
2019-02-01 15:13:30.023 5091 ERROR nova.virt.libvirt.host     wrapped_conn
= self._connect(self._uri, self._read_only)
2019-02-01 15:13:30.023 5091 ERROR nova.virt.libvirt.host   File
"/usr/lib/python2.7/site-packages/nova/virt/libvirt/host.py", line 242, in
_connect
2019-02-01 15:13:30.023 5091 ERROR nova.virt.libvirt.host
 libvirt.openAuth, uri, auth, flags)
2019-02-01 15:13:30.023 5091 ERROR nova.virt.libvirt.host   File
"/usr/lib/python2.7/site-packages/eventlet/tpool.py", line 148, in
proxy_call
2019-02-01 15:13:30.023 5091 ERROR nova.virt.libvirt.host     rv =
execute(f, *args, **kwargs)
2019-02-01 15:13:30.023 5091 ERROR nova.virt.libvirt.host   File
"/usr/lib/python2.7/site-packages/eventlet/tpool.py", line 129, in execute
2019-02-01 15:13:30.023 5091 ERROR nova.virt.libvirt.host
 six.reraise(c, e, tb)
2019-02-01 15:13:30.023 5091 ERROR nova.virt.libvirt.host   File
"/usr/lib/python2.7/site-packages/eventlet/tpool.py", line 83, in tworker
2019-02-01 15:13:30.023 5091 ERROR nova.virt.libvirt.host     rv =
meth(*args, **kwargs)
2019-02-01 15:13:30.023 5091 ERROR nova.virt.libvirt.host   File
"/usr/lib64/python2.7/site-packages/libvirt.py", line 105, in openAuth
2019-02-01 15:13:30.023 5091 ERROR nova.virt.libvirt.host     if ret is
None:raise libvirtError('virConnectOpenAuth() failed')
2019-02-01 15:13:30.023 5091 ERROR nova.virt.libvirt.host libvirtError: no
connection driver available for xen:///

# virsh -c xen:/// list
error: failed to connect to the hypervisor
error: no connection driver available for xen:///


Then I check the connection drivers of libvirt. It seems the daemon driver
for xen is missing.

# ls -l /usr/lib64/libvirt/connection-driver/
total 2664
-rwxr-xr-x 1 root root  115976 Jun  5  2018 libvirt_driver_interface.so
-rwxr-xr-x 1 root root  292008 Jun  5  2018 libvirt_driver_lxc.so
-rwxr-xr-x 1 root root  169424 Jun  5  2018 libvirt_driver_network.so
-rwxr-xr-x 1 root root  119720 Jun  5  2018 libvirt_driver_nodedev.so
-rwxr-xr-x 1 root root  174216 Jun  5  2018 libvirt_driver_nwfilter.so
-rwxr-xr-x 1 root root 1545344 Jun  5  2018 libvirt_driver_qemu.so
-rwxr-xr-x 1 root root   86616 Jun  5  2018 libvirt_driver_secret.so
-rwxr-xr-x 1 root root  202568 Jun  5  2018 libvirt_driver_storage.so


But I couldn't find the xen driver (libvirt-daemon-driver-xen) from yum. I
do find it driver on some websites (
http://rpmfind.net/linux/rpm2html/search.php?query=libvirt-daemon-driver-xen),
but I am not sure which is the right version to choose.
I also found this email
https://www.spinics.net/lists/centos-virt/msg05163.html.
Then I decided to compile libvirt from source code. So I checked out the
source code from github and tried to configure and compile it.
However, from the output of ./autogen.sh --system, I don't find driver for
xen is enabled. Actually, xen is not listed as driver in the output.

configure:
configure: Configuration summary
configure: =====================
configure:
configure: Drivers
configure:
configure:       QEMU: yes
configure:     OpenVZ: yes
configure:     VMware: yes
configure:       VBox: yes
configure:     XenAPI: no
configure:      libxl: yes
configure:        LXC: yes
configure:       PHYP: no
configure:        ESX: no
configure:    Hyper-V: no
configure:         vz: no
configure:      Bhyve: no
configure:       Test: yes
configure:     Remote: yes
configure:    Network: yes
configure:   Libvirtd: yes
configure:  Interface: yes
configure:
configure: Storage Drivers
configure:
configure:        Dir: yes
configure:         FS: yes
configure:      NetFS: yes
configure:        LVM: yes
configure:      iSCSI: yes
configure: iscsi-direct: no
configure:       SCSI: yes
configure:      mpath: yes
configure:       Disk: no
configure:        RBD: no
configure:   Sheepdog: no
configure:    Gluster: no
configure:        ZFS: no
configure: Virtuozzo storage: no
configure:
configure: Security Drivers
configure:
configure:    SELinux: yes
configure:   AppArmor: no
configure:
configure: Driver Loadable Modules
configure:
configure: driver_modules: yes (CFLAGS='' LIBS='-ldl')
configure:
configure: Libraries
configure:
configure:        acl: no
configure:   apparmor: no
configure:       attr: no
configure:      audit: no
configure:      avahi: no
configure: bash_completion: no
configure:      blkid: no
configure:      capng: no
configure:       curl: no
configure:       dbus: no
configure:     dlopen: yes (CFLAGS='' LIBS='-ldl')
configure:  firewalld: no
configure: firewalld-zone: no
configure:       fuse: no
configure:  glusterfs: no
configure:     gnutls: yes (CFLAGS='-I/usr/include/p11-kit-1  '
LIBS='-lgnutls  ')
configure:        hal: no
configure:   libiscsi: no
configure:      libnl: yes (CFLAGS=' ' LIBS='-lnl  ')
configure:    libpcap: no
configure:     libssh: no
configure:      libxl: yes (CFLAGS='  -DLIBXL_API_VERSION=0x040500'
LIBS='-lxenlight   -lxlutil -lxenstore -lxentoollog')
configure:     libxml: yes (CFLAGS='-I/usr/include/libxml2  ' LIBS='-lxml2
')
configure:    macvtap: yes (CFLAGS='' LIBS='')
configure:      netcf: no
configure:        NLS: yes
configure:        nss: yes
configure:    numactl: no
configure:  openwsman: no
configure:  pciaccess: yes (CFLAGS=' ' LIBS='-lpciaccess  ')
configure:   pm_utils: yes (CFLAGS='' LIBS='')
configure:     polkit: no
configure:        rbd: no
configure:   readline: no
configure:    sanlock: no
configure:       sasl: yes (CFLAGS='' LIBS='-lsasl2')
configure:    selinux: yes (CFLAGS='' LIBS='-lselinux')
configure:       ssh2: no
configure:       udev: yes (CFLAGS=' ' LIBS='-ludev  ')
configure: virtualport: yes (CFLAGS='' LIBS='')
configure:        xdr: yes (CFLAGS='' LIBS='')
configure:     xenapi: no
configure:       yajl: yes (CFLAGS='' LIBS='-lyajl')
configure:
configure: Windows
configure:
configure:     Cygwin: no
configure:      MinGW: no
configure:       MSVC: no
configure:    windres: no
configure:
configure: Test suite
configure:
configure:          Coverage: no
configure:         Alloc OOM: no
configure:
configure: Miscellaneous
configure:
configure:              Debug: yes
configure:        Use -Werror: yes
configure:      Warning Flags:  -fno-common -W -Waddress
-Waggressive-loop-optimizations -Wall -Wattributes -Wbad-function-cast
-Wbuiltin-macro-redefined -Wcast-align -Wchar-subscripts -Wclobbered
-Wcomment -Wcomments -Wcoverage-mismatch -Wcpp -Wdeprecated-declarations
-Wdiv-by-zero -Wdouble-promotion -Wempty-body -Wendif-labels -Wextra
-Wformat-contains-nul -Wformat-extra-args -Wformat-security -Wformat-y2k
-Wformat-zero-length -Wfree-nonheap-object -Wignored-qualifiers -Wimplicit
-Wimplicit-function-declaration -Wimplicit-int -Winit-self -Winline
-Wint-to-pointer-cast -Winvalid-memory-model -Winvalid-pch -Wlogical-op
-Wmain -Wmaybe-uninitialized -Wmissing-braces -Wmissing-declarations
-Wmissing-field-initializers -Wmissing-include-dirs
-Wmissing-parameter-type -Wmissing-prototypes -Wmultichar -Wnarrowing
-Wnested-externs -Wnonnull -Wold-style-declaration -Wold-style-definition
-Woverflow -Woverride-init -Wpacked-bitfield-compat -Wparentheses
-Wpointer-arith -Wpointer-sign -Wpointer-to-int-cast -Wpragmas -Wpsabi
-Wreturn-local-addr -Wreturn-type -Wsequence-point -Wshadow
-Wsizeof-pointer-memaccess -Wstrict-aliasing -Wstrict-prototypes
-Wsuggest-attribute=const -Wsuggest-attribute=format
-Wsuggest-attribute=noreturn -Wsuggest-attribute=pure -Wswitch -Wsync-nand
-Wtrampolines -Wtrigraphs -Wtype-limits -Wuninitialized -Wunknown-pragmas
-Wunused -Wunused-but-set-parameter -Wunused-but-set-variable
-Wunused-function -Wunused-label -Wunused-local-typedefs -Wunused-parameter
-Wunused-result -Wunused-value -Wunused-variable -Wvarargs
-Wvariadic-macros -Wvector-operation-performance -Wvolatile-register-var
-Wwrite-strings -Wnormalized=nfc -Wno-sign-compare -Wjump-misses-init
-Wswitch-enum -Wno-format-nonliteral -fstack-protector-strong -fexceptions
-fasynchronous-unwind-tables -fipa-pure-const -Wno-suggest-attribute=pure
-Wno-suggest-attribute=const -Werror
configure:             DTrace: no
configure:              numad: no
configure:        Init script: systemd
configure:  Char device locks: /var/lock
configure:     Default Editor: vi
configure:       Loader/NVRAM:
configure:   virt-login-shell: yes
configure: virt-host-validate: yes
configure:       TLS priority: NORMAL
configure:
configure: Developer Tools
configure:
configure: wireshark_dissector: no
configure:
configure: Privileges
configure:
configure:       QEMU: root:root
configure:


My question is how should I install the libvirt-daemon-driver-xen driver
and make Nova work with Xen?

Thanks a lot in advance!
Best regards,
Lianjie Cao


[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;&lt;div \
dir="ltr"&gt;&lt;div&gt;Hi,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I am installing OpenStack on Red Hat 7.5. \
For Nova compute component, I choose libvirt and Xen.&lt;/div&gt;&lt;div&gt;However, I am running \
into some problems. It seems libvirt is unable to communicate with \
Xen.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Xen installation:&lt;/div&gt;&lt;div&gt;I installed Xen410 using \
"Xen make easy" &lt;a \
href="https://xen.crc.id.au/support/guides/install/"&gt;https://xen.crc.id.au/support/guides/install/&lt;/a&gt;. \
Here is a list of packages installed and verification that Xen is \
running.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;font face="monospace, monospace"&gt;# \
lsb_release -a&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, monospace"&gt;LSB Version:      \
:core-4.1-amd64:core-4.1-noarch&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, \
monospace"&gt;Distributor ID: RedHatEnterpriseServer&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font \
face="monospace, monospace"&gt;Description:      Red Hat Enterprise Linux Server release \
7.5 (Maipo)&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, monospace"&gt;Release:            \
7.5&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, monospace"&gt;Codename:           \
Maipo&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, monospace"&gt;# yum \
list | grep xen&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, monospace"&gt;  * kernel-xen: &lt;a \
href="http://us3.mirror.crc.id.au"&gt;us3.mirror.crc.id.au&lt;/a&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font \
face="monospace, monospace"&gt;  * kernel-xen-extra: &lt;a \
href="http://us3.mirror.crc.id.au"&gt;us3.mirror.crc.id.au&lt;/a&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font \
face="monospace, monospace"&gt;kernel-xen.x86_64                        4.14.94-6.el7xen \
@kernel-xen&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, monospace"&gt;kernel-xen.x86_64      \
4.14.97-6.el7xen @kernel-xen&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, \
monospace"&gt;kernel-xen-devel.x86_64               4.14.97-6.el7xen \
@kernel-xen&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, \
monospace"&gt;kernel-xen-firmware.x86_64           4.14.97-6.el7xen \
@kernel-xen&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, \
monospace"&gt;kernel-xen-headers.x86_64            4.14.97-6.el7xen \
@kernel-xen&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, \
monospace"&gt;kernel-xen-release.noarch            1:7-13                 \
@kernel-xen&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, monospace"&gt;xen410.x86_64          \
4.10.2-7.el7        @kernel-xen&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, \
monospace"&gt;xen410-devel.x86_64                     4.10.2-7.el7        \
@kernel-xen&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, \
monospace"&gt;xen410-hypervisor.x86_64              4.10.2-7.el7        \
@kernel-xen&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, monospace"&gt;xen410-libs.x86_64     \
4.10.2-7.el7        @kernel-xen&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, \
monospace"&gt;xen410-licenses.x86_64                 4.10.2-7.el7        \
@kernel-xen&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, monospace"&gt;xen410-ocaml.x86_64    \
4.10.2-7.el7        @kernel-xen&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, \
monospace"&gt;xen410-runtime.x86_64                  4.10.2-7.el7        \
@kernel-xen&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, monospace"&gt;xen46-licenses.x86_64  \
4.6.6-16.el7        @kernel-xen&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;font \
face="monospace, monospace"&gt;# xl info&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, \
monospace"&gt;host                             : &lt;a \
href="http://nfv-sec-cn01-pa.labs.hpecorp.net"&gt;nfv-sec-cn01-pa.labs.hpecorp.net&lt;/a&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font \
face="monospace, monospace"&gt;release                        : \
4.14.97-6.el7xen.x86_64&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, monospace"&gt;version    \
: #2 SMP Fri Feb 1 00:33:52 AEDT 2019&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, \
monospace"&gt;machine                        : x86_64&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font \
face="monospace, monospace"&gt;nr_cpus                        : \
32&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, monospace"&gt;max_cpu_id                    : \
63&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, monospace"&gt;nr_nodes                       \
: 2&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, monospace"&gt;cores_per_socket           : \
8&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, monospace"&gt;threads_per_core           : \
2&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, monospace"&gt;cpu_mhz                        : \
1995&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, monospace"&gt;hw_caps                       \
: bfebfbff:17bee3ff:2c100800:00000001:00000001:00000000:00000000:00000100&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font \
face="monospace, monospace"&gt;virt_caps                     : hvm \
hvm_directio&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, monospace"&gt;total_memory          \
: 131034&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, monospace"&gt;free_memory               \
: 96587&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, monospace"&gt;sharing_freed_memory     : \
0&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, monospace"&gt;sharing_used_memory      : \
0&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, monospace"&gt;outstanding_claims        : \
0&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, monospace"&gt;free_cpus                     : \
0&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, monospace"&gt;xen_major                     : \
4&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, monospace"&gt;xen_minor                     : \
10&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, monospace"&gt;xen_extra                     : \
.3-pre&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, monospace"&gt;xen_version                 \
: 4.10.3-pre&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, monospace"&gt;xen_caps              \
: xen-3.0-x86_64 xen-3.0-x86_32p hvm-3.0-x86_32 hvm-3.0-x86_32p \
hvm-3.0-x86_64&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, monospace"&gt;xen_scheduler       \
: credit&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, monospace"&gt;xen_pagesize              \
: 4096&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, monospace"&gt;platform_params            \
: virt_start=0xffff800000000000&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, \
monospace"&gt;xen_changeset               : Tue Nov 20 15:45:04 2018 +0100 \
git:b6e203b-dirty&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, monospace"&gt;xen_commandline  \
: placeholder dom0_mem=32768M cpufreq=xen dom0_max_vcpus=8 dom0_vcpus_pin \
console=tty0 console=com1 com1=115200,8n1&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, \
monospace"&gt;cc_compiler                  : gcc (GCC) 4.8.5 20150623 (Red Hat \
4.8.5-28)&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, monospace"&gt;cc_compile_by            \
: mockbuild&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, monospace"&gt;cc_compile_domain      \
:&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, monospace"&gt;cc_compile_date            : Wed \
Nov 21 02:09:26 AEDT 2018&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, monospace"&gt;build_id \
: 2d53c8b15aaf737b0351e78ad863eb5a530e7df0&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, \
monospace"&gt;xend_config_format        : \
4&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;libvirt was installed as \
dependencies of openstack-nova-compute from yum.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;font \
face="monospace, monospace"&gt;========================================================== \
========================================================================================================================================&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font \
face="monospace, monospace"&gt;  Package                                                 \
Arch                                 Version                                          \
Repository                                                                            \
Size&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, \
monospace"&gt;=========================================================================== \
=======================================================================================================================&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font \
face="monospace, monospace"&gt;Installing:&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, \
monospace"&gt;  openstack-nova-compute                                            noarch \
1:17.0.9-1.el7                                      openstack-queens                  \
7.9 k&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, monospace"&gt;Installing for \
dependencies:&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, monospace"&gt;  OpenIPMI-modalias  \
x86_64                              2.0.23-2.el7                                      \
RedHat-7Server-x86_64-errata                                                          \
16 k&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, monospace"&gt;  attr                        \
x86_64                              2.4.46-13.el7                                     \
RedHat-7Server-x86_64-errata                                                          \
66 k&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, monospace"&gt;  dosfstools                  \
x86_64                              3.0.20-9.el7                                      \
RedHat-7.1Server-x86_64                                                               \
101 k&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, monospace"&gt;  fuse                       \
x86_64                              2.9.2-10.el7                                      \
RedHat-7Server-x86_64-errata                                                          \
86 k&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, monospace"&gt;  gdisk                       \
x86_64                              0.8.6-5.el7                                       \
RedHat-7.1Server-x86_64                                                               \
187 k&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, monospace"&gt;  glusterfs-cli              \
x86_64                              3.8.4-53.el7                                      \
RedHat-7Server-x86_64-errata                                                          \
176 k&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, monospace"&gt;  hivex                      \
x86_64                              1.3.10-6.9.el7                                    \
RedHat-7Server-x86_64-errata                                                          \
101 k&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, monospace"&gt;  ipmitool                   \
x86_64                              1.8.18-7.el7                                      \
RedHat-7Server-x86_64-errata                                                          \
441 k&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, monospace"&gt;  libguestfs                 \
x86_64                              1:1.36.10-6.el7_5.2                              \
RedHat-7Server-x86_64-errata                                                          \
1.9 M&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, monospace"&gt;  libreport-filesystem       \
x86_64                              2.1.11-40.el7                                     \
RedHat-7Server-x86_64-errata                                                          \
39 k&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, monospace"&gt;  libvirt-daemon              \
x86_64                              3.9.0-14.el7_5.6                                  \
RedHat-7Server-x86_64-errata                                                          \
852 k&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, monospace"&gt;  \
libvirt-daemon-driver-interface                              x86_64                   \
3.9.0-14.el7_5.6                                   RedHat-7Server-x86_64-errata       \
220 k&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, monospace"&gt;  \
libvirt-daemon-driver-network                                 x86_64                  \
3.9.0-14.el7_5.6                                   RedHat-7Server-x86_64-errata       \
389 k&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, monospace"&gt;  \
libvirt-daemon-driver-nodedev                                 x86_64                  \
3.9.0-14.el7_5.6                                   RedHat-7Server-x86_64-errata       \
221 k&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, monospace"&gt;  \
libvirt-daemon-driver-nwfilter                                x86_64                  \
3.9.0-14.el7_5.6                                   RedHat-7Server-x86_64-errata       \
243 k&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, monospace"&gt;  libvirt-daemon-driver-qemu \
x86_64                              3.9.0-14.el7_5.6                                  \
RedHat-7Server-x86_64-errata                                                          \
714 k&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, monospace"&gt;  \
libvirt-daemon-driver-secret                                   x86_64                 \
3.9.0-14.el7_5.6                                   RedHat-7Server-x86_64-errata       \
210 k&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, monospace"&gt;  \
libvirt-daemon-driver-storage                                 x86_64                  \
3.9.0-14.el7_5.6                                   RedHat-7Server-x86_64-errata       \
173 k&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, monospace"&gt;  \
libvirt-daemon-driver-storage-core                          x86_64                    \
3.9.0-14.el7_5.6                                   RedHat-7Server-x86_64-errata       \
405 k&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, monospace"&gt;  \
libvirt-daemon-driver-storage-disk                          x86_64                    \
3.9.0-14.el7_5.6                                   RedHat-7Server-x86_64-errata       \
182 k&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, monospace"&gt;  \
libvirt-daemon-driver-storage-gluster                     x86_64                      \
3.9.0-14.el7_5.6                                   RedHat-7Server-x86_64-errata       \
183 k&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, monospace"&gt;  \
libvirt-daemon-driver-storage-iscsi                        x86_64                     \
3.9.0-14.el7_5.6                                   RedHat-7Server-x86_64-errata       \
179 k&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, monospace"&gt;  \
libvirt-daemon-driver-storage-logical                     x86_64                      \
3.9.0-14.el7_5.6                                   RedHat-7Server-x86_64-errata       \
183 k&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, monospace"&gt;  \
libvirt-daemon-driver-storage-mpath                        x86_64                     \
3.9.0-14.el7_5.6                                   RedHat-7Server-x86_64-errata       \
178 k&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, monospace"&gt;  \
libvirt-daemon-driver-storage-rbd                           x86_64                    \
3.9.0-14.el7_5.6                                   RedHat-7Server-x86_64-errata       \
185 k&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, monospace"&gt;  \
libvirt-daemon-driver-storage-scsi                          x86_64                    \
3.9.0-14.el7_5.6                                   RedHat-7Server-x86_64-errata       \
179 k&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, monospace"&gt;  libvirt-daemon-kvm         \
x86_64                              3.9.0-14.el7_5.6                                  \
RedHat-7Server-x86_64-errata                                                          \
173 k&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, monospace"&gt;  libvirt-python             \
x86_64                              3.9.0-1.el7                                       \
RedHat-7Server-x86_64-errata                                                          \
335 k&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, monospace"&gt;  mdadm                      \
x86_64                              4.0-13.el7                                        \
RedHat-7Server-x86_64-errata                                                          \
431 k&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, monospace"&gt;  mtools                     \
x86_64                              4.0.18-5.el7                                      \
RedHat-7.1Server-x86_64                                                               \
203 k&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, monospace"&gt;  perl-hivex                 \
x86_64                              1.3.10-6.9.el7                                    \
RedHat-7Server-x86_64-errata                                                          \
41 k&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, monospace"&gt;  python-libguestfs           \
x86_64                              1:1.36.10-6.el7_5.2                              \
RedHat-7Server-x86_64-errata                                                          \
203 k&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, monospace"&gt;  scrub                      \
x86_64                              2.5.2-7.el7                                       \
RedHat-7Server-x86_64-errata                                                          \
41 k&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face="monospace, monospace"&gt;  squashfs-tools              \
x86_64                              4.3-0.21.gitaae0aff4.el7                       \
RedHat-7.1Server-x86_64                                                               \



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190304215423</emailId><senderName>Lars Kellogg-Stedman</senderName><senderEmail>lars@redhat.com</senderEmail><timestampReceived>2019-03-04 21:54:23-0400</timestampReceived><subject>[libvirt-users] How do I close a console connection?</subject><body>

I'm working on (re-) implementing serial console support in virtualbmc
[1], and one of the issues I'm hitting right now is that after
establishing a console connection via...

    self._stream = self._conn.newStream(libvirt.VIR_STREAM_NONBLOCK)
    self._domain.openConsole(None, self._stream, 0)

...I can't figure out how to close the console.  Subsequent calls to
openConsole fail because "a console connection is already open". I
thought maybe I should close the stream, but that doesn't appear to be
possible (there is a finish method, but it just tells me that "this
function is not supported by the connection driver").

[1]: https://github.com/openstack/virtualbmc

Cheers,

-- 
Lars Kellogg-Stedman &lt;lars@redhat.com&gt; | larsks @ {irc,twitter,github}
http://blog.oddbit.com/                |

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190401122841</emailId><senderName>Harsh Gondaliya</senderName><senderEmail>harshgondaliya_vinodbhai@srmuniv.edu.in</senderEmail><timestampReceived>2019-04-01 12:28:41-0400</timestampReceived><subject>[libvirt-users] Error creating virtual network: failed to run '/usr/sbin/dnsmasq --version': : Succe</subject><body>

[Attachment #2 (multipart/alternative)]


I deleted my port virbr0 using brctl command and now when I want to create
a virtual network, it gives me this error:

Error creating virtual network: failed to run '/usr/sbin/dnsmasq
--version': : Success
Here is my systemlog: https://pastebin.com/xjuVnsyL

How to rectify this?

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;I deleted my port virbr0 using brctl \
command and now when I want to create a virtual network, it gives me this \
error:&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Error creating virtual network: failed to run \
'/usr/sbin/dnsmasq --version': : Success&lt;/div&gt;&lt;div&gt;Here is my systemlog:  &lt;a \
href="https://pastebin.com/xjuVnsyL"&gt;https://pastebin.com/xjuVnsyL&lt;/a&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;How \
to rectify this?&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190430142408</emailId><senderName>"R. Diez"</senderName><senderEmail>rdiezmail-temp2@yahoo.de</senderEmail><timestampReceived>2019-04-30 14:24:08-0400</timestampReceived><subject>[libvirt-users] Running all my virtual machines with a low priority</subject><body>

Hi all:

I have an Ubuntu 18.04 system. What is the easiest way to run all of my virtual \
machines with a low priority? Say a "nice" level of 15.

I just do not want my virtual machines to have too much of an impact in any other \
processes on the system.

Thanks in advance,
   rdiez

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20190603020221</emailId><senderName>Joshua Kramer</senderName><senderEmail>joskra42.list@gmail.com</senderEmail><timestampReceived>2019-06-03 02:02:21-0400</timestampReceived><subject>Re: [libvirt-users] Easy solution for custom firewall rules-</subject><body>

Nakta wrote:
&gt; libvirts nwfilter module can achieve that.

I read over those resources and I did what I thought would be correct,
but it's not having any effect.

I created a new nwfilter like this:
&lt;filter name='allow-virbr2-vpn' chain='ipv4' priority='-700'&gt;
  &lt;rule action='accept' direction='in' priority='500'&gt;
    &lt;all state='ESTABLISHED'/&gt;
  &lt;/rule&gt;
  &lt;rule action='accept' direction='out' priority='500'&gt;
    &lt;all state='ESTABLISHED,RELATED'/&gt;
  &lt;/rule&gt;
  &lt;rule action='accept' direction='in' priority='100'&gt;
    &lt;ip dstipaddr='192.168.8.0' dstipmask='24'/&gt;
  &lt;/rule&gt;
  &lt;rule action='accept' direction='out' priority='100'&gt;
    &lt;ip srcipaddr='192.168.8.0' srcipmask='24'/&gt;
  &lt;/rule&gt;
  &lt;rule action='drop' direction='inout' priority='500'&gt;
    &lt;all/&gt;
  &lt;/rule&gt;
&lt;/filter&gt;

I then associated that filter with the Interface device on the VM
server within KVM... and shutdown/restart that VM.
 &lt;interface type='network'&gt;
      &lt;mac address='XX:XX:XX:XX:XX:XX'/&gt;
      &lt;source network='locservers'/&gt;
      &lt;model type='virtio'/&gt;
      &lt;filterref filter='allow-virbr2-vpn'/&gt;
      &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x03'
function='0x0'/&gt;
    &lt;/interface&gt;

After this, nothing happens.  I did 'ebtables --list', and the new
rules aren't there.  I also did the same with iptables as well as
firewalld itself.  The new rules are nowhere to be found.

What did I do incorrectly here?

Thanks!
-JK

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190703180710</emailId><senderName>Roger Jin</senderName><senderEmail>rogerjin@mit.edu</senderEmail><timestampReceived>2019-07-03 18:07:10-0400</timestampReceived><subject>[libvirt-users] Blockpull while domain is shutoff</subject><body>

[Attachment #2 (multipart/alternative)]


Hi Libvirt,
Is there a command that performs the same operation as blockpull while a
domain is shutoff?  I have a backing chain

base &lt;-- A &lt;-- B

that I would like to shorten to

base &lt;-- B

It seems like blockpull B, setting --base &lt;path-to-base&gt; does this, but
only when the domain is running.

Thanks!

Sincerely,
Roger Jin

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;&lt;div&gt;Hi Libvirt,&lt;/div&gt;&lt;div&gt;Is there a command that performs the same \
operation as blockpull while a domain is shutoff?   I have a backing chain \
&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;base &lt;-- A &lt;-- B&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;that I \
would like to shorten to &lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;base &lt;-- \
B&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;It seems like blockpull B, setting --base \
&lt;path-to-base&gt; does this, but only when the domain is running.   \
&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks!&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Sincerely,&lt;/div&gt;&lt;div&gt;Roger \
Jin&lt;br&gt;&lt;/div&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190801081215</emailId><senderName>Jan Horak</senderName><senderEmail>horak@gransy.com</senderEmail><timestampReceived>2019-08-01 08:12:15-0400</timestampReceived><subject>[libvirt-users] Detach disk from VM - virsh (working) vs. PHP (not working)</subject><body>

Hi all, 

i created a script in PHP for create a virtual server with two QCOW2 discs … one is \
our system for installation and second is target system. 

After successfully instalation (create a blank Debian system, prepare all files and \
grub partitions) i need a restart virtual without a installation disk.

If i use Virsh:

detach-disk --domain debian-test2 --persistent --target vda
reset debian-test2

everything works well.

If i use a PHP, there is „complicated" way and „simple" way:

1, complicated:

libvirt_domain_destroy($domain);
libvirt_domain_undefine($domain);

$xml = domain_create_xml($name,$uuid,$memory,$cpu,$vnc,$mac);
$domain = libvirt_domain_define_xml($server-&gt;conn, $xml);
libvirt_domain_disk_add($domain, "/users/".$name.".img", "vdb", "virtio", "qcow2", \
NULL); libvirt_domain_create($domain);

(or instead libvirt_domain_disk_add i can define disk directly in XML)

But in this case, the server will not boot (GRUB error)

2, simple:

libvirt_domain_disk_remove($domain,"vda");
libvirt_domain_reboot($domain);

The problem of this solution is thats not working. The remove disk is failing with \
error „Unable attach disk" - i looks to source code, and yes, there is a mystake \
with „attach"/„detach", but main problem i see in log from libvirt: 

Aug  1 02:57:05 ry libvirtd[19051]: missing source information for device vda

I try to put source detail to xml in source of PHP module 

libvirt-domain.c:

  822	    if (asprintf(&amp;newXml,
  823	                 "    &lt;disk type='file' device='disk'&gt;\n"
  824	                 "      &lt;target dev='%s'/&gt;\n"
  825	                 "    &lt;/disk&gt;", dev) &lt; 0) {
  826	        set_error("Out of memory" TSRMLS_CC);
  827	        goto error;
  828	    }

but my attempts was unsuccesfull (i'm not C programmer).

Questions:

A, why complicated way is not working and system dont want boot (GRUB error) if virsh \
works fine B, why libvirt_domain_disk_remove is not work ? I use libvirt and \
libvirt-php latest from git.

Thank you, 
Jan

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20190902143129</emailId><senderName>Francesc Guasch</senderName><senderEmail>frankie@telecos.upc.edu</senderEmail><timestampReceived>2019-09-02 14:31:29-0400</timestampReceived><subject>[libvirt-users] KVM NAT stops from working</subject><body>

Hi. First of all thank you for the work you are doing with libvirt.
I am not sure this is the right place to ask, I'd appreciate
if you can give me any hint or directions.

I have several similar KVM Linux boxes and one of them has a really
strange behavior with the KVM NAT: It just suddenly stops from
working.

This is a Linux Ubuntu Server 19.04 with
  - libvirt-bin 4.0.0
  - qemu-kvm 1:2.11

Everything works fine and then suddenly the virtual machines
can't reach outside. If I run a tcpdump in the host I see
the NAT isn't working.

When the server just boots I can see the packets with the
server address going out:

     x.y.z.w.49138 &gt; 8.8.8.8.53

Then, it may be some hours or days later, instead the server
address I see the internal domains address:


     192.168.122.33.19132 &gt; 8.8.8.8.53
     ^^^^^^^^^^^^^^

I try to restart the iptables but it won't help.

Any hints ? Thank you very much

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20191001083318</emailId><senderName>Andrea Bolognani</senderName><senderEmail>abologna@redhat.com</senderEmail><timestampReceived>2019-10-01 08:33:18-0400</timestampReceived><subject>Re: [libvirt-users] Internal error reported by libvirt while creating a VM</subject><body>

On Mon, 2019-09-30 at 15:43 -0400, Ajay Kumar wrote:
&gt; Hi, am Ajay Kumar.

Please don't CC random libvirt developers when posting to the mailing
lists.

&gt; I am trying to create a virtual machine on the remote host (where libvirt 5.8.0) \
&gt; was installed using a virtual machine manager which are running on the local ubuntu \
&gt; machine. 
&gt; The specification of my remote host are:
&gt; Hypervisor: KVM
&gt; QEMU version: QEMU emulator version 2.4.0.1, Copyright (c) 2003-2008 Fabrice \
&gt; Bellard The below error is propagating when I am trying to install KVM-VMI \
&gt; (https://github.com/KVM-VMI/kvm-vmi/tree/kvmi) with modified QEMU, and there is a \
&gt; modified QEMU involved, in  /usr/local/bin/qemu-system-x86_64.  
&gt; The below particular error propagating when I am trying to create a virtual machine \
&gt; using VMM gui (virt-manager). 
&gt; 
&gt; Unable to complete install: 'internal error: process exited while connecting to \
&gt; monitor:  (process:7400): GLib-WARNING **: 18:19:45.044: \
&gt; ../../../../glib/gmem.c:489: custom memory allocation vtable not supported \
&gt; 2019-09-30T18:19:45.046714Z qemu-system-x86_64: -msg timestamp=on: Unsupported \
&gt; machine type Use -machine help to list supported machines!'
&gt; 
&gt; Traceback (most recent call last):
&gt; File "/usr/share/virt-manager/virtManager/asyncjob.py", line 89, in cb_wrapper
&gt; callback(asyncjob, *args, **kwargs)
&gt; File "/usr/share/virt-manager/virtManager/create.py", line 2553, in \
&gt; _do_async_install guest.start_install(meter=meter)
&gt; File "/usr/share/virt-manager/virtinst/guest.py", line 498, in start_install
&gt; doboot, transient)
&gt; File "/usr/share/virt-manager/virtinst/guest.py", line 434, in _create_guest
&gt; domain = self.conn.createXML(install_xml or final_xml, 0)
&gt; File "/usr/lib/python2.7/dist-packages/libvirt.py", line 3603, in createXML
&gt; if ret is None:raise libvirtError('virDomainCreateXML() failed', conn=self)
&gt; libvirtError: internal error: process exited while connecting to monitor: 
&gt; (process:7400): GLib-WARNING **: 18:19:45.044: ../../../../glib/gmem.c:489: custom \
&gt; memory allocation vtable not supported 2019-09-30T18:19:45.046714Z \
&gt; qemu-system-x86_64: -msg timestamp=on: Unsupported machine type Use -machine help \
&gt; to list supported machines!

My guess would be that your modified QEMU does not support whatever
machine type the guest is configured to use.

What's in the

  &lt;type arch='x86_64' machine='xxx'&gt;hvm&lt;/type&gt;

element, and is that machine type listed in the output of

  qemu-system-x86_64 -machine help

?

-- 
Andrea Bolognani / Red Hat / Virtualization

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20191104085507</emailId><senderName>"John Y."</senderName><senderEmail>wjseven1707@gmail.com</senderEmail><timestampReceived>2019-11-04 08:55:07-0400</timestampReceived><subject>[libvirt-users] It takes long time to start kvm virtual machine with nwfilter in docker container.</subject><body>

[Attachment #2 (multipart/alternative)]


1.  It takes minutes to start the virtual machine when I add "filterref" to
libvirt.xml and run command "virsh start  vm1".
It also takes minutes to destroy the virtual machine.

&lt;interface type="bridge"&gt;
  &lt;mac address="fa:16:3e:fa:f7:94"/&gt;
  &lt;target dev="tap69e948b0-bf"/&gt;
  &lt;source bridge="br02"/&gt;
  &lt;model type="virtio"/&gt;
  &lt;filterref filter="no-arp-spoofing"&gt;
    &lt;parameter name="IP" value="192.168.2.2"/&gt;
    &lt;parameter name="MAC" value="fa:16:3e:fa:f7:94"/&gt;
  &lt;/filterref&gt;
&lt;/interface&gt;

2. I found some logs in /var/log/libvirt/libvirtd.log


2019-11-04 03:46:18.495+0000: 15257: info : virFirewallApplyRule:815 :
Applying rule '/usr/sbin/ebtables --concurrent -t nat -D PREROUTING -i
tap69e948b0-bf -j libvirt-J-tap69e948b0-bf'
2019-11-04 03:46:18.495+0000: 15257: debug : virCommandRunAsync:2499 :
About to run /usr/sbin/ebtables --concurrent -t nat -D PREROUTING -i
tap69e948b0-bf -j libvirt-J-tap69e948b0-bf
2019-11-04 03:46:18.496+0000: 15257: debug : virFileClose:111 : Closed fd 24
2019-11-04 03:46:18.496+0000: 15257: debug : virFileClose:111 : Closed fd 26
2019-11-04 03:46:18.496+0000: 15257: debug : virFileClose:111 : Closed fd 29
2019-11-04 03:46:18.496+0000: 15257: debug : virCommandRunAsync:2502 :
Command result 0, with PID 16291
2019-11-04 03:46:19.242+0000: 15257: debug : virCommandRun:2350 : Result
invalid value 255, stdout: '' stderr: '2019-11-04 03:46:19.239+0000: 16291:
debug : virFileClose:111 : Closed fd 26
2019-11-04 03:46:19.239+0000: 16291: debug : virFileClose:111 : Closed fd 29
2019-11-04 03:46:19.239+0000: 16291: debug : virFileClose:111 : Closed fd 24
Illegal target name 'libvirt-J-tap69e948b0-bf'.
'
2019-11-04 03:46:19.242+0000: 15257: debug : virFirewallApplyRuleDirect:704
: Ignoring error running command
2019-11-04 03:46:19.242+0000: 15257: debug : virFileClose:111 : Closed fd 25
2019-11-04 03:46:19.243+0000: 15257: debug : virFileClose:111 : Closed fd 28
2019-11-04 03:46:19.243+0000: 15257: info : virFirewallApplyRule:815 :
Applying rule '/usr/sbin/ebtables --concurrent -t nat -D POSTROUTING -o
tap69e948b0-bf -j libvirt-P-tap69e948b0-bf'
2019-11-04 03:46:19.243+0000: 15257: debug : virCommandRunAsync:2499 :
About to run /usr/sbin/ebtables --concurrent -t nat -D POSTROUTING -o
tap69e948b0-bf -j libvirt-P-tap69e948b0-bf
2019-11-04 03:46:19.243+0000: 15257: debug : virFileClose:111 : Closed fd 24
2019-11-04 03:46:19.243+0000: 15257: debug : virFileClose:111 : Closed fd 26
2019-11-04 03:46:19.244+0000: 15257: debug : virFileClose:111 : Closed fd 29
2019-11-04 03:46:19.244+0000: 15257: debug : virCommandRunAsync:2502 :
Command result 0, with PID 16292
2019-11-04 03:46:19.990+0000: 15257: debug : virCommandRun:2350 : Result
invalid value 255, stdout: '' stderr: '2019-11-04 03:46:19.986+0000: 16292:
debug : virFileClose:111 : Closed fd 26
2019-11-04 03:46:19.986+0000: 16292: debug : virFileClose:111 : Closed fd 29
2019-11-04 03:46:19.986+0000: 16292: debug : virFileClose:111 : Closed fd 24
Illegal target name 'libvirt-P-tap69e948b0-bf'.
'
2019-11-04 03:46:19.990+0000: 15257: debug : virFirewallApplyRuleDirect:704
: Ignoring error running command
2019-11-04 03:46:19.990+0000: 15257: debug : virFileClose:111 : Closed fd 25
2019-11-04 03:46:19.990+0000: 15257: debug : virFileClose:111 : Closed fd 28

3. It works fine on hosts.
4. It works fine in other host's libvirt container.


How can I solve this problem?

Best regards,
John

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;1.   It takes minutes to start the virtual machine when I add \
"filterref" to libvirt.xml and run command "virsh start   \
vm1".&lt;br&gt;It also takes minutes to destroy the virtual \
machine.&lt;br&gt;&lt;br&gt;&lt;interface type="bridge"&gt;&lt;br&gt;   &lt;mac \
address="fa:16:3e:fa:f7:94"/&gt;&lt;br&gt;   &lt;target \
dev="tap69e948b0-bf"/&gt;&lt;br&gt;   &lt;source bridge="br02"/&gt;&lt;br&gt; \
&lt;model type="virtio"/&gt;&lt;br&gt;   &lt;filterref \
filter="no-arp-spoofing"&gt;&lt;br&gt;      &lt;parameter name="IP" \
value="192.168.2.2"/&gt;&lt;br&gt;      &lt;parameter name="MAC" \
value="fa:16:3e:fa:f7:94"/&gt;&lt;br&gt;   \
&lt;/filterref&gt;&lt;br&gt;&lt;/interface&gt;&lt;br&gt;&lt;br&gt;2. I found some logs in \
/var/log/libvirt/libvirtd.log&lt;br&gt;&lt;br&gt;&lt;br&gt;2019-11-04 03:46:18.495+0000: 15257: info : \
virFirewallApplyRule:815 : Applying rule '/usr/sbin/ebtables --concurrent -t nat \
-D PREROUTING -i tap69e948b0-bf -j libvirt-J-tap69e948b0-bf'&lt;br&gt;2019-11-04 \
03:46:18.495+0000: 15257: debug : virCommandRunAsync:2499 : About to run \
/usr/sbin/ebtables --concurrent -t nat -D PREROUTING -i tap69e948b0-bf -j \
libvirt-J-tap69e948b0-bf&lt;br&gt;2019-11-04 03:46:18.496+0000: 15257: debug : \
virFileClose:111 : Closed fd 24&lt;br&gt;2019-11-04 03:46:18.496+0000: 15257: debug : \
virFileClose:111 : Closed fd 26&lt;br&gt;2019-11-04 03:46:18.496+0000: 15257: debug : \
virFileClose:111 : Closed fd 29&lt;br&gt;2019-11-04 03:46:18.496+0000: 15257: debug : \
virCommandRunAsync:2502 : Command result 0, with PID 16291&lt;br&gt;2019-11-04 \
03:46:19.242+0000: 15257: debug : virCommandRun:2350 : Result invalid value 255, \
stdout: '' stderr: '2019-11-04 03:46:19.239+0000: 16291: debug : \
virFileClose:111 : Closed fd 26&lt;br&gt;2019-11-04 03:46:19.239+0000: 16291: debug : \
virFileClose:111 : Closed fd 29&lt;br&gt;2019-11-04 03:46:19.239+0000: 16291: debug : \
virFileClose:111 : Closed fd 24&lt;br&gt;Illegal target name \
'libvirt-J-tap69e948b0-bf'.&lt;br&gt;'&lt;br&gt;2019-11-04 03:46:19.242+0000: 15257: \
debug : virFirewallApplyRuleDirect:704 : Ignoring error running command&lt;br&gt;2019-11-04 \
03:46:19.242+0000: 15257: debug : virFileClose:111 : Closed fd 25&lt;br&gt;2019-11-04 \
03:46:19.243+0000: 15257: debug : virFileClose:111 : Closed fd 28&lt;br&gt;2019-11-04 \
03:46:19.243+0000: 15257: info : virFirewallApplyRule:815 : Applying rule \
'/usr/sbin/ebtables --concurrent -t nat -D POSTROUTING -o tap69e948b0-bf -j \
libvirt-P-tap69e948b0-bf'&lt;br&gt;2019-11-04 03:46:19.243+0000: 15257: debug : \
virCommandRunAsync:2499 : About to run /usr/sbin/ebtables --concurrent -t nat -D \
POSTROUTING -o tap69e948b0-bf -j libvirt-P-tap69e948b0-bf&lt;br&gt;2019-11-04 \
03:46:19.243+0000: 15257: debug : virFileClose:111 : Closed fd 24&lt;br&gt;2019-11-04 \
03:46:19.243+0000: 15257: debug : virFileClose:111 : Closed fd 26&lt;br&gt;2019-11-04 \
03:46:19.244+0000: 15257: debug : virFileClose:111 : Closed fd 29&lt;br&gt;2019-11-04 \
03:46:19.244+0000: 15257: debug : virCommandRunAsync:2502 : Command result 0, with \
PID 16292&lt;br&gt;2019-11-04 03:46:19.990+0000: 15257: debug : virCommandRun:2350 : Result \
invalid value 255, stdout: '' stderr: '2019-11-04 03:46:19.986+0000: \
16292: debug : virFileClose:111 : Closed fd 26&lt;br&gt;2019-11-04 03:46:19.986+0000: \
16292: debug : virFileClose:111 : Closed fd 29&lt;br&gt;2019-11-04 03:46:19.986+0000: \
16292: debug : virFileClose:111 : Closed fd 24&lt;br&gt;Illegal target name \
'libvirt-P-tap69e948b0-bf'.&lt;br&gt;'&lt;br&gt;2019-11-04 03:46:19.990+0000: 15257: \
debug : virFirewallApplyRuleDirect:704 : Ignoring error running command&lt;br&gt;2019-11-04 \
03:46:19.990+0000: 15257: debug : virFileClose:111 : Closed fd 25&lt;br&gt;2019-11-04 \
03:46:19.990+0000: 15257: debug : virFileClose:111 : Closed fd 28&lt;br&gt;&lt;br&gt;3. It works \
fine on hosts.&lt;br&gt;4. It works fine in other host's libvirt \
container.&lt;br&gt;&lt;br&gt;&lt;br&gt;How can I solve this problem?&lt;br&gt;&lt;br&gt;Best \
regards,&lt;br&gt;John&lt;br&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20191203095042</emailId><senderName>"Marc Roos"</senderName><senderEmail>m.roos@f1-outsourcing.eu</senderEmail><timestampReceived>2019-12-03 09:50:42-0400</timestampReceived><subject>[libvirt-users] Live migrate with virsh migrate</subject><body>


 
When I migrate a guest from svr1 to svr2 and shutdown the guest on svr2. 
I cannot start it anymore because the xml is not there. How can I make 
sure this xml is automatically stored so I can start the guest again on 
svr2?



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20191203113703</emailId><senderName>Peter Krempa</senderName><senderEmail>pkrempa@redhat.com</senderEmail><timestampReceived>2019-12-03 11:37:03-0400</timestampReceived><subject>Re: [libvirt-users] Live migrate with virsh migrate</subject><body>

On Tue, Dec 03, 2019 at 10:50:42 +0100, Marc Roos wrote:
&gt; 
&gt;  
&gt; When I migrate a guest from svr1 to svr2 and shutdown the guest on svr2. 
&gt; I cannot start it anymore because the xml is not there. How can I make 
&gt; sure this xml is automatically stored so I can start the guest again on 
&gt; svr2?

virsh migrate --help says:

 --persistent     persist VM on destination

that will make sure that the config will stay on the destination after
you turn off the VM

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20191104100409</emailId><senderName>Daniel =?utf-8?B?UC4gQmVycmFuZ8Op?=</senderName><senderEmail>berrange@redhat.com</senderEmail><timestampReceived>2019-11-04 10:04:09-0400</timestampReceived><subject>Re: [libvirt-users] It takes long time to start kvm virtual machine with nwfilter in docker containe</subject><body>

On Mon, Nov 04, 2019 at 04:55:07PM +0800, John Y. wrote:
&gt; 1.  It takes minutes to start the virtual machine when I add "filterref" to
&gt; libvirt.xml and run command "virsh start  vm1".
&gt; It also takes minutes to destroy the virtual machine.

You don't mention which version of libvirt you have...

My guess is that your docker container has set an enourmous ulimit
for max files. On a normal host it is 1024, but on docker I've seen
it default to 1 million.

This impacts libvirt when it spawns processes, which is common with
nwfilter in particular, because we must close all open file handles.
In v5.6.0 we  added code to let libvirt use /proc/$PID/fd to close
file handles, which is massively faster when ulimits are high.


Regards,
Daniel
-- 
|: https://berrange.com      -o-    https://www.flickr.com/photos/dberrange :|
|: https://libvirt.org         -o-            https://fstop138.berrange.com :|
|: https://entangle-photo.org    -o-    https://www.instagram.com/dberrange :|

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20191002073406</emailId><senderName>Andrea Bolognani</senderName><senderEmail>abologna@redhat.com</senderEmail><timestampReceived>2019-10-02 07:34:06-0400</timestampReceived><subject>Re: [libvirt-users] Internal error reported by libvirt while creating a VM</subject><body>

On Tue, 2019-10-01 at 17:55 -0400, Ajay Kumar wrote:
&gt; Hi Andrea,
&gt; 
&gt; Thank you for your response. Sure I don't CC  to libvirt developers.

Please keep the list in the loop, though! I've re-added it.

&gt; I am getting an error while creating a Win10 virtual machine using VMM or \
&gt; virt-manager GUI. I could configure the windows 10 quest using its XML file only \
&gt; ofter creating a VM using virt-manager GUI in the following the path \
&gt; /etc/libvirt/qemu. 
&gt; The modified QEMU emulator is running correctly 
&gt; @ubuntu-kvm3:/usr/local/bin$ ls
&gt; ivshmem-client  qemu-ga   qemu-io   qemu-pr-helper      virsh       \
&gt; virt-host-validate  virt-pki-validate  vmi-dump-memory  vmi-process-list  \
&gt; vmi-win-offsets ivshmem-server  qemu-img  qemu-nbd  qemu-system-x86_64  virt-admin  \
&gt; virt-login-shell    virt-xml-validate  vmi-module-list  vmi-win-guid

This only proves that you've installed it, not that it works.

And as I said, the modified binary probably works fine on its own but
libvirt might not be able to drive it, at least without tweaks.

&gt; @ubuntu-kvm3:/etc/libvirt/qemu$ ls
&gt; networks

Just for the record, you're not supposed to modify files in
/etc/libvirt/qemu directly; use virsh instead.

&gt; I couldn't see guest XML file here(because the VM creation was not done).
&gt; attached snap displaying error while creating a VM. 

If you run

  $ virt-manager --debug

from the command line you will get a lot of output, including the
XML that's passed to libvirt. Please attempt the installation again,
capture that output in a plain text file and send it to the list as
an attachment.

Also run

  $ /usr/local/bin/qemu-system-x86_64 -machine help

and attach the output of that command, too.

That should help us figure out what's wrong.

-- 
Andrea Bolognani / Red Hat / Virtualization

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20190903161512</emailId><senderName>Laine Stump</senderName><senderEmail>laine@redhat.com</senderEmail><timestampReceived>2019-09-03 16:15:12-0400</timestampReceived><subject>Re: [libvirt-users] KVM NAT stops from working</subject><body>

On 9/2/19 10:31 AM, Francesc Guasch wrote:
&gt; Hi. First of all thank you for the work you are doing with libvirt.
&gt; I am not sure this is the right place to ask, I'd appreciate
&gt; if you can give me any hint or directions.
&gt; 
&gt; I have several similar KVM Linux boxes and one of them has a really
&gt; strange behavior with the KVM NAT: It just suddenly stops from
&gt; working.
&gt; 
&gt; This is a Linux Ubuntu Server 19.04 with
&gt;   - libvirt-bin 4.0.0
&gt;   - qemu-kvm 1:2.11
&gt; 
&gt; Everything works fine and then suddenly the virtual machines
&gt; can't reach outside. If I run a tcpdump in the host I see
&gt; the NAT isn't working.
&gt; 
&gt; When the server just boots I can see the packets with the
&gt; server address going out:
&gt; 
&gt;      x.y.z.w.49138 &gt; 8.8.8.8.53
&gt; 
&gt; Then, it may be some hours or days later, instead the server
&gt; address I see the internal domains address:
&gt; 
&gt; 
&gt;      192.168.122.33.19132 &gt; 8.8.8.8.53
&gt;      ^^^^^^^^^^^^^^
&gt; 
&gt; I try to restart the iptables but it won't help.
&gt; 
&gt; Any hints ? Thank you very much

1) On a freshly booted machine with running clients connected to 
libvirt's default network (and successfully sending/receiving traffic, 
of course :-), get a dump of all active iptables rules with

    iptables-save &gt;iptables-working.txt

2) At whatever later time when you notice that the NAT is no longer 
working properly, get another dump of all the rules with

    iptables-save &gt;iptables-broken.txt

and compare those two files to see what has changed.

Most likely some other piece of software (a firewall management utility 
maybe?) has loaded a new rule that takes precedence over one of the 
rules added by libvirt.

If seeing the rule that was added doesn't point you at the culprit, you 
can see if restarting libvirtd will fix your problem - whenever libvirtd 
is restarted, all iptables rules associated with libvirt's virtual 
networks are reloaded (which will put them back at the beginning of the 
chain, thus fixing any broken precedence).

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190903172051</emailId><senderName>Francesc Guasch</senderName><senderEmail>frankie@telecos.upc.edu</senderEmail><timestampReceived>2019-09-03 17:20:51-0400</timestampReceived><subject>Re: [libvirt-users] KVM NAT stops from working</subject><body>

El 3/9/19 a les 18:15, Laine Stump ha escrit:
&gt; On 9/2/19 10:31 AM, Francesc Guasch wrote:
&gt;&gt; Hi. First of all thank you for the work you are doing with libvirt.
&gt;&gt; I am not sure this is the right place to ask, I'd appreciate
&gt;&gt; if you can give me any hint or directions.
&gt;&gt;
&gt;&gt; I have several similar KVM Linux boxes and one of them has a really
&gt;&gt; strange behavior with the KVM NAT: It just suddenly stops from
&gt;&gt; working.

&gt;&gt; Any hints ? Thank you very much
&gt; 
&gt; 1) On a freshly booted machine with running clients connected to
&gt; libvirt's default network (and successfully sending/receiving traffic,
&gt; of course :-), get a dump of all active iptables rules with
&gt; 
&gt;    iptables-save &gt;iptables-working.txt
&gt; 
&gt; 2) At whatever later time when you notice that the NAT is no longer
&gt; working properly, get another dump of all the rules with
&gt; 
&gt;    iptables-save &gt;iptables-broken.txt
&gt; 
&gt; and compare those two files to see what has changed.
&gt; 

Thank you very much Laine, good point !

I am waiting for it to fail again to compare both iptables.

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190802092707</emailId><senderName>Martin Kletzander</senderName><senderEmail>mkletzan@redhat.com</senderEmail><timestampReceived>2019-08-02 09:27:07-0400</timestampReceived><subject>Re: [libvirt-users] Detach disk from VM - virsh (working) vs. PHP (not working)</subject><body>

[Attachment #2 (multipart/signed)]


On Thu, Aug 01, 2019 at 10:12:15AM +0200, Jan Horak wrote:
&gt; Hi all,
&gt; 
&gt; i created a script in PHP for create a virtual server with two QCOW2 discs … one \
&gt; is our system for installation and second is target system. 
&gt; After successfully instalation (create a blank Debian system, prepare all files and \
&gt; grub partitions) i need a restart virtual without a installation disk. 
&gt; If i use Virsh:
&gt; 
&gt; detach-disk --domain debian-test2 --persistent --target vda
&gt; reset debian-test2
&gt; 

Hi,

I cannot really help you with the PHP part and I'm not sure about more things,
but this particular scenario is something that libvirt is actually prepared to
do (kind of) and for example virt-install uses it.  The approach is as follows:

1) You create the XML that you want the VM to have when installing the machine,
   let's call it the "install xml".

2) You create the XML that the VM should start with when it is already installed
   and it is the one that will persist in the libvirt configuration for long
   time (well, longer than the install xml).  Let's call this the "persistent xml".

3) You define the VM using the persistent xml.  That will get you a VM that is
   not started.

4) Then, you start the machine with the install xml, using the create API
   (analogous to virsh create vm.xml).  Just make sure the name and UUID are the
   same.

That will get you a VM running with the install xml that, when turned off and
then started again (without reboot/reset/restart, you need to have it shut down
completely before starting it) will start with the persistent xml.  No need to
have support for disk hot-(un)plug, no magic.

Even better way to use this is registering a callback for the VM's lifecycle
event, starting the VM after the event was fired.  That way you can automate the
installation to turn off the machine after it is completed and there is no need
for any polling.  I'm not sure, however, how relevant that is or if it is
possible to be used from the PHP bindings.

Have a nice day,
Martin


["signature.asc" (application/pgp-signature)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190802121543</emailId><senderName>Michal Privoznik</senderName><senderEmail>mprivozn@redhat.com</senderEmail><timestampReceived>2019-08-02 12:15:43-0400</timestampReceived><subject>Re: [libvirt-users] Detach disk from VM - virsh (working) vs. PHP (not working)</subject><body>

On 8/1/19 10:12 AM, Jan Horak wrote:
&gt; Hi all,
&gt; 
&gt; i created a script in PHP for create a virtual server with two QCOW2 discs … one \
&gt; is our system for installation and second is target system. 
&gt; After successfully instalation (create a blank Debian system, prepare all files and \
&gt; grub partitions) i need a restart virtual without a installation disk. 
&gt; If i use Virsh:
&gt; 
&gt; detach-disk --domain debian-test2 --persistent --target vda
&gt; reset debian-test2
&gt; 
&gt; everything works well.
&gt; 
&gt; If i use a PHP, there is „complicated" way and „simple" way:
&gt; 
&gt; 1, complicated:
&gt; 
&gt; libvirt_domain_destroy($domain);
&gt; libvirt_domain_undefine($domain);
&gt; 
&gt; $xml = domain_create_xml($name,$uuid,$memory,$cpu,$vnc,$mac);
&gt; $domain = libvirt_domain_define_xml($server-&gt;conn, $xml);
&gt; libvirt_domain_disk_add($domain, "/users/".$name.".img", "vdb", "virtio", "qcow2", \
&gt; NULL); libvirt_domain_create($domain);
&gt; 
&gt; (or instead libvirt_domain_disk_add i can define disk directly in XML)
&gt; 
&gt; But in this case, the server will not boot (GRUB error)

Question is, how GRUB refers to the disk where kernel is to be found. 
Also, I suspect it is not GRUB that is complaining, but SeaBIOS which 
hasn't found any bootable device. It's only an assumption becasue I 
don't know how domain_create_xml() works - it's not a libvirt-php 
function. There are two possibilities here:

1) make sure domain_create_xml() sets boot devices
2) construct disk XML yourself, and put "&lt;boot order='N'/&gt;" into it

&gt; 
&gt; 2, simple:
&gt; 
&gt; libvirt_domain_disk_remove($domain,"vda");
&gt; libvirt_domain_reboot($domain);
&gt; 
&gt; The problem of this solution is thats not working. The remove disk is failing with \
&gt; error „Unable attach disk" - i looks to source code, and yes, there is a mystake \
&gt; with „attach"/„detach", but main problem i see in log from libvirt:

Oh, that's only typo in the error message. In fact the detach API is 
called. And it fails.

&gt; 
&gt; Aug  1 02:57:05 ry libvirtd[19051]: missing source information for device vda
&gt; 
&gt; I try to put source detail to xml in source of PHP module
&gt; 
&gt; libvirt-domain.c:
&gt; 
&gt; 822	    if (asprintf(&amp;newXml,
&gt; 823	                 "    &lt;disk type='file' device='disk'&gt;\n"
&gt; 824	                 "      &lt;target dev='%s'/&gt;\n"
&gt; 825	                 "    &lt;/disk&gt;", dev) &lt; 0) {
&gt; 826	        set_error("Out of memory" TSRMLS_CC);
&gt; 827	        goto error;
&gt; 828	    }
&gt; 
&gt; but my attempts was unsuccesfull (i'm not C programmer).

Yes, this minimalistic XML is not good as detach API requires full 
device XML. I'll fix this soon.

&gt; 
&gt; Questions:
&gt; 
&gt; A, why complicated way is not working and system dont want boot (GRUB error) if \
&gt; virsh works fine B, why libvirt_domain_disk_remove is not work ? I use libvirt and \
&gt; libvirt-php latest from git.

I've pushed fixes here:


Please give it a try.

Michal

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20190802162633</emailId><senderName>Jan Horak</senderName><senderEmail>horak@gransy.com</senderEmail><timestampReceived>2019-08-02 16:26:33-0400</timestampReceived><subject>Re: [libvirt-users] Detach disk from VM - virsh (working) vs. PHP (not working)</subject><body>

Thank you for your help!

1, i used vda as install disk and vdb as target disk, because i boot from the first. \
After setup boot order flag i was able change install disk to vdb and target disk to \
vda. With this configuration when i boot from vdb i can install OS with grub and \
after it redefine XML without vdb without problem. Thanks a lot.

2, maybe i have something wrong, but still not working:

Now in libvirt log i got error: device not found: no target device vdb

but:

from VPS:

root@debian:~# ls /dev/vd*
/dev/vda  /dev/vda1  /dev/vdb  /dev/vdb1

from XML (virsh dumpxml):

    &lt;disk type='file' device='disk'&gt;
      &lt;driver name='qemu' type='qcow2'/&gt;
      &lt;source file='/users/debian-test2.img'/&gt;
      &lt;backingStore/&gt;
      &lt;target dev='vda' bus='virtio'/&gt;
      &lt;alias name='virtio-disk0'/&gt;
      &lt;address type='pci' domain='0x0000' bus='0x01' slot='0x00' function='0x0'/&gt;
    &lt;/disk&gt;
    &lt;disk type='file' device='disk'&gt;
      &lt;driver name='qemu' type='qcow2'/&gt;
      &lt;source file='/users/debian-test2-install.img'/&gt;
      &lt;backingStore/&gt;
      &lt;target dev='vdb' bus='virtio'/&gt;
      &lt;boot order='1'/&gt;
      &lt;alias name='virtio-disk1'/&gt;
      &lt;address type='pci' domain='0x0000' bus='0x04' slot='0x00' function='0x0'/&gt;
    &lt;/disk&gt;

and from libvirt_domain_get_disk_devices($domain):

Array ( [0] =&gt; vda [1] =&gt; vdb [num] =&gt; 2 )

As you see, there is vdb device in all cases.

PHP code is very simple:

$server = libvirt_connect("qemu+tls://".$ip.":".$port."/system", false);
$domain = libvirt_domain_lookup_by_name($server, "debian-test2");
libvirt_domain_disk_remove($domain,"vdb");
print_r(libvirt_get_last_error());

res: Unable to detach disk

&gt; 2. 8. 2019 v 14:15, Michal Privoznik &lt;mprivozn@redhat.com&gt;:
&gt; 
&gt; On 8/1/19 10:12 AM, Jan Horak wrote:
&gt; &gt; Hi all,
&gt; &gt; i created a script in PHP for create a virtual server with two QCOW2 discs … \
&gt; &gt; one is our system for installation and second is target system. After \
&gt; &gt; successfully instalation (create a blank Debian system, prepare all files and \
&gt; &gt; grub partitions) i need a restart virtual without a installation disk. If i use \
&gt; &gt; Virsh: detach-disk --domain debian-test2 --persistent --target vda
&gt; &gt; reset debian-test2
&gt; &gt; everything works well.
&gt; &gt; If i use a PHP, there is „complicated" way and „simple" way:
&gt; &gt; 1, complicated:
&gt; &gt; libvirt_domain_destroy($domain);
&gt; &gt; libvirt_domain_undefine($domain);
&gt; &gt; $xml = domain_create_xml($name,$uuid,$memory,$cpu,$vnc,$mac);
&gt; &gt; $domain = libvirt_domain_define_xml($server-&gt;conn, $xml);
&gt; &gt; libvirt_domain_disk_add($domain, "/users/".$name.".img", "vdb", "virtio", \
&gt; &gt; "qcow2", NULL); libvirt_domain_create($domain);
&gt; &gt; (or instead libvirt_domain_disk_add i can define disk directly in XML)
&gt; &gt; But in this case, the server will not boot (GRUB error)
&gt; 
&gt; Question is, how GRUB refers to the disk where kernel is to be found. Also, I \
&gt; suspect it is not GRUB that is complaining, but SeaBIOS which hasn't found any \
&gt; bootable device. It's only an assumption becasue I don't know how \
&gt; domain_create_xml() works - it's not a libvirt-php function. There are two \
&gt; possibilities here: 
&gt; 1) make sure domain_create_xml() sets boot devices
&gt; 2) construct disk XML yourself, and put "&lt;boot order='N'/&gt;" into it
&gt; 
&gt; &gt; 2, simple:
&gt; &gt; libvirt_domain_disk_remove($domain,"vda");
&gt; &gt; libvirt_domain_reboot($domain);
&gt; &gt; The problem of this solution is thats not working. The remove disk is failing \
&gt; &gt; with error „Unable attach disk" - i looks to source code, and yes, there is a \
&gt; &gt; mystake with „attach"/„detach", but main problem i see in log from libvirt:
&gt; 
&gt; Oh, that's only typo in the error message. In fact the detach API is called. And it \
&gt; fails. 
&gt; &gt; Aug  1 02:57:05 ry libvirtd[19051]: missing source information for device vda
&gt; &gt; I try to put source detail to xml in source of PHP module
&gt; &gt; libvirt-domain.c:
&gt; &gt; 822	    if (asprintf(&amp;newXml,
&gt; &gt; 823	                 "    &lt;disk type='file' device='disk'&gt;\n"
&gt; &gt; 824	                 "      &lt;target dev='%s'/&gt;\n"
&gt; &gt; 825	                 "    &lt;/disk&gt;", dev) &lt; 0) {
&gt; &gt; 826	        set_error("Out of memory" TSRMLS_CC);
&gt; &gt; 827	        goto error;
&gt; &gt; 828	    }
&gt; &gt; but my attempts was unsuccesfull (i'm not C programmer).
&gt; 
&gt; Yes, this minimalistic XML is not good as detach API requires full device XML. I'll \
&gt; fix this soon. 
&gt; &gt; Questions:
&gt; &gt; A, why complicated way is not working and system dont want boot (GRUB error) if \
&gt; &gt; virsh works fine B, why libvirt_domain_disk_remove is not work ? I use libvirt \
&gt; &gt; and libvirt-php latest from git.
&gt; 
&gt; I've pushed fixes here:
&gt; 
&gt; 
&gt; Please give it a try.
&gt; 
&gt; Michal


_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20190803065416</emailId><senderName>Michal Prívozník</senderName><senderEmail>mprivozn@redhat.com</senderEmail><timestampReceived>2019-08-03 06:54:16-0400</timestampReceived><subject>Re: [libvirt-users] Detach disk from VM - virsh (working) vs. PHP (not working)</subject><body>

On 8/2/19 6:26 PM, Jan Horak wrote:
&gt; Thank you for your help!
&gt; 
&gt; 1, i used vda as install disk and vdb as target disk, because i boot from the \
&gt; first. After setup boot order flag i was able change install disk to vdb and target \
&gt; disk to vda. With this configuration when i boot from vdb i can install OS with \
&gt; grub and after it redefine XML without vdb without problem. Thanks a lot. 
&gt; 2, maybe i have something wrong, but still not working:
&gt; 
&gt; Now in libvirt log i got error: device not found: no target device vdb

Ah, of coure. I overlooked that virDomainDetachDeviceFlags() is called
with VIR_DOMAIN_AFFECT_CONFIG, which means that live configuration is
not affected and if the disk you're trying to detach exists only in live
XML then the API fails. The same problem was found in
libvirt_domain_disk_add, libvirt_domain_nic_add and
libvirt_domain_nic_remove.

I've pushed the fixes to the master. Thanks for the report.

Michal

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20190501094117</emailId><senderName>"R. Diez"</senderName><senderEmail>rdiezmail-temp2@yahoo.de</senderEmail><timestampReceived>2019-05-01 09:41:17-0400</timestampReceived><subject>Re: [libvirt-users] Running all my virtual machines with a low priority</subject><body>


&gt; &gt; I have an Ubuntu 18.04 system. What is the easiest way to run all of my virtual \
&gt; &gt; machines with a low priority? Say a "nice" level of 15.
&gt; 
&gt; You can use the  &lt;vcpusched&gt;  (and related elements) to control
&gt; the schedular nice level up or down
&gt; 
&gt; https://libvirt.org/formatdomain.html#elementsCPUTuning

Thanks for your quick answer.

I took at look at that documentation, but I did not quite understand it. It talks \
about vCPUs and how they are scheduled. My guess is that it is all  about how those \
virtual CPUs are scheduled against each other.

However, I wanted to lower the priority of all virtual machines against other \
processes on the host system.

Regards,
   rdiez

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20190501094737</emailId><senderName>Daniel =?utf-8?B?UC4gQmVycmFuZ8Op?=</senderName><senderEmail>berrange@redhat.com</senderEmail><timestampReceived>2019-05-01 09:47:37-0400</timestampReceived><subject>Re: [libvirt-users] Running all my virtual machines with a low priority</subject><body>

On Wed, May 01, 2019 at 11:41:17AM +0200, R. Diez wrote:
&gt; 
&gt; &gt; &gt; I have an Ubuntu 18.04 system. What is the easiest way to run all of my virtual \
&gt; &gt; &gt; machines with a low priority? Say a "nice" level of 15.
&gt; &gt; 
&gt; &gt; You can use the  &lt;vcpusched&gt;  (and related elements) to control
&gt; &gt; the schedular nice level up or down
&gt; &gt; 
&gt; &gt; https://libvirt.org/formatdomain.html#elementsCPUTuning
&gt; 
&gt; Thanks for your quick answer.
&gt; 
&gt; I took at look at that documentation, but I did not quite understand it. It
&gt; talks about vCPUs and how they are scheduled. My guess is that it is all
&gt; about how those virtual CPUs are scheduled against each other.
&gt; 
&gt; However, I wanted to lower the priority of all virtual machines against other \
&gt; processes on the host system.

You would have to set the priority of all vCPUs in each guest, as well
as emulator threads in each guest (the latter needs very new libvirt).

Regards,
Daniel
-- 
&gt; &gt; https://berrange.com      -o-    https://www.flickr.com/photos/dberrange :|
&gt; &gt; https://libvirt.org         -o-            https://fstop138.berrange.com :|
&gt; &gt; https://entangle-photo.org    -o-    https://www.instagram.com/dberrange :|

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20190501095823</emailId><senderName>"R. Diez"</senderName><senderEmail>rdiezmail-temp2@yahoo.de</senderEmail><timestampReceived>2019-05-01 09:58:23-0400</timestampReceived><subject>Re: [libvirt-users] Running all my virtual machines with a low priority</subject><body>


&gt; You would have to set the priority of all vCPUs in each guest, as well
&gt; as emulator threads in each guest (the latter needs very new libvirt).

This does not seem a viable option then with Ubuntu 18.04. And changing XML on all \
guest VMs is extra work.

Is there no other way? For example, are all such virtual machines not some daemon or \
systemd unit or set of units? Would it be feasible to lower the  priority on all of \
those? Or is that not easy to do either?

Thanks again,
   rdiez

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20190502093306</emailId><senderName>Martin Kletzander</senderName><senderEmail>mkletzan@redhat.com</senderEmail><timestampReceived>2019-05-02 09:33:06-0400</timestampReceived><subject>Re: [libvirt-users] Running all my virtual machines with a low priority</subject><body>

[Attachment #2 (multipart/signed)]


On Wed, May 01, 2019 at 11:58:23AM +0200, R. Diez wrote:
&gt; 
&gt; &gt; You would have to set the priority of all vCPUs in each guest, as well
&gt; &gt; as emulator threads in each guest (the latter needs very new libvirt).
&gt; 
&gt; This does not seem a viable option then with Ubuntu 18.04. And changing XML on all \
&gt; guest VMs is extra work. 
&gt; Is there no other way? For example, are all such virtual machines not some daemon \
&gt; or systemd unit or set of units? Would it be feasible to lower the priority on all \
&gt; of those? Or is that not easy to do either? 

I'm not sure if we're resetting all the cgroup values, so it should be possible
by setting this for the machine.slice cgroup (or somewhere around there) which
would make it effective for all the VMs, right?  I have not tested it, though,
sorry.

&gt; Thanks again,
&gt; rdiez
&gt; 
&gt; _______________________________________________
&gt; libvirt-users mailing list
&gt; libvirt-users@redhat.com
&gt; https://www.redhat.com/mailman/listinfo/libvirt-users


["signature.asc" (application/pgp-signature)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190502094304</emailId><senderName>Daniel =?utf-8?B?UC4gQmVycmFuZ8Op?=</senderName><senderEmail>berrange@redhat.com</senderEmail><timestampReceived>2019-05-02 09:43:04-0400</timestampReceived><subject>Re: [libvirt-users] Running all my virtual machines with a low priority</subject><body>

On Thu, May 02, 2019 at 11:33:06AM +0200, Martin Kletzander wrote:
&gt; On Wed, May 01, 2019 at 11:58:23AM +0200, R. Diez wrote:
&gt; &gt; 
&gt; &gt; &gt; You would have to set the priority of all vCPUs in each guest, as well
&gt; &gt; &gt; as emulator threads in each guest (the latter needs very new libvirt).
&gt; &gt; 
&gt; &gt; This does not seem a viable option then with Ubuntu 18.04. And changing XML on \
&gt; &gt; all guest VMs is extra work. 
&gt; &gt; Is there no other way? For example, are all such virtual machines not some daemon \
&gt; &gt; or systemd unit or set of units? Would it be feasible to lower the priority on \
&gt; &gt; all of those? Or is that not easy to do either? 
&gt; 
&gt; I'm not sure if we're resetting all the cgroup values, so it should be possible
&gt; by setting this for the machine.slice cgroup (or somewhere around there) which
&gt; would make it effective for all the VMs, right?  I have not tested it, though,
&gt; sorry.

You could perhaps set  'cpu.shares' cgroup setting on /machine.slice.
This isn't really a nice level in the traditional sense, rather it is
a relative weighting evaluated against other cgroups at the same level.
So if you change it from 1024 to 512, then processes under /machine.slice
will get 1/2 the CPU time vs stuff under /system.slice or /user.slice,
when there is contention for CPU time. 

Regards,
Daniel
-- 
&gt; &gt; https://berrange.com      -o-    https://www.flickr.com/photos/dberrange :|
&gt; &gt; https://libvirt.org         -o-            https://fstop138.berrange.com :|
&gt; &gt; https://entangle-photo.org    -o-    https://www.instagram.com/dberrange :|

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20190502101054</emailId><senderName>"R. Diez"</senderName><senderEmail>rdiezmail-temp2@yahoo.de</senderEmail><timestampReceived>2019-05-02 10:10:54-0400</timestampReceived><subject>Re: [libvirt-users] Running all my virtual machines with a low priority</subject><body>


&gt; You could perhaps set  'cpu.shares' cgroup setting on /machine.slice.
&gt; This isn't really a nice level in the traditional sense, rather it is
&gt; a relative weighting evaluated against other cgroups at the same level.
&gt; So if you change it from 1024 to 512, then processes under /machine.slice
&gt; will get 1/2 the CPU time vs stuff under /system.slice or /user.slice,
&gt; when there is contention for CPU time.

Thanks for your help.

There is no "machine.slice" on my system. This is an excerpt from "systemd-cgls".


??? ??????system.slice
???   ??????irqbalance.service
???   ??? ??????865 /usr/sbin/irqbalance --foreground
[... blah blah ...]
???   ??????wpa_supplicant.service
???   ??? ??????878 /sbin/wpa_supplicant -u -s -O /run/wpa_supplicant
???   ??????libvirtd.service
???   ??? ??????  987 /usr/sbin/libvirtd
???   ??? ?????? 1395 /usr/sbin/dnsmasq \
                --conf-file=/var/lib/libvirt/dnsmasq/default.conf --leasefile-ro 
--dhcp-script=/usr/lib/libvirt/libvirt_leaseshelper
???   ??? ?????? 1396 /usr/sbin/dnsmasq \
                --conf-file=/var/lib/libvirt/dnsmasq/default.conf --leasefile-ro 
--dhcp-script=/usr/lib/libvirt/libvirt_leaseshelper
???   ??? ??????12285 /usr/bin/qemu-system-x86_64 -name \
guest=UbuntuMATE1804,debug-threads=on -S -object  \
secret,id=masterKey0,format=raw,file=/var/lib/libvirt/qemu/domain-1-UbuntuMATE1804/master-key.aes \
-machine...


But I guess there are differences depending on the libvirt version.

I thought of 'nice' because it is an easy way to lower the priority for everything \
(CPU and disk) at once.

This is actually getting too complicated. I am a lone developer and sysadmin in a \
small company. I would need to learn too many things about  control groups etc. One \
of the reasons I am trying libvirt is because of the "Virtual Machine Manager" GUI.

Is there not an easier way? I realised there is a "libvirtd.service" on my system. Is \
there a simple way in systemd to just lower the  priority of everything under that \
service? I am assuming that this service is starting all the virtual machines.

Best regards,
   rdiez

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20190206131851</emailId><senderName>Daniel =?utf-8?B?UC4gQmVycmFuZ8Op?=</senderName><senderEmail>berrange@redhat.com</senderEmail><timestampReceived>2019-02-06 13:18:51-0400</timestampReceived><subject>Re: [libvirt-users] Installing libvirt and Xen on Red Hat 7.5</subject><body>

On Mon, Feb 04, 2019 at 03:57:29PM -0800, Lianjie Cao wrote:
&gt; Hi,
&gt; 
&gt; I am installing OpenStack on Red Hat 7.5. For Nova compute component, I
&gt; choose libvirt and Xen.
&gt; However, I am running into some problems. It seems libvirt is unable to
&gt; communicate with Xen.

[snip]

&gt; # virsh -c xen:/// list
&gt; error: failed to connect to the hypervisor
&gt; error: no connection driver available for xen:///
&gt; 
&gt; 
&gt; Then I check the connection drivers of libvirt. It seems the daemon driver
&gt; for xen is missing.

Yes, that is correct.  The libvirt packages shipped with RHEL do
not enable the Xen driver as this is no longer a supported hypervisor
for RHEL since RHEL-6 GA.


&gt; Then I decided to compile libvirt from source code. So I checked out the
&gt; source code from github and tried to configure and compile it.
&gt; However, from the output of ./autogen.sh --system, I don't find driver for
&gt; xen is enabled. Actually, xen is not listed as driver in the output.
&gt; 
&gt; configure:
&gt; configure: Configuration summary
&gt; configure: =====================
&gt; configure:
&gt; configure: Drivers
&gt; configure:
&gt; configure:       QEMU: yes
&gt; configure:     OpenVZ: yes
&gt; configure:     VMware: yes
&gt; configure:       VBox: yes
&gt; configure:     XenAPI: no
&gt; configure:      libxl: yes

"libxl" is the modern Xen driver &amp; it has been successfully enabled.


Regards,
Daniel
-- 
|: https://berrange.com      -o-    https://www.flickr.com/photos/dberrange :|
|: https://libvirt.org         -o-            https://fstop138.berrange.com :|
|: https://entangle-photo.org    -o-    https://www.instagram.com/dberrange :|

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190102162941</emailId><senderName>Laine Stump</senderName><senderEmail>laine@redhat.com</senderEmail><timestampReceived>2019-01-02 16:29:41-0400</timestampReceived><subject>Re: [libvirt-users] avoiding PCI bus 8 / using PCI function / virt-install</subject><body>

On 12/26/18 6:59 PM, b f31415 wrote:
&gt; Thanks.  Maybe I'm missing something but when I try virt-install 
&gt; --dry-run --print-xml it generates this snippet of XML:
&gt; 
&gt; &lt;interface type="bridge"&gt;
&gt; 
&gt; &lt;source bridge="ge_0_0_0_77"/&gt;
&gt; 
&gt; &lt;mac address="52:54:00:01:00:4e"/&gt;
&gt; 
&gt; &lt;model type="virtio"/&gt;
&gt; 
&gt; &lt;/interface&gt;
&gt; 
&gt; 
&gt; but what i need (and get from virsh dumpxml) has this extra PCI line.
&gt; 
&gt; &lt;interface type='bridge'&gt;
&gt; 
&gt; &lt;mac address='52:54:00:01:00:4e'/&gt;
&gt; 
&gt; &lt;source bridge='ge_0_0_0_77'/&gt;
&gt; 
&gt; &lt;target dev='vnet78'/&gt;
&gt; 
&gt; &lt;model type='virtio'/&gt;
&gt; 
&gt; &lt;alias name='net78'/&gt;
&gt; 
&gt; &lt;address type='pci' domain='0x0000' bus='0x01' slot='0x0a' function='0x6' /&gt;
&gt; 
&gt; &lt;/interface&gt;
&gt; 
&gt; 
&gt; Did I miss something?  Do you see PCI in the XML when you do the 
&gt; virt-install --dryrun approach?

virt-install never explicitly specifies a PCI address in the XML it 
creates and sends to libvirt, and what you're seeing as the output from 
--print-xml is the XML before it has been sent to libvirt.

Additionally, in response to a question in the original mail, there is 
no way to tell virt-install (or libvirt itself) to use non-0 functions 
for devices (except to manually specify the entire PCI address).

Since 99 44/100% of users (probably much higher, but that number has 
such a nice ring to anyone who recalls the old Ivory Soap commercials 
:-) never need more devices than are possible using only function 0, 
there has been no effort made to automate assignment of non-0 functions.

So if you need this many devices, you should probably consider just 
using virt-install once to generate proto-template XML, then "virsh 
define" that template to get an XML that has an &lt;address...&gt; element for 
every device that needs it, write a script that condenses all the device 
PCI addresses into less slots by using non-0 functions (and saves that 
as the "final" template), and finally modify your installation to do a 
series of virsh commands using that template XML as a start.


I know it sounds awkward, but there is really nothing in libvirt or 
virt-install to automate assignment of PCI devices to non-0 functions.


&gt; On Wed, Dec 26, 2018 at 2:57 PM Peter Crowther 
&gt; &lt;peter.crowther@melandra.com &lt;mailto:peter.crowther@melandra.com&gt;&gt; wrote:
&gt; 
&gt;     On Wed, 26 Dec 2018 at 16:26, b f31415 &lt;bf31415@gmail.com
&gt;     &lt;mailto:bf31415@gmail.com&gt;&gt; wrote:
&gt; 
&gt;         If not, is there a way with one of the virt command line tools
&gt;         to create the XML (with the PCI addresses specified) so that I
&gt;         can process that XML and re-write the PCI addressing values? 
&gt;         Right now the only way I’ve been able to get that detailed XML
&gt;         file is to 1) virt-install and let the VM begin the boot process
&gt;         and then do a 2) virsh dumpxml and then 3) virsh
&gt;         destroy/undefine that VM, 4) modify the XML and then 5) virsh
&gt;         create ./modified.xml.  Is there a cleaner way to do this?
&gt; 
&gt; 
&gt;     It won't do everything you want, but check out virt-install
&gt;     --print-step --dry-run.  This should at least allow you to get at
&gt;     the XML for the intermediate steps and remove the brittleness of
&gt;     defining, destroying, undefining the VM.
&gt; 
&gt;     Cheers,
&gt; 
&gt;     - Peter
&gt; 
&gt; 
&gt; _______________________________________________
&gt; libvirt-users mailing list
&gt; libvirt-users@redhat.com
&gt; https://www.redhat.com/mailman/listinfo/libvirt-users
&gt; 

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20191228003928</emailId><senderName>Gionatan Danti</senderName><senderEmail>g.danti@assyoma.it</senderEmail><timestampReceived>2019-12-28 00:39:28-0400</timestampReceived><subject>[libvirt-users] =?utf-8?q?Locking_without_virtlockd_=28nor_sanloc?= =?utf-8?b?ayk/?=</subject><body>

Hi list,
I would like to ask a clarification about how locking works. My test 
system is CentOS 7.7 with libvirt-4.5.0-23.el7_7.1.x86_64

Is was understanding that, by default, libvirt does not use any locks. 
 From here [1]: "The out of the box configuration, however, currently 
uses the nop lock manager plugin". As "lock_manager" is commented in my 
qemu.conf file, I was expecting that no locks were used to protect my 
virtual disk from guest double-start or misassignement to other vms.

However, "cat /proc/locks" shows the following (17532905 being the vdisk 
inode):
[root@localhost tmp]# cat /proc/locks | grep 17532905
42: OFDLCK ADVISORY  READ  -1 fd:00:17532905 201 201
43: OFDLCK ADVISORY  READ  -1 fd:00:17532905 100 101
Indeed, try to associate and booting the disk to another machines give 
me an error (stating that the disk is alredy in use).

Enabling the "lockd" plugin and starting the same machine, "cat 
/proc/locks" looks different:
[root@localhost tmp]# cat /proc/locks | grep 17532905
31: POSIX  ADVISORY  WRITE 19266 fd:00:17532905 0 0
32: OFDLCK ADVISORY  READ  -1 fd:00:17532905 201 201
33: OFDLCK ADVISORY  READ  -1 fd:00:17532905 100 101
As you can see, an *additional* write lock was granted. Again, assigning 
the disk to another vms and booting it up ends with the same error.

So, may I ask:
- why does libvirtd requests READ locks even commenting the 
"lock_manager" option?
- does it means that I can avoid modifying anything, relying on libvirtd 
to correctly locks image files?
- if so, I should use virtlockd for what use cases?

Thanks.

[1] https://libvirt.org/locking-lockd.html

-- 
Danti Gionatan
Supporto Tecnico
Assyoma S.r.l. - www.assyoma.it
email: g.danti@assyoma.it - info@assyoma.it
GPG public key ID: FF5F32A8


_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20191202115804</emailId><senderName>Daniel =?utf-8?B?UC4gQmVycmFuZ8Op?=</senderName><senderEmail>berrange@redhat.com</senderEmail><timestampReceived>2019-12-02 11:58:04-0400</timestampReceived><subject>Re: [libvirt-users] Domain XML Multicast Tunnel</subject><body>

On Sat, Nov 30, 2019 at 03:59:54PM +0000, Richard M wrote:
&gt; Hello
&gt; I found under networking in the Domain XML 'Multcast tunnel'.
&gt; My question is does anyone know what is the intended use of multicast
&gt; tunnel networking?What are the potential pitfalls of using such a
&gt; configuration other than what's highlighted in the domain xml. eg:
&gt; can it suffer from throughput issues? Can the tunnel be accessed from
&gt; outside Libvirt?
&gt; I'm struggling to find any information about it. If anyone has any
&gt; information about it, Or where I can obtain such information it would
&gt; be appreciated.

This is something that has been supported by QEMU forever, but I think
it is fair to say it is rarely used.

The main use case would be setting up network communication between
a group in QEMU instances (possibly across hosts) in a case where you
don't have access to any better technology such as tap device + bridging.
eg if you are an unprivileged user &amp; cannot get root.

I doubt performance is going to be anything special. There's also
no meaningful security - any user or process or host can send &amp;
receive on the same multicast address.


Regards,
Daniel
-- 
|: https://berrange.com      -o-    https://www.flickr.com/photos/dberrange :|
|: https://libvirt.org         -o-            https://fstop138.berrange.com :|
|: https://entangle-photo.org    -o-    https://www.instagram.com/dberrange :|

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20191203131526</emailId><senderName>"Marc Roos"</senderName><senderEmail>m.roos@f1-outsourcing.eu</senderEmail><timestampReceived>2019-12-03 13:15:26-0400</timestampReceived><subject>Re: [libvirt-users] Live migrate with virsh migrate</subject><body>

 
:0 forgot indeed to check the manpage, sorry


-----Original Message-----
Cc: libvirt-users
Subject: Re: [libvirt-users] Live migrate with virsh migrate

On Tue, Dec 03, 2019 at 10:50:42 +0100, Marc Roos wrote:
&gt; 
&gt;  
&gt; When I migrate a guest from svr1 to svr2 and shutdown the guest on 
svr2. 
&gt; I cannot start it anymore because the xml is not there. How can I make 

&gt; sure this xml is automatically stored so I can start the guest again 
&gt; on svr2?

virsh migrate --help says:

 --persistent     persist VM on destination

that will make sure that the config will stay on the destination after 
you turn off the VM




_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20191203174621</emailId><senderName>Marcin_Mirosław</senderName><senderEmail>marcin@mejor.pl</senderEmail><timestampReceived>2019-12-03 17:46:21-0400</timestampReceived><subject>Re: [libvirt-users] Converting LVM to qcow2</subject><body>

[...]
Thank you. I just need to migrate from lvm to qcow, you saved me 5h of
downtime.
Marcin

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20191204171832</emailId><senderName>Richard Achmatowicz</senderName><senderEmail>rachmato@redhat.com</senderEmail><timestampReceived>2019-12-04 17:18:32-0400</timestampReceived><subject>Re: [libvirt-users] What's the best way to make use of VLAN interfaces with VMs?</subject><body>

Just as a follow up, I found that when VMs are created on the new 
bridge, br1600, multicast *does* work between the two VMs. What does not 
work is multicasting using the bridge devices as endpoints. I was using 
it as a quick test to see if multicast was working, without considering 
if it was even supposed to work. Not sure about that, but multicasting 
between ports on the bridge does work and that's all I need.

On 12/3/19 2:06 PM, Richard Achmatowicz wrote:
&gt; Even more puzzling, I reverted back to the old configuration to 
&gt; confirm what I had seen and found that it works in one direction but 
&gt; not the other: i.e. from 192.168.0.110 to 192.168.0.120, but not the 
&gt; other way around.
&gt;
&gt; Must be something with my configuration....which I can follow up on.
&gt;
&gt; So, thanks again for your help.
&gt;
&gt; Richard
&gt;
&gt; On 12/3/19 11:36 AM, Richard Achmatowicz wrote:
&gt;&gt; Laine
&gt;&gt;
&gt;&gt; I made the change and I can now ping across both bridges: br1 
&gt;&gt; (192.168.0.0/24) and br1600 (192.168.1.0/24):
&gt;&gt;
&gt;&gt; br1: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500
&gt;&gt;         inet 192.168.0.110  netmask 255.255.255.0  broadcast 
&gt;&gt; 192.168.0.255
&gt;&gt;         inet6 fe80::1e98:ecff:fe1b:276d  prefixlen 64  scopeid 
&gt;&gt; 0x20&lt;link&gt;
&gt;&gt;         ether 1c:98:ec:1b:27:6d  txqueuelen 1000  (Ethernet)
&gt;&gt;         RX packets 21608  bytes 10289553 (9.8 MiB)
&gt;&gt;         RX errors 0  dropped 0  overruns 0  frame 0
&gt;&gt;         TX packets 1372  bytes 131012 (127.9 KiB)
&gt;&gt;         TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
&gt;&gt;
&gt;&gt; br1600: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500
&gt;&gt;         inet 192.168.1.110  netmask 255.255.255.0  broadcast 
&gt;&gt; 192.168.1.255
&gt;&gt;         inet6 fe80::1e98:ecff:fe1b:276d  prefixlen 64  scopeid 
&gt;&gt; 0x20&lt;link&gt;
&gt;&gt;         ether 1c:98:ec:1b:27:6d  txqueuelen 1000  (Ethernet)
&gt;&gt;         RX packets 3429  bytes 173404 (169.3 KiB)
&gt;&gt;         RX errors 0  dropped 0  overruns 0  frame 0
&gt;&gt;         TX packets 112  bytes 9490 (9.2 KiB)
&gt;&gt;         TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
&gt;&gt;
&gt;&gt; // ping to another host with the same bridge br1 defined on 
&gt;&gt; 192.168.0.120
&gt;&gt; [root@clusterdev01 ~]# ping 192.168.0.120
&gt;&gt; PING 192.168.0.120 (192.168.0.120) 56(84) bytes of data.
&gt;&gt; 64 bytes from 192.168.0.120: icmp_seq=1 ttl=64 time=0.481 ms
&gt;&gt; 64 bytes from 192.168.0.120: icmp_seq=2 ttl=64 time=0.244 ms
&gt;&gt; 64 bytes from 192.168.0.120: icmp_seq=3 ttl=64 time=0.242 ms
&gt;&gt; 64 bytes from 192.168.0.120: icmp_seq=4 ttl=64 time=0.244 ms
&gt;&gt; 64 bytes from 192.168.0.120: icmp_seq=5 ttl=64 time=0.237 ms
&gt;&gt; ^C
&gt;&gt;
&gt;&gt; // ping to another host with the same bridge br1600 defined on 
&gt;&gt; 192.168.1.120
&gt;&gt; [root@clusterdev01 ~]# ping 192.168.1.120
&gt;&gt; PING 192.168.1.120 (192.168.1.120) 56(84) bytes of data.
&gt;&gt; 64 bytes from 192.168.1.120: icmp_seq=1 ttl=64 time=0.316 ms
&gt;&gt; 64 bytes from 192.168.1.120: icmp_seq=2 ttl=64 time=0.245 ms
&gt;&gt; 64 bytes from 192.168.1.120: icmp_seq=3 ttl=64 time=0.176 ms
&gt;&gt; 64 bytes from 192.168.1.120: icmp_seq=4 ttl=64 time=0.213 ms
&gt;&gt; ^C
&gt;&gt;
&gt;&gt; However, for some reason, multicast has stopped working across the 
&gt;&gt; bridge interface, when it was working in the previous configuration 
&gt;&gt; (with br1 and br1.600).
&gt;&gt;
&gt;&gt; I test multicast using a multicast test app, binding the receiver to 
&gt;&gt; br1 on one host (192.168.0.120) and then binding the sender on br1 on 
&gt;&gt; another host (192.168.0.110). I also start an instance of tshark on 
&gt;&gt; each host to check which packets are being sent across. The multicast 
&gt;&gt; packets are seen by tshark to be crossing the bridge but for some 
&gt;&gt; reason the receiver app does not receive them. The bridges also have 
&gt;&gt; the multicast_querier and multicast_snooping flags enabled (e.g. for 
&gt;&gt; br1 on both hosts):
&gt;&gt;
&gt;&gt; [root@clusterdev01 ~]# cat /sys/class/net/br1/bridge/multicast_querier
&gt;&gt; 1
&gt;&gt; [root@clusterdev01 ~]# cat /sys/class/net/br1/bridge/multicast_snooping
&gt;&gt; 1
&gt;&gt; [root@clusterdev02 ~]# cat /sys/class/net/br1/bridge/multicast_querier
&gt;&gt; 1
&gt;&gt; [root@clusterdev02 ~]# cat /sys/class/net/br1/bridge/multicast_snooping
&gt;&gt; 1
&gt;&gt;
&gt;&gt; // 1. start multicast test app sender and send packet across br1 (the 
&gt;&gt; multicast address of 239.11.12.13 is fixed for both apps, as well as 
&gt;&gt; multicast port 5555)
&gt;&gt;
&gt;&gt; [root@clusterdev01 bridge-multicast-test]# 
&gt;&gt; ./start-ipv4-mcast-sender.sh 192.168.0.110
&gt;&gt; Socket #1=0.0.0.0/0.0.0.0:5555, ttl=32, bind interface=/192.168.0.110
&gt;&gt; &gt; 1234567890
&gt;&gt; &gt;
&gt;&gt;
&gt;&gt; // 2. tshark on the sending host after sending packet
&gt;&gt;
&gt;&gt; [root@clusterdev01 ~]# tshark -i br1 -f "igmp or host 239.11.12.13"
&gt;&gt; Running as user "root" and group "root". This could be dangerous.
&gt;&gt; Capturing on 'br1'
&gt;&gt;     1 0.000000000 192.168.0.110 → 239.11.12.13 UDP 52 5555 → 5555 Len=10
&gt;&gt;     2 55.389831698      0.0.0.0 → 224.0.0.1    IGMPv2 60 Membership 
&gt;&gt; Query, general
&gt;&gt;     3 60.194658894 192.168.0.115 → 224.0.0.251  IGMPv2 46 Membership 
&gt;&gt; Report group 224.0.0.251
&gt;&gt;
&gt;&gt; // 3. tshark on the receiving host across bridge br1
&gt;&gt;
&gt;&gt; [root@clusterdev02 ~]# tshark -i br1 -f "igmp or host 239.11.12.13"
&gt;&gt; Running as user "root" and group "root". This could be dangerous.
&gt;&gt; Capturing on 'br1'
&gt;&gt;     1 0.000000000 192.168.0.120 → 224.0.0.22   IGMPv3 54 Membership 
&gt;&gt; Report / Join group 239.11.12.13 for any sources
&gt;&gt;     2 0.902032534 192.168.0.120 → 224.0.0.22   IGMPv3 54 Membership 
&gt;&gt; Report / Join group 239.11.12.13 for any sources
&gt;&gt;     3 41.448921858 192.168.0.110 → 239.11.12.13 UDP 60 5555 → 5555 
&gt;&gt; Len=10
&gt;&gt;
&gt;&gt; // 4. previously started multicast test app receiver and no packet 
&gt;&gt; received
&gt;&gt;
&gt;&gt; [root@clusterdev02 bridge-multicast-test]# 
&gt;&gt; ./start-ipv4-mcast-receiver.sh 192.168.0.120
&gt;&gt; Socket=0.0.0.0/0.0.0.0:5555, bind interface=/192.168.0.120
&gt;&gt; // NO PACKET APPEARS HERE :-(
&gt;&gt;
&gt;&gt;
&gt;&gt; It's puzzling that the packet is seen to arrive on clusterdev02 but 
&gt;&gt; is not received by the test app. It's also odd to see IGMPv3 messages 
&gt;&gt; on the receiver and IGMPv2 messages on the sender.
&gt;&gt;
&gt;&gt; Investigating ....
&gt;&gt;
&gt;&gt; Richard
&gt;&gt;
&gt;&gt; On 11/29/19 12:15 PM, Richard Achmatowicz wrote:
&gt;&gt;&gt; Hi Laine
&gt;&gt;&gt;
&gt;&gt;&gt; What you have suggested sounds eminently reasonable. Thanks for your 
&gt;&gt;&gt; advice. I'm going to give it a shot and report back.
&gt;&gt;&gt;
&gt;&gt;&gt; Richard
&gt;&gt;&gt;
&gt;&gt;&gt; On 11/27/19 1:38 PM, Laine Stump wrote:
&gt;&gt;&gt;&gt; On 11/26/19 11:07 PM, Richard Achmatowicz wrote:
&gt;&gt;&gt;&gt;&gt; Hello
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; I have a problem with attaching VMs to a VLAN interface.
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; Here is my setup: I have several physical hosts connected by a 
&gt;&gt;&gt;&gt;&gt; physical switch.  Each host has two NICs leading to the switch, 
&gt;&gt;&gt;&gt;&gt; which have been combined into a team, team0. Each host a has a 
&gt;&gt;&gt;&gt;&gt; bridge br1, which has team0 as a slave. So communication between 
&gt;&gt;&gt;&gt;&gt; hosts is based on the IP address of bridge br1 on each host.
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; Up until recently, using libvirt and KVM, I was creating VMs which 
&gt;&gt;&gt;&gt;&gt; had one interface attached the default virtual network and one 
&gt;&gt;&gt;&gt;&gt; interface attached to the bridge:
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; virt-install ... --network network=default --network bridge=br1 ...
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; I would then statically assign an IP address to the bridge 
&gt;&gt;&gt;&gt;&gt; interface on the guest when installing the OS.
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; A few days ago, a VLAN was introduced to split up the network. I 
&gt;&gt;&gt;&gt;&gt; created a new VLAN interface br1.600 on each of the hosts. My 
&gt;&gt;&gt;&gt;&gt; initial attempt was to do try this:
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; virt-install ... --network network=default --network 
&gt;&gt;&gt;&gt;&gt; bridge=br1.600 ...
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; which did not work. It then dawned on me that a VLAN interface and 
&gt;&gt;&gt;&gt;&gt; a bridge aren't treated the same. So I started to look for ways to 
&gt;&gt;&gt;&gt;&gt; allow my VMs to bind to this new interface.
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; This would seem to be a common situation. What is the best way to 
&gt;&gt;&gt;&gt;&gt; work around this?
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; Both the host bridge and the host VLAN interface already have 
&gt;&gt;&gt;&gt;&gt; their assigned IP addresses and appear like this in libvirt:
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; [root@clusterdev01 ]# ifconfig
&gt;&gt;&gt;&gt;&gt; br1: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500
&gt;&gt;&gt;&gt;&gt;          inet 192.168.0.110  netmask 255.255.255.0 broadcast 
&gt;&gt;&gt;&gt;&gt; 192.168.0.255
&gt;&gt;&gt;&gt;&gt;          inet6 fe80::1e98:ecff:fe1b:276d  prefixlen 64 scopeid 
&gt;&gt;&gt;&gt;&gt; 0x20&lt;link&gt;
&gt;&gt;&gt;&gt;&gt;          ether 1c:98:ec:1b:27:6d  txqueuelen 1000 (Ethernet)
&gt;&gt;&gt;&gt;&gt;          RX packets 833772  bytes 2976958254 (2.7 GiB)
&gt;&gt;&gt;&gt;&gt;          RX errors 0  dropped 0  overruns 0  frame 0
&gt;&gt;&gt;&gt;&gt;          TX packets 331237  bytes 23335124 (22.2 MiB)
&gt;&gt;&gt;&gt;&gt;          TX errors 0  dropped 0 overruns 0  carrier 0 collisions 0
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; br1.600: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt; mtu 1500
&gt;&gt;&gt;&gt;&gt;          inet 192.168.1.110  netmask 255.255.255.0 broadcast 
&gt;&gt;&gt;&gt;&gt; 192.168.1.255
&gt;&gt;&gt;&gt;&gt;          inet6 fe80::1e98:ecff:fe1b:276d  prefixlen 64 scopeid 
&gt;&gt;&gt;&gt;&gt; 0x20&lt;link&gt;
&gt;&gt;&gt;&gt;&gt;          ether 1c:98:ec:1b:27:6d  txqueuelen 1000 (Ethernet)
&gt;&gt;&gt;&gt;&gt;          RX packets 189315  bytes 9465744 (9.0 MiB)
&gt;&gt;&gt;&gt;&gt;          RX errors 0  dropped 0  overruns 0  frame 0
&gt;&gt;&gt;&gt;&gt;          TX packets 302  bytes 30522 (29.8 KiB)
&gt;&gt;&gt;&gt;&gt;          TX errors 0  dropped 0 overruns 0  carrier 0 collisions 0
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; [root@clusterdev01]# virsh iface-list --all
&gt;&gt;&gt;&gt;&gt;   Name                 State      MAC Address
&gt;&gt;&gt;&gt;&gt; ---------------------------------------------------
&gt;&gt;&gt;&gt;&gt;   br1                  active     1c:98:ec:1b:27:6d
&gt;&gt;&gt;&gt;&gt;   br1.600           active     1c:98:ec:1b:27:6d
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; [root@clusterdev01 sysadmin]# virsh iface-dumpxml br1.600
&gt;&gt;&gt;&gt;&gt; &lt;interface type='vlan' name='br1.600'&gt;
&gt;&gt;&gt;&gt;&gt;    &lt;protocol family='ipv4'&gt;
&gt;&gt;&gt;&gt;&gt;      &lt;ip address='192.168.1.110' prefix='24'/&gt;
&gt;&gt;&gt;&gt;&gt;    &lt;/protocol&gt;
&gt;&gt;&gt;&gt;&gt;    &lt;protocol family='ipv6'&gt;
&gt;&gt;&gt;&gt;&gt;      &lt;ip address='fe80::1e98:ecff:fe1b:276d' prefix='64'/&gt;
&gt;&gt;&gt;&gt;&gt;    &lt;/protocol&gt;
&gt;&gt;&gt;&gt;&gt;    &lt;link state='up'/&gt;
&gt;&gt;&gt;&gt;&gt;    &lt;vlan tag='600'&gt;
&gt;&gt;&gt;&gt;&gt;      &lt;interface name='br1'/&gt;
&gt;&gt;&gt;&gt;&gt;    &lt;/vlan&gt;
&gt;&gt;&gt;&gt;&gt; &lt;/interface&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; I tried following some suggestions which wrapped the vlan 
&gt;&gt;&gt;&gt;&gt; interface in a bridge interface, but in ended up trashing the 
&gt;&gt;&gt;&gt;&gt; br1.600 interface which was originally defined on the host.
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; Is there a failsafe way to deal with such a situation? Am I doing 
&gt;&gt;&gt;&gt;&gt; something completely wrong here? In would like br1.600 to behave 
&gt;&gt;&gt;&gt;&gt; like br1 .....
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; Any suggestions or advice greatly appreciated.
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; I guess what you need is for all the traffic from your guests to go 
&gt;&gt;&gt;&gt; out on the physical network tagged with vlan id 600, and you want 
&gt;&gt;&gt;&gt; that to be transparent to the guests, right?
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; The simplest way to handle this is to create a vlan interface off 
&gt;&gt;&gt;&gt; of the ethernet that you have attached to br1 (not br1 itself), so 
&gt;&gt;&gt;&gt; it would be named something like "eth0.600", and then create a new 
&gt;&gt;&gt;&gt; bridge (call it, say "br600") and attach eth0.600 to br600. Then 
&gt;&gt;&gt;&gt; your guests would be created with "--network bridge=br600"
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; (Note that Linux host bridges do now support vlan tagging (and 
&gt;&gt;&gt;&gt; maybe even trunking) at the port level, but libvirt hasn't added 
&gt;&gt;&gt;&gt; support for it. (in other words, "Patches Welcome!" :-))
&gt;&gt;&gt;&gt;


_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20191212173538</emailId><senderName>Michal Privoznik</senderName><senderEmail>mprivozn@redhat.com</senderEmail><timestampReceived>2019-12-12 17:35:38-0400</timestampReceived><subject>Re: [libvirt-users] nvme, spdk and host linux version</subject><body>

On 12/12/19 3:51 PM, Mauricio Tavares wrote:
&gt; On Thu, Dec 12, 2019 at 5:40 AM Michal Privoznik &lt;mprivozn@redhat.com&gt; wrote:
&gt;&gt;
&gt;&gt; On 11/27/19 4:12 PM, Mauricio Tavares wrote:
&gt;&gt;&gt; I have been following the patches on nvme support on the list and was
&gt;&gt;&gt; wondering: If I wanted to build a vm host to be on the bleeding edge
&gt;&gt;&gt; for nvme and spdk fun in libvirt, which linux distro --
&gt;&gt;&gt; fedora/ubuntu/centos/etc -- should I pick?
&gt;&gt;&gt;
&gt;&gt;
&gt;&gt; For NVMe itself it probably doesn't matter as it doesn't require any
&gt;&gt; special library. However, I'm not so sure about SPDK, esp. whether my
&gt;&gt; NVMe patches is what you really need? My patches enable the only missing
&gt;&gt; combination:
&gt;&gt;
&gt;&gt; host kernel storage stack + qemu storage stack = &lt;disk type='block&gt;
&gt;&gt; &lt;source dev='/dev/nvme0n1'/&gt; &lt;/disk&gt;
&gt;&gt;     This has disadvantage of latency added by both stacks, but allows
&gt;&gt; migration.
&gt;&gt;
&gt;&gt; neither host kernel nor qemu storage stack = &lt;hostdev/&gt; (aka PCI assignment)
&gt;&gt;     This offers near bare metal latencies, but prohibits migration.
&gt;&gt;
&gt;&gt; qemu storage stack only = &lt;disk type='nvme'/&gt;
&gt;&gt;     This is what my patches implement and should combine the above two:
&gt;&gt; small latencies and ability to migrate.
&gt;&gt;
&gt;        That is actually my question: is handing the hard drive through
&gt; PCI assignment faster or slowe than disk type='nvme'?

According to:

https://www.linux-kvm.org/images/4/4c/Userspace_NVMe_driver_in_QEMU_-_Fam_Zheng.pdf 
(slide 25)

the fastest is the host, followed by PCI assignment (in qemu it's called 
VFIO), then disk type='nvme' and the last one is disk type='block' with 
/dev/nvme0 (referred to as linux-aio).

Michal

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20191216131220</emailId><senderName>Michal Privoznik</senderName><senderEmail>mprivozn@redhat.com</senderEmail><timestampReceived>2019-12-16 13:12:20-0400</timestampReceived><subject>Re: [libvirt-users] Request to be allotted a project or a feature in pipeline</subject><body>

On 12/15/19 5:22 PM, Utsav Parmar wrote:
&gt; To whom it may concern,
&gt; 
&gt; 
&gt; I'm Utsav Parmar, pursuing my B. Tech in Computer Engineering. I like to 
&gt; work on new technologies and am currently looking for open-source 
&gt; projects to contribute to.
&gt; 
&gt; 
&gt; As it may turn out, I've got a college project in my curriculum this 
&gt; semester under "Software Development Practice", and I'd like to work 
&gt; upon a project and/or a feature in pipeline spanning over 3 months in 
&gt; Libvirt organization as a part of the same college project. My mentor 
&gt; cum professor has already agreed for the same, given that I get approval 
&gt; from one of the maintainers. So, if possible, will you please allot me 
&gt; something to work upon?

Hi,

it's always nice to see people interested in open source. Usually, 
people chose what they want to work on, it's very rare to tell others 
what to do, but since you are seeking some mentoring I am willing to 
guide you.

Firstly, you need to set your development environment. I don't know what 
distribution you are using, but on Fedora it is sufficient to 'dnf 
build-dep libvirt' plus you might need to install some missing packages 
like git. Once you're done you should be able to clone and build from 
our repo:

   git clone git://libvirt.org/libvirt.git libvirt.git
   cd libvirt.git
   mkdir _build &amp;&amp; cd _build &amp;&amp; ../autogen.sh --system
   make -j10 all syntax-check check

The autogen.sh script will run configure which will error out if you're 
missing anything crucial.

Now, I don't know how strong your C skills are, but you can start by 
picking a task from our list of beginner projects:

   https://wiki.libvirt.org/page/BiteSizedTasks

We can discuss this further off the list. There is also a document which 
covers first steps:

   https://libvirt.org/hacking.html

Please reply off the list what is it that you are interested in and I 
will try to come up with a task suitable for you. Or catch me on IRC 
channel (nick is mprivozn):

   https://libvirt.org/contact.html#irc

Michal

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20191217111637</emailId><senderName>Jens John</senderName><senderEmail>lists@2ion.de</senderEmail><timestampReceived>2019-12-17 11:16:37-0400</timestampReceived><subject>Re: [libvirt-users] Change in treatment of qcow2 with chained backing files in v5.10.0?</subject><body>

Hello Peter,

thank you for replying in such detail.

On Tue, Dec 17, 2019 at 11:22:52AM +0100, Peter Krempa wrote:
&gt; So this output was obtained by 'file'. That unfortunately doesn't give
&gt; enough information. Please run 'qemu-img info' on those files and look
&gt; for the 'backing file format:'field.
&gt;
&gt; That field is important, because otherwise we'd fall back to image
&gt; format detection which was deemed unsafe and libvirt no longer allows
&gt; it.

You're right. My backing files are missing the 'backing file format' field:

  image: windows7-base.qcow2
  file format: qcow2
  virtual size: 50 GiB (53687091200 bytes)
  disk size: 7.37 GiB
  cluster_size: 65536
  Format specific information:
      compat: 1.1
      lazy refcounts: false
      refcount bits: 16
      corrupt: false

  image: windows7-Office2013.qcow2
  file format: qcow2
  virtual size: 75 GiB (80530636800 bytes)
  disk size: 50.4 GiB
  cluster_size: 65536
  backing file: windows7-taintable.qcow2
  Format specific information:
      compat: 1.1
      lazy refcounts: false
      refcount bits: 16
      corrupt: false

  image: windows7-taintable.qcow2
  file format: qcow2
  virtual size: 50 GiB (53687091200 bytes)
  disk size: 7.88 GiB
  cluster_size: 65536
  backing file: windows7-base.qcow2
  Format specific information:
      compat: 1.1
      lazy refcounts: false
      refcount bits: 16
      corrupt: false

&gt; The root of the problem is that the images mentioned above will not
&gt; have the format section because -F argument for qemu-img was not used
&gt; when creating them. This would force libvirt to use format detection
&gt; which is insecure and thus libvirt does not do that and assumes the
&gt; image is raw.

Understood. So in order to load an image or backing file, qemu/libvirt
expects the format to be explicitly defined whenever a 'next image' is
being referenced.

&gt; This in normal circumstances causes problems right away, because when
&gt; running any more advanced security model than unix permissions (selinux
&gt; apparmor) libvirt would not allow qemu to access the backing file. You
&gt; don't seem to be running it so it was accidentally working for you until
&gt; now.

Correct. I'm using neither selinux nor apparmor.

&gt; (...) So as a first thing you should create the images properly.  that when
&gt; you are creating the overlay image, you have to use the '-F' parameter
&gt; of qemu-img create. (...)

Fixed the issue successfully using qemu-img rebase.

&gt; (...) (Note that snapshots/overlays created by libvirt always do
&gt; this). (...)

It's probably clear by now but these images were created manually, many
years ago.

&gt; Lastly this is more-or-less tracked in:
&gt; https://bugzilla.redhat.com/show_bug.cgi?id=1588373
&gt;
&gt; I think I should finally fix it and report a proper error rather than
&gt; silently assuming it might work. With -blockdev it will never work
&gt; properly anyways.

I agree that failing in a clear way would indeed help the user, though
now that I know what I'm looking for, it's also clear from the -blockdev
argument what's going on.

Thanks, again, for your time,
Jens.


_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20191217171504</emailId><senderName>Laine Stump</senderName><senderEmail>laine@redhat.com</senderEmail><timestampReceived>2019-12-17 17:15:04-0400</timestampReceived><subject>Re: [libvirt-users] Error in launching chasis</subject><body>

On 12/17/19 5:52 AM, abhishek jain wrote:
&gt; 
&gt; 
&gt; Hi
&gt; 
&gt; I am new to Libvirt and is starting Chassis but getting following error
&gt; 
&gt; qemu-system-x86_64: -netdev 
&gt; tap,id=net0,ifname=tap01,vhost=on,script=no,downscript=no: tap: open 
&gt; vhost char device failed: Operation not permitted

You aren't using libvirt, you are running the qemu-system-x86_64 command 
directly.

&gt; What could be the reason

Since you're not actually using libvirt in this example, this isn't the 
best place to ask, but based on the error message, I'd say that you are 
running qemu-system-x86_64 as an unprivileged user, and qemu is trying 
to open the device /dev/vhost-net, but can't due to the lack of privileges.

If you used a libvirt-based management application to start your qemu 
(e.g. virsh, virt-manager, cockpit, ovirt, openstack) then they would 
call the libvirtd daemon, which is running with full root privileges and 
would open the vhost-net device, then pass that to an unprivileged qemu. 
If you really must continue using qemu directly, then you'll need to 
either stop using vhost=on, or run qemu as root (and take all the 
security risks associated with that).


&gt; 
&gt; Regards
&gt; Abhishek
&gt; 
&gt; _______________________________________________
&gt; libvirt-users mailing list
&gt; libvirt-users@redhat.com
&gt; https://www.redhat.com/mailman/listinfo/libvirt-users
&gt; 

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20191219155507</emailId><senderName>VHPC 20</senderName><senderEmail>vhpc.dist@gmail.com</senderEmail><timestampReceived>2019-12-19 15:55:07-0400</timestampReceived><subject>[libvirt-users] CfP VHPC20: HPC Containers-Kubernetes</subject><body>

====================================================================
CALL FOR PAPERSa

15th Workshop on Virtualization in High-Performance Cloud Computing
(VHPC 20) held in conjunction with the International Supercomputing
Conference - High Performance, June 21-25, 2020, Frankfurt, Germany.
(Springer LNCS Proceedings)

====================================================================


Date: June 25, 2020
Workshop URL: vhpc[dot]org


Abstract registration Deadline: Jan 31st, 2020
Paper Submission Deadline: Apr 05th, 2020
Springer LNCS



Call for Papers


Containers and virtualization technologies constitute key enabling
factors for flexible resource management in modern data centers, and
particularly in cloud environments. Cloud providers need to manage
complex infrastructures in a seamless fashion to support the highly
dynamic and heterogeneous workloads and hosted applications customers
deploy. Similarly, HPC environments have been increasingly adopting
techniques that enable flexible management of vast computing and
networking resources, close to marginal provisioning cost, which is
unprecedented in the history of scientific and commercial computing.
Most recently, Function as a Service (Faas) and Serverless computing,
utilizing lightweight VMs-containers widens the spectrum of
applications that can be deployed in a cloud environment, especially
in an HPC context. Here, HPC-provided services can be become
accessible to distributed workloads outside of large cluster
environments.

Various virtualization-containerization technologies contribute to the
overall picture in different ways: machine virtualization, with its
capability to enable consolidation of multiple under ­utilized servers
with heterogeneous software and operating systems (OSes), and its
capability to live ­-migrate a fully operating virtual machine (VM)
with a very short downtime, enables novel and dynamic ways to manage
physical servers; OS- ­level virtualization (i.e., containerization),
with its capability to isolate multiple user ­-space environments and
to allow for their co ­existence within the same OS kernel, promises to
provide many of the advantages of machine virtualization with high
levels of responsiveness and performance; lastly, unikernels provide
for many virtualization benefits with a minimized OS/library surface.
I/O Virtualization in turn allows physical network interfaces to take
traffic from multiple VMs or containers; network virtualization, with
its capability to create logical network overlays that are independent
of the underlying physical topology is furthermore enabling
virtualization of HPC infrastructures.


Publication


Accepted papers will be published in a Springer LNCS proceedings
volume.


Topics of Interest


The VHPC program committee solicits original, high-quality submissions
related to virtualization across the entire software stack with a
special focus on the intersection of HPC, containers-virtualization
and the cloud.


Major Topics:
- HPC workload orchestration (Kubernetes)
- Kubernetes HPC batch
- HPC Container Environments Landscape
- HW Heterogeneity
- Container ecosystem (Docker alternatives)
- Networking
- Lightweight Virtualization
- Unikernels / LibOS
- State-of-the-art processor virtualization (RISC-V, EPI)
- Containerizing HPC Stacks/Apps/Codes:
  Climate model containers


each major topic encompassing design/architecture, management,
performance management, modeling and configuration/tooling.
Specifically, we invite papers that deal with the following topics:

- HPC orchestration (Kubernetes)
   - Virtualizing Kubernetes for HPC
   - Deployment paradigms
   - Multitenancy
   - Serverless
   - Declerative data center integration
   - Network provisioning
   - Storage
   - OCI i.a. images
   - Isolation/security
- HW Accelerators, including GPUs, FPGAs, AI, and others
   - State-of-practice/art, including transition to cloud
   - Frameworks, system software
   - Programming models, runtime systems, and APIs to facilitate cloud
     adoption
   - Edge use-cases
   - Application adaptation, success stories
- Kubernetes Batch
   - Scheduling, job management
   - Execution paradigm - workflow
   - Data management
   - Deployment paradigm
   - Multi-cluster/scalability
   - Performance improvement
   - Workflow / execution paradigm
- Podman: end-to-end Docker alternative container environment &amp; use-cases
   - Creating, Running containers as non-root (rootless)
   - Running rootless containers with MPI
   - Container live migration
   - Running containers in restricted environments without setuid
- Networking
   - Software defined networks and network virtualization
   - New virtualization NICs/Nitro alike ASICs for the data center?
   - Kubernetes SDN policy (Calico i.a.)
   - Kubernetes network provisioning (Flannel i.a.)
- Lightweight Virtualization
   - Micro VMMs (Rust-VMM, Firecracker, solo5)
   - Xen
   - Nitro hypervisor (KVM)
   - RVirt
   - Cloud Hypervisor
- Unikernels / LibOS
- HPC Storage in Virtualization
   - HPC container storage
   - Cloud-native storage
   - Hypervisors in storage virtualization
- Processor Virtualization
   - RISC-V hypervisor extensions
   - RISC-V Hypervisor ports
   - EPI
- Composable HPC microservices
- Containerizing Scientific Codes
   - Building
   - Deploying
   - Securing
   - Storage
   - Monitoring
- Use case for containerizing HPC codes:
  Climate model containers for portability, reproducibility,
  traceability, immutability, provenance, data &amp; software preservation



The Workshop on Virtualization in High ­-Performance Cloud Computing
(VHPC) aims to bring together researchers and industrial practitioners
facing the challenges posed by virtualization in order to foster
discussion, collaboration, mutual exchange of knowledge and
experience, enabling research to ultimately provide novel solutions
for virtualized computing systems of tomorrow.

The workshop will be one day in length, composed of 20 min paper
presentations, each followed by 10 min discussion sections, plus
lightning talks that are limited to 5 minutes. Presentations may be
accompanied by interactive demonstrations.


Important Dates

Jan 31st, 2020 - Abstract
Apr 5th, 2020 - Paper submission deadline (Springer LNCS)
Apr 26th, 2020 - Acceptance notification
June 25th, 2020 - Workshop Day
July 10th, 2020 - Camera-ready version due


Chair

Michael Alexander (chair), BOKU, Vienna, Austria
Anastassios Nanos (co- ­chair), Sunlight.io, UK


Program committee

Stergios Anastasiadis, University of Ioannina, Greece
Paolo Bonzini, Redhat, Italy
Jakob Blomer, CERN, Europe
Eduardo CÃ©sar, Universidad Autonoma de Barcelona, Spain
Taylor Childers, Argonne National Laboratory, USA
Stephen Crago, USC ISI, USA
Tommaso Cucinotta, St. Anna School of Advanced Studies, Italy
FranÃ§ois DiakhatÃ© CEA DAM Ile de France, France
Kyle Hale, Northwestern University, USA
Brian Kocoloski, Washington University, USA
John Lange, University of Pittsburgh, USA
Giuseppe Lettieri, University of Pisa, Italy
Klaus Ma, Huawei, China
Alberto Madonna, Swiss National Supercomputing Center, Switzerland
Nikos Parlavantzas, IRISA, France
Anup Patel, Western Digital, USA
Kevin Pedretti, Sandia National Laboratories, USA
Amer Qouneh, Western New England University, USA
Carlos ReaÃ±o, Queen's University Belfast, UK
Adrian Reber, Redhat, Germany
Riccardo Rocha, CERN, Europe
Borja Sotomayor, University of Chicago, USA
Jonathan Sparks, Cray, USA
Kurt Tutschku, Blekinge Institute of Technology, Sweden
John Walters, USC ISI, USA
Yasuhiro Watashiba, Osaka University, Japan
Chao-Tung Yang, Tunghai University, Taiwan



Paper Submission-Publication

Papers submitted to the workshop will be reviewed by at least two
members of the program committee and external reviewers. Submissions
should include abstract, keywords, the e-mail address of the
corresponding author, and must not exceed 10 pages, including tables
and figures at a main font size no smaller than 11 point. Submission
of a paper should be regarded as a commitment that, should the paper
be accepted, at least one of the authors will register and attend the
conference to present the work. Accepted papers will be published in a
Springer LNCS volume.

The format must be according to the Springer LNCS Style. Initial
submissions are in PDF; authors of accepted papers will be requested
to provide source files.


Abstract, Paper Submission Link:
edas[dot]info/newPaper.php?c=26973


Lightning Talks

Lightning Talks are non-paper track, synoptical in nature and are
strictly limited to 5 minutes. They can be used to gain early
feedback on ongoing research, for demonstrations, to present research
results, early research ideas, perspectives and positions of interest
to the community. Submit abstract via the main submission link.

General Information

The workshop is one day in length and will be held in conjunction with
the International Supercomputing Conference - High Performance (ISC)
2019, June 21-25, Frankfurt, Germany.


_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20191222225155</emailId><senderName>Cole Robinson</senderName><senderEmail>crobinso@redhat.com</senderEmail><timestampReceived>2019-12-22 22:51:55-0400</timestampReceived><subject>Re: [libvirt-users] [libvirt] Add support for vhost-user-scsi-pci/vhost-user-blk-pci</subject><body>

FYI there's some more recent discussion over here:
https://www.redhat.com/archives/libvir-list/2019-December/msg00817.html

There isn't any objections to using &lt;disk type='vhostuser'/&gt; for
vhost-user-blk, so maybe that's a good place to start.

Thanks,
Cole


On 10/15/19 7:34 AM, Li Feng wrote:
&gt; Cole Robinson &lt;crobinso@redhat.com&gt; 于2019年10月15日周二 上午1:48写道：
&gt;&gt;
&gt;&gt; On 10/14/19 3:12 AM, Li Feng wrote:
&gt;&gt;&gt; Hi Cole &amp; Michal,
&gt;&gt;&gt;
&gt;&gt;&gt; I'm sorry for my late response, I just end my journey today.
&gt;&gt;&gt; Thank your response, your suggestion is very helpful to me.
&gt;&gt;&gt;
&gt;&gt;&gt; I have added Michal in this mail, Michal helps me review my initial patchset.
&gt;&gt;&gt; (https://www.spinics.net/linux/fedora/libvir/msg191339.html)
&gt;&gt;&gt;
&gt;&gt;
&gt;&gt; Whoops I missed that posting, I didn't realize you had sent patches!
&gt;&gt;
&gt;&gt;&gt; All concern about this feature is the XML design.
&gt;&gt;&gt; My original XML design exposes more details of Qemu.
&gt;&gt;&gt;
&gt;&gt;&gt;      &lt;vhost-user-blk-pci type='unix'&gt;
&gt;&gt;&gt;          &lt;source type='bind' path='/tmp/vhost-blk.sock'&gt;
&gt;&gt;&gt;              &lt;reconnect enabled='yes' timeout='5' /&gt;
&gt;&gt;&gt;          &lt;/source&gt;
&gt;&gt;&gt;          &lt;queue num='4'/&gt;
&gt;&gt;&gt;      &lt;/vhost-user-blk-pci&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; As Cole's suggestion, the better design with all vhost-user-scsi/blk
&gt;&gt;&gt; features would like this:
&gt;&gt;&gt;
&gt;&gt;&gt; vhost-user-blk:
&gt;&gt;&gt;
&gt;&gt;&gt; &lt;disk type='vhostuser' device='disk'&gt;
&gt;&gt;&gt;     &lt;source type='unix' path='/path/to/vhost-user-blk.sock' mode='client'&gt;
&gt;&gt;&gt;         &lt;reconnect enabled='yes' timeout='5' /&gt;
&gt;&gt;&gt;      &lt;/source&gt;
&gt;&gt;&gt;     &lt;target dev='vda' bus='virtio'/&gt;
&gt;&gt;&gt;     &lt;queue num='4'/&gt;
&gt;&gt;&gt;      &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x07' function='0x0'/&gt;
&gt;&gt;&gt; &lt;/disk&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; vhost-user-scsi:
&gt;&gt;&gt;
&gt;&gt;&gt; &lt;disk type='vhostuser' device='disk'&gt;
&gt;&gt;&gt;     &lt;source type='unix' path='/path/to/vhost-user-scsi.sock' mode='client'&gt;
&gt;&gt;&gt;         &lt;reconnect enabled='yes' timeout='5' /&gt;
&gt;&gt;&gt;     &lt;/source&gt;
&gt;&gt;&gt;     &lt;target dev='sda' bus='scsi'/&gt;
&gt;&gt;&gt;     &lt;queue num='4'/&gt;
&gt;&gt;&gt; &lt;/disk&gt;
&gt;&gt;&gt;
&gt;&gt;
&gt;&gt; I think my SCSI idea is wrong, sorry. vhost-user-scsi is for passing a
&gt;&gt; scsi host adapter to the VM, correct? If so, then it's not really a
&gt;&gt; &lt;disk&gt;, and so using the existing vhost-scsi support in &lt;hostdev&gt; is
&gt;&gt; probably better. &lt;hostdev&gt; could possible be used for vhost-user-blk as well
&gt;&gt;
&gt;&gt; Can you provide some examples of full qemu command lines using
&gt;&gt; vhost-user-blk and vhost-user-scsi? Just linking to examples else where
&gt;&gt; is fine, but I'm wondering if there's more context
&gt; 
&gt; You could check the vhost-user-scsi/blk examples from SPDK pages:
&gt; https://spdk.io/doc/vhost.html
&gt; 
&gt;&gt;
&gt;&gt; Internally we already have an abstraction for vhost-scsi:
&gt;&gt;
&gt;&gt;     &lt;hostdev mode='subsystem' type='scsi_host'&gt;
&gt;&gt;       &lt;source protocol='vhost' wwpn='XXX'/&gt;
&gt;&gt;     &lt;/hostdev&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; The obvious extension would be
&gt;&gt;
&gt;&gt;     &lt;hostdev mode='subsystem' type='scsi_host'&gt;
&gt;&gt;       &lt;source protocol='vhostuser' type='unix'
&gt;&gt; path='/path/to/vhost-user-scsi.sock' mode='client'/&gt;
&gt;&gt;     &lt;/hostdev&gt;
&gt;&gt;
&gt;&gt; Internally implementing this will be weird. The &lt;source&gt; parameters are
&gt;&gt; only dictated by the hostdev type= field, but in this case they would be
&gt;&gt; dictated by the &lt;source protocol=&gt; field, and we would want to reuse the
&gt;&gt; internal chardev abstraction.
&gt;&gt;
&gt;&gt; vhost-user-blk could be implemented similarly, but with type='storage'
&gt;&gt; which is the way we pass through block devices to LXC guests, but it
&gt;&gt; isn't currently supported in the qemu driver.
&gt;&gt;
&gt;&gt; I dunno. Maybe Michal or danpb can provide guidance
&gt;&gt;
&gt; @Michal, @danpb, could you give some guidance?
&gt;&gt;
&gt;&gt;&gt; Conclusion:
&gt;&gt;&gt; 1. Add new type(vhostuser) for disk label;
&gt;&gt;&gt; 2. Add queue sub-label for disk to support multiqueue(&lt;queue
&gt;&gt;&gt; num='4'/&gt;) or reusing the driver label
&gt;&gt;&gt; (&lt;driver name='vhostuser' queues='4'), which one is better?
&gt;&gt;&gt; Qemu support multiqueue like this:
&gt;&gt;&gt; -device vhost-user-scsi-pci,id=scsi0,chardev=spdk_vhost_scsi0,num_queues=4
&gt;&gt;&gt; -device vhost-user-blk-pci,chardev=spdk_vhost_blk0,num-queues=4
&gt;&gt;&gt;
&gt;&gt;
&gt;&gt; num-queues is already supported by libvirt for both &lt;disk&gt; and &lt;hostdev&gt;
&gt;&gt; with &lt;driver queues=X/&gt;, so whether we use &lt;disk&gt; or &lt;hostdev&gt; you won't
&gt;&gt; need to add any new XML here.
&gt; Got it.
&gt; 
&gt;&gt;
&gt;&gt;&gt; Another question:
&gt;&gt;&gt; When qemu is connecting to a vhost-user-scsi controller[1],  there may
&gt;&gt;&gt; exist multiple LUNs under one target,
&gt;&gt;&gt; then one disklabel(&lt;disk/&gt;) will represent multiple SCSI LUNs,
&gt;&gt;&gt; the 'dev' property(&lt;target dev='sda' bus='scsi'/&gt;) will be ignored, right?
&gt;&gt;&gt; In other words, for vhost-user-scsi disk, it more likes a controller,
&gt;&gt;&gt; maybe the controller label is suitable.
&gt;&gt;&gt;
&gt;&gt;
&gt;&gt; Yes you are right, and this was my understanding. But then its not
&gt;&gt; really a &lt;controller&gt; in libvirt's sense because we can't attach
&gt;&gt; emulated devices to it, so it's more a fit for the existing &lt;hostdev&gt;
&gt;&gt; vhost-user support. Unfortunately it's not really a clean fit anywhere,
&gt;&gt; there will have to be some kind of compromise. And I'm not sure if
&gt;&gt; &lt;disk&gt; or &lt;hostdev&gt; is right for vhost-user-blk, but hopefully others
&gt;&gt; have more clear opinions.
&gt; 
&gt; I'm also confused about it.
&gt; Thanks for your reply.
&gt; 
&gt; Thanks,
&gt; Feng Li
&gt; 
&gt;&gt;
&gt;&gt; Thanks,
&gt;&gt; Cole
&gt;&gt;
&gt;&gt;&gt; I look forward to hearing from you as soon as possible.
&gt;&gt;&gt;
&gt;&gt;&gt; [1]: https://spdk.io/doc/vhost.html
&gt;&gt;&gt;
&gt;&gt;&gt; Feng Li
&gt;&gt;&gt;
&gt;&gt;&gt; Cole Robinson &lt;crobinso@redhat.com&gt; 于2019年10月10日周四 上午6:48写道：
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Sorry for the late reply, and thanks Jano for pointing out elsewhere
&gt;&gt;&gt;&gt; that this didn't receive a response.
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; On 8/12/19 5:56 AM, Li Feng wrote:
&gt;&gt;&gt;&gt;&gt; Hi Guys,
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; And I want to add the vhost-user-scsi-pci/vhost-user-blk-pci support
&gt;&gt;&gt;&gt;&gt; for libvirt.
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; The usage in qemu like this:
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; Vhost-SCSI
&gt;&gt;&gt;&gt;&gt; -chardev socket,id=char0,path=/var/tmp/vhost.0
&gt;&gt;&gt;&gt;&gt; -device vhost-user-scsi-pci,id=scsi0,chardev=char0
&gt;&gt;&gt;&gt;&gt; Vhost-BLK
&gt;&gt;&gt;&gt;&gt; -chardev socket,id=char1,path=/var/tmp/vhost.1
&gt;&gt;&gt;&gt;&gt; -device vhost-user-blk-pci,id=blk0,chardev=char1
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Indeed that matches what I see for the qemu commits too:
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; https://git.qemu.org/?p=qemu.git;a=commit;h=00343e4b54b
&gt;&gt;&gt;&gt; https://git.qemu.org/?p=qemu.git;a=commit;h=f12c1ebddf7
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; What type should I add for libvirt.
&gt;&gt;&gt;&gt;&gt; Type1:
&gt;&gt;&gt;&gt;&gt;       &lt;hostdev mode='subsystem' type='vhost-user'&gt;
&gt;&gt;&gt;&gt;&gt;           &lt;source protocol='vhost-user-scsi' path='/tmp/vhost-scsi.sock'&gt;&lt;/source&gt;
&gt;&gt;&gt;&gt;&gt;           &lt;alias name="vhost-user-scsi-disk1"/&gt;
&gt;&gt;&gt;&gt;&gt;       &lt;/hostdev&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; Type2:
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;       &lt;disk type='network' device='disk'&gt;
&gt;&gt;&gt;&gt;&gt;         &lt;driver name='qemu' type='raw' cache='none' io='native'/&gt;
&gt;&gt;&gt;&gt;&gt;         &lt;source protocol='vhost-user' path='/tmp/vhost-scsi.sock'&gt;
&gt;&gt;&gt;&gt;&gt;         &lt;/source&gt;
&gt;&gt;&gt;&gt;&gt;         &lt;target dev='sdb' bus='vhost-user-scsi'/&gt;
&gt;&gt;&gt;&gt;&gt;         &lt;boot order='3'/&gt;
&gt;&gt;&gt;&gt;&gt;         &lt;alias name='scsi0-0-0-1'/&gt;
&gt;&gt;&gt;&gt;&gt;         &lt;address type='drive' controller='0' bus='0' target='0' unit='1'/&gt;
&gt;&gt;&gt;&gt;&gt;       &lt;/disk&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;       &lt;disk type='network' device='disk'&gt;
&gt;&gt;&gt;&gt;&gt;         &lt;driver name='qemu' type='raw' cache='none' io='native'/&gt;
&gt;&gt;&gt;&gt;&gt;         &lt;source protocol='vhost-user' path='/tmp/vhost-blk.sock'&gt;
&gt;&gt;&gt;&gt;&gt;         &lt;/source&gt;
&gt;&gt;&gt;&gt;&gt;         &lt;target dev='vda' bus='vhost-user-blk'/&gt;
&gt;&gt;&gt;&gt;&gt;         &lt;boot order='1'/&gt;
&gt;&gt;&gt;&gt;&gt;         &lt;alias name='virtio-disk0'/&gt;
&gt;&gt;&gt;&gt;&gt;         &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x07'
&gt;&gt;&gt;&gt;&gt; function='0x0'/&gt;
&gt;&gt;&gt;&gt;&gt;       &lt;/disk&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; I think wiring this into &lt;disk&gt; makes more sense. &lt;hostdev&gt; is really an
&gt;&gt;&gt;&gt; abstraction for assigning a (typically) physical host device to the VM,
&gt;&gt;&gt;&gt; so it handles things like hiding a PCI device from the host, and passing
&gt;&gt;&gt;&gt; that exact device to the VM.
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; In the vhost-user-scsi/blk case, the host device is just a special
&gt;&gt;&gt;&gt; process running on the other side of a socket, and the device
&gt;&gt;&gt;&gt; represented to the guest is a typical virtio device. So to me it makes
&gt;&gt;&gt;&gt; more sense as a &lt;disk&gt; with a &lt;source&gt; that points at that socket.
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; target bus=virtio vs bus=scsi is already used to distinguish between
&gt;&gt;&gt;&gt; virtio-blk and virtio-scsi, so I think we can keep that bit as is, with
&gt;&gt;&gt;&gt; the &lt;address type=drive|pci&gt; to match. We just need to differentiate
&gt;&gt;&gt;&gt; between plain virtio and vhost-user
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; network devices already have vhostuser support:
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;     &lt;interface type='vhostuser'&gt;
&gt;&gt;&gt;&gt;       &lt;source type='unix' path='/tmp/vhost1.sock' mode='server|client'/&gt;
&gt;&gt;&gt;&gt;       &lt;model type='virtio'/&gt;
&gt;&gt;&gt;&gt;     &lt;/interface&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Internally that &lt;source&gt; is a virDomainChrSourceDefPtr which is our
&gt;&gt;&gt;&gt; internal representation of a chardev. So I think something akin to this
&gt;&gt;&gt;&gt; is the way to go. It will likely require updating a LOT of places in the
&gt;&gt;&gt;&gt; code that check disk type= field, probably most places that care about
&gt;&gt;&gt;&gt; whether type=NETWORK or type=!NETWORK will need to be mirrored for the
&gt;&gt;&gt;&gt; new type.
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; &lt;disk type='vhostuser' device='disk'&gt;
&gt;&gt;&gt;&gt;     &lt;source type='unix' path='/path/to/vhost-user-blk.sock' mode='client'/&gt;
&gt;&gt;&gt;&gt;     &lt;target dev='vda' bus='virtio'/&gt;
&gt;&gt;&gt;&gt; &lt;/disk&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; &lt;disk type='vhostuser' device='disk'&gt;
&gt;&gt;&gt;&gt;     &lt;source type='unix' path='/path/to/vhost-user-scsi.sock' mode='client'/&gt;
&gt;&gt;&gt;&gt;     &lt;target dev='sda' bus='scsi'/&gt;
&gt;&gt;&gt;&gt; &lt;/disk&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; - Cole
&gt;&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; - Cole
&gt; 


- Cole

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20191223153158</emailId><senderName>Michal Prívozník</senderName><senderEmail>mprivozn@redhat.com</senderEmail><timestampReceived>2019-12-23 15:31:58-0400</timestampReceived><subject>Re: [libvirt-users] (no subject)</subject><body>

On 12/21/19 12:54 PM, Mauricio Tavares wrote:
&gt;         When I use kvm+libvirt as my hypervisor at home, I usually
&gt; pass logical volumes as the guests' drives (I probably can do better
&gt; but the disk here is just a garden-variety SSD, not NVMe).
&gt; 
&gt;     &lt;emulator&gt;/usr/libexec/qemu-kvm&lt;/emulator&gt;
&gt;     &lt;disk type='file' device='disk'&gt;
&gt;       &lt;driver name='qemu' type='raw' cache='none' io='native'/&gt;
&gt;       &lt;source file='/dev/vmhost_vg0/desktop'/&gt;
&gt;       &lt;target dev='vda' bus='virtio'/&gt;
&gt;       &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x04'
&gt; function='0x0'/&gt;
&gt;     &lt;/disk&gt;
&gt; 
&gt; That works fine as local drives, but what about if I want to use the
&gt; network storage (can provide nfs and iscsi)? Should I:

Remember, a disk consists of frontend and backend. The frontend is how
the disk appears to the guest OS (expressed by &lt;target/&gt; and in your
example the vda disk is attached to a virtio bus). The backend is then
how qemu accesses the data (spressed by &lt;source/&gt; and in your example
qemu reads data from /dev/vmhost_vg0/desktop). Note that the guest has
no idea about the backend. This may change your view on some cases below.

&gt; 
&gt; 1. Create one iscsi target for each guest? Reasoning here is that some
&gt; OS can boot off iscsi.

I can see two ways here actually. One being, you configure the VM to use
iscsi as the backend of the disk but then configure frontend to be
whatever (virtio/scsi/IDE (please don't use IDE)). In this case, the
guest doesn't even know it's actually using iscsi.

If you want the guest to boot from iscsi then you don't even need to
express that in the guest XML at all, because that's guest internal
configuration.

And to complicate things a bit more, libvirt offers two ways of
configuring an iscsi backend: one where iscsi LUNs appear in the host's
/dev and the other where qemu uses libiscsi to connect to the iscsi
target so the host's /dev is left untouched.

&gt; 2. Create a local lv with the minimum required disk space to boot, and
&gt; then network mount the rest be it as nfs or iscsi?
&gt; 3. Create a large iscsi target, do not format it, but instead
&gt; configure it as a lvm, handing out logical volumes as before? So the
&gt; vm guest won't know any better.
&gt; 
&gt; I am leaning towards door #3, but I am open for suggestions.
&gt; 

My personal preference probably favors iscsi a bit over NFS because of
my past with NFS. But I'd say it depends on your use case. What's that
btw? Do you plan to migrate VMs? If so, then having VM's disks on a NAS
is better choice than having them locally. But network access is also
slower than a local one.

Michal

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20191226080058</emailId><senderName>daggs</senderName><senderEmail>daggs@gmx.com</senderEmail><timestampReceived>2019-12-26 08:00:58-0400</timestampReceived><subject>[libvirt-users] aarch64 vm doesn't boots</subject><body>

Greetings,

I'm trying to bring up a alpine rpi aarch64 image within kvm but I'm ended up with a \
stuck system, here is the xml: &lt;domain type='qemu'&gt;
  &lt;name&gt;alpine_rpi4_dev_machine&lt;/name&gt;
  &lt;uuid&gt;b1b155fc-cb92-4f22-8904-c934dd24415b&lt;/uuid&gt;
  &lt;memory unit='KiB'&gt;4194304&lt;/memory&gt;
  &lt;currentMemory unit='KiB'&gt;4194304&lt;/currentMemory&gt;
  &lt;vcpu placement='static'&gt;4&lt;/vcpu&gt;
  &lt;os&gt;
    &lt;type arch='aarch64' machine='virt'&gt;hvm&lt;/type&gt;
  &lt;/os&gt;
  &lt;features&gt;
    &lt;gic version='2'/&gt;
  &lt;/features&gt;
  &lt;cpu mode='custom' match='exact'&gt;
    &lt;model fallback='allow'&gt;cortex-a53&lt;/model&gt;
  &lt;/cpu&gt;
  &lt;clock offset='utc'/&gt;
  &lt;on_poweroff&gt;destroy&lt;/on_poweroff&gt;
  &lt;on_reboot&gt;restart&lt;/on_reboot&gt;
  &lt;on_crash&gt;restart&lt;/on_crash&gt;
  &lt;devices&gt;
    &lt;emulator&gt;/usr/bin/qemu-system-aarch64&lt;/emulator&gt;
    &lt;disk type='file' device='disk'&gt;
      &lt;driver name='qemu' type='qcow2'/&gt;
      &lt;source file='/home/dagg/alpine-rpi4.qcow2'/&gt;
      &lt;target dev='vda' bus='virtio'/&gt;
      &lt;boot order='2'/&gt;
      &lt;address type='virtio-mmio'/&gt;
    &lt;/disk&gt;
    &lt;disk type='file' device='cdrom'&gt;
      &lt;driver name='qemu' type='raw'/&gt;
      &lt;source file='/home/dagg/alpine-virt-3.11.2-aarch64.iso'/&gt;
      &lt;target dev='sdb' bus='scsi'/&gt;
      &lt;readonly/&gt;
      &lt;boot order='1'/&gt;
      &lt;address type='drive' controller='0' bus='0' target='0' unit='1'/&gt;
    &lt;/disk&gt;
    &lt;controller type='scsi' index='0' model='virtio-scsi'&gt;
      &lt;address type='virtio-mmio'/&gt;
    &lt;/controller&gt;
    &lt;controller type='pci' index='0' model='pcie-root'/&gt;
    &lt;controller type='pci' index='1' model='dmi-to-pci-bridge'&gt;
      &lt;model name='i82801b11-bridge'/&gt;
      &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x01' function='0x0'/&gt;
    &lt;/controller&gt;
    &lt;controller type='pci' index='2' model='pci-bridge'&gt;
      &lt;model name='pci-bridge'/&gt;
      &lt;target chassisNr='2'/&gt;
      &lt;address type='pci' domain='0x0000' bus='0x01' slot='0x01' function='0x0'/&gt;
    &lt;/controller&gt;
    &lt;controller type='virtio-serial' index='0'&gt;
      &lt;address type='virtio-mmio'/&gt;
    &lt;/controller&gt;
    &lt;interface type='network'&gt;
      &lt;mac address='52:54:00:e0:7a:7b'/&gt;
      &lt;source network='default'/&gt;
      &lt;model type='virtio'/&gt;
      &lt;address type='virtio-mmio'/&gt;
    &lt;/interface&gt;
    &lt;serial type='pty'&gt;
      &lt;target port='0'/&gt;
    &lt;/serial&gt;
    &lt;console type='pty'&gt;
      &lt;target type='serial' port='0'/&gt;
    &lt;/console&gt;
    &lt;console type='pty'&gt;
      &lt;target type='virtio' port='1'/&gt;
    &lt;/console&gt;
  &lt;/devices&gt;
&lt;/domain&gt;

generated using this cmd:
virt-install --cpu cortex-a53 --name alpine_rpi4_dev_machine --cdrom \
./alpine-virt-3.11.2-aarch64.iso --disk path=alpine-rpi4.qcow2,size=8 --vcpus 4 \
--memory 2048 --os-type linux --arch aarch64

I've tried adding a vnc server and vga device but the screen stays black, qxl doesn't \
work. I'm using ubuntu 16.04 with libvirt 1.3.1, if this is a version issue, I can \
upgrade to latest version. what I'm I missing?

Thanks,

Dagg.


_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20191228133627</emailId><senderName>Gionatan Danti</senderName><senderEmail>g.danti@assyoma.it</senderEmail><timestampReceived>2019-12-28 13:36:27-0400</timestampReceived><subject>Re: [libvirt-users] =?utf-8?q?Locking_without_virtlockd_=28nor_sanloc?= =?utf-8?b?ayk/?=</subject><body>

Il 28-12-2019 01:39 Gionatan Danti ha scritto:
&gt; Hi list,
&gt; I would like to ask a clarification about how locking works. My test
&gt; system is CentOS 7.7 with libvirt-4.5.0-23.el7_7.1.x86_64
&gt; 
&gt; Is was understanding that, by default, libvirt does not use any locks.
&gt; From here [1]: "The out of the box configuration, however, currently
&gt; uses the nop lock manager plugin". As "lock_manager" is commented in
&gt; my qemu.conf file, I was expecting that no locks were used to protect
&gt; my virtual disk from guest double-start or misassignement to other
&gt; vms.
&gt; 
&gt; However, "cat /proc/locks" shows the following (17532905 being the 
&gt; vdisk inode):
&gt; [root@localhost tmp]# cat /proc/locks | grep 17532905
&gt; 42: OFDLCK ADVISORY  READ  -1 fd:00:17532905 201 201
&gt; 43: OFDLCK ADVISORY  READ  -1 fd:00:17532905 100 101
&gt; Indeed, try to associate and booting the disk to another machines give
&gt; me an error (stating that the disk is alredy in use).
&gt; 
&gt; Enabling the "lockd" plugin and starting the same machine, "cat
&gt; /proc/locks" looks different:
&gt; [root@localhost tmp]# cat /proc/locks | grep 17532905
&gt; 31: POSIX  ADVISORY  WRITE 19266 fd:00:17532905 0 0
&gt; 32: OFDLCK ADVISORY  READ  -1 fd:00:17532905 201 201
&gt; 33: OFDLCK ADVISORY  READ  -1 fd:00:17532905 100 101
&gt; As you can see, an *additional* write lock was granted. Again,
&gt; assigning the disk to another vms and booting it up ends with the same
&gt; error.
&gt; 
&gt; So, may I ask:
&gt; - why does libvirtd requests READ locks even commenting the
&gt; "lock_manager" option?
&gt; - does it means that I can avoid modifying anything, relying on
&gt; libvirtd to correctly locks image files?
&gt; - if so, I should use virtlockd for what use cases?
&gt; 
&gt; Thanks.
&gt; 
&gt; [1] https://libvirt.org/locking-lockd.html

Ok, maybe I found some answers: from what I read here [1] and here [2], 
Qemu started to automatically lock disk image files to prevent 
corruption from processes outside libvirt scope (ie: manually issues 
"qemu-img" commands).

Do you suggest relying on Qemu own locks or using virtlockd (in addition 
to Qemu locks)? Whatever the answer is, can you explain why?

Thanks.

[1] 
https://qemu.weilnetz.de/doc/2.12/qemu-doc.html#disk_005fimage_005flocking

[2] https://bugzilla.redhat.com/show_bug.cgi?id=1378241

-- 
Danti Gionatan
Supporto Tecnico
Assyoma S.r.l. - www.assyoma.it
email: g.danti@assyoma.it - info@assyoma.it
GPG public key ID: FF5F32A8


_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20191210234240</emailId><senderName>Cole Robinson</senderName><senderEmail>crobinso@redhat.com</senderEmail><timestampReceived>2019-12-10 23:42:40-0400</timestampReceived><subject>Re: [libvirt-users] nvme, spdk and host linux version</subject><body>

On 11/27/19 10:12 AM, Mauricio Tavares wrote:
&gt; I have been following the patches on nvme support on the list and was
&gt; wondering: If I wanted to build a vm host to be on the bleeding edge
&gt; for nvme and spdk fun in libvirt, which linux distro --
&gt; fedora/ubuntu/centos/etc -- should I pick?

IMO Fedora, most of libvirt is developed by @redhat people so there's
plenty of Fedora expertise around

- Cole

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20191215163429</emailId><senderName>Utsav Parmar</senderName><senderEmail>utsavp0213@gmail.com</senderEmail><timestampReceived>2019-12-15 16:34:29-0400</timestampReceived><subject>[libvirt-users] Request to be allotted a project or a feature in pipeline</subject><body>

[Attachment #2 (multipart/alternative)]


To whom it may concern,

I'm Utsav Parmar, pursuing my B. Tech in Computer Engineering. I like to
work on new technologies and am currently looking for open-source projects
to contribute to.

As it may turn out, I've got a college project in my curriculum this
semester under "Software Development Practice", and I'd like to work upon a
project and/or a feature in pipeline spanning over 3 months in Libvirt
organization as a part of the same college project. My mentor cum professor
has already agreed for the same, given that I get approval from one of the
maintainers. So, if possible, will you please allot me something to work
upon?

Thank you for your time. Looking forward to hearing from you.

Regards,

Utsav Parmar

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;&lt;span \
id="gmail-docs-internal-guid-cc068f30-7fff-40c3-c66d-2168a4051d06"&gt;&lt;p dir="ltr" \
style="line-height:1.38;text-align:justify;margin-top:0pt;margin-bottom:0pt"&gt;&lt;span \
style="font-size:11pt;font-family:Arial;color:rgb(0,0,0);background-color:transparent; \
font-variant-numeric:normal;font-variant-east-asian:normal;vertical-align:baseline;white-space:pre-wrap"&gt;To \
whom it may concern,&lt;/span&gt;&lt;/p&gt;&lt;br&gt;&lt;p dir="ltr" \
style="line-height:1.38;text-align:justify;margin-top:0pt;margin-bottom:0pt"&gt;&lt;span \
style="font-size:11pt;font-family:Arial;color:rgb(0,0,0);background-color:transparent; \
font-variant-numeric:normal;font-variant-east-asian:normal;vertical-align:baseline;white-space:pre-wrap"&gt;I'm \
Utsav Parmar, pursuing my B. Tech in Computer Engineering. I like to work on new \
technologies and am currently looking for open-source projects to contribute \
to.&lt;/span&gt;&lt;/p&gt;&lt;br&gt;&lt;p dir="ltr" \
style="line-height:1.38;text-align:justify;margin-top:0pt;margin-bottom:0pt"&gt;&lt;span \
style="font-size:11pt;font-family:Arial;color:rgb(0,0,0);background-color:transparent; \
font-variant-numeric:normal;font-variant-east-asian:normal;vertical-align:baseline;white-space:pre-wrap"&gt;As \
it may turn out, I've got a college project in my curriculum this semester under \
"Software Development Practice", and I'd like to work upon a project and/or a \
feature in pipeline spanning over 3 months in Libvirt organization as a part of the \
same college project. My mentor cum professor has already agreed for the same, given \
that I get approval from one of the maintainers. So, if possible, will you please \
allot me something to work upon?&lt;/span&gt;&lt;/p&gt;&lt;br&gt;&lt;p dir="ltr" \
style="line-height:1.38;text-align:justify;margin-top:0pt;margin-bottom:0pt"&gt;&lt;span \
style="font-size:11pt;font-family:Arial;color:rgb(0,0,0);background-color:transparent; \
font-variant-numeric:normal;font-variant-east-asian:normal;vertical-align:baseline;white-space:pre-wrap"&gt;Thank \
you for your time. Looking forward to hearing from you.&lt;/span&gt;&lt;/p&gt;&lt;br&gt;&lt;p dir="ltr" \
style="line-height:1.38;text-align:justify;margin-top:0pt;margin-bottom:0pt"&gt;&lt;span \
style="font-size:11pt;font-family:Arial;color:rgb(0,0,0);background-color:transparent; \
font-variant-numeric:normal;font-variant-east-asian:normal;vertical-align:baseline;white-space:pre-wrap"&gt;Regards,&lt;/span&gt;&lt;/p&gt;&lt;p \
dir="ltr" style="line-height:1.38;text-align:justify;margin-top:0pt;margin-bottom:0pt"&gt;&lt;span \
style="font-size:11pt;font-family:Arial;color:rgb(0,0,0);background-color:transparent; \
font-variant-numeric:normal;font-variant-east-asian:normal;vertical-align:baseline;white-space:pre-wrap"&gt;Utsav \
Parmar&lt;/span&gt;&lt;/p&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20191216114940</emailId><senderName>Jens John</senderName><senderEmail>lists@2ion.de</senderEmail><timestampReceived>2019-12-16 11:49:40-0400</timestampReceived><subject>[libvirt-users] Change in treatment of qcow2 with chained backing files in v5.10.0?</subject><body>

Hello list,

upon upgrading from libvirt v5.9.0 -&gt; v5.10.0, libvirt started calling
qemu differently causing the VM operating system to not be found. I'm
wondering whether I'm chasing a bug, or have to otherwise fix my domain
config (created by virt-manager).

To start with, I have a Windows 7 domain based on the following images:

  windows7-base.qcow2:       QEMU QCOW2 Image (v3), 53687091200 bytes
  windows7-Office2013.qcow2: QEMU QCOW2 Image (v3), has backing file (path \
windows7-taintable.qcow2), 80530636800 bytes  windows7-taintable.qcow2:  QEMU QCOW2 \
Image (v3), has backing file (path windows7-base.qcow2), 53687091200 bytes

The VM must be launched with image windows7-Office2013.qcow2.

Using the domain config [1] with a &lt;disk&gt; section

  &lt;disk type='file' device='disk'&gt;
    &lt;driver name='qemu' type='qcow2'/&gt;
    &lt;source file='/home/joj/lib/vm/windows/windows7-Office2013.qcow2'/&gt;
    &lt;target dev='vda' bus='virtio'/&gt;
    &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x07' function='0x0'/&gt;
  &lt;/disk&gt;

libvirt 5.9.0 is calling qemu 4.2.0 like [2], and libvirt 5.10.0 like [3], the
differences being (5.9.0 1st, 5.10.0 2nd lines)

 [--drive file=/home/joj/lib/vm/windows/windows7-Office2013.qcow2,format=qcow2,if=none,id=drive-virtio-disk0-]
  {+-blockdev {"driver":"file","filename":"/home/joj/lib/vm/windows/windows7-taintable.qcow2","node-name":"libvirt-2-storage","auto-read-only":true,"discard":"unmap"} \
-blockdev {"node-name":"libvirt-2-format","read-only":true,"driver":"raw","file":"libvirt-2-storage"} \
-blockdev {"driver":"file","filename":"/home/joj/lib/vm/windows/windows7-Office2013.qcow2","node-name":"libvirt-1-storage","auto-read-only":true,"discard":"unmap"} \
-blockdev {"node-name":"libvirt-1-format","read-only":false,"driver":"qcow2","file":"libvirt-1-storage","backing":"libvirt-2-format"}+}


 -device [-virtio-blk-pci,scsi=off,bus=pci.0,addr=0x7,drive=drive-virtio-disk0,id=virtio-disk0,bootindex=1-]
                
         {+virtio-blk-pci,scsi=off,bus=pci.0,addr=0x7,drive=libvirt-1-format,id=virtio-disk0,bootindex=1+}


As you can see, 5.10.0 is expanding the backing file chain, not leaving
that to qemu. Under 5.10.0, I get an Operating System not Found error,
under 5.9.0, with the shorter -drive argument, everything works as
desired.

Can you perhaps advise me how I either fix the domain spec [1] to get
libvirt to use a true equivalent to the old qemu invocation as I don't
think this is a qemu problem, or how I can turn the new-style JSON
parametrization off?

Other suggestions how to tackle this would also be much appreciated.

---
[1] https://0x0.st/z0KM.xml
[2] https://0x0.st/z0K1.txt
[3] https://0x0.st/z0Kj.txt


_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20191217102252</emailId><senderName>Peter Krempa</senderName><senderEmail>pkrempa@redhat.com</senderEmail><timestampReceived>2019-12-17 10:22:52-0400</timestampReceived><subject>Re: [libvirt-users] Change in treatment of qcow2 with chained backing files in v5.10.0?</subject><body>

On Mon, Dec 16, 2019 at 12:49:40 +0100, Jens John wrote:
&gt; Hello list,

Hi Jens,

&gt; 
&gt; upon upgrading from libvirt v5.9.0 -&gt; v5.10.0, libvirt started calling
&gt; qemu differently causing the VM operating system to not be found. I'm
&gt; wondering whether I'm chasing a bug, or have to otherwise fix my domain
&gt; config (created by virt-manager).

Yes, this change was done by me when enabling the new way to configure
block devices in qemu.

I think I know what's going on:

&gt; 
&gt; To start with, I have a Windows 7 domain based on the following images:
&gt; 
&gt; windows7-base.qcow2:       QEMU QCOW2 Image (v3), 53687091200 bytes
&gt; windows7-Office2013.qcow2: QEMU QCOW2 Image (v3), has backing file (path \
&gt;                 windows7-taintable.qcow2), 80530636800 bytes
&gt; windows7-taintable.qcow2:  QEMU QCOW2 Image (v3), has backing file (path \
&gt; windows7-base.qcow2), 53687091200 bytes

So this output was obtained by 'file'. That unfortunately doesn't give
enough information. Please run 'qemu-img info' on
those files and look for the 'backing file format:'field.

That field is important, because otherwise we'd fall back to image
format detection which was deemed unsafe and libvirt no longer allows
it.


$ qemu-img info pull4.qcow2
image: pull4.qcow2
file format: qcow2
virtual size: 10 MiB (10485760 bytes)
disk size: 196 KiB
cluster_size: 65536
backing file: pull3.qcow2
backing file format: qcow2

^^^^^^^^^^^^^^^^^^^^^^^^^^

Format specific information:
    compat: 1.1
    lazy refcounts: false
    refcount bits: 16
    corrupt: false


The root of the problem is that the images mentioned above will not have
the format section because -F argument for qemu-img was not used when
creating them. This would force libvirt to use format detection which is
insecure and thus libvirt does not do that and assumes the image is raw.

This in normal circumstances causes problems right away, because when
running any more advanced security model than unix permissions (selinux
apparmor) libvirt would not allow qemu to access the backing file. You
don't seem to be running it so it was accidentally working for you until
now.

&gt; The VM must be launched with image windows7-Office2013.qcow2.
&gt; 
&gt; Using the domain config [1] with a &lt;disk&gt; section
&gt; 
&gt; &lt;disk type='file' device='disk'&gt;
&gt; &lt;driver name='qemu' type='qcow2'/&gt;
&gt; &lt;source file='/home/joj/lib/vm/windows/windows7-Office2013.qcow2'/&gt;
&gt; &lt;target dev='vda' bus='virtio'/&gt;
&gt; &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x07' function='0x0'/&gt;
&gt; &lt;/disk&gt;
&gt; 
&gt; libvirt 5.9.0 is calling qemu 4.2.0 like [2], and libvirt 5.10.0 like [3], the
&gt; differences being (5.9.0 1st, 5.10.0 2nd lines)
&gt; 
&gt; [--drive file=/home/joj/lib/vm/windows/windows7-Office2013.qcow2,format=qcow2,if=none,id=drive-virtio-disk0-]
&gt;  {+-blockdev {"driver":"file","filename":"/home/joj/lib/vm/windows/windows7-taintabl \
&gt; e.qcow2","node-name":"libvirt-2-storage","auto-read-only":true,"discard":"unmap"} \
&gt; -blockdev {"node-name":"libvirt-2-format","read-only":true,"driver":"raw","file":"libvirt-2-storage"} \
&gt; -blockdev {"driver":"file","filename":"/home/joj/lib/vm/windows/windows7-Office2013.qcow2","node-name":"libvirt-1-storage","auto-read-only":true,"discard":"unmap"} \
&gt; -blockdev {"node-name":"libvirt-1-format","read-only":false,"driver":"qcow2","file":"libvirt-1-storage","backing":"libvirt-2-format"}+}
&gt; 

 -blockdev {"driver":"file","filename":"/home/joj/lib/vm/windows/windows7-taintable.qcow2","node-name":"libvirt-2-storage","auto-read-only":true,"discard":"unmap"}
                
 -blockdev {"node-name":"libvirt-2-format","read-only":true,"driver":"raw","file":"libvirt-2-storage"}


Here you can see that the
/home/joj/lib/vm/windows/windows7-taintable.qcow2 image was considered
being 'raw' this is usually because you didn't record the approprate
format. This means that qemu will no longer open the backing image.

This is the manifestation of the above problem.

 -blockdev {"driver":"file","filename":"/home/joj/lib/vm/windows/windows7-Office2013.qcow2","node-name":"libvirt-1-storage","auto-read-only":true,"discard":"unmap"}
                
 -blockdev {"node-name":"libvirt-1-format","read-only":false,"driver":"qcow2","file":"libvirt-1-storage","backing":"libvirt-2-format"}+}



&gt; 
&gt; -device [-virtio-blk-pci,scsi=off,bus=pci.0,addr=0x7,drive=drive-virtio-disk0,id=virtio-disk0,bootindex=1-]
&gt;  {+virtio-blk-pci,scsi=off,bus=pci.0,addr=0x7,drive=libvirt-1-format,id=virtio-disk0,bootindex=1+}
&gt;  
&gt; As you can see, 5.10.0 is expanding the backing file chain, not leaving
&gt; that to qemu. Under 5.10.0, I get an Operating System not Found error,
&gt; under 5.9.0, with the shorter -drive argument, everything works as
&gt; desired.
&gt; 
&gt; Can you perhaps advise me how I either fix the domain spec [1] to get
&gt; libvirt to use a true equivalent to the old qemu invocation as I don't
&gt; think this is a qemu problem, or how I can turn the new-style JSON
&gt; parametrization off?

So as a first thing you should create the images properly. This means
that when you are creating the overlay image, you have to use the '-F'
parameter of qemu-img create. (Note that snapshots/overlays created by
libvirt always do this). The -F parameter specifies the format of the
backing image specified by -b:

qemu-img create -f qcow2 -F qcow2 -b windows7-taintable.qcow2 \
windows7-Office2013.qcow2

For fixing the image you can use the qemu-img rebase:

qemu-img rebase -f qcow2 -F qcow2 -b \
/home/joj/lib/vm/windows/windows7-taintable.qcow2  windows7-Office2013.qcow2

Please use full paths for the -b argument unless you want relative
relationships between images.

A second option is to specify the image chain in the XML. This works
starting from libvirt 5.10 :

   &lt;disk type='file' device='disk'&gt;
     &lt;driver name='qemu' type='qcow2'/&gt;
     &lt;source file='/home/joj/lib/vm/windows/windows7-Office2013.qcow2'/&gt;
     &lt;target dev='vda' bus='virtio'/&gt;
     &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x07' function='0x0'/&gt;
     &lt;backingStore type='file'&gt;
       &lt;format type='qcow2'/&gt;
       &lt;source file='/home/joj/lib/vm/windows/windows7-taintable.qcow2'/&gt;
       &lt;backingStore type='file'&gt;
         &lt;format type='qcow2'/&gt;
         &lt;source file='/home/joj/lib/vm/windows/windows7-base.qcow2'/&gt;
         &lt;backingStore/&gt;
       &lt;/backingStore&gt;
     &lt;/backingStore&gt;
   &lt;/disk&gt;

Note that this does not fix the images so they will work only with the
above XML.

As a last possibility you can disable the 'blockdev' feature in
/etc/libvirt/qemu.conf. I will not be more specific on how to do it
as it's mostly for debugging purposes and could break stuff in the
future.

Lastly this is more-or-less tracked in:
https://bugzilla.redhat.com/show_bug.cgi?id=1588373

I think I should finally fix it and report a proper error rather than
silently assuming it might work. With -blockdev it will never work
properly anyways.

&gt; 
&gt; Other suggestions how to tackle this would also be much appreciated.
&gt; 
&gt; ---
&gt; [1] https://0x0.st/z0KM.xml
&gt; [2] https://0x0.st/z0K1.txt
&gt; [3] https://0x0.st/z0Kj.txt
&gt; 
&gt; 
&gt; _______________________________________________
&gt; libvirt-users mailing list
&gt; libvirt-users@redhat.com
&gt; https://www.redhat.com/mailman/listinfo/libvirt-users

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20191211114425</emailId><senderName>Ján Tomko</senderName><senderEmail>jtomko@redhat.com</senderEmail><timestampReceived>2019-12-11 11:44:25-0400</timestampReceived><subject>Re: [libvirt-users] nvme, spdk and host linux version</subject><body>

[Attachment #2 (multipart/signed)]


On Tue, Dec 10, 2019 at 06:42:40PM -0500, Cole Robinson wrote:
&gt;On 11/27/19 10:12 AM, Mauricio Tavares wrote:
&gt;&gt; I have been following the patches on nvme support on the list and was
&gt;&gt; wondering: If I wanted to build a vm host to be on the bleeding edge
&gt;&gt; for nvme and spdk fun in libvirt, which linux distro --
&gt;&gt; fedora/ubuntu/centos/etc -- should I pick?
&gt;
&gt;IMO Fedora, most of libvirt is developed by @redhat people so there's
&gt;plenty of Fedora expertise around

Gentoo is also a popular choice among libvirt developers.

Jano

&gt;
&gt;- Cole
&gt;
&gt;_______________________________________________
&gt;libvirt-users mailing list
&gt;libvirt-users@redhat.com
&gt;https://www.redhat.com/mailman/listinfo/libvirt-users

["signature.asc" (application/pgp-signature)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20191212104046</emailId><senderName>Michal Privoznik</senderName><senderEmail>mprivozn@redhat.com</senderEmail><timestampReceived>2019-12-12 10:40:46-0400</timestampReceived><subject>Re: [libvirt-users] nvme, spdk and host linux version</subject><body>

On 11/27/19 4:12 PM, Mauricio Tavares wrote:
&gt; I have been following the patches on nvme support on the list and was
&gt; wondering: If I wanted to build a vm host to be on the bleeding edge
&gt; for nvme and spdk fun in libvirt, which linux distro --
&gt; fedora/ubuntu/centos/etc -- should I pick?
&gt; 

For NVMe itself it probably doesn't matter as it doesn't require any 
special library. However, I'm not so sure about SPDK, esp. whether my 
NVMe patches is what you really need? My patches enable the only missing 
combination:

host kernel storage stack + qemu storage stack = &lt;disk type='block&gt; 
&lt;source dev='/dev/nvme0n1'/&gt; &lt;/disk&gt;
   This has disadvantage of latency added by both stacks, but allows 
migration.

neither host kernel nor qemu storage stack = &lt;hostdev/&gt; (aka PCI assignment)
   This offers near bare metal latencies, but prohibits migration.

qemu storage stack only = &lt;disk type='nvme'/&gt;
   This is what my patches implement and should combine the above two: 
small latencies and ability to migrate.


Michal

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20191212145100</emailId><senderName>Mauricio Tavares</senderName><senderEmail>raubvogel@gmail.com</senderEmail><timestampReceived>2019-12-12 14:51:00-0400</timestampReceived><subject>Re: [libvirt-users] nvme, spdk and host linux version</subject><body>

On Thu, Dec 12, 2019 at 5:40 AM Michal Privoznik &lt;mprivozn@redhat.com&gt; wrote:
&gt;
&gt; On 11/27/19 4:12 PM, Mauricio Tavares wrote:
&gt; &gt; I have been following the patches on nvme support on the list and was
&gt; &gt; wondering: If I wanted to build a vm host to be on the bleeding edge
&gt; &gt; for nvme and spdk fun in libvirt, which linux distro --
&gt; &gt; fedora/ubuntu/centos/etc -- should I pick?
&gt; &gt;
&gt;
&gt; For NVMe itself it probably doesn't matter as it doesn't require any
&gt; special library. However, I'm not so sure about SPDK, esp. whether my
&gt; NVMe patches is what you really need? My patches enable the only missing
&gt; combination:
&gt;
&gt; host kernel storage stack + qemu storage stack = &lt;disk type='block&gt;
&gt; &lt;source dev='/dev/nvme0n1'/&gt; &lt;/disk&gt;
&gt;    This has disadvantage of latency added by both stacks, but allows
&gt; migration.
&gt;
&gt; neither host kernel nor qemu storage stack = &lt;hostdev/&gt; (aka PCI assignment)
&gt;    This offers near bare metal latencies, but prohibits migration.
&gt;
&gt; qemu storage stack only = &lt;disk type='nvme'/&gt;
&gt;    This is what my patches implement and should combine the above two:
&gt; small latencies and ability to migrate.
&gt;
      That is actually my question: is handing the hard drive through
PCI assignment faster or slowe than disk type='nvme'?

&gt;
&gt; Michal
&gt;


_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20191230210317</emailId><senderName>Arthur Borsboom</senderName><senderEmail>arthurborsboom@gmail.com</senderEmail><timestampReceived>2019-12-30 21:03:17-0400</timestampReceived><subject>[libvirt-users] [Xen] + [Libvirt] + [TPM]: can it work?</subject><body>

[Attachment #2 (multipart/alternative)]


I am trying to get TPM 2.0 pass through to work with Xen and libvirt, but I
can't get it to work.
According to the following sites both Xen and libirt have TPM 2.0 support.

https://wiki.xen.org/wiki/Virtual_Trusted_Platform_Module_(vTPM)
https://libvirt.org/formatdomain.html#elementsTpm

However, when I add a TPM device to a VM (by virt-manager), the VM guest
XML does contain the TPM configuration, but the VM guest (linux) does not
show any TPM device.
Also, when looking in /var/log/libvirt/libxl/vmguest.log there is no
mention of tpm in the (converted libvirt XML to libxl) vm structure.

Is this because libvirt only supports TPM with QEMU?
If so, are there any development plans for TPM support with XEN?
Is there a workaround for the time being?

--=20
Arthur Borsboom
Mob: +31629089953
Email: arthurborsboom@gmail.com
[image: View Arthur's LinkedIn profile]
&lt;http://uk.linkedin.com/in/arthurborsboom&gt;

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;I am trying to get TPM 2.0 pass through to work with Xen and libvirt, \
but I can't get it to work.&lt;br&gt;According to the following sites both Xen and \
libirt have TPM 2.0 support.&lt;br&gt;&lt;br&gt;&lt;a \
href="https://wiki.xen.org/wiki/Virtual_Trusted_Platform_Module_(vTPM)" \
target="_blank"&gt;https://wiki.xen.org/wiki/Virtual_Trusted_Platform_Module_(vTPM)&lt;/a&gt;&lt;br&gt;&lt;a \
href="https://libvirt.org/formatdomain.html#elementsTpm" \
target="_blank"&gt;https://libvirt.org/formatdomain.html#elementsTpm&lt;/a&gt;&lt;br&gt;&lt;br&gt;However, \
when I add a TPM device to a VM (by virt-manager), the VM guest XML does contain the \
TPM configuration, but the VM guest (linux) does not show any TPM device.&lt;div&gt;Also, \
when looking in /var/log/libvirt/libxl/vmguest.log there is no mention of tpm in the \
(converted libvirt XML to libxl) vm structure.&lt;br&gt;&lt;br&gt;Is this because libvirt only \
supports TPM with QEMU?&lt;br&gt;If so, are there any development plans for TPM support \
with XEN?&lt;br&gt;Is there a workaround for the time being?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;-- \
&lt;br&gt;&lt;div dir="ltr" class="gmail_signature" data-smartmail="gmail_signature"&gt;&lt;div \
dir="ltr"&gt;&lt;div&gt;&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;&lt;div \
style="color:rgb(136,136,136)"&gt;&lt;font face="tahoma, sans-serif" size="2"&gt;Arthur \
Borsboom&lt;/font&gt;&lt;/div&gt;&lt;div style="color:rgb(136,136,136)"&gt;&lt;span \
style="font-family:tahoma,sans-serif;font-size:12.8px;text-align:right"&gt;Mob:  \
&lt;/span&gt;&lt;font color="#888888" \
style="font-family:tahoma,sans-serif;font-size:12.8px"&gt;+31629089953&lt;/font&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div \
style="color:rgb(136,136,136);font-size:small"&gt;&lt;font face="tahoma, sans-serif"&gt;Email: \
&lt;a href="mailto:arthurborsboom@gmail.com" style="color:rgb(17,85,204)" \
target="_blank"&gt;arthurborsboom@gmail.com&lt;/a&gt;&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;div \
style="color:rgb(136,136,136);font-size:small;font-family:Tahoma"&gt;&lt;a \
href="http://uk.linkedin.com/in/arthurborsboom" target="_blank"&gt;&lt;img \
src="https://static.licdn.com/scds/common/u/img/webpromo/btn_viewmy_160x25.png" alt=" \
View Arthur's LinkedIn profile"&gt;&lt;/a&gt;&lt;br&gt;&lt;/div&gt;&lt;span \
style="color:rgb(136,136,136);font-family:Tahoma"&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;




_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20191217105220</emailId><senderName>abhishek jain</senderName><senderEmail>abhish_jain@yahoo.com</senderEmail><timestampReceived>2019-12-17 10:52:20-0400</timestampReceived><subject>[libvirt-users] Error in launching chasis</subject><body>

[Attachment #2 (multipart/alternative)]


Hi
I am new to Libvirt and is starting Chassis but getting following error
qemu-system-x86_64:-netdev tap,id=net0,ifname=tap01,vhost=on,script=no,downscript=no: \
tap: open vhost char device failed:Operation not permitted

What could be the reason
RegardsAbhishek


[Attachment #5 (text/html)]

&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;&lt;div class="yahoo-style-wrap" style="font-family:Helvetica \
Neue, Helvetica, Arial, \
sans-serif;font-size:13px;"&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div dir="ltr" \
data-setdir="false"&gt;Hi&lt;/div&gt;&lt;div dir="ltr" data-setdir="false"&gt;&lt;br&gt;&lt;/div&gt;&lt;div \
dir="ltr" data-setdir="false"&gt;I am new to Libvirt and is starting Chassis but getting \
following error&lt;/div&gt;&lt;div dir="ltr" data-setdir="false"&gt;&lt;br&gt;&lt;/div&gt;&lt;div dir="ltr" \
data-setdir="false"&gt;&lt;span&gt;&lt;span \
style="font-size:11.0pt;font-family:"Calibri",sans-serif;mso-fareast-font-fa \
mily:Calibri;mso-fareast-theme-font:minor-latin;mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-language:AR-SA"&gt;qemu-system-x86_64:
                
-netdev tap,id=net0,ifname=tap01,vhost=on,script=no,downscript=no: tap: &lt;span \
style="background:yellow;mso-highlight:yellow"&gt;open vhost char device failed: \
Operation not permitted&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div dir="ltr" \
data-setdir="false"&gt;&lt;span&gt;&lt;span \
style="font-size:11.0pt;font-family:"Calibri",sans-serif;mso-fareast-font-fa \
mily:Calibri;mso-fareast-theme-font:minor-latin;mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-language:AR-SA"&gt;&lt;span \
style="background:yellow;mso-highlight:yellow"&gt;&lt;br&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div \
dir="ltr" data-setdir="false"&gt;&lt;span&gt;&lt;span \
style="font-size:11.0pt;font-family:"Calibri",sans-serif;mso-fareast-font-fa \
mily:Calibri;mso-fareast-theme-font:minor-latin;mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-language:AR-SA"&gt;&lt;span \
style="background-image: initial; background-position: initial; background-size: \
initial; background-repeat: initial; background-attachment: initial; \
background-origin: initial; background-clip: initial; background-color: rgb(255, 255, \
255);"&gt;What could be the reason&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" \
data-setdir="false"&gt;&lt;span&gt;&lt;span \
style="font-size:11.0pt;font-family:"Calibri",sans-serif;mso-fareast-font-fa \
mily:Calibri;mso-fareast-theme-font:minor-latin;mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-language:AR-SA"&gt;&lt;span \
style="background-image: initial; background-position: initial; background-size: \
initial; background-repeat: initial; background-attachment: initial; \
background-origin: initial; background-clip: initial; background-color: rgb(255, 255, \
255);"&gt;&lt;br&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" data-setdir="false"&gt;&lt;span&gt;&lt;span \
style="font-size:11.0pt;font-family:"Calibri",sans-serif;mso-fareast-font-fa \
mily:Calibri;mso-fareast-theme-font:minor-latin;mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-language:AR-SA"&gt;&lt;span \
style="background-image: initial; background-position: initial; background-size: \
initial; background-repeat: initial; background-attachment: initial; \
background-origin: initial; background-clip: initial; background-color: rgb(255, 255, \
255);"&gt;Regards&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" \
data-setdir="false"&gt;&lt;span&gt;&lt;span \
style="font-size:11.0pt;font-family:"Calibri",sans-serif;mso-fareast-font-fa \
mily:Calibri;mso-fareast-theme-font:minor-latin;mso-ansi-language:EN-US;mso-fareast-language:EN-US;mso-bidi-language:AR-SA"&gt;&lt;span \
style="background-image: initial; background-position: initial; background-size: \
initial; background-repeat: initial; background-attachment: initial; \
background-origin: initial; background-clip: initial; background-color: rgb(255, 255, \
255);"&gt;Abhishek&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20191221115455</emailId><senderName>Mauricio Tavares</senderName><senderEmail>raubvogel@gmail.com</senderEmail><timestampReceived>2019-12-21 11:54:55-0400</timestampReceived><subject>[libvirt-users] (no subject)</subject><body>

        When I use kvm+libvirt as my hypervisor at home, I usually
pass logical volumes as the guests' drives (I probably can do better
but the disk here is just a garden-variety SSD, not NVMe).

    &lt;emulator&gt;/usr/libexec/qemu-kvm&lt;/emulator&gt;
    &lt;disk type='file' device='disk'&gt;
      &lt;driver name='qemu' type='raw' cache='none' io='native'/&gt;
      &lt;source file='/dev/vmhost_vg0/desktop'/&gt;
      &lt;target dev='vda' bus='virtio'/&gt;
      &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x04'
function='0x0'/&gt;
    &lt;/disk&gt;

That works fine as local drives, but what about if I want to use the
network storage (can provide nfs and iscsi)? Should I:

1. Create one iscsi target for each guest? Reasoning here is that some
OS can boot off iscsi.
2. Create a local lv with the minimum required disk space to boot, and
then network mount the rest be it as nfs or iscsi?
3. Create a large iscsi target, do not format it, but instead
configure it as a lvm, handing out logical volumes as before? So the
vm guest won't know any better.

I am leaning towards door #3, but I am open for suggestions.


_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20191104104619</emailId><senderName>"John Y."</senderName><senderEmail>wjseven1707@gmail.com</senderEmail><timestampReceived>2019-11-04 10:46:19-0400</timestampReceived><subject>Re: [libvirt-users] It takes long time to start kvm virtual machine with nwfilter in docker containe</subject><body>

[Attachment #2 (multipart/alternative)]


Thank you for your reply.
According to what you said, I set open files to 1024 and solved the problem=
.
Thanks!

-------
Sorry for not mentioning the version information.
The version of libvirt is 4.5.0.

Regards,
John

Daniel P. Berrang=C3=A9 &lt;berrange@redhat.com&gt; =E4=BA=8E2019=E5=B9=B411=E6=
=9C=884=E6=97=A5=E5=91=A8=E4=B8=80 =E4=B8=8B=E5=8D=886:04=E5=86=99=E9=81=93=
=EF=BC=9A

&gt; On Mon, Nov 04, 2019 at 04:55:07PM +0800, John Y. wrote:
&gt; &gt; 1.  It takes minutes to start the virtual machine when I add "filterref=
"
&gt; to
&gt; &gt; libvirt.xml and run command "virsh start  vm1".
&gt; &gt; It also takes minutes to destroy the virtual machine.
&gt;
&gt; You don't mention which version of libvirt you have...
&gt;
&gt; My guess is that your docker container has set an enourmous ulimit
&gt; for max files. On a normal host it is 1024, but on docker I've seen
&gt; it default to 1 million.
&gt;
&gt; This impacts libvirt when it spawns processes, which is common with
&gt; nwfilter in particular, because we must close all open file handles.
&gt; In v5.6.0 we  added code to let libvirt use /proc/$PID/fd to close
&gt; file handles, which is massively faster when ulimits are high.
&gt;
&gt;
&gt; Regards,
&gt; Daniel
&gt; --
&gt; |: https://berrange.com      -o-
&gt; https://www.flickr.com/photos/dberrange :|
&gt; |: https://libvirt.org         -o-
&gt; https://fstop138.berrange.com :|
&gt; |: https://entangle-photo.org    -o-
&gt; https://www.instagram.com/dberrange :|
&gt;
&gt;

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;Thank you for your reply.&lt;div&gt;According to what you said, I set open \
files to 1024 and solved the \
problem.&lt;/div&gt;&lt;div&gt;Thanks!&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;-------&lt;br&gt;&lt;div&gt;Sorry for not \
mentioning the version information.&lt;/div&gt;&lt;/div&gt;&lt;div&gt;The version of libvirt is \
4.5.0.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Regards,&lt;br&gt;&lt;/div&gt;&lt;div&gt;John&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;div \
class="gmail_quote"&gt;&lt;div dir="ltr" class="gmail_attr"&gt;Daniel P. Berrangé &lt;&lt;a \
href="mailto:berrange@redhat.com"&gt;berrange@redhat.com&lt;/a&gt;&gt; \
于2019年11月4日周一 下午6:04写道：&lt;br&gt;&lt;/div&gt;&lt;blockquote \
class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid \
rgb(204,204,204);padding-left:1ex"&gt;On Mon, Nov 04, 2019 at 04:55:07PM +0800, John Y. \
wrote:&lt;br&gt; &gt; 1.   It takes minutes to start the virtual machine when I add \
"filterref" to&lt;br&gt; &gt; libvirt.xml and run command "virsh start   \
vm1".&lt;br&gt; &gt; It also takes minutes to destroy the virtual machine.&lt;br&gt;
&lt;br&gt;
You don't mention which version of libvirt you have...&lt;br&gt;
&lt;br&gt;
My guess is that your docker container has set an enourmous ulimit&lt;br&gt;
for max files. On a normal host it is 1024, but on docker I've seen&lt;br&gt;
it default to 1 million.&lt;br&gt;
&lt;br&gt;
This impacts libvirt when it spawns processes, which is common with&lt;br&gt;
nwfilter in particular, because we must close all open file handles.&lt;br&gt;
In v5.6.0 we   added code to let libvirt use /proc/$PID/fd to close&lt;br&gt;
file handles, which is massively faster when ulimits are high.&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
Regards,&lt;br&gt;
Daniel&lt;br&gt;
-- &lt;br&gt;
&gt; &gt; &lt;a href="https://berrange.com" rel="noreferrer" \
&gt; &gt; target="_blank"&gt;https://berrange.com&lt;/a&gt;         -o-      &lt;a \
&gt; &gt; href="https://www.flickr.com/photos/dberrange" rel="noreferrer" \
&gt; &gt; target="_blank"&gt;https://www.flickr.com/photos/dberrange&lt;/a&gt; :|&lt;br&gt;
&gt; &gt; &lt;a href="https://libvirt.org" rel="noreferrer" \
&gt; &gt; target="_blank"&gt;https://libvirt.org&lt;/a&gt;              -o-                  &lt;a \
&gt; &gt; href="https://fstop138.berrange.com" rel="noreferrer" \
&gt; &gt; target="_blank"&gt;https://fstop138.berrange.com&lt;/a&gt; :|&lt;br&gt;
&gt; &gt; &lt;a href="https://entangle-photo.org" rel="noreferrer" \
&gt; &gt; target="_blank"&gt;https://entangle-photo.org&lt;/a&gt;      -o-      &lt;a \
&gt; &gt; href="https://www.instagram.com/dberrange" rel="noreferrer" \
&gt; &gt; target="_blank"&gt;https://www.instagram.com/dberrange&lt;/a&gt; :|&lt;br&gt;
&lt;br&gt;
&lt;/blockquote&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20191104210447</emailId><senderName>"Phill. Whiteside"</senderName><senderEmail>phillwuk@gmail.com</senderEmail><timestampReceived>2019-11-04 21:04:47-0400</timestampReceived><subject>Re: [libvirt-users] 32 bit support</subject><body>

[Attachment #2 (multipart/alternative)]


Hi Daniel,

thanks for the reply. To double check things I've bought a little windows 7
(32 bit) note book to test the iso images on via 'bare metal'. I'll respond
with the results.

Regards,
Phill.

On Tue, 22 Oct 2019 at 13:09, Daniel P. Berrang=C3=A9 &lt;berrange@redhat.com&gt;
wrote:

&gt; On Fri, Oct 18, 2019 at 09:39:40PM +0100, Phill. Whiteside wrote:
&gt; &gt; Hi good people,
&gt; &gt;
&gt; &gt; I've got a bit of a weird issue. I'm using QEMU emulator version
&gt; &gt; 2.11.1(Debian 1:2.11+dfsg-1ubuntu7.19) And after some considerable time
&gt; of
&gt; &gt; not using it for 32bit installations I now find that it can no longer
&gt; &gt; install some older 32 bit installations (e.g.
&gt; &gt; https://phillw.net/isos/lubuntu/natty/ ) The CPU goes to 100% and then
&gt; &gt; after a while it just stops (I'm using virt-manager v1.5.1) I'm running
&gt; &gt; lubuntu 18.04 (64 bit) on an i7 chipset that runs 64 bit debian / cento=
s
&gt; &gt; and MS server 2019 KVM instances via virt-manager without problems.
&gt; &gt;
&gt; &gt; Any pointers would be appreciated,
&gt;
&gt; I don't recall any known bugs with this. If you're willing to try
&gt; building new QEMU versions though, my suggestion would be to test the
&gt; latest upstream QEMU release(s) to see if it works any better.
&gt;
&gt; Regards,
&gt; Daniel
&gt; --
&gt; |: https://berrange.com      -o-
&gt; https://www.flickr.com/photos/dberrange :|
&gt; |: https://libvirt.org         -o-
&gt; https://fstop138.berrange.com :|
&gt; |: https://entangle-photo.org    -o-
&gt; https://www.instagram.com/dberrange :|
&gt;
&gt;

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;Hi Daniel,&lt;div&gt;&lt;br&gt;&lt;div&gt;thanks for the reply. To double check things \
I've bought a little windows 7 (32 bit) note book to test the iso images on via \
'bare metal'. I'll respond with the \
results.&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Regards,&lt;/div&gt;&lt;div&gt;Phill.&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;div \
class="gmail_quote"&gt;&lt;div dir="ltr" class="gmail_attr"&gt;On Tue, 22 Oct 2019 at 13:09, \
Daniel P. Berrangé &lt;&lt;a \
href="mailto:berrange@redhat.com"&gt;berrange@redhat.com&lt;/a&gt;&gt; \
wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote class="gmail_quote" style="margin:0px 0px 0px \
0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"&gt;On Fri, Oct 18, 2019 \
at 09:39:40PM +0100, Phill. Whiteside wrote:&lt;br&gt; &gt; Hi good people,&lt;br&gt;
&gt; &lt;br&gt;
&gt; I've got a bit of a weird issue. I'm using QEMU emulator version&lt;br&gt;
&gt; 2.11.1(Debian 1:2.11+dfsg-1ubuntu7.19) And after some considerable time of&lt;br&gt;
&gt; not using it for 32bit installations I now find that it can no longer&lt;br&gt;
&gt; install some older 32 bit installations (e.g.&lt;br&gt;
&gt; &lt;a href="https://phillw.net/isos/lubuntu/natty/" rel="noreferrer" \
target="_blank"&gt;https://phillw.net/isos/lubuntu/natty/&lt;/a&gt; ) The CPU goes to 100% and \
then&lt;br&gt; &gt; after a while it just stops (I'm using virt-manager v1.5.1) I'm \
running&lt;br&gt; &gt; lubuntu 18.04 (64 bit) on an i7 chipset that runs 64 bit debian / \
centos&lt;br&gt; &gt; and MS server 2019 KVM instances via virt-manager without \
problems.&lt;br&gt; &gt; &lt;br&gt;
&gt; Any pointers would be appreciated,&lt;br&gt;
&lt;br&gt;
I don't recall any known bugs with this. If you're willing to try&lt;br&gt;
building new QEMU versions though, my suggestion would be to test the&lt;br&gt;
latest upstream QEMU release(s) to see if it works any better.&lt;br&gt;
&lt;br&gt;
Regards,&lt;br&gt;
Daniel&lt;br&gt;
-- &lt;br&gt;
&gt; &gt; &lt;a href="https://berrange.com" rel="noreferrer" \
&gt; &gt; target="_blank"&gt;https://berrange.com&lt;/a&gt;         -o-      &lt;a \
&gt; &gt; href="https://www.flickr.com/photos/dberrange" rel="noreferrer" \
&gt; &gt; target="_blank"&gt;https://www.flickr.com/photos/dberrange&lt;/a&gt; :|&lt;br&gt;
&gt; &gt; &lt;a href="https://libvirt.org" rel="noreferrer" \
&gt; &gt; target="_blank"&gt;https://libvirt.org&lt;/a&gt;              -o-                  &lt;a \
&gt; &gt; href="https://fstop138.berrange.com" rel="noreferrer" \
&gt; &gt; target="_blank"&gt;https://fstop138.berrange.com&lt;/a&gt; :|&lt;br&gt;
&gt; &gt; &lt;a href="https://entangle-photo.org" rel="noreferrer" \
&gt; &gt; target="_blank"&gt;https://entangle-photo.org&lt;/a&gt;      -o-      &lt;a \
&gt; &gt; href="https://www.instagram.com/dberrange" rel="noreferrer" \
&gt; &gt; target="_blank"&gt;https://www.instagram.com/dberrange&lt;/a&gt; :|&lt;br&gt;
&lt;br&gt;
&lt;/blockquote&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20191107070943</emailId><senderName>Han Han</senderName><senderEmail>hhan@redhat.com</senderEmail><timestampReceived>2019-11-07 07:09:43-0400</timestampReceived><subject>Re: [libvirt-users] Where can I find the slirp-helper?</subject><body>

[Attachment #2 (multipart/alternative)]


Thank you. It works :)

On Thu, Nov 7, 2019 at 3:08 PM Yukin Chan &lt;yukinchan@redhat.com&gt; wrote:

&gt; Hi Han,
&gt;
&gt; The slirp-helper is a helper program provided in libslirp rust bindings.
&gt; It seems that you need to build it yourself ATM.
&gt;
&gt; git clone https://gitlab.freedesktop.org/slirp/libslirp-rs.git
&gt;&gt; cd libslirp-rs
&gt;&gt; cargo build --bin slirp-helper --features=all
&gt;&gt;
&gt;
&gt; Han Han &lt;hhan@redhat.com&gt; 於 2019年11月7日 週四 下午2:01寫道：
&gt;
&gt;&gt; For the libvirt 5.8 release, I find that there is a new comment in
&gt;&gt; qemu.conf:
&gt;&gt; #slirp_helper = "/usr/bin/slirp-helper"
&gt;&gt;
&gt;&gt; It indicates that there is a slirp-helper to help setup slirp network.
&gt;&gt; But I cannot
&gt;&gt; find it even after I built the latest qemu(v4.1.0-1378-g98b2e3c9ab) and
&gt;&gt; libvirt
&gt;&gt; (v5.9.0-rc1-2-g73f91d659b).
&gt;&gt;
&gt;&gt; Could you please tell me where I can find that helper program?
&gt;&gt;
&gt;&gt; Thanks
&gt;&gt; --
&gt;&gt; Best regards,
&gt;&gt; -----------------------------------
&gt;&gt; Han Han
&gt;&gt; Quality Engineer
&gt;&gt; Redhat.
&gt;&gt;
&gt;&gt; Email: hhan@redhat.com
&gt;&gt; Phone: +861065339333
&gt;&gt; _______________________________________________
&gt;&gt; libvirt-users mailing list
&gt;&gt; libvirt-users@redhat.com
&gt;&gt; https://www.redhat.com/mailman/listinfo/libvirt-users
&gt;
&gt;
&gt;
&gt; --
&gt;
&gt; Regards,
&gt;
&gt; Yukin Chan
&gt;
&gt; She / Her / Hers
&gt;
&gt; QE Virtualization
&gt;
&gt; Red Hat APAC &lt;https://www.redhat.com&gt;
&gt;
&gt; 9 floor, Raycom Infotech Park, North Tower C
&gt;
&gt; 2 Kexueyuan Nanlu, Haidian District, Beijing, China
&gt;
&gt; T: 86-10-65627449
&gt;
&gt; PGP: AC7BCF02F44FA43F940A3B9A25D5E545D2C3D639
&gt; &lt;https://red.ht/sig&gt;
&gt;


-- 
Best regards,
-----------------------------------
Han Han
Quality Engineer
Redhat.

Email: hhan@redhat.com
Phone: +861065339333

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;Thank you. It works :)&lt;br&gt;&lt;/div&gt;&lt;br&gt;&lt;div class="gmail_quote"&gt;&lt;div \
dir="ltr" class="gmail_attr"&gt;On Thu, Nov 7, 2019 at 3:08 PM Yukin Chan &lt;&lt;a \
href="mailto:yukinchan@redhat.com"&gt;yukinchan@redhat.com&lt;/a&gt;&gt; \
wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote class="gmail_quote" style="margin:0px 0px 0px \
0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"&gt;&lt;div dir="ltr"&gt;&lt;div&gt;Hi \
Han,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The &lt;span \
style="font-family:monospace"&gt;slirp-helper&lt;/span&gt; is a helper program provided in \
libslirp rust bindings. It seems that you need to build it yourself \
ATM.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;blockquote class="gmail_quote" style="margin:0px 0px 0px \
0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"&gt;&lt;div&gt;&lt;span \
style="font-family:monospace"&gt;git clone &lt;a \
href="https://gitlab.freedesktop.org/slirp/libslirp-rs.git" \
target="_blank"&gt;https://gitlab.freedesktop.org/slirp/libslirp-rs.git&lt;/a&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span \
style="font-family:monospace"&gt;cd libslirp-rs&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span \
style="font-family:monospace"&gt;cargo build --bin slirp-helper \
--features=all&lt;/span&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;div class="gmail_quote"&gt;&lt;div \
dir="ltr" class="gmail_attr"&gt;Han Han &lt;&lt;a href="mailto:hhan@redhat.com" \
target="_blank"&gt;hhan@redhat.com&lt;/a&gt;&gt; 於 2019年11月7日 週四 \
下午2:01寫道：&lt;br&gt;&lt;/div&gt;&lt;blockquote class="gmail_quote" style="margin:0px 0px \
0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"&gt;&lt;div \
dir="ltr"&gt;&lt;div&gt;For the libvirt 5.8 release, I find that there is a new comment in \
qemu.conf:&lt;/div&gt;&lt;div&gt;#slirp_helper = \
"/usr/bin/slirp-helper"&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;It indicates that there is \
a slirp-helper to help setup slirp network. But I cannot&lt;/div&gt;&lt;div&gt;find it even after \
I built the latest qemu(v4.1.0-1378-g98b2e3c9ab) and \
libvirt&lt;/div&gt;&lt;div&gt;(v5.9.0-rc1-2-g73f91d659b).&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Could you \
please tell me where I can find that helper \
program?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks&lt;br&gt;&lt;/div&gt;-- &lt;br&gt;&lt;div dir="ltr"&gt;&lt;div \
dir="ltr"&gt;&lt;div&gt;&lt;div dir="ltr"&gt;&lt;div&gt;&lt;div dir="ltr"&gt;Best regards,&lt;/div&gt;&lt;div \
dir="ltr"&gt;-----------------------------------&lt;br&gt;&lt;/div&gt;&lt;div dir="ltr"&gt;Han \
Han&lt;br&gt;Quality Engineer&lt;br&gt;Redhat.&lt;br&gt;&lt;br&gt;Email: &lt;a href="mailto:hhan@redhat.com" \
target="_blank"&gt;hhan@redhat.com&lt;/a&gt;&lt;br&gt;Phone: \
+861065339333&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt; \
_______________________________________________&lt;br&gt; libvirt-users mailing list&lt;br&gt;
&lt;a href="mailto:libvirt-users@redhat.com" \
target="_blank"&gt;libvirt-users@redhat.com&lt;/a&gt;&lt;br&gt; &lt;a \
href="https://www.redhat.com/mailman/listinfo/libvirt-users" rel="noreferrer" \
target="_blank"&gt;https://www.redhat.com/mailman/listinfo/libvirt-users&lt;/a&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br \
clear="all"&gt;&lt;br&gt;-- &lt;br&gt;&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;&lt;div&gt;&lt;div \
dir="ltr"&gt;&lt;span&gt;&lt;div&gt;&lt;div dir="ltr"&gt;&lt;span&gt;&lt;div&gt;&lt;div dir="ltr"&gt;&lt;span&gt;&lt;div&gt;&lt;div \
dir="ltr"&gt;&lt;span&gt;&lt;div&gt;&lt;div dir="ltr"&gt;&lt;div&gt;&lt;div dir="ltr"&gt;&lt;div&gt;&lt;div \
dir="ltr"&gt;&lt;span&gt;&lt;div&gt;&lt;div dir="ltr"&gt;&lt;div&gt;&lt;div dir="ltr"&gt;&lt;div&gt;&lt;div dir="ltr"&gt;&lt;div&gt;&lt;div \
dir="ltr"&gt;&lt;div&gt;&lt;div&gt;&lt;span \
style="font-family:monospace,monospace"&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span \
                style="font-family:monospace,monospace"&gt;Regards,&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;
                
        &lt;p style="font-weight:bold;margin:0px;padding:0px;font-size:14px;text-transform:capitalize;font-family:"RedHatText",sans-serif"&gt;
                
          &lt;span style="font-family:monospace,monospace"&gt;&lt;span&gt;Yukin&lt;/span&gt; \
&lt;span&gt;Chan&lt;/span&gt;&lt;span style="color:rgb(170,170,170);margin:0px"&gt;&lt;/span&gt;  \
&lt;/span&gt;&lt;/p&gt;&lt;span style="font-family:monospace,monospace"&gt;&lt;/span&gt;&lt;span \
style="font-family:monospace,monospace"&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span \
style="font-family:monospace,monospace"&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span \
style="font-family:monospace,monospace"&gt;&lt;/span&gt;&lt;p \
style="font-weight:normal;font-size:12px;margin:0px;text-transform:capitalize"&gt;&lt;span \
style="font-family:monospace,monospace"&gt;&lt;span&gt;She / Her / \
Hers&lt;br&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p \
style="font-weight:normal;font-size:12px;margin:0px;text-transform:capitalize"&gt;&lt;span \
style="font-family:monospace,monospace"&gt;&lt;span&gt;QE Virtualization&lt;/span&gt;&lt;/span&gt;  \
                &lt;/p&gt;&lt;span style="font-family:monospace,monospace"&gt;
        &lt;/span&gt;&lt;p style="font-weight:normal;margin:0px 0px 4px;font-size:12px"&gt;
          &lt;span style="font-family:monospace,monospace"&gt;&lt;a \
style="color:rgb(0,136,206);font-size:12px;margin:0px;text-decoration:none" \
href="https://www.redhat.com" target="_blank"&gt;Red Hat &lt;span&gt;APAC&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;  \
&lt;/p&gt;&lt;span style="font-family:monospace,monospace"&gt;  &lt;/span&gt;&lt;div \
style="margin-bottom:4px"&gt;  &lt;span style="font-family:monospace,monospace"&gt;&lt;span&gt;
        &lt;p style="font-size:12px;margin:0px"&gt;9 floor, Raycom Infotech Park, North \
Tower C&lt;/p&gt;  &lt;/span&gt;&lt;/span&gt;
      &lt;span style="font-family:monospace,monospace"&gt;&lt;span&gt;
        &lt;p style="font-size:12px;margin:0px"&gt;2 Kexueyuan Nanlu, Haidian District, \
Beijing, China&lt;/p&gt;  &lt;/span&gt;&lt;/span&gt;
    &lt;/div&gt;&lt;span style="font-family:monospace,monospace"&gt;
    &lt;/span&gt;&lt;p style="font-weight:normal;margin:0px;font-size:12px"&gt;
      
      &lt;span style="font-family:monospace,monospace"&gt;&lt;span&gt;T: &lt;a \
href="tel:86-10-65627449" \
style="color:rgb(0,0,0);font-size:12px;margin:0px;text-decoration:none" \
target="_blank"&gt;86-10-65627449&lt;/a&gt;       &lt;/span&gt;&lt;/span&gt;  
    &lt;/p&gt;&lt;span style="font-family:monospace,monospace"&gt;
    &lt;/span&gt;&lt;p style="font-size:12px;margin:0px;font-family:"RedHatText",sans-serif"&gt;&lt;span \
style="font-family:monospace,monospace"&gt;PGP: \
AC7BCF02F44FA43F940A3B9A25D5E545D2C3D639&lt;/span&gt;  &lt;/p&gt;
    

    &lt;div style="margin-top:12px"&gt;
      &lt;table border="0"&gt;
        &lt;tbody&gt;&lt;tr&gt;
          &lt;td width="100px"&gt;&lt;a href="https://red.ht/sig" target="_blank"&gt; &lt;img \
src="https://static.redhat.com/libs/redhat/brand-assets/latest/corp/logo.png" \
width="90" height="auto"&gt;&lt;/a&gt; &lt;/td&gt;  
        &lt;/tr&gt;
      &lt;/tbody&gt;&lt;/table&gt;
    &lt;/div&gt;

  &lt;/div&gt;&lt;span style="font-family:monospace,monospace"&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt; \
/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;
 &lt;/blockquote&gt;&lt;/div&gt;&lt;br clear="all"&gt;&lt;br&gt;-- &lt;br&gt;&lt;div dir="ltr" \
class="gmail_signature"&gt;&lt;div dir="ltr"&gt;&lt;div&gt;&lt;div dir="ltr"&gt;&lt;div&gt;&lt;div dir="ltr"&gt;Best \
regards,&lt;/div&gt;&lt;div dir="ltr"&gt;-----------------------------------&lt;br&gt;&lt;/div&gt;&lt;div \
dir="ltr"&gt;Han Han&lt;br&gt;Quality Engineer&lt;br&gt;Redhat.&lt;br&gt;&lt;br&gt;Email: &lt;a \
href="mailto:hhan@redhat.com" target="_blank"&gt;hhan@redhat.com&lt;/a&gt;&lt;br&gt;Phone: \
+861065339333&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20191107195240</emailId><senderName>jonetsu</senderName><senderEmail>jonetsu@teksavvy.com</senderEmail><timestampReceived>2019-11-07 19:52:40-0400</timestampReceived><subject>Re: [libvirt-users] Understanding the use of virt-install from the CLI (Linux)</subject><body>

On Thu, 7 Nov 2019 16:44:45 +0200 (EET)
Timo Lindfors &lt;timo.lindfors@iki.fi&gt; wrote:

&gt; At least the following works on Debian 10:

Thanks.  That's quite a few options to read about.  One question: what
is the pressed.cfg about ?  Is it to seed the rng early in the install
process ?

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20191114220134</emailId><senderName>Cole Robinson</senderName><senderEmail>crobinso@redhat.com</senderEmail><timestampReceived>2019-11-14 22:01:34-0400</timestampReceived><subject>Re: [libvirt-users] libvirt_lxc memory limit, emulator process part of the cgroup?</subject><body>

On 10/28/19 6:41 AM, Maximilian Philipps wrote:
&gt; hi,
&gt; 
&gt; I am currently investigating a bug with libvirt lxc. Whenever I do a
&gt; systemctl daemon-reload on the host, my container loses his memory limit
&gt; and then reports having access to 8 exabyte of memory.
&gt; 
&gt; I have tracked the issue down to two parts:
&gt; 
&gt; memory.limit_in_bytes jumps from the correct value to 9223372036854771712.
&gt; 
&gt; libvirt lxc appears to set the memory limit in transient way without
&gt; writing a config for systemd. I can't prevent memory.limit_in_bytes
&gt; changing by setting the correct value through systemctl set-property
&gt; --runtime &lt;scope&gt; MemoryLimit=
&gt; 
&gt; tasks in the memory cgroup gets cleaned up.
&gt; 
&gt; After starting the container the cgroup contains 3 pid. The pid of the
&gt; libvirt_lxc process, the pid of the init process in the container and
&gt; third unknown pid that doesn't exists in /proc/.
&gt; 
&gt; After a demon-reload only the init process   remains in the cgroup and
&gt; unless I move the libvirt_lxc process into the cgroup the memory limit
&gt; isn't enforced.
&gt; 
&gt; I have also noticed that when starting libvirtd it complains about
&gt; GetMachineByPID failing for the libvirt_lxc process.
&gt; 
&gt; 
&gt; This leaves me with one big question, the the emulator process
&gt; libvirt_lxc supposed to be part of the container's cgroup or not? The
&gt; leader of the container is the init process in the container. I am
&gt; unsure on how the additional emulator process is supposed to be registered.
&gt; 

CCing danpb who likely knows best

You may want to give latest libvirt a shot though, there was a lot of
cgroup changes since 5.0.0 release. It may actually make things worse
with lxc driver though, but it will be another data point at least

- Cole

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20191120095641</emailId><senderName>Daniel =?utf-8?B?UC4gQmVycmFuZ8Op?=</senderName><senderEmail>berrange@redhat.com</senderEmail><timestampReceived>2019-11-20 09:56:41-0400</timestampReceived><subject>Re: [libvirt-users] Descriptions of mdev types?</subject><body>

On Wed, Nov 20, 2019 at 09:52:15AM +0100, Milan Zamazal wrote:
&gt; Erik Skultety &lt;eskultet@redhat.com&gt; writes:
&gt; 
&gt; &gt; On Tue, Nov 19, 2019 at 05:38:54PM +0100, Milan Zamazal wrote:
&gt; &gt; &gt; Hi, when retrieving an mdev device info using `virsh nodedev-dumpxml' or
&gt; &gt; &gt; the libvirt API, something like the following is returned:
&gt; &gt; 
&gt; &gt; &gt; 
&gt; &gt; &gt; &lt;capability type='mdev_types'&gt;
&gt; &gt; &gt; &lt;type id='nvidia-210'&gt;
&gt; &gt; &gt; &lt;name&gt;GRID M60-2B4&lt;/name&gt;
&gt; &gt; &gt; &lt;deviceAPI&gt;vfio-pci&lt;/deviceAPI&gt;
&gt; &gt; &gt; &lt;availableInstances&gt;4&lt;/availableInstances&gt;
&gt; &gt; &gt; &lt;/type&gt;
&gt; &gt; &gt; ...
&gt; &gt; &gt; &lt;/capability&gt;
&gt; &gt; &gt; 
&gt; &gt; &gt; Besides device_api, available_instances and (optional) `name',
&gt; &gt; &gt; `description' of the given mdev type may be optionally provided in
&gt; &gt; &gt; /sys/.../mdev_supported_types/... for each of the available mdev types.
&gt; &gt; &gt; I can see in the sources that libvirt doesn't try to retrieve it -- is
&gt; &gt; &gt; it intentionally or is it just an omission?  If the latter, could it be
&gt; &gt; &gt; added, please?  It looks like a useful piece of information for the user
&gt; &gt; &gt; to get an idea what the given mdev type means.
&gt; &gt; 
&gt; &gt; The reasoning we had about not including the "description" attribute when we
&gt; &gt; introduced mdevs to libvirt's nodedev driver was that there was no way for
&gt; &gt; NVIDIA and Intel to agree on the values to be exposed by the attribute -
&gt; &gt; especially the data NVIDIA puts in there (like you already said) is useful, but
&gt; &gt; there was also no agreement on extracting the data into a different attribute
&gt; &gt; (a set of attributes) and make them structured within the XML.
&gt; &gt; 
&gt; &gt; Which brings me to the actual content of the "description" attribute, it
&gt; &gt; contains unstructured free-form text and we didn't want to expose that kind of
&gt; &gt; thing in the XML even though it just so happens that NVIDIA put some
&gt; &gt; interesting data in it - since the attribute is optional and free-form, one
&gt; &gt; day, you find the useful data you're interested in now, but tomorrow that may
&gt; &gt; not be the case anymore and can easily change. I've got no problem with the
&gt; &gt; idea of exposing some kind of description as part of the XML per se, the
&gt; &gt; problem I see is that someone will try and start parsing the description field
&gt; &gt; because of the potentially useful data and if it changes and I'm afraid
&gt; &gt; complaints will head our way even though we cannot guarantee anything wrt to
&gt; &gt; that specific field (I'm still open to a discussion though).
&gt; 
&gt; I agree that it would not be a good idea to rely on the content of the
&gt; description data or trying to parse it.  But if we can accept the
&gt; description is basically a free-form, less or more informative, text
&gt; then it is still useful for some purposes.  I think your worries about
&gt; the users relying on the content of the "data" can be handled in
&gt; documentation, by clearly stating the item may contain anything, which
&gt; may change any time.

The challenge is that in the spec / design of mdev it is explicitly
suggested that 'description' should be a way to report features, and
this leads to drivers exposing feature info in a way that is structured
&amp; explicitly intended to be parsable.

I think this is a reflection of a mistake in the initial mdev design.

IMHO there needs to be a way for drivers to expose feature information
in sysfs explicitly, so that "description" can fullfill the purpose of
providing a simple user friendly identifier for the device type.

This was discussed, but it got ratholed in a debate about whether we
should standardize various feature names and values for different types
of devices. People were wary of trying to standardize something before
there were many real world examples of usage to learn from, which is
understandable. It also meant someone had to do the work to look at
different device types &amp; identify common features &amp; no one volunteered
to try to do that.

So we're left in a situation where description is the only place for
drivers to officially expose feature info which is very undesirable.


As a way forward to move forward, I think we should accept that we're
in an imperfect reality where we are unlikely to ever standardize on
features to expose from drivers. Even if we do standardize on some
features, it is likely to only be a subset of what the driver can
actually do.

IOW, we must enhance the mdev spec to document an explicit way to
expose vendor specific feature info that people can use today, while
still allowing us scope to standardize on some features  in the
future.

I'm CC'ing alex in case he has thoughts on this...

As an example of what I'm suggesting though consider

diff --git a/Documentation/driver-api/vfio-mediated-device.rst \
b/Documentation/driver-api/vfio-mediated-device.rst index 25eb7d5b834b..0abdb99e1d4d \
                100644
--- a/Documentation/driver-api/vfio-mediated-device.rst
+++ b/Documentation/driver-api/vfio-mediated-device.rst
@@ -202,6 +202,12 @@ Directories and files under the sysfs for Each Physical Device
   |     |   |--- available_instances
   |     |   |--- device_api
   |     |   |--- description
+  |     |   |--- features
+  |     |   |     |--- feature-A
+  |     |   |     |--- feature-B
+  |     |   |     |--- x-vendor-feature-X
+  |     |   |     |--- x-vendor-feature-Y
+  |     |   |     ...
   |     |   |--- [devices]
   |     |--- [&lt;type-id&gt;]
   |     |   |--- create
@@ -209,6 +215,12 @@ Directories and files under the sysfs for Each Physical Device
   |     |   |--- available_instances
   |     |   |--- device_api
   |     |   |--- description
+  |     |   |--- features
+  |     |   |     |--- feature-A
+  |     |   |     |--- feature-B
+  |     |   |     |--- x-vendor-feature-X
+  |     |   |     |--- x-vendor-feature-Z
+  |     |   |     ...
   |     |   |--- [devices]
   |     |--- [&lt;type-id&gt;]
   |          |--- create
@@ -216,6 +228,12 @@ Directories and files under the sysfs for Each Physical Device
   |          |--- available_instances
   |          |--- device_api
   |          |--- description
+  |          |--- features
+  |          |     |--- feature-A
+  |          |     |--- feature-F
+  |          |     |--- x-vendor-feature-X
+  |          |     |--- x-vendor-feature-Y
+  |          |     ...
   |          |--- [devices]
 
 * [mdev_supported_types]
@@ -257,8 +275,25 @@ Directories and files under the sysfs for Each Physical Device
 
 * description
 
-  This attribute should show brief features/description of the type. This is
-  optional attribute.
+  This attribute should show a brief (&lt; 80 character) description of
+  the type. This is optional attribute.
+
+* features
+
+  This optional directory contains zero or more files that report on
+  features supported by the mdev type.
+
+  A each must contain information on a single feature. Over time
+  certain features may be standardized, to define a common data
+  format for implementations which is guaranteed to be stable
+  across releases. Other features will be vendor specific and thus
+  have no documented data format or guarantees about future stability
+
+  Vendor specific feature file names MUST begin with an "x-" prefix.
+  Any filename with an "x-" prefix is reserved for standardized
+  features.
+
+  At this time no features are standardized.
 
 Directories and Files Under the sysfs for Each mdev Device
 ----------------------------------------------------------



&gt; Our use case in oVirt is to display some accompanied information when a
&gt; user selects one of the many mdev types in the UI.  If we provided
&gt; description (as a normal text) next to each of the mdev types, it would
&gt; be definitely helpful and a significant improvement over just providing
&gt; the cryptic mdev type numbers + available instances.  Currently, we have
&gt; no better choice than to read `description' files from /sys, which makes
&gt; little sense when all the other info is already available from libvirt.
&gt; This is why I think having &lt;description&gt; element with a text content
&gt; copied 1:1 from `description' file would be useful.

If we could agree on an enhancement to the mdev spec to provide an
official way to expose feature information independently of the
description file, then I would have no objection to exposing the
description contents in libvirt. If any drivers impls did then
abuse description to report features, we can simply point them to
the spec to show the error of their ways.

Regards,
Daniel
-- 
&gt; &gt; https://berrange.com      -o-    https://www.flickr.com/photos/dberrange :|
&gt; &gt; https://libvirt.org         -o-            https://fstop138.berrange.com :|
&gt; &gt; https://entangle-photo.org    -o-    https://www.instagram.com/dberrange :|

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20191120155748</emailId><senderName>Daniel =?utf-8?B?UC4gQmVycmFuZ8Op?=</senderName><senderEmail>berrange@redhat.com</senderEmail><timestampReceived>2019-11-20 15:57:48-0400</timestampReceived><subject>Re: [libvirt-users] FYI mail problems for libvirt lists</subject><body>

On Tue, Nov 19, 2019 at 10:00:05AM +0000, Daniel P. Berrangé wrote:
&gt; It has come to our attention that many, possibly even all, people with
&gt; non-redhat.com email addresses are unable to send mail to most libvirt
&gt; mailing lists, receiving bounce messages saying the address doesn't
&gt; exist eg
&gt; 
&gt;   Final-Recipient: rfc822; libvirt-users@redhat.com
&gt;   Action: failed
&gt;   Status: 5.0.0
&gt;   Remote-MTA: dns; us-smtp-inbound-1.mimecast.com
&gt;   Diagnostic-Code: smtp; 550 Invalid Recipient -
&gt;     https://community.mimecast.com/docs/DOC-1369#550
&gt;     [boadZMN8PrGodBBK6pzKWg.us309]
&gt; 
&gt; In my testing, libvir-list@redhat.com is the only list that is currently
&gt; accepting incoming mail from non-redhat.com addresses.
&gt; 
&gt; I see bounces from libvirt-users@redhat.com, libvirt-ci@redhat.com,
&gt; libvirt-announce@redhat.com and libvirt-security@redhat.com, as well
&gt; as from the undocumented alias libvirt-list@redhat.com

I believe this issue is now resolved and the lists are accepting
incoming mail normally.


Regards,
Daniel
-- 
|: https://berrange.com      -o-    https://www.flickr.com/photos/dberrange :|
|: https://libvirt.org         -o-            https://fstop138.berrange.com :|
|: https://entangle-photo.org    -o-    https://www.instagram.com/dberrange :|

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20191120180519</emailId><senderName>Eric Blake</senderName><senderEmail>eblake@redhat.com</senderEmail><timestampReceived>2019-11-20 18:05:19-0400</timestampReceived><subject>Re: [libvirt-users] virsh snapshot-create --print-xml seems to ignore most arguments</subject><body>

On 11/20/19 11:14 AM, Timo Schneider wrote:
&gt; Hi,
&gt; 
&gt; I am wondering if the --print-xml option is working correctly. The
&gt; output for two snapshot-create commands are the same, even though the
&gt; first one includes additional options (no-metadata and atomic).

--no-metadata and --atomic merely pass additional flags to the API call; 
they do not affect the XML.  Remember, it is the combination of both the 
XML and the API flags that control what the API will do.

&gt; 
&gt; I want to use the generated XML to create a snapshot via a perl script,
&gt; and Sys::Virt only seems to support snapshots using a XML description
&gt; of the arguments.

Yes, the perl bindings don't have the convenience wrappers like virsh, 
so you'll need the XML; but the perl bindings DO let you also pass in 
flags for the case where virsh has bool options for setting a flag.

-- 
Eric Blake, Principal Software Engineer
Red Hat, Inc.           +1-919-301-3226
Virtualization:  qemu.org | libvirt.org

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20191107055951</emailId><senderName>Han Han</senderName><senderEmail>hhan@redhat.com</senderEmail><timestampReceived>2019-11-07 05:59:51-0400</timestampReceived><subject>[libvirt-users] Where can I find the slirp-helper?</subject><body>

[Attachment #2 (multipart/alternative)]


For the libvirt 5.8 release, I find that there is a new comment in
qemu.conf:
#slirp_helper = "/usr/bin/slirp-helper"

It indicates that there is a slirp-helper to help setup slirp network. But
I cannot
find it even after I built the latest qemu(v4.1.0-1378-g98b2e3c9ab) and
libvirt
(v5.9.0-rc1-2-g73f91d659b).

Could you please tell me where I can find that helper program?

Thanks
-- 
Best regards,
-----------------------------------
Han Han
Quality Engineer
Redhat.

Email: hhan@redhat.com
Phone: +861065339333

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;&lt;div&gt;For the libvirt 5.8 release, I find that there is a new comment \
in qemu.conf:&lt;/div&gt;&lt;div&gt;#slirp_helper = \
"/usr/bin/slirp-helper"&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;It indicates that there is \
a slirp-helper to help setup slirp network. But I cannot&lt;/div&gt;&lt;div&gt;find it even after \
I built the latest qemu(v4.1.0-1378-g98b2e3c9ab) and \
libvirt&lt;/div&gt;&lt;div&gt;(v5.9.0-rc1-2-g73f91d659b).&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Could you \
please tell me where I can find that helper \
program?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks&lt;br&gt;&lt;/div&gt;-- &lt;br&gt;&lt;div dir="ltr" \
class="gmail_signature" data-smartmail="gmail_signature"&gt;&lt;div dir="ltr"&gt;&lt;div&gt;&lt;div \
dir="ltr"&gt;&lt;div&gt;&lt;div dir="ltr"&gt;Best regards,&lt;/div&gt;&lt;div \
dir="ltr"&gt;-----------------------------------&lt;br&gt;&lt;/div&gt;&lt;div dir="ltr"&gt;Han \
Han&lt;br&gt;Quality Engineer&lt;br&gt;Redhat.&lt;br&gt;&lt;br&gt;Email: &lt;a href="mailto:hhan@redhat.com" \
target="_blank"&gt;hhan@redhat.com&lt;/a&gt;&lt;br&gt;Phone: \
+861065339333&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20191107144445</emailId><senderName>Timo Lindfors</senderName><senderEmail>timo.lindfors@iki.fi</senderEmail><timestampReceived>2019-11-07 14:44:45-0400</timestampReceived><subject>Re: [libvirt-users] Understanding the use of virt-install from the CLI (Linux)</subject><body>


On Thu, 7 Nov 2019, jonetsu wrote:
&gt; And it reports:
&gt; 
&gt; 'Size must be specified for non existent volume 'arch01.qcow2''
&gt; 
&gt; But the size is already specified as one of the options.

At least the following works on Debian 10:

virt-install \
  --connect "qemu:///session" \
  --name "debian10virt-install" \
  --ram "1024" \
  --vcpus "1" \
  --disk "size=20,path=$HOME/.local/share/libvirt/images/debian10virt-install.qcow2,bus=scsi,cache=none,discard=unmap" \
                \
  --controller "type=scsi,model=virtio-scsi" \
  --initrd-inject "preseed.cfg" \
  --initrd-inject "late_command.sh" \
  --location "http://deb.debian.org/debian/dists/buster/main/installer-amd64/" \
  --os-type "linux" \
  --os-variant "debian9" \
  --virt-type "kvm" \
  --controller "usb,model=none" \
  --graphics "none" \
  --network "user,model=virtio" \
  --noreboot \
  --extra-args "auto=true hostname=debian domain= console=ttyS0,115200n8 serial"

Source: https://lindi.iki.fi/lindi/debian10/virt-install/install.bash


-Timo

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20191107160249</emailId><senderName>jonetsu</senderName><senderEmail>jonetsu@teksavvy.com</senderEmail><timestampReceived>2019-11-07 16:02:49-0400</timestampReceived><subject>[libvirt-users] Understanding the use of virt-install from the CLI (Linux)</subject><body>

Hello,

I've created several VMs using virt-manager and am using them.  This
time around though, I'd like to use the CLI approach.  The problem
resides in defining a storage space.  This is using virt-install 1.5.1
on Xubuntu 18.04.

For the occasion I created a new directory to store images.  So I
specify this new directory:

virt-install \
--name=arch01 \
--disk path=/Share2/KVMImages/arch01.qcow2 \
--disk size=10 \
[ ... ]

The above will not work as it reports:

'must be a file or a device, not a directory'

So I specify a file:

[ ... ]
--disk path=/Share2/KVMImages/arch01.qcow2 \
--disk size=10 \
[ ... ]

And it reports:

'Size must be specified for non existent volume 'arch01.qcow2''

But the size is already specified as one of the options.

This is where I'm puzzled about the process.  What is going on ?

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20191107165232</emailId><senderName>Pavel Hrdina</senderName><senderEmail>phrdina@redhat.com</senderEmail><timestampReceived>2019-11-07 16:52:32-0400</timestampReceived><subject>Re: [libvirt-users] Understanding the use of virt-install from the CLI (Linux)</subject><body>

[Attachment #2 (multipart/signed)]


On Thu, Nov 07, 2019 at 11:02:49AM -0500, jonetsu wrote:
&gt; Hello,
&gt; 
&gt; I've created several VMs using virt-manager and am using them.  This
&gt; time around though, I'd like to use the CLI approach.  The problem
&gt; resides in defining a storage space.  This is using virt-install 1.5.1
&gt; on Xubuntu 18.04.
&gt; 
&gt; For the occasion I created a new directory to store images.  So I
&gt; specify this new directory:
&gt; 
&gt; virt-install \
&gt; --name=arch01 \
&gt; --disk path=/Share2/KVMImages/arch01.qcow2 \
&gt; --disk size=10 \
&gt; [ ... ]
&gt; 
&gt; The above will not work as it reports:
&gt; 
&gt; 'must be a file or a device, not a directory'
&gt; 
&gt; So I specify a file:
&gt; 
&gt; [ ... ]
&gt; --disk path=/Share2/KVMImages/arch01.qcow2 \
&gt; --disk size=10 \
&gt; [ ... ]
&gt; 
&gt; And it reports:
&gt; 
&gt; 'Size must be specified for non existent volume 'arch01.qcow2''
&gt; 
&gt; But the size is already specified as one of the options.
&gt; 
&gt; This is where I'm puzzled about the process.  What is going on ?


Hi,

The issue is that you are using the virt-install --disk option
incorrectly. If you look into man page of virt-install you can see some
examples.  The options for each parameter needs to be separated by
comma.  The command line that you are using is telling virt-install to
use 2 disks, one with the path and second one with only size provided.

If you want to have only a single disk for your VM you need to use it
like this:

virt-install \
    [ ... ] \
    --disk path=/Share2/KVMImages/arch01.qcow2,size=10 \
    [ ... ]

Pavel

["signature.asc" (application/pgp-signature)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20191107194956</emailId><senderName>jonetsu</senderName><senderEmail>jonetsu@teksavvy.com</senderEmail><timestampReceived>2019-11-07 19:49:56-0400</timestampReceived><subject>Re: [libvirt-users] Understanding the use of virt-install from the CLI (Linux)</subject><body>

On Thu, 7 Nov 2019 17:52:32 +0100
Pavel Hrdina &lt;phrdina@redhat.com&gt; wrote:

&gt; The issue is that you are using the virt-install --disk option
&gt; incorrectly. If you look into man page of virt-install you can see
&gt; some examples.  The options for each parameter needs to be separated
&gt; by comma.  The command line that you are using is telling
&gt; virt-install to use 2 disks, one with the path and second one with
&gt; only size provided.

Thanks.  That was it.  I completely forgot that it's possible to specify
a x number of disks.

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20191107070742</emailId><senderName>Yukin Chan</senderName><senderEmail>yukinchan@redhat.com</senderEmail><timestampReceived>2019-11-07 07:07:42-0400</timestampReceived><subject>Re: [libvirt-users] Where can I find the slirp-helper?</subject><body>

[Attachment #2 (multipart/alternative)]


Hi Han,

The slirp-helper is a helper program provided in libslirp rust bindings. It
seems that you need to build it yourself ATM.

git clone https://gitlab.freedesktop.org/slirp/libslirp-rs.git
&gt; cd libslirp-rs
&gt; cargo build --bin slirp-helper --features=all
&gt;

Han Han &lt;hhan@redhat.com&gt; 於 2019年11月7日 週四 下午2:01寫道：

&gt; For the libvirt 5.8 release, I find that there is a new comment in
&gt; qemu.conf:
&gt; #slirp_helper = "/usr/bin/slirp-helper"
&gt;
&gt; It indicates that there is a slirp-helper to help setup slirp network. But
&gt; I cannot
&gt; find it even after I built the latest qemu(v4.1.0-1378-g98b2e3c9ab) and
&gt; libvirt
&gt; (v5.9.0-rc1-2-g73f91d659b).
&gt;
&gt; Could you please tell me where I can find that helper program?
&gt;
&gt; Thanks
&gt; --
&gt; Best regards,
&gt; -----------------------------------
&gt; Han Han
&gt; Quality Engineer
&gt; Redhat.
&gt;
&gt; Email: hhan@redhat.com
&gt; Phone: +861065339333
&gt; _______________________________________________
&gt; libvirt-users mailing list
&gt; libvirt-users@redhat.com
&gt; https://www.redhat.com/mailman/listinfo/libvirt-users



-- 

Regards,

Yukin Chan

She / Her / Hers

QE Virtualization

Red Hat APAC &lt;https://www.redhat.com&gt;

9 floor, Raycom Infotech Park, North Tower C

2 Kexueyuan Nanlu, Haidian District, Beijing, China

T: 86-10-65627449

PGP: AC7BCF02F44FA43F940A3B9A25D5E545D2C3D639
&lt;https://red.ht/sig&gt;

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;&lt;div&gt;Hi Han,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The &lt;span \
style="font-family:monospace"&gt;slirp-helper&lt;/span&gt; is a helper program provided in \
libslirp rust bindings. It seems that you need to build it yourself \
ATM.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;blockquote class="gmail_quote" style="margin:0px 0px 0px \
0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"&gt;&lt;div&gt;&lt;span \
style="font-family:monospace"&gt;git clone &lt;a \
href="https://gitlab.freedesktop.org/slirp/libslirp-rs.git"&gt;https://gitlab.freedesktop.org/slirp/libslirp-rs.git&lt;/a&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span \
style="font-family:monospace"&gt;cd libslirp-rs&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span \
style="font-family:monospace"&gt;cargo build --bin slirp-helper \
--features=all&lt;/span&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;div class="gmail_quote"&gt;&lt;div \
dir="ltr" class="gmail_attr"&gt;Han Han &lt;&lt;a \
href="mailto:hhan@redhat.com"&gt;hhan@redhat.com&lt;/a&gt;&gt; 於 2019年11月7日 週四 \
下午2:01寫道：&lt;br&gt;&lt;/div&gt;&lt;blockquote class="gmail_quote" style="margin:0px 0px \
0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"&gt;&lt;div \
dir="ltr"&gt;&lt;div&gt;For the libvirt 5.8 release, I find that there is a new comment in \
qemu.conf:&lt;/div&gt;&lt;div&gt;#slirp_helper = \
"/usr/bin/slirp-helper"&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;It indicates that there is \
a slirp-helper to help setup slirp network. But I cannot&lt;/div&gt;&lt;div&gt;find it even after \
I built the latest qemu(v4.1.0-1378-g98b2e3c9ab) and \
libvirt&lt;/div&gt;&lt;div&gt;(v5.9.0-rc1-2-g73f91d659b).&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Could you \
please tell me where I can find that helper \
program?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks&lt;br&gt;&lt;/div&gt;-- &lt;br&gt;&lt;div dir="ltr"&gt;&lt;div \
dir="ltr"&gt;&lt;div&gt;&lt;div dir="ltr"&gt;&lt;div&gt;&lt;div dir="ltr"&gt;Best regards,&lt;/div&gt;&lt;div \
dir="ltr"&gt;-----------------------------------&lt;br&gt;&lt;/div&gt;&lt;div dir="ltr"&gt;Han \
Han&lt;br&gt;Quality Engineer&lt;br&gt;Redhat.&lt;br&gt;&lt;br&gt;Email: &lt;a href="mailto:hhan@redhat.com" \
target="_blank"&gt;hhan@redhat.com&lt;/a&gt;&lt;br&gt;Phone: \
+861065339333&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt; \
_______________________________________________&lt;br&gt; libvirt-users mailing list&lt;br&gt;
&lt;a href="mailto:libvirt-users@redhat.com" \
target="_blank"&gt;libvirt-users@redhat.com&lt;/a&gt;&lt;br&gt; &lt;a \
href="https://www.redhat.com/mailman/listinfo/libvirt-users" rel="noreferrer" \
target="_blank"&gt;https://www.redhat.com/mailman/listinfo/libvirt-users&lt;/a&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br \
clear="all"&gt;&lt;br&gt;-- &lt;br&gt;&lt;div dir="ltr" class="gmail_signature"&gt;&lt;div \
dir="ltr"&gt;&lt;div&gt;&lt;div dir="ltr"&gt;&lt;span&gt;&lt;div&gt;&lt;div dir="ltr"&gt;&lt;span&gt;&lt;div&gt;&lt;div \
dir="ltr"&gt;&lt;span&gt;&lt;div&gt;&lt;div dir="ltr"&gt;&lt;span&gt;&lt;div&gt;&lt;div dir="ltr"&gt;&lt;div&gt;&lt;div \
dir="ltr"&gt;&lt;div&gt;&lt;div dir="ltr"&gt;&lt;span&gt;&lt;div&gt;&lt;div dir="ltr"&gt;&lt;div&gt;&lt;div dir="ltr"&gt;&lt;div&gt;&lt;div \
dir="ltr"&gt;&lt;div&gt;&lt;div dir="ltr"&gt;&lt;div&gt;&lt;div&gt;&lt;span \
style="font-family:monospace,monospace"&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span \
                style="font-family:monospace,monospace"&gt;Regards,&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;
                
        &lt;p style="font-weight:bold;margin:0px;padding:0px;font-size:14px;text-transform:capitalize;font-family:"RedHatText",sans-serif"&gt;
                
          &lt;span style="font-family:monospace,monospace"&gt;&lt;span&gt;Yukin&lt;/span&gt; \
&lt;span&gt;Chan&lt;/span&gt;&lt;span style="color:rgb(170,170,170);margin:0px"&gt;&lt;/span&gt;  \
&lt;/span&gt;&lt;/p&gt;&lt;span style="font-family:monospace,monospace"&gt;&lt;/span&gt;&lt;span \
style="font-family:monospace,monospace"&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span \
style="font-family:monospace,monospace"&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span \
style="font-family:monospace,monospace"&gt;&lt;/span&gt;&lt;p \
style="font-weight:normal;font-size:12px;margin:0px;text-transform:capitalize"&gt;&lt;span \
style="font-family:monospace,monospace"&gt;&lt;span&gt;She / Her / \
Hers&lt;br&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p \
style="font-weight:normal;font-size:12px;margin:0px;text-transform:capitalize"&gt;&lt;span \
style="font-family:monospace,monospace"&gt;&lt;span&gt;QE Virtualization&lt;/span&gt;&lt;/span&gt;  \
                &lt;/p&gt;&lt;span style="font-family:monospace,monospace"&gt;
        &lt;/span&gt;&lt;p style="font-weight:normal;margin:0px 0px 4px;font-size:12px"&gt;
          &lt;span style="font-family:monospace,monospace"&gt;&lt;a \
style="color:rgb(0,136,206);font-size:12px;margin:0px;text-decoration:none" \
href="https://www.redhat.com" target="_blank"&gt;Red Hat &lt;span&gt;APAC&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;  \
&lt;/p&gt;&lt;span style="font-family:monospace,monospace"&gt;  &lt;/span&gt;&lt;div \
style="margin-bottom:4px"&gt;  &lt;span style="font-family:monospace,monospace"&gt;&lt;span&gt;
        &lt;p style="font-size:12px;margin:0px"&gt;9 floor, Raycom Infotech Park, North \
Tower C&lt;/p&gt;  &lt;/span&gt;&lt;/span&gt;
      &lt;span style="font-family:monospace,monospace"&gt;&lt;span&gt;
        &lt;p style="font-size:12px;margin:0px"&gt;2 Kexueyuan Nanlu, Haidian District, \
Beijing, China&lt;/p&gt;  &lt;/span&gt;&lt;/span&gt;
    &lt;/div&gt;&lt;span style="font-family:monospace,monospace"&gt;
    &lt;/span&gt;&lt;p style="font-weight:normal;margin:0px;font-size:12px"&gt;
      
      &lt;span style="font-family:monospace,monospace"&gt;&lt;span&gt;T: &lt;a \
href="tel:86-10-65627449" \
style="color:rgb(0,0,0);font-size:12px;margin:0px;text-decoration:none" \
target="_blank"&gt;86-10-65627449&lt;/a&gt;       &lt;/span&gt;&lt;/span&gt;  
    &lt;/p&gt;&lt;span style="font-family:monospace,monospace"&gt;
    &lt;/span&gt;&lt;p style="font-size:12px;margin:0px;font-family:"RedHatText",sans-serif"&gt;&lt;span \
style="font-family:monospace,monospace"&gt;PGP: \
AC7BCF02F44FA43F940A3B9A25D5E545D2C3D639&lt;/span&gt;  &lt;/p&gt;
    

    &lt;div style="margin-top:12px"&gt;
      &lt;table border="0"&gt;
        &lt;tbody&gt;&lt;tr&gt;
          &lt;td width="100px"&gt;&lt;a href="https://red.ht/sig" target="_blank"&gt; &lt;img \
src="https://static.redhat.com/libs/redhat/brand-assets/latest/corp/logo.png" \
width="90" height="auto"&gt;&lt;/a&gt; &lt;/td&gt;  
        &lt;/tr&gt;
      &lt;/tbody&gt;&lt;/table&gt;
    &lt;/div&gt;

  &lt;/div&gt;&lt;span style="font-family:monospace,monospace"&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt; \
/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;




_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20191121142548</emailId><senderName>Roman Mohr</senderName><senderEmail>rmohr@redhat.com</senderEmail><timestampReceived>2019-11-21 14:25:48-0400</timestampReceived><subject>Re: [libvirt-users] Getting "Unable to set XATTR" on libvirt 5.6.0 inside containers</subject><body>

[Attachment #2 (multipart/alternative)]


On Thu, Nov 21, 2019 at 3:23 PM Michal Privoznik &lt;mprivozn@redhat.com&gt;
wrote:

&gt; On 11/21/19 3:08 PM, Roman Mohr wrote:
&gt; &gt; Hi,
&gt; &gt;
&gt; &gt; We are updating KubeVirt to libvirt 5.6.0. Before that we were running
&gt; &gt; on 5.0.0. It seems like something regarding setting xattrs on files has
&gt; &gt; changed, because with libvirt 5.6.0 we are getting the following error:
&gt; &gt;
&gt; &gt; ```
&gt; &gt; Unable to set XATTR trusted.libvirt.security.dac on
&gt; &gt; /var/lib/libvirt/qemu/domain-410-default_vmi-fedora: Operation not
&gt; &gt; permitted')
&gt; &gt; ```
&gt; &gt;
&gt; &gt; The main problem is for us is that container filesystems don't
&gt; &gt; necessarily support setting xattrs.
&gt; &gt;
&gt; &gt; My questions would therfore be:
&gt; &gt;
&gt; &gt;   * Does anyone know what has changed, and why?
&gt; &gt;   * Can it be disabled?
&gt; &gt;
&gt;
&gt; I've seen the bug you filled so I'll continue discussion there so that
&gt; we don't have two places where we discuss this issue.
&gt;
&gt; https://bugzilla.redhat.com/show_bug.cgi?id=3D1774373
&gt;
&gt;
Thanks Michal.


&gt; Michal
&gt;
&gt;

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;&lt;br&gt;&lt;/div&gt;&lt;br&gt;&lt;div class="gmail_quote"&gt;&lt;div dir="ltr" \
class="gmail_attr"&gt;On Thu, Nov 21, 2019 at 3:23 PM Michal Privoznik &lt;&lt;a \
href="mailto:mprivozn@redhat.com"&gt;mprivozn@redhat.com&lt;/a&gt;&gt; \
wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote class="gmail_quote" style="margin:0px 0px 0px \
0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"&gt;On 11/21/19 3:08 PM, \
Roman Mohr wrote:&lt;br&gt; &gt; Hi,&lt;br&gt;
&gt; &lt;br&gt;
&gt; We are updating KubeVirt to libvirt 5.6.0. Before  that we were running &lt;br&gt;
&gt; on 5.0.0. It seems like something regarding setting xattrs on files has &lt;br&gt;
&gt; changed, because with libvirt 5.6.0 we are getting the following  error:&lt;br&gt;
&gt; &lt;br&gt;
&gt; ```&lt;br&gt;
&gt; Unable to set XATTR trusted.libvirt.security.dac on &lt;br&gt;
&gt; /var/lib/libvirt/qemu/domain-410-default_vmi-fedora: Operation not &lt;br&gt;
&gt; permitted')&lt;br&gt;
&gt; ```&lt;br&gt;
&gt; &lt;br&gt;
&gt; The main problem is for us is that container filesystems don't &lt;br&gt;
&gt; necessarily support setting xattrs.&lt;br&gt;
&gt; &lt;br&gt;
&gt; My questions would therfore be:&lt;br&gt;
&gt; &lt;br&gt;
&gt;     * Does anyone know what has changed, and why?&lt;br&gt;
&gt;     * Can it be disabled?&lt;br&gt;
&gt; &lt;br&gt;
&lt;br&gt;
I've seen the bug you filled so I'll continue discussion there so that &lt;br&gt;
we don't have two places where we discuss this issue.&lt;br&gt;
&lt;br&gt;
&lt;a href="https://bugzilla.redhat.com/show_bug.cgi?id=1774373" rel="noreferrer" \
target="_blank"&gt;https://bugzilla.redhat.com/show_bug.cgi?id=1774373&lt;/a&gt;&lt;br&gt; \
&lt;br&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks Michal.&lt;/div&gt;&lt;div&gt;  &lt;/div&gt;&lt;blockquote \
class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid \
rgb(204,204,204);padding-left:1ex"&gt; Michal&lt;br&gt;
&lt;br&gt;
&lt;/blockquote&gt;&lt;/div&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20191127095634</emailId><senderName>Daniel =?utf-8?B?UC4gQmVycmFuZ8Op?=</senderName><senderEmail>berrange@redhat.com</senderEmail><timestampReceived>2019-11-27 09:56:34-0400</timestampReceived><subject>Re: [libvirt-users] Fail to build upstream libvirt on rhel8</subject><body>

On Tue, Nov 26, 2019 at 06:33:13PM -0500, Cole Robinson wrote:
&gt; On 11/21/19 3:18 AM, Han Han wrote:
&gt; &gt; Hello,
&gt; &gt; A compilation failure happened when I tried building libvirt latest code
&gt; &gt; on rhel8
&gt; &gt; 
&gt; &gt; Version:
&gt; &gt; gcc-8.3.1-4.5.el8.x86_64
&gt; &gt; libvirt v5.9.0-352-g5e939cea89
&gt; &gt; 
&gt; &gt; Steps:
&gt; &gt; 1. Clone libvirt source code
&gt; &gt; 2. Create build dir, and run autogen.sh
&gt; &gt; # cd libvirt
&gt; &gt; # mkdir build &amp;&amp; cd build
&gt; &gt; # ../autogen.sh --build=x86_64-redhat-linux-gnu
&gt; &gt; --host=x86_64-redhat-linux-gnu --program-prefix=
&gt; &gt; --disable-dependency-tracking --prefix=/usr --exec-prefix=/usr
&gt; &gt; --bindir=/usr/bin --sbindir=/usr/sbin --sysconfdir=/etc
&gt; &gt; --datadir=/usr/share --includedir=/usr/include --libdir=/usr/lib64
&gt; &gt; --libexecdir=/usr/libexec --localstatedir=/var --sharedstatedir=/var/lib
&gt; &gt; --mandir=/usr/share/man --infodir=/usr/share/info
&gt; &gt; --with-runstatedir=/run --with-qemu --without-openvz --without-lxc
&gt; &gt; --without-vbox --without-libxl --with-sasl --with-polkit --with-libvirtd
&gt; &gt; --without-phyp --with-esx --without-hyperv --without-vmware --without-vz
&gt; &gt; --without-bhyve --with-remote-default-mode=legacy --with-interface
&gt; &gt; --with-network --with-storage-fs --with-storage-lvm --with-storage-iscsi
&gt; &gt; --with-storage-iscsi-direct --with-storage-scsi --with-storage-disk
&gt; &gt; --with-storage-mpath --with-storage-rbd --without-storage-sheepdog
&gt; &gt; --with-storage-gluster --without-storage-zfs --without-storage-vstorage
&gt; &gt; --with-numactl --with-numad --with-capng --without-fuse --with-netcf
&gt; &gt; --with-selinux --with-selinux-mount=/sys/fs/selinux --without-apparmor
&gt; &gt; --without-hal --with-udev --with-yajl --with-sanlock --with-libpcap
&gt; &gt; --with-macvtap --with-audit --with-dtrace --with-driver-modules
&gt; &gt; --with-firewalld --with-firewalld-zone --without-wireshark-dissector
&gt; &gt; --without-pm-utils --with-nss-plugin --with-qemu-user=qemu
&gt; &gt; --with-qemu-group=qemu --with-tls-priority=@LIBVIRT,SYSTEM
&gt; &gt; --enable-werror --enable-expensive-tests --with-init-script=systemd
&gt; &gt; --without-login-shell
&gt; &gt; # make
&gt; &gt; 
&gt; &gt; Then error appears:
&gt; &gt; make[2]: Entering directory '/root/libvirt/build/include/libvirt'
&gt; &gt; make[2]: Nothing to be done for 'all'.
&gt; &gt; make[2]: Leaving directory '/root/libvirt/build/include/libvirt'
&gt; &gt; Making all in src
&gt; &gt; make[2]: Entering directory '/root/libvirt/build/src'
&gt; &gt;   GEN      access/org.libvirt.api.policy
&gt; &gt; /bin/sh: access/org.libvirt.api.policy: No such file or directory
&gt; &gt;   GEN      access/viraccessapicheck.h
&gt; &gt; /bin/sh: access/viraccessapicheck.h: No such file or directory
&gt; &gt; make[2]: *** [Makefile:15067: access/viraccessapicheck.h] Error 1
&gt; &gt; make[2]: Leaving directory '/root/libvirt/build/src'
&gt; &gt; make[1]: *** [Makefile:1957: all-recursive] Error 1
&gt; &gt; make[1]: Leaving directory '/root/libvirt/build'
&gt; &gt; make: *** [Makefile:1850: all] Error 2
&gt; &gt; 
&gt; 
&gt; I reproduced on Fedora too. I tracked it down to the
&gt; --disable-dependency-tracking configure option: drop that and the build
&gt; should work. I don't know enough about autotools to say if that's
&gt; expected, or it's something broken on libvirt side

It is broken code in autotools IMHO, but we don't really care enough
to investigate further. Simply don't use the --disable-dependency-tracking
option. We'll "solve" it by ditching autotools in favour of meson soon.


Regards,
Daniel
-- 
|: https://berrange.com      -o-    https://www.flickr.com/photos/dberrange :|
|: https://libvirt.org         -o-            https://fstop138.berrange.com :|
|: https://entangle-photo.org    -o-    https://www.instagram.com/dberrange :|

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20191119163854</emailId><senderName>Milan Zamazal</senderName><senderEmail>mzamazal@redhat.com</senderEmail><timestampReceived>2019-11-19 16:38:54-0400</timestampReceived><subject>[libvirt-users] Descriptions of mdev types?</subject><body>

Hi, when retrieving an mdev device info using `virsh nodedev-dumpxml' or
the libvirt API, something like the following is returned:

    &lt;capability type='mdev_types'&gt;
      &lt;type id='nvidia-210'&gt;
        &lt;name&gt;GRID M60-2B4&lt;/name&gt;
        &lt;deviceAPI&gt;vfio-pci&lt;/deviceAPI&gt;
        &lt;availableInstances&gt;4&lt;/availableInstances&gt;
      &lt;/type&gt;
      ...
    &lt;/capability&gt;

Besides device_api, available_instances and (optional) `name',
`description' of the given mdev type may be optionally provided in
/sys/.../mdev_supported_types/... for each of the available mdev types.
I can see in the sources that libvirt doesn't try to retrieve it -- is
it intentionally or is it just an omission?  If the latter, could it be
added, please?  It looks like a useful piece of information for the user
to get an idea what the given mdev type means.

Thanks,
Milan


_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20191119100005</emailId><senderName>Daniel =?utf-8?B?UC4gQmVycmFuZ8Op?=</senderName><senderEmail>berrange@redhat.com</senderEmail><timestampReceived>2019-11-19 10:00:05-0400</timestampReceived><subject>[libvirt-users] FYI mail problems for libvirt lists</subject><body>

It has come to our attention that many, possibly even all, people with
non-redhat.com email addresses are unable to send mail to most libvirt
mailing lists, receiving bounce messages saying the address doesn't
exist eg

  Final-Recipient: rfc822; libvirt-users@redhat.com
  Action: failed
  Status: 5.0.0
  Remote-MTA: dns; us-smtp-inbound-1.mimecast.com
  Diagnostic-Code: smtp; 550 Invalid Recipient -
    https://community.mimecast.com/docs/DOC-1369#550
    [boadZMN8PrGodBBK6pzKWg.us309]

In my testing, libvir-list@redhat.com is the only list that is currently
accepting incoming mail from non-redhat.com addresses.

I see bounces from libvirt-users@redhat.com, libvirt-ci@redhat.com,
libvirt-announce@redhat.com and libvirt-security@redhat.com, as well
as from the undocumented alias libvirt-list@redhat.com

We believe outgoing mail delivery is still working normally in all
cases.

The problems appear to be caused by some changes that Red Hat
administrators made to the email infrastructure recently.

We have a severity 1 ticket open for this issue and are taking all
possible steps to escalate it &amp; get it resolved at the soonest
opportunity.

In the mean time if any users need assistance with libvirt questions,
please feel free to ignore our normal guidance and use the main development
list libvir-list@redhat.com for questions, as this appears to still be
working.

Alternatively you can use IRC #virt on irc.oftc.net

If you need to report any security issues with libvirt, please try the
libvirt-security@redhat.com list first, but if you get a bounce then
email myself directly.

Please accept our apologies for the disruption this is causing to the
libvirt mailing lists.

Regards,
Daniel
-- 
|: https://berrange.com      -o-    https://www.flickr.com/photos/dberrange :|
|: https://libvirt.org         -o-            https://fstop138.berrange.com :|
|: https://entangle-photo.org    -o-    https://www.instagram.com/dberrange :|

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20191119175844</emailId><senderName>Erik Skultety</senderName><senderEmail>eskultet@redhat.com</senderEmail><timestampReceived>2019-11-19 17:58:44-0400</timestampReceived><subject>Re: [libvirt-users] Descriptions of mdev types?</subject><body>

On Tue, Nov 19, 2019 at 05:38:54PM +0100, Milan Zamazal wrote:
&gt; Hi, when retrieving an mdev device info using `virsh nodedev-dumpxml' or
&gt; the libvirt API, something like the following is returned:
&gt;
&gt;     &lt;capability type='mdev_types'&gt;
&gt;       &lt;type id='nvidia-210'&gt;
&gt;         &lt;name&gt;GRID M60-2B4&lt;/name&gt;
&gt;         &lt;deviceAPI&gt;vfio-pci&lt;/deviceAPI&gt;
&gt;         &lt;availableInstances&gt;4&lt;/availableInstances&gt;
&gt;       &lt;/type&gt;
&gt;       ...
&gt;     &lt;/capability&gt;
&gt;
&gt; Besides device_api, available_instances and (optional) `name',
&gt; `description' of the given mdev type may be optionally provided in
&gt; /sys/.../mdev_supported_types/... for each of the available mdev types.
&gt; I can see in the sources that libvirt doesn't try to retrieve it -- is
&gt; it intentionally or is it just an omission?  If the latter, could it be
&gt; added, please?  It looks like a useful piece of information for the user
&gt; to get an idea what the given mdev type means.

The reasoning we had about not including the "description" attribute when we
introduced mdevs to libvirt's nodedev driver was that there was no way for
NVIDIA and Intel to agree on the values to be exposed by the attribute -
especially the data NVIDIA puts in there (like you already said) is useful, but
there was also no agreement on extracting the data into a different attribute
(a set of attributes) and make them structured within the XML.

Which brings me to the actual content of the "description" attribute, it
contains unstructured free-form text and we didn't want to expose that kind of
thing in the XML even though it just so happens that NVIDIA put some
interesting data in it - since the attribute is optional and free-form, one
day, you find the useful data you're interested in now, but tomorrow that may
not be the case anymore and can easily change. I've got no problem with the
idea of exposing some kind of description as part of the XML per se, the
problem I see is that someone will try and start parsing the description field
because of the potentially useful data and if it changes and I'm afraid
complaints will head our way even though we cannot guarantee anything wrt to
that specific field (I'm still open to a discussion though).

Regards,
Erik

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20191120171449</emailId><senderName>Timo Schneider</senderName><senderEmail>timos@inf.ethz.ch</senderEmail><timestampReceived>2019-11-20 17:14:49-0400</timestampReceived><subject>[libvirt-users] virsh snapshot-create --print-xml seems to ignore most arguments</subject><body>

Hi,

I am wondering if the --print-xml option is working correctly. The
output for two snapshot-create commands are the same, even though the
first one includes additional options (no-metadata and atomic).

I want to use the generated XML to create a snapshot via a perl script,
and Sys::Virt only seems to support snapshots using a XML description
of the arguments.


timos@cerberus:~$ sudo virsh snapshot-create-as --domain web guest-
state1 --diskspec hda,file=overlay1.qcow2 --disk-only --atomic --no-
metadata --print-xml
&lt;domainsnapshot&gt;
  &lt;name&gt;guest-state1&lt;/name&gt;
  &lt;disks&gt;
    &lt;disk name='hda'&gt;
      &lt;source file='overlay1.qcow2'/&gt;
    &lt;/disk&gt;
  &lt;/disks&gt;
&lt;/domainsnapshot&gt;


timos@cerberus:~$ sudo virsh snapshot-create-as --domain web guest-
state1 --diskspec hda,file=overlay1.qcow2 --disk-only  --print-xml
&lt;domainsnapshot&gt;
  &lt;name&gt;guest-state1&lt;/name&gt;
  &lt;disks&gt;
    &lt;disk name='hda'&gt;
      &lt;source file='overlay1.qcow2'/&gt;
    &lt;/disk&gt;
  &lt;/disks&gt;
&lt;/domainsnapshot&gt;

My libvirt version is:

Compiled against library: libvirt 5.6.0
Using library: libvirt 5.6.0
Using API: QEMU 5.6.0
Running hypervisor: QEMU 4.1.0

Regards,
Timo


_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20191121140834</emailId><senderName>Roman Mohr</senderName><senderEmail>rmohr@redhat.com</senderEmail><timestampReceived>2019-11-21 14:08:34-0400</timestampReceived><subject>[libvirt-users] Getting "Unable to set XATTR" on libvirt 5.6.0 inside containers</subject><body>

[Attachment #2 (multipart/alternative)]


Hi,

We are updating KubeVirt to libvirt 5.6.0. Before that we were running on
5.0.0. It seems like something regarding setting xattrs on files has
changed, because with libvirt 5.6.0 we are getting the following error:

```
Unable to set XATTR trusted.libvirt.security.dac on
/var/lib/libvirt/qemu/domain-410-default_vmi-fedora: Operation not
permitted')
```

The main problem is for us is that container filesystems don't necessarily
support setting xattrs.

My questions would therfore be:

 * Does anyone know what has changed, and why?
 * Can it be disabled?

Thanks a lot and Best Regards,
Roman

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;Hi,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;We are updating KubeVirt to libvirt 5.6.0. \
Before  that we were running on 5.0.0. It seems like something regarding setting \
xattrs on files has changed, because with libvirt 5.6.0 we are getting the following  \
error:&lt;br&gt;&lt;br&gt;```&lt;br&gt;Unable to set XATTR trusted.libvirt.security.dac on \
/var/lib/libvirt/qemu/domain-410-default_vmi-fedora: Operation not \
permitted')&lt;br&gt;```&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The main problem is for us is that \
container filesystems don't necessarily support setting \
xattrs.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;My questions would therfore \
be:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;  * Does anyone know what has changed, and \
why?&lt;/div&gt;&lt;div&gt;  * Can it be disabled?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks a lot and Best \
Regards,&lt;/div&gt;&lt;div&gt;Roman&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20191121081800</emailId><senderName>Han Han</senderName><senderEmail>hhan@redhat.com</senderEmail><timestampReceived>2019-11-21 08:18:00-0400</timestampReceived><subject>[libvirt-users] Fail to build upstream libvirt on rhel8</subject><body>

[Attachment #2 (multipart/alternative)]


Hello,
A compilation failure happened when I tried building libvirt latest code on
rhel8

Version:
gcc-8.3.1-4.5.el8.x86_64
libvirt v5.9.0-352-g5e939cea89

Steps:
1. Clone libvirt source code
2. Create build dir, and run autogen.sh
# cd libvirt
# mkdir build &amp;&amp; cd build
# ../autogen.sh --build=x86_64-redhat-linux-gnu
--host=x86_64-redhat-linux-gnu --program-prefix=
--disable-dependency-tracking --prefix=/usr --exec-prefix=/usr
--bindir=/usr/bin --sbindir=/usr/sbin --sysconfdir=/etc
--datadir=/usr/share --includedir=/usr/include --libdir=/usr/lib64
--libexecdir=/usr/libexec --localstatedir=/var --sharedstatedir=/var/lib
--mandir=/usr/share/man --infodir=/usr/share/info --with-runstatedir=/run
--with-qemu --without-openvz --without-lxc --without-vbox --without-libxl
--with-sasl --with-polkit --with-libvirtd --without-phyp --with-esx
--without-hyperv --without-vmware --without-vz --without-bhyve
--with-remote-default-mode=legacy --with-interface --with-network
--with-storage-fs --with-storage-lvm --with-storage-iscsi
--with-storage-iscsi-direct --with-storage-scsi --with-storage-disk
--with-storage-mpath --with-storage-rbd --without-storage-sheepdog
--with-storage-gluster --without-storage-zfs --without-storage-vstorage
--with-numactl --with-numad --with-capng --without-fuse --with-netcf
--with-selinux --with-selinux-mount=/sys/fs/selinux --without-apparmor
--without-hal --with-udev --with-yajl --with-sanlock --with-libpcap
--with-macvtap --with-audit --with-dtrace --with-driver-modules
--with-firewalld --with-firewalld-zone --without-wireshark-dissector
--without-pm-utils --with-nss-plugin --with-qemu-user=qemu
--with-qemu-group=qemu --with-tls-priority=@LIBVIRT,SYSTEM --enable-werror
--enable-expensive-tests --with-init-script=systemd --without-login-shell
# make

Then error appears:
make[2]: Entering directory '/root/libvirt/build/include/libvirt'
make[2]: Nothing to be done for 'all'.
make[2]: Leaving directory '/root/libvirt/build/include/libvirt'
Making all in src
make[2]: Entering directory '/root/libvirt/build/src'
  GEN      access/org.libvirt.api.policy
/bin/sh: access/org.libvirt.api.policy: No such file or directory
  GEN      access/viraccessapicheck.h
/bin/sh: access/viraccessapicheck.h: No such file or directory
make[2]: *** [Makefile:15067: access/viraccessapicheck.h] Error 1
make[2]: Leaving directory '/root/libvirt/build/src'
make[1]: *** [Makefile:1957: all-recursive] Error 1
make[1]: Leaving directory '/root/libvirt/build'
make: *** [Makefile:1850: all] Error 2

-- 
Best regards,
-----------------------------------
Han Han
Quality Engineer
Redhat.

Email: hhan@redhat.com
Phone: +861065339333

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;&lt;div&gt;Hello, &lt;br&gt;&lt;/div&gt;&lt;div&gt;A compilation failure happened when I tried \
building libvirt latest code on \
rhel8&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Version:&lt;/div&gt;&lt;div&gt;gcc-8.3.1-4.5.el8.x86_64&lt;/div&gt;&lt;div&gt;libvirt \
v5.9.0-352-g5e939cea89&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Steps:&lt;/div&gt;&lt;div&gt;1. Clone libvirt \
source code&lt;/div&gt;&lt;div&gt;2. Create build dir, and run autogen.sh&lt;/div&gt;&lt;div&gt;# cd \
libvirt&lt;/div&gt;&lt;div&gt;# mkdir build &amp;&amp; cd build&lt;/div&gt;&lt;div&gt;# ../autogen.sh \
--build=x86_64-redhat-linux-gnu --host=x86_64-redhat-linux-gnu --program-prefix= \
--disable-dependency-tracking --prefix=/usr --exec-prefix=/usr --bindir=/usr/bin \
--sbindir=/usr/sbin --sysconfdir=/etc --datadir=/usr/share --includedir=/usr/include \
--libdir=/usr/lib64 --libexecdir=/usr/libexec --localstatedir=/var \
--sharedstatedir=/var/lib --mandir=/usr/share/man --infodir=/usr/share/info \
--with-runstatedir=/run --with-qemu --without-openvz --without-lxc --without-vbox \
--without-libxl --with-sasl --with-polkit --with-libvirtd --without-phyp --with-esx \
--without-hyperv --without-vmware --without-vz --without-bhyve \
--with-remote-default-mode=legacy --with-interface --with-network --with-storage-fs \
--with-storage-lvm --with-storage-iscsi --with-storage-iscsi-direct \
--with-storage-scsi --with-storage-disk --with-storage-mpath --with-storage-rbd \
--without-storage-sheepdog --with-storage-gluster --without-storage-zfs \
--without-storage-vstorage --with-numactl --with-numad --with-capng --without-fuse \
--with-netcf --with-selinux --with-selinux-mount=/sys/fs/selinux --without-apparmor \
--without-hal --with-udev --with-yajl --with-sanlock --with-libpcap --with-macvtap \
--with-audit --with-dtrace --with-driver-modules --with-firewalld \
--with-firewalld-zone --without-wireshark-dissector --without-pm-utils \
--with-nss-plugin --with-qemu-user=qemu --with-qemu-group=qemu \
--with-tls-priority=@LIBVIRT,SYSTEM --enable-werror --enable-expensive-tests \
--with-init-script=systemd --without-login-shell&lt;/div&gt;&lt;div&gt;# \
make&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Then error appears:&lt;/div&gt;&lt;div&gt;make[2]: Entering \
directory '/root/libvirt/build/include/libvirt'&lt;br&gt;make[2]: Nothing to be \
done for 'all'.&lt;br&gt;make[2]: Leaving directory \
'/root/libvirt/build/include/libvirt'&lt;br&gt;Making all in src&lt;br&gt;make[2]: \
Entering directory '/root/libvirt/build/src'&lt;br&gt;   GEN         \
access/org.libvirt.api.policy&lt;br&gt;/bin/sh: access/org.libvirt.api.policy: No such file \
or directory&lt;br&gt;   GEN         access/viraccessapicheck.h&lt;br&gt;/bin/sh: \
access/viraccessapicheck.h: No such file or directory&lt;br&gt;make[2]: *** \
[Makefile:15067: access/viraccessapicheck.h] Error 1&lt;br&gt;make[2]: Leaving directory \
'/root/libvirt/build/src'&lt;br&gt;make[1]: *** [Makefile:1957: all-recursive] \
Error 1&lt;br&gt;make[1]: Leaving directory '/root/libvirt/build'&lt;br&gt;make: *** \
[Makefile:1850: all] Error 2&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;-- &lt;br&gt;&lt;div dir="ltr" \
class="gmail_signature" data-smartmail="gmail_signature"&gt;&lt;div dir="ltr"&gt;&lt;div&gt;&lt;div \
dir="ltr"&gt;&lt;div&gt;&lt;div dir="ltr"&gt;Best regards,&lt;/div&gt;&lt;div \
dir="ltr"&gt;-----------------------------------&lt;br&gt;&lt;/div&gt;&lt;div dir="ltr"&gt;Han \
Han&lt;br&gt;Quality Engineer&lt;br&gt;&lt;span class="" style="" id=":3pn.1" \
tabindex="-1"&gt;Redhat&lt;/span&gt;.&lt;br&gt;&lt;br&gt;Email: &lt;a href="mailto:hhan@redhat.com" \
target="_blank"&gt;&lt;span class="" style="" id=":3pn.2" tabindex="-1"&gt;hhan&lt;/span&gt;@&lt;span \
class="" style="" id=":3pn.3" tabindex="-1"&gt;redhat&lt;/span&gt;.com&lt;/a&gt;&lt;br&gt;Phone: \
+861065339333&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20191127040728</emailId><senderName>Richard Achmatowicz</senderName><senderEmail>rachmato@redhat.com</senderEmail><timestampReceived>2019-11-27 04:07:28-0400</timestampReceived><subject>[libvirt-users] What's the best way to make use of VLAN interfaces with VMs?</subject><body>

Hello

I have a problem with attaching VMs to a VLAN interface.

Here is my setup: I have several physical hosts connected by a physical 
switch.  Each host has two NICs leading to the switch, which have been 
combined into a team, team0. Each host a has a bridge br1, which has 
team0 as a slave. So communication between hosts is based on the IP 
address of bridge br1 on each host.

Up until recently, using libvirt and KVM, I was creating VMs which had 
one interface attached the default virtual network and one interface 
attached to the bridge:

virt-install ... --network network=default --network bridge=br1 ...

I would then statically assign an IP address to the bridge interface on 
the guest when installing the OS.

A few days ago, a VLAN was introduced to split up the network. I created 
a new VLAN interface br1.600 on each of the hosts. My initial attempt 
was to do try this:

virt-install ... --network network=default --network bridge=br1.600 ...

which did not work. It then dawned on me that a VLAN interface and a 
bridge aren't treated the same. So I started to look for ways to allow 
my VMs to bind to this new interface.

This would seem to be a common situation. What is the best way to work 
around this?

Both the host bridge and the host VLAN interface already have their 
assigned IP addresses and appear like this in libvirt:

[root@clusterdev01 ]# ifconfig
br1: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500
         inet 192.168.0.110  netmask 255.255.255.0  broadcast 192.168.0.255
         inet6 fe80::1e98:ecff:fe1b:276d  prefixlen 64  scopeid 0x20&lt;link&gt;
         ether 1c:98:ec:1b:27:6d  txqueuelen 1000  (Ethernet)
         RX packets 833772  bytes 2976958254 (2.7 GiB)
         RX errors 0  dropped 0  overruns 0  frame 0
         TX packets 331237  bytes 23335124 (22.2 MiB)
         TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

br1.600: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500
         inet 192.168.1.110  netmask 255.255.255.0  broadcast 192.168.1.255
         inet6 fe80::1e98:ecff:fe1b:276d  prefixlen 64  scopeid 0x20&lt;link&gt;
         ether 1c:98:ec:1b:27:6d  txqueuelen 1000  (Ethernet)
         RX packets 189315  bytes 9465744 (9.0 MiB)
         RX errors 0  dropped 0  overruns 0  frame 0
         TX packets 302  bytes 30522 (29.8 KiB)
         TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

[root@clusterdev01]# virsh iface-list --all
  Name                 State      MAC Address
---------------------------------------------------
  br1                  active     1c:98:ec:1b:27:6d
  br1.600           active     1c:98:ec:1b:27:6d

[root@clusterdev01 sysadmin]# virsh iface-dumpxml br1.600
&lt;interface type='vlan' name='br1.600'&gt;
   &lt;protocol family='ipv4'&gt;
     &lt;ip address='192.168.1.110' prefix='24'/&gt;
   &lt;/protocol&gt;
   &lt;protocol family='ipv6'&gt;
     &lt;ip address='fe80::1e98:ecff:fe1b:276d' prefix='64'/&gt;
   &lt;/protocol&gt;
   &lt;link state='up'/&gt;
   &lt;vlan tag='600'&gt;
     &lt;interface name='br1'/&gt;
   &lt;/vlan&gt;
&lt;/interface&gt;

I tried following some suggestions which wrapped the vlan interface in a 
bridge interface, but in ended up trashing the br1.600 interface which 
was originally defined on the host.

Is there a failsafe way to deal with such a situation? Am I doing 
something completely wrong here? In would like br1.600 to behave like 
br1 .....

Any suggestions or advice greatly appreciated.

Richard





_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20191130001231</emailId><senderName></senderName><senderEmail>ort_libvirt</senderEmail><timestampReceived>2019-11-30 00:12:31-0400</timestampReceived><subject>[libvirt-users] Converting LVM to qcow2</subject><body>

Hi!

I need to convert a KVM virtual machine from LVM to a qcow2 image, and wonder if this \
is the best way to do it (*1): [$] qemu-img convert -O qcow2 /dev/vg_name/lv_name/ \
/var/lib/libvirt/images/image_name.qcow2

If this is the best way to do this, will this keep the information on: \
/dev/vg_name/lv_name/ untouched?

Thanks, and please point me towards another mailing list if this it not right place \
to ask questions related to qemu-img!

Best regards,
Richard Taubo

*1) Via: http://nocoast-tech.blogspot.com/2010/05/converting-kvm-guests-from-lvm-to-qcow2.html



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20191130092527</emailId><senderName>Peter Krempa</senderName><senderEmail>pkrempa@redhat.com</senderEmail><timestampReceived>2019-11-30 09:25:27-0400</timestampReceived><subject>Re: [libvirt-users] Converting LVM to qcow2</subject><body>

[Attachment #2 (multipart/signed)]


On Sat, Nov 30, 2019 at 01:12:31 +0100, ort_libvirt@bergersen.no wrote:
&gt; Hi!
&gt; 
&gt; I need to convert a KVM virtual machine from LVM to a qcow2 image, and wonder if \
&gt; this is the best way to do it (*1): [$] qemu-img convert -O qcow2 \
&gt; /dev/vg_name/lv_name/ /var/lib/libvirt/images/image_name.qcow2 
&gt; If this is the best way to do this, will this keep the information on: \
&gt; /dev/vg_name/lv_name/ untouched?

As long as you also reconfigure the VM to use
/var/lib/libvirt/images/image_name.qcow2 after this point the old
logical volume will not be used.

The above approach is good if you are okay with some downtime on the VM
while the image is converted over.

There are a few other approaches you can conisder when you want to do it
live or for example save some space in the qcow2 image by using fstrim
first.

For a live conversion, you can do an external disk-only snapshot first
which creates a qcow2 overlay file:

virsh snapshot-create-as $VMNAME --no-metadata --disk-only --diskspec
$DISK,file=/path/to/image.qcow2 --diskspec ...

Optionally if your disk frontend supports it [1] and you've configured it
properly you can now run 'fstrim' on the filesystems. That records which
parts of the disk are empty into the overlay file and thus will not be
converted later

After that you pull the backing image into the qcow2:

virsh blockpull --wait --verbose $DOMNAME $DISK

if you executed the trim step the image will be smaller and also the
conversion step will avoid copying unused parts. Optionally that step
can be skipped and then the result will be the same as in the offline
conversion approach.

Optionally if you don't care about the trim step above you can use also
the 'blockcopy' operation instead of the two steps above to achieve the
same:

virsh blockcopy $VMNAME $DISK --dest /path/to/new.qcow2 --wait --verbose
--pivot --format qcow2 --transient-job

Also if you want to decrease the size after an offline coversion you can
use the 'virt-sparsify' tool from the libguestfs suite on the image if
the VM is offline.

[1] You must have at least qemu-4.0 if you want to use fstrim on a
virtio-blk disk interface, or switch to virtio-scsi based disks. Also
your disks must have the 'discard="unmap"' option in the &lt;driver&gt;
element of your vm's XML.

I've used the above approach to convert few production VMs from LVs to
qcow2 for moving them to a different host later on. Apart from a sub 1
minute downtime to restart the VM to switch to virtio-scsi from
virtio-blk to enable support for trimming the images the conversion was
then executed while the VM were running. Obviously if you don't require
this you can easily go with the qemu-img approach.


["signature.asc" (application/pgp-signature)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20191127183814</emailId><senderName>Laine Stump</senderName><senderEmail>laine@redhat.com</senderEmail><timestampReceived>2019-11-27 18:38:14-0400</timestampReceived><subject>Re: [libvirt-users] What's the best way to make use of VLAN interfaces with VMs?</subject><body>

On 11/26/19 11:07 PM, Richard Achmatowicz wrote:
&gt; Hello
&gt; 
&gt; I have a problem with attaching VMs to a VLAN interface.
&gt; 
&gt; Here is my setup: I have several physical hosts connected by a physical 
&gt; switch.  Each host has two NICs leading to the switch, which have been 
&gt; combined into a team, team0. Each host a has a bridge br1, which has 
&gt; team0 as a slave. So communication between hosts is based on the IP 
&gt; address of bridge br1 on each host.
&gt; 
&gt; Up until recently, using libvirt and KVM, I was creating VMs which had 
&gt; one interface attached the default virtual network and one interface 
&gt; attached to the bridge:
&gt; 
&gt; virt-install ... --network network=default --network bridge=br1 ...
&gt; 
&gt; I would then statically assign an IP address to the bridge interface on 
&gt; the guest when installing the OS.
&gt; 
&gt; A few days ago, a VLAN was introduced to split up the network. I created 
&gt; a new VLAN interface br1.600 on each of the hosts. My initial attempt 
&gt; was to do try this:
&gt; 
&gt; virt-install ... --network network=default --network bridge=br1.600 ...
&gt; 
&gt; which did not work. It then dawned on me that a VLAN interface and a 
&gt; bridge aren't treated the same. So I started to look for ways to allow 
&gt; my VMs to bind to this new interface.
&gt; 
&gt; This would seem to be a common situation. What is the best way to work 
&gt; around this?
&gt; 
&gt; Both the host bridge and the host VLAN interface already have their 
&gt; assigned IP addresses and appear like this in libvirt:
&gt; 
&gt; [root@clusterdev01 ]# ifconfig
&gt; br1: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500
&gt;          inet 192.168.0.110  netmask 255.255.255.0  broadcast 192.168.0.255
&gt;          inet6 fe80::1e98:ecff:fe1b:276d  prefixlen 64  scopeid 0x20&lt;link&gt;
&gt;          ether 1c:98:ec:1b:27:6d  txqueuelen 1000  (Ethernet)
&gt;          RX packets 833772  bytes 2976958254 (2.7 GiB)
&gt;          RX errors 0  dropped 0  overruns 0  frame 0
&gt;          TX packets 331237  bytes 23335124 (22.2 MiB)
&gt;          TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
&gt; 
&gt; br1.600: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500
&gt;          inet 192.168.1.110  netmask 255.255.255.0  broadcast 192.168.1.255
&gt;          inet6 fe80::1e98:ecff:fe1b:276d  prefixlen 64  scopeid 0x20&lt;link&gt;
&gt;          ether 1c:98:ec:1b:27:6d  txqueuelen 1000  (Ethernet)
&gt;          RX packets 189315  bytes 9465744 (9.0 MiB)
&gt;          RX errors 0  dropped 0  overruns 0  frame 0
&gt;          TX packets 302  bytes 30522 (29.8 KiB)
&gt;          TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
&gt; 
&gt; [root@clusterdev01]# virsh iface-list --all
&gt;   Name                 State      MAC Address
&gt; ---------------------------------------------------
&gt;   br1                  active     1c:98:ec:1b:27:6d
&gt;   br1.600           active     1c:98:ec:1b:27:6d
&gt; 
&gt; [root@clusterdev01 sysadmin]# virsh iface-dumpxml br1.600
&gt; &lt;interface type='vlan' name='br1.600'&gt;
&gt;    &lt;protocol family='ipv4'&gt;
&gt;      &lt;ip address='192.168.1.110' prefix='24'/&gt;
&gt;    &lt;/protocol&gt;
&gt;    &lt;protocol family='ipv6'&gt;
&gt;      &lt;ip address='fe80::1e98:ecff:fe1b:276d' prefix='64'/&gt;
&gt;    &lt;/protocol&gt;
&gt;    &lt;link state='up'/&gt;
&gt;    &lt;vlan tag='600'&gt;
&gt;      &lt;interface name='br1'/&gt;
&gt;    &lt;/vlan&gt;
&gt; &lt;/interface&gt;
&gt; 
&gt; I tried following some suggestions which wrapped the vlan interface in a 
&gt; bridge interface, but in ended up trashing the br1.600 interface which 
&gt; was originally defined on the host.
&gt; 
&gt; Is there a failsafe way to deal with such a situation? Am I doing 
&gt; something completely wrong here? In would like br1.600 to behave like 
&gt; br1 .....
&gt; 
&gt; Any suggestions or advice greatly appreciated.


I guess what you need is for all the traffic from your guests to go out 
on the physical network tagged with vlan id 600, and you want that to be 
transparent to the guests, right?

The simplest way to handle this is to create a vlan interface off of the 
ethernet that you have attached to br1 (not br1 itself), so it would be 
named something like "eth0.600", and then create a new bridge (call it, 
say "br600") and attach eth0.600 to br600. Then your guests would be 
created with "--network bridge=br600"

(Note that Linux host bridges do now support vlan tagging (and maybe 
even trunking) at the port level, but libvirt hasn't added support for 
it. (in other words, "Patches Welcome!" :-))

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20191203163651</emailId><senderName>Richard Achmatowicz</senderName><senderEmail>rachmato@redhat.com</senderEmail><timestampReceived>2019-12-03 16:36:51-0400</timestampReceived><subject>Re: [libvirt-users] What's the best way to make use of VLAN interfaces with VMs?</subject><body>

Laine

I made the change and I can now ping across both bridges: br1 
(192.168.0.0/24) and br1600 (192.168.1.0/24):

br1: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500
         inet 192.168.0.110  netmask 255.255.255.0  broadcast 192.168.0.255
         inet6 fe80::1e98:ecff:fe1b:276d  prefixlen 64  scopeid 0x20&lt;link&gt;
         ether 1c:98:ec:1b:27:6d  txqueuelen 1000  (Ethernet)
         RX packets 21608  bytes 10289553 (9.8 MiB)
         RX errors 0  dropped 0  overruns 0  frame 0
         TX packets 1372  bytes 131012 (127.9 KiB)
         TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

br1600: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500
         inet 192.168.1.110  netmask 255.255.255.0  broadcast 192.168.1.255
         inet6 fe80::1e98:ecff:fe1b:276d  prefixlen 64  scopeid 0x20&lt;link&gt;
         ether 1c:98:ec:1b:27:6d  txqueuelen 1000  (Ethernet)
         RX packets 3429  bytes 173404 (169.3 KiB)
         RX errors 0  dropped 0  overruns 0  frame 0
         TX packets 112  bytes 9490 (9.2 KiB)
         TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

// ping to another host with the same bridge br1 defined on 192.168.0.120
[root@clusterdev01 ~]# ping 192.168.0.120
PING 192.168.0.120 (192.168.0.120) 56(84) bytes of data.
64 bytes from 192.168.0.120: icmp_seq=1 ttl=64 time=0.481 ms
64 bytes from 192.168.0.120: icmp_seq=2 ttl=64 time=0.244 ms
64 bytes from 192.168.0.120: icmp_seq=3 ttl=64 time=0.242 ms
64 bytes from 192.168.0.120: icmp_seq=4 ttl=64 time=0.244 ms
64 bytes from 192.168.0.120: icmp_seq=5 ttl=64 time=0.237 ms
^C

// ping to another host with the same bridge br1600 defined on 192.168.1.120
[root@clusterdev01 ~]# ping 192.168.1.120
PING 192.168.1.120 (192.168.1.120) 56(84) bytes of data.
64 bytes from 192.168.1.120: icmp_seq=1 ttl=64 time=0.316 ms
64 bytes from 192.168.1.120: icmp_seq=2 ttl=64 time=0.245 ms
64 bytes from 192.168.1.120: icmp_seq=3 ttl=64 time=0.176 ms
64 bytes from 192.168.1.120: icmp_seq=4 ttl=64 time=0.213 ms
^C

However, for some reason, multicast has stopped working across the 
bridge interface, when it was working in the previous configuration 
(with br1 and br1.600).

I test multicast using a multicast test app, binding the receiver to br1 
on one host (192.168.0.120) and then binding the sender on br1 on 
another host (192.168.0.110). I also start an instance of tshark on each 
host to check which packets are being sent across. The multicast packets 
are seen by tshark to be crossing the bridge but for some reason the 
receiver app does not receive them. The bridges also have the 
multicast_querier and multicast_snooping flags enabled (e.g. for br1 on 
both hosts):

[root@clusterdev01 ~]# cat /sys/class/net/br1/bridge/multicast_querier
1
[root@clusterdev01 ~]# cat /sys/class/net/br1/bridge/multicast_snooping
1
[root@clusterdev02 ~]# cat /sys/class/net/br1/bridge/multicast_querier
1
[root@clusterdev02 ~]# cat /sys/class/net/br1/bridge/multicast_snooping
1

// 1. start multicast test app sender and send packet across br1 (the 
multicast address of 239.11.12.13 is fixed for both apps, as well as 
multicast port 5555)

[root@clusterdev01 bridge-multicast-test]# ./start-ipv4-mcast-sender.sh 
192.168.0.110
Socket #1=0.0.0.0/0.0.0.0:5555, ttl=32, bind interface=/192.168.0.110
 &gt; 1234567890
 &gt;

// 2. tshark on the sending host after sending packet

[root@clusterdev01 ~]# tshark -i br1 -f "igmp or host 239.11.12.13"
Running as user "root" and group "root". This could be dangerous.
Capturing on 'br1'
     1 0.000000000 192.168.0.110 → 239.11.12.13 UDP 52 5555 → 5555 Len=10
     2 55.389831698      0.0.0.0 → 224.0.0.1    IGMPv2 60 Membership 
Query, general
     3 60.194658894 192.168.0.115 → 224.0.0.251  IGMPv2 46 Membership 
Report group 224.0.0.251

// 3. tshark on the receiving host across bridge br1

[root@clusterdev02 ~]# tshark -i br1 -f "igmp or host 239.11.12.13"
Running as user "root" and group "root". This could be dangerous.
Capturing on 'br1'
     1 0.000000000 192.168.0.120 → 224.0.0.22   IGMPv3 54 Membership 
Report / Join group 239.11.12.13 for any sources
     2 0.902032534 192.168.0.120 → 224.0.0.22   IGMPv3 54 Membership 
Report / Join group 239.11.12.13 for any sources
     3 41.448921858 192.168.0.110 → 239.11.12.13 UDP 60 5555 → 5555 Len=10

// 4. previously started multicast test app receiver and no packet received

[root@clusterdev02 bridge-multicast-test]# 
./start-ipv4-mcast-receiver.sh 192.168.0.120
Socket=0.0.0.0/0.0.0.0:5555, bind interface=/192.168.0.120
// NO PACKET APPEARS HERE :-(


It's puzzling that the packet is seen to arrive on clusterdev02 but is 
not received by the test app. It's also odd to see IGMPv3 messages on 
the receiver and IGMPv2 messages on the sender.

Investigating ....

Richard

On 11/29/19 12:15 PM, Richard Achmatowicz wrote:
&gt; Hi Laine
&gt;
&gt; What you have suggested sounds eminently reasonable. Thanks for your 
&gt; advice. I'm going to give it a shot and report back.
&gt;
&gt; Richard
&gt;
&gt; On 11/27/19 1:38 PM, Laine Stump wrote:
&gt;&gt; On 11/26/19 11:07 PM, Richard Achmatowicz wrote:
&gt;&gt;&gt; Hello
&gt;&gt;&gt;
&gt;&gt;&gt; I have a problem with attaching VMs to a VLAN interface.
&gt;&gt;&gt;
&gt;&gt;&gt; Here is my setup: I have several physical hosts connected by a 
&gt;&gt;&gt; physical switch.  Each host has two NICs leading to the switch, 
&gt;&gt;&gt; which have been combined into a team, team0. Each host a has a 
&gt;&gt;&gt; bridge br1, which has team0 as a slave. So communication between 
&gt;&gt;&gt; hosts is based on the IP address of bridge br1 on each host.
&gt;&gt;&gt;
&gt;&gt;&gt; Up until recently, using libvirt and KVM, I was creating VMs which 
&gt;&gt;&gt; had one interface attached the default virtual network and one 
&gt;&gt;&gt; interface attached to the bridge:
&gt;&gt;&gt;
&gt;&gt;&gt; virt-install ... --network network=default --network bridge=br1 ...
&gt;&gt;&gt;
&gt;&gt;&gt; I would then statically assign an IP address to the bridge interface 
&gt;&gt;&gt; on the guest when installing the OS.
&gt;&gt;&gt;
&gt;&gt;&gt; A few days ago, a VLAN was introduced to split up the network. I 
&gt;&gt;&gt; created a new VLAN interface br1.600 on each of the hosts. My 
&gt;&gt;&gt; initial attempt was to do try this:
&gt;&gt;&gt;
&gt;&gt;&gt; virt-install ... --network network=default --network bridge=br1.600 ...
&gt;&gt;&gt;
&gt;&gt;&gt; which did not work. It then dawned on me that a VLAN interface and a 
&gt;&gt;&gt; bridge aren't treated the same. So I started to look for ways to 
&gt;&gt;&gt; allow my VMs to bind to this new interface.
&gt;&gt;&gt;
&gt;&gt;&gt; This would seem to be a common situation. What is the best way to 
&gt;&gt;&gt; work around this?
&gt;&gt;&gt;
&gt;&gt;&gt; Both the host bridge and the host VLAN interface already have their 
&gt;&gt;&gt; assigned IP addresses and appear like this in libvirt:
&gt;&gt;&gt;
&gt;&gt;&gt; [root@clusterdev01 ]# ifconfig
&gt;&gt;&gt; br1: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500
&gt;&gt;&gt;          inet 192.168.0.110  netmask 255.255.255.0  broadcast 
&gt;&gt;&gt; 192.168.0.255
&gt;&gt;&gt;          inet6 fe80::1e98:ecff:fe1b:276d  prefixlen 64 scopeid 
&gt;&gt;&gt; 0x20&lt;link&gt;
&gt;&gt;&gt;          ether 1c:98:ec:1b:27:6d  txqueuelen 1000  (Ethernet)
&gt;&gt;&gt;          RX packets 833772  bytes 2976958254 (2.7 GiB)
&gt;&gt;&gt;          RX errors 0  dropped 0  overruns 0  frame 0
&gt;&gt;&gt;          TX packets 331237  bytes 23335124 (22.2 MiB)
&gt;&gt;&gt;          TX errors 0  dropped 0 overruns 0  carrier 0 collisions 0
&gt;&gt;&gt;
&gt;&gt;&gt; br1.600: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500
&gt;&gt;&gt;          inet 192.168.1.110  netmask 255.255.255.0  broadcast 
&gt;&gt;&gt; 192.168.1.255
&gt;&gt;&gt;          inet6 fe80::1e98:ecff:fe1b:276d  prefixlen 64 scopeid 
&gt;&gt;&gt; 0x20&lt;link&gt;
&gt;&gt;&gt;          ether 1c:98:ec:1b:27:6d  txqueuelen 1000  (Ethernet)
&gt;&gt;&gt;          RX packets 189315  bytes 9465744 (9.0 MiB)
&gt;&gt;&gt;          RX errors 0  dropped 0  overruns 0  frame 0
&gt;&gt;&gt;          TX packets 302  bytes 30522 (29.8 KiB)
&gt;&gt;&gt;          TX errors 0  dropped 0 overruns 0  carrier 0 collisions 0
&gt;&gt;&gt;
&gt;&gt;&gt; [root@clusterdev01]# virsh iface-list --all
&gt;&gt;&gt;   Name                 State      MAC Address
&gt;&gt;&gt; ---------------------------------------------------
&gt;&gt;&gt;   br1                  active     1c:98:ec:1b:27:6d
&gt;&gt;&gt;   br1.600           active     1c:98:ec:1b:27:6d
&gt;&gt;&gt;
&gt;&gt;&gt; [root@clusterdev01 sysadmin]# virsh iface-dumpxml br1.600
&gt;&gt;&gt; &lt;interface type='vlan' name='br1.600'&gt;
&gt;&gt;&gt;    &lt;protocol family='ipv4'&gt;
&gt;&gt;&gt;      &lt;ip address='192.168.1.110' prefix='24'/&gt;
&gt;&gt;&gt;    &lt;/protocol&gt;
&gt;&gt;&gt;    &lt;protocol family='ipv6'&gt;
&gt;&gt;&gt;      &lt;ip address='fe80::1e98:ecff:fe1b:276d' prefix='64'/&gt;
&gt;&gt;&gt;    &lt;/protocol&gt;
&gt;&gt;&gt;    &lt;link state='up'/&gt;
&gt;&gt;&gt;    &lt;vlan tag='600'&gt;
&gt;&gt;&gt;      &lt;interface name='br1'/&gt;
&gt;&gt;&gt;    &lt;/vlan&gt;
&gt;&gt;&gt; &lt;/interface&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; I tried following some suggestions which wrapped the vlan interface 
&gt;&gt;&gt; in a bridge interface, but in ended up trashing the br1.600 
&gt;&gt;&gt; interface which was originally defined on the host.
&gt;&gt;&gt;
&gt;&gt;&gt; Is there a failsafe way to deal with such a situation? Am I doing 
&gt;&gt;&gt; something completely wrong here? In would like br1.600 to behave 
&gt;&gt;&gt; like br1 .....
&gt;&gt;&gt;
&gt;&gt;&gt; Any suggestions or advice greatly appreciated.
&gt;&gt;
&gt;&gt;
&gt;&gt; I guess what you need is for all the traffic from your guests to go 
&gt;&gt; out on the physical network tagged with vlan id 600, and you want 
&gt;&gt; that to be transparent to the guests, right?
&gt;&gt;
&gt;&gt; The simplest way to handle this is to create a vlan interface off of 
&gt;&gt; the ethernet that you have attached to br1 (not br1 itself), so it 
&gt;&gt; would be named something like "eth0.600", and then create a new 
&gt;&gt; bridge (call it, say "br600") and attach eth0.600 to br600. Then your 
&gt;&gt; guests would be created with "--network bridge=br600"
&gt;&gt;
&gt;&gt; (Note that Linux host bridges do now support vlan tagging (and maybe 
&gt;&gt; even trunking) at the port level, but libvirt hasn't added support 
&gt;&gt; for it. (in other words, "Patches Welcome!" :-))
&gt;&gt;


_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20191203190623</emailId><senderName>Richard Achmatowicz</senderName><senderEmail>rachmato@redhat.com</senderEmail><timestampReceived>2019-12-03 19:06:23-0400</timestampReceived><subject>Re: [libvirt-users] What's the best way to make use of VLAN interfaces with VMs?</subject><body>

Even more puzzling, I reverted back to the old configuration to confirm 
what I had seen and found that it works in one direction but not the 
other: i.e. from 192.168.0.110 to 192.168.0.120, but not the other way 
around.

Must be something with my configuration....which I can follow up on.

So, thanks again for your help.

Richard

On 12/3/19 11:36 AM, Richard Achmatowicz wrote:
&gt; Laine
&gt;
&gt; I made the change and I can now ping across both bridges: br1 
&gt; (192.168.0.0/24) and br1600 (192.168.1.0/24):
&gt;
&gt; br1: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500
&gt;         inet 192.168.0.110  netmask 255.255.255.0  broadcast 
&gt; 192.168.0.255
&gt;         inet6 fe80::1e98:ecff:fe1b:276d  prefixlen 64  scopeid 0x20&lt;link&gt;
&gt;         ether 1c:98:ec:1b:27:6d  txqueuelen 1000  (Ethernet)
&gt;         RX packets 21608  bytes 10289553 (9.8 MiB)
&gt;         RX errors 0  dropped 0  overruns 0  frame 0
&gt;         TX packets 1372  bytes 131012 (127.9 KiB)
&gt;         TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
&gt;
&gt; br1600: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500
&gt;         inet 192.168.1.110  netmask 255.255.255.0  broadcast 
&gt; 192.168.1.255
&gt;         inet6 fe80::1e98:ecff:fe1b:276d  prefixlen 64  scopeid 0x20&lt;link&gt;
&gt;         ether 1c:98:ec:1b:27:6d  txqueuelen 1000  (Ethernet)
&gt;         RX packets 3429  bytes 173404 (169.3 KiB)
&gt;         RX errors 0  dropped 0  overruns 0  frame 0
&gt;         TX packets 112  bytes 9490 (9.2 KiB)
&gt;         TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
&gt;
&gt; // ping to another host with the same bridge br1 defined on 192.168.0.120
&gt; [root@clusterdev01 ~]# ping 192.168.0.120
&gt; PING 192.168.0.120 (192.168.0.120) 56(84) bytes of data.
&gt; 64 bytes from 192.168.0.120: icmp_seq=1 ttl=64 time=0.481 ms
&gt; 64 bytes from 192.168.0.120: icmp_seq=2 ttl=64 time=0.244 ms
&gt; 64 bytes from 192.168.0.120: icmp_seq=3 ttl=64 time=0.242 ms
&gt; 64 bytes from 192.168.0.120: icmp_seq=4 ttl=64 time=0.244 ms
&gt; 64 bytes from 192.168.0.120: icmp_seq=5 ttl=64 time=0.237 ms
&gt; ^C
&gt;
&gt; // ping to another host with the same bridge br1600 defined on 
&gt; 192.168.1.120
&gt; [root@clusterdev01 ~]# ping 192.168.1.120
&gt; PING 192.168.1.120 (192.168.1.120) 56(84) bytes of data.
&gt; 64 bytes from 192.168.1.120: icmp_seq=1 ttl=64 time=0.316 ms
&gt; 64 bytes from 192.168.1.120: icmp_seq=2 ttl=64 time=0.245 ms
&gt; 64 bytes from 192.168.1.120: icmp_seq=3 ttl=64 time=0.176 ms
&gt; 64 bytes from 192.168.1.120: icmp_seq=4 ttl=64 time=0.213 ms
&gt; ^C
&gt;
&gt; However, for some reason, multicast has stopped working across the 
&gt; bridge interface, when it was working in the previous configuration 
&gt; (with br1 and br1.600).
&gt;
&gt; I test multicast using a multicast test app, binding the receiver to 
&gt; br1 on one host (192.168.0.120) and then binding the sender on br1 on 
&gt; another host (192.168.0.110). I also start an instance of tshark on 
&gt; each host to check which packets are being sent across. The multicast 
&gt; packets are seen by tshark to be crossing the bridge but for some 
&gt; reason the receiver app does not receive them. The bridges also have 
&gt; the multicast_querier and multicast_snooping flags enabled (e.g. for 
&gt; br1 on both hosts):
&gt;
&gt; [root@clusterdev01 ~]# cat /sys/class/net/br1/bridge/multicast_querier
&gt; 1
&gt; [root@clusterdev01 ~]# cat /sys/class/net/br1/bridge/multicast_snooping
&gt; 1
&gt; [root@clusterdev02 ~]# cat /sys/class/net/br1/bridge/multicast_querier
&gt; 1
&gt; [root@clusterdev02 ~]# cat /sys/class/net/br1/bridge/multicast_snooping
&gt; 1
&gt;
&gt; // 1. start multicast test app sender and send packet across br1 (the 
&gt; multicast address of 239.11.12.13 is fixed for both apps, as well as 
&gt; multicast port 5555)
&gt;
&gt; [root@clusterdev01 bridge-multicast-test]# 
&gt; ./start-ipv4-mcast-sender.sh 192.168.0.110
&gt; Socket #1=0.0.0.0/0.0.0.0:5555, ttl=32, bind interface=/192.168.0.110
&gt; &gt; 1234567890
&gt; &gt;
&gt;
&gt; // 2. tshark on the sending host after sending packet
&gt;
&gt; [root@clusterdev01 ~]# tshark -i br1 -f "igmp or host 239.11.12.13"
&gt; Running as user "root" and group "root". This could be dangerous.
&gt; Capturing on 'br1'
&gt;     1 0.000000000 192.168.0.110 → 239.11.12.13 UDP 52 5555 → 5555 Len=10
&gt;     2 55.389831698      0.0.0.0 → 224.0.0.1    IGMPv2 60 Membership 
&gt; Query, general
&gt;     3 60.194658894 192.168.0.115 → 224.0.0.251  IGMPv2 46 Membership 
&gt; Report group 224.0.0.251
&gt;
&gt; // 3. tshark on the receiving host across bridge br1
&gt;
&gt; [root@clusterdev02 ~]# tshark -i br1 -f "igmp or host 239.11.12.13"
&gt; Running as user "root" and group "root". This could be dangerous.
&gt; Capturing on 'br1'
&gt;     1 0.000000000 192.168.0.120 → 224.0.0.22   IGMPv3 54 Membership 
&gt; Report / Join group 239.11.12.13 for any sources
&gt;     2 0.902032534 192.168.0.120 → 224.0.0.22   IGMPv3 54 Membership 
&gt; Report / Join group 239.11.12.13 for any sources
&gt;     3 41.448921858 192.168.0.110 → 239.11.12.13 UDP 60 5555 → 5555 Len=10
&gt;
&gt; // 4. previously started multicast test app receiver and no packet 
&gt; received
&gt;
&gt; [root@clusterdev02 bridge-multicast-test]# 
&gt; ./start-ipv4-mcast-receiver.sh 192.168.0.120
&gt; Socket=0.0.0.0/0.0.0.0:5555, bind interface=/192.168.0.120
&gt; // NO PACKET APPEARS HERE :-(
&gt;
&gt;
&gt; It's puzzling that the packet is seen to arrive on clusterdev02 but is 
&gt; not received by the test app. It's also odd to see IGMPv3 messages on 
&gt; the receiver and IGMPv2 messages on the sender.
&gt;
&gt; Investigating ....
&gt;
&gt; Richard
&gt;
&gt; On 11/29/19 12:15 PM, Richard Achmatowicz wrote:
&gt;&gt; Hi Laine
&gt;&gt;
&gt;&gt; What you have suggested sounds eminently reasonable. Thanks for your 
&gt;&gt; advice. I'm going to give it a shot and report back.
&gt;&gt;
&gt;&gt; Richard
&gt;&gt;
&gt;&gt; On 11/27/19 1:38 PM, Laine Stump wrote:
&gt;&gt;&gt; On 11/26/19 11:07 PM, Richard Achmatowicz wrote:
&gt;&gt;&gt;&gt; Hello
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; I have a problem with attaching VMs to a VLAN interface.
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Here is my setup: I have several physical hosts connected by a 
&gt;&gt;&gt;&gt; physical switch.  Each host has two NICs leading to the switch, 
&gt;&gt;&gt;&gt; which have been combined into a team, team0. Each host a has a 
&gt;&gt;&gt;&gt; bridge br1, which has team0 as a slave. So communication between 
&gt;&gt;&gt;&gt; hosts is based on the IP address of bridge br1 on each host.
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Up until recently, using libvirt and KVM, I was creating VMs which 
&gt;&gt;&gt;&gt; had one interface attached the default virtual network and one 
&gt;&gt;&gt;&gt; interface attached to the bridge:
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; virt-install ... --network network=default --network bridge=br1 ...
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; I would then statically assign an IP address to the bridge 
&gt;&gt;&gt;&gt; interface on the guest when installing the OS.
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; A few days ago, a VLAN was introduced to split up the network. I 
&gt;&gt;&gt;&gt; created a new VLAN interface br1.600 on each of the hosts. My 
&gt;&gt;&gt;&gt; initial attempt was to do try this:
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; virt-install ... --network network=default --network bridge=br1.600 
&gt;&gt;&gt;&gt; ...
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; which did not work. It then dawned on me that a VLAN interface and 
&gt;&gt;&gt;&gt; a bridge aren't treated the same. So I started to look for ways to 
&gt;&gt;&gt;&gt; allow my VMs to bind to this new interface.
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; This would seem to be a common situation. What is the best way to 
&gt;&gt;&gt;&gt; work around this?
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Both the host bridge and the host VLAN interface already have their 
&gt;&gt;&gt;&gt; assigned IP addresses and appear like this in libvirt:
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; [root@clusterdev01 ]# ifconfig
&gt;&gt;&gt;&gt; br1: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500
&gt;&gt;&gt;&gt;          inet 192.168.0.110  netmask 255.255.255.0 broadcast 
&gt;&gt;&gt;&gt; 192.168.0.255
&gt;&gt;&gt;&gt;          inet6 fe80::1e98:ecff:fe1b:276d  prefixlen 64 scopeid 
&gt;&gt;&gt;&gt; 0x20&lt;link&gt;
&gt;&gt;&gt;&gt;          ether 1c:98:ec:1b:27:6d  txqueuelen 1000 (Ethernet)
&gt;&gt;&gt;&gt;          RX packets 833772  bytes 2976958254 (2.7 GiB)
&gt;&gt;&gt;&gt;          RX errors 0  dropped 0  overruns 0  frame 0
&gt;&gt;&gt;&gt;          TX packets 331237  bytes 23335124 (22.2 MiB)
&gt;&gt;&gt;&gt;          TX errors 0  dropped 0 overruns 0  carrier 0 collisions 0
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; br1.600: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt; mtu 1500
&gt;&gt;&gt;&gt;          inet 192.168.1.110  netmask 255.255.255.0 broadcast 
&gt;&gt;&gt;&gt; 192.168.1.255
&gt;&gt;&gt;&gt;          inet6 fe80::1e98:ecff:fe1b:276d  prefixlen 64 scopeid 
&gt;&gt;&gt;&gt; 0x20&lt;link&gt;
&gt;&gt;&gt;&gt;          ether 1c:98:ec:1b:27:6d  txqueuelen 1000 (Ethernet)
&gt;&gt;&gt;&gt;          RX packets 189315  bytes 9465744 (9.0 MiB)
&gt;&gt;&gt;&gt;          RX errors 0  dropped 0  overruns 0  frame 0
&gt;&gt;&gt;&gt;          TX packets 302  bytes 30522 (29.8 KiB)
&gt;&gt;&gt;&gt;          TX errors 0  dropped 0 overruns 0  carrier 0 collisions 0
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; [root@clusterdev01]# virsh iface-list --all
&gt;&gt;&gt;&gt;   Name                 State      MAC Address
&gt;&gt;&gt;&gt; ---------------------------------------------------
&gt;&gt;&gt;&gt;   br1                  active     1c:98:ec:1b:27:6d
&gt;&gt;&gt;&gt;   br1.600           active     1c:98:ec:1b:27:6d
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; [root@clusterdev01 sysadmin]# virsh iface-dumpxml br1.600
&gt;&gt;&gt;&gt; &lt;interface type='vlan' name='br1.600'&gt;
&gt;&gt;&gt;&gt;    &lt;protocol family='ipv4'&gt;
&gt;&gt;&gt;&gt;      &lt;ip address='192.168.1.110' prefix='24'/&gt;
&gt;&gt;&gt;&gt;    &lt;/protocol&gt;
&gt;&gt;&gt;&gt;    &lt;protocol family='ipv6'&gt;
&gt;&gt;&gt;&gt;      &lt;ip address='fe80::1e98:ecff:fe1b:276d' prefix='64'/&gt;
&gt;&gt;&gt;&gt;    &lt;/protocol&gt;
&gt;&gt;&gt;&gt;    &lt;link state='up'/&gt;
&gt;&gt;&gt;&gt;    &lt;vlan tag='600'&gt;
&gt;&gt;&gt;&gt;      &lt;interface name='br1'/&gt;
&gt;&gt;&gt;&gt;    &lt;/vlan&gt;
&gt;&gt;&gt;&gt; &lt;/interface&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; I tried following some suggestions which wrapped the vlan interface 
&gt;&gt;&gt;&gt; in a bridge interface, but in ended up trashing the br1.600 
&gt;&gt;&gt;&gt; interface which was originally defined on the host.
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Is there a failsafe way to deal with such a situation? Am I doing 
&gt;&gt;&gt;&gt; something completely wrong here? In would like br1.600 to behave 
&gt;&gt;&gt;&gt; like br1 .....
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Any suggestions or advice greatly appreciated.
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; I guess what you need is for all the traffic from your guests to go 
&gt;&gt;&gt; out on the physical network tagged with vlan id 600, and you want 
&gt;&gt;&gt; that to be transparent to the guests, right?
&gt;&gt;&gt;
&gt;&gt;&gt; The simplest way to handle this is to create a vlan interface off of 
&gt;&gt;&gt; the ethernet that you have attached to br1 (not br1 itself), so it 
&gt;&gt;&gt; would be named something like "eth0.600", and then create a new 
&gt;&gt;&gt; bridge (call it, say "br600") and attach eth0.600 to br600. Then 
&gt;&gt;&gt; your guests would be created with "--network bridge=br600"
&gt;&gt;&gt;
&gt;&gt;&gt; (Note that Linux host bridges do now support vlan tagging (and maybe 
&gt;&gt;&gt; even trunking) at the port level, but libvirt hasn't added support 
&gt;&gt;&gt; for it. (in other words, "Patches Welcome!" :-))
&gt;&gt;&gt;


_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20191126233313</emailId><senderName>Cole Robinson</senderName><senderEmail>crobinso@redhat.com</senderEmail><timestampReceived>2019-11-26 23:33:13-0400</timestampReceived><subject>Re: [libvirt-users] Fail to build upstream libvirt on rhel8</subject><body>

On 11/21/19 3:18 AM, Han Han wrote:
&gt; Hello,
&gt; A compilation failure happened when I tried building libvirt latest code
&gt; on rhel8
&gt; 
&gt; Version:
&gt; gcc-8.3.1-4.5.el8.x86_64
&gt; libvirt v5.9.0-352-g5e939cea89
&gt; 
&gt; Steps:
&gt; 1. Clone libvirt source code
&gt; 2. Create build dir, and run autogen.sh
&gt; # cd libvirt
&gt; # mkdir build &amp;&amp; cd build
&gt; # ../autogen.sh --build=x86_64-redhat-linux-gnu
&gt; --host=x86_64-redhat-linux-gnu --program-prefix=
&gt; --disable-dependency-tracking --prefix=/usr --exec-prefix=/usr
&gt; --bindir=/usr/bin --sbindir=/usr/sbin --sysconfdir=/etc
&gt; --datadir=/usr/share --includedir=/usr/include --libdir=/usr/lib64
&gt; --libexecdir=/usr/libexec --localstatedir=/var --sharedstatedir=/var/lib
&gt; --mandir=/usr/share/man --infodir=/usr/share/info
&gt; --with-runstatedir=/run --with-qemu --without-openvz --without-lxc
&gt; --without-vbox --without-libxl --with-sasl --with-polkit --with-libvirtd
&gt; --without-phyp --with-esx --without-hyperv --without-vmware --without-vz
&gt; --without-bhyve --with-remote-default-mode=legacy --with-interface
&gt; --with-network --with-storage-fs --with-storage-lvm --with-storage-iscsi
&gt; --with-storage-iscsi-direct --with-storage-scsi --with-storage-disk
&gt; --with-storage-mpath --with-storage-rbd --without-storage-sheepdog
&gt; --with-storage-gluster --without-storage-zfs --without-storage-vstorage
&gt; --with-numactl --with-numad --with-capng --without-fuse --with-netcf
&gt; --with-selinux --with-selinux-mount=/sys/fs/selinux --without-apparmor
&gt; --without-hal --with-udev --with-yajl --with-sanlock --with-libpcap
&gt; --with-macvtap --with-audit --with-dtrace --with-driver-modules
&gt; --with-firewalld --with-firewalld-zone --without-wireshark-dissector
&gt; --without-pm-utils --with-nss-plugin --with-qemu-user=qemu
&gt; --with-qemu-group=qemu --with-tls-priority=@LIBVIRT,SYSTEM
&gt; --enable-werror --enable-expensive-tests --with-init-script=systemd
&gt; --without-login-shell
&gt; # make
&gt; 
&gt; Then error appears:
&gt; make[2]: Entering directory '/root/libvirt/build/include/libvirt'
&gt; make[2]: Nothing to be done for 'all'.
&gt; make[2]: Leaving directory '/root/libvirt/build/include/libvirt'
&gt; Making all in src
&gt; make[2]: Entering directory '/root/libvirt/build/src'
&gt;   GEN      access/org.libvirt.api.policy
&gt; /bin/sh: access/org.libvirt.api.policy: No such file or directory
&gt;   GEN      access/viraccessapicheck.h
&gt; /bin/sh: access/viraccessapicheck.h: No such file or directory
&gt; make[2]: *** [Makefile:15067: access/viraccessapicheck.h] Error 1
&gt; make[2]: Leaving directory '/root/libvirt/build/src'
&gt; make[1]: *** [Makefile:1957: all-recursive] Error 1
&gt; make[1]: Leaving directory '/root/libvirt/build'
&gt; make: *** [Makefile:1850: all] Error 2
&gt; 

I reproduced on Fedora too. I tracked it down to the
--disable-dependency-tracking configure option: drop that and the build
should work. I don't know enough about autotools to say if that's
expected, or it's something broken on libvirt side

- Cole

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20191121142253</emailId><senderName>Michal Privoznik</senderName><senderEmail>mprivozn@redhat.com</senderEmail><timestampReceived>2019-11-21 14:22:53-0400</timestampReceived><subject>Re: [libvirt-users] Getting "Unable to set XATTR" on libvirt 5.6.0 inside containers</subject><body>

On 11/21/19 3:08 PM, Roman Mohr wrote:
&gt; Hi,
&gt; 
&gt; We are updating KubeVirt to libvirt 5.6.0. Before that we were running 
&gt; on 5.0.0. It seems like something regarding setting xattrs on files has 
&gt; changed, because with libvirt 5.6.0 we are getting the following error:
&gt; 
&gt; ```
&gt; Unable to set XATTR trusted.libvirt.security.dac on 
&gt; /var/lib/libvirt/qemu/domain-410-default_vmi-fedora: Operation not 
&gt; permitted')
&gt; ```
&gt; 
&gt; The main problem is for us is that container filesystems don't 
&gt; necessarily support setting xattrs.
&gt; 
&gt; My questions would therfore be:
&gt; 
&gt;   * Does anyone know what has changed, and why?
&gt;   * Can it be disabled?
&gt; 

I've seen the bug you filled so I'll continue discussion there so that 
we don't have two places where we discuss this issue.

https://bugzilla.redhat.com/show_bug.cgi?id=1774373

Michal

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20191120085215</emailId><senderName>Milan Zamazal</senderName><senderEmail>mzamazal@redhat.com</senderEmail><timestampReceived>2019-11-20 08:52:15-0400</timestampReceived><subject>Re: [libvirt-users] Descriptions of mdev types?</subject><body>

Erik Skultety &lt;eskultet@redhat.com&gt; writes:

&gt; On Tue, Nov 19, 2019 at 05:38:54PM +0100, Milan Zamazal wrote:
&gt;&gt; Hi, when retrieving an mdev device info using `virsh nodedev-dumpxml' or
&gt;&gt; the libvirt API, something like the following is returned:
&gt;
&gt;&gt;
&gt;&gt;     &lt;capability type='mdev_types'&gt;
&gt;&gt;       &lt;type id='nvidia-210'&gt;
&gt;&gt;         &lt;name&gt;GRID M60-2B4&lt;/name&gt;
&gt;&gt;         &lt;deviceAPI&gt;vfio-pci&lt;/deviceAPI&gt;
&gt;&gt;         &lt;availableInstances&gt;4&lt;/availableInstances&gt;
&gt;&gt;       &lt;/type&gt;
&gt;&gt;       ...
&gt;&gt;     &lt;/capability&gt;
&gt;&gt;
&gt;&gt; Besides device_api, available_instances and (optional) `name',
&gt;&gt; `description' of the given mdev type may be optionally provided in
&gt;&gt; /sys/.../mdev_supported_types/... for each of the available mdev types.
&gt;&gt; I can see in the sources that libvirt doesn't try to retrieve it -- is
&gt;&gt; it intentionally or is it just an omission?  If the latter, could it be
&gt;&gt; added, please?  It looks like a useful piece of information for the user
&gt;&gt; to get an idea what the given mdev type means.
&gt;
&gt; The reasoning we had about not including the "description" attribute when we
&gt; introduced mdevs to libvirt's nodedev driver was that there was no way for
&gt; NVIDIA and Intel to agree on the values to be exposed by the attribute -
&gt; especially the data NVIDIA puts in there (like you already said) is useful, but
&gt; there was also no agreement on extracting the data into a different attribute
&gt; (a set of attributes) and make them structured within the XML.
&gt;
&gt; Which brings me to the actual content of the "description" attribute, it
&gt; contains unstructured free-form text and we didn't want to expose that kind of
&gt; thing in the XML even though it just so happens that NVIDIA put some
&gt; interesting data in it - since the attribute is optional and free-form, one
&gt; day, you find the useful data you're interested in now, but tomorrow that may
&gt; not be the case anymore and can easily change. I've got no problem with the
&gt; idea of exposing some kind of description as part of the XML per se, the
&gt; problem I see is that someone will try and start parsing the description field
&gt; because of the potentially useful data and if it changes and I'm afraid
&gt; complaints will head our way even though we cannot guarantee anything wrt to
&gt; that specific field (I'm still open to a discussion though).

I agree that it would not be a good idea to rely on the content of the
description data or trying to parse it.  But if we can accept the
description is basically a free-form, less or more informative, text
then it is still useful for some purposes.  I think your worries about
the users relying on the content of the "data" can be handled in
documentation, by clearly stating the item may contain anything, which
may change any time.

Our use case in oVirt is to display some accompanied information when a
user selects one of the many mdev types in the UI.  If we provided
description (as a normal text) next to each of the mdev types, it would
be definitely helpful and a significant improvement over just providing
the cryptic mdev type numbers + available instances.  Currently, we have
no better choice than to read `description' files from /sys, which makes
little sense when all the other info is already available from libvirt.
This is why I think having &lt;description&gt; element with a text content
copied 1:1 from `description' file would be useful.

Thanks,
Milan


_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20191127151228</emailId><senderName>Mauricio Tavares</senderName><senderEmail>raubvogel@gmail.com</senderEmail><timestampReceived>2019-11-27 15:12:28-0400</timestampReceived><subject>[libvirt-users] nvme, spdk and host linux version</subject><body>

I have been following the patches on nvme support on the list and was
wondering: If I wanted to build a vm host to be on the bleeding edge
for nvme and spdk fun in libvirt, which linux distro --
fedora/ubuntu/centos/etc -- should I pick?


_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20191129171532</emailId><senderName>Richard Achmatowicz</senderName><senderEmail>rachmato@redhat.com</senderEmail><timestampReceived>2019-11-29 17:15:32-0400</timestampReceived><subject>Re: [libvirt-users] What's the best way to make use of VLAN interfaces with VMs?</subject><body>

Hi Laine

What you have suggested sounds eminently reasonable. Thanks for your 
advice. I'm going to give it a shot and report back.

Richard

On 11/27/19 1:38 PM, Laine Stump wrote:
&gt; On 11/26/19 11:07 PM, Richard Achmatowicz wrote:
&gt;&gt; Hello
&gt;&gt;
&gt;&gt; I have a problem with attaching VMs to a VLAN interface.
&gt;&gt;
&gt;&gt; Here is my setup: I have several physical hosts connected by a 
&gt;&gt; physical switch.  Each host has two NICs leading to the switch, which 
&gt;&gt; have been combined into a team, team0. Each host a has a bridge br1, 
&gt;&gt; which has team0 as a slave. So communication between hosts is based 
&gt;&gt; on the IP address of bridge br1 on each host.
&gt;&gt;
&gt;&gt; Up until recently, using libvirt and KVM, I was creating VMs which 
&gt;&gt; had one interface attached the default virtual network and one 
&gt;&gt; interface attached to the bridge:
&gt;&gt;
&gt;&gt; virt-install ... --network network=default --network bridge=br1 ...
&gt;&gt;
&gt;&gt; I would then statically assign an IP address to the bridge interface 
&gt;&gt; on the guest when installing the OS.
&gt;&gt;
&gt;&gt; A few days ago, a VLAN was introduced to split up the network. I 
&gt;&gt; created a new VLAN interface br1.600 on each of the hosts. My initial 
&gt;&gt; attempt was to do try this:
&gt;&gt;
&gt;&gt; virt-install ... --network network=default --network bridge=br1.600 ...
&gt;&gt;
&gt;&gt; which did not work. It then dawned on me that a VLAN interface and a 
&gt;&gt; bridge aren't treated the same. So I started to look for ways to 
&gt;&gt; allow my VMs to bind to this new interface.
&gt;&gt;
&gt;&gt; This would seem to be a common situation. What is the best way to 
&gt;&gt; work around this?
&gt;&gt;
&gt;&gt; Both the host bridge and the host VLAN interface already have their 
&gt;&gt; assigned IP addresses and appear like this in libvirt:
&gt;&gt;
&gt;&gt; [root@clusterdev01 ]# ifconfig
&gt;&gt; br1: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500
&gt;&gt;          inet 192.168.0.110  netmask 255.255.255.0  broadcast 
&gt;&gt; 192.168.0.255
&gt;&gt;          inet6 fe80::1e98:ecff:fe1b:276d  prefixlen 64  scopeid 
&gt;&gt; 0x20&lt;link&gt;
&gt;&gt;          ether 1c:98:ec:1b:27:6d  txqueuelen 1000  (Ethernet)
&gt;&gt;          RX packets 833772  bytes 2976958254 (2.7 GiB)
&gt;&gt;          RX errors 0  dropped 0  overruns 0  frame 0
&gt;&gt;          TX packets 331237  bytes 23335124 (22.2 MiB)
&gt;&gt;          TX errors 0  dropped 0 overruns 0  carrier 0 collisions 0
&gt;&gt;
&gt;&gt; br1.600: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500
&gt;&gt;          inet 192.168.1.110  netmask 255.255.255.0  broadcast 
&gt;&gt; 192.168.1.255
&gt;&gt;          inet6 fe80::1e98:ecff:fe1b:276d  prefixlen 64  scopeid 
&gt;&gt; 0x20&lt;link&gt;
&gt;&gt;          ether 1c:98:ec:1b:27:6d  txqueuelen 1000  (Ethernet)
&gt;&gt;          RX packets 189315  bytes 9465744 (9.0 MiB)
&gt;&gt;          RX errors 0  dropped 0  overruns 0  frame 0
&gt;&gt;          TX packets 302  bytes 30522 (29.8 KiB)
&gt;&gt;          TX errors 0  dropped 0 overruns 0  carrier 0 collisions 0
&gt;&gt;
&gt;&gt; [root@clusterdev01]# virsh iface-list --all
&gt;&gt;   Name                 State      MAC Address
&gt;&gt; ---------------------------------------------------
&gt;&gt;   br1                  active     1c:98:ec:1b:27:6d
&gt;&gt;   br1.600           active     1c:98:ec:1b:27:6d
&gt;&gt;
&gt;&gt; [root@clusterdev01 sysadmin]# virsh iface-dumpxml br1.600
&gt;&gt; &lt;interface type='vlan' name='br1.600'&gt;
&gt;&gt;    &lt;protocol family='ipv4'&gt;
&gt;&gt;      &lt;ip address='192.168.1.110' prefix='24'/&gt;
&gt;&gt;    &lt;/protocol&gt;
&gt;&gt;    &lt;protocol family='ipv6'&gt;
&gt;&gt;      &lt;ip address='fe80::1e98:ecff:fe1b:276d' prefix='64'/&gt;
&gt;&gt;    &lt;/protocol&gt;
&gt;&gt;    &lt;link state='up'/&gt;
&gt;&gt;    &lt;vlan tag='600'&gt;
&gt;&gt;      &lt;interface name='br1'/&gt;
&gt;&gt;    &lt;/vlan&gt;
&gt;&gt; &lt;/interface&gt;
&gt;&gt;
&gt;&gt; I tried following some suggestions which wrapped the vlan interface 
&gt;&gt; in a bridge interface, but in ended up trashing the br1.600 interface 
&gt;&gt; which was originally defined on the host.
&gt;&gt;
&gt;&gt; Is there a failsafe way to deal with such a situation? Am I doing 
&gt;&gt; something completely wrong here? In would like br1.600 to behave like 
&gt;&gt; br1 .....
&gt;&gt;
&gt;&gt; Any suggestions or advice greatly appreciated.
&gt;
&gt;
&gt; I guess what you need is for all the traffic from your guests to go 
&gt; out on the physical network tagged with vlan id 600, and you want that 
&gt; to be transparent to the guests, right?
&gt;
&gt; The simplest way to handle this is to create a vlan interface off of 
&gt; the ethernet that you have attached to br1 (not br1 itself), so it 
&gt; would be named something like "eth0.600", and then create a new bridge 
&gt; (call it, say "br600") and attach eth0.600 to br600. Then your guests 
&gt; would be created with "--network bridge=br600"
&gt;
&gt; (Note that Linux host bridges do now support vlan tagging (and maybe 
&gt; even trunking) at the port level, but libvirt hasn't added support for 
&gt; it. (in other words, "Patches Welcome!" :-))
&gt;


_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20191130094957</emailId><senderName></senderName><senderEmail>ort_libvirt</senderEmail><timestampReceived>2019-11-30 09:49:57-0400</timestampReceived><subject>Re: [libvirt-users] Converting LVM to qcow2</subject><body>

Hi,

Thanks so much for your detailed explanation!

Best regards,
Richard Taubo


&gt; On 30 Nov 2019, at 10:25, Peter Krempa &lt;pkrempa@redhat.com&gt; wrote:
&gt; 
&gt; On Sat, Nov 30, 2019 at 01:12:31 +0100, ort_libvirt@bergersen.no wrote:
&gt; &gt; Hi!
&gt; &gt; 
&gt; &gt; I need to convert a KVM virtual machine from LVM to a qcow2 image, and wonder if \
&gt; &gt; this is the best way to do it (*1): [$] qemu-img convert -O qcow2 \
&gt; &gt; /dev/vg_name/lv_name/ /var/lib/libvirt/images/image_name.qcow2 
&gt; &gt; If this is the best way to do this, will this keep the information on: \
&gt; &gt; /dev/vg_name/lv_name/ untouched?
&gt; 
&gt; As long as you also reconfigure the VM to use
&gt; /var/lib/libvirt/images/image_name.qcow2 after this point the old
&gt; logical volume will not be used.
&gt; 
&gt; The above approach is good if you are okay with some downtime on the VM
&gt; while the image is converted over.
&gt; 
&gt; There are a few other approaches you can conisder when you want to do it
&gt; live or for example save some space in the qcow2 image by using fstrim
&gt; first.
&gt; 
&gt; For a live conversion, you can do an external disk-only snapshot first
&gt; which creates a qcow2 overlay file:
&gt; 
&gt; virsh snapshot-create-as $VMNAME --no-metadata --disk-only --diskspec
&gt; $DISK,file=/path/to/image.qcow2 --diskspec ...
&gt; 
&gt; Optionally if your disk frontend supports it [1] and you've configured it
&gt; properly you can now run 'fstrim' on the filesystems. That records which
&gt; parts of the disk are empty into the overlay file and thus will not be
&gt; converted later
&gt; 
&gt; After that you pull the backing image into the qcow2:
&gt; 
&gt; virsh blockpull --wait --verbose $DOMNAME $DISK
&gt; 
&gt; if you executed the trim step the image will be smaller and also the
&gt; conversion step will avoid copying unused parts. Optionally that step
&gt; can be skipped and then the result will be the same as in the offline
&gt; conversion approach.
&gt; 
&gt; Optionally if you don't care about the trim step above you can use also
&gt; the 'blockcopy' operation instead of the two steps above to achieve the
&gt; same:
&gt; 
&gt; virsh blockcopy $VMNAME $DISK --dest /path/to/new.qcow2 --wait --verbose
&gt; --pivot --format qcow2 --transient-job
&gt; 
&gt; Also if you want to decrease the size after an offline coversion you can
&gt; use the 'virt-sparsify' tool from the libguestfs suite on the image if
&gt; the VM is offline.
&gt; 
&gt; [1] You must have at least qemu-4.0 if you want to use fstrim on a
&gt; virtio-blk disk interface, or switch to virtio-scsi based disks. Also
&gt; your disks must have the 'discard="unmap"' option in the &lt;driver&gt;
&gt; element of your vm's XML.
&gt; 
&gt; I've used the above approach to convert few production VMs from LVs to
&gt; qcow2 for moving them to a different host later on. Apart from a sub 1
&gt; minute downtime to restart the VM to switch to virtio-scsi from
&gt; virtio-blk to enable support for trimming the images the conversion was
&gt; then executed while the VM were running. Obviously if you don't require
&gt; this you can easily go with the qemu-img approach.


_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20191130155954</emailId><senderName>Richard M</senderName><senderEmail>richard.info@yahoo.com</senderEmail><timestampReceived>2019-11-30 15:59:54-0400</timestampReceived><subject>[libvirt-users] Domain XML Multicast Tunnel</subject><body>

[Attachment #2 (multipart/alternative)]


Hello
I found under networking in the Domain XML 'Multcast tunnel'.
My question is does anyone know what is the intended use of multicast tunnel \
networking?What are the potential pitfalls of using such a configuration other than \
what's highlighted in the domain xml. eg: can it suffer from throughput issues? Can \
the tunnel be accessed from outside Libvirt? I'm struggling to find any information \
about it. If anyone has any information about it, Or where I can obtain such \
information it would be appreciated. Regards
Richard



 


[Attachment #5 (text/html)]

&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;&lt;div class="yahoo-style-wrap" style="font-family:Helvetica \
Neue, Helvetica, Arial, sans-serif;font-size:16px;"&gt;&lt;div dir="ltr" \
data-setdir="false"&gt;Hello&lt;/div&gt;&lt;div dir="ltr" data-setdir="false"&gt;&lt;br&gt;&lt;/div&gt;&lt;div \
dir="ltr" data-setdir="false"&gt;I found under networking in the Domain XML 'Multcast \
tunnel'.&lt;/div&gt;&lt;div dir="ltr" data-setdir="false"&gt;&lt;br&gt;&lt;/div&gt;&lt;div dir="ltr" \
data-setdir="false"&gt;My question is does anyone know what is the intended use of \
multicast tunnel networking?&lt;/div&gt;&lt;div dir="ltr" data-setdir="false"&gt;What are the \
potential pitfalls of using such a configuration other than what's highlighted in the \
domain xml. eg: can it suffer from throughput issues? Can the tunnel be accessed from \
outside Libvirt?&lt;/div&gt;&lt;div dir="ltr" data-setdir="false"&gt;&lt;br&gt;&lt;/div&gt;&lt;div dir="ltr" \
data-setdir="false"&gt;I'm struggling to find any information about it. If anyone has \
any information about it, Or where I can obtain such information it would be \
appreciated.&lt;/div&gt;&lt;div dir="ltr" data-setdir="false"&gt;&lt;br&gt;&lt;/div&gt;&lt;div dir="ltr" \
data-setdir="false"&gt;Regards&lt;/div&gt;&lt;div dir="ltr" data-setdir="false"&gt;&lt;br&gt;&lt;/div&gt;&lt;div \
dir="ltr" data-setdir="false"&gt;Richard&lt;br&gt;&lt;/div&gt;&lt;div dir="ltr" \
data-setdir="false"&gt;&lt;br&gt;&lt;/div&gt;&lt;div dir="ltr" data-setdir="false"&gt;&lt;br&gt;&lt;/div&gt;&lt;div \
dir="ltr" data-setdir="false"&gt;&lt;br&gt;&lt;/div&gt;&lt;div dir="ltr" data-setdir="false"&gt; \
&lt;br&gt;&lt;/div&gt;&lt;div dir="ltr" data-setdir="false"&gt;&lt;br&gt;&lt;/div&gt;&lt;div dir="ltr" \
data-setdir="false"&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20191002104647</emailId><senderName>Dominik Reusser</senderName><senderEmail>reusser.mb@gmail.com</senderEmail><timestampReceived>2019-10-02 10:46:47-0400</timestampReceived><subject>[libvirt-users] Using encrypted volumes</subject><body>

[Attachment #2 (multipart/alternative)]


I was encouraged [1] to use the storage encryption mechanism of libvirt
[2]. However, it is not clear to me how to generate a corresponding
encrypted volume. Preferably, I would like to use virt-install to arrive at
such an encrypted volume, similar to e.g.

virt-install --connect qemu:///system -n testImage  -r 2048 --os-type=linux
--disk testImage.img,device=disk,bus=virtio,size=8,sparse=true,format=raw
--os-variant debian10 --vnc  --location
ftp://ftp2.de.debian.org/debian/dists/buster/main/installer-amd64/

I already asked a related question on server fault [3], but this is a
better targeted audience. Sorry for double-posting.

[1] https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=933385
[2] https://libvirt.org/formatstorageencryption.html#StorageEncryption
[3]
https://serverfault.com/questions/986488/how-to-enable-volumeencryption-during-virt-install

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;&lt;div&gt;I was encouraged [1] to use the storage encryption mechanism of \
libvirt [2]. However, it is not clear to me how to generate a corresponding encrypted \
volume. Preferably, I would like to use virt-install to arrive at such an encrypted \
volume, similar to e.g.&lt;br&gt;&lt;br&gt;virt-install --connect qemu:///system -n testImage   \
-r 2048 --os-type=linux --disk \
testImage.img,device=disk,bus=virtio,size=8,sparse=true,format=raw --os-variant \
debian10 --vnc   --location   &lt;a \
href="ftp://ftp2.de.debian.org/debian/dists/buster/main/installer-amd64/"&gt;ftp://ftp2.d \
e.debian.org/debian/dists/buster/main/installer-amd64/&lt;/a&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I \
already asked a related question on server fault [3], but this is a better targeted \
audience. Sorry for double-posting.&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;[1] &lt;a \
href="https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=933385"&gt;https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=933385&lt;/a&gt;&lt;/div&gt;&lt;div&gt;[2] \
&lt;a href="https://libvirt.org/formatstorageencryption.html#StorageEncryption"&gt;https://libvirt.org/formatstorageencryption.html#StorageEncryption&lt;/a&gt;&lt;/div&gt;&lt;div&gt;[3] \
&lt;a href="https://serverfault.com/questions/986488/how-to-enable-volumeencryption-durin \
g-virt-install"&gt;https://serverfault.com/questions/986488/how-to-enable-volumeencryption-during-virt-install&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;




_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20191004040327</emailId><senderName>Fred Clift</senderName><senderEmail>fred@clift.org</senderEmail><timestampReceived>2019-10-04 04:03:27-0400</timestampReceived><subject>[libvirt-users] network namespace for multiple overlapping nat networks?</subject><body>

[Attachment #2 (multipart/alternative)]


I have noticed that you can't have multiple separate NAT style libvirt
networks defined with the same private IP blocks.

For example I have this default network:

&lt;network&gt;
  &lt;name&gt;default&lt;/name&gt;
  &lt;uuid&gt;13baf167-02ff-4312-928c-b82ed4df5785&lt;/uuid&gt;
  &lt;forward mode='nat'&gt;
    &lt;nat&gt;
      &lt;port start='1024' end='65535'/&gt;
    &lt;/nat&gt;
  &lt;/forward&gt;
  &lt;bridge name='virbr1' stp='on' delay='0'/&gt;
  &lt;mac address='52:54:00:9c:8f:7c'/&gt;
  &lt;ip address='192.168.122.1' netmask='255.255.255.0'&gt;
    &lt;dhcp&gt;
      &lt;range start='192.168.122.2' end='192.168.122.25'/&gt;
    &lt;/dhcp&gt;
  &lt;/ip&gt;
&lt;/network&gt;

I can't define another nat network that uses the same IP address range.  I
assume this is an implementation limit because of how the iptables rules
are written/work for doing the NAT.


I'd like to have 10 networks with the same default IP address, attached to
10 vms that all run off the same read-only image.  I know that I could use
different ranges and then have my vms use dhcp, and or a few other similar
ways.  I'm limited by the virtual image I want to run (close source OS,
licensed-and-IP-locked software - I have plenty of licences for
instances).

I'd love to replace my 10 instances all with their own IPs on a public
bridge with 10 NAT'd instances all using the same IP each on their own
little network world - so I'd make a separate bridge for each, but of
course it doesn't work.

I have a proof-of-concept setup where I use a routed private network + nat
with the application vm and a small linux vm in pairs.  The linux vms have
a public IP, and a private bridge with a fixed ip to be the default route
of the app vm.  Then the app vm can have a fixed ip, route to a fixed
default route, and get natted to whatever it's buddy router vm's public IP
is.  This works - but then I have 20 vms instead of 10.  They are small and
dont use much cpu, but they use ram... which is somewhat constraining.  And
I have to maintain a router image.  I'm going to settle for this setup If I
have to, but I'd rather not.

So I had the bright idea of somehow routing/natting each vm through a
network namespace.  I could perhaps avoid having to have a whole separate
linux instance just to get a copy of the network stack to do nat with.  I'm
kind of struggling to see how I'd could have each libvirt vm run in it's
own namespace.  I don't think it is possible actually.  But perhaps I could
use an extra set of IPs and an extra bridge/veth-pair to work some kind of
magic.

Anyone out there doing something like this?  Can you help me wrap my head
around how to mix libvirt kvm VMs and network namespaces?

Is there some other simpler way to achieve what I want?

Thanks.

Fred Clift
fred@clift.org

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;I have noticed that you can't have multiple separate NAT style \
libvirt networks defined with the same private IP blocks.&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;For \
example I have this default network:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;network&gt;&lt;br&gt;   \
&lt;name&gt;default&lt;/name&gt;&lt;br&gt;   \
&lt;uuid&gt;13baf167-02ff-4312-928c-b82ed4df5785&lt;/uuid&gt;&lt;br&gt;   &lt;forward \
mode='nat'&gt;&lt;br&gt;      &lt;nat&gt;&lt;br&gt;         &lt;port start='1024' \
end='65535'/&gt;&lt;br&gt;      &lt;/nat&gt;&lt;br&gt;   &lt;/forward&gt;&lt;br&gt;   \
&lt;bridge name='virbr1' stp='on' delay='0'/&gt;&lt;br&gt;   \
&lt;mac address='52:54:00:9c:8f:7c'/&gt;&lt;br&gt;   &lt;ip \
address='192.168.122.1' netmask='255.255.255.0'&gt;&lt;br&gt;      \
&lt;dhcp&gt;&lt;br&gt;         &lt;range start='192.168.122.2' \
end='192.168.122.25'/&gt;&lt;br&gt;      &lt;/dhcp&gt;&lt;br&gt;   \
&lt;/ip&gt;&lt;br&gt;&lt;/network&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I can't define \
another nat network that uses the same IP address range.   I assume this is an \
implementation limit because of how the iptables rules are written/work for doing the \
NAT.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I'd like to have 10 networks with \
the same default IP address, attached to 10 vms that all run off the same read-only \
image.   I know that I could use different ranges and then have my vms use dhcp, and \
or a few other similar ways.   I'm limited by the virtual image I want to run \
(close source OS, licensed-and-IP-locked software - I have plenty of licences for \
instances).     &lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I'd love to replace my 10 instances all \
with their own IPs on a public bridge with 10 NAT'd instances all using the same \
IP each on their own little network world - so I'd make a separate bridge for \
each, but of course it doesn't work.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I have a \
proof-of-concept setup where I use a routed private network + nat with the \
application vm and a small linux vm in pairs.   The linux vms have a public IP, and a \
private bridge with a fixed ip to be the default route of the app vm.   Then the app \
vm can have a fixed ip, route to a fixed default route, and get natted to whatever \
it's buddy router vm's public IP is.   This works - but then I have 20 vms \
instead of 10.   They are small and dont use much cpu, but they use ram... which is \
somewhat constraining.   And I have to maintain a router image.   I'm going to \
settle for this setup If I have to, but I'd rather \
not.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;So I had the bright idea of somehow routing/natting \
each vm through a network namespace.   I could perhaps avoid having to have a whole \
separate linux instance just to get a copy of the network stack to do nat with.   \
I'm kind of struggling to see how I'd could have each libvirt vm run in \
it's own namespace.   I don't think it is possible actually.   But perhaps I \
could use an extra set of IPs and an extra bridge/veth-pair to work some kind of \
magic.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Anyone out there doing something like this?   Can you \
help me wrap my head around how to mix libvirt kvm VMs and network \
namespaces?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Is there some other simpler way to achieve what \
I want?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Fred \
Clift&lt;/div&gt;&lt;div&gt;&lt;a href="mailto:fred@clift.org"&gt;fred@clift.org&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20191004082359</emailId><senderName>Andrea Bolognani</senderName><senderEmail>abologna@redhat.com</senderEmail><timestampReceived>2019-10-04 08:23:59-0400</timestampReceived><subject>Re: [libvirt-users] Internal error reported by libvirt while creating a VM</subject><body>

Re-added the list. Please *do not* drop the libvirt-users mailing
list from the recipients again!

On Thu, 2019-10-03 at 16:42 -0400, Ajay Kumar wrote:
&gt; Hi Andrea, 
&gt; 
&gt; Thank you for your help,
&gt; 
&gt; The above issues are addressed while reinstalling libvirt 4.0.0. Currently, I could \
&gt; create a VMs on libvirt. 
&gt; I have another issue while configuring/editing win10.xml file.
&gt; After edit or insert of few lines in win10.XML file using virsh i.e at      \
&gt; /etc/libvirt/qem$ virsh edit win10 

Saying that you changed "few lines" is not at all useful: if you
hope to get any help from the list, you'll have to share the *exact*
changes you made each time and the full XML configuration that
resulted from them.

&gt; I am getting a below error. 
&gt; @ubuntu-kvm3:/etc/libvirt/qemu$ virsh edit win10
&gt; error: internal error: Child process (LC_ALL=C \
&gt; PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin \
&gt; /usr/local/bin/qemu-system-x86_64 -help) unexpected exit status 126: libvirt:  \
&gt; error : cannot execute binary /usr/local/bin/qemu-system-x86_64: Permission denied 
&gt; I understand that this could be the problem of AppArmor security feature it doesn't \
&gt; allow new binary such as (qemu-system-x86_64) to execute  
&gt; Later I have followed the below link to address 
&gt; [  https://www.reddit.com/r/VFIO/comments/9pi2cd/how_to_set_up_qemu_30_on_ubuntu_1804/
&gt;  6. Create AppArmor rules so libvirt can use the binary  ]
&gt; 
&gt; here i have added few lines in 2 files as per the procedure. later when i restart \
&gt; apparmor I got the below error

Again, saying that you added "few lines" is not helpful because we
have no idea what those lines look like, so it's simply impossible
for anyone to figure out the root cause of the error message you're
seeing. Please share the *exact* changes you made.

-- 
Andrea Bolognani / Red Hat / Virtualization

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20191007082957</emailId><senderName>Andrea Bolognani</senderName><senderEmail>abologna@redhat.com</senderEmail><timestampReceived>2019-10-07 08:29:57-0400</timestampReceived><subject>Re: [libvirt-users] Error validating install location: Distro 'rhel8' does not exist in our dictiona</subject><body>

On Mon, 2019-10-07 at 10:15 +0200, Martin Kletzander wrote:
&gt; On Sun, Oct 06, 2019 at 10:54:33AM +0530, Kaushal Shriyan wrote:
&gt; &gt; On Sat, Oct 5, 2019 at 7:27 PM Oliver Dzombic &lt;info@layer7.net&gt; wrote:
&gt; &gt; &gt; if you run on a shell the command:
&gt; &gt; &gt; 
&gt; &gt; &gt; osinfo-query os
&gt; &gt; &gt; 
&gt; &gt; &gt; you will see that its:
&gt; &gt; &gt; 
&gt; &gt; &gt; rhl8.0               | Red Hat Linux 8.0
&gt; &gt; &gt;   | 8.0      | http://redhat.com/rhl/8.0
&gt; 
&gt; This is Red Hat Linux 8 with a release date of 30 September 2002 [1] and not Red
&gt; Hat Enterprise Linux.  You are not using any new devices/settings.
&gt; 
&gt; Instead you should probably use rhel8.0 or, even better, since you are using
&gt; centos, the centos release.  However that one does not exist in the osinfo db
&gt; yet due to the new style of releases that happened there and we need to figure
&gt; out how to properly represent it in the osinfo data.
&gt; 
&gt; If ou re not seeing rhel8-unknown or rhel8.0 you should update your osinfo
&gt; database.  Either update you package or you can also use `osinfo-db-import
&gt; --latest` to update it locally for your user.

Alternatively, if updating the osinfo database through your distro's
package manager is not enough to get the CentOS 8.0 OS variant and
you don't want to replace it with the upstream one,

  --os-variant centos7.0

should also work in a pinch.

-- 
Andrea Bolognani / Red Hat / Virtualization

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20191005124927</emailId><senderName>Kaushal Shriyan</senderName><senderEmail>kaushalshriyan@gmail.com</senderEmail><timestampReceived>2019-10-05 12:49:27-0400</timestampReceived><subject>[libvirt-users] Error validating install location: Distro 'rhel8' does not exist in our dictionary</subject><body>

[Attachment #2 (multipart/alternative)]


Hi,

I am running the below command to spawn CentOS8 based Virtual Machines
using KVM based technology

virt-install --name=centos8
&gt; --file=/linuxkvmguestosdisk/var/lib/libvirt/images/centos8 --file-size=100
&gt; --nonsparse --vcpus=2 --ram=8096 --network=bridge:br0 --os-type=linux
&gt; --os-variant=rhel8 --graphics none
&gt; --location=/linuxkvmguestosdisk/var/lib/libvirt/isos/CentOS-8-x86_64-1905-dvd1.iso
&gt; --extra-args="console=ttyS0"
&gt; ERROR    Error validating install location: Distro 'rhel8' does not exist
&gt; in our dictionary


Any clue and i look forward to hearing from you. Thanks in advance.

Best Regards,

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;Hi,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I am running the below command to spawn CentOS8 \
based Virtual Machines using KVM based technology&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;blockquote \
class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid \
rgb(204,204,204);padding-left:1ex"&gt;virt-install --name=centos8 \
--file=/linuxkvmguestosdisk/var/lib/libvirt/images/centos8 --file-size=100 \
--nonsparse --vcpus=2 --ram=8096 --network=bridge:br0 --os-type=linux \
--os-variant=rhel8 --graphics none \
--location=/linuxkvmguestosdisk/var/lib/libvirt/isos/CentOS-8-x86_64-1905-dvd1.iso \
--extra-args="console=ttyS0"&lt;br&gt;&lt;font color="#ff0000"&gt;ERROR      Error \
validating install location: Distro 'rhel8' does not exist in our \
dictionary&lt;/font&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Any clue and i look forward to \
hearing from you. Thanks in  advance.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Best \
Regards,&lt;/div&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20191005143219</emailId><senderName>"procmem () riseup ! net"</senderName><senderEmail>procmem@riseup.net</senderEmail><timestampReceived>2019-10-05 14:32:19-0400</timestampReceived><subject>[libvirt-users] Emulated TPM doesn't work on Debian Buster</subject><body>

Hi. I am very interested in the security properties a totally open TPM
can give our users  - its use as a universal smartcard to protect all
types of keys. When adding the virtual 1.2 or 2.0 TPM I get the vague
error below. OS is Debian stable with standard packages.


Error starting domain: Unable to find 'swtpm' binary in $PATH: No such
file or directory

Traceback (most recent call last):
  File "/usr/share/virt-manager/virtManager/asyncjob.py", line 75, in
cb_wrapper
    callback(asyncjob, *args, **kwargs)
  File "/usr/share/virt-manager/virtManager/asyncjob.py", line 111, in tmpcb
    callback(*args, **kwargs)
  File "/usr/share/virt-manager/virtManager/libvirtobject.py", line 66,
in newfn
    ret = fn(self, *args, **kwargs)
  File "/usr/share/virt-manager/virtManager/domain.py", line 1400, in
startup
    self._backend.create()
  File "/usr/lib/python3/dist-packages/libvirt.py", line 1080, in create
    if ret == -1: raise libvirtError ('virDomainCreate() failed', dom=self)
libvirt.libvirtError: Unable to find 'swtpm' binary in $PATH: No such
file or directory



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20191008163308</emailId><senderName>Michael Lipp</senderName><senderEmail>mnl@mnl.de</senderEmail><timestampReceived>2019-10-08 16:33:08-0400</timestampReceived><subject>[libvirt-users] hidden state='on' not working</subject><body>

Hi,

I have set

    &lt;kvm&gt;
      &lt;hidden state='on'/&gt;
    &lt;/kvm&gt;

in my configuration file. But looking at the command line, I see

-cpu ...,hypervisor=on,...

Should the setting result in hypervisor=off (or -hypervisor)

 - Michael


_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20191010151557</emailId><senderName>gokul cg</senderName><senderEmail>gokuljnpr@gmail.com</senderEmail><timestampReceived>2019-10-10 15:15:57-0400</timestampReceived><subject>[libvirt-users] Fwd: Libvirt-QEMU : Multiplex the output from qemu's serial port to a pty as well as</subject><body>

[Attachment #2 (multipart/alternative)]


Hi Folks ,

As per https://libvirt.org/formatdomain.html#elementsConsole
Regardless of the type, character devices can have an optional log file
associated with them.
Whether the lgging functionality is same as mapping device to file ?
Whether libvirt xml syntax below both 1 and 2 are same ?

    1)
    &lt;serial type='pty'&gt;
      &lt;log
file='/var/lib/nova/instances/7151c8b7-1ea5-4701-bb79-b482d9e253b8/console.log'
append='off'/&gt;
      &lt;target port='0'/&gt;
    &lt;/serial&gt;

    2)
    &lt;serial type='pty'&gt;
      &lt;source path='/tmp/serial.log'/&gt;
      &lt;target port='0'/&gt;
    &lt;/serial&gt;

    is it possible to multiplex the output from qemu's serial port  to a
pty as well as a file (basically redirect console to file as well as pty
device)?

Regards
Gokul

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;Hi Folks ,&lt;br&gt;&lt;div class="gmail_quote"&gt;&lt;div dir="ltr"&gt;&lt;div \
dir="ltr"&gt;&lt;div dir="ltr"&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;As per  &lt;a \
href="https://libvirt.org/formatdomain.html#elementsConsole" \
target="_blank"&gt;https://libvirt.org/formatdomain.html#elementsConsole&lt;/a&gt;  \
&lt;/div&gt;&lt;div&gt;Regardless of the type, character devices can have an optional log file \
associated with them.  &lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;Whether the lgging functionality is same \
as mapping device to file ?&lt;/div&gt;&lt;div&gt;Whether libvirt xml syntax below both 1 and 2 \
are same ?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;      1)&lt;/div&gt;&lt;div&gt;      &lt;serial \
type='pty'&gt;&lt;/div&gt;&lt;div&gt;         &lt;log \
file='/var/lib/nova/instances/7151c8b7-1ea5-4701-bb79-b482d9e253b8/console.log' \
append='off'/&gt;&lt;/div&gt;&lt;div&gt;         &lt;target \
port='0'/&gt;&lt;/div&gt;&lt;div&gt;      &lt;/serial&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;      \
2)&lt;/div&gt;&lt;div&gt;      &lt;serial type='pty'&gt;&lt;/div&gt;&lt;div&gt;         &lt;source \
path='/tmp/serial.log'/&gt;&lt;/div&gt;&lt;div&gt;         &lt;target \
port='0'/&gt;&lt;/div&gt;&lt;div&gt;      &lt;/serial&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;      \
is it possible to multiplex the output from qemu's serial port   to a pty as well \
as a file (basically redirect console to file as well as pty \
device)?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Regards&lt;/div&gt;&lt;div&gt;Gokul&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;
 &lt;/div&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20191008170314</emailId><senderName>Cole Robinson</senderName><senderEmail>crobinso@redhat.com</senderEmail><timestampReceived>2019-10-08 17:03:14-0400</timestampReceived><subject>Re: [libvirt-users] hidden state='on' not working</subject><body>

On 10/8/19 12:33 PM, Michael Lipp wrote:
&gt; Hi,
&gt; 
&gt; I have set
&gt; 
&gt;      &lt;kvm&gt;
&gt;        &lt;hidden state='on'/&gt;
&gt;      &lt;/kvm&gt;
&gt; 

That adds -cpu ...,kvm=off

&gt; in my configuration file. But looking at the command line, I see
&gt; 
&gt; -cpu ...,hypervisor=on,...
&gt; 

If you want hypervisor=off, want to add this to your &lt;cpu&gt; block

   &lt;feature policy='disable' name='hypervisor'/&gt;

- Cole

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20191007073149</emailId><senderName>Andrea Bolognani</senderName><senderEmail>abologna@redhat.com</senderEmail><timestampReceived>2019-10-07 07:31:49-0400</timestampReceived><subject>Re: [libvirt-users] Emulated TPM doesn't work on Debian Buster</subject><body>

On Sat, 2019-10-05 at 14:32 +0000, procmem@riseup.net wrote:
&gt; Hi. I am very interested in the security properties a totally open TPM
&gt; can give our users  - its use as a universal smartcard to protect all
&gt; types of keys. When adding the virtual 1.2 or 2.0 TPM I get the vague
&gt; error below. OS is Debian stable with standard packages.
&gt; 
&gt; 
&gt; Error starting domain: Unable to find 'swtpm' binary in $PATH: No such
&gt; file or directory

I wouldn't call this error message vague at all: it tells you exactly
what the problem is, namely that libvirt needs the 'swtpm' command
for your configuration but the latter is not available :)

Unfortunately it looks like swtpm it's not packaged for Debian, so
I'm afraid the solution is not just a simple apt-get away :(

-- 
Andrea Bolognani / Red Hat / Virtualization

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20191009224830</emailId><senderName>Cole Robinson</senderName><senderEmail>crobinso@redhat.com</senderEmail><timestampReceived>2019-10-09 22:48:30-0400</timestampReceived><subject>Re: [libvirt-users] [libvirt] Add support for vhost-user-scsi-pci/vhost-user-blk-pci</subject><body>

Sorry for the late reply, and thanks Jano for pointing out elsewhere 
that this didn't receive a response.

On 8/12/19 5:56 AM, Li Feng wrote:
&gt; Hi Guys,
&gt; 
&gt; And I want to add the vhost-user-scsi-pci/vhost-user-blk-pci support
&gt; for libvirt.
&gt; 
&gt; The usage in qemu like this:
&gt; 
&gt; Vhost-SCSI
&gt; -chardev socket,id=char0,path=/var/tmp/vhost.0
&gt; -device vhost-user-scsi-pci,id=scsi0,chardev=char0
&gt; Vhost-BLK
&gt; -chardev socket,id=char1,path=/var/tmp/vhost.1
&gt; -device vhost-user-blk-pci,id=blk0,chardev=char1
&gt; 

Indeed that matches what I see for the qemu commits too:

https://git.qemu.org/?p=qemu.git;a=commit;h=00343e4b54b
https://git.qemu.org/?p=qemu.git;a=commit;h=f12c1ebddf7

&gt; What type should I add for libvirt.
&gt; Type1:
&gt;      &lt;hostdev mode='subsystem' type='vhost-user'&gt;
&gt;          &lt;source protocol='vhost-user-scsi' path='/tmp/vhost-scsi.sock'&gt;&lt;/source&gt;
&gt;          &lt;alias name="vhost-user-scsi-disk1"/&gt;
&gt;      &lt;/hostdev&gt;
&gt; 
&gt; 
&gt; Type2:
&gt; 
&gt;      &lt;disk type='network' device='disk'&gt;
&gt;        &lt;driver name='qemu' type='raw' cache='none' io='native'/&gt;
&gt;        &lt;source protocol='vhost-user' path='/tmp/vhost-scsi.sock'&gt;
&gt;        &lt;/source&gt;
&gt;        &lt;target dev='sdb' bus='vhost-user-scsi'/&gt;
&gt;        &lt;boot order='3'/&gt;
&gt;        &lt;alias name='scsi0-0-0-1'/&gt;
&gt;        &lt;address type='drive' controller='0' bus='0' target='0' unit='1'/&gt;
&gt;      &lt;/disk&gt;
&gt; 
&gt; 
&gt;      &lt;disk type='network' device='disk'&gt;
&gt;        &lt;driver name='qemu' type='raw' cache='none' io='native'/&gt;
&gt;        &lt;source protocol='vhost-user' path='/tmp/vhost-blk.sock'&gt;
&gt;        &lt;/source&gt;
&gt;        &lt;target dev='vda' bus='vhost-user-blk'/&gt;
&gt;        &lt;boot order='1'/&gt;
&gt;        &lt;alias name='virtio-disk0'/&gt;
&gt;        &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x07'
&gt; function='0x0'/&gt;
&gt;      &lt;/disk&gt;
&gt;

I think wiring this into &lt;disk&gt; makes more sense. &lt;hostdev&gt; is really an 
abstraction for assigning a (typically) physical host device to the VM, 
so it handles things like hiding a PCI device from the host, and passing 
that exact device to the VM.

In the vhost-user-scsi/blk case, the host device is just a special 
process running on the other side of a socket, and the device 
represented to the guest is a typical virtio device. So to me it makes 
more sense as a &lt;disk&gt; with a &lt;source&gt; that points at that socket.

target bus=virtio vs bus=scsi is already used to distinguish between 
virtio-blk and virtio-scsi, so I think we can keep that bit as is, with 
the &lt;address type=drive|pci&gt; to match. We just need to differentiate 
between plain virtio and vhost-user

network devices already have vhostuser support:

   &lt;interface type='vhostuser'&gt;
     &lt;source type='unix' path='/tmp/vhost1.sock' mode='server|client'/&gt;
     &lt;model type='virtio'/&gt;
   &lt;/interface&gt;

Internally that &lt;source&gt; is a virDomainChrSourceDefPtr which is our 
internal representation of a chardev. So I think something akin to this 
is the way to go. It will likely require updating a LOT of places in the 
code that check disk type= field, probably most places that care about 
whether type=NETWORK or type=!NETWORK will need to be mirrored for the 
new type.

&lt;disk type='vhostuser' device='disk'&gt;
   &lt;source type='unix' path='/path/to/vhost-user-blk.sock' mode='client'/&gt;
   &lt;target dev='vda' bus='virtio'/&gt;
&lt;/disk&gt;

&lt;disk type='vhostuser' device='disk'&gt;
   &lt;source type='unix' path='/path/to/vhost-user-scsi.sock' mode='client'/&gt;
   &lt;target dev='sda' bus='scsi'/&gt;
&lt;/disk&gt;

- Cole

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20191010134024</emailId><senderName>Marko Horn</senderName><senderEmail>marko.horn@zbfmail.de</senderEmail><timestampReceived>2019-10-10 13:40:24-0400</timestampReceived><subject>[libvirt-users] create virtual network fails with virt-manager</subject><body>



hello list,

creatig a virtual network via virt-manager fails.
gentoo linux vanilla-sources 5.3.1
virt-manager 2.2.1
qemu 4.0
libvirt 5.5.0


the error output of

Error creating virtual network: internal error: Failed to apply firewall 
rules /sbin/iptables -w --table filter --insert LIBVIRT_INP 
--in-interface virbr1 --protocol tcp --destination-port 67 --jump 
ACCEPT: iptables: No chain/target/match by that name.


Traceback (most recent call last):
   File "/usr/share/virt-manager/virtManager/asyncjob.py", line 75, in 
cb_wrapper
     callback(asyncjob, *args, **kwargs)
   File "/usr/share/virt-manager/virtManager/createnet.py", line 472, in 
_async_net_create
     netobj.create()
   File "/usr/lib64/python3.6/site-packages/libvirt.py", line 2993, in 
create
     if ret == -1: raise libvirtError ('virNetworkCreate() failed', 
net=self)
libvirt.libvirtError: internal error: Failed to apply firewall rules 
/sbin/iptables -w --table filter --insert LIBVIRT_INP --in-interface 
virbr1 --protocol tcp --destination-port 67 --jump ACCEPT: iptables: No 
chain/target/match by that name.



/sbin/iptables exists

any ideas?

kind regards
m@rko



-- 
zbfmail - Mittendrin statt nur Datei!
           Datei sein ist alles!

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20191011075847</emailId><senderName>Martin Kletzander</senderName><senderEmail>mkletzan@redhat.com</senderEmail><timestampReceived>2019-10-11 07:58:47-0400</timestampReceived><subject>Re: [libvirt-users] create virtual network fails with virt-manager</subject><body>

[Attachment #2 (multipart/signed)]


On Thu, Oct 10, 2019 at 03:40:24PM +0200, Marko Horn wrote:
&gt;
&gt;
&gt;hello list,
&gt;
&gt;creatig a virtual network via virt-manager fails.
&gt;gentoo linux vanilla-sources 5.3.1
&gt;virt-manager 2.2.1
&gt;qemu 4.0
&gt;libvirt 5.5.0
&gt;

Please try newer libvirt.  There were some fixes related to iptables/nf_tables
in libvirt in recent releases, so it might just solve that for you.

&gt;
&gt;the error output of
&gt;
&gt;Error creating virtual network: internal error: Failed to apply firewall
&gt;rules /sbin/iptables -w --table filter --insert LIBVIRT_INP
&gt;--in-interface virbr1 --protocol tcp --destination-port 67 --jump
&gt;ACCEPT: iptables: No chain/target/match by that name.
&gt;
&gt;
&gt;Traceback (most recent call last):
&gt;   File "/usr/share/virt-manager/virtManager/asyncjob.py", line 75, in
&gt;cb_wrapper
&gt;     callback(asyncjob, *args, **kwargs)
&gt;   File "/usr/share/virt-manager/virtManager/createnet.py", line 472, in
&gt;_async_net_create
&gt;     netobj.create()
&gt;   File "/usr/lib64/python3.6/site-packages/libvirt.py", line 2993, in
&gt;create
&gt;     if ret == -1: raise libvirtError ('virNetworkCreate() failed',
&gt;net=self)
&gt;libvirt.libvirtError: internal error: Failed to apply firewall rules
&gt;/sbin/iptables -w --table filter --insert LIBVIRT_INP --in-interface
&gt;virbr1 --protocol tcp --destination-port 67 --jump ACCEPT: iptables: No
&gt;chain/target/match by that name.
&gt;
&gt;
&gt;
&gt;/sbin/iptables exists
&gt;
&gt;any ideas?
&gt;
&gt;kind regards
&gt;m@rko
&gt;
&gt;
&gt;
&gt;-- 
&gt;zbfmail - Mittendrin statt nur Datei!
&gt;           Datei sein ist alles!
&gt;
&gt;_______________________________________________
&gt;libvirt-users mailing list
&gt;libvirt-users@redhat.com
&gt;https://www.redhat.com/mailman/listinfo/libvirt-users

["signature.asc" (application/pgp-signature)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20191017092612</emailId><senderName>Roman Mohr</senderName><senderEmail>rmohr@redhat.com</senderEmail><timestampReceived>2019-10-17 09:26:12-0400</timestampReceived><subject>[libvirt-users] Transient permission denied errors when sending audit logs</subject><body>

[Attachment #2 (multipart/alternative)]


Hi,

In kubevirt we are running into a strange permission problem on
libvirt-5.0. We see transient "Permission Denied" errors when "virAuditSend"
wants to send an audit log. [1] shows the logs of one of these containers.
Here an example:

{"component":"virt-launcher","level":"warning","msg":"Failed to send audit
message virt=kvm
vm=\"kubevirt-test-default_testvmit2pqrkrlrwbhptcjcs4n67jn6pjqvmtd7pkrpdmkrl5sldzs4rxr9zdg8m45jxz\"
 uuid=56a33283-f6d7-4002-b188-1fed83186545 vm-ctx=+107:+107
img-ctx=+107:+107 model=dac: Permission
denied","pos":"virAuditSend:141","subcomponent":"libvirt","thread":"30","timestamp":"2019-10-08T23:58:40.651000Z"}


We recently switched in kubevirt to a dedicated selinux policy and remove
the general "privileged" flag from the containers where we run libvirt in.
This is very likely related to it, but we can't make sense out of it,
because:

 * It randomly affects one out of a few hundred containers which we start
 * It is not bound to a specific node
 * It is only transient on that container. After a few denials libvirt can
just continue.
 * Sometimes it is accompanied with a transient "Permission denied" on
/dev/null from our code in that container (so not from something which
libvirt tries to do).

Has someone seen something like this before in different environments?

Best Regards,
Roman

[1]
https://storage.googleapis.com/kubevirt-prow/pr-logs/pull/kubevirt_kubevirt/2623/pull- \
kubevirt-e2e-os-3.11.0-crio/1181668456550895616/artifacts/pods/1_kubevirt-test-default_virt-launcher-testvmit2pqrkrlrwbhptcjcs4n67jn6pjqvmtd7pkrp75sjh-compute.log



[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;Hi,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;In kubevirt we are running into a strange \
permission problem on libvirt-5.0. We see transient "Permission Denied" \
errors when "&lt;span \
style="color:rgb(0,0,0);white-space:pre-wrap"&gt;virAuditSend" wants to send an \
audit log. [1] shows the logs of one of these containers. Here an \
example:&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span \
style="color:rgb(0,0,0);white-space:pre-wrap"&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;{"component&amp;q \
uot;:"virt-launcher","level":"warning","msg":"Failed \
to send audit message virt=kvm \
vm=\"kubevirt-test-default_testvmit2pqrkrlrwbhptcjcs4n67jn6pjqvmtd7pkrpdmkrl5sldzs4rxr9zdg8m45jxz\" \
uuid=56a33283-f6d7-4002-b188-1fed83186545 vm-ctx=+107:+107 img-ctx=+107:+107 \
model=dac: Permission \
denied","pos":"virAuditSend:141","subcomponent":&amp;qu \
ot;libvirt","thread":"30","timestamp":"2019-10-08T23:58:40.651000Z"}&lt;span \
style="color:rgb(0,0,0);white-space:pre-wrap"&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;We \
recently switched in kubevirt to a dedicated selinux policy and remove the general \
"privileged" flag  from the containers where we run libvirt in. This is \
very likely related to it, but we can't make sense out of it, \
because:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;  * It randomly affects one out of a few hundred \
containers which we start&lt;br&gt;&lt;/div&gt;&lt;div&gt;  * It is not bound to a specific \
node&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;  * It is only transient on that container. After a few \
denials libvirt can just continue.&lt;/div&gt;&lt;div&gt;  * Sometimes it is accompanied with a \
transient "Permission denied" on /dev/null from our code in that container \
(so not from something which libvirt tries to do).&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Has \
someone seen something like this before in different \
environments?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Best \
Regards,&lt;/div&gt;&lt;div&gt;Roman&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;[1]  &lt;a \
href="https://storage.googleapis.com/kubevirt-prow/pr-logs/pull/kubevirt_kubevirt/2623 \
/pull-kubevirt-e2e-os-3.11.0-crio/1181668456550895616/artifacts/pods/1_kubevirt-test-d \
efault_virt-launcher-testvmit2pqrkrlrwbhptcjcs4n67jn6pjqvmtd7pkrp75sjh-compute.log"&gt;ht \
tps://storage.googleapis.com/kubevirt-prow/pr-logs/pull/kubevirt_kubevirt/2623/pull-ku \
bevirt-e2e-os-3.11.0-crio/1181668456550895616/artifacts/pods/1_kubevirt-test-default_v \
irt-launcher-testvmit2pqrkrlrwbhptcjcs4n67jn6pjqvmtd7pkrp75sjh-compute.log&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;




_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20191018191223</emailId><senderName>Jesus</senderName><senderEmail>observer1@hotmail.es</senderEmail><timestampReceived>2019-10-18 19:12:23-0400</timestampReceived><subject>[libvirt-users] X11 apps on lxc</subject><body>

Hi
How can I run X11 apps on the local X11 using libvirt lxc?
I already had this runing on centos 7 but I upgraded to centos 8 (I rebuild=
 libvirt) and the socket is not in the /tmp/.X11-unix/ folder of the vm any=
 more.
Can somebody help with this?
Thanks!!

[Attachment #3 (text/html)]

&lt;html&gt;
&lt;head&gt;
&lt;meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"&gt;
&lt;style type="text/css" style="display:none;"&gt; P {margin-top:0;margin-bottom:0;} \
&lt;/style&gt; &lt;/head&gt;
&lt;body dir="ltr"&gt;
&lt;div style="font-family: Calibri, Helvetica, sans-serif; font-size: 12pt; color: \
rgb(0, 0, 0);"&gt; Hi&lt;/div&gt;
&lt;div style="font-family: Calibri, Helvetica, sans-serif; font-size: 12pt; color: \
rgb(0, 0, 0);"&gt; How can I run X11 apps on the local X11 using libvirt lxc?&lt;/div&gt;
&lt;div style="font-family: Calibri, Helvetica, sans-serif; font-size: 12pt; color: \
rgb(0, 0, 0);"&gt; I already had this runing on centos 7 but I upgraded to centos 8 (I \
rebuild libvirt) and the socket is not in the /tmp/.X11-unix/ folder of the vm any \
more.&lt;/div&gt; &lt;div style="font-family: Calibri, Helvetica, sans-serif; font-size: 12pt; \
color: rgb(0, 0, 0);"&gt; Can somebody help with this?&lt;/div&gt;
&lt;div style="font-family: Calibri, Helvetica, sans-serif; font-size: 12pt; color: \
rgb(0, 0, 0);"&gt; Thanks!!&lt;br&gt;
&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
--===============8279613486004820893==--


</body></email><email><emailId>20191017202601</emailId><senderName>"Marc Roos"</senderName><senderEmail>m.roos@f1-outsourcing.eu</senderEmail><timestampReceived>2019-10-17 20:26:01-0400</timestampReceived><subject>[libvirt-users] Live migrate + change interface name</subject><body>


Is it possible to do a live migrate of a guest, having on the from host 
a source_device=eth2 and to host a source_dev=eth1?





_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20191018203940</emailId><senderName>"Phill. Whiteside"</senderName><senderEmail>phillwuk@gmail.com</senderEmail><timestampReceived>2019-10-18 20:39:40-0400</timestampReceived><subject>[libvirt-users] 32 bit support</subject><body>

[Attachment #2 (multipart/alternative)]


Hi good people,

I've got a bit of a weird issue. I'm using QEMU emulator version
2.11.1(Debian 1:2.11+dfsg-1ubuntu7.19) And after some considerable time of
not using it for 32bit installations I now find that it can no longer
install some older 32 bit installations (e.g.
https://phillw.net/isos/lubuntu/natty/ ) The CPU goes to 100% and then
after a while it just stops (I'm using virt-manager v1.5.1) I'm running
lubuntu 18.04 (64 bit) on an i7 chipset that runs 64 bit debian / centos
and MS server 2019 KVM instances via virt-manager without problems.

Any pointers would be appreciated,

Phill.

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;Hi good people,  &lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I've got a bit of a weird \
issue. I'm using QEMU emulator version 2.11.1(Debian 1:2.11+dfsg-1ubuntu7.19)  \
And after some considerable time of not using it for 32bit installations I now find \
that it can no longer install some older 32 bit installations (e.g. &lt;a \
href="https://phillw.net/isos/lubuntu/natty/"&gt;https://phillw.net/isos/lubuntu/natty/&lt;/a&gt; \
) The CPU goes to 100% and then after a while it just stops (I'm using \
virt-manager v1.5.1)  I'm running lubuntu 18.04 (64 bit) on an i7 chipset that \
runs 64 bit debian / centos and MS server 2019 KVM instances via virt-manager without \
problems.  &lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Any pointers would be \
appreciated,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Phill.&lt;/div&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20191023044350</emailId><senderName>"Paul O'Rorke"</senderName><senderEmail>paul@tracker-software.com</senderEmail><timestampReceived>2019-10-23 04:43:50-0400</timestampReceived><subject>[libvirt-users] Confused setting up a "Virtual Server Hosting" config</subject><body>

[Attachment #2 (multipart/alternative)]


Hi list,

Can anyone advise me on the correct/best set up for Virtual Server Hosting?

I have a guest in my server room wish to migrate to dedicated server I 
rented in an offsite in a data centre.  I rented a box with one NIC and 
one public IP.  I installed KVM on it and a guest. (both Ubuntu 18.04 
LTS server edition).  I am struggling to get the networking right.

Essentially I want the "Virtual Server Hosting" config mentioned here:
https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/6/html-single/virtualization_administration_guide/index#sub-sect-routed-mode \
 &lt;https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/6/html-single/virtualization_administration_guide/index#sect-attch-nic-physdev&gt;


I have not had any luck setting that up.  It is listed in the "Routed" 
section but the graphic says the virtual switch should be in bridged mode.

I also tried using macvtap, and since I have only one guest was 
expecting to be able to just use the host IP but it looks like the data 
centre have restricted packets to the MAC address of the host NIC.  When 
set up I can ping the public IP (it is both eh host and the guest?) but 
not their gateway.  Should a macvtap not be presenting the MAC address 
of the host NIC to the router and thus allowing packets from the guest?

I clearly have a lack of understanding of how this is working and how it 
is meant to work.  When I tried the same thing on mt hardware/network I 
can create myltiple guests that all use the macvtap interface and I have 
no problems getting connectivity to the outside world.

Before I approach the data centre about this I want to be sure I 
understand what I am doing.   I ultimately want to host a mail server 
and several different web servers as guests all behind this one host.  I 
would alias their public IPs to the host NIC and use IPtables to route 
traffic based on destination IP.

Does that make sense? Can anyone suggest the right way to achieve this?

Please and thanks.

*Paul O'Rorke*
*Tracker Software Products (Canada) Limited *
www.tracker-software.com &lt;http://www.tracker-software.com/&gt;
Tel: +1 (250) 324 1621
Fax: +1 (250) 324 1623

&lt;http://www.tracker-software.com/&gt;

Support:
http://www.tracker-software.com/support
Download latest Releases
http://www.tracker-software.com/downloads/


[Attachment #5 (text/html)]

&lt;html&gt;
  &lt;head&gt;
    &lt;meta http-equiv="Content-Type" content="text/html;
      charset=windows-1252"&gt;
  &lt;/head&gt;
  &lt;body text="#000000" bgcolor="#FFFFFF"&gt;
    &lt;p&gt;Hi list,&lt;/p&gt;
    &lt;p&gt;Can anyone advise me on the correct/best set up for Virtual
      Server Hosting?&lt;/p&gt;
    &lt;p&gt;I have a guest in my server room wish to migrate to dedicated
      server I rented in an offsite in a data centre.  I rented a box
      with one NIC and one public IP.  I installed KVM on it and a
      guest. (both Ubuntu 18.04 LTS server edition).  I am struggling to
      get the networking right.&lt;/p&gt;
    &lt;p&gt;Essentially I want the "Virtual Server Hosting" config mentioned
      here: &lt;br&gt;
      &lt;a moz-do-not-send="true"
href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/6/html-si \
ngle/virtualization_administration_guide/index#sect-attch-nic-physdev"&gt;https://access. \
redhat.com/documentation/en-us/red_hat_enterprise_linux/6/html-single/virtualization_administration_guide/index#sub-sect-routed-mode&lt;/a&gt;&lt;/p&gt;
  &lt;p&gt;I have not had any luck setting that up.  It is listed in the
      "Routed" section but the graphic says the virtual switch should be
      in bridged mode.  &lt;br&gt;
    &lt;/p&gt;
    &lt;p&gt;I also tried using macvtap, and since I have only one guest was
      expecting to be able to just use the host IP but it looks like the
      data centre have restricted packets to the MAC address of the host
      NIC.  When set up I can ping the public IP (it is both eh host and
      the guest?) but not their gateway.  Should a macvtap not be
      presenting the MAC address of the host NIC to the router and thus
      allowing packets from the guest?&lt;/p&gt;
    &lt;p&gt;I clearly have a lack of understanding of how this is working and
      how it is meant to work.  When I tried the same thing on mt
      hardware/network I can create myltiple guests that all use the
      macvtap interface and I have no problems getting connectivity to
      the outside world.&lt;/p&gt;
    &lt;p&gt;Before I approach the data centre about this I want to be sure I
      understand what I am doing.   I ultimately want to host a mail
      server and several different web servers as guests all behind this
      one host.  I would alias their public IPs to the host NIC and use
      IPtables to route traffic based on destination IP.&lt;br&gt;
    &lt;/p&gt;
    &lt;p&gt;Does that make sense? Can anyone suggest the right way to achieve
      this?&lt;br&gt;
    &lt;/p&gt;
    &lt;p&gt;Please and thanks.&lt;/p&gt;
    &lt;div class="moz-signature"&gt;
      &lt;title&gt;&lt;/title&gt;
      &lt;p&gt;&lt;b&gt;Paul O'Rorke&lt;/b&gt;&lt;br&gt;
        &lt;b&gt;Tracker Software Products (Canada) Limited &lt;/b&gt;&lt;br&gt;
        &lt;a href="http://www.tracker-software.com/"&gt;www.tracker-software.com&lt;/a&gt;&lt;br&gt;
        Tel: +1 (250) 324 1621&lt;br&gt;
        Fax: +1 (250) 324 1623&lt;br&gt;
        &lt;br&gt;
        &lt;a href="http://www.tracker-software.com/"&gt; &lt;img
src="https://www.tracker-software.com/fckfiles/image/images/resellers/logo/TrackerSofwareProducts_Logo_330x100.png"
  name="image.png" width="198" height="60" border="0"
            align="bottom"&gt; &lt;/a&gt; &lt;br&gt;
        &lt;br&gt;
        Support: &lt;br&gt;
        &lt;a href="http://www.tracker-software.com/support"&gt;http://www.tracker-software.com/support
  &lt;/a&gt;&lt;br&gt;
        Download latest Releases &lt;br&gt;
        &lt;a href="http://www.tracker-software.com/downloads/"&gt;http://www.tracker-software.com/downloads/&lt;/a&gt;&lt;/p&gt;
  &lt;/div&gt;
  &lt;/body&gt;
&lt;/html&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20191022084918</emailId><senderName>bharath paulraj</senderName><senderEmail>bharathpaul@gmail.com</senderEmail><timestampReceived>2019-10-22 08:49:18-0400</timestampReceived><subject>[libvirt-users] Reg: Adding "edu" device using XML file</subject><body>

[Attachment #2 (multipart/alternative)]


Hi Team,

I am exploring "edu" device in QEMU to add my own custom device. I am able
to add the device using the command line. Would it be possible to add the
device using XML file through libvirt?

--=20
Regards,
Bharath

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;Hi Team,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I am exploring "edu" device in \
QEMU to add my own custom device. I am able to add the device using the command line. \
Would it be possible to add the device using XML file through \
libvirt?&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;-- &lt;br&gt;&lt;div dir="ltr" class="gmail_signature" \
data-smartmail="gmail_signature"&gt;&lt;div \
dir="ltr"&gt;Regards,&lt;div&gt;Bharath&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20191023025007</emailId><senderName>Jack Kamm</senderName><senderEmail>jackkamm@gmail.com</senderEmail><timestampReceived>2019-10-23 02:50:07-0400</timestampReceived><subject>[libvirt-users] win10 vm stuck in automatic repair</subject><body>

Hello,

I have a Windows 10 guest, when I boot it, it goes in to Automatic
Repair mode, and after some time reports it was unable to repair the PC.

This is from an older snapshot ("snapshot1"), and if I try switching
back to a more recent snapshot ("snapshot2"), libvirt reports that it
can't find the snapshot:

&gt; libvirt.libvirtError: internal error: Child process (/usr/bin/qemu-img
&gt; snapshot -a snapshot2 /var/lib/libvirt/images/win10.qcow2) unexpected
&gt; exit status 1: qemu-img: Could not apply snapshot 'snapshot2': Failed
&gt; to load snapshot: Invalid argument

Does anyone have any ideas why this might have happened, or any
suggestions for how I can go about diagnosing/fixing this?

This was a pretty simple Windows 10 VM, that I used for Microsoft
Office. Everything was managed through virt-manager and most settings
left at the original defaults.

Thanks,
Jack

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20191023072759</emailId><senderName>Han Han</senderName><senderEmail>hhan@redhat.com</senderEmail><timestampReceived>2019-10-23 07:27:59-0400</timestampReceived><subject>Re: [libvirt-users] Reg: Adding "edu" device using XML file</subject><body>

[Attachment #2 (multipart/alternative)]


On Tue, Oct 22, 2019 at 5:41 PM bharath paulraj &lt;bharathpaul@gmail.com&gt;
wrote:

&gt; Hi Team,
&gt;
&gt; I am exploring "edu" device in QEMU to add my own custom device. I am able
&gt; to add the device using the command line. Would it be possible to add the
&gt; device using XML file through libvirt?
&gt;
Hello, edu device is not implemented to libvirt xml. However you can use it
via custom device in libvirt:
Just define a domain like following:
&lt;domain type='qemu' xmlns:qemu='http://libvirt.org/schemas/domain/qemu/1.0'&gt;
...
 &lt;qemu:commandline&gt;
   &lt;qemu:arg value='-device'/&gt;
&lt;qemu:arg value='edu'/&gt;
 &lt;/qemu:commandline&gt;
&lt;/domain&gt;

More reference: https://libvirt.org/drvqemu.html#qemucommand

&gt;
&gt;
-- 
&gt; Regards,
&gt; Bharath
&gt; _______________________________________________
&gt; libvirt-users mailing list
&gt; libvirt-users@redhat.com
&gt; https://www.redhat.com/mailman/listinfo/libvirt-users



-- 
Best regards,
-----------------------------------
Han Han
Quality Engineer
Redhat.

Email: hhan@redhat.com
Phone: +861065339333

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;&lt;br&gt;&lt;/div&gt;&lt;br&gt;&lt;div class="gmail_quote"&gt;&lt;div dir="ltr" \
class="gmail_attr"&gt;On Tue, Oct 22, 2019 at 5:41 PM bharath paulraj &lt;&lt;a \
href="mailto:bharathpaul@gmail.com"&gt;bharathpaul@gmail.com&lt;/a&gt;&gt; \
wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote class="gmail_quote" style="margin:0px 0px 0px \
0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"&gt;&lt;div dir="ltr"&gt;Hi \
Team,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I am exploring "edu" device in QEMU to add my own \
custom device. I am able to add the device using the command line. Would it be \
possible to add the device using XML file through \
libvirt?&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;Hello, edu device is not \
implemented to libvirt xml. However you can use it via custom device in \
libvirt:&lt;/div&gt;&lt;div&gt;Just define a domain like following:&lt;/div&gt;&lt;div&gt;&lt;domain \
type='qemu' xmlns:qemu='&lt;a \
href="http://libvirt.org/schemas/domain/qemu/1.0"&gt;http://libvirt.org/schemas/domain/qemu/1.0&lt;/a&gt;'&gt;&lt;/div&gt;&lt;div&gt;...&lt;/div&gt;&lt;div&gt; \
&lt;qemu:commandline&gt;&lt;br&gt;     &lt;qemu:arg \
value='-device'/&gt;&lt;/div&gt;&lt;div&gt;&lt;qemu:arg \
value='edu'/&gt;&lt;/div&gt;&lt;div&gt;  \
&lt;/qemu:commandline&gt;&lt;/div&gt;&lt;div&gt;&lt;/domain&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;More \
reference: &lt;a href="https://libvirt.org/drvqemu.html#qemucommand"&gt;https://libvirt.org/drvqemu.html#qemucommand&lt;/a&gt;&lt;/div&gt;&lt;blockquote \
class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid \
rgb(204,204,204);padding-left:1ex"&gt;&lt;div dir="ltr"&gt;&lt;div&gt;&lt;div&gt;  \
&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;blockquote class="gmail_quote" style="margin:0px \
0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"&gt;&lt;div \
dir="ltr"&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;-- &lt;br&gt;&lt;div dir="ltr"&gt;&lt;div \
dir="ltr"&gt;Regards,&lt;div&gt;Bharath&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt; \
_______________________________________________&lt;br&gt; libvirt-users mailing list&lt;br&gt;
&lt;a href="mailto:libvirt-users@redhat.com" \
target="_blank"&gt;libvirt-users@redhat.com&lt;/a&gt;&lt;br&gt; &lt;a \
href="https://www.redhat.com/mailman/listinfo/libvirt-users" rel="noreferrer" \
target="_blank"&gt;https://www.redhat.com/mailman/listinfo/libvirt-users&lt;/a&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br \
clear="all"&gt;&lt;br&gt;-- &lt;br&gt;&lt;div dir="ltr" class="gmail_signature"&gt;&lt;div \
dir="ltr"&gt;&lt;div&gt;&lt;div dir="ltr"&gt;&lt;div&gt;&lt;div dir="ltr"&gt;Best regards,&lt;/div&gt;&lt;div \
dir="ltr"&gt;-----------------------------------&lt;br&gt;&lt;/div&gt;&lt;div dir="ltr"&gt;Han \
Han&lt;br&gt;Quality Engineer&lt;br&gt;Redhat.&lt;br&gt;&lt;br&gt;Email: &lt;a href="mailto:hhan@redhat.com" \
target="_blank"&gt;hhan@redhat.com&lt;/a&gt;&lt;br&gt;Phone: \
+861065339333&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20191023083857</emailId><senderName>bharath paulraj</senderName><senderEmail>bharathpaul@gmail.com</senderEmail><timestampReceived>2019-10-23 08:38:57-0400</timestampReceived><subject>Re: [libvirt-users] Reg: Adding "edu" device using XML file</subject><body>

[Attachment #2 (multipart/alternative)]


Hello Han,

Thanks for the response. The XML option with qemu:commandline works if the
device is added during the VM creation. But I would like to hot-plug the
device to the running VM. I can add the device using the command line
&lt;virsh qemu-monitor-command --hmp VM-Name  device_add edu,id=edu0&gt;

But I would like to add the device using the XML file, like &lt;virsh
attach-device VM-Name xmlfile.xml&gt;. If the XML support is not provided in
libvirt, Is there a document or pointers available to show how to add new
device in libvirt xml code?

Thanks,
Bharath

On Wed, Oct 23, 2019 at 12:57 PM Han Han &lt;hhan@redhat.com&gt; wrote:

&gt;
&gt;
&gt; On Tue, Oct 22, 2019 at 5:41 PM bharath paulraj &lt;bharathpaul@gmail.com&gt;
&gt; wrote:
&gt;
&gt;&gt; Hi Team,
&gt;&gt;
&gt;&gt; I am exploring "edu" device in QEMU to add my own custom device. I am
&gt;&gt; able to add the device using the command line. Would it be possible to add
&gt;&gt; the device using XML file through libvirt?
&gt;&gt;
&gt; Hello, edu device is not implemented to libvirt xml. However you can use
&gt; it via custom device in libvirt:
&gt; Just define a domain like following:
&gt; &lt;domain type='qemu' xmlns:qemu='http://libvirt.org/schemas/domain/qemu/1.0
&gt; '&gt;
&gt; ...
&gt;  &lt;qemu:commandline&gt;
&gt;    &lt;qemu:arg value='-device'/&gt;
&gt; &lt;qemu:arg value='edu'/&gt;
&gt;  &lt;/qemu:commandline&gt;
&gt; &lt;/domain&gt;
&gt;
&gt; More reference: https://libvirt.org/drvqemu.html#qemucommand
&gt;
&gt;&gt;
&gt;&gt;
&gt; --
&gt;&gt; Regards,
&gt;&gt; Bharath
&gt;&gt; _______________________________________________
&gt;&gt; libvirt-users mailing list
&gt;&gt; libvirt-users@redhat.com
&gt;&gt; https://www.redhat.com/mailman/listinfo/libvirt-users
&gt;
&gt;
&gt;
&gt; --
&gt; Best regards,
&gt; -----------------------------------
&gt; Han Han
&gt; Quality Engineer
&gt; Redhat.
&gt;
&gt; Email: hhan@redhat.com
&gt; Phone: +861065339333
&gt;


-- 
Regards,
Bharath

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;Hello Han,&lt;br&gt;&lt;br&gt;Thanks for the response. The XML option with \
qemu:commandline works if the device is added during the VM creation. But I would \
like to hot-plug the device to the running VM. I can add the device using the command \
line&lt;br&gt;&lt;div&gt;&lt;virsh  &lt;span \
style="color:rgb(0,0,0);font-family:HelveticaNeue;font-size:12px"&gt;qemu-monitor-command \
--hmp  &lt;/span&gt;&lt;span style="color:rgb(0,0,0);font-family:HelveticaNeue;font-size:12px"&gt;VM-Name \
&lt;/span&gt;&lt;span style="color:rgb(0,0,0);font-family:HelveticaNeue;font-size:12px"&gt;  \
device_add edu,id=edu0&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span \
style="color:rgb(0,0,0);font-family:HelveticaNeue;font-size:12px"&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span \
style="color:rgb(0,0,0);font-family:HelveticaNeue;font-size:12px"&gt;But I would like to \
add the device using the XML file, like &lt;virsh attach-device VM-Name \
xmlfile.xml&gt;. If the XML support is not provided in libvirt, Is there a document \
or pointers available to show how to add new device in libvirt xml \
code?&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span \
style="color:rgb(0,0,0);font-family:HelveticaNeue;font-size:12px"&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span \
style="color:rgb(0,0,0);font-family:HelveticaNeue;font-size:12px"&gt;Thanks,&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span \
style="color:rgb(0,0,0);font-family:HelveticaNeue;font-size:12px"&gt;Bharath&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;div \
class="gmail_quote"&gt;&lt;div dir="ltr" class="gmail_attr"&gt;On Wed, Oct 23, 2019 at 12:57 \
PM Han Han &lt;&lt;a href="mailto:hhan@redhat.com"&gt;hhan@redhat.com&lt;/a&gt;&gt; \
wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote class="gmail_quote" style="margin:0px 0px 0px \
0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"&gt;&lt;div dir="ltr"&gt;&lt;div \
dir="ltr"&gt;&lt;br&gt;&lt;/div&gt;&lt;br&gt;&lt;div class="gmail_quote"&gt;&lt;div dir="ltr" class="gmail_attr"&gt;On \
Tue, Oct 22, 2019 at 5:41 PM bharath paulraj &lt;&lt;a \
href="mailto:bharathpaul@gmail.com" target="_blank"&gt;bharathpaul@gmail.com&lt;/a&gt;&gt; \
wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote class="gmail_quote" style="margin:0px 0px 0px \
0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"&gt;&lt;div dir="ltr"&gt;Hi \
Team,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I am exploring "edu" device in QEMU to add my own \
custom device. I am able to add the device using the command line. Would it be \
possible to add the device using XML file through \
libvirt?&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;Hello, edu device is not \
implemented to libvirt xml. However you can use it via custom device in \
libvirt:&lt;/div&gt;&lt;div&gt;Just define a domain like following:&lt;/div&gt;&lt;div&gt;&lt;domain \
type='qemu' xmlns:qemu='&lt;a \
href="http://libvirt.org/schemas/domain/qemu/1.0" \
target="_blank"&gt;http://libvirt.org/schemas/domain/qemu/1.0&lt;/a&gt;'&gt;&lt;/div&gt;&lt;div&gt;...&lt;/div&gt;&lt;div&gt; \
&lt;qemu:commandline&gt;&lt;br&gt;     &lt;qemu:arg \
value='-device'/&gt;&lt;/div&gt;&lt;div&gt;&lt;qemu:arg \
value='edu'/&gt;&lt;/div&gt;&lt;div&gt;  \
&lt;/qemu:commandline&gt;&lt;/div&gt;&lt;div&gt;&lt;/domain&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;More \
reference: &lt;a href="https://libvirt.org/drvqemu.html#qemucommand" \
target="_blank"&gt;https://libvirt.org/drvqemu.html#qemucommand&lt;/a&gt;&lt;/div&gt;&lt;blockquote \
class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid \
rgb(204,204,204);padding-left:1ex"&gt;&lt;div dir="ltr"&gt;&lt;div&gt;&lt;div&gt;  \
&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;blockquote class="gmail_quote" style="margin:0px \
0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"&gt;&lt;div \
dir="ltr"&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;-- &lt;br&gt;&lt;div dir="ltr"&gt;&lt;div \
dir="ltr"&gt;Regards,&lt;div&gt;Bharath&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt; \
_______________________________________________&lt;br&gt; libvirt-users mailing list&lt;br&gt;
&lt;a href="mailto:libvirt-users@redhat.com" \
target="_blank"&gt;libvirt-users@redhat.com&lt;/a&gt;&lt;br&gt; &lt;a \
href="https://www.redhat.com/mailman/listinfo/libvirt-users" rel="noreferrer" \
target="_blank"&gt;https://www.redhat.com/mailman/listinfo/libvirt-users&lt;/a&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br \
clear="all"&gt;&lt;br&gt;-- &lt;br&gt;&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;&lt;div&gt;&lt;div dir="ltr"&gt;&lt;div&gt;&lt;div \
dir="ltr"&gt;Best regards,&lt;/div&gt;&lt;div \
dir="ltr"&gt;-----------------------------------&lt;br&gt;&lt;/div&gt;&lt;div dir="ltr"&gt;Han \
Han&lt;br&gt;Quality Engineer&lt;br&gt;Redhat.&lt;br&gt;&lt;br&gt;Email: &lt;a href="mailto:hhan@redhat.com" \
target="_blank"&gt;hhan@redhat.com&lt;/a&gt;&lt;br&gt;Phone: \
+861065339333&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt; &lt;/blockquote&gt;&lt;/div&gt;&lt;br \
clear="all"&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;-- &lt;br&gt;&lt;div dir="ltr" class="gmail_signature"&gt;&lt;div \
dir="ltr"&gt;Regards,&lt;div&gt;Bharath&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20191024004720</emailId><senderName>Han Han</senderName><senderEmail>hhan@redhat.com</senderEmail><timestampReceived>2019-10-24 00:47:20-0400</timestampReceived><subject>Re: [libvirt-users] Reg: Adding "edu" device using XML file</subject><body>

[Attachment #2 (multipart/alternative)]


On Wed, Oct 23, 2019 at 4:27 PM bharath paulraj &lt;bharathpaul@gmail.com&gt;
wrote:

&gt; Hello Han,
&gt;
&gt; Thanks for the response. The XML option with qemu:commandline works if the
&gt; device is added during the VM creation. But I would like to hot-plug the
&gt; device to the running VM. I can add the device using the command line
&gt; &lt;virsh qemu-monitor-command --hmp VM-Name  device_add edu,id=edu0&gt;
&gt;
&gt; But I would like to add the device using the XML file, like &lt;virsh
&gt; attach-device VM-Name xmlfile.xml&gt;. If the XML support is not provided in
&gt; libvirt, Is there a document or pointers available to show how to add new
&gt; device in libvirt xml code?
&gt;
&gt; ASAIK there is no development guide for adding new device in libvirt xml
code.
Maybe you can refer to former watchdog device patch series:
https://www.redhat.com/archives/libvir-list/2009-October/msg00564.html
https://www.redhat.com/archives/libvir-list/2017-September/msg00078.html

&gt; Thanks,
&gt; Bharath
&gt;
&gt; On Wed, Oct 23, 2019 at 12:57 PM Han Han &lt;hhan@redhat.com&gt; wrote:
&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; On Tue, Oct 22, 2019 at 5:41 PM bharath paulraj &lt;bharathpaul@gmail.com&gt;
&gt;&gt; wrote:
&gt;&gt;
&gt;&gt;&gt; Hi Team,
&gt;&gt;&gt;
&gt;&gt;&gt; I am exploring "edu" device in QEMU to add my own custom device. I am
&gt;&gt;&gt; able to add the device using the command line. Would it be possible to add
&gt;&gt;&gt; the device using XML file through libvirt?
&gt;&gt;&gt;
&gt;&gt; Hello, edu device is not implemented to libvirt xml. However you can use
&gt;&gt; it via custom device in libvirt:
&gt;&gt; Just define a domain like following:
&gt;&gt; &lt;domain type='qemu' xmlns:qemu='
&gt;&gt; http://libvirt.org/schemas/domain/qemu/1.0'&gt;
&gt;&gt; ...
&gt;&gt;  &lt;qemu:commandline&gt;
&gt;&gt;    &lt;qemu:arg value='-device'/&gt;
&gt;&gt; &lt;qemu:arg value='edu'/&gt;
&gt;&gt;  &lt;/qemu:commandline&gt;
&gt;&gt; &lt;/domain&gt;
&gt;&gt;
&gt;&gt; More reference: https://libvirt.org/drvqemu.html#qemucommand
&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt; --
&gt;&gt;&gt; Regards,
&gt;&gt;&gt; Bharath
&gt;&gt;&gt; _______________________________________________
&gt;&gt;&gt; libvirt-users mailing list
&gt;&gt;&gt; libvirt-users@redhat.com
&gt;&gt;&gt; https://www.redhat.com/mailman/listinfo/libvirt-users
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; --
&gt;&gt; Best regards,
&gt;&gt; -----------------------------------
&gt;&gt; Han Han
&gt;&gt; Quality Engineer
&gt;&gt; Redhat.
&gt;&gt;
&gt;&gt; Email: hhan@redhat.com
&gt;&gt; Phone: +861065339333
&gt;&gt;
&gt;
&gt;
&gt; --
&gt; Regards,
&gt; Bharath
&gt;


-- 
Best regards,
-----------------------------------
Han Han
Quality Engineer
Redhat.

Email: hhan@redhat.com
Phone: +861065339333

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;&lt;br&gt;&lt;/div&gt;&lt;br&gt;&lt;div class="gmail_quote"&gt;&lt;div dir="ltr" \
class="gmail_attr"&gt;On Wed, Oct 23, 2019 at 4:27 PM bharath paulraj &lt;&lt;a \
href="mailto:bharathpaul@gmail.com"&gt;bharathpaul@gmail.com&lt;/a&gt;&gt; \
wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote class="gmail_quote" style="margin:0px 0px 0px \
0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"&gt;&lt;div dir="ltr"&gt;Hello \
Han,&lt;br&gt;&lt;br&gt;Thanks for the response. The XML option with qemu:commandline works if \
the device is added during the VM creation. But I would like to hot-plug the device \
to the running VM. I can add the device using the command line&lt;br&gt;&lt;div&gt;&lt;virsh  \
&lt;span style="color:rgb(0,0,0);font-family:HelveticaNeue;font-size:12px"&gt;qemu-monitor-command \
--hmp  &lt;/span&gt;&lt;span style="color:rgb(0,0,0);font-family:HelveticaNeue;font-size:12px"&gt;VM-Name \
&lt;/span&gt;&lt;span style="color:rgb(0,0,0);font-family:HelveticaNeue;font-size:12px"&gt;  \
device_add edu,id=edu0&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span \
style="color:rgb(0,0,0);font-family:HelveticaNeue;font-size:12px"&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span \
style="color:rgb(0,0,0);font-family:HelveticaNeue;font-size:12px"&gt;But I would like to \
add the device using the XML file, like &lt;virsh attach-device VM-Name \
xmlfile.xml&gt;. If the XML support is not provided in libvirt, Is there a document \
or pointers available to show how to add new device in libvirt xml \
code?&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span \
style="color:rgb(0,0,0);font-family:HelveticaNeue;font-size:12px"&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;ASAIK \
there is no development guide for adding new device in libvirt xml \
code.&lt;/div&gt;&lt;div&gt;Maybe you can refer to former watchdog device patch \
series:&lt;/div&gt;&lt;div&gt;&lt;a \
href="https://www.redhat.com/archives/libvir-list/2009-October/msg00564.html"&gt;https://www.redhat.com/archives/libvir-list/2009-October/msg00564.html&lt;/a&gt;&lt;/div&gt;&lt;div&gt;&lt;a \
href="https://www.redhat.com/archives/libvir-list/2017-September/msg00078.html"&gt;https: \
//www.redhat.com/archives/libvir-list/2017-September/msg00078.html&lt;/a&gt;&lt;/div&gt;&lt;blockquote \
class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid \
rgb(204,204,204);padding-left:1ex"&gt;&lt;div dir="ltr"&gt;&lt;div&gt;&lt;span \
style="color:rgb(0,0,0);font-family:HelveticaNeue;font-size:12px"&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span \
style="color:rgb(0,0,0);font-family:HelveticaNeue;font-size:12px"&gt;Thanks,&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span \
style="color:rgb(0,0,0);font-family:HelveticaNeue;font-size:12px"&gt;Bharath&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;div \
class="gmail_quote"&gt;&lt;div dir="ltr" class="gmail_attr"&gt;On Wed, Oct 23, 2019 at 12:57 \
PM Han Han &lt;&lt;a href="mailto:hhan@redhat.com" \
target="_blank"&gt;hhan@redhat.com&lt;/a&gt;&gt; wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote \
class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid \
rgb(204,204,204);padding-left:1ex"&gt;&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;&lt;br&gt;&lt;/div&gt;&lt;br&gt;&lt;div \
class="gmail_quote"&gt;&lt;div dir="ltr" class="gmail_attr"&gt;On Tue, Oct 22, 2019 at 5:41 PM \
bharath paulraj &lt;&lt;a href="mailto:bharathpaul@gmail.com" \
target="_blank"&gt;bharathpaul@gmail.com&lt;/a&gt;&gt; wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote \
class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid \
rgb(204,204,204);padding-left:1ex"&gt;&lt;div dir="ltr"&gt;Hi Team,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I am \
exploring "edu" device in QEMU to add my own custom device. I am able to \
add the device using the command line. Would it be possible to add the device using \
XML file through libvirt?&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;Hello, \
edu device is not implemented to libvirt xml. However you can use it via custom \
device in libvirt:&lt;/div&gt;&lt;div&gt;Just define a domain like \
following:&lt;/div&gt;&lt;div&gt;&lt;domain type='qemu' xmlns:qemu='&lt;a \
href="http://libvirt.org/schemas/domain/qemu/1.0" \
target="_blank"&gt;http://libvirt.org/schemas/domain/qemu/1.0&lt;/a&gt;'&gt;&lt;/div&gt;&lt;div&gt;...&lt;/div&gt;&lt;div&gt; \
&lt;qemu:commandline&gt;&lt;br&gt;     &lt;qemu:arg \
value='-device'/&gt;&lt;/div&gt;&lt;div&gt;&lt;qemu:arg \
value='edu'/&gt;&lt;/div&gt;&lt;div&gt;  \
&lt;/qemu:commandline&gt;&lt;/div&gt;&lt;div&gt;&lt;/domain&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;More \
reference: &lt;a href="https://libvirt.org/drvqemu.html#qemucommand" \
target="_blank"&gt;https://libvirt.org/drvqemu.html#qemucommand&lt;/a&gt;&lt;/div&gt;&lt;blockquote \
class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid \
rgb(204,204,204);padding-left:1ex"&gt;&lt;div dir="ltr"&gt;&lt;div&gt;&lt;div&gt;  \
&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;blockquote class="gmail_quote" style="margin:0px \
0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"&gt;&lt;div \
dir="ltr"&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;-- &lt;br&gt;&lt;div dir="ltr"&gt;&lt;div \
dir="ltr"&gt;Regards,&lt;div&gt;Bharath&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt; \
_______________________________________________&lt;br&gt; libvirt-users mailing list&lt;br&gt;
&lt;a href="mailto:libvirt-users@redhat.com" \
target="_blank"&gt;libvirt-users@redhat.com&lt;/a&gt;&lt;br&gt; &lt;a \
href="https://www.redhat.com/mailman/listinfo/libvirt-users" rel="noreferrer" \
target="_blank"&gt;https://www.redhat.com/mailman/listinfo/libvirt-users&lt;/a&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br \
clear="all"&gt;&lt;br&gt;-- &lt;br&gt;&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;&lt;div&gt;&lt;div dir="ltr"&gt;&lt;div&gt;&lt;div \
dir="ltr"&gt;Best regards,&lt;/div&gt;&lt;div \
dir="ltr"&gt;-----------------------------------&lt;br&gt;&lt;/div&gt;&lt;div dir="ltr"&gt;Han \
Han&lt;br&gt;Quality Engineer&lt;br&gt;Redhat.&lt;br&gt;&lt;br&gt;Email: &lt;a href="mailto:hhan@redhat.com" \
target="_blank"&gt;hhan@redhat.com&lt;/a&gt;&lt;br&gt;Phone: \
+861065339333&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt; &lt;/blockquote&gt;&lt;/div&gt;&lt;br \
clear="all"&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;-- &lt;br&gt;&lt;div dir="ltr"&gt;&lt;div \
dir="ltr"&gt;Regards,&lt;div&gt;Bharath&lt;/div&gt;&lt;/div&gt;&lt;/div&gt; &lt;/blockquote&gt;&lt;/div&gt;&lt;br \
clear="all"&gt;&lt;br&gt;-- &lt;br&gt;&lt;div dir="ltr" class="gmail_signature"&gt;&lt;div \
dir="ltr"&gt;&lt;div&gt;&lt;div dir="ltr"&gt;&lt;div&gt;&lt;div dir="ltr"&gt;Best regards,&lt;/div&gt;&lt;div \
dir="ltr"&gt;-----------------------------------&lt;br&gt;&lt;/div&gt;&lt;div dir="ltr"&gt;Han \
Han&lt;br&gt;Quality Engineer&lt;br&gt;Redhat.&lt;br&gt;&lt;br&gt;Email: &lt;a href="mailto:hhan@redhat.com" \
target="_blank"&gt;hhan@redhat.com&lt;/a&gt;&lt;br&gt;Phone: \
+861065339333&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20191023164404</emailId><senderName>Laine Stump</senderName><senderEmail>laine@redhat.com</senderEmail><timestampReceived>2019-10-23 16:44:04-0400</timestampReceived><subject>Re: [libvirt-users] Confused setting up a "Virtual Server Hosting" config</subject><body>

On 10/23/19 12:43 AM, Paul O'Rorke wrote:
&gt; Hi list,
&gt; 
&gt; Can anyone advise me on the correct/best set up for Virtual Server Hosting?
&gt; 
&gt; I have a guest in my server room wish to migrate to dedicated server I 
&gt; rented in an offsite in a data centre.  I rented a box with one NIC and 
&gt; one public IP.  I installed KVM on it and a guest. (both Ubuntu 18.04 
&gt; LTS server edition).  I am struggling to get the networking right.
&gt; 
&gt; Essentially I want the "Virtual Server Hosting" config mentioned here:
&gt; https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/6/html-single/virtualization_administration_guide/index#sub-sect-routed-mode \
&gt;  &lt;https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/6/html-single/virtualization_administration_guide/index#sect-attch-nic-physdev&gt;
&gt;  
&gt; I have not had any luck setting that up.  It is listed in the "Routed" 
&gt; section but the graphic says the virtual switch should be in bridged mode.
&gt; 
&gt; I also tried using macvtap, and since I have only one guest was 
&gt; expecting to be able to just use the host IP 

No, you will need one IP for the host, and one IP for the guest in 
either bridged mode or for macvtap.

&gt; but it looks like the data 
&gt; centre have restricted packets to the MAC address of the host NIC.

Yes, there is that restriction too. Usually hosting providers will lock 
down the MAC addresses they allow through ports, in order to prevent 
hostile clients from doing MAC spoofing to capture other clients' traffice.

   When
&gt; set up I can ping the public IP (it is both eh host and the guest?)

No. An IP address refers to one entity. It can be the host or the guest, 
but not both.

but
&gt; not their gateway.  Should a macvtap not be presenting the MAC address 
&gt; of the host NIC to the router and thus allowing packets from the guest?

No, that is not what macvtap does. It creates a virtual NIC (macvtap 
device) that is connected directly to the physical NIC, and traffic from 
that device is injected directly into the output queue of the physical 
device, MAC address and all.

&gt; 
&gt; I clearly have a lack of understanding of how this is working and how it 
&gt; is meant to work.  When I tried the same thing on mt hardware/network I 
&gt; can create myltiple guests that all use the macvtap interface and I have 
&gt; no problems getting connectivity to the outside world.

Because on your own network you have no MAC address locking on your 
switch port, and have multiple IP addresses available (one for each 
guest) from the local DHCP server.

&gt; 
&gt; Before I approach the data centre about this I want to be sure I 
&gt; understand what I am doing.   I ultimately want to host a mail server 
&gt; and several different web servers as guests all behind this one host.  I 
&gt; would alias their public IPs to the host NIC and use IPtables to route 
&gt; traffic based on destination IP.

The only reason you would want iptables to be involved is if you were 
limited to only 1 IP address for the host + all the guests. In that case 
you could use *port* forwarding to cause incoming traffic to the host on 
particular TCP ports to be forwarded to different guests:

https://wiki.libvirt.org/page/Networking#Forwarding_Incoming_Connections


&gt; 
&gt; Does that make sense? Can anyone suggest the right way to achieve this?

No, not really :-)

If you can only get a single IP address, then you'll need to look at the 
above link. If you can get the hosting provider to sell you extra IP 
addresses / MAC addresses (usually extra IPs cost money but MAC 
addresses are free, they just want to know what they are - you will need 
one *of each* for each guest), then you should put a bridge on your 
host's ethernet, and connect all the guests to that bridge, configuring 
each with its unique IP address / MAC address / default route info given 
to you by the hosting provider. You can use this as a reference to 
configure the host and guests:

https://wiki.libvirt.org/page/Networking#Debian.2FUbuntu_Bridging

(you could also avoid setting up the bridge and just use macvtap bridge 
mode as you say you've done on your own network. The only limitation of 
that is that it doesn't permit direct communication between the host and 
the guests. If that limitation is okay with you, then that's fine.)

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20191021154831</emailId><senderName>Laine Stump</senderName><senderEmail>laine@redhat.com</senderEmail><timestampReceived>2019-10-21 15:48:31-0400</timestampReceived><subject>Re: [libvirt-users] Live migrate + change interface name</subject><body>

On 10/17/19 4:26 PM, Marc Roos wrote:
&gt; 
&gt; Is it possible to do a live migrate of a guest, having on the from host
&gt; a source_device=eth2 and to host a source_dev=eth1?

What management tool are you using that the syntax is "source_device=eth2"?

Are you maybe just paraphrasing your config, and what you actually have 
is something like this?:

    &lt;interface type='direct'&gt;
      &lt;source dev='eth2'/&gt;
      ...
    &lt;/interface&gt;

?

If so, the way to make this easily migratable is to create a network on 
both hosts that points to the desired physical device, e.g. on host 1:


     &lt;network&gt;
       &lt;name&gt;direct-net&lt;/name&gt;
       &lt;forward mode='bridge'&gt;
         &lt;interface dev='eth2'/&gt;
       &lt;/forward&gt;
     &lt;/network&gt;

and on host2:

      (same thing, but use 'eth1')

After net-define-ing the networks, you'll need to net-autostart and 
net-start them. Then in your guest's interface config, you would use this:

      &lt;interface type='network&gt;
        &lt;source network='direct-net'/&gt;
        ...

You will then be able to migrate from one host to the other without 
needing to modify your XML during the migration.

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20191017093439</emailId><senderName>Daniel =?utf-8?B?UC4gQmVycmFuZ8Op?=</senderName><senderEmail>berrange@redhat.com</senderEmail><timestampReceived>2019-10-17 09:34:39-0400</timestampReceived><subject>Re: [libvirt-users] Transient permission denied errors when sending audit logs</subject><body>

On Thu, Oct 17, 2019 at 11:26:12AM +0200, Roman Mohr wrote:
&gt; Hi,
&gt; 
&gt; In kubevirt we are running into a strange permission problem on
&gt; libvirt-5.0. We see transient "Permission Denied" errors when "virAuditSend"
&gt; wants to send an audit log. [1] shows the logs of one of these containers.
&gt; Here an example:
&gt; 
&gt; {"component":"virt-launcher","level":"warning","msg":"Failed to send audit
&gt; message virt=kvm
&gt; vm=\"kubevirt-test-default_testvmit2pqrkrlrwbhptcjcs4n67jn6pjqvmtd7pkrpdmkrl5sldzs4rxr9zdg8m45jxz\"
&gt;  uuid=56a33283-f6d7-4002-b188-1fed83186545 vm-ctx=+107:+107
&gt; img-ctx=+107:+107 model=dac: Permission
&gt; denied","pos":"virAuditSend:141","subcomponent":"libvirt","thread":"30","timestamp":"2019-10-08T23:58:40.651000Z"}
&gt;  
&gt; We recently switched in kubevirt to a dedicated selinux policy and remove
&gt; the general "privileged" flag from the containers where we run libvirt in.
&gt; This is very likely related to it, but we can't make sense out of it,
&gt; because:
&gt; 
&gt; * It randomly affects one out of a few hundred containers which we start
&gt; * It is not bound to a specific node
&gt; * It is only transient on that container. After a few denials libvirt can
&gt; just continue.

The transient nature makes this really bizarre.

The error message above comes from the audit_log_user_message() call
that libvirt makes. This is implemented in libaudit.so using the
sendto() syscall on a netlink socket opened with

  socket(PF_NETLINK, SOCK_RAW, NETLINK_AUDIT);

So in terms of code being run there, there's very little - the EPERM
is coming back from the kernel when sending the message.

I'm not sure what scenario could cause this - perhaps the audit log
buffer in the kernel is full or something like that ?



&gt; * Sometimes it is accompanied with a transient "Permission denied" on
&gt; /dev/null from our code in that container (so not from something which
&gt; libvirt tries to do).
&gt; 
&gt; Has someone seen something like this before in different environments?

Never seen anything like this reported before.

Regards,
Daniel
-- 
&gt; &gt; https://berrange.com      -o-    https://www.flickr.com/photos/dberrange :|
&gt; &gt; https://libvirt.org         -o-            https://fstop138.berrange.com :|
&gt; &gt; https://entangle-photo.org    -o-    https://www.instagram.com/dberrange :|

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20191014071218</emailId><senderName>Li Feng</senderName><senderEmail>fengli@smartx.com</senderEmail><timestampReceived>2019-10-14 07:12:18-0400</timestampReceived><subject>Re: [libvirt-users] [libvirt] Add support for vhost-user-scsi-pci/vhost-user-blk-pci</subject><body>

Hi Cole &amp; Michal,

I'm sorry for my late response, I just end my journey today.
Thank your response, your suggestion is very helpful to me.

I have added Michal in this mail, Michal helps me review my initial patchset.
(https://www.spinics.net/linux/fedora/libvir/msg191339.html)

All concern about this feature is the XML design.
My original XML design exposes more details of Qemu.

    &lt;vhost-user-blk-pci type='unix'&gt;
        &lt;source type='bind' path='/tmp/vhost-blk.sock'&gt;
            &lt;reconnect enabled='yes' timeout='5' /&gt;
        &lt;/source&gt;
        &lt;queue num='4'/&gt;
    &lt;/vhost-user-blk-pci&gt;

As Cole's suggestion, the better design with all vhost-user-scsi/blk
features would like this:

vhost-user-blk:

&lt;disk type='vhostuser' device='disk'&gt;
   &lt;source type='unix' path='/path/to/vhost-user-blk.sock' mode='client'&gt;
       &lt;reconnect enabled='yes' timeout='5' /&gt;
    &lt;/source&gt;
   &lt;target dev='vda' bus='virtio'/&gt;
   &lt;queue num='4'/&gt;
    &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x07' function='0x0'/&gt;
&lt;/disk&gt;

vhost-user-scsi:

&lt;disk type='vhostuser' device='disk'&gt;
   &lt;source type='unix' path='/path/to/vhost-user-scsi.sock' mode='client'&gt;
       &lt;reconnect enabled='yes' timeout='5' /&gt;
   &lt;/source&gt;
   &lt;target dev='sda' bus='scsi'/&gt;
   &lt;queue num='4'/&gt;
&lt;/disk&gt;

Conclusion:
1. Add new type(vhostuser) for disk label;
2. Add queue sub-label for disk to support multiqueue(&lt;queue
num='4'/&gt;) or reusing the driver label
(&lt;driver name='vhostuser' queues='4'), which one is better?
Qemu support multiqueue like this:
-device vhost-user-scsi-pci,id=scsi0,chardev=spdk_vhost_scsi0,num_queues=4
-device vhost-user-blk-pci,chardev=spdk_vhost_blk0,num-queues=4

Another question:
When qemu is connecting to a vhost-user-scsi controller[1],  there may
exist multiple LUNs under one target,
then one disklabel(&lt;disk/&gt;) will represent multiple SCSI LUNs,
the 'dev' property(&lt;target dev='sda' bus='scsi'/&gt;) will be ignored, right?
In other words, for vhost-user-scsi disk, it more likes a controller,
maybe the controller label is suitable.

I look forward to hearing from you as soon as possible.

[1]: https://spdk.io/doc/vhost.html

Feng Li

Cole Robinson &lt;crobinso@redhat.com&gt; ���2019���10���10��������� ������6:48���������
&gt; 
&gt; Sorry for the late reply, and thanks Jano for pointing out elsewhere
&gt; that this didn't receive a response.
&gt; 
&gt; On 8/12/19 5:56 AM, Li Feng wrote:
&gt; &gt; Hi Guys,
&gt; &gt; 
&gt; &gt; And I want to add the vhost-user-scsi-pci/vhost-user-blk-pci support
&gt; &gt; for libvirt.
&gt; &gt; 
&gt; &gt; The usage in qemu like this:
&gt; &gt; 
&gt; &gt; Vhost-SCSI
&gt; &gt; -chardev socket,id=char0,path=/var/tmp/vhost.0
&gt; &gt; -device vhost-user-scsi-pci,id=scsi0,chardev=char0
&gt; &gt; Vhost-BLK
&gt; &gt; -chardev socket,id=char1,path=/var/tmp/vhost.1
&gt; &gt; -device vhost-user-blk-pci,id=blk0,chardev=char1
&gt; &gt; 
&gt; 
&gt; Indeed that matches what I see for the qemu commits too:
&gt; 
&gt; https://git.qemu.org/?p=qemu.git;a=commit;h=00343e4b54b
&gt; https://git.qemu.org/?p=qemu.git;a=commit;h=f12c1ebddf7
&gt; 
&gt; &gt; What type should I add for libvirt.
&gt; &gt; Type1:
&gt; &gt; &lt;hostdev mode='subsystem' type='vhost-user'&gt;
&gt; &gt; &lt;source protocol='vhost-user-scsi' path='/tmp/vhost-scsi.sock'&gt;&lt;/source&gt;
&gt; &gt; &lt;alias name="vhost-user-scsi-disk1"/&gt;
&gt; &gt; &lt;/hostdev&gt;
&gt; &gt; 
&gt; &gt; 
&gt; &gt; Type2:
&gt; &gt; 
&gt; &gt; &lt;disk type='network' device='disk'&gt;
&gt; &gt; &lt;driver name='qemu' type='raw' cache='none' io='native'/&gt;
&gt; &gt; &lt;source protocol='vhost-user' path='/tmp/vhost-scsi.sock'&gt;
&gt; &gt; &lt;/source&gt;
&gt; &gt; &lt;target dev='sdb' bus='vhost-user-scsi'/&gt;
&gt; &gt; &lt;boot order='3'/&gt;
&gt; &gt; &lt;alias name='scsi0-0-0-1'/&gt;
&gt; &gt; &lt;address type='drive' controller='0' bus='0' target='0' unit='1'/&gt;
&gt; &gt; &lt;/disk&gt;
&gt; &gt; 
&gt; &gt; 
&gt; &gt; &lt;disk type='network' device='disk'&gt;
&gt; &gt; &lt;driver name='qemu' type='raw' cache='none' io='native'/&gt;
&gt; &gt; &lt;source protocol='vhost-user' path='/tmp/vhost-blk.sock'&gt;
&gt; &gt; &lt;/source&gt;
&gt; &gt; &lt;target dev='vda' bus='vhost-user-blk'/&gt;
&gt; &gt; &lt;boot order='1'/&gt;
&gt; &gt; &lt;alias name='virtio-disk0'/&gt;
&gt; &gt; &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x07'
&gt; &gt; function='0x0'/&gt;
&gt; &gt; &lt;/disk&gt;
&gt; &gt; 
&gt; 
&gt; I think wiring this into &lt;disk&gt; makes more sense. &lt;hostdev&gt; is really an
&gt; abstraction for assigning a (typically) physical host device to the VM,
&gt; so it handles things like hiding a PCI device from the host, and passing
&gt; that exact device to the VM.
&gt; 
&gt; In the vhost-user-scsi/blk case, the host device is just a special
&gt; process running on the other side of a socket, and the device
&gt; represented to the guest is a typical virtio device. So to me it makes
&gt; more sense as a &lt;disk&gt; with a &lt;source&gt; that points at that socket.
&gt; 
&gt; target bus=virtio vs bus=scsi is already used to distinguish between
&gt; virtio-blk and virtio-scsi, so I think we can keep that bit as is, with
&gt; the &lt;address type=drive|pci&gt; to match. We just need to differentiate
&gt; between plain virtio and vhost-user
&gt; 
&gt; network devices already have vhostuser support:
&gt; 
&gt; &lt;interface type='vhostuser'&gt;
&gt; &lt;source type='unix' path='/tmp/vhost1.sock' mode='server|client'/&gt;
&gt; &lt;model type='virtio'/&gt;
&gt; &lt;/interface&gt;
&gt; 
&gt; Internally that &lt;source&gt; is a virDomainChrSourceDefPtr which is our
&gt; internal representation of a chardev. So I think something akin to this
&gt; is the way to go. It will likely require updating a LOT of places in the
&gt; code that check disk type= field, probably most places that care about
&gt; whether type=NETWORK or type=!NETWORK will need to be mirrored for the
&gt; new type.
&gt; 
&gt; &lt;disk type='vhostuser' device='disk'&gt;
&gt; &lt;source type='unix' path='/path/to/vhost-user-blk.sock' mode='client'/&gt;
&gt; &lt;target dev='vda' bus='virtio'/&gt;
&gt; &lt;/disk&gt;
&gt; 
&gt; &lt;disk type='vhostuser' device='disk'&gt;
&gt; &lt;source type='unix' path='/path/to/vhost-user-scsi.sock' mode='client'/&gt;
&gt; &lt;target dev='sda' bus='scsi'/&gt;
&gt; &lt;/disk&gt;
&gt; 
&gt; - Cole

-- 
The SmartX email address is only for business purpose. Any sent message 
that is not related to the business is not authorized or permitted by 
SmartX.
���������������������������������������������������SmartX���������������. \
�������������������������������������� \
���,������������������������������������������������������������.



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20191014174920</emailId><senderName>Cole Robinson</senderName><senderEmail>crobinso@redhat.com</senderEmail><timestampReceived>2019-10-14 17:49:20-0400</timestampReceived><subject>Re: [libvirt-users] [libvirt] Add support for vhost-user-scsi-pci/vhost-user-blk-pci</subject><body>

On 10/14/19 3:12 AM, Li Feng wrote:
&gt; Hi Cole &amp; Michal,
&gt; 
&gt; I'm sorry for my late response, I just end my journey today.
&gt; Thank your response, your suggestion is very helpful to me.
&gt; 
&gt; I have added Michal in this mail, Michal helps me review my initial patchset.
&gt; (https://www.spinics.net/linux/fedora/libvir/msg191339.html)
&gt; 

Whoops I missed that posting, I didn't realize you had sent patches!

&gt; All concern about this feature is the XML design.
&gt; My original XML design exposes more details of Qemu.
&gt; 
&gt;      &lt;vhost-user-blk-pci type='unix'&gt;
&gt;          &lt;source type='bind' path='/tmp/vhost-blk.sock'&gt;
&gt;              &lt;reconnect enabled='yes' timeout='5' /&gt;
&gt;          &lt;/source&gt;
&gt;          &lt;queue num='4'/&gt;
&gt;      &lt;/vhost-user-blk-pci&gt;
&gt; 
&gt; As Cole's suggestion, the better design with all vhost-user-scsi/blk
&gt; features would like this:
&gt; 
&gt; vhost-user-blk:
&gt; 
&gt; &lt;disk type='vhostuser' device='disk'&gt;
&gt;     &lt;source type='unix' path='/path/to/vhost-user-blk.sock' mode='client'&gt;
&gt;         &lt;reconnect enabled='yes' timeout='5' /&gt;
&gt;      &lt;/source&gt;
&gt;     &lt;target dev='vda' bus='virtio'/&gt;
&gt;     &lt;queue num='4'/&gt;
&gt;      &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x07' function='0x0'/&gt;
&gt; &lt;/disk&gt;
&gt; 
&gt; vhost-user-scsi:
&gt; 
&gt; &lt;disk type='vhostuser' device='disk'&gt;
&gt;     &lt;source type='unix' path='/path/to/vhost-user-scsi.sock' mode='client'&gt;
&gt;         &lt;reconnect enabled='yes' timeout='5' /&gt;
&gt;     &lt;/source&gt;
&gt;     &lt;target dev='sda' bus='scsi'/&gt;
&gt;     &lt;queue num='4'/&gt;
&gt; &lt;/disk&gt;
&gt; 

I think my SCSI idea is wrong, sorry. vhost-user-scsi is for passing a
scsi host adapter to the VM, correct? If so, then it's not really a
&lt;disk&gt;, and so using the existing vhost-scsi support in &lt;hostdev&gt; is
probably better. &lt;hostdev&gt; could possible be used for vhost-user-blk as well

Can you provide some examples of full qemu command lines using
vhost-user-blk and vhost-user-scsi? Just linking to examples else where
is fine, but I'm wondering if there's more context

Internally we already have an abstraction for vhost-scsi:

    &lt;hostdev mode='subsystem' type='scsi_host'&gt;
      &lt;source protocol='vhost' wwpn='XXX'/&gt;
    &lt;/hostdev&gt;


The obvious extension would be

    &lt;hostdev mode='subsystem' type='scsi_host'&gt;
      &lt;source protocol='vhostuser' type='unix'
path='/path/to/vhost-user-scsi.sock' mode='client'/&gt;
    &lt;/hostdev&gt;

Internally implementing this will be weird. The &lt;source&gt; parameters are
only dictated by the hostdev type= field, but in this case they would be
dictated by the &lt;source protocol=&gt; field, and we would want to reuse the
internal chardev abstraction.

vhost-user-blk could be implemented similarly, but with type='storage'
which is the way we pass through block devices to LXC guests, but it
isn't currently supported in the qemu driver.

I dunno. Maybe Michal or danpb can provide guidance


&gt; Conclusion:
&gt; 1. Add new type(vhostuser) for disk label;
&gt; 2. Add queue sub-label for disk to support multiqueue(&lt;queue
&gt; num='4'/&gt;) or reusing the driver label
&gt; (&lt;driver name='vhostuser' queues='4'), which one is better?
&gt; Qemu support multiqueue like this:
&gt; -device vhost-user-scsi-pci,id=scsi0,chardev=spdk_vhost_scsi0,num_queues=4
&gt; -device vhost-user-blk-pci,chardev=spdk_vhost_blk0,num-queues=4
&gt; 

num-queues is already supported by libvirt for both &lt;disk&gt; and &lt;hostdev&gt;
with &lt;driver queues=X/&gt;, so whether we use &lt;disk&gt; or &lt;hostdev&gt; you won't
need to add any new XML here.

&gt; Another question:
&gt; When qemu is connecting to a vhost-user-scsi controller[1],  there may
&gt; exist multiple LUNs under one target,
&gt; then one disklabel(&lt;disk/&gt;) will represent multiple SCSI LUNs,
&gt; the 'dev' property(&lt;target dev='sda' bus='scsi'/&gt;) will be ignored, right?
&gt; In other words, for vhost-user-scsi disk, it more likes a controller,
&gt; maybe the controller label is suitable.
&gt; 

Yes you are right, and this was my understanding. But then its not
really a &lt;controller&gt; in libvirt's sense because we can't attach
emulated devices to it, so it's more a fit for the existing &lt;hostdev&gt;
vhost-user support. Unfortunately it's not really a clean fit anywhere,
there will have to be some kind of compromise. And I'm not sure if
&lt;disk&gt; or &lt;hostdev&gt; is right for vhost-user-blk, but hopefully others
have more clear opinions.

Thanks,
Cole

&gt; I look forward to hearing from you as soon as possible.
&gt; 
&gt; [1]: https://spdk.io/doc/vhost.html
&gt; 
&gt; Feng Li
&gt; 
&gt; Cole Robinson &lt;crobinso@redhat.com&gt; 于2019年10月10日周四 上午6:48写道：
&gt;&gt;
&gt;&gt; Sorry for the late reply, and thanks Jano for pointing out elsewhere
&gt;&gt; that this didn't receive a response.
&gt;&gt;
&gt;&gt; On 8/12/19 5:56 AM, Li Feng wrote:
&gt;&gt;&gt; Hi Guys,
&gt;&gt;&gt;
&gt;&gt;&gt; And I want to add the vhost-user-scsi-pci/vhost-user-blk-pci support
&gt;&gt;&gt; for libvirt.
&gt;&gt;&gt;
&gt;&gt;&gt; The usage in qemu like this:
&gt;&gt;&gt;
&gt;&gt;&gt; Vhost-SCSI
&gt;&gt;&gt; -chardev socket,id=char0,path=/var/tmp/vhost.0
&gt;&gt;&gt; -device vhost-user-scsi-pci,id=scsi0,chardev=char0
&gt;&gt;&gt; Vhost-BLK
&gt;&gt;&gt; -chardev socket,id=char1,path=/var/tmp/vhost.1
&gt;&gt;&gt; -device vhost-user-blk-pci,id=blk0,chardev=char1
&gt;&gt;&gt;
&gt;&gt;
&gt;&gt; Indeed that matches what I see for the qemu commits too:
&gt;&gt;
&gt;&gt; https://git.qemu.org/?p=qemu.git;a=commit;h=00343e4b54b
&gt;&gt; https://git.qemu.org/?p=qemu.git;a=commit;h=f12c1ebddf7
&gt;&gt;
&gt;&gt;&gt; What type should I add for libvirt.
&gt;&gt;&gt; Type1:
&gt;&gt;&gt;       &lt;hostdev mode='subsystem' type='vhost-user'&gt;
&gt;&gt;&gt;           &lt;source protocol='vhost-user-scsi' path='/tmp/vhost-scsi.sock'&gt;&lt;/source&gt;
&gt;&gt;&gt;           &lt;alias name="vhost-user-scsi-disk1"/&gt;
&gt;&gt;&gt;       &lt;/hostdev&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; Type2:
&gt;&gt;&gt;
&gt;&gt;&gt;       &lt;disk type='network' device='disk'&gt;
&gt;&gt;&gt;         &lt;driver name='qemu' type='raw' cache='none' io='native'/&gt;
&gt;&gt;&gt;         &lt;source protocol='vhost-user' path='/tmp/vhost-scsi.sock'&gt;
&gt;&gt;&gt;         &lt;/source&gt;
&gt;&gt;&gt;         &lt;target dev='sdb' bus='vhost-user-scsi'/&gt;
&gt;&gt;&gt;         &lt;boot order='3'/&gt;
&gt;&gt;&gt;         &lt;alias name='scsi0-0-0-1'/&gt;
&gt;&gt;&gt;         &lt;address type='drive' controller='0' bus='0' target='0' unit='1'/&gt;
&gt;&gt;&gt;       &lt;/disk&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;       &lt;disk type='network' device='disk'&gt;
&gt;&gt;&gt;         &lt;driver name='qemu' type='raw' cache='none' io='native'/&gt;
&gt;&gt;&gt;         &lt;source protocol='vhost-user' path='/tmp/vhost-blk.sock'&gt;
&gt;&gt;&gt;         &lt;/source&gt;
&gt;&gt;&gt;         &lt;target dev='vda' bus='vhost-user-blk'/&gt;
&gt;&gt;&gt;         &lt;boot order='1'/&gt;
&gt;&gt;&gt;         &lt;alias name='virtio-disk0'/&gt;
&gt;&gt;&gt;         &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x07'
&gt;&gt;&gt; function='0x0'/&gt;
&gt;&gt;&gt;       &lt;/disk&gt;
&gt;&gt;&gt;
&gt;&gt;
&gt;&gt; I think wiring this into &lt;disk&gt; makes more sense. &lt;hostdev&gt; is really an
&gt;&gt; abstraction for assigning a (typically) physical host device to the VM,
&gt;&gt; so it handles things like hiding a PCI device from the host, and passing
&gt;&gt; that exact device to the VM.
&gt;&gt;
&gt;&gt; In the vhost-user-scsi/blk case, the host device is just a special
&gt;&gt; process running on the other side of a socket, and the device
&gt;&gt; represented to the guest is a typical virtio device. So to me it makes
&gt;&gt; more sense as a &lt;disk&gt; with a &lt;source&gt; that points at that socket.
&gt;&gt;
&gt;&gt; target bus=virtio vs bus=scsi is already used to distinguish between
&gt;&gt; virtio-blk and virtio-scsi, so I think we can keep that bit as is, with
&gt;&gt; the &lt;address type=drive|pci&gt; to match. We just need to differentiate
&gt;&gt; between plain virtio and vhost-user
&gt;&gt;
&gt;&gt; network devices already have vhostuser support:
&gt;&gt;
&gt;&gt;     &lt;interface type='vhostuser'&gt;
&gt;&gt;       &lt;source type='unix' path='/tmp/vhost1.sock' mode='server|client'/&gt;
&gt;&gt;       &lt;model type='virtio'/&gt;
&gt;&gt;     &lt;/interface&gt;
&gt;&gt;
&gt;&gt; Internally that &lt;source&gt; is a virDomainChrSourceDefPtr which is our
&gt;&gt; internal representation of a chardev. So I think something akin to this
&gt;&gt; is the way to go. It will likely require updating a LOT of places in the
&gt;&gt; code that check disk type= field, probably most places that care about
&gt;&gt; whether type=NETWORK or type=!NETWORK will need to be mirrored for the
&gt;&gt; new type.
&gt;&gt;
&gt;&gt; &lt;disk type='vhostuser' device='disk'&gt;
&gt;&gt;     &lt;source type='unix' path='/path/to/vhost-user-blk.sock' mode='client'/&gt;
&gt;&gt;     &lt;target dev='vda' bus='virtio'/&gt;
&gt;&gt; &lt;/disk&gt;
&gt;&gt;
&gt;&gt; &lt;disk type='vhostuser' device='disk'&gt;
&gt;&gt;     &lt;source type='unix' path='/path/to/vhost-user-scsi.sock' mode='client'/&gt;
&gt;&gt;     &lt;target dev='sda' bus='scsi'/&gt;
&gt;&gt; &lt;/disk&gt;
&gt;&gt;
&gt;&gt; - Cole
&gt; 


- Cole

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20191007081727</emailId><senderName>Martin Kletzander</senderName><senderEmail>mkletzan@redhat.com</senderEmail><timestampReceived>2019-10-07 08:17:27-0400</timestampReceived><subject>Re: [libvirt-users] Emulated TPM doesn't work on Debian Buster</subject><body>

[Attachment #2 (multipart/signed)]


On Sat, Oct 05, 2019 at 02:32:19PM +0000, procmem@riseup.net wrote:
&gt;Hi. I am very interested in the security properties a totally open TPM
&gt;can give our users  - its use as a universal smartcard to protect all
&gt;types of keys. When adding the virtual 1.2 or 2.0 TPM I get the vague
&gt;error below. OS is Debian stable with standard packages.
&gt;
&gt;
&gt;Error starting domain: Unable to find 'swtpm' binary in $PATH: No such
&gt;file or directory
&gt;
&gt;Traceback (most recent call last):
&gt;  File "/usr/share/virt-manager/virtManager/asyncjob.py", line 75, in
&gt;cb_wrapper
&gt;    callback(asyncjob, *args, **kwargs)
&gt;  File "/usr/share/virt-manager/virtManager/asyncjob.py", line 111, in tmpcb
&gt;    callback(*args, **kwargs)
&gt;  File "/usr/share/virt-manager/virtManager/libvirtobject.py", line 66,
&gt;in newfn
&gt;    ret = fn(self, *args, **kwargs)
&gt;  File "/usr/share/virt-manager/virtManager/domain.py", line 1400, in
&gt;startup
&gt;    self._backend.create()
&gt;  File "/usr/lib/python3/dist-packages/libvirt.py", line 1080, in create
&gt;    if ret == -1: raise libvirtError ('virDomainCreate() failed', dom=self)
&gt;libvirt.libvirtError: Unable to find 'swtpm' binary in $PATH: No such
&gt;file or directory
&gt;

What is vague about this?  "Unable to find 'swtpm' binary in $PATH:" ???

Have you tried:

  apt install -y swtpm

perhaps?

&gt;
&gt;
&gt;_______________________________________________
&gt;libvirt-users mailing list
&gt;libvirt-users@redhat.com
&gt;https://www.redhat.com/mailman/listinfo/libvirt-users

["signature.asc" (application/pgp-signature)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20191007132631</emailId><senderName>"procmem () riseup ! net"</senderName><senderEmail>procmem@riseup.net</senderEmail><timestampReceived>2019-10-07 13:26:31-0400</timestampReceived><subject>Re: [libvirt-users] Emulated TPM doesn't work on Debian Buster</subject><body>


On 10/7/19 7:31 AM, Andrea Bolognani wrote:
&gt; On Sat, 2019-10-05 at 14:32 +0000, procmem@riseup.net wrote:
&gt;&gt; Hi. I am very interested in the security properties a totally open TPM
&gt;&gt; can give our users  - its use as a universal smartcard to protect all
&gt;&gt; types of keys. When adding the virtual 1.2 or 2.0 TPM I get the vague
&gt;&gt; error below. OS is Debian stable with standard packages.
&gt;&gt;
&gt;&gt;
&gt;&gt; Error starting domain: Unable to find 'swtpm' binary in $PATH: No such
&gt;&gt; file or directory
&gt; I wouldn't call this error message vague at all: it tells you exactly
&gt; what the problem is, namely that libvirt needs the 'swtpm' command
&gt; for your configuration but the latter is not available :)
&gt;
&gt; Unfortunately it looks like swtpm it's not packaged for Debian, so
&gt; I'm afraid the solution is not just a simple apt-get away :(
&gt;
Thanks for letting me know. I assumed everything in libvirt was self
contained and so I didn't expect it to need an extraneous package.
Hopefully it'll land by Debian Bullseye.

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20191007132827</emailId><senderName>"procmem () riseup ! net"</senderName><senderEmail>procmem@riseup.net</senderEmail><timestampReceived>2019-10-07 13:28:27-0400</timestampReceived><subject>Re: [libvirt-users] Emulated TPM doesn't work on Debian Buster</subject><body>


On 10/7/19 8:17 AM, Martin Kletzander wrote:
&gt; On Sat, Oct 05, 2019 at 02:32:19PM +0000, procmem@riseup.net wrote:
&gt;&gt; Hi. I am very interested in the security properties a totally open TPM
&gt;&gt; can give our users  - its use as a universal smartcard to protect all
&gt;&gt; types of keys. When adding the virtual 1.2 or 2.0 TPM I get the vague
&gt;&gt; error below. OS is Debian stable with standard packages.
&gt;&gt;
&gt;&gt;
&gt;&gt; Error starting domain: Unable to find 'swtpm' binary in $PATH: No such
&gt;&gt; file or directory
&gt;&gt;
&gt;&gt; Traceback (most recent call last):
&gt;&gt;   File "/usr/share/virt-manager/virtManager/asyncjob.py", line 75, in
&gt;&gt; cb_wrapper
&gt;&gt;     callback(asyncjob, *args, **kwargs)
&gt;&gt;   File "/usr/share/virt-manager/virtManager/asyncjob.py", line 111,
&gt;&gt; in tmpcb
&gt;&gt;     callback(*args, **kwargs)
&gt;&gt;   File "/usr/share/virt-manager/virtManager/libvirtobject.py", line 66,
&gt;&gt; in newfn
&gt;&gt;     ret = fn(self, *args, **kwargs)
&gt;&gt;   File "/usr/share/virt-manager/virtManager/domain.py", line 1400, in
&gt;&gt; startup
&gt;&gt;     self._backend.create()
&gt;&gt;   File "/usr/lib/python3/dist-packages/libvirt.py", line 1080, in create
&gt;&gt;     if ret == -1: raise libvirtError ('virDomainCreate() failed',
&gt;&gt; dom=self)
&gt;&gt; libvirt.libvirtError: Unable to find 'swtpm' binary in $PATH: No such
&gt;&gt; file or directory
&gt;&gt;
&gt;
&gt; What is vague about this?  "Unable to find 'swtpm' binary in $PATH:" ???
&gt;
&gt; Have you tried:
&gt;
&gt;  apt install -y swtpm
&gt;
&gt; perhaps?

Yeah. I've even searched the Debian package directories in case it's
available under a different name, but it's like Andrea says - it's not
packaged for Debian yet.

&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; _______________________________________________
&gt;&gt; libvirt-users mailing list
&gt;&gt; libvirt-users@redhat.com
&gt;&gt; https://www.redhat.com/mailman/listinfo/libvirt-users

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20191005135301</emailId><senderName>Oliver Dzombic</senderName><senderEmail>info@layer7.net</senderEmail><timestampReceived>2019-10-05 13:53:01-0400</timestampReceived><subject>Re: [libvirt-users] Error validating install location: Distro 'rhel8' does not exist in our dictiona</subject><body>

Hi,

if you run on a shell the command:

osinfo-query os

you will see that its:

rhl8.0               | Red Hat Linux 8.0
  | 8.0      | http://redhat.com/rhl/8.0


so instead of rhel8, i suggest you to try rhl8.0

Good luck !

Greetings
Oliver


Am 05.10.19 um 14:48 schrieb Kaushal Shriyan:
&gt; Hi,
&gt; 
&gt; I am running the below command to spawn CentOS8 based Virtual Machines
&gt; using KVM based technology
&gt; 
&gt;     virt-install --name=centos8
&gt;     --file=/linuxkvmguestosdisk/var/lib/libvirt/images/centos8
&gt;     --file-size=100 --nonsparse --vcpus=2 --ram=8096
&gt;     --network=bridge:br0 --os-type=linux --os-variant=rhel8 --graphics
&gt;     none
&gt;     --location=/linuxkvmguestosdisk/var/lib/libvirt/isos/CentOS-8-x86_64-1905-dvd1.iso
&gt;     --extra-args="console=ttyS0"
&gt;     ERROR    Error validating install location: Distro 'rhel8' does not
&gt;     exist in our dictionary
&gt; 
&gt; 
&gt; Any clue and i look forward to hearing from you. Thanks in advance.
&gt; 
&gt; Best Regards,
&gt; 
&gt; _______________________________________________
&gt; libvirt-users mailing list
&gt; libvirt-users@redhat.com
&gt; https://www.redhat.com/mailman/listinfo/libvirt-users
&gt; 

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20191006053633</emailId><senderName>Kaushal Shriyan</senderName><senderEmail>kaushalshriyan@gmail.com</senderEmail><timestampReceived>2019-10-06 05:36:33-0400</timestampReceived><subject>Re: [libvirt-users] Error validating install location: Distro 'rhel8' does not exist in our dictiona</subject><body>

[Attachment #2 (multipart/alternative)]


On Sat, Oct 5, 2019 at 7:27 PM Oliver Dzombic &lt;info@layer7.net&gt; wrote:

&gt; Hi,
&gt;
&gt; if you run on a shell the command:
&gt;
&gt; osinfo-query os
&gt;
&gt; you will see that its:
&gt;
&gt; rhl8.0               | Red Hat Linux 8.0
&gt;   | 8.0      | http://redhat.com/rhl/8.0
&gt;
&gt;
&gt; so instead of rhel8, i suggest you to try rhl8.0
&gt;
&gt; Good luck !
&gt;
&gt; Greetings
&gt; Oliver
&gt;
&gt;
&gt;
Thanks Oliver and it worked like a charm.

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;&lt;br&gt;&lt;/div&gt;&lt;br&gt;&lt;div class="gmail_quote"&gt;&lt;div dir="ltr" \
class="gmail_attr"&gt;On Sat, Oct 5, 2019 at 7:27 PM Oliver Dzombic &lt;&lt;a \
href="mailto:info@layer7.net"&gt;info@layer7.net&lt;/a&gt;&gt; wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote \
class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid \
rgb(204,204,204);padding-left:1ex"&gt;Hi,&lt;br&gt; &lt;br&gt;
if you run on a shell the command:&lt;br&gt;
&lt;br&gt;
osinfo-query os&lt;br&gt;
&lt;br&gt;
you will see that its:&lt;br&gt;
&lt;br&gt;
rhl8.0                       | Red Hat Linux 8.0&lt;br&gt;
   | 8.0         | &lt;a href="http://redhat.com/rhl/8.0" rel="noreferrer" \
target="_blank"&gt;http://redhat.com/rhl/8.0&lt;/a&gt;&lt;br&gt; &lt;br&gt;
&lt;br&gt;
so instead of rhel8, i suggest you to try rhl8.0&lt;br&gt;
&lt;br&gt;
Good luck !&lt;br&gt;
&lt;br&gt;
Greetings&lt;br&gt;
Oliver&lt;br&gt;
&lt;br&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks Oliver and it worked like a charm.  \
&lt;/div&gt;&lt;div&gt;  &lt;/div&gt;&lt;/div&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20191007081559</emailId><senderName>Martin Kletzander</senderName><senderEmail>mkletzan@redhat.com</senderEmail><timestampReceived>2019-10-07 08:15:59-0400</timestampReceived><subject>Re: [libvirt-users] Error validating install location: Distro 'rhel8' does not exist in our dictiona</subject><body>

[Attachment #2 (multipart/signed)]


On Sun, Oct 06, 2019 at 10:54:33AM +0530, Kaushal Shriyan wrote:
&gt;On Sat, Oct 5, 2019 at 7:27 PM Oliver Dzombic &lt;info@layer7.net&gt; wrote:
&gt;
&gt;&gt; Hi,
&gt;&gt;
&gt;&gt; if you run on a shell the command:
&gt;&gt;
&gt;&gt; osinfo-query os
&gt;&gt;
&gt;&gt; you will see that its:
&gt;&gt;
&gt;&gt; rhl8.0               | Red Hat Linux 8.0
&gt;&gt;   | 8.0      | http://redhat.com/rhl/8.0

This is Red Hat Linux 8 with a release date of 30 September 2002 [1] and not Red
Hat Enterprise Linux.  You are not using any new devices/settings.

Instead you should probably use rhel8.0 or, even better, since you are using
centos, the centos release.  However that one does not exist in the osinfo db
yet due to the new style of releases that happened there and we need to figure
out how to properly represent it in the osinfo data.

If ou re not seeing rhel8-unknown or rhel8.0 you should update your osinfo
database.  Either update you package or you can also use `osinfo-db-import
--latest` to update it locally for your user.

Hope that helps,
Martin

[1] https://en.wikipedia.org/wiki/Red_Hat_Linux

&gt;&gt;
&gt;&gt;
&gt;&gt; so instead of rhel8, i suggest you to try rhl8.0
&gt;&gt;
&gt;&gt; Good luck !
&gt;&gt;
&gt;&gt; Greetings
&gt;&gt; Oliver
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;Thanks Oliver and it worked like a charm.

&gt;_______________________________________________
&gt;libvirt-users mailing list
&gt;libvirt-users@redhat.com
&gt;https://www.redhat.com/mailman/listinfo/libvirt-users


["signature.asc" (application/pgp-signature)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20191007140308</emailId><senderName>Andrea Bolognani</senderName><senderEmail>abologna@redhat.com</senderEmail><timestampReceived>2019-10-07 14:03:08-0400</timestampReceived><subject>Re: [libvirt-users] Emulated TPM doesn't work on Debian Buster</subject><body>

On Mon, 2019-10-07 at 13:26 +0000, procmem@riseup.net wrote:
&gt; On 10/7/19 7:31 AM, Andrea Bolognani wrote:
&gt; &gt; On Sat, 2019-10-05 at 14:32 +0000, procmem@riseup.net wrote:
&gt; &gt; &gt; Hi. I am very interested in the security properties a totally open TPM
&gt; &gt; &gt; can give our users  - its use as a universal smartcard to protect all
&gt; &gt; &gt; types of keys. When adding the virtual 1.2 or 2.0 TPM I get the vague
&gt; &gt; &gt; error below. OS is Debian stable with standard packages.
&gt; &gt; &gt; 
&gt; &gt; &gt; 
&gt; &gt; &gt; Error starting domain: Unable to find 'swtpm' binary in $PATH: No such
&gt; &gt; &gt; file or directory
&gt; &gt; 
&gt; &gt; I wouldn't call this error message vague at all: it tells you exactly
&gt; &gt; what the problem is, namely that libvirt needs the 'swtpm' command
&gt; &gt; for your configuration but the latter is not available :)
&gt; &gt; 
&gt; &gt; Unfortunately it looks like swtpm it's not packaged for Debian, so
&gt; &gt; I'm afraid the solution is not just a simple apt-get away :(
&gt; &gt; 
&gt; Thanks for letting me know. I assumed everything in libvirt was self
&gt; contained and so I didn't expect it to need an extraneous package.
&gt; Hopefully it'll land by Debian Bullseye.

libvirt calls out to several external tools, the most high-profile
example being of course QEMU ;)

-- 
Andrea Bolognani / Red Hat / Virtualization

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20191008171522</emailId><senderName>Michael Lipp</senderName><senderEmail>mnl@mnl.de</senderEmail><timestampReceived>2019-10-08 17:15:22-0400</timestampReceived><subject>Re: [libvirt-users] hidden state='on' not working</subject><body>

Indeed, that does it. Thanks!

 - Michael

Am 08.10.19 um 19:03 schrieb Cole Robinson:
&gt; On 10/8/19 12:33 PM, Michael Lipp wrote:
&gt;&gt; Hi,
&gt;&gt;
&gt;&gt; I have set
&gt;&gt;
&gt;&gt;      &lt;kvm&gt;
&gt;&gt;        &lt;hidden state='on'/&gt;
&gt;&gt;      &lt;/kvm&gt;
&gt;&gt;
&gt;
&gt; That adds -cpu ...,kvm=off
&gt;
&gt;&gt; in my configuration file. But looking at the command line, I see
&gt;&gt;
&gt;&gt; -cpu ...,hypervisor=on,...
&gt;&gt;
&gt;
&gt; If you want hypervisor=off, want to add this to your &lt;cpu&gt; block
&gt;
&gt;   &lt;feature policy='disable' name='hypervisor'/&gt;
&gt;
&gt; - Cole


_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20191011065126</emailId><senderName>gokul cg</senderName><senderEmail>gokuljnpr@gmail.com</senderEmail><timestampReceived>2019-10-11 06:51:26-0400</timestampReceived><subject>[libvirt-users] Fwd: Libvirt-QEMU : Multiplex the output from qemu's serial port to a pty as well as</subject><body>

[Attachment #2 (multipart/alternative)]


+dev
Hi Folks ,

As per https://libvirt.org/formatdomain.html#elementsConsole
Regardless of the type, character devices can have an optional log file
associated with them.
Whether the lgging functionality is same as mapping device to file ?
Whether libvirt xml syntax below both 1 and 2 are same ?

    1)
    &lt;serial type='pty'&gt;
      &lt;log
file='/var/lib/nova/instances/7151c8b7-1ea5-4701-bb79-b482d9e253b8/console.log'
append='off'/&gt;
      &lt;target port='0'/&gt;
    &lt;/serial&gt;

    2)
    &lt;serial type='pty'&gt;
      &lt;source path='/tmp/serial.log'/&gt;
      &lt;target port='0'/&gt;
    &lt;/serial&gt;

    is it possible to multiplex the output from qemu's serial port  to a
pty as well as a file (basically redirect console to file as well as pty
device)?

Regards
Gokul

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;&lt;div&gt;+dev&lt;br&gt;&lt;/div&gt;Hi Folks ,&lt;br&gt;&lt;div class="gmail_quote"&gt;&lt;div \
dir="ltr"&gt;&lt;div class="gmail_quote"&gt;&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;&lt;div \
dir="ltr"&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;As per  &lt;a \
href="https://libvirt.org/formatdomain.html#elementsConsole" \
target="_blank"&gt;https://libvirt.org/formatdomain.html#elementsConsole&lt;/a&gt;  \
&lt;/div&gt;&lt;div&gt;Regardless of the type, character devices can have an optional log file \
associated with them.  &lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;Whether the lgging functionality is same \
as mapping device to file ?&lt;/div&gt;&lt;div&gt;Whether libvirt xml syntax below both 1 and 2 \
are same ?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;      1)&lt;/div&gt;&lt;div&gt;      &lt;serial \
type='pty'&gt;&lt;/div&gt;&lt;div&gt;         &lt;log \
file='/var/lib/nova/instances/7151c8b7-1ea5-4701-bb79-b482d9e253b8/console.log' \
append='off'/&gt;&lt;/div&gt;&lt;div&gt;         &lt;target \
port='0'/&gt;&lt;/div&gt;&lt;div&gt;      &lt;/serial&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;      \
2)&lt;/div&gt;&lt;div&gt;      &lt;serial type='pty'&gt;&lt;/div&gt;&lt;div&gt;         &lt;source \
path='/tmp/serial.log'/&gt;&lt;/div&gt;&lt;div&gt;         &lt;target \
port='0'/&gt;&lt;/div&gt;&lt;div&gt;      &lt;/serial&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;      \
is it possible to multiplex the output from qemu's serial port   to a pty as well \
as a file (basically redirect console to file as well as pty \
device)?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Regards&lt;/div&gt;&lt;div&gt;Gokul&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;
 &lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20191011072538</emailId><senderName>gokul cg</senderName><senderEmail>gokuljnpr@gmail.com</senderEmail><timestampReceived>2019-10-11 07:25:38-0400</timestampReceived><subject>Re: [libvirt-users] Libvirt-QEMU : Multiplex the output from qemu's serial port to a pty as well as </subject><body>

[Attachment #2 (multipart/alternative)]


Hi All,

I could following documentation ,
https://wiki.libvirt.org/page/LibvirtConsoleManagement
I hope this doc is upto date , as of now there is no way other than
conserver. Please let me know if there is any alternative.
LibvirtConsoleManagement (doc snippet pasted from above link)
----------------------------------------------------------
This page describes an approach to managing virtual machine text consoles,
which leverages the conserver daemon
Background information

With Xen, LXC, KVM, etc hypervisors there is typically a serial console or
a paravirtualized log for each virtual machine. Typically this is exposed
on the host as a dynamically allocated psuedo TTY, but they can also be
configured to use a UNIX or TCP socket, a FIFO pipe or (output only) to a
plain file.

The consoles are typically used as a text-mode interactive shell, or to log
all guest console messages, or both. There are a number of limitations with
the console functionality that is exposed natively by the hypervisors

   - It is impossible to configure a console to both provide an interactive
   pTTY, and log all data to a file concurrently.
   - If configured to log to a file, the file will grow without any bounds
   - The console TTY names are unstable across restarts of the virtual
   machine, since they are dynamically allocated by the host kernel
   - The console TTYs only exist while the VM is running
   - There is typically no native, secure, remote TCP access

Architecture design

The problems described with the native hypervisor console configuration can
broadly be addressed by leveraging the conserver daemon, which is
distributed as a standard part of most Linux distributions. The main
integration pain point is that the conserver daemon uses a static
configuration file, while virtual machines can come &amp; go at any moment.

There is a need, therefore, to have a way of automatically
generating/updating the conserver configuration file on the fly to deal
with dynamic virtual machines. This can be achieved by having a process
which listens out for libvirt domain lifecycle events and triggers an
update of the conserver configuration file at appropriate times.

Regards
Gokul

On Fri, Oct 11, 2019 at 12:20 PM gokul cg &lt;gokuljnpr@gmail.com&gt; wrote:

&gt; +dev
&gt; Hi Folks ,
&gt;
&gt; As per https://libvirt.org/formatdomain.html#elementsConsole
&gt; Regardless of the type, character devices can have an optional log file
&gt; associated with them.
&gt; Whether the lgging functionality is same as mapping device to file ?
&gt; Whether libvirt xml syntax below both 1 and 2 are same ?
&gt;
&gt;     1)
&gt;     &lt;serial type='pty'&gt;
&gt;       &lt;log
&gt; file='/var/lib/nova/instances/7151c8b7-1ea5-4701-bb79-b482d9e253b8/console.log'
&gt; append='off'/&gt;
&gt;       &lt;target port='0'/&gt;
&gt;     &lt;/serial&gt;
&gt;
&gt;     2)
&gt;     &lt;serial type='pty'&gt;
&gt;       &lt;source path='/tmp/serial.log'/&gt;
&gt;       &lt;target port='0'/&gt;
&gt;     &lt;/serial&gt;
&gt;
&gt;     is it possible to multiplex the output from qemu's serial port  to a
&gt; pty as well as a file (basically redirect console to file as well as pty
&gt; device)?
&gt;
&gt; Regards
&gt; Gokul
&gt;
&gt;

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;Hi \
All,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I could following documentation ,  &lt;/div&gt;&lt;div&gt;&lt;a \
href="https://wiki.libvirt.org/page/LibvirtConsoleManagement"&gt;https://wiki.libvirt.org/page/LibvirtConsoleManagement&lt;/a&gt; \
&lt;br&gt;&lt;/div&gt;&lt;div&gt;I hope this doc is upto date , as of now there is no way other than \
conserver. Please let me know if there is any alternative.&lt;/div&gt;&lt;div&gt;&lt;h1 \
id="gmail-firstHeading" class="gmail-firstHeading" lang="en" \
style="color:rgb(0,0,0);background-image:none;margin:0em 0px \
0.1em;overflow:hidden;padding:0px;border:0px;line-height:1.2em;font-family:LibvirtOverpass"&gt;&lt;font \
size="2"&gt;LibvirtConsoleManagement (doc snippet pasted from above \
link)&lt;/font&gt;&lt;/h1&gt;&lt;/div&gt;&lt;div&gt;----------------------------------------------------------&lt;/div&gt;&lt;div&gt;&lt;span \
style="color:rgb(0,0,0);font-family:LibvirtOverpass;font-size:14px"&gt;This page \
describes an approach to managing virtual machine text consoles, which leverages the \
conserver daemon&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;h2 \
style="color:rgb(0,0,0);background-image:none;margin:1em 0px \
0.25em;overflow:hidden;padding:0px;border:0px;font-size:1.4em;font-family:LibvirtOverpass"&gt;&lt;span \
class="gmail-mw-headline" id="gmail-Background_information"&gt;Background \
information&lt;/span&gt;&lt;/h2&gt;&lt;p style="color:rgb(0,0,0);margin:1em \
0px;padding:0px;font-family:LibvirtOverpass;font-size:14px"&gt;With Xen, LXC, KVM, etc \
hypervisors there is typically a serial console or a paravirtualized log for each \
virtual machine. Typically this is exposed on the host as a dynamically allocated \
psuedo TTY, but they can also be configured to use a UNIX or TCP socket, a FIFO pipe \
or (output only) to a plain file.&lt;/p&gt;&lt;p style="color:rgb(0,0,0);margin:1em \
0px;padding:0px;font-family:LibvirtOverpass;font-size:14px"&gt;The consoles are \
typically used as a text-mode interactive shell, or to log all guest console \
messages, or both. There are a number of limitations with the console functionality \
that is exposed natively by the hypervisors&lt;/p&gt;&lt;ul \
style="color:rgb(0,0,0);margin:0.3em 0px 0px \
1.6em;padding:0px;font-family:LibvirtOverpass;font-size:14px"&gt;&lt;li \
style="margin-bottom:0.1em"&gt;It is impossible to configure a console to both provide \
an interactive pTTY, and log all data to a file concurrently.&lt;/li&gt;&lt;li \
style="margin-bottom:0.1em"&gt;If configured to log to a file, the file will grow \
without any bounds&lt;/li&gt;&lt;li style="margin-bottom:0.1em"&gt;The console TTY names are \
unstable across restarts of the virtual machine, since they are dynamically allocated \
by the host kernel&lt;/li&gt;&lt;li style="margin-bottom:0.1em"&gt;The console TTYs only exist \
while the VM is running&lt;/li&gt;&lt;li style="margin-bottom:0.1em"&gt;There is typically no \
native, secure, remote TCP access&lt;/li&gt;&lt;/ul&gt;&lt;h2 \
style="color:rgb(0,0,0);background-image:none;margin:1em 0px \
0.25em;overflow:hidden;padding:0px;border:0px;font-size:1.4em;font-family:LibvirtOverpass"&gt;&lt;span \
class="gmail-mw-headline" id="gmail-Architecture_design"&gt;Architecture \
design&lt;/span&gt;&lt;/h2&gt;&lt;p style="color:rgb(0,0,0);margin:1em \
0px;padding:0px;font-family:LibvirtOverpass;font-size:14px"&gt;The problems described \
with the native hypervisor console configuration can broadly be addressed by \
leveraging the conserver daemon, which is distributed as a standard part of most \
Linux distributions. The main integration pain point is that the conserver daemon \
uses a static configuration file, while virtual machines can come &amp; go at any \
moment.  &lt;/p&gt;&lt;p style="color:rgb(0,0,0);margin:1em \
0px;padding:0px;font-family:LibvirtOverpass;font-size:14px"&gt;There is a need, \
therefore, to have a way of automatically generating/updating the conserver \
configuration file on the fly to deal with dynamic virtual machines. This can be \
achieved by having a process which listens out for libvirt domain lifecycle events \
and triggers an update of the conserver configuration file at appropriate \
times.&lt;/p&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Regards&lt;/div&gt;&lt;div&gt;Gokul  \
&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;div class="gmail_quote"&gt;&lt;div dir="ltr" \
class="gmail_attr"&gt;On Fri, Oct 11, 2019 at 12:20 PM gokul cg &lt;&lt;a \
href="mailto:gokuljnpr@gmail.com"&gt;gokuljnpr@gmail.com&lt;/a&gt;&gt; \
wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote class="gmail_quote" style="margin:0px 0px 0px \
0.8ex;border-left-width:1px;border-left-style:solid;border-left-color:rgb(204,204,204);padding-left:1ex"&gt;&lt;div \
dir="ltr"&gt;&lt;div&gt;+dev&lt;br&gt;&lt;/div&gt;Hi Folks ,&lt;br&gt;&lt;div class="gmail_quote"&gt;&lt;div \
dir="ltr"&gt;&lt;div class="gmail_quote"&gt;&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;&lt;div \
dir="ltr"&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;As per  &lt;a \
href="https://libvirt.org/formatdomain.html#elementsConsole" \
target="_blank"&gt;https://libvirt.org/formatdomain.html#elementsConsole&lt;/a&gt;  \
&lt;/div&gt;&lt;div&gt;Regardless of the type, character devices can have an optional log file \
associated with them.  &lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;Whether the lgging functionality is same \
as mapping device to file ?&lt;/div&gt;&lt;div&gt;Whether libvirt xml syntax below both 1 and 2 \
are same ?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;      1)&lt;/div&gt;&lt;div&gt;      &lt;serial \
type='pty'&gt;&lt;/div&gt;&lt;div&gt;         &lt;log \
file='/var/lib/nova/instances/7151c8b7-1ea5-4701-bb79-b482d9e253b8/console.log' \
append='off'/&gt;&lt;/div&gt;&lt;div&gt;         &lt;target \
port='0'/&gt;&lt;/div&gt;&lt;div&gt;      &lt;/serial&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;      \
2)&lt;/div&gt;&lt;div&gt;      &lt;serial type='pty'&gt;&lt;/div&gt;&lt;div&gt;         &lt;source \
path='/tmp/serial.log'/&gt;&lt;/div&gt;&lt;div&gt;         &lt;target \
port='0'/&gt;&lt;/div&gt;&lt;div&gt;      &lt;/serial&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;      \
is it possible to multiplex the output from qemu's serial port   to a pty as well \
as a file (basically redirect console to file as well as pty \
device)?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Regards&lt;/div&gt;&lt;div&gt;Gokul&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;
 &lt;/div&gt;&lt;/div&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;/blockquote&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20191015113459</emailId><senderName>Li Feng</senderName><senderEmail>fengli@smartx.com</senderEmail><timestampReceived>2019-10-15 11:34:59-0400</timestampReceived><subject>Re: [libvirt-users] [libvirt] Add support for vhost-user-scsi-pci/vhost-user-blk-pci</subject><body>

Cole Robinson &lt;crobinso@redhat.com&gt; ���2019���10���15��������� ������1:48���������
&gt; 
&gt; On 10/14/19 3:12 AM, Li Feng wrote:
&gt; &gt; Hi Cole &amp; Michal,
&gt; &gt; 
&gt; &gt; I'm sorry for my late response, I just end my journey today.
&gt; &gt; Thank your response, your suggestion is very helpful to me.
&gt; &gt; 
&gt; &gt; I have added Michal in this mail, Michal helps me review my initial patchset.
&gt; &gt; (https://www.spinics.net/linux/fedora/libvir/msg191339.html)
&gt; &gt; 
&gt; 
&gt; Whoops I missed that posting, I didn't realize you had sent patches!
&gt; 
&gt; &gt; All concern about this feature is the XML design.
&gt; &gt; My original XML design exposes more details of Qemu.
&gt; &gt; 
&gt; &gt; &lt;vhost-user-blk-pci type='unix'&gt;
&gt; &gt; &lt;source type='bind' path='/tmp/vhost-blk.sock'&gt;
&gt; &gt; &lt;reconnect enabled='yes' timeout='5' /&gt;
&gt; &gt; &lt;/source&gt;
&gt; &gt; &lt;queue num='4'/&gt;
&gt; &gt; &lt;/vhost-user-blk-pci&gt;
&gt; &gt; 
&gt; &gt; As Cole's suggestion, the better design with all vhost-user-scsi/blk
&gt; &gt; features would like this:
&gt; &gt; 
&gt; &gt; vhost-user-blk:
&gt; &gt; 
&gt; &gt; &lt;disk type='vhostuser' device='disk'&gt;
&gt; &gt; &lt;source type='unix' path='/path/to/vhost-user-blk.sock' mode='client'&gt;
&gt; &gt; &lt;reconnect enabled='yes' timeout='5' /&gt;
&gt; &gt; &lt;/source&gt;
&gt; &gt; &lt;target dev='vda' bus='virtio'/&gt;
&gt; &gt; &lt;queue num='4'/&gt;
&gt; &gt; &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x07' function='0x0'/&gt;
&gt; &gt; &lt;/disk&gt;
&gt; &gt; 
&gt; &gt; vhost-user-scsi:
&gt; &gt; 
&gt; &gt; &lt;disk type='vhostuser' device='disk'&gt;
&gt; &gt; &lt;source type='unix' path='/path/to/vhost-user-scsi.sock' mode='client'&gt;
&gt; &gt; &lt;reconnect enabled='yes' timeout='5' /&gt;
&gt; &gt; &lt;/source&gt;
&gt; &gt; &lt;target dev='sda' bus='scsi'/&gt;
&gt; &gt; &lt;queue num='4'/&gt;
&gt; &gt; &lt;/disk&gt;
&gt; &gt; 
&gt; 
&gt; I think my SCSI idea is wrong, sorry. vhost-user-scsi is for passing a
&gt; scsi host adapter to the VM, correct? If so, then it's not really a
&gt; &lt;disk&gt;, and so using the existing vhost-scsi support in &lt;hostdev&gt; is
&gt; probably better. &lt;hostdev&gt; could possible be used for vhost-user-blk as well
&gt; 
&gt; Can you provide some examples of full qemu command lines using
&gt; vhost-user-blk and vhost-user-scsi? Just linking to examples else where
&gt; is fine, but I'm wondering if there's more context

You could check the vhost-user-scsi/blk examples from SPDK pages:
https://spdk.io/doc/vhost.html

&gt; 
&gt; Internally we already have an abstraction for vhost-scsi:
&gt; 
&gt; &lt;hostdev mode='subsystem' type='scsi_host'&gt;
&gt; &lt;source protocol='vhost' wwpn='XXX'/&gt;
&gt; &lt;/hostdev&gt;
&gt; 
&gt; 
&gt; The obvious extension would be
&gt; 
&gt; &lt;hostdev mode='subsystem' type='scsi_host'&gt;
&gt; &lt;source protocol='vhostuser' type='unix'
&gt; path='/path/to/vhost-user-scsi.sock' mode='client'/&gt;
&gt; &lt;/hostdev&gt;
&gt; 
&gt; Internally implementing this will be weird. The &lt;source&gt; parameters are
&gt; only dictated by the hostdev type= field, but in this case they would be
&gt; dictated by the &lt;source protocol=&gt; field, and we would want to reuse the
&gt; internal chardev abstraction.
&gt; 
&gt; vhost-user-blk could be implemented similarly, but with type='storage'
&gt; which is the way we pass through block devices to LXC guests, but it
&gt; isn't currently supported in the qemu driver.
&gt; 
&gt; I dunno. Maybe Michal or danpb can provide guidance
&gt; 
@Michal, @danpb, could you give some guidance?
&gt; 
&gt; &gt; Conclusion:
&gt; &gt; 1. Add new type(vhostuser) for disk label;
&gt; &gt; 2. Add queue sub-label for disk to support multiqueue(&lt;queue
&gt; &gt; num='4'/&gt;) or reusing the driver label
&gt; &gt; (&lt;driver name='vhostuser' queues='4'), which one is better?
&gt; &gt; Qemu support multiqueue like this:
&gt; &gt; -device vhost-user-scsi-pci,id=scsi0,chardev=spdk_vhost_scsi0,num_queues=4
&gt; &gt; -device vhost-user-blk-pci,chardev=spdk_vhost_blk0,num-queues=4
&gt; &gt; 
&gt; 
&gt; num-queues is already supported by libvirt for both &lt;disk&gt; and &lt;hostdev&gt;
&gt; with &lt;driver queues=X/&gt;, so whether we use &lt;disk&gt; or &lt;hostdev&gt; you won't
&gt; need to add any new XML here.
Got it.

&gt; 
&gt; &gt; Another question:
&gt; &gt; When qemu is connecting to a vhost-user-scsi controller[1],  there may
&gt; &gt; exist multiple LUNs under one target,
&gt; &gt; then one disklabel(&lt;disk/&gt;) will represent multiple SCSI LUNs,
&gt; &gt; the 'dev' property(&lt;target dev='sda' bus='scsi'/&gt;) will be ignored, right?
&gt; &gt; In other words, for vhost-user-scsi disk, it more likes a controller,
&gt; &gt; maybe the controller label is suitable.
&gt; &gt; 
&gt; 
&gt; Yes you are right, and this was my understanding. But then its not
&gt; really a &lt;controller&gt; in libvirt's sense because we can't attach
&gt; emulated devices to it, so it's more a fit for the existing &lt;hostdev&gt;
&gt; vhost-user support. Unfortunately it's not really a clean fit anywhere,
&gt; there will have to be some kind of compromise. And I'm not sure if
&gt; &lt;disk&gt; or &lt;hostdev&gt; is right for vhost-user-blk, but hopefully others
&gt; have more clear opinions.

I'm also confused about it.
Thanks for your reply.

Thanks,
Feng Li

&gt; 
&gt; Thanks,
&gt; Cole
&gt; 
&gt; &gt; I look forward to hearing from you as soon as possible.
&gt; &gt; 
&gt; &gt; [1]: https://spdk.io/doc/vhost.html
&gt; &gt; 
&gt; &gt; Feng Li
&gt; &gt; 
&gt; &gt; Cole Robinson &lt;crobinso@redhat.com&gt; ���2019���10���10��������� \
&gt; &gt; ������6:48���������
&gt; &gt; &gt; 
&gt; &gt; &gt; Sorry for the late reply, and thanks Jano for pointing out elsewhere
&gt; &gt; &gt; that this didn't receive a response.
&gt; &gt; &gt; 
&gt; &gt; &gt; On 8/12/19 5:56 AM, Li Feng wrote:
&gt; &gt; &gt; &gt; Hi Guys,
&gt; &gt; &gt; &gt; 
&gt; &gt; &gt; &gt; And I want to add the vhost-user-scsi-pci/vhost-user-blk-pci support
&gt; &gt; &gt; &gt; for libvirt.
&gt; &gt; &gt; &gt; 
&gt; &gt; &gt; &gt; The usage in qemu like this:
&gt; &gt; &gt; &gt; 
&gt; &gt; &gt; &gt; Vhost-SCSI
&gt; &gt; &gt; &gt; -chardev socket,id=char0,path=/var/tmp/vhost.0
&gt; &gt; &gt; &gt; -device vhost-user-scsi-pci,id=scsi0,chardev=char0
&gt; &gt; &gt; &gt; Vhost-BLK
&gt; &gt; &gt; &gt; -chardev socket,id=char1,path=/var/tmp/vhost.1
&gt; &gt; &gt; &gt; -device vhost-user-blk-pci,id=blk0,chardev=char1
&gt; &gt; &gt; &gt; 
&gt; &gt; &gt; 
&gt; &gt; &gt; Indeed that matches what I see for the qemu commits too:
&gt; &gt; &gt; 
&gt; &gt; &gt; https://git.qemu.org/?p=qemu.git;a=commit;h=00343e4b54b
&gt; &gt; &gt; https://git.qemu.org/?p=qemu.git;a=commit;h=f12c1ebddf7
&gt; &gt; &gt; 
&gt; &gt; &gt; &gt; What type should I add for libvirt.
&gt; &gt; &gt; &gt; Type1:
&gt; &gt; &gt; &gt; &lt;hostdev mode='subsystem' type='vhost-user'&gt;
&gt; &gt; &gt; &gt; &lt;source protocol='vhost-user-scsi' path='/tmp/vhost-scsi.sock'&gt;&lt;/source&gt;
&gt; &gt; &gt; &gt; &lt;alias name="vhost-user-scsi-disk1"/&gt;
&gt; &gt; &gt; &gt; &lt;/hostdev&gt;
&gt; &gt; &gt; &gt; 
&gt; &gt; &gt; &gt; 
&gt; &gt; &gt; &gt; Type2:
&gt; &gt; &gt; &gt; 
&gt; &gt; &gt; &gt; &lt;disk type='network' device='disk'&gt;
&gt; &gt; &gt; &gt; &lt;driver name='qemu' type='raw' cache='none' io='native'/&gt;
&gt; &gt; &gt; &gt; &lt;source protocol='vhost-user' path='/tmp/vhost-scsi.sock'&gt;
&gt; &gt; &gt; &gt; &lt;/source&gt;
&gt; &gt; &gt; &gt; &lt;target dev='sdb' bus='vhost-user-scsi'/&gt;
&gt; &gt; &gt; &gt; &lt;boot order='3'/&gt;
&gt; &gt; &gt; &gt; &lt;alias name='scsi0-0-0-1'/&gt;
&gt; &gt; &gt; &gt; &lt;address type='drive' controller='0' bus='0' target='0' unit='1'/&gt;
&gt; &gt; &gt; &gt; &lt;/disk&gt;
&gt; &gt; &gt; &gt; 
&gt; &gt; &gt; &gt; 
&gt; &gt; &gt; &gt; &lt;disk type='network' device='disk'&gt;
&gt; &gt; &gt; &gt; &lt;driver name='qemu' type='raw' cache='none' io='native'/&gt;
&gt; &gt; &gt; &gt; &lt;source protocol='vhost-user' path='/tmp/vhost-blk.sock'&gt;
&gt; &gt; &gt; &gt; &lt;/source&gt;
&gt; &gt; &gt; &gt; &lt;target dev='vda' bus='vhost-user-blk'/&gt;
&gt; &gt; &gt; &gt; &lt;boot order='1'/&gt;
&gt; &gt; &gt; &gt; &lt;alias name='virtio-disk0'/&gt;
&gt; &gt; &gt; &gt; &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x07'
&gt; &gt; &gt; &gt; function='0x0'/&gt;
&gt; &gt; &gt; &gt; &lt;/disk&gt;
&gt; &gt; &gt; &gt; 
&gt; &gt; &gt; 
&gt; &gt; &gt; I think wiring this into &lt;disk&gt; makes more sense. &lt;hostdev&gt; is really an
&gt; &gt; &gt; abstraction for assigning a (typically) physical host device to the VM,
&gt; &gt; &gt; so it handles things like hiding a PCI device from the host, and passing
&gt; &gt; &gt; that exact device to the VM.
&gt; &gt; &gt; 
&gt; &gt; &gt; In the vhost-user-scsi/blk case, the host device is just a special
&gt; &gt; &gt; process running on the other side of a socket, and the device
&gt; &gt; &gt; represented to the guest is a typical virtio device. So to me it makes
&gt; &gt; &gt; more sense as a &lt;disk&gt; with a &lt;source&gt; that points at that socket.
&gt; &gt; &gt; 
&gt; &gt; &gt; target bus=virtio vs bus=scsi is already used to distinguish between
&gt; &gt; &gt; virtio-blk and virtio-scsi, so I think we can keep that bit as is, with
&gt; &gt; &gt; the &lt;address type=drive|pci&gt; to match. We just need to differentiate
&gt; &gt; &gt; between plain virtio and vhost-user
&gt; &gt; &gt; 
&gt; &gt; &gt; network devices already have vhostuser support:
&gt; &gt; &gt; 
&gt; &gt; &gt; &lt;interface type='vhostuser'&gt;
&gt; &gt; &gt; &lt;source type='unix' path='/tmp/vhost1.sock' mode='server|client'/&gt;
&gt; &gt; &gt; &lt;model type='virtio'/&gt;
&gt; &gt; &gt; &lt;/interface&gt;
&gt; &gt; &gt; 
&gt; &gt; &gt; Internally that &lt;source&gt; is a virDomainChrSourceDefPtr which is our
&gt; &gt; &gt; internal representation of a chardev. So I think something akin to this
&gt; &gt; &gt; is the way to go. It will likely require updating a LOT of places in the
&gt; &gt; &gt; code that check disk type= field, probably most places that care about
&gt; &gt; &gt; whether type=NETWORK or type=!NETWORK will need to be mirrored for the
&gt; &gt; &gt; new type.
&gt; &gt; &gt; 
&gt; &gt; &gt; &lt;disk type='vhostuser' device='disk'&gt;
&gt; &gt; &gt; &lt;source type='unix' path='/path/to/vhost-user-blk.sock' mode='client'/&gt;
&gt; &gt; &gt; &lt;target dev='vda' bus='virtio'/&gt;
&gt; &gt; &gt; &lt;/disk&gt;
&gt; &gt; &gt; 
&gt; &gt; &gt; &lt;disk type='vhostuser' device='disk'&gt;
&gt; &gt; &gt; &lt;source type='unix' path='/path/to/vhost-user-scsi.sock' mode='client'/&gt;
&gt; &gt; &gt; &lt;target dev='sda' bus='scsi'/&gt;
&gt; &gt; &gt; &lt;/disk&gt;
&gt; &gt; &gt; 
&gt; &gt; &gt; - Cole
&gt; &gt; 
&gt; 
&gt; 
&gt; - Cole

-- 
The SmartX email address is only for business purpose. Any sent message 
that is not related to the business is not authorized or permitted by 
SmartX.
���������������������������������������������������SmartX���������������. \
�������������������������������������� \
���,������������������������������������������������������������.



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20191016124831</emailId><senderName>Marko Horn</senderName><senderEmail>marko.horn@zbfmail.de</senderEmail><timestampReceived>2019-10-16 12:48:31-0400</timestampReceived><subject>Re: [libvirt-users] create virtual network fails with virt-manager</subject><body>

Hi Martin

Am 2019-10-11 09:58, schrieb Martin Kletzander:
&gt; On Thu, Oct 10, 2019 at 03:40:24PM +0200, Marko Horn wrote:
&gt;&gt; 
&gt;&gt; 
&gt;&gt; hello list,
&gt;&gt; 
&gt;&gt; creatig a virtual network via virt-manager fails.
&gt;&gt; gentoo linux vanilla-sources 5.3.1
&gt;&gt; virt-manager 2.2.1
&gt;&gt; qemu 4.0
&gt;&gt; libvirt 5.5.0
&gt;&gt; 
&gt; 
&gt; Please try newer libvirt.  There were some fixes related to 
&gt; iptables/nf_tables
&gt; in libvirt in recent releases, so it might just solve that for you.

just want to tell you that switching to libvirt 5.6.0 on gentoo fixed 
that.
now ist possible to create networks.

marko

&gt; 
&gt;&gt; 
&gt;&gt; the error output of
&gt;&gt; 
&gt;&gt; Error creating virtual network: internal error: Failed to apply 
&gt;&gt; firewall
&gt;&gt; rules /sbin/iptables -w --table filter --insert LIBVIRT_INP
&gt;&gt; --in-interface virbr1 --protocol tcp --destination-port 67 --jump
&gt;&gt; ACCEPT: iptables: No chain/target/match by that name.
&gt;&gt; 
&gt;&gt; 
&gt;&gt; Traceback (most recent call last):
&gt;&gt;   File "/usr/share/virt-manager/virtManager/asyncjob.py", line 75, in
&gt;&gt; cb_wrapper
&gt;&gt;     callback(asyncjob, *args, **kwargs)
&gt;&gt;   File "/usr/share/virt-manager/virtManager/createnet.py", line 472, 
&gt;&gt; in
&gt;&gt; _async_net_create
&gt;&gt;     netobj.create()
&gt;&gt;   File "/usr/lib64/python3.6/site-packages/libvirt.py", line 2993, in
&gt;&gt; create
&gt;&gt;     if ret == -1: raise libvirtError ('virNetworkCreate() failed',
&gt;&gt; net=self)
&gt;&gt; libvirt.libvirtError: internal error: Failed to apply firewall rules
&gt;&gt; /sbin/iptables -w --table filter --insert LIBVIRT_INP --in-interface
&gt;&gt; virbr1 --protocol tcp --destination-port 67 --jump ACCEPT: iptables: 
&gt;&gt; No
&gt;&gt; chain/target/match by that name.
&gt;&gt; 
&gt;&gt; 
&gt;&gt; 
&gt;&gt; /sbin/iptables exists
&gt;&gt; 
&gt;&gt; any ideas?
&gt;&gt; 
&gt;&gt; kind regards
&gt;&gt; m@rko
&gt;&gt; 
&gt;&gt; 
&gt;&gt; 
&gt;&gt; -- zbfmail - Mittendrin statt nur Datei!
&gt;&gt;           Datei sein ist alles!
&gt;&gt; 
&gt;&gt; _______________________________________________
&gt;&gt; libvirt-users mailing list
&gt;&gt; libvirt-users@redhat.com
&gt;&gt; https://www.redhat.com/mailman/listinfo/libvirt-users
&gt; 
&gt; _______________________________________________
&gt; libvirt-users mailing list
&gt; libvirt-users@redhat.com
&gt; https://www.redhat.com/mailman/listinfo/libvirt-users

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20191017094358</emailId><senderName>Roman Mohr</senderName><senderEmail>rmohr@redhat.com</senderEmail><timestampReceived>2019-10-17 09:43:58-0400</timestampReceived><subject>Re: [libvirt-users] Transient permission denied errors when sending audit logs</subject><body>

[Attachment #2 (multipart/alternative)]


On Thu, Oct 17, 2019 at 11:34 AM Daniel P. Berrangé &lt;berrange@redhat.com&gt;
wrote:

&gt; On Thu, Oct 17, 2019 at 11:26:12AM +0200, Roman Mohr wrote:
&gt; &gt; Hi,
&gt; &gt; 
&gt; &gt; In kubevirt we are running into a strange permission problem on
&gt; &gt; libvirt-5.0. We see transient "Permission Denied" errors when
&gt; "virAuditSend"
&gt; &gt; wants to send an audit log. [1] shows the logs of one of these
&gt; containers.
&gt; &gt; Here an example:
&gt; &gt; 
&gt; &gt; {"component":"virt-launcher","level":"warning","msg":"Failed to send
&gt; audit
&gt; &gt; message virt=kvm
&gt; &gt; 
&gt; vm=\"kubevirt-test-default_testvmit2pqrkrlrwbhptcjcs4n67jn6pjqvmtd7pkrpdmkrl5sldzs4rxr9zdg8m45jxz\"
&gt; 
&gt; &gt; uuid=56a33283-f6d7-4002-b188-1fed83186545 vm-ctx=+107:+107
&gt; &gt; img-ctx=+107:+107 model=dac: Permission
&gt; &gt; 
&gt; denied","pos":"virAuditSend:141","subcomponent":"libvirt","thread":"30","timestamp":"2019-10-08T23:58:40.651000Z"}
&gt; 
&gt; &gt; 
&gt; &gt; We recently switched in kubevirt to a dedicated selinux policy and remove
&gt; &gt; the general "privileged" flag from the containers where we run libvirt
&gt; in.
&gt; &gt; This is very likely related to it, but we can't make sense out of it,
&gt; &gt; because:
&gt; &gt; 
&gt; &gt; * It randomly affects one out of a few hundred containers which we start
&gt; &gt; * It is not bound to a specific node
&gt; &gt; * It is only transient on that container. After a few denials libvirt
&gt; can
&gt; &gt; just continue.
&gt; 
&gt; The transient nature makes this really bizarre.
&gt; 
&gt; The error message above comes from the audit_log_user_message() call
&gt; that libvirt makes. This is implemented in libaudit.so using the
&gt; sendto() syscall on a netlink socket opened with
&gt; 
&gt; socket(PF_NETLINK, SOCK_RAW, NETLINK_AUDIT);
&gt; 
&gt; So in terms of code being run there, there's very little - the EPERM
&gt; is coming back from the kernel when sending the message.
&gt; 
&gt; I'm not sure what scenario could cause this - perhaps the audit log
&gt; buffer in the kernel is full or something like that ?
&gt; 

I will adjust our collectors to collect the selinux auditlog and dmesg.
Maybe I can see more there. Will update the thread when I have more
information.


&gt; 
&gt; 
&gt; &gt; * Sometimes it is accompanied with a transient "Permission denied" on
&gt; &gt; /dev/null from our code in that container (so not from something which
&gt; &gt; libvirt tries to do).
&gt; &gt; 
&gt; &gt; Has someone seen something like this before in different environments?
&gt; 
&gt; Never seen anything like this reported before.
&gt; 

Thanks Daniel.

Roman


&gt; 
&gt; Regards,
&gt; Daniel
&gt; --
&gt; &gt; &gt; https://berrange.com      -o-
&gt; https://www.flickr.com/photos/dberrange :|
&gt; &gt; &gt; https://libvirt.org         -o-
&gt; https://fstop138.berrange.com :|
&gt; &gt; &gt; https://entangle-photo.org    -o-
&gt; https://www.instagram.com/dberrange :|
&gt; 


[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;&lt;br&gt;&lt;/div&gt;&lt;br&gt;&lt;div class="gmail_quote"&gt;&lt;div dir="ltr" \
class="gmail_attr"&gt;On Thu, Oct 17, 2019 at 11:34 AM Daniel P. Berrangé &lt;&lt;a \
href="mailto:berrange@redhat.com"&gt;berrange@redhat.com&lt;/a&gt;&gt; \
wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote class="gmail_quote" style="margin:0px 0px 0px \
0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"&gt;On Thu, Oct 17, 2019 \
at 11:26:12AM +0200, Roman Mohr wrote:&lt;br&gt; &gt; Hi,&lt;br&gt;
&gt; &lt;br&gt;
&gt; In kubevirt we are running into a strange permission problem on&lt;br&gt;
&gt; libvirt-5.0. We see transient "Permission Denied" errors when \
"virAuditSend"&lt;br&gt; &gt; wants to send an audit log. [1] shows the logs of \
one of these containers.&lt;br&gt; &gt; Here an example:&lt;br&gt;
&gt; &lt;br&gt;
&gt; {"component":"virt-launcher","level":"warning","msg":"Failed \
to send audit&lt;br&gt; &gt; message virt=kvm&lt;br&gt;
&gt; vm=\"kubevirt-test-default_testvmit2pqrkrlrwbhptcjcs4n67jn6pjqvmtd7pkrpdmkrl5sldzs4rxr9zdg8m45jxz\"&lt;br&gt;
 &gt; uuid=56a33283-f6d7-4002-b188-1fed83186545 vm-ctx=+107:+107&lt;br&gt;
&gt; img-ctx=+107:+107 model=dac: Permission&lt;br&gt;
&gt; denied","pos":"virAuditSend:141","subcomponent" \
;:"libvirt","thread":"30","timestamp":"2019-10-08T23:58:40.651000Z"}&lt;br&gt;
 &gt; &lt;br&gt;
&gt; We recently switched in kubevirt to a dedicated selinux policy and remove&lt;br&gt;
&gt; the general "privileged" flag from the containers where we run libvirt \
in.&lt;br&gt; &gt; This is very likely related to it, but we can't make sense out of \
it,&lt;br&gt; &gt; because:&lt;br&gt;
&gt; &lt;br&gt;
&gt;   * It randomly affects one out of a few hundred containers which we start&lt;br&gt;
&gt;   * It is not bound to a specific node&lt;br&gt;
&gt;   * It is only transient on that container. After a few denials libvirt can&lt;br&gt;
&gt; just continue.&lt;br&gt;
&lt;br&gt;
The transient nature makes this really bizarre.&lt;br&gt;
&lt;br&gt;
The error message above comes from the audit_log_user_message() call&lt;br&gt;
that libvirt makes. This is implemented in libaudit.so using the&lt;br&gt;
sendto() syscall on a netlink socket opened with&lt;br&gt;
&lt;br&gt;
   socket(PF_NETLINK, SOCK_RAW, NETLINK_AUDIT);&lt;br&gt;
&lt;br&gt;
So in terms of code being run there, there's very little - the EPERM&lt;br&gt;
is coming back from the kernel when sending the message.&lt;br&gt;
&lt;br&gt;
I'm not sure what scenario could cause this - perhaps the audit log&lt;br&gt;
buffer in the kernel is full or something like that \
?&lt;br&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I will adjust our collectors to collect the \
selinux auditlog and dmesg. Maybe I can see more there. Will update the thread when I \
have more information.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;blockquote class="gmail_quote" \
style="margin:0px 0px 0px 0.8ex;border-left:1px solid \
rgb(204,204,204);padding-left:1ex"&gt; &lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&gt;   * Sometimes it is accompanied with a transient "Permission denied" \
on&lt;br&gt; &gt; /dev/null from our code in that container (so not from something \
which&lt;br&gt; &gt; libvirt tries to do).&lt;br&gt;
&gt; &lt;br&gt;
&gt; Has someone seen something like this before in different environments?&lt;br&gt;
&lt;br&gt;
Never seen anything like this reported \
before.&lt;br&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks \
Daniel.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Roman&lt;/div&gt;&lt;div&gt;  &lt;/div&gt;&lt;blockquote \
class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid \
rgb(204,204,204);padding-left:1ex"&gt; &lt;br&gt;
Regards,&lt;br&gt;
Daniel&lt;br&gt;
-- &lt;br&gt;
&gt; &gt; &lt;a href="https://berrange.com" rel="noreferrer" \
&gt; &gt; target="_blank"&gt;https://berrange.com&lt;/a&gt;         -o-      &lt;a \
&gt; &gt; href="https://www.flickr.com/photos/dberrange" rel="noreferrer" \
&gt; &gt; target="_blank"&gt;https://www.flickr.com/photos/dberrange&lt;/a&gt; :|&lt;br&gt;
&gt; &gt; &lt;a href="https://libvirt.org" rel="noreferrer" \
&gt; &gt; target="_blank"&gt;https://libvirt.org&lt;/a&gt;              -o-                  &lt;a \
&gt; &gt; href="https://fstop138.berrange.com" rel="noreferrer" \
&gt; &gt; target="_blank"&gt;https://fstop138.berrange.com&lt;/a&gt; :|&lt;br&gt;
&gt; &gt; &lt;a href="https://entangle-photo.org" rel="noreferrer" \
&gt; &gt; target="_blank"&gt;https://entangle-photo.org&lt;/a&gt;      -o-      &lt;a \
&gt; &gt; href="https://www.instagram.com/dberrange" rel="noreferrer" \
&gt; &gt; target="_blank"&gt;https://www.instagram.com/dberrange&lt;/a&gt; :|&lt;br&gt;
&lt;/blockquote&gt;&lt;/div&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20191018070019</emailId><senderName>Luyao Zhong</senderName><senderEmail>luyao.zhong@intel.com</senderEmail><timestampReceived>2019-10-18 07:00:19-0400</timestampReceived><subject>[libvirt-users] [libvirt]Some questions about live migration</subject><body>

Hi libvirt experts,

I have some questions about live migration.

* If a live migration failed during migrating, will the domain exist on the
destination host?

* Is the flag VIR_MIGRATE_PAUSED make sense to live migration? It's a little
confusing for me. Does that indicate if I set this flag, then the domain on
the destination will not disappear even if the migration is failed, and it will
in 'paused' status? If not setting this flag, what will it be? It may be similar
to the question above.
I filed a bug https://bugzilla.redhat.com/show_bug.cgi?id=1762703 about this flag,
since its description is not very clear.

Thanks in advance, looking forward to your reply.

Regards,
Luyao


-- 
2.7.4

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20191018084612</emailId><senderName>Jiri Denemark</senderName><senderEmail>jdenemar@redhat.com</senderEmail><timestampReceived>2019-10-18 08:46:12-0400</timestampReceived><subject>Re: [libvirt-users] [libvirt] Some questions about live migration</subject><body>

On Fri, Oct 18, 2019 at 15:00:19 +0800, Luyao Zhong wrote:
&gt; Hi libvirt experts,
&gt; 
&gt; I have some questions about live migration.

I'm assuming you are not asking about post-copy migration, since it is a
bit more complicated as the current state if split between the source
and destination hosts and none of them can keep running without the
other until migration finishes.

&gt; * If a live migration failed during migrating, will the domain exist on the
&gt; destination host?

No, the domain will keep running on the source host and disappear from
the destination host.

&gt; * Is the flag VIR_MIGRATE_PAUSED make sense to live migration?

You can use this combination, but it most likely doesn't make sense.
Usually you would do live migration to minimize downtime. But
VIR_MIGRATE_PAUSED would cause the domain not to be automatically
resumed after migration so the downtime will likely be even longer than
with non-live migration (until the user manually resumes the domain on
destination). That said, the live and non-live migration when
VIR_MIGRATE_PAUSED is used (for both of them) differ only in the moment
the domain is paused. With non-live migration the domain is paused at
the beginning of migration, while with live migration the domain keeps
running during migration and it is paused once migration is almost done.

&gt; It's a little confusing for me. Does that indicate if I set this flag,
&gt; then the domain on the destination will not disappear even if the
&gt; migration is failed, and it will in 'paused' status?

No. It means that if migration succeeds, the domain will remain paused
on the destination (while normally it would be running at that point).
The flag has no effect if the migration fails.

Jirka

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20191021092316</emailId><senderName>Daniel =?utf-8?B?UC4gQmVycmFuZ8Op?=</senderName><senderEmail>berrange@redhat.com</senderEmail><timestampReceived>2019-10-21 09:23:16-0400</timestampReceived><subject>Re: [libvirt-users] X11 apps on lxc</subject><body>

On Fri, Oct 18, 2019 at 07:12:23PM +0000, Jesus wrote:
&gt; Hi
&gt; How can I run X11 apps on the local X11 using libvirt lxc?
&gt; I already had this runing on centos 7 but I upgraded to centos 8 (I rebuild \
&gt; libvirt) and the socket is not in the /tmp/.X11-unix/ folder of the vm any more. \
&gt; Can somebody help with this?

It may well have moved into the abstract namespace and thus not be visible
in the filesystem.

If I run strace I see apps connecting  @/tmp/.X11-unix/X0 first, and only
if that doesn't exist, does the client try /tmp/.X11-unix/X0. The leading
'@' indicates a NUL character requesting the abstract namespace.

If /tmp/.X11-unix doesn't exist at all its possibly only listening on the
abstract namespace, and not the normal namespace. There should be CLI
args to change this behaviour when starting your X11 server.

See more at:

  https://tstarling.com/blog/2016/06/x11-security-isolation/

Regards,
Daniel
-- 
&gt; &gt; https://berrange.com      -o-    https://www.flickr.com/photos/dberrange :|
&gt; &gt; https://libvirt.org         -o-            https://fstop138.berrange.com :|
&gt; &gt; https://entangle-photo.org    -o-    https://www.instagram.com/dberrange :|

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20191021195831</emailId><senderName>"Marc Roos"</senderName><senderEmail>m.roos@f1-outsourcing.eu</senderEmail><timestampReceived>2019-10-21 19:58:31-0400</timestampReceived><subject>Re: [libvirt-users] Live migrate + change interface name</subject><body>

 
Hmm indeed, I will have to look at using this network. Currently I am 
using virsh, and scripting the adding and removing of an interface at 
runtime with detach-interface/attach-interface.


-----Original Message-----
To: libvirt-users
Subject: Re: [libvirt-users] Live migrate + change interface name

On 10/17/19 4:26 PM, Marc Roos wrote:
&gt; 
&gt; Is it possible to do a live migrate of a guest, having on the from 
&gt; host a source_device=eth2 and to host a source_dev=eth1?

What management tool are you using that the syntax is 
"source_device=eth2"?

Are you maybe just paraphrasing your config, and what you actually have 
is something like this?:

    &lt;interface type='direct'&gt;
      &lt;source dev='eth2'/&gt;
      ...
    &lt;/interface&gt;

?

If so, the way to make this easily migratable is to create a network on 
both hosts that points to the desired physical device, e.g. on host 1:


     &lt;network&gt;
       &lt;name&gt;direct-net&lt;/name&gt;
       &lt;forward mode='bridge'&gt;
         &lt;interface dev='eth2'/&gt;
       &lt;/forward&gt;
     &lt;/network&gt;

and on host2:

      (same thing, but use 'eth1')

After net-define-ing the networks, you'll need to net-autostart and 
net-start them. Then in your guest's interface config, you would use 
this:

      &lt;interface type='network&gt;
        &lt;source network='direct-net'/&gt;
        ...

You will then be able to migrate from one host to the other without 
needing to modify your XML during the migration.




_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20191022120941</emailId><senderName>Daniel =?utf-8?B?UC4gQmVycmFuZ8Op?=</senderName><senderEmail>berrange@redhat.com</senderEmail><timestampReceived>2019-10-22 12:09:41-0400</timestampReceived><subject>Re: [libvirt-users] 32 bit support</subject><body>

On Fri, Oct 18, 2019 at 09:39:40PM +0100, Phill. Whiteside wrote:
&gt; Hi good people,
&gt; 
&gt; I've got a bit of a weird issue. I'm using QEMU emulator version
&gt; 2.11.1(Debian 1:2.11+dfsg-1ubuntu7.19) And after some considerable time of
&gt; not using it for 32bit installations I now find that it can no longer
&gt; install some older 32 bit installations (e.g.
&gt; https://phillw.net/isos/lubuntu/natty/ ) The CPU goes to 100% and then
&gt; after a while it just stops (I'm using virt-manager v1.5.1) I'm running
&gt; lubuntu 18.04 (64 bit) on an i7 chipset that runs 64 bit debian / centos
&gt; and MS server 2019 KVM instances via virt-manager without problems.
&gt; 
&gt; Any pointers would be appreciated,

I don't recall any known bugs with this. If you're willing to try
building new QEMU versions though, my suggestion would be to test the
latest upstream QEMU release(s) to see if it works any better.

Regards,
Daniel
-- 
|: https://berrange.com      -o-    https://www.flickr.com/photos/dberrange :|
|: https://libvirt.org         -o-            https://fstop138.berrange.com :|
|: https://entangle-photo.org    -o-    https://www.instagram.com/dberrange :|

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20191023171453</emailId><senderName>"Paul O'Rorke"</senderName><senderEmail>paul@tracker-software.com</senderEmail><timestampReceived>2019-10-23 17:14:53-0400</timestampReceived><subject>Re: [libvirt-users] Confused setting up a "Virtual Server Hosting" config</subject><body>

[Attachment #2 (multipart/alternative)]


Brilliant!   Thanks Laine.

I really appreciate the help.

&gt; you could also avoid setting up the bridge and just use macvtap bridge 
&gt; mode as you say you've done on your own network. The only limitation 
&gt; of that is that it doesn't permit direct communication between the 
&gt; host and the guests. If that limitation is okay with you, then that's 
&gt; fine.

How does the performance of a bridge on the host (Ubuntu bridge-utils) 
typically compare to a macvtap bridge?   Is there an expected performance 
advantage of one over the other?   I was hoping for better performance 
out of the macvtap bridge.

Time to buy some extra IPs it seems...

Most appreciated Laine.

*Paul O'Rorke*
*Tracker Software Products (Canada) Limited *
www.tracker-software.com &lt;http://www.tracker-software.com/&gt;
Tel: +1 (250) 324 1621
Fax: +1 (250) 324 1623

&lt;http://www.tracker-software.com/&gt;

Support:
http://www.tracker-software.com/support
Download latest Releases
http://www.tracker-software.com/downloads/




On 2019-10-23 9:44 a.m., Laine Stump wrote:
&gt; On 10/23/19 12:43 AM, Paul O'Rorke wrote:
&gt; &gt; Hi list,
&gt; &gt; 
&gt; &gt; Can anyone advise me on the correct/best set up for Virtual Server 
&gt; &gt; Hosting?
&gt; &gt; 
&gt; &gt; I have a guest in my server room wish to migrate to dedicated server 
&gt; &gt; I rented in an offsite in a data centre.   I rented a box with one NIC 
&gt; &gt; and one public IP.   I installed KVM on it and a guest. (both Ubuntu 
&gt; &gt; 18.04 LTS server edition).   I am struggling to get the networking right.
&gt; &gt; 
&gt; &gt; Essentially I want the "Virtual Server Hosting" config mentioned here:
&gt; &gt; https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/6/html-single/virtualization_administration_guide/index#sub-sect-routed-mode \
&gt; &gt;  &lt;https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/6/html-single/virtualization_administration_guide/index#sect-attch-nic-physdev&gt; \
&gt; &gt;  
&gt; &gt; 
&gt; &gt; I have not had any luck setting that up.   It is listed in the 
&gt; &gt; "Routed" section but the graphic says the virtual switch should be in 
&gt; &gt; bridged mode.
&gt; &gt; 
&gt; &gt; I also tried using macvtap, and since I have only one guest was 
&gt; &gt; expecting to be able to just use the host IP 
&gt; 
&gt; No, you will need one IP for the host, and one IP for the guest in 
&gt; either bridged mode or for macvtap.
&gt; 
&gt; &gt; but it looks like the data centre have restricted packets to the MAC 
&gt; &gt; address of the host NIC.
&gt; 
&gt; Yes, there is that restriction too. Usually hosting providers will 
&gt; lock down the MAC addresses they allow through ports, in order to 
&gt; prevent hostile clients from doing MAC spoofing to capture other 
&gt; clients' traffice.
&gt; 
&gt; When
&gt; &gt; set up I can ping the public IP (it is both eh host and the guest?)
&gt; 
&gt; No. An IP address refers to one entity. It can be the host or the 
&gt; guest, but not both.
&gt; 
&gt; but
&gt; &gt; not their gateway.   Should a macvtap not be presenting the MAC 
&gt; &gt; address of the host NIC to the router and thus allowing packets from 
&gt; &gt; the guest?
&gt; 
&gt; No, that is not what macvtap does. It creates a virtual NIC (macvtap 
&gt; device) that is connected directly to the physical NIC, and traffic 
&gt; from that device is injected directly into the output queue of the 
&gt; physical device, MAC address and all.
&gt; 
&gt; &gt; 
&gt; &gt; I clearly have a lack of understanding of how this is working and how 
&gt; &gt; it is meant to work.   When I tried the same thing on mt 
&gt; &gt; hardware/network I can create myltiple guests that all use the 
&gt; &gt; macvtap interface and I have no problems getting connectivity to the 
&gt; &gt; outside world.
&gt; 
&gt; Because on your own network you have no MAC address locking on your 
&gt; switch port, and have multiple IP addresses available (one for each 
&gt; guest) from the local DHCP server.
&gt; 
&gt; &gt; 
&gt; &gt; Before I approach the data centre about this I want to be sure I 
&gt; &gt; understand what I am doing.     I ultimately want to host a mail server 
&gt; &gt; and several different web servers as guests all behind this one 
&gt; &gt; host.   I would alias their public IPs to the host NIC and use 
&gt; &gt; IPtables to route traffic based on destination IP.
&gt; 
&gt; The only reason you would want iptables to be involved is if you were 
&gt; limited to only 1 IP address for the host + all the guests. In that 
&gt; case you could use *port* forwarding to cause incoming traffic to the 
&gt; host on particular TCP ports to be forwarded to different guests:
&gt; 
&gt; https://wiki.libvirt.org/page/Networking#Forwarding_Incoming_Connections
&gt; 
&gt; 
&gt; &gt; 
&gt; &gt; Does that make sense? Can anyone suggest the right way to achieve this?
&gt; 
&gt; No, not really :-)
&gt; 
&gt; If you can only get a single IP address, then you'll need to look at 
&gt; the above link. If you can get the hosting provider to sell you extra 
&gt; IP addresses / MAC addresses (usually extra IPs cost money but MAC 
&gt; addresses are free, they just want to know what they are - you will 
&gt; need one *of each* for each guest), then you should put a bridge on 
&gt; your host's ethernet, and connect all the guests to that bridge, 
&gt; configuring each with its unique IP address / MAC address / default 
&gt; route info given to you by the hosting provider. You can use this as a 
&gt; reference to configure the host and guests:
&gt; 
&gt; https://wiki.libvirt.org/page/Networking#Debian.2FUbuntu_Bridging
&gt; 
&gt; (you could also avoid setting up the bridge and just use macvtap 
&gt; bridge mode as you say you've done on your own network. The only 
&gt; limitation of that is that it doesn't permit direct communication 
&gt; between the host and the guests. If that limitation is okay with you, 
&gt; then that's fine.)
&gt; 


[Attachment #5 (text/html)]

&lt;html&gt;
  &lt;head&gt;
    &lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8"&gt;
  &lt;/head&gt;
  &lt;body text="#000000" bgcolor="#FFFFFF"&gt;
    &lt;p&gt;Brilliant!   Thanks Laine.&lt;/p&gt;
    &lt;p&gt;I really appreciate the help.&lt;br&gt;
      &lt;blockquote type="cite"&gt;you could also avoid setting up the bridge
        and just use macvtap bridge mode as you say you've done on your
        own network. The only limitation of that is that it doesn't
        permit direct communication between the host and the guests. If
        that limitation is okay with you, then that's fine.&lt;/blockquote&gt;
    &lt;/p&gt;
    &lt;p&gt;How does the performance of a bridge on the host (Ubuntu
      bridge-utils) typically compare to a macvtap bridge?   Is there an
      expected performance advantage of one over the other?   I was
      hoping for better performance out of the macvtap bridge.&lt;/p&gt;
    &lt;p&gt;Time to buy some extra IPs it seems...&lt;/p&gt;
    &lt;p&gt;Most appreciated Laine.&lt;br&gt;
    &lt;/p&gt;
    &lt;div class="moz-signature"&gt;
      &lt;meta http-equiv="content-type" content="text/html; charset=UTF-8"&gt;
      &lt;title&gt;&lt;/title&gt;
      &lt;p&gt;&lt;b&gt;Paul O'Rorke&lt;/b&gt;&lt;br&gt;
        &lt;b&gt;Tracker Software Products (Canada) Limited &lt;/b&gt;&lt;br&gt;
        &lt;a href="http://www.tracker-software.com/"&gt;www.tracker-software.com&lt;/a&gt;&lt;br&gt;
        Tel:
        +1 (250) 324 1621&lt;br&gt;
        Fax: +1 (250) 324 1623&lt;br&gt;
        &lt;br&gt;
        &lt;a href="http://www.tracker-software.com/"&gt; &lt;img
src="https://www.tracker-software.com/fckfiles/image/images/resellers/logo/TrackerSofwareProducts_Logo_330x100.png"
  name="image.png" width="198" height="60" border="0"
            align="bottom"&gt;
        &lt;/a&gt;
        &lt;br&gt;
        &lt;br&gt;
        Support:
        &lt;br&gt;
        &lt;a href="http://www.tracker-software.com/support"&gt;http://www.tracker-software.com/support
  &lt;/a&gt;&lt;br&gt;
        Download latest Releases
        &lt;br&gt;
        &lt;a href="http://www.tracker-software.com/downloads/"&gt;http://www.tracker-software.com/downloads/&lt;/a&gt;&lt;/p&gt;
  &lt;p&gt;&lt;br&gt;
        &lt;br&gt;
      &lt;/p&gt;
      &lt;p style="margin-bottom: 0cm; line-height: 100%"&gt;&lt;br&gt;
      &lt;/p&gt;
    &lt;/div&gt;
    &lt;div class="moz-cite-prefix"&gt;On 2019-10-23 9:44 a.m., Laine Stump
      wrote:&lt;br&gt;
    &lt;/div&gt;
    &lt;blockquote type="cite"
      cite="mid:ab94799d-c95e-049f-db41-f2c6bc0312e9@redhat.com"&gt;On
      10/23/19 12:43 AM, Paul O'Rorke wrote:
      &lt;br&gt;
      &lt;blockquote type="cite"&gt;Hi list,
        &lt;br&gt;
        &lt;br&gt;
        Can anyone advise me on the correct/best set up for Virtual
        Server Hosting?
        &lt;br&gt;
        &lt;br&gt;
        I have a guest in my server room wish to migrate to dedicated
        server I rented in an offsite in a data centre.   I rented a box
        with one NIC and one public IP.   I installed KVM on it and a
        guest. (both Ubuntu 18.04 LTS server edition).   I am struggling
        to get the networking right.
        &lt;br&gt;
        &lt;br&gt;
        Essentially I want the "Virtual Server Hosting" config mentioned
        here:
        &lt;br&gt;
&lt;a class="moz-txt-link-freetext" \
href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/6/html-si \
ngle/virtualization_administration_guide/index#sub-sect-routed-mode"&gt;https://access.re \
dhat.com/documentation/en-us/red_hat_enterprise_linux/6/html-single/virtualization_administration_guide/index#sub-sect-routed-mode&lt;/a&gt;
 &lt;a class="moz-txt-link-rfc2396E" \
href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/6/html-si \
ngle/virtualization_administration_guide/index#sect-attch-nic-physdev"&gt;&lt;https://acc \
ess.redhat.com/documentation/en-us/red_hat_enterprise_linux/6/html-single/virtualization_administration_guide/index#sect-attch-nic-physdev&gt;&lt;/a&gt;
  &lt;br&gt;
        &lt;br&gt;
        I have not had any luck setting that up.   It is listed in the
        "Routed" section but the graphic says the virtual switch should
        be in bridged mode.
        &lt;br&gt;
        &lt;br&gt;
        I also tried using macvtap, and since I have only one guest was
        expecting to be able to just use the host IP &lt;/blockquote&gt;
      &lt;br&gt;
      No, you will need one IP for the host, and one IP for the guest in
      either bridged mode or for macvtap.
      &lt;br&gt;
      &lt;br&gt;
      &lt;blockquote type="cite"&gt;but it looks like the data centre have
        restricted packets to the MAC address of the host NIC.
        &lt;br&gt;
      &lt;/blockquote&gt;
      &lt;br&gt;
      Yes, there is that restriction too. Usually hosting providers will
      lock down the MAC addresses they allow through ports, in order to
      prevent hostile clients from doing MAC spoofing to capture other
      clients' traffice.
      &lt;br&gt;
      &lt;br&gt;
         When
      &lt;br&gt;
      &lt;blockquote type="cite"&gt;set up I can ping the public IP (it is
        both eh host and the guest?)
        &lt;br&gt;
      &lt;/blockquote&gt;
      &lt;br&gt;
      No. An IP address refers to one entity. It can be the host or the
      guest, but not both.
      &lt;br&gt;
      &lt;br&gt;
      but
      &lt;br&gt;
      &lt;blockquote type="cite"&gt;not their gateway.   Should a macvtap not
        be presenting the MAC address of the host NIC to the router and
        thus allowing packets from the guest?
        &lt;br&gt;
      &lt;/blockquote&gt;
      &lt;br&gt;
      No, that is not what macvtap does. It creates a virtual NIC
      (macvtap device) that is connected directly to the physical NIC,
      and traffic from that device is injected directly into the output
      queue of the physical device, MAC address and all.
      &lt;br&gt;
      &lt;br&gt;
      &lt;blockquote type="cite"&gt;
        &lt;br&gt;
        I clearly have a lack of understanding of how this is working
        and how it is meant to work.   When I tried the same thing on mt
        hardware/network I can create myltiple guests that all use the
        macvtap interface and I have no problems getting connectivity to
        the outside world.
        &lt;br&gt;
      &lt;/blockquote&gt;
      &lt;br&gt;
      Because on your own network you have no MAC address locking on
      your switch port, and have multiple IP addresses available (one
      for each guest) from the local DHCP server.
      &lt;br&gt;
      &lt;br&gt;
      &lt;blockquote type="cite"&gt;
        &lt;br&gt;
        Before I approach the data centre about this I want to be sure I
        understand what I am doing.     I ultimately want to host a mail
        server and several different web servers as guests all behind
        this one host.   I would alias their public IPs to the host NIC
        and use IPtables to route traffic based on destination IP.
        &lt;br&gt;
      &lt;/blockquote&gt;
      &lt;br&gt;
      The only reason you would want iptables to be involved is if you
      were limited to only 1 IP address for the host + all the guests.
      In that case you could use *port* forwarding to cause incoming
      traffic to the host on particular TCP ports to be forwarded to
      different guests:
      &lt;br&gt;
      &lt;br&gt;
&lt;a class="moz-txt-link-freetext" \
href="https://wiki.libvirt.org/page/Networking#Forwarding_Incoming_Connections"&gt;https://wiki.libvirt.org/page/Networking#Forwarding_Incoming_Connections&lt;/a&gt;
  &lt;br&gt;
      &lt;br&gt;
      &lt;br&gt;
      &lt;blockquote type="cite"&gt;
        &lt;br&gt;
        Does that make sense? Can anyone suggest the right way to
        achieve this?
        &lt;br&gt;
      &lt;/blockquote&gt;
      &lt;br&gt;
      No, not really :-)
      &lt;br&gt;
      &lt;br&gt;
      If you can only get a single IP address, then you'll need to look
      at the above link. If you can get the hosting provider to sell you
      extra IP addresses / MAC addresses (usually extra IPs cost money
      but MAC addresses are free, they just want to know what they are -
      you will need one *of each* for each guest), then you should put a
      bridge on your host's ethernet, and connect all the guests to that
      bridge, configuring each with its unique IP address / MAC address
      / default route info given to you by the hosting provider. You can
      use this as a reference to configure the host and guests:
      &lt;br&gt;
      &lt;br&gt;
      &lt;a class="moz-txt-link-freetext" \
href="https://wiki.libvirt.org/page/Networking#Debian.2FUbuntu_Bridging"&gt;https://wiki.libvirt.org/page/Networking#Debian.2FUbuntu_Bridging&lt;/a&gt;
  &lt;br&gt;
      &lt;br&gt;
      (you could also avoid setting up the bridge and just use macvtap
      bridge mode as you say you've done on your own network. The only
      limitation of that is that it doesn't permit direct communication
      between the host and the guests. If that limitation is okay with
      you, then that's fine.)
      &lt;br&gt;
      &lt;br&gt;
    &lt;/blockquote&gt;
  &lt;/body&gt;
&lt;/html&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20191024043046</emailId><senderName>bharath paulraj</senderName><senderEmail>bharathpaul@gmail.com</senderEmail><timestampReceived>2019-10-24 04:30:46-0400</timestampReceived><subject>Re: [libvirt-users] Reg: Adding "edu" device using XML file</subject><body>

[Attachment #2 (multipart/alternative)]


Hello Han,

Thanks for your suggestions. I will check it out.

Regards,
Bharath

On Thu, Oct 24, 2019 at 6:17 AM Han Han &lt;hhan@redhat.com&gt; wrote:

&gt;
&gt;
&gt; On Wed, Oct 23, 2019 at 4:27 PM bharath paulraj &lt;bharathpaul@gmail.com&gt;
&gt; wrote:
&gt;
&gt;&gt; Hello Han,
&gt;&gt;
&gt;&gt; Thanks for the response. The XML option with qemu:commandline works if
&gt;&gt; the device is added during the VM creation. But I would like to hot-plug
&gt;&gt; the device to the running VM. I can add the device using the command line
&gt;&gt; &lt;virsh qemu-monitor-command --hmp VM-Name  device_add edu,id=edu0&gt;
&gt;&gt;
&gt;&gt; But I would like to add the device using the XML file, like &lt;virsh
&gt;&gt; attach-device VM-Name xmlfile.xml&gt;. If the XML support is not provided in
&gt;&gt; libvirt, Is there a document or pointers available to show how to add new
&gt;&gt; device in libvirt xml code?
&gt;&gt;
&gt;&gt; ASAIK there is no development guide for adding new device in libvirt xml
&gt; code.
&gt; Maybe you can refer to former watchdog device patch series:
&gt; https://www.redhat.com/archives/libvir-list/2009-October/msg00564.html
&gt; https://www.redhat.com/archives/libvir-list/2017-September/msg00078.html
&gt;
&gt;&gt; Thanks,
&gt;&gt; Bharath
&gt;&gt;
&gt;&gt; On Wed, Oct 23, 2019 at 12:57 PM Han Han &lt;hhan@redhat.com&gt; wrote:
&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; On Tue, Oct 22, 2019 at 5:41 PM bharath paulraj &lt;bharathpaul@gmail.com&gt;
&gt;&gt;&gt; wrote:
&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Hi Team,
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; I am exploring "edu" device in QEMU to add my own custom device. I am
&gt;&gt;&gt;&gt; able to add the device using the command line. Would it be possible to add
&gt;&gt;&gt;&gt; the device using XML file through libvirt?
&gt;&gt;&gt;&gt;
&gt;&gt;&gt; Hello, edu device is not implemented to libvirt xml. However you can use
&gt;&gt;&gt; it via custom device in libvirt:
&gt;&gt;&gt; Just define a domain like following:
&gt;&gt;&gt; &lt;domain type='qemu' xmlns:qemu='
&gt;&gt;&gt; http://libvirt.org/schemas/domain/qemu/1.0'&gt;
&gt;&gt;&gt; ...
&gt;&gt;&gt;  &lt;qemu:commandline&gt;
&gt;&gt;&gt;    &lt;qemu:arg value='-device'/&gt;
&gt;&gt;&gt; &lt;qemu:arg value='edu'/&gt;
&gt;&gt;&gt;  &lt;/qemu:commandline&gt;
&gt;&gt;&gt; &lt;/domain&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; More reference: https://libvirt.org/drvqemu.html#qemucommand
&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt; --
&gt;&gt;&gt;&gt; Regards,
&gt;&gt;&gt;&gt; Bharath
&gt;&gt;&gt;&gt; _______________________________________________
&gt;&gt;&gt;&gt; libvirt-users mailing list
&gt;&gt;&gt;&gt; libvirt-users@redhat.com
&gt;&gt;&gt;&gt; https://www.redhat.com/mailman/listinfo/libvirt-users
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; --
&gt;&gt;&gt; Best regards,
&gt;&gt;&gt; -----------------------------------
&gt;&gt;&gt; Han Han
&gt;&gt;&gt; Quality Engineer
&gt;&gt;&gt; Redhat.
&gt;&gt;&gt;
&gt;&gt;&gt; Email: hhan@redhat.com
&gt;&gt;&gt; Phone: +861065339333
&gt;&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; --
&gt;&gt; Regards,
&gt;&gt; Bharath
&gt;&gt;
&gt;
&gt;
&gt; --
&gt; Best regards,
&gt; -----------------------------------
&gt; Han Han
&gt; Quality Engineer
&gt; Redhat.
&gt;
&gt; Email: hhan@redhat.com
&gt; Phone: +861065339333
&gt;


-- 
Regards,
Bharath

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;Hello Han,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks for your \
suggestions. I will check it \
out.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Regards,&lt;/div&gt;&lt;/div&gt;&lt;div&gt;Bharath&lt;/div&gt;&lt;br&gt;&lt;div \
class="gmail_quote"&gt;&lt;div dir="ltr" class="gmail_attr"&gt;On Thu, Oct 24, 2019 at 6:17 AM \
Han Han &lt;&lt;a href="mailto:hhan@redhat.com"&gt;hhan@redhat.com&lt;/a&gt;&gt; \
wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote class="gmail_quote" style="margin:0px 0px 0px \
0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"&gt;&lt;div dir="ltr"&gt;&lt;div \
dir="ltr"&gt;&lt;br&gt;&lt;/div&gt;&lt;br&gt;&lt;div class="gmail_quote"&gt;&lt;div dir="ltr" class="gmail_attr"&gt;On \
Wed, Oct 23, 2019 at 4:27 PM bharath paulraj &lt;&lt;a \
href="mailto:bharathpaul@gmail.com" target="_blank"&gt;bharathpaul@gmail.com&lt;/a&gt;&gt; \
wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote class="gmail_quote" style="margin:0px 0px 0px \
0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"&gt;&lt;div dir="ltr"&gt;Hello \
Han,&lt;br&gt;&lt;br&gt;Thanks for the response. The XML option with qemu:commandline works if \
the device is added during the VM creation. But I would like to hot-plug the device \
to the running VM. I can add the device using the command line&lt;br&gt;&lt;div&gt;&lt;virsh  \
&lt;span style="color:rgb(0,0,0);font-family:HelveticaNeue;font-size:12px"&gt;qemu-monitor-command \
--hmp  &lt;/span&gt;&lt;span style="color:rgb(0,0,0);font-family:HelveticaNeue;font-size:12px"&gt;VM-Name \
&lt;/span&gt;&lt;span style="color:rgb(0,0,0);font-family:HelveticaNeue;font-size:12px"&gt;  \
device_add edu,id=edu0&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span \
style="color:rgb(0,0,0);font-family:HelveticaNeue;font-size:12px"&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span \
style="color:rgb(0,0,0);font-family:HelveticaNeue;font-size:12px"&gt;But I would like to \
add the device using the XML file, like &lt;virsh attach-device VM-Name \
xmlfile.xml&gt;. If the XML support is not provided in libvirt, Is there a document \
or pointers available to show how to add new device in libvirt xml \
code?&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span \
style="color:rgb(0,0,0);font-family:HelveticaNeue;font-size:12px"&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;ASAIK \
there is no development guide for adding new device in libvirt xml \
code.&lt;/div&gt;&lt;div&gt;Maybe you can refer to former watchdog device patch \
series:&lt;/div&gt;&lt;div&gt;&lt;a \
href="https://www.redhat.com/archives/libvir-list/2009-October/msg00564.html" \
target="_blank"&gt;https://www.redhat.com/archives/libvir-list/2009-October/msg00564.html&lt;/a&gt;&lt;/div&gt;&lt;div&gt;&lt;a \
href="https://www.redhat.com/archives/libvir-list/2017-September/msg00078.html" \
target="_blank"&gt;https://www.redhat.com/archives/libvir-list/2017-September/msg00078.html&lt;/a&gt;&lt;/div&gt;&lt;blockquote \
class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid \
rgb(204,204,204);padding-left:1ex"&gt;&lt;div dir="ltr"&gt;&lt;div&gt;&lt;span \
style="color:rgb(0,0,0);font-family:HelveticaNeue;font-size:12px"&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span \
style="color:rgb(0,0,0);font-family:HelveticaNeue;font-size:12px"&gt;Thanks,&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span \
style="color:rgb(0,0,0);font-family:HelveticaNeue;font-size:12px"&gt;Bharath&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;div \
class="gmail_quote"&gt;&lt;div dir="ltr" class="gmail_attr"&gt;On Wed, Oct 23, 2019 at 12:57 \
PM Han Han &lt;&lt;a href="mailto:hhan@redhat.com" \
target="_blank"&gt;hhan@redhat.com&lt;/a&gt;&gt; wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote \
class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid \
rgb(204,204,204);padding-left:1ex"&gt;&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;&lt;br&gt;&lt;/div&gt;&lt;br&gt;&lt;div \
class="gmail_quote"&gt;&lt;div dir="ltr" class="gmail_attr"&gt;On Tue, Oct 22, 2019 at 5:41 PM \
bharath paulraj &lt;&lt;a href="mailto:bharathpaul@gmail.com" \
target="_blank"&gt;bharathpaul@gmail.com&lt;/a&gt;&gt; wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote \
class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid \
rgb(204,204,204);padding-left:1ex"&gt;&lt;div dir="ltr"&gt;Hi Team,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I am \
exploring "edu" device in QEMU to add my own custom device. I am able to \
add the device using the command line. Would it be possible to add the device using \
XML file through libvirt?&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;Hello, \
edu device is not implemented to libvirt xml. However you can use it via custom \
device in libvirt:&lt;/div&gt;&lt;div&gt;Just define a domain like \
following:&lt;/div&gt;&lt;div&gt;&lt;domain type='qemu' xmlns:qemu='&lt;a \
href="http://libvirt.org/schemas/domain/qemu/1.0" \
target="_blank"&gt;http://libvirt.org/schemas/domain/qemu/1.0&lt;/a&gt;'&gt;&lt;/div&gt;&lt;div&gt;...&lt;/div&gt;&lt;div&gt; \
&lt;qemu:commandline&gt;&lt;br&gt;     &lt;qemu:arg \
value='-device'/&gt;&lt;/div&gt;&lt;div&gt;&lt;qemu:arg \
value='edu'/&gt;&lt;/div&gt;&lt;div&gt;  \
&lt;/qemu:commandline&gt;&lt;/div&gt;&lt;div&gt;&lt;/domain&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;More \
reference: &lt;a href="https://libvirt.org/drvqemu.html#qemucommand" \
target="_blank"&gt;https://libvirt.org/drvqemu.html#qemucommand&lt;/a&gt;&lt;/div&gt;&lt;blockquote \
class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid \
rgb(204,204,204);padding-left:1ex"&gt;&lt;div dir="ltr"&gt;&lt;div&gt;&lt;div&gt;  \
&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;blockquote class="gmail_quote" style="margin:0px \
0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"&gt;&lt;div \
dir="ltr"&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;-- &lt;br&gt;&lt;div dir="ltr"&gt;&lt;div \
dir="ltr"&gt;Regards,&lt;div&gt;Bharath&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt; \
_______________________________________________&lt;br&gt; libvirt-users mailing list&lt;br&gt;
&lt;a href="mailto:libvirt-users@redhat.com" \
target="_blank"&gt;libvirt-users@redhat.com&lt;/a&gt;&lt;br&gt; &lt;a \
href="https://www.redhat.com/mailman/listinfo/libvirt-users" rel="noreferrer" \
target="_blank"&gt;https://www.redhat.com/mailman/listinfo/libvirt-users&lt;/a&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br \
clear="all"&gt;&lt;br&gt;-- &lt;br&gt;&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;&lt;div&gt;&lt;div dir="ltr"&gt;&lt;div&gt;&lt;div \
dir="ltr"&gt;Best regards,&lt;/div&gt;&lt;div \
dir="ltr"&gt;-----------------------------------&lt;br&gt;&lt;/div&gt;&lt;div dir="ltr"&gt;Han \
Han&lt;br&gt;Quality Engineer&lt;br&gt;Redhat.&lt;br&gt;&lt;br&gt;Email: &lt;a href="mailto:hhan@redhat.com" \
target="_blank"&gt;hhan@redhat.com&lt;/a&gt;&lt;br&gt;Phone: \
+861065339333&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt; &lt;/blockquote&gt;&lt;/div&gt;&lt;br \
clear="all"&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;-- &lt;br&gt;&lt;div dir="ltr"&gt;&lt;div \
dir="ltr"&gt;Regards,&lt;div&gt;Bharath&lt;/div&gt;&lt;/div&gt;&lt;/div&gt; &lt;/blockquote&gt;&lt;/div&gt;&lt;br \
clear="all"&gt;&lt;br&gt;-- &lt;br&gt;&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;&lt;div&gt;&lt;div dir="ltr"&gt;&lt;div&gt;&lt;div \
dir="ltr"&gt;Best regards,&lt;/div&gt;&lt;div \
dir="ltr"&gt;-----------------------------------&lt;br&gt;&lt;/div&gt;&lt;div dir="ltr"&gt;Han \
Han&lt;br&gt;Quality Engineer&lt;br&gt;Redhat.&lt;br&gt;&lt;br&gt;Email: &lt;a href="mailto:hhan@redhat.com" \
target="_blank"&gt;hhan@redhat.com&lt;/a&gt;&lt;br&gt;Phone: \
+861065339333&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt; &lt;/blockquote&gt;&lt;/div&gt;&lt;br \
clear="all"&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;-- &lt;br&gt;&lt;div dir="ltr" class="gmail_signature"&gt;&lt;div \
dir="ltr"&gt;Regards,&lt;div&gt;Bharath&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20191027174544</emailId><senderName>Jack Kamm</senderName><senderEmail>jackkamm@gmail.com</senderEmail><timestampReceived>2019-10-27 17:45:44-0400</timestampReceived><subject>Re: [libvirt-users] win10 vm stuck in automatic repair</subject><body>

It seems like I might be affected by this recent qemu 4.1 bug:

https://bugs.archlinux.org/task/64150
https://bugzilla.redhat.com/show_bug.cgi?id=1764721
https://lists.gnu.org/archive/html/qemu-block/2019-10/msg01414.html

I'm not 100% sure. But the second link mentions the easiest way to reproduce this bug \
is by using snapshots, which lines up with my experience.

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20191028104156</emailId><senderName>Maximilian Philipps</senderName><senderEmail>maximilian.philipps@saltation.com</senderEmail><timestampReceived>2019-10-28 10:41:56-0400</timestampReceived><subject>[libvirt-users] libvirt_lxc memory limit, emulator process part of the cgroup?</subject><body>

hi,

I am currently investigating a bug with libvirt lxc. Whenever I do a
systemctl daemon-reload on the host, my container loses his memory limit
and then reports having access to 8 exabyte of memory.

I have tracked the issue down to two parts:

memory.limit_in_bytes jumps from the correct value to 9223372036854771712.

libvirt lxc appears to set the memory limit in transient way without
writing a config for systemd. I can't prevent memory.limit_in_bytes
changing by setting the correct value through systemctl set-property
--runtime &lt;scope&gt; MemoryLimit=

tasks in the memory cgroup gets cleaned up.

After starting the container the cgroup contains 3 pid. The pid of the
libvirt_lxc process, the pid of the init process in the container and
third unknown pid that doesn't exists in /proc/.

After a demon-reload only the init process   remains in the cgroup and
unless I move the libvirt_lxc process into the cgroup the memory limit
isn't enforced.

I have also noticed that when starting libvirtd it complains about
GetMachineByPID failing for the libvirt_lxc process.


This leaves me with one big question, the the emulator process
libvirt_lxc supposed to be part of the container's cgroup or not? The
leader of the container is the init process in the container. I am
unsure on how the additional emulator process is supposed to be registered.


Using: Debian Stretch, libvirt 5.0.0-4, systemd 241-7~deb10u1 and hybrid
cgroups.


Regards,
Maximilian Philipps

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20191031134101</emailId><senderName>Mauricio Tavares</senderName><senderEmail>raubvogel@gmail.com</senderEmail><timestampReceived>2019-10-31 13:41:01-0400</timestampReceived><subject>[libvirt-users] Memory ballooning</subject><body>

So I as I was searching for the difference between memory and
currentMemory, I bumped into

http://www.espenbraastad.no/posts/memory-ballooning/

Is the problem this ancient post mention still an issue?

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190903222824</emailId><senderName>Daniel Romero</senderName><senderEmail>romero.cl@gmail.com</senderEmail><timestampReceived>2019-09-03 22:28:24-0400</timestampReceived><subject>Re: [libvirt-users] KVM NAT stops from working</subject><body>

[Attachment #2 (multipart/alternative)]


Hi,

can the host reach Internet?

Send us the route table of the host and some one of the guests. The
iptables config file should help too.

Best Regards.
Daniel Romero P.



On Tue, Sep 3, 2019 at 1:22 PM Francesc Guasch &lt;frankie@telecos.upc.edu&gt;
wrote:

&gt; El 3/9/19 a les 18:15, Laine Stump ha escrit:
&gt; &gt; On 9/2/19 10:31 AM, Francesc Guasch wrote:
&gt; &gt;&gt; Hi. First of all thank you for the work you are doing with libvirt.
&gt; &gt;&gt; I am not sure this is the right place to ask, I'd appreciate
&gt; &gt;&gt; if you can give me any hint or directions.
&gt; &gt;&gt;
&gt; &gt;&gt; I have several similar KVM Linux boxes and one of them has a really
&gt; &gt;&gt; strange behavior with the KVM NAT: It just suddenly stops from
&gt; &gt;&gt; working.
&gt;
&gt; &gt;&gt; Any hints ? Thank you very much
&gt; &gt;
&gt; &gt; 1) On a freshly booted machine with running clients connected to
&gt; &gt; libvirt's default network (and successfully sending/receiving traffic,
&gt; &gt; of course :-), get a dump of all active iptables rules with
&gt; &gt;
&gt; &gt;    iptables-save &gt;iptables-working.txt
&gt; &gt;
&gt; &gt; 2) At whatever later time when you notice that the NAT is no longer
&gt; &gt; working properly, get another dump of all the rules with
&gt; &gt;
&gt; &gt;    iptables-save &gt;iptables-broken.txt
&gt; &gt;
&gt; &gt; and compare those two files to see what has changed.
&gt; &gt;
&gt;
&gt; Thank you very much Laine, good point !
&gt;
&gt; I am waiting for it to fail again to compare both iptables.
&gt;
&gt; _______________________________________________
&gt; libvirt-users mailing list
&gt; libvirt-users@redhat.com
&gt; https://www.redhat.com/mailman/listinfo/libvirt-users

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;&lt;div&gt;Hi,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;can the host reach \
Internet?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Send us the route table of the host and some one \
of the guests. The iptables config file should help \
too.&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div dir="ltr" class="gmail_signature" \
data-smartmail="gmail_signature"&gt;Best Regards.&lt;br&gt;Daniel Romero \
P.&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;div class="gmail_quote"&gt;&lt;div dir="ltr" \
class="gmail_attr"&gt;On Tue, Sep 3, 2019 at 1:22 PM Francesc Guasch &lt;&lt;a \
href="mailto:frankie@telecos.upc.edu"&gt;frankie@telecos.upc.edu&lt;/a&gt;&gt; \
wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote class="gmail_quote" style="margin:0px 0px 0px \
0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"&gt;El 3/9/19 a les 18:15, \
Laine Stump ha escrit:&lt;br&gt; &gt; On 9/2/19 10:31 AM, Francesc Guasch wrote:&lt;br&gt;
&gt;&gt; Hi. First of all thank you for the work you are doing with libvirt.&lt;br&gt;
&gt;&gt; I am not sure this is the right place to ask, I'd appreciate&lt;br&gt;
&gt;&gt; if you can give me any hint or directions.&lt;br&gt;
&gt;&gt;&lt;br&gt;
&gt;&gt; I have several similar KVM Linux boxes and one of them has a really&lt;br&gt;
&gt;&gt; strange behavior with the KVM NAT: It just suddenly stops from&lt;br&gt;
&gt;&gt; working.&lt;br&gt;
&lt;br&gt;
&gt;&gt; Any hints ? Thank you very much&lt;br&gt;
&gt; &lt;br&gt;
&gt; 1) On a freshly booted machine with running clients connected to&lt;br&gt;
&gt; libvirt's default network (and successfully sending/receiving traffic,&lt;br&gt;
&gt; of course :-), get a dump of all active iptables rules with&lt;br&gt;
&gt; &lt;br&gt;
&gt;      iptables-save &gt;iptables-working.txt&lt;br&gt;
&gt; &lt;br&gt;
&gt; 2) At whatever later time when you notice that the NAT is no longer&lt;br&gt;
&gt; working properly, get another dump of all the rules with&lt;br&gt;
&gt; &lt;br&gt;
&gt;      iptables-save &gt;iptables-broken.txt&lt;br&gt;
&gt; &lt;br&gt;
&gt; and compare those two files to see what has changed.&lt;br&gt;
&gt; &lt;br&gt;
&lt;br&gt;
Thank you very much Laine, good point !&lt;br&gt;
&lt;br&gt;
I am waiting for it to fail again to compare both iptables.&lt;br&gt;
&lt;br&gt;
_______________________________________________&lt;br&gt;
libvirt-users mailing list&lt;br&gt;
&lt;a href="mailto:libvirt-users@redhat.com" \
target="_blank"&gt;libvirt-users@redhat.com&lt;/a&gt;&lt;br&gt; &lt;a \
href="https://www.redhat.com/mailman/listinfo/libvirt-users" rel="noreferrer" \
target="_blank"&gt;https://www.redhat.com/mailman/listinfo/libvirt-users&lt;/a&gt;&lt;/blockquote&gt;&lt;/div&gt;




_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190906114010</emailId><senderName>Petr Stodulka</senderName><senderEmail>pstodulk@redhat.com</senderEmail><timestampReceived>2019-09-06 11:40:10-0400</timestampReceived><subject>Re: [libvirt-users] Recover snapshots from qcow images</subject><body>

On 14. 08. 19 13:27, Peter Krempa wrote:
&gt; On Tue, Aug 13, 2019 at 15:15:11 +0200, Petr Stodulka wrote:
&gt; &gt; Hi guys,
&gt; &gt; I had to move to the new laptop week ago and I screw migration of my virtual
&gt; &gt; machines. I recovered my virtual machines on the new laptop (virsh define)
&gt; &gt; using the backed up xml files, but I am missing any file with metadata about
&gt; &gt; snapshots. The original storage is cleaned so I cannot take these files
&gt; &gt; anymore.
&gt; &gt; 
&gt; &gt; Using qemu-info I can see my snapshots inside the qcow images, but libvirt
&gt; &gt; doesn't know about them:
&gt; &gt; ###########################################
&gt; &gt; # virsh snapshot-list rhlvm
&gt; &gt; Name   Creation Time   State
&gt; &gt; -------------------------------
&gt; &gt; 
&gt; &gt; # qemu-img info rhlvm.qcow2
&gt; &gt; image: rhlvm.qcow2
&gt; &gt; file format: qcow2
&gt; &gt; virtual size: 25G (26843545600 bytes)
&gt; &gt; disk size: 2.9G
&gt; &gt; cluster_size: 65536
&gt; &gt; Snapshot list:
&gt; &gt; ID        TAG                 VM SIZE                DATE       VM CLOCK
&gt; &gt; 1         prepared                  0 2018-09-05 11:06:06   00:00:00.000
&gt; &gt; Format specific information:
&gt; &gt; compat: 1.1
&gt; &gt; lazy refcounts: true
&gt; &gt; refcount bits: 16
&gt; &gt; corrupt: false
&gt; &gt; 
&gt; &gt; 
&gt; &gt; ###########################################
&gt; &gt; 
&gt; &gt; Is there any nice way to regenerate snapshot metadata for libvirt from
&gt; &gt; the data inside qcow images? I have bunch of VMs so if there is nice way
&gt; &gt; how to recover those data, you will make me really happy :)
&gt; 
&gt; Hi,
&gt; 
&gt; libvirt unfortunately does not support metadata-less snapshots so you
&gt; must recreate the metadata to be able to use them. If you didn't modify
&gt; your configuration of the VM between the time you took the snapshot and
&gt; the current point it should be fairly straightforward to recover them,
&gt; but it will require some manual steps.
&gt; 
&gt; The snapshot creation api has a _REDEFINE flag which allows to create
&gt; the snapshot metadata without actually doing any disk changes. (virsh
&gt; snapshot-create --redefine).
&gt; 
&gt; For this to happen you must prepare a definition of the snapshot. I'll
&gt; provide an example with anotations what to update:
&gt; 
&gt; &lt;domainsnapshot&gt;
&gt; &lt;name&gt;1565701354&lt;/name&gt;   &lt;--- this must be equal to the 'TAG' field in the \
&gt; qemu-img output &lt;state&gt;running&lt;/state&gt;    &lt;--- state of the VM at snapshot, you'll \
&gt; probably need to use shutoff as the VM was not running \
&gt; &lt;creationTime&gt;1565701354&lt;/creationTime&gt;  &lt;--- convert the "DATE" field to a unix \
&gt; timestamp &lt;memory snapshot='internal'/&gt;  &lt;----- your snapshot is internal so this \
&gt; is ok &lt;disks&gt;
&gt; &lt;disk name='hda' snapshot='no'/&gt;      &lt;--- entries here depend on your \
&gt; configuration, you need one line per disk, readonly disks must have 'no' as \
&gt; snapshot, others are internal &lt;disk name='vda' snapshot='internal'/&gt;
&gt; &lt;disk name='vdb' snapshot='internal'/&gt;
&gt; &lt;disk name='vdc' snapshot='internal'/&gt;
&gt; &lt;/disks&gt;
&gt; &lt;domain type='kvm'&gt;   &lt;--- this is the domain definition XML obtained by running a \
&gt; virsh dumpxml --migratable --inactive --security-info &lt;name&gt;upstream&lt;/name&gt;
&gt; &lt;uuid&gt;841752b8-9452-4078-a62b-8fd9a9af011c&lt;/uuid&gt;
&gt; 
&gt; [...] (trimmed irrelevant stuff but make sure to use full XML)
&gt; 
&gt; &lt;devices&gt;
&gt; &lt;emulator&gt;/home/pipo/git/qemu.git/x86_64-softmmu/qemu-system-x86_64&lt;/emulator&gt;
&gt; &lt;disk type='file' device='cdrom'&gt;
&gt; &lt;driver name='qemu' type='raw'/&gt;
&gt; &lt;source file='/var/lib/libvirt/images/systemrescuecd-x86-4.9.5.iso'/&gt;
&gt; &lt;backingStore/&gt;
&gt; &lt;target dev='hda' bus='ide'/&gt;
&gt; &lt;readonly/&gt;
&gt; &lt;boot order='1'/&gt;
&gt; &lt;address type='drive' controller='0' bus='0' target='0' unit='0'/&gt;
&gt; &lt;/disk&gt;
&gt; &lt;disk type='file' device='disk'&gt;   &lt;---- these conform to the table above
&gt; &lt;driver name='qemu' type='qcow2'/&gt;
&gt; &lt;source file='/tmp/pull4.qcow2'/&gt;
&gt; &lt;target dev='vda' bus='virtio'/&gt;
&gt; &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x0a' function='0x0'/&gt;
&gt; &lt;/disk&gt;
&gt; &lt;disk type='file' device='disk'&gt;
&gt; &lt;driver name='qemu' type='qcow2'/&gt;
&gt; &lt;source file='/tmp/commit4.qcow2'/&gt;
&gt; &lt;target dev='vdb' bus='virtio'/&gt;
&gt; &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x0c' function='0x0'/&gt;
&gt; &lt;/disk&gt;
&gt; &lt;disk type='file' device='disk'&gt;
&gt; &lt;driver name='qemu' type='qcow2'/&gt;
&gt; &lt;source file='/tmp/copy4.qcow2'/&gt;
&gt; &lt;target dev='vdc' bus='virtio'/&gt;
&gt; &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x0d' function='0x0'/&gt;
&gt; &lt;/disk&gt;
&gt; 
&gt; [...]
&gt; 
&gt; &lt;/domain&gt;
&gt; &lt;cookie&gt;
&gt; &lt;/cookie&gt;
&gt; &lt;/domainsnapshot&gt;
&gt; 
&gt; 
&gt; Use a document which you create with:
&gt; 
&gt; virsh snapshot-create $VMNAME --redefine --current
&gt; 
&gt; Use --current only for the most recent snapshot.
&gt; 

Thanks! It works as you wrote. All my snapshots are recovered.

-- 
Petr Stodulka
Core Services (In-place upgrades and migrations)
Red Hat

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20190906120638</emailId><senderName>Peter Krempa</senderName><senderEmail>pkrempa@redhat.com</senderEmail><timestampReceived>2019-09-06 12:06:38-0400</timestampReceived><subject>Re: [libvirt-users] could not create snapshotxml on encryption image</subject><body>

[Attachment #2 (multipart/signed)]


On Fri, Sep 06, 2019 at 14:39:56 +0800, 18781374080 wrote:
&gt; hi ，everyone!
&gt; I am a newcomer to Libvirt, and I don't know if it's a native question,
&gt; 
&gt; 
&gt; I create snapshots of virtual machines that use encrypted disk, The console gave me \
&gt; the following error: 
&gt; 
&gt; Traceback(most recent call last):
&gt; File "/usr/lib/python2.7/site-packages/vdsm/virt/vm.py",line 4613, in snapshot
&gt; self._dom,snapshotCreateXML(snapxml, snapFlags)
&gt; File "/usr/lib/python2.7/site-packages/vdsm/virt/virdomain.py", in line 98, in f 
&gt; ret = attr(*args, **kwargs)
&gt; File "/usr/lib/python2.7/site-packages/vdsm/common/libvirtconnection.py", line 130, \
&gt; in wrapper ret = f(*args, **kwargs)
&gt; File "/usr/lib/python2.7/site-packages/vdsm/common/function.py", line 92, in \
&gt; wrapper return func(inst, *args, **kwargs)
&gt; File "/usr/lib64/python2.7/site-packages/libvirt.py", line 2620, in \
&gt; snapshotCreateXML if ret is None:raise libvirtError('virDomainSnapshotCreateXML() \
&gt;                 failed', dom=self)
&gt; libvirtError: internal error: unable to execute QEMU command 'transaction': \
&gt; Parameter 'encrypt.key-secret' is required for cipher 

Hi, encrypted snapshots will be possible only when using the new
'blockdev' approach to configuring disk sources. The work on that is
almost done. It's possible that the next upstream release will support
it.


["signature.asc" (application/pgp-signature)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190909075312</emailId><senderName>bharath paulraj</senderName><senderEmail>bharathpaul@gmail.com</senderEmail><timestampReceived>2019-09-09 07:53:12-0400</timestampReceived><subject>[libvirt-users] Reg: &lt;operation not permitted&gt;&lt;netlink socket&gt;&lt;Qemu device&gt;</subject><body>

[Attachment #2 (multipart/alternative)]


Hi Team,

I am writing a new device in QEMU, which opens and reads from Netlink
socket from the hypervisor. I need this Netlink socket to support migration
of connection tracking entries during VM Live migration.

If I am using QEMU command directly to launch the VM, then any operation on
Netlink socket works fine. But, If I am using libvirt to create the VM and
attaching the device, then I am getting permission denied error. As I found
out that this is related to SElinux, I added the svirt_t context as
permissive *"semanage permissive  -a svirt_t". *With this, I am not
receiving permission denied error, instead i am receiving "operation not
permitted" error.
I changed the user and group field in libvirtd/qemu.conf to root/root. But
still, I am facing the same problem.

Any suggestions to overcome this?



-- 
Regards,
Bharath

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;Hi Team,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I am writing a new device in QEMU, which \
opens and reads from Netlink socket from the hypervisor. I need this Netlink socket \
to support migration of connection tracking entries during VM Live \
migration.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;If I am using QEMU command directly to launch the \
VM, then any operation on Netlink socket works fine. But, If I am using libvirt to \
create the VM and attaching the device, then I am getting permission denied error. As \
I found out that this is related to SElinux, I added the svirt_t context as \
permissive  &lt;i&gt;"semanage permissive   -a svirt_t". &lt;/i&gt;With this, I am not \
receiving permission denied error, instead i am receiving "operation not \
permitted" error.  &lt;/div&gt;&lt;div&gt;I changed the user and group field in \
libvirtd/qemu.conf to root/root. But still, I am facing the same  \
problem.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Any  suggestions to overcome \
this?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;-- &lt;br&gt;&lt;div dir="ltr" \
class="gmail_signature" data-smartmail="gmail_signature"&gt;&lt;div \
dir="ltr"&gt;Regards,&lt;div&gt;Bharath&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190910211410</emailId><senderName>Brandon Doyle</senderName><senderEmail>bjd2385@aperiodicity.com</senderEmail><timestampReceived>2019-09-10 21:14:10-0400</timestampReceived><subject>Re: [libvirt-users] Disk backup for live and offline domains</subject><body>

[Attachment #2 (text/plain)]

I would try to snapshot more than only live / running VMs' committed writes. I host \
all of my VMs at current in ZFS and snapshot regularly, I'm a fan of this method. In \
the same script, however, I also throw an empty indicator file ("on" or "off") in the \
mount point prior to snapshotting. This way, I can run a simple `find /dataset/path/ \
-name "on"` to find all the ‘good' restore points to clone from, if need be (you \
could also just append it to the snapshot name).

I've had some difficulties getting live / running snapshots to work in a manner that \
doesn't cause my servers to freeze for a few moments. I'd definitely like to learn \
the proper way to do this; I'd like to take regular (e.g. hourly) live quiesced \
backups of Windows- and Linux-based servers that store (external) state data in a \
subdirectory at the disks' mount point in my storage array, rather than the default \
location (which is not all that useful as it'd fill up my host's OS drive). But \
again, I've found that I experience network traffic loss to the VMs with the current \
flags.

109         eval "virsh snapshot-create-as --domain $VM --atomic —memspec \
file=$path/$(MEM_FILE),snapshot=external$devs"

where `$devs` is a string that's built as


 95     # Append all the disks to a string iteratively.
 96     devs=""
 97     for dev in $(virsh domblklist "$VM" | tail -n +3 | head -n -1 \
 98         | awk '{ print $1 }')
 99     do
100         devs="$devs --diskspec $dev,snapshot=external,file=$path/$(DISK_FILE \
"$dev")"                                                                              \
101     done

I could probably clean this up or make it simpler somehow (wrote it quite a while \
ago), but I'd appreciate any / all suggestions.

Brandon

On Sep 10, 2019, at 4:49 PM, Daniel Romero \
&lt;romero.cl@gmail.com&lt;mailto:romero.cl@gmail.com&gt;&gt; wrote:

have you tried to use direct access to block devices using lvm in your vm's and then \
do backups with lvm snapshots?

I'm currently migrating all my "images" vm's to "lvm" vm's because taking live \
snapshots is very easy this way. In your case live and offline snapshot script should \
be the same.


Regards.
Daniel Romero P.



On Tue, Sep 10, 2019 at 5:38 PM Tim Schumacher \
&lt;tim@timakro.de&lt;mailto:tim@timakro.de&gt;&gt; wrote: Hi,

I followed the instructions on the wiki
https://wiki.libvirt.org/page/Live-disk-backup-with-active-blockcommit
for a live disk backup. Unfortunately this is not working when the
domain is offline because the active blockcommit throws

error: Requested operation is not valid: domain is not running

For my use case it should be possible for the domain to shut down while
the backup is in progress. I'm looking for a way to shorten the backing
chain after the backup finishes and the domain is offline.

Is there a way to let libvirt decide wether to shorten the backing chain
using blockcommit or some alternative way which works on offline
domains?

As I'm writing this I might as well ask about the current state of
"incremental backups". It seems like dirty bitmaps can keep track of
which blocks changed and just copy those to the backup. Is there some
libvirt command-line frontend for that or is it planned for the future?

Thanks.

- Tim
_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com&lt;mailto:libvirt-users@redhat.com&gt;
https://www.redhat.com/mailman/listinfo/libvirt-users
_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com&lt;mailto:libvirt-users@redhat.com&gt;
https://www.redhat.com/mailman/listinfo/libvirt-users


[Attachment #3 (text/html)]

&lt;html&gt;
&lt;head&gt;
&lt;meta http-equiv="Content-Type" content="text/html; charset=utf-8"&gt;
&lt;/head&gt;
&lt;body style="word-wrap: break-word; -webkit-nbsp-mode: space; line-break: \
after-white-space;" class=""&gt; I would try to snapshot more than only live / running \
VMs' committed writes. I host all of my VMs at current in ZFS and snapshot regularly, \
I'm a fan of this method. In the same script, however, I also throw an empty \
indicator file ("on" or "off") in the mount  point prior to snapshotting. This way, I \
can run a simple `find /dataset/path/ -name "on"` to find all the ‘good' restore \
points to clone from, if need be (you could also just append it to the snapshot \
name). &lt;div class=""&gt;&lt;br class=""&gt;
&lt;/div&gt;
&lt;div class=""&gt;I've had some difficulties getting live / running snapshots to work in \
a manner that doesn't cause my servers to freeze for a few moments. I'd definitely \
like to learn the proper way to do this; I'd like to take regular (e.g. hourly) live \
quiesced  backups of Windows- and Linux-based servers that store (external) state \
data in a subdirectory at the disks' mount point in my storage array, rather than the \
default location (which is not all that useful as it'd fill up my host's OS drive). \
But again, I've  found that I experience network traffic loss to the VMs with the \
current flags.&lt;/div&gt; &lt;div class=""&gt;&lt;br class=""&gt;
&lt;/div&gt;
&lt;div class=""&gt;
&lt;div style="margin: 0px; font-stretch: normal; font-size: 10px; line-height: normal; \
font-family: Monaco; color: rgb(254, 207, 117); background-color: rgb(15, 15, 15);" \
class=""&gt; &lt;span style="font-variant-ligatures: no-common-ligatures; color: #4f4f4f" \
class=""&gt;109 &lt;/span&gt;&lt;span style="font-variant-ligatures: no-common-ligatures; color: \
#dfdfdf" class=""&gt;    &lt;/span&gt;&lt;span style="font-variant-ligatures: \
no-common-ligatures; color: #000000; background-color: #595959" \
class=""&gt; &lt;/span&gt;&lt;span style="font-variant-ligatures: no-common-ligatures; \
color: #dfdfdf" class=""&gt;   &lt;/span&gt;&lt;span style="font-variant-ligatures: \
no-common-ligatures; color: #fb0007" class=""&gt;eval&lt;/span&gt;&lt;span \
style="font-variant-ligatures: no-common-ligatures; color: #dfdfdf" class=""&gt; \
&lt;/span&gt;&lt;span style="font-variant-ligatures: no-common-ligatures; color: #fb0007" \
class=""&gt;"&lt;/span&gt;&lt;span style="font-variant-ligatures: no-common-ligatures" \
class=""&gt;virsh snapshot-create-as --domain &lt;/span&gt;&lt;span \
style="font-variant-ligatures: no-common-ligatures; color: #a3ff09" \
class=""&gt;$VM&lt;/span&gt;&lt;span style="font-variant-ligatures: no-common-ligatures" \
class=""&gt; --atomic —memspec file=&lt;/span&gt;&lt;span style="font-variant-ligatures: \
no-common-ligatures; color: #a3ff09" class=""&gt;$pa&lt;/span&gt;&lt;span \
style="font-variant-ligatures: no-common-ligatures; color: #a3ff09; background-color: \
#1d1d1d" class=""&gt;t&lt;/span&gt;&lt;span style="font-variant-ligatures: no-common-ligatures; \
color: #a3ff09" class=""&gt;h&lt;/span&gt;&lt;span style="font-variant-ligatures: \
no-common-ligatures" class=""&gt;/&lt;/span&gt;&lt;span style="font-variant-ligatures: \
no-common-ligatures; color: #a3ff09" class=""&gt;$(&lt;/span&gt;&lt;span \
style="font-variant-ligatures: no-common-ligatures; color: #dfdfdf" \
class=""&gt;MEM_FILE&lt;/span&gt;&lt;span style="font-variant-ligatures: no-common-ligatures; \
color: #a3ff09" class=""&gt;)&lt;/span&gt;&lt;span style="font-variant-ligatures: \
no-common-ligatures" class=""&gt;,snapshot=external&lt;/span&gt;&lt;span \
style="font-variant-ligatures: no-common-ligatures; color: #a3ff09" \
class=""&gt;$devs&lt;/span&gt;&lt;span style="font-variant-ligatures: no-common-ligatures; color: \
#fb0007" class=""&gt;"&lt;/span&gt;&lt;span style="font-variant-ligatures: \
no-common-ligatures; color: #dfdfdf" class=""&gt;           \
                        \
                      \
 &lt;/span&gt;&lt;/div&gt; &lt;/div&gt;
&lt;div class=""&gt;&lt;br class=""&gt;
&lt;/div&gt;
&lt;div class=""&gt;where `$devs` is a string that's built as&lt;/div&gt;
&lt;div class=""&gt;&lt;br class=""&gt;
&lt;/div&gt;
&lt;div style="margin: 0px; font-stretch: normal; font-size: 10px; line-height: normal; \
font-family: Monaco; color: rgb(242, 242, 242); background-color: rgba(0, 0, 0, \
0.85098); min-height: 14px;" class=""&gt; &lt;span style="font-variant-ligatures: \
no-common-ligatures" class=""&gt;&lt;/span&gt;&lt;br class=""&gt; &lt;/div&gt;
&lt;div style="margin: 0px; font-stretch: normal; font-size: 10px; line-height: normal; \
font-family: Monaco; color: rgb(223, 223, 223); background-color: rgb(15, 15, 15);" \
class=""&gt; &lt;span style="font-variant-ligatures: no-common-ligatures; color: #4f4f4f" \
class=""&gt; 95 &lt;/span&gt;&lt;span style="font-variant-ligatures: no-common-ligatures" \
class=""&gt;    &lt;/span&gt; &lt;span style="font-variant-ligatures: \
no-common-ligatures; color: #636363" class=""&gt;# Append all the disks to a string \
iteratively.&lt;/span&gt;&lt;span style="font-variant-ligatures: no-common-ligatures" \
class=""&gt;                      \
      &lt;/span&gt;&lt;span style="font-variant-ligatures: no-common-ligatures; \
background-color: #1d1d1d" class=""&gt; &lt;/span&gt;&lt;span style="font-variant-ligatures: \
no-common-ligatures" class=""&gt;               \
                        \
                        \
                         \
       &lt;/span&gt;&lt;/div&gt; &lt;div style="margin: 0px; font-stretch: \
normal; font-size: 10px; line-height: normal; font-family: Monaco; color: rgb(223, \
223, 223); background-color: rgb(15, 15, 15);" class=""&gt; &lt;span \
style="font-variant-ligatures: no-common-ligatures; color: #4f4f4f" class=""&gt; 96 \
&lt;/span&gt;&lt;span style="font-variant-ligatures: no-common-ligatures" class=""&gt;  \
  &lt;/span&gt; &lt;span style="font-variant-ligatures: no-common-ligatures; color: \
#fda009" class=""&gt;devs&lt;/span&gt;&lt;span style="font-variant-ligatures: \
no-common-ligatures" class=""&gt;=&lt;/span&gt;&lt;span style="font-variant-ligatures: \
no-common-ligatures; color: #fb0007" class=""&gt;""&lt;/span&gt;&lt;span \
style="font-variant-ligatures: no-common-ligatures" class=""&gt;       \
                        \
                        \
              &lt;/span&gt;&lt;span \
style="font-variant-ligatures: no-common-ligatures; background-color: #1d1d1d" \
class=""&gt; &lt;/span&gt;&lt;span style="font-variant-ligatures: no-common-ligatures" \
class=""&gt;                      \
                        \
                        \
                        \
 &lt;/span&gt;&lt;/div&gt; &lt;div style="margin: 0px; font-stretch: normal; font-size: 10px; \
line-height: normal; font-family: Monaco; color: rgb(223, 223, 223); \
background-color: rgb(15, 15, 15);" class=""&gt; &lt;span style="font-variant-ligatures: \
no-common-ligatures; color: #4f4f4f" class=""&gt; 97 &lt;/span&gt;&lt;span \
style="font-variant-ligatures: no-common-ligatures" class=""&gt;    &lt;/span&gt; \
&lt;span style="font-variant-ligatures: no-common-ligatures; color: #fb0007" \
class=""&gt;for&lt;/span&gt;&lt;span style="font-variant-ligatures: no-common-ligatures" \
class=""&gt; dev &lt;/span&gt;&lt;span style="font-variant-ligatures: no-common-ligatures; color: \
#fb0007" class=""&gt;in&lt;/span&gt;&lt;span style="font-variant-ligatures: no-common-ligatures" \
class=""&gt; &lt;/span&gt;&lt;span style="font-variant-ligatures: no-common-ligatures; color: \
#a3ff09" class=""&gt;$(&lt;/span&gt;&lt;span style="font-variant-ligatures: no-common-ligatures" \
class=""&gt;virsh domblklist &lt;/span&gt;&lt;span style="font-variant-ligatures: \
no-common-ligatures; color: #fb0007" class=""&gt;"&lt;/span&gt;&lt;span \
style="font-variant-ligatures: no-common-ligatures; color: #a3ff09" \
class=""&gt;$VM&lt;/span&gt;&lt;span style="font-variant-ligatures: no-common-ligatures; color: \
#fb0007" class=""&gt;"&lt;/span&gt;&lt;span style="font-variant-ligatures: \
no-common-ligatures" class=""&gt; &lt;/span&gt;&lt;span style="font-variant-ligatures: \
no-common-ligatures; color: #fb0007" class=""&gt;|&lt;/span&gt;&lt;span \
style="font-variant-ligatures: no-common-ligatures" class=""&gt; &lt;/span&gt;&lt;span \
style="font-variant-ligatures: no-common-ligatures; color: #fb0007" \
class=""&gt;tail&lt;/span&gt;&lt;span style="font-variant-ligatures: no-common-ligatures" \
class=""&gt; -n +&lt;/span&gt;&lt;span style="font-variant-ligatures: no-common-ligatures; \
color: #9e744d" class=""&gt;3&lt;/span&gt;&lt;span style="font-variant-ligatures: \
no-common-ligatures" class=""&gt; &lt;/span&gt;&lt;span style="font-variant-ligatures: \
no-common-ligatures; color: #fb0007" class=""&gt;|&lt;/span&gt;&lt;span \
style="font-variant-ligatures: no-common-ligatures" class=""&gt; head -n &lt;/span&gt;&lt;span \
style="font-variant-ligatures: no-common-ligatures; color: #9e744d" \
class=""&gt;-1&lt;/span&gt;&lt;span style="font-variant-ligatures: no-common-ligatures" class=""&gt; \
\            &lt;/span&gt;&lt;span \
style="font-variant-ligatures: no-common-ligatures; background-color: #1d1d1d" \
class=""&gt; &lt;/span&gt;&lt;span style="font-variant-ligatures: no-common-ligatures" \
class=""&gt;                     \
                        \
                        \
                         \
 &lt;/span&gt;&lt;/div&gt; &lt;div style="margin: 0px; font-stretch: normal; font-size: 10px; \
line-height: normal; font-family: Monaco; color: rgb(223, 223, 223); \
background-color: rgb(15, 15, 15);" class=""&gt; &lt;span style="font-variant-ligatures: \
no-common-ligatures; color: #4f4f4f" class=""&gt; 98 &lt;/span&gt;&lt;span \
style="font-variant-ligatures: no-common-ligatures" class=""&gt;    &lt;/span&gt; \
&lt;span style="font-variant-ligatures: no-common-ligatures; color: #000000; \
background-color: #595959" class=""&gt; &lt;/span&gt;&lt;span style="font-variant-ligatures: \
no-common-ligatures" class=""&gt;   &lt;/span&gt;&lt;span style="font-variant-ligatures: \
no-common-ligatures; color: #fb0007" class=""&gt;|&lt;/span&gt;&lt;span \
style="font-variant-ligatures: no-common-ligatures" class=""&gt; awk &lt;/span&gt;&lt;span \
style="font-variant-ligatures: no-common-ligatures; color: #fb0007" \
class=""&gt;'&lt;/span&gt;&lt;span style="font-variant-ligatures: no-common-ligatures; color: \
#fecf75" class=""&gt;{ print $1 }&lt;/span&gt;&lt;span style="font-variant-ligatures: \
no-common-ligatures; color: #fb0007" class=""&gt;'&lt;/span&gt;&lt;span \
style="font-variant-ligatures: no-common-ligatures; color: #a3ff09" \
class=""&gt;)&lt;/span&gt;&lt;span style="font-variant-ligatures: no-common-ligatures" \
class=""&gt;                     \
                        \
      &lt;/span&gt;&lt;span style="font-variant-ligatures: no-common-ligatures; \
background-color: #1d1d1d" class=""&gt; &lt;/span&gt;&lt;span style="font-variant-ligatures: \
no-common-ligatures" class=""&gt;               \
                         \
                        \
                        \
       &lt;/span&gt;&lt;/div&gt; &lt;div style="margin: 0px; font-stretch: \
normal; font-size: 10px; line-height: normal; font-family: Monaco; color: rgb(223, \
223, 223); background-color: rgb(15, 15, 15);" class=""&gt; &lt;span \
style="font-variant-ligatures: no-common-ligatures; color: #4f4f4f" class=""&gt; 99 \
&lt;/span&gt;&lt;span style="font-variant-ligatures: no-common-ligatures" class=""&gt;  \
  &lt;/span&gt; &lt;span style="font-variant-ligatures: no-common-ligatures; color: \
#fb0007" class=""&gt;do&lt;/span&gt;&lt;span style="font-variant-ligatures: no-common-ligatures" \
class=""&gt;                     \
                        \
                        \
    &lt;/span&gt;&lt;span style="font-variant-ligatures: no-common-ligatures; \
background-color: #1d1d1d" class=""&gt; &lt;/span&gt;&lt;span style="font-variant-ligatures: \
no-common-ligatures" class=""&gt;               \
                        \
                        \
                         \
       &lt;/span&gt;&lt;/div&gt; &lt;div style="margin: 0px; font-stretch: \
normal; font-size: 10px; line-height: normal; font-family: Monaco; color: rgb(223, \
223, 223); background-color: rgb(15, 15, 15);" class=""&gt; &lt;span \
style="font-variant-ligatures: no-common-ligatures; color: #4f4f4f" class=""&gt;100 \
&lt;/span&gt;&lt;span style="font-variant-ligatures: no-common-ligatures" class=""&gt;  \
  &lt;/span&gt; &lt;span style="font-variant-ligatures: no-common-ligatures; color: \
#000000; background-color: #595959" class=""&gt; &lt;/span&gt;&lt;span \
style="font-variant-ligatures: no-common-ligatures" class=""&gt;   &lt;/span&gt;&lt;span \
style="font-variant-ligatures: no-common-ligatures; color: #fda009" \
class=""&gt;devs&lt;/span&gt;&lt;span style="font-variant-ligatures: no-common-ligatures" \
class=""&gt;=&lt;/span&gt;&lt;span style="font-variant-ligatures: no-common-ligatures; color: \
#fb0007" class=""&gt;"&lt;/span&gt;&lt;span style="font-variant-ligatures: \
no-common-ligatures; color: #a3ff09" class=""&gt;$devs&lt;/span&gt;&lt;span \
                style="font-variant-ligatures: no-common-ligatures; color: #fecf75" \
                class=""&gt;
 --diskspec &lt;/span&gt;&lt;span style="font-variant-ligatures: no-common-ligatures; color: \
#a3ff09" class=""&gt;$dev&lt;/span&gt;&lt;span style="font-variant-ligatures: \
no-common-ligatures; color: #fecf75" class=""&gt;,snapshot=external,file=&lt;/span&gt;&lt;span \
style="font-variant-ligatures: no-common-ligatures; color: #a3ff09" \
class=""&gt;$path&lt;/span&gt;&lt;span style="font-variant-ligatures: no-common-ligatures; color: \
#fecf75" class=""&gt;/&lt;/span&gt;&lt;span style="font-variant-ligatures: no-common-ligatures; \
color: #a3ff09" class=""&gt;$(&lt;/span&gt;&lt;span style="font-variant-ligatures: \
no-common-ligatures" class=""&gt;DISK_FILE &lt;/span&gt;&lt;span style="font-variant-ligatures: \
no-common-ligatures; color: #fb0007" class=""&gt;"&lt;/span&gt;&lt;span \
style="font-variant-ligatures: no-common-ligatures; color: #a3ff09" \
class=""&gt;$&lt;/span&gt;&lt;span style="font-variant-ligatures: no-common-ligatures; color: \
#a3ff09; background-color: #1d1d1d" class=""&gt;d&lt;/span&gt;&lt;span \
style="font-variant-ligatures: no-common-ligatures; color: #a3ff09" \
class=""&gt;ev&lt;/span&gt;&lt;span style="font-variant-ligatures: no-common-ligatures; color: \
#fb0007" class=""&gt;"&lt;/span&gt;&lt;span style="font-variant-ligatures: \
no-common-ligatures; color: #a3ff09" class=""&gt;)&lt;/span&gt;&lt;span \
style="font-variant-ligatures: no-common-ligatures; color: #fb0007" \
class=""&gt;"&lt;/span&gt;&lt;span style="font-variant-ligatures: no-common-ligatures" \
class=""&gt;                     \
                        \
                        \
                 &lt;/span&gt;&lt;span \
style="caret-color: rgb(79, 79, 79); color: rgb(79, 79, 79);" \
class=""&gt;101&lt;/span&gt;&lt;span style="font-variant-ligatures: no-common-ligatures;" \
class=""&gt;     &lt;/span&gt;&lt;span style="font-variant-ligatures: \
no-common-ligatures; color: rgb(251, 0, 7);" class=""&gt;done&lt;/span&gt; &lt;/div&gt; &lt;div \
class=""&gt;&lt;br class=""&gt; &lt;/div&gt;
&lt;div class=""&gt;I could probably clean this up or make it simpler somehow (wrote it \
quite a while ago), but I'd appreciate any / all suggestions.&lt;/div&gt; &lt;div class=""&gt;&lt;br \
class=""&gt; &lt;/div&gt;
&lt;div class=""&gt;Brandon&lt;br class=""&gt;
&lt;div class=""&gt;
&lt;div class=""&gt;
&lt;div&gt;&lt;br class=""&gt;
&lt;blockquote type="cite" class=""&gt;
&lt;div class=""&gt;On Sep 10, 2019, at 4:49 PM, Daniel Romero &lt;&lt;a \
href="mailto:romero.cl@gmail.com" class=""&gt;romero.cl@gmail.com&lt;/a&gt;&gt; wrote:&lt;/div&gt; \
&lt;br class="Apple-interchange-newline"&gt; &lt;div class=""&gt;
&lt;div dir="ltr" class=""&gt;
&lt;div class=""&gt;have you tried to use direct access to block devices using lvm in your \
vm's and then do backups with lvm snapshots?&lt;/div&gt; &lt;div class=""&gt;&lt;br class=""&gt;
&lt;/div&gt;
&lt;div class=""&gt;I'm currently migrating all my "images" vm's to \
"lvm" vm's because taking live snapshots is very easy this way. In your \
case live and offline snapshot script should be the same.&lt;br class=""&gt; &lt;/div&gt;
&lt;div class=""&gt;&lt;br class=""&gt;
&lt;/div&gt;
&lt;div class=""&gt;&lt;br class=""&gt;
&lt;/div&gt;
&lt;div class=""&gt;
&lt;div class=""&gt;
&lt;div dir="ltr" class="gmail_signature" data-smartmail="gmail_signature"&gt;Regards.&lt;br \
class=""&gt; Daniel Romero P.&lt;br class=""&gt;
&lt;br class=""&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;br class=""&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;br class=""&gt;
&lt;div class="gmail_quote"&gt;
&lt;div dir="ltr" class="gmail_attr"&gt;On Tue, Sep 10, 2019 at 5:38 PM Tim Schumacher \
&lt;&lt;a href="mailto:tim@timakro.de" class=""&gt;tim@timakro.de&lt;/a&gt;&gt; wrote:&lt;br \
class=""&gt; &lt;/div&gt;
&lt;blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid \
rgb(204,204,204);padding-left:1ex"&gt; Hi,&lt;br class=""&gt;
&lt;br class=""&gt;
I followed the instructions on the wiki&lt;br class=""&gt;
&lt;a href="https://wiki.libvirt.org/page/Live-disk-backup-with-active-blockcommit" \
rel="noreferrer" target="_blank" \
class=""&gt;https://wiki.libvirt.org/page/Live-disk-backup-with-active-blockcommit&lt;/a&gt;&lt;br \
class=""&gt; for a live disk backup. Unfortunately this is not working when the&lt;br \
class=""&gt; domain is offline because the active blockcommit throws&lt;br class=""&gt;
&lt;br class=""&gt;
error: Requested operation is not valid: domain is not running&lt;br class=""&gt;
&lt;br class=""&gt;
For my use case it should be possible for the domain to shut down while&lt;br class=""&gt;
the backup is in progress. I'm looking for a way to shorten the backing&lt;br class=""&gt;
chain after the backup finishes and the domain is offline.&lt;br class=""&gt;
&lt;br class=""&gt;
Is there a way to let libvirt decide wether to shorten the backing chain&lt;br class=""&gt;
using blockcommit or some alternative way which works on offline&lt;br class=""&gt;
domains?&lt;br class=""&gt;
&lt;br class=""&gt;
As I'm writing this I might as well ask about the current state of&lt;br class=""&gt;
"incremental backups". It seems like dirty bitmaps can keep track of&lt;br \
class=""&gt; which blocks changed and just copy those to the backup. Is there some&lt;br \
class=""&gt; libvirt command-line frontend for that or is it planned for the future?&lt;br \
class=""&gt; &lt;br class=""&gt;
Thanks.&lt;br class=""&gt;
&lt;br class=""&gt;
- Tim&lt;br class=""&gt;
_______________________________________________&lt;br class=""&gt;
libvirt-users mailing list&lt;br class=""&gt;
&lt;a href="mailto:libvirt-users@redhat.com" target="_blank" \
class=""&gt;libvirt-users@redhat.com&lt;/a&gt;&lt;br class=""&gt; &lt;a \
href="https://www.redhat.com/mailman/listinfo/libvirt-users" rel="noreferrer" \
target="_blank" class=""&gt;https://www.redhat.com/mailman/listinfo/libvirt-users&lt;/a&gt;&lt;/blockquote&gt;
 &lt;/div&gt;
_______________________________________________&lt;br class=""&gt;
libvirt-users mailing list&lt;br class=""&gt;
&lt;a href="mailto:libvirt-users@redhat.com" class=""&gt;libvirt-users@redhat.com&lt;/a&gt;&lt;br \
class=""&gt; https://www.redhat.com/mailman/listinfo/libvirt-users&lt;br class=""&gt;
&lt;/div&gt;
&lt;/blockquote&gt;
&lt;/div&gt;
&lt;br class=""&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
--===============8993951469268864273==--


</body></email><email><emailId>20190912111145</emailId><senderName>Su Hua</senderName><senderEmail>suhua.tanke@gmail.com</senderEmail><timestampReceived>2019-09-12 11:11:45-0400</timestampReceived><subject>Re: [libvirt-users] About vhost-user-blk support</subject><body>

Thank you very much, the problem is solved.

suh

Cole Robinson &lt;crobinso@redhat.com&gt; 于2019年9月11日周三 下午9:33写道：
&gt;
&gt; You need to extend docs/schemas/domaincommon.rng which is what is used
&gt; for the validation virsh is reporting. Do a 'git log' on that file for
&gt; other examples of patches adding new qemu command line options. If you
&gt; plan to submit it to libvir-list you will also want to add tests/
&gt;
&gt; - Cole
&gt;
&gt; On 9/11/19 2:16 AM, Su Hua wrote:
&gt; &gt; Hi, I added libvirt4.5.0 support for vhost-user-blk, which can now be
&gt; &gt; used to start the virtual machine,
&gt; &gt; but I will see this prompt when I execute virsh edit. How can I remove
&gt; &gt; this information? It is now also
&gt; &gt; possible to force edit.
&gt; &gt; a.png
&gt; &gt; b.png
&gt; &gt;
&gt; &gt; regards
&gt; &gt;     su
&gt; &gt;
&gt; &gt;
&gt; &gt; HUA SU &lt;suhua.tanke@gmail.com &lt;mailto:suhua.tanke@gmail.com&gt;&gt; 于2019年9
&gt; &gt; 月11日周三 上午8:52写道：
&gt; &gt;&gt;
&gt; &gt;&gt; ok,thanks.
&gt; &gt;&gt;
&gt; &gt;&gt; Suh
&gt; &gt;
&gt; &gt;&gt;
&gt; &gt;&gt; HUA SU
&gt; &gt;&gt; 邮箱：suhua.tanke@gmail.com &lt;mailto:suhua.tanke@gmail.com&gt;
&gt; &gt;&gt;
&gt; &gt;&gt; 签名由 网易邮箱大师 定制
&gt; &gt;&gt;
&gt; &gt;&gt; On 09/11/2019 02:59, Cole Robinson wrote:
&gt; &gt;&gt; On 8/25/19 10:21 PM, Su Hua wrote:
&gt; &gt;&gt; &gt; Hi, everyone, ask a question, which version can fully support the
&gt; &gt; device type
&gt; &gt;&gt; &gt; of qemu hw/block/vhost-user-blk.c? If so, what should the format of
&gt; &gt; the xml
&gt; &gt;&gt; &gt; file look like?
&gt; &gt;&gt; &gt;
&gt; &gt;&gt;
&gt; &gt;&gt; Hi, libvirt does not currently support vhost-user-blk
&gt; &gt;&gt;
&gt; &gt;&gt; - Cole
&gt;
&gt;
&gt; - Cole

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190918155647</emailId><senderName>Ján Tomko</senderName><senderEmail>jtomko@redhat.com</senderEmail><timestampReceived>2019-09-18 15:56:47-0400</timestampReceived><subject>Re: [libvirt-users] Live-Migration not possible: error: operation failed: guest CPU doesn't match sp</subject><body>

[Attachment #2 (multipart/signed)]


On Wed, Sep 18, 2019 at 05:07:23PM +0200, Lentes, Bernd wrote:
&gt; Hi,
&gt; 

Hello,

&gt; i have atwo node HA-cluster with pacemaker, corosync, libvirt and KVM.
&gt; Recently i configured a new VirtualDomain which runs fine, but live Migration does \
&gt; not succeed. This is the error:
&gt; 
&gt; VirtualDomain(vm_snipanalysis)[14322]:  2019/09/18_16:56:54 ERROR: snipanalysis: \
&gt; live migration to ha-idg-2 failed: 1 Sep 18 16:56:54 [6970] ha-idg-1       lrmd:   \
&gt; notice: operation_finished:       vm_snipanalysis_migrate_to_0:14322:stderr [ \
&gt; error: operation failed: guest CPU doesn't match specification: missing features: \
&gt; fma,movbe,xsave,avx,f16c,rdrand,fsgsbase,bmi1,avx2,smep,bmi2,erms,invpcid,md-clear,xsaveopt,abm \
&gt; ] 
&gt; The two servers are from HP, they are similar, but not identical. Their CPU's are \
&gt; different: One is "Intel(R) Xeon(R) CPU E5-2630 v3 @ 2.40GHz", following \
&gt; /proc/cpuinfo, the other is "Intel(R) Xeon(R) CPU X5675  @ 3.07GHz". Which guest \
&gt; CPU should i choose for having the guest running smoothly on each host ? 

the output of 'virsh domcapabilities' should contain the most
feature-full migratable CPU:
...
    &lt;mode name='host-model' supported='yes'&gt;
      &lt;model fallback='forbid'&gt;Skylake-Client-IBRS&lt;/model&gt;
      &lt;vendor&gt;Intel&lt;/vendor&gt;
      &lt;feature policy='require' name='ss'/&gt;
      &lt;feature policy='require' name='vmx'/&gt;
      &lt;feature policy='require' name='hypervisor'/&gt;
      &lt;feature policy='require' name='tsc_adjust'/&gt;
      &lt;feature policy='require' name='clflushopt'/&gt;
      &lt;feature policy='require' name='umip'/&gt;
      &lt;feature policy='require' name='md-clear'/&gt;
      &lt;feature policy='require' name='stibp'/&gt;
      &lt;feature policy='require' name='arch-capabilities'/&gt;
      &lt;feature policy='require' name='ssbd'/&gt;
      &lt;feature policy='require' name='xsaves'/&gt;
      &lt;feature policy='require' name='pdpe1gb'/&gt;
      &lt;feature policy='require' name='invtsc'/&gt;
      &lt;feature policy='require' name='skip-l1dfl-vmentry'/&gt;
    &lt;/mode&gt;
...

Running this command on both machines and feeding the concatenated
output to 'virsh hypervisor-cpu-baseline' should give you the
intersection between those CPUs.

Jano


["signature.asc" (application/pgp-signature)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190923083147</emailId><senderName>Peter Krempa</senderName><senderEmail>pkrempa@redhat.com</senderEmail><timestampReceived>2019-09-23 08:31:47-0400</timestampReceived><subject>Re: [libvirt-users] VM cloning with memory state</subject><body>

On Mon, Sep 23, 2019 at 11:17:21 +0300, Benny Zlotnik wrote:
&gt; Hi,
&gt; 
&gt; We are trying to implement VM cloning with snapshots for ovirt. For
&gt; the most part, everything seems to work fine.  However, when
&gt; saved-state comes into play it gets complicated.  As it seems
&gt; impossible to restore a saved state file for a different VM due to a
&gt; mismatch in UUID and name, I was wondering if it is possible to
&gt; somehow work around this?
&gt; Is it a sensible thing to do? (these are essentially the same VMs in
&gt; terms of configuration and disk content)
&gt; Is there a better approach to cloning a VM entirely (with snapshots and memory)?

It is a rather bad idea to try to run a second copy of the same memory
state captured in the past:

1) network connections which exist become duplicate
2) the networking stack on the host may become confused by duplicated
   MAC addresses (changing the MAC in the XML is not enough when the
   guest is running!)
3) the state of pseudo-random number generators will be duplicated
4) Any other VM specific unique-identifiers will become duplicate
5) State of applications running in the guest would be duplicated. Apps
   may react very poorly to this.

This question has already appeared before but nobody yet provided a
satisfactory use case for cloning a running VM.

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190923130806</emailId><senderName>Daniel =?utf-8?B?UC4gQmVycmFuZ8Op?=</senderName><senderEmail>berrange@redhat.com</senderEmail><timestampReceived>2019-09-23 13:08:06-0400</timestampReceived><subject>Re: [libvirt-users] Certificate checking on TLS migrations to an IP address</subject><body>

On Mon, Sep 23, 2019 at 03:04:46PM +0200, Milan Zamazal wrote:
&gt; Milan Zamazal &lt;mzamazal@redhat.com&gt; writes:
&gt; 
&gt; &gt; Daniel P. Berrangé &lt;berrange@redhat.com&gt; writes:
&gt; &gt;
&gt; &gt;&gt; On Wed, Sep 18, 2019 at 12:18:32PM +0200, Milan Zamazal wrote:
&gt; &gt;&gt;&gt; Daniel P. Berrangé &lt;berrange@redhat.com&gt; writes:
&gt; &gt;&gt;&gt; 
&gt; &gt;&gt;
&gt; &gt;&gt;&gt; &gt; On Wed, Sep 04, 2019 at 03:38:25PM +0200, Milan Zamazal wrote:
&gt; &gt;&gt;&gt; &gt;&gt; Hi, I'm trying to add TLS migrations to oVirt, but I've hit a problem
&gt; &gt;&gt;&gt; &gt;&gt; with certificate checking.
&gt; &gt;&gt;&gt; &gt;
&gt; &gt;&gt;&gt; &gt;&gt; 
&gt; &gt;&gt;&gt; &gt;&gt; oVirt uses the destination host IP address, rather than the host name,
&gt; &gt;&gt;&gt; &gt;&gt; in the migration URI passed to virDomainMigrateToURI3.  One reason for
&gt; &gt;&gt;&gt; &gt;&gt; doing that is that a separate migration network may be used for
&gt; &gt;&gt;&gt; &gt;&gt; migrations, while the host name resolves to the management network
&gt; &gt;&gt;&gt; &gt;&gt; interface.
&gt; &gt;&gt;&gt; &gt;&gt; 
&gt; &gt;&gt;&gt; &gt;&gt; But it causes a problem with certificate checking.  The destination IP
&gt; &gt;&gt;&gt; &gt;&gt; address is checked against the name, which is a host name, given in the
&gt; &gt;&gt;&gt; &gt;&gt; destination certificate.  That means there is mismatch and the migration
&gt; &gt;&gt;&gt; &gt;&gt; fails.  I don't think it'd be a very good idea to avoid the problem by
&gt; &gt;&gt;&gt; &gt;&gt; putting IP addresses into server certificates.
&gt; &gt;&gt;&gt; &gt;
&gt; &gt;&gt;&gt; &gt; In fact that is *exactly* what you should be doing.
&gt; &gt;&gt;&gt; &gt;
&gt; &gt;&gt;&gt; &gt; Traditionally certificates were created with the 'common name' field
&gt; &gt;&gt;&gt; &gt; holding the fully qualified DNS based hostname for the server.
&gt; &gt;&gt;&gt; &gt;
&gt; &gt;&gt;&gt; &gt; This was long known to be a problem because it is very common for
&gt; &gt;&gt;&gt; &gt; servers to have multiple DNS names, or for clients to use the
&gt; &gt;&gt;&gt; &gt; unqualified hostname, or use the IP address(es).
&gt; &gt;&gt;&gt; 
&gt; &gt;&gt;&gt; The problem with putting IP addresses into certificates is that the
&gt; &gt;&gt;&gt; certificate must be updated each time an IP address changes, is added or
&gt; &gt;&gt;&gt; is removed.  Doing this in oVirt would be complicated and error-prone.
&gt; &gt;&gt;&gt; While host names are stable, host networks and the related IP addresses
&gt; &gt;&gt;&gt; may change.
&gt; &gt;&gt;&gt; 
&gt; &gt;&gt;&gt; &gt; Thus, the "Subject alt name" extension was created. This allows
&gt; &gt;&gt;&gt; &gt; certificates to be created containing multiple hostnames and
&gt; &gt;&gt;&gt; &gt; multiple IP addresses. The certificate will be validated correctly
&gt; &gt;&gt;&gt; &gt; if any one of those data items matches. When 'subject alt name' is
&gt; &gt;&gt;&gt; &gt; present in a certificate, the 'common name' field should be completely
&gt; &gt;&gt;&gt; &gt; ignored by compliant TLS clients, so you are free to put whatever
&gt; &gt;&gt;&gt; &gt; you want in the common name - hostname or IP address or blah...
&gt; &gt;&gt;&gt; 
&gt; &gt;&gt;&gt; We can switch to using Subject Alt Name and we have a patch for that now
&gt; &gt;&gt;&gt; based on your advice, but it doesn't solve the problem with tracking IP
&gt; &gt;&gt;&gt; address changes and updating the corresponding certificates whenever a
&gt; &gt;&gt;&gt; change occurs.
&gt; &gt;&gt;&gt; 
&gt; &gt;&gt;&gt; &gt; If you look at our docs, we updated them to illustrate how to
&gt; &gt;&gt;&gt; &gt; issue certs containing hostnames + IP addresses:
&gt; &gt;&gt;&gt; &gt;
&gt; &gt;&gt;&gt; &gt; https://libvirt.org/remote.html#Remote_TLS_server_certificates
&gt; &gt;&gt;&gt; &gt;
&gt; &gt;&gt;&gt; &gt;&gt; 
&gt; &gt;&gt;&gt; &gt;&gt; Is there any way to make TLS migrations working under these
&gt; &gt;&gt;&gt; &gt;&gt; circumstances?  For instance, SPICE remote-viewer allows the client to
&gt; &gt;&gt;&gt; &gt;&gt; specify the certificate subject to expect on the host when connecting to
&gt; &gt;&gt;&gt; &gt;&gt; it using an IP address.  Can (or could) libvirt do something similar?
&gt; &gt;&gt;&gt; 
&gt; &gt;&gt;&gt; Would it be possible?  We have host names in the certificates under our
&gt; &gt;&gt;&gt; control and we know which host name to expect in the certificate
&gt; &gt;&gt;&gt; regardless the IP address used for the given connection.  Checking the
&gt; &gt;&gt;&gt; certificate against a given host name would solve the problem easily and
&gt; &gt;&gt;&gt; robustly for us.
&gt; &gt;&gt;
&gt; &gt;&gt; There's two options that could make it work
&gt; &gt;&gt;
&gt; &gt;&gt;  - Define a new migration parameter which lets apps pass in the hostname
&gt; &gt;&gt;    to use for TLS cert validation to libvirt, which would have to then
&gt; &gt;&gt;    pass it into QEMU
&gt; &gt;
&gt; &gt; I think this is the best option.  We know the destination host name,
&gt; &gt; while we need to use an IP address to connect to it in order to use a
&gt; &gt; particular network.
&gt; 
&gt; If we can agree on this, should I file a corresponding RFE on libvirt?

Yes, please go ahead &amp; do that


Regards,
Daniel
-- 
|: https://berrange.com      -o-    https://www.flickr.com/photos/dberrange :|
|: https://libvirt.org         -o-            https://fstop138.berrange.com :|
|: https://entangle-photo.org    -o-    https://www.instagram.com/dberrange :|

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190923162115</emailId><senderName>Thomas Luening</senderName><senderEmail>toml@thlu.de</senderEmail><timestampReceived>2019-09-23 16:21:15-0400</timestampReceived><subject>Re: [libvirt-users] Privacy Extension not working in VM</subject><body>

Hi Daniel,

thanks for your response.

&gt; You mention you used 'macvtap' but not which mode of macvtap ? None the
&gt; less if you're using it in bridge mode, or passthroug hmode, there should
&gt; be no filtering of guest traffic in general, since the guest traffic is
&gt; forwarding at the ethernet layer, not IP layer.
&gt; 
&gt; The exception would be if you hve the br-netfilter extension loaded which
&gt; causes guest traffic to be processed by the host firewall.

The macvtap-Device is started in bridge mode via a systemd-service-unit 
before the VM is started, see below. The kernel module br-netfilter for 
Packetfiltering is not loaded.  But the PE-based IPv6 is still blocked 
furthermore. The MAC-based IPv6 works fine.

BR, Tom

# cat /etc/systemd/system/kvm-network-lan.service
[Unit]
Description=kvm-local-network.service     Setup a macvtap-Bridge for 
Client-Integration in LAN
After=network.target
Wants=network.target

[Service]
Type=oneshot
RemainAfterExit=yes

ExecStartPre=/usr/sbin/ip link add link enp2s0 macvtap0 address 
d0:50:99:0a:0a:0a type macvtap mode bridge
ExecStartPre=/usr/sbin/ip link set macvtap0 up
ExecStart=/usr/sbin/ip link show macvtap0

ExecStop=/usr/sbin/ip link set macvtap0 down
ExecStopPost=/usr/sbin/ip link del macvtap0

[Install]
WantedBy=multi-user.target


# cat /etc/libvirt/qemu/vm1.xml | grep "&lt;interface" -A 5
     &lt;interface type='direct'&gt;
       &lt;mac address='d0:50:99:0b:0b:0b'/&gt;
       &lt;source dev='macvtap0' mode='bridge'/&gt;
       &lt;model type='virtio'/&gt;
       &lt;address type='pci' domain='0x0000' bus='0x01' slot='0x00' 
function='0x0'/&gt;
     &lt;/interface&gt;

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190906063956</emailId><senderName>18781374080</senderName><senderEmail>18781374080@163.com</senderEmail><timestampReceived>2019-09-06 06:39:56-0400</timestampReceived><subject>[libvirt-users] could not create snapshotxml on encryption image</subject><body>

[Attachment #2 (multipart/alternative)]

[Attachment #4 (text/plain)]

hi ，everyone!
I am a newcomer to Libvirt, and I don't know if it's a native question,


I create snapshots of virtual machines that use encrypted disk, The console gave me \
the following error:


Traceback(most recent call last):
    File "/usr/lib/python2.7/site-packages/vdsm/virt/vm.py",line 4613, in snapshot
          self._dom,snapshotCreateXML(snapxml, snapFlags)
    File "/usr/lib/python2.7/site-packages/vdsm/virt/virdomain.py", in line 98, in f 
           ret = attr(*args, **kwargs)
    File "/usr/lib/python2.7/site-packages/vdsm/common/libvirtconnection.py", line \
130, in wrapper  ret = f(*args, **kwargs)
  File "/usr/lib/python2.7/site-packages/vdsm/common/function.py", line 92, in \
wrapper  return func(inst, *args, **kwargs)
  File "/usr/lib64/python2.7/site-packages/libvirt.py", line 2620, in \
snapshotCreateXML  if ret is None:raise libvirtError('virDomainSnapshotCreateXML() \
failed', dom=self)  libvirtError: internal error: unable to execute QEMU command \
'transaction': Parameter 'encrypt.key-secret' is required for cipher


And try adding encryption fields to domainsnapshot, as shown below


&lt;?xml version='1.0' encoding='utf-8'?&gt;
&lt;domainsnapshot&gt;
&lt;disks&gt;
&lt;disk name="sda" snapshot="external" type="file"&gt;             
&lt;source file="/rhev/data-center/mnt/192.168.1.13:_exports_data/168bc099-3ff1-44e8-ba2f \
-face1594db63/images/eed78b32-f257-445f-8f2e-b5c969ee38e8/da869c1d-f6bb-4816-be6a-f4d1d2ae2af2" \
type="file" /&gt;        #enc  &lt;encryption format="luks"&gt;
&lt;secret type="passphrase" uuid="694bdf38-214e-48d3-8c4c-9dbbcf0f5fa0" /&gt;
&lt;/encryption&gt;
&lt;/disk&gt;
   &lt;/disks&gt;
&lt;memory file="/rhev/data-center/mnt/192.168.0.91:_exports_data/168bc099-3ff1-44e8-ba2f \
-face1594db63/images/6236ecf4-0eb5-4879-bb6d-251ae84b55f8/f086c613-d1c2-4ab3-851e-97961173d1d6" \
snapshot="external" /&gt;   # notenc  &lt;/domainsnapshot&gt;


But there are still the same mistakes. I don't know whether the encrypted snapshot \
supports this operation or whether I added encryption information in the wrong way.


This problem has been bothering me for a long time. Any tips or help will be \
appreciated. Thank you


&gt; &gt; 
18781374080
&gt; 
&gt; 
18781374080@163.com
&gt; 
签名由网易邮箱大师定制


[Attachment #5 (text/html)]

&lt;html&gt;
&lt;head&gt;
    &lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8"&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;style&gt;
    font{
        line-height: 1.6;
    }
    ul,ol{
        padding-left: 20px;
        list-style-position: inside;
    }
&lt;/style&gt;
&lt;div style="font-family:微软雅黑,Verdana,"Microsoft \
Yahei",SimSun,sans-serif;font-size:14px; line-height:1.6;"&gt;  &lt;div&gt;&lt;/div&gt;&lt;div&gt;
    &lt;div&gt;
        &lt;div style="color: rgb(49, 53, 59); font-family: 微软雅黑, Verdana, \
'Microsoft Yahei', SimSun, sans-serif; line-height: 1.6;"&gt;hi \
，everyone!&lt;/div&gt;&lt;div&gt;&lt;span style="color: rgb(49, 53, 59); font-family: \
微软雅黑, Verdana, 'Microsoft Yahei', SimSun, sans-serif; line-height: 22.4px;"&gt;I \
am a newcomer to Libvirt, and I don't know if it's a native \
question,&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style="color: rgb(49, 53, 59); font-family: \
微软雅黑, Verdana, 'Microsoft Yahei', SimSun, sans-serif; line-height: \
22.4px;"&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style="color: rgb(49, 53, 59); font-family: \
微软雅黑, Verdana, 'Microsoft Yahei', SimSun, sans-serif; line-height: 22.4px;"&gt;I \
create snapshots of virtual machines that use encrypted disk, The console gave me the \
following error:&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;span&gt;  
        &lt;/span&gt;
    &lt;/div&gt;
    &lt;div&gt;
        &lt;div style="color: rgb(49, 53, 59); font-family: 微软雅黑, Verdana, \
'Microsoft Yahei', SimSun, sans-serif; line-height: 1.6;"&gt;Traceback(most recent call \
last):&lt;/div&gt;&lt;div style="color: rgb(49, 53, 59); font-family: 微软雅黑, Verdana, \
'Microsoft Yahei', SimSun, sans-serif; line-height: 1.6;"&gt;    File \
"/usr/lib/python2.7/site-packages/vdsm/virt/vm.py",line 4613, in snapshot&lt;/div&gt;&lt;div \
style="color: rgb(49, 53, 59); font-family: 微软雅黑, Verdana, 'Microsoft Yahei', \
SimSun, sans-serif; line-height: 1.6;"&gt;          \
self._dom,snapshotCreateXML(snapxml, snapFlags)&lt;/div&gt;&lt;div style="color: rgb(49, 53, \
59); font-family: 微软雅黑, Verdana, 'Microsoft Yahei', SimSun, sans-serif; \
line-height: 1.6;"&gt;    File "/usr/lib/&lt;span style="line-height: \
22.4px;"&gt;python2.7/site-packages/vdsm/virt/virdomain.py&lt;/span&gt;&lt;span \
style="line-height: 1.6;"&gt;", in line 98, in f &lt;/span&gt;&lt;/div&gt;&lt;div style="color: \
rgb(49, 53, 59); font-family: 微软雅黑, Verdana, 'Microsoft Yahei', SimSun, \
sans-serif; line-height: 1.6;"&gt;           ret = \
attr(*args, **kwargs)&lt;/div&gt;&lt;div style="color: rgb(49, 53, 59); font-family: \
微软雅黑, Verdana, 'Microsoft Yahei', SimSun, sans-serif; line-height: \
22.4px;"&gt;&lt;font face="微软雅黑, Verdana, Microsoft Yahei, SimSun, \
sans-serif"&gt;&lt;span style="line-height: 1.6;"&gt;    &lt;/span&gt;File \
"/usr/lib/python2.7/site-packages/vdsm/common/libvirtconnection.py", line 130, in \
wrapper&lt;/font&gt;&lt;/div&gt;&lt;div style="color: rgb(49, 53, 59); font-family: 微软雅黑, \
Verdana, 'Microsoft Yahei', SimSun, sans-serif; line-height: 22.4px;"&gt;&lt;font \
face="微软雅黑, Verdana, Microsoft Yahei, SimSun, sans-serif"&gt;    ret = \
f(*args, **kwargs)&lt;/font&gt;&lt;/div&gt;&lt;div style="color: rgb(49, 53, 59); font-family: \
微软雅黑, Verdana, 'Microsoft Yahei', SimSun, sans-serif; line-height: \
22.4px;"&gt;&lt;font face="微软雅黑, Verdana, Microsoft Yahei, SimSun, \
sans-serif"&gt;  File "/usr/lib/python2.7/site-packages/vdsm/common/function.py", \
line 92, in wrapper&lt;/font&gt;&lt;/div&gt;&lt;div style="color: rgb(49, 53, 59); font-family: \
微软雅黑, Verdana, 'Microsoft Yahei', SimSun, sans-serif; line-height: \
22.4px;"&gt;&lt;font face="微软雅黑, Verdana, Microsoft Yahei, SimSun, \
sans-serif"&gt;    return func(inst, *args, **kwargs)&lt;/font&gt;&lt;/div&gt;&lt;div \
style="color: rgb(49, 53, 59); font-family: 微软雅黑, Verdana, 'Microsoft Yahei', \
SimSun, sans-serif; line-height: 22.4px;"&gt;&lt;font face="微软雅黑, Verdana, \
Microsoft Yahei, SimSun, sans-serif"&gt;  File \
"/usr/lib64/python2.7/site-packages/libvirt.py", line 2620, in \
snapshotCreateXML&lt;/font&gt;&lt;/div&gt;&lt;div style="color: rgb(49, 53, 59); font-family: \
微软雅黑, Verdana, 'Microsoft Yahei', SimSun, sans-serif; line-height: \
22.4px;"&gt;&lt;font face="微软雅黑, Verdana, Microsoft Yahei, SimSun, \
sans-serif"&gt;    if ret is None:raise \
libvirtError('virDomainSnapshotCreateXML() failed', dom=self)&lt;/font&gt;&lt;/div&gt;&lt;div \
style="color: rgb(49, 53, 59); font-family: 微软雅黑, Verdana, 'Microsoft Yahei', \
SimSun, sans-serif; line-height: 22.4px;"&gt;&lt;font face="微软雅黑, Verdana, \
Microsoft Yahei, SimSun, sans-serif"&gt; libvirtError: internal error: unable to \
execute QEMU command 'transaction': Parameter 'encrypt.key-secret' is required for \
cipher&lt;/font&gt;&lt;/div&gt;&lt;div style="color: rgb(49, 53, 59); font-family: 微软雅黑, \
Verdana, 'Microsoft Yahei', SimSun, sans-serif; line-height: 22.4px;"&gt;&lt;font \
face="微软雅黑, Verdana, Microsoft Yahei, SimSun, \
sans-serif"&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style="color: rgb(49, 53, 59); font-family: \
微软雅黑, Verdana, 'Microsoft Yahei', SimSun, sans-serif; line-height: \
22.4px;"&gt;&lt;span style="color: rgb(51, 51, 51); font-family: Arial, 'Microsoft YaHei', \
'\\5FAE软雅黑', '\\5B8B体', 'Malgun Gothic', Meiryo, sans-serif; font-size: \
13.6px; line-height: 25.9875px; widows: auto; background-color: rgb(247, 248, \
250);"&gt;And try adding encryption fields to domainsnapshot, as shown \
below&lt;/span&gt;&lt;/div&gt;&lt;div style="color: rgb(49, 53, 59); font-family: 微软雅黑, \
Verdana, 'Microsoft Yahei', SimSun, sans-serif; line-height: 22.4px;"&gt;&lt;span \
style="color: rgb(51, 51, 51); font-family: Arial, 'Microsoft YaHei', \
'\\5FAE软雅黑', '\\5B8B体', 'Malgun Gothic', Meiryo, sans-serif; font-size: \
13.6px; line-height: 25.9875px; widows: auto; background-color: rgb(247, 248, \
250);"&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style="widows: auto; background-color: rgb(247, \
248, 250); font-size: 13.6px; line-height: 25.9875px;"&gt;&lt;font color="#333333" \
face="Arial, Microsoft YaHei, \\5FAE软雅黑, \\5B8B体, Malgun Gothic, Meiryo, \
sans-serif"&gt;&lt;div&gt;&lt;?xml version='1.0' \
encoding='utf-8'?&gt;&lt;/div&gt;&lt;div&gt;&lt;domainsnapshot&gt;&lt;/div&gt;&lt;div&gt;&lt;span \
class="Apple-tab-span" style="white-space:pre"&gt;	&lt;/span&gt;&lt;disks&gt;&lt;/div&gt;&lt;div&gt;&lt;span \
class="Apple-tab-span" style="white-space:pre"&gt;	&lt;/span&gt;&lt;disk name="sda" \
snapshot="external" type="file"&gt;           \
  &lt;/div&gt;&lt;div&gt;&lt;span class="Apple-tab-span" \
style="white-space:pre"&gt;	&lt;/span&gt;&lt;source \
file="/rhev/data-center/mnt/192.168.1.13:_exports_data/168bc099-3ff1-44e8-ba2f-face159 \
4db63/images/eed78b32-f257-445f-8f2e-b5c969ee38e8/da869c1d-f6bb-4816-be6a-f4d1d2ae2af2" \
type="file" /&gt;        #enc&lt;/div&gt;&lt;div&gt;      \
           &lt;encryption \
format="luks"&gt;&lt;/div&gt;&lt;div&gt;&lt;span class="Apple-tab-span" \
style="white-space:pre"&gt;	&lt;/span&gt;&lt;secret type="passphrase" \
uuid="694bdf38-214e-48d3-8c4c-9dbbcf0f5fa0" /&gt;&lt;/div&gt;&lt;div&gt;&lt;span \
class="Apple-tab-span" \
style="white-space:pre"&gt;	&lt;/span&gt;&lt;/encryption&gt;&lt;/div&gt;&lt;div&gt;&lt;span \
class="Apple-tab-span" style="white-space:pre"&gt;	&lt;/span&gt;&lt;/disk&gt;&lt;/div&gt;&lt;div&gt;  \
 &lt;span class="Apple-tab-span" \
style="white-space:pre"&gt;	&lt;/span&gt;&lt;/disks&gt;&lt;/div&gt;&lt;div&gt;&lt;span class="Apple-tab-span" \
style="white-space:pre"&gt;	&lt;/span&gt;&lt;memory \
file="/rhev/data-center/mnt/192.168.0.91:_exports_data/168bc099-3ff1-44e8-ba2f-face159 \
4db63/images/6236ecf4-0eb5-4879-bb6d-251ae84b55f8/f086c613-d1c2-4ab3-851e-97961173d1d6" \
snapshot="external" /&gt;   # notenc&lt;/div&gt;&lt;div style=""&gt;    \
 &lt;/domainsnapshot&gt;&lt;/div&gt;&lt;div style=""&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=""&gt;&lt;span \
style="font-size: 13.6px; line-height: 25.9875px; widows: auto;"&gt;But there are still \
the same mistakes. I don't know whether the encrypted snapshot supports this \
operation or whether I added encryption information in the wrong \
way.&lt;/span&gt;&lt;/div&gt;&lt;div style=""&gt;&lt;span style="font-size: 13.6px; line-height: \
25.9875px; widows: auto;"&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style="color: \
rgb(49, 53, 59); font-family: 微软雅黑, Verdana, 'Microsoft Yahei', SimSun, \
sans-serif; line-height: 22.4px;"&gt;&lt;span style="color: rgb(51, 51, 51); font-family: \
Arial, 'Microsoft YaHei', '\\5FAE软雅黑', '\\5B8B体', 'Malgun Gothic', Meiryo, \
sans-serif; font-size: 13.6px; line-height: 25.9875px; widows: auto; \
background-color: rgb(247, 248, 250);"&gt;This problem has been bothering me for a long \
time. Any tips or help will be appreciated. Thank you&lt;/span&gt;&lt;/div&gt;&lt;div style="color: \
rgb(49, 53, 59); font-family: 微软雅黑, Verdana, 'Microsoft Yahei', SimSun, \
sans-serif; line-height: 22.4px;"&gt;&lt;font face="微软雅黑, Verdana, Microsoft Yahei, \
SimSun, sans-serif"&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;span&gt;  
        &lt;/span&gt;
    &lt;/div&gt;
    &lt;div id="ntes-pcmac-signature" style="font-family:'微软雅黑'"&gt;
     
    &lt;div style="font-size:14px; padding: 0;  margin:0;line-height:14px;"&gt;
        &lt;div style="padding-bottom:6px;margin-bottom:10px;border-bottom:1px solid \
#e6e6e6;display:inline-block;"&gt;  &lt;a \
href="https://maas.mail.163.com/dashi-web-extend/html/proSignature.html?ftlId=1&amp;na \
me=18781374080&amp;uid=18781374080%40163.com&amp;iconUrl=https%3A%2F%2Fmail-online.nos \
dn.127.net%2Fsm6e287e97618fd71a7263effdae381085.jpg&amp;items=%5B%2218781374080%40163.com%22%5D" \
style="display:block;background:#fff; max-width: 400px; _width: 400px;padding:15px 0 \
10px 0;text-decoration: none; \
outline:none;-webkit-tap-highlight-color:transparent;-webkit-text-size-adjust:none \
!important;text-size-adjust:none !important;"&gt;  &lt;table cellpadding="0" style="width: \
100%; max-width: 100%; table-layout: fixed; border-collapse: collapse;color: \
#9b9ea1;font-size: 14px;line-height:1.3;-webkit-text-size-adjust:none \
!important;text-size-adjust:none !important;"&gt;  &lt;tbody style="font-family: 'PingFang \
SC', 'Hiragino Sans GB','WenQuanYi Micro Hei', 'Microsoft Yahei', '微软雅黑', \
verdana !important; word-wrap:break-word; \
word-break:break-all;-webkit-text-size-adjust:none !important;text-size-adjust:none \
!important;"&gt;  &lt;tr class="firstRow"&gt;
                            &lt;td width="38" style="padding:0; box-sizing: border-box; \
width: 38px;"&gt;  &lt;img width="38" height="38" style="vertical-align:middle; width: \
38px; height: 38px; border-radius:50%;" \
src="https://mail-online.nosdn.127.net/sm6e287e97618fd71a7263effdae381085.jpg"&gt;  \
                &lt;/td&gt;
                            &lt;td style="padding: 0 0 0 10px; color: #31353b;"&gt;
                                &lt;div style="font-size: 16px;font-weight:bold; \
width:100%; white-space: nowrap; overflow:hidden;text-overflow: \
ellipsis;"&gt;18781374080&lt;/div&gt;  &lt;/td&gt;
                    &lt;/tr&gt;
                        &lt;tr width="100%" style="font-size: 14px !important; width: \
                100%;"&gt;
                            &lt;td colspan="2" style="padding:10px 0 0 0; font-size:14px \
                !important; width: 100%;"&gt;
                                    &lt;div style="width: 100%;font-size: 14px \
!important;word-wrap:break-word;word-break:break-all;"&gt;18781374080@163.com&lt;/div&gt;  \
&lt;/td&gt;  &lt;/tr&gt;
                &lt;/tbody&gt;
            &lt;/table&gt;
        &lt;/a&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;div style="font-size:12px;color:#b5b9bd;line-height:18px;"&gt;
        &lt;span&gt;签名由&lt;/span&gt;
        &lt;a style="text-decoration: none;color:#4196ff;padding:0 5px;" \
href="https://mail.163.com/dashi/dlpro.html?from=mail81"&gt;网易邮箱大师&lt;/a&gt;  \
&lt;span&gt;定制&lt;/span&gt;  &lt;/div&gt;
 &lt;/div&gt;
&lt;/div&gt;&lt;!--😀--&gt;
&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190910164758</emailId><senderName>Tim Schumacher</senderName><senderEmail>tim@timakro.de</senderEmail><timestampReceived>2019-09-10 16:47:58-0400</timestampReceived><subject>[libvirt-users] Disk backup for live and offline domains</subject><body>

[Attachment #2 (multipart/signed)]


Hi,

I followed the instructions on the wiki
https://wiki.libvirt.org/page/Live-disk-backup-with-active-blockcommit
for a live disk backup. Unfortunately this is not working when the
domain is offline because the active blockcommit throws

error: Requested operation is not valid: domain is not running

For my use case it should be possible for the domain to shut down while
the backup is in progress. I'm looking for a way to shorten the backing
chain after the backup finishes and the domain is offline.

Is there a way to let libvirt decide wether to shorten the backing chain
using blockcommit or some alternative way which works on offline
domains?

As I'm writing this I might as well ask about the current state of
"incremental backups". It seems like dirty bitmaps can keep track of
which blocks changed and just copy those to the backup. Is there some
libvirt command-line frontend for that or is it planned for the future?

Thanks.

- Tim

["signature.asc" (application/pgp-signature)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190910185909</emailId><senderName>Cole Robinson</senderName><senderEmail>crobinso@redhat.com</senderEmail><timestampReceived>2019-09-10 18:59:09-0400</timestampReceived><subject>Re: [libvirt-users] About vhost-user-blk support</subject><body>

On 8/25/19 10:21 PM, Su Hua wrote:
&gt; Hi, everyone, ask a question, which version can fully support the device type
&gt; of qemu hw/block/vhost-user-blk.c? If so, what should the format of the xml
&gt; file look like?
&gt; 

Hi, libvirt does not currently support vhost-user-blk

- Cole

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190918150723</emailId><senderName>"Lentes, Bernd"</senderName><senderEmail>bernd.lentes@helmholtz-muenchen.de</senderEmail><timestampReceived>2019-09-18 15:07:23-0400</timestampReceived><subject>[libvirt-users] Live-Migration not possible: error: operation failed: guest CPU doesn't match specif</subject><body>

Hi,

i have atwo node HA-cluster with pacemaker, corosync, libvirt and KVM.
Recently i configured a new VirtualDomain which runs fine, but live Migration does \
not succeed. This is the error:

VirtualDomain(vm_snipanalysis)[14322]:  2019/09/18_16:56:54 ERROR: snipanalysis: live \
migration to ha-idg-2 failed: 1 Sep 18 16:56:54 [6970] ha-idg-1       lrmd:   notice: \
operation_finished:       vm_snipanalysis_migrate_to_0:14322:stderr [ error: \
operation failed: guest CPU doesn't match specification: missing features: \
fma,movbe,xsave,avx,f16c,rdrand,fsgsbase,bmi1,avx2,smep,bmi2,erms,invpcid,md-clear,xsaveopt,abm \
]

The two servers are from HP, they are similar, but not identical. Their CPU's are \
different: One is "Intel(R) Xeon(R) CPU E5-2630 v3 @ 2.40GHz", following \
/proc/cpuinfo, the other is "Intel(R) Xeon(R) CPU X5675  @ 3.07GHz". Which guest CPU \
should i choose for having the guest running smoothly on each host ?

Bernd

-- 

Bernd Lentes 
Systemadministration 
Institut für Entwicklungsgenetik 
Gebäude 35.34 - Raum 208 
HelmholtzZentrum münchen 
bernd.lentes@helmholtz-muenchen.de 
phone: +49 89 3187 1241 
phone: +49 89 3187 3827 
fax: +49 89 3187 2294 
http://www.helmholtz-muenchen.de/idg 

Perfekt ist wer keine Fehler macht 
Also sind Tote perfekt
 

Helmholtz Zentrum Muenchen
Deutsches Forschungszentrum fuer Gesundheit und Umwelt (GmbH)
Ingolstaedter Landstr. 1
85764 Neuherberg
www.helmholtz-muenchen.de
Aufsichtsratsvorsitzende: MinDir'in Prof. Dr. Veronika von Messling
Geschaeftsfuehrung: Prof. Dr. med. Dr. h.c. Matthias Tschoep, Kerstin Guenther
Registergericht: Amtsgericht Muenchen HRB 6466
USt-IdNr: DE 129521671


_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20190911005257</emailId><senderName>HUA SU</senderName><senderEmail>suhua.tanke@gmail.com</senderEmail><timestampReceived>2019-09-11 00:52:57-0400</timestampReceived><subject>Re: [libvirt-users] About vhost-user-blk support</subject><body>

[Attachment #2 (multipart/alternative)]

[Attachment #4 (text/plain)]

ok,thanks. Suh HUA SU 邮箱：suhua.tanke@gmail.com 签名由 网易邮箱大师 \
定制 On 09/11/2019 02:59, Cole Robinson wrote: On 8/25/19 10:21 PM, Su Hua wrote: &gt; \
Hi, everyone, ask a question, which version can fully support the device type &gt; of \
qemu hw/block/vhost-user-blk.c? If so, what should the format of the xml &gt; file look \
like? &gt; Hi, libvirt does not currently support vhost-user-blk - Cole


[Attachment #5 (text/html)]

&lt;html&gt;
&lt;head&gt;
    &lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8"&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;div style="line-height:1.6;font-family:'苹方','微软雅黑','sans-serif';"&gt;ok,thanks. \
&lt;br/&gt;&lt;br/&gt;Suh&lt;br/&gt;&lt;br/&gt;&lt;/div&gt;&lt;div class='ne-quoted'&gt;        &lt;a \
href="https://maas.mail.163.com/dashi-web-extend/html/proSignature.html?ftlId=1&amp;name=H \
UA+SU&amp;uid=suhua.tanke%40gmail.com&amp;iconUrl=https%3A%2F%2Fmail-online.nosdn.127.net%2Fqi \
yelogo%2FdefaultAvatar.png&amp;items=%5B%22%E9%82%AE%E7%AE%B1%EF%BC%9Asuhua.tanke%40gmail.com%22%5D" \
style="display:block;background:#fff; max-width: 400px; _width: 400px;padding:15px 0 \
10px 0;text-decoration: none; \
outline:none;-webkit-tap-highlight-color:transparent;-webkit-text-size-adjust:none \
!important;text-size-adjust:none !important;"&gt;  &lt;table cellpadding="0" style='width: \
100%; max-width: 100%; table-layout: fixed; border-collapse: collapse;color: \
#9b9ea1;font-size: 14px;line-height:1.3;-webkit-text-size-adjust:none \
!important;text-size-adjust:none !important;'&gt;  &lt;tbody style="font-family: 'PingFang \
SC', 'Hiragino Sans GB','WenQuanYi Micro Hei', 'Microsoft Yahei', '微软雅黑', \
verdana !important; word-wrap:break-word; \
word-break:break-all;-webkit-text-size-adjust:none !important;text-size-adjust:none \
!important;"&gt;  &lt;tr&gt;
                            &lt;td width="38" style="padding:0; box-sizing: border-box; \
width: 38px;"&gt;  &lt;img width="38" height="38" style="vertical-align:middle; width: \
38px; height: 38px; border-radius:50%;" \
src="https://mail-online.nosdn.127.net/qiyelogo/defaultAvatar.png" /&gt;  &lt;/td&gt;
                            &lt;td style='padding: 0 0 0 10px; color: #31353b;'&gt;
                                &lt;div style="font-size: 16px;font-weight:bold; \
width:100%; white-space: nowrap; overflow:hidden;text-overflow: ellipsis;"&gt;HUA \
SU&lt;/div&gt;  &lt;/td&gt;
                    &lt;/tr&gt;
                        &lt;tr width="100%" style="font-size: 14px !important; width: \
                100%;"&gt;
                            &lt;td colspan='2' style="padding:10px 0 0 0; font-size:14px \
!important; width: 100%;"&gt;  &lt;div style="width: 100%;font-size: 14px \
!important;word-wrap:break-word;word-break:break-all;"&gt;邮箱：suhua.tanke@gmail.com&lt;/div&gt;
  &lt;/td&gt;
                        &lt;/tr&gt;
                &lt;/tbody&gt;
            &lt;/table&gt;
        &lt;/a&gt;&lt;html&gt;&lt;body&gt;&lt;p style="border-top:1px solid #e5e5e5;padding-top: 8px; \
font-size: 12px; color:#b6b8bb;line-height: 1.833;"&gt;签名由 &lt;a \
href="https://mail.163.com/dashi/dlpro.html?from=mail88" \
style="color:#6aa8f6;text-decoration: none"&gt;网易邮箱大师&lt;/a&gt; \
定制&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;&lt;blockquote id='ntes-andriodmail-quote' style="margin:0px \
!important;padding:0px !important;border: none !important;"&gt;&lt;blockquote \
id='ntes-andriodmail-quote' style="margin:0px !important;padding:0px \
!important;border: none !important;"&gt;&lt;div class="J-reply" \
style="background-color:#f2f2f2;color:black;padding-top:6px;padding-bottom:6px;border- \
radius:3px;-moz-border-radius:3px;-webkit-border-radius:3px;margin-top:45px;margin-bottom:20px;"&gt;
  &lt;div style="font-size:14px;line-height:1.5;word-break:break-all;margin-left:10px;margin-right:10px"&gt;On \
&lt;span class="mail-date"&gt;09/11/2019 02:59&lt;/span&gt;, &lt;a class="mail-to" \
style="text-decoration:none;color:#2a97ff;" href="mailto:crobinso@redhat.com"&gt;Cole \
Robinson&lt;/a&gt; wrote:&lt;/div&gt; &lt;/div&gt;On 8/25/19 10:21 PM, Su Hua wrote:
&lt;br/&gt;&gt; Hi, everyone, ask a question, which version can fully support the device \
type &lt;br/&gt;&gt; of qemu hw/block/vhost-user-blk.c? If so, what should the format of \
the xml &lt;br/&gt;&gt; file look like?
&lt;br/&gt;&gt; 
&lt;br/&gt;
&lt;br/&gt;Hi, libvirt does not currently support vhost-user-blk
&lt;br/&gt;
&lt;br/&gt;- Cole
&lt;br/&gt;&lt;/blockquote&gt;&lt;/blockquote&gt;&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190911061647</emailId><senderName>Su Hua</senderName><senderEmail>suhua.tanke@gmail.com</senderEmail><timestampReceived>2019-09-11 06:16:47-0400</timestampReceived><subject>Re: [libvirt-users] About vhost-user-blk support</subject><body>

[Attachment #2 (multipart/related)]

[Attachment #4 (multipart/alternative)]


Hi, I added libvirt4.5.0 support for vhost-user-blk, which can now be used
to start the virtual machine,
but I will see this prompt when I execute virsh edit. How can I remove this
information? It is now also
possible to force edit.
[image: a.png]
[image: b.png]

regards
    su


HUA SU &lt;suhua.tanke@gmail.com&gt; =E4=BA=8E2019=E5=B9=B49=E6=9C=8811=E6=97=A5=
=E5=91=A8=E4=B8=89 =E4=B8=8A=E5=8D=888:52=E5=86=99=E9=81=93=EF=BC=9A
&gt;
&gt; ok,thanks.
&gt;
&gt; Suh

&gt;
&gt; HUA SU
&gt; =E9=82=AE=E7=AE=B1=EF=BC=9Asuhua.tanke@gmail.com
&gt;
&gt; =E7=AD=BE=E5=90=8D=E7=94=B1 =E7=BD=91=E6=98=93=E9=82=AE=E7=AE=B1=E5=A4=A7=
=E5=B8=88 =E5=AE=9A=E5=88=B6
&gt;
&gt; On 09/11/2019 02:59, Cole Robinson wrote:
&gt; On 8/25/19 10:21 PM, Su Hua wrote:
&gt; &gt; Hi, everyone, ask a question, which version can fully support the
device type
&gt; &gt; of qemu hw/block/vhost-user-blk.c? If so, what should the format of the
xml
&gt; &gt; file look like?
&gt; &gt;
&gt;
&gt; Hi, libvirt does not currently support vhost-user-blk
&gt;
&gt; - Cole

[Attachment #7 (text/html)]

&lt;div dir="ltr"&gt;Hi, I added libvirt4.5.0 support for vhost-user-blk, which can now be \
used to start the virtual machine,&lt;br&gt;but I will see this prompt when I execute virsh \
edit. How can I remove this information? It is now also&lt;br&gt;possible to force \
edit.&lt;br&gt;&lt;div&gt;&lt;img src="cid:ii_k0evf9jc0" alt="a.png" width="562" \
height="60"&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;img src="cid:ii_k0evf9k71" alt="b.png" width="562" \
height="87"&gt;&lt;br&gt;&lt;/div&gt;&lt;br&gt;regards&lt;br&gt;      su&lt;br&gt;&lt;br&gt;&lt;br&gt;HUA SU &lt;&lt;a \
href="mailto:suhua.tanke@gmail.com"&gt;suhua.tanke@gmail.com&lt;/a&gt;&gt; \
于2019年9月11日周三 上午8:52写道：&lt;br&gt;&gt;&lt;br&gt;&gt; \
ok,thanks.&lt;br&gt;&gt;&lt;br&gt;&gt; Suh&lt;br&gt;&lt;br&gt;&gt;&lt;br&gt;&gt; HUA SU&lt;br&gt;&gt; 邮箱：&lt;a \
href="mailto:suhua.tanke@gmail.com"&gt;suhua.tanke@gmail.com&lt;/a&gt;&lt;br&gt;&gt;&lt;br&gt;&gt; \
签名由 网易邮箱大师 定制&lt;br&gt;&gt;&lt;br&gt;&gt; On 09/11/2019 02:59, Cole \
Robinson wrote:&lt;br&gt;&gt; On 8/25/19 10:21 PM, Su Hua wrote:&lt;br&gt;&gt; &gt; Hi, everyone, \
ask a question, which version can fully support the device type&lt;br&gt;&gt; &gt; of qemu \
hw/block/vhost-user-blk.c? If so, what should the format of the xml&lt;br&gt;&gt; &gt; file \
look like?&lt;br&gt;&gt; &gt;&lt;br&gt;&gt;&lt;br&gt;&gt; Hi, libvirt does not currently support \
vhost-user-blk&lt;br&gt;&gt;&lt;br&gt;&gt; - Cole&lt;/div&gt;

--000000000000083808059240ffd9--


["a.png" (image/png)]
["b.png" (image/png)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190911133354</emailId><senderName>Cole Robinson</senderName><senderEmail>crobinso@redhat.com</senderEmail><timestampReceived>2019-09-11 13:33:54-0400</timestampReceived><subject>Re: [libvirt-users] About vhost-user-blk support</subject><body>

You need to extend docs/schemas/domaincommon.rng which is what is used
for the validation virsh is reporting. Do a 'git log' on that file for
other examples of patches adding new qemu command line options. If you
plan to submit it to libvir-list you will also want to add tests/

- Cole

On 9/11/19 2:16 AM, Su Hua wrote:
&gt; Hi, I added libvirt4.5.0 support for vhost-user-blk, which can now be
&gt; used to start the virtual machine,
&gt; but I will see this prompt when I execute virsh edit. How can I remove
&gt; this information? It is now also
&gt; possible to force edit.
&gt; a.png
&gt; b.png
&gt; 
&gt; regards
&gt;     su
&gt; 
&gt; 
&gt; HUA SU &lt;suhua.tanke@gmail.com &lt;mailto:suhua.tanke@gmail.com&gt;&gt; 于2019年9
&gt; 月11日周三 上午8:52写道：
&gt;&gt;
&gt;&gt; ok,thanks.
&gt;&gt;
&gt;&gt; Suh
&gt; 
&gt;&gt;
&gt;&gt; HUA SU
&gt;&gt; 邮箱：suhua.tanke@gmail.com &lt;mailto:suhua.tanke@gmail.com&gt;
&gt;&gt;
&gt;&gt; 签名由 网易邮箱大师 定制
&gt;&gt;
&gt;&gt; On 09/11/2019 02:59, Cole Robinson wrote:
&gt;&gt; On 8/25/19 10:21 PM, Su Hua wrote:
&gt;&gt; &gt; Hi, everyone, ask a question, which version can fully support the
&gt; device type
&gt;&gt; &gt; of qemu hw/block/vhost-user-blk.c? If so, what should the format of
&gt; the xml
&gt;&gt; &gt; file look like?
&gt;&gt; &gt;
&gt;&gt;
&gt;&gt; Hi, libvirt does not currently support vhost-user-blk
&gt;&gt;
&gt;&gt; - Cole


- Cole

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190910203742</emailId><senderName>Tim Schumacher</senderName><senderEmail>tim@timakro.de</senderEmail><timestampReceived>2019-09-10 20:37:42-0400</timestampReceived><subject>[libvirt-users] Disk backup for live and offline domains</subject><body>

[Attachment #2 (multipart/signed)]


Hi,

I followed the instructions on the wiki
https://wiki.libvirt.org/page/Live-disk-backup-with-active-blockcommit
for a live disk backup. Unfortunately this is not working when the
domain is offline because the active blockcommit throws

error: Requested operation is not valid: domain is not running

For my use case it should be possible for the domain to shut down while
the backup is in progress. I'm looking for a way to shorten the backing
chain after the backup finishes and the domain is offline.

Is there a way to let libvirt decide wether to shorten the backing chain
using blockcommit or some alternative way which works on offline
domains?

As I'm writing this I might as well ask about the current state of
"incremental backups". It seems like dirty bitmaps can keep track of
which blocks changed and just copy those to the backup. Is there some
libvirt command-line frontend for that or is it planned for the future?

Thanks.

- Tim

["signature.asc" (application/pgp-signature)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190910204912</emailId><senderName>Daniel Romero</senderName><senderEmail>romero.cl@gmail.com</senderEmail><timestampReceived>2019-09-10 20:49:12-0400</timestampReceived><subject>Re: [libvirt-users] Disk backup for live and offline domains</subject><body>

[Attachment #2 (multipart/alternative)]


have you tried to use direct access to block devices using lvm in your vm's
and then do backups with lvm snapshots?

I'm currently migrating all my "images" vm's to "lvm" vm's because taking
live snapshots is very easy this way. In your case live and offline
snapshot script should be the same.


Regards.
Daniel Romero P.



On Tue, Sep 10, 2019 at 5:38 PM Tim Schumacher &lt;tim@timakro.de&gt; wrote:

&gt; Hi,
&gt;
&gt; I followed the instructions on the wiki
&gt; https://wiki.libvirt.org/page/Live-disk-backup-with-active-blockcommit
&gt; for a live disk backup. Unfortunately this is not working when the
&gt; domain is offline because the active blockcommit throws
&gt;
&gt; error: Requested operation is not valid: domain is not running
&gt;
&gt; For my use case it should be possible for the domain to shut down while
&gt; the backup is in progress. I'm looking for a way to shorten the backing
&gt; chain after the backup finishes and the domain is offline.
&gt;
&gt; Is there a way to let libvirt decide wether to shorten the backing chain
&gt; using blockcommit or some alternative way which works on offline
&gt; domains?
&gt;
&gt; As I'm writing this I might as well ask about the current state of
&gt; "incremental backups". It seems like dirty bitmaps can keep track of
&gt; which blocks changed and just copy those to the backup. Is there some
&gt; libvirt command-line frontend for that or is it planned for the future?
&gt;
&gt; Thanks.
&gt;
&gt; - Tim
&gt; _______________________________________________
&gt; libvirt-users mailing list
&gt; libvirt-users@redhat.com
&gt; https://www.redhat.com/mailman/listinfo/libvirt-users

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;&lt;div&gt;have you tried to use direct access to block devices using lvm in \
your vm's and then do backups with lvm \
snapshots?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I'm currently migrating all my \
"images" vm's to "lvm" vm's because taking live snapshots \
is very easy this way. In your case live and offline snapshot script should be the \
same.&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div dir="ltr" \
class="gmail_signature" data-smartmail="gmail_signature"&gt;Regards.&lt;br&gt;Daniel Romero \
P.&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;div class="gmail_quote"&gt;&lt;div dir="ltr" \
class="gmail_attr"&gt;On Tue, Sep 10, 2019 at 5:38 PM Tim Schumacher &lt;&lt;a \
href="mailto:tim@timakro.de"&gt;tim@timakro.de&lt;/a&gt;&gt; wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote \
class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid \
rgb(204,204,204);padding-left:1ex"&gt;Hi,&lt;br&gt; &lt;br&gt;
I followed the instructions on the wiki&lt;br&gt;
&lt;a href="https://wiki.libvirt.org/page/Live-disk-backup-with-active-blockcommit" \
rel="noreferrer" target="_blank"&gt;https://wiki.libvirt.org/page/Live-disk-backup-with-active-blockcommit&lt;/a&gt;&lt;br&gt;
 for a live disk backup. Unfortunately this is not working when the&lt;br&gt;
domain is offline because the active blockcommit throws&lt;br&gt;
&lt;br&gt;
error: Requested operation is not valid: domain is not running&lt;br&gt;
&lt;br&gt;
For my use case it should be possible for the domain to shut down while&lt;br&gt;
the backup is in progress. I'm looking for a way to shorten the backing&lt;br&gt;
chain after the backup finishes and the domain is offline.&lt;br&gt;
&lt;br&gt;
Is there a way to let libvirt decide wether to shorten the backing chain&lt;br&gt;
using blockcommit or some alternative way which works on offline&lt;br&gt;
domains?&lt;br&gt;
&lt;br&gt;
As I'm writing this I might as well ask about the current state of&lt;br&gt;
"incremental backups". It seems like dirty bitmaps can keep track of&lt;br&gt;
which blocks changed and just copy those to the backup. Is there some&lt;br&gt;
libvirt command-line frontend for that or is it planned for the future?&lt;br&gt;
&lt;br&gt;
Thanks.&lt;br&gt;
&lt;br&gt;
- Tim&lt;br&gt;
_______________________________________________&lt;br&gt;
libvirt-users mailing list&lt;br&gt;
&lt;a href="mailto:libvirt-users@redhat.com" \
target="_blank"&gt;libvirt-users@redhat.com&lt;/a&gt;&lt;br&gt; &lt;a \
href="https://www.redhat.com/mailman/listinfo/libvirt-users" rel="noreferrer" \
target="_blank"&gt;https://www.redhat.com/mailman/listinfo/libvirt-users&lt;/a&gt;&lt;/blockquote&gt;&lt;/div&gt;




_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190923164131</emailId><senderName>"Lentes, Bernd"</senderName><senderEmail>bernd.lentes@helmholtz-muenchen.de</senderEmail><timestampReceived>2019-09-23 16:41:31-0400</timestampReceived><subject>[libvirt-users] experience with balloon memory ?</subject><body>

Hi ML,

i'm thinking about using balloon memory for our domains. We have about 15 domains \
running concurrently, and i think it might be nice if a domain requires more RAM it \
grabs it, and if it don't need it anymore, it releases it. But i have no experience \
with it. So i have some questions:

- is live migration possible with balloon ?
- is it stable ?
- the domain needs an appropriate driver i think ?
- are there drivers for Windows 7 and 10 ?
- are there drivers for Linux, which kernel version do i need ?
- does someone have experience with it ? Is there a kind of "best practise" ?

Thanks.


Bernd


-- 

Bernd Lentes 
Systemadministration 
Institut für Entwicklungsgenetik 
Gebäude 35.34 - Raum 208 
HelmholtzZentrum münchen 
bernd.lentes@helmholtz-muenchen.de 
phone: +49 89 3187 1241 
phone: +49 89 3187 3827 
fax: +49 89 3187 2294 
http://www.helmholtz-muenchen.de/idg 

Perfekt ist wer keine Fehler macht 
Also sind Tote perfekt
 

Helmholtz Zentrum Muenchen
Deutsches Forschungszentrum fuer Gesundheit und Umwelt (GmbH)
Ingolstaedter Landstr. 1
85764 Neuherberg
www.helmholtz-muenchen.de
Aufsichtsratsvorsitzende: MinDir'in Prof. Dr. Veronika von Messling
Geschaeftsfuehrung: Prof. Dr. med. Dr. h.c. Matthias Tschoep, Kerstin Guenther
Registergericht: Amtsgericht Muenchen HRB 6466
USt-IdNr: DE 129521671


_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20190923215335</emailId><senderName></senderName><senderEmail>info</senderEmail><timestampReceived>2019-09-23 21:53:35-0400</timestampReceived><subject>Re: [libvirt-users] virsh -c lxc:/// setvcpus and &lt;vcpu&gt; configuration fails</subject><body>

Hi,

ok i tried:

  &lt;vcpu placement='static'&gt;2&lt;/vcpu&gt;
  &lt;iothreads&gt;2&lt;/iothreads&gt;
  &lt;iothreadids&gt;
    &lt;iothread id='1'/&gt;
    &lt;iothread id='2'/&gt;
  &lt;/iothreadids&gt;
  &lt;cputune&gt;
    &lt;vcpupin vcpu='0' cpuset='0'/&gt;
    &lt;vcpupin vcpu='1' cpuset='1'/&gt;
    &lt;emulatorpin cpuset='0-1'/&gt;
    &lt;iothreadpin iothread='1' cpuset='0'/&gt;
    &lt;iothreadpin iothread='2' cpuset='1'/&gt;
  &lt;/cputune&gt;

aswell as

  &lt;vcpu placement='static' cpuset='0-1' current='2'&gt;4&lt;/vcpu&gt;


and, it shows in the cpuset cgroup:

#cat cpuset.cpus
0-1

# cat cpuset.effective_cpus
0-1

And yes, the CPU power is reduced to two cores.

But still, /proc/cpuinfo will show _all_ cpu cores of the hostmachine.

Also the total cpu usage / load, if queried, will be the cpu usage /
load of the hostmachine.

That confuse the applications as they monitor the cpu load/count and try
to balance out things.

Is there really no way to tell libvirt to create the cgroups in a way to
just show X cpu's to the system ?

When i run purely lxc or lxd, its no problem. But i would like to handle
things through libvirt because also the qemu-kvm stuff is handled
through libvirt.

Any ideas ? I also take dark hacking stuff :)

Greetings
Oliver






Am 16.09.19 um 10:58 schrieb Martin Kletzander:
&gt; On Sun, Sep 15, 2019 at 12:21:08PM +0200, info@layer7.net wrote:
&gt;&gt; Hi folks!
&gt;&gt;
&gt;&gt; i created a server with this XML file:
&gt;&gt;
&gt;&gt; &lt;domain type='lxc'&gt;
&gt;&gt;  &lt;name&gt;lxctest1&lt;/name&gt;
&gt;&gt;  &lt;uuid&gt;227bd347-dd1d-4bfd-81e1-01052e91ffe2&lt;/uuid&gt;
&gt;&gt;  &lt;metadata&gt;
&gt;&gt;    &lt;libosinfo:libosinfo
&gt;&gt; xmlns:libosinfo="http://libosinfo.org/xmlns/libvirt/domain/1.0"&gt;
&gt;&gt;      &lt;libosinfo:os id="http://centos.org/centos/6.9"/&gt;
&gt;&gt;    &lt;/libosinfo:libosinfo&gt;
&gt;&gt;  &lt;/metadata&gt;
&gt;&gt;  &lt;memory unit='KiB'&gt;1024000&lt;/memory&gt;
&gt;&gt;  &lt;currentMemory unit='KiB'&gt;1024000&lt;/currentMemory&gt;
&gt;&gt; &lt;vcpu&gt;2&lt;/vcpu&gt;
&gt;&gt;  &lt;numatune&gt;
&gt;&gt;    &lt;memory mode='strict' placement='auto'/&gt;
&gt;&gt;  &lt;/numatune&gt;
&gt;&gt;  &lt;resource&gt;
&gt;&gt;    &lt;partition&gt;/machine&lt;/partition&gt;
&gt;&gt;  &lt;/resource&gt;
&gt;&gt;  &lt;os&gt;
&gt;&gt;    &lt;type arch='x86_64'&gt;exe&lt;/type&gt;
&gt;&gt;    &lt;init&gt;/sbin/init&lt;/init&gt;
&gt;&gt;  &lt;/os&gt;
&gt;&gt;  &lt;idmap&gt;
&gt;&gt;    &lt;uid start='0' target='200000' count='65535'/&gt;
&gt;&gt;    &lt;gid start='0' target='200000' count='65535'/&gt;
&gt;&gt;  &lt;/idmap&gt;
&gt;&gt;  &lt;features&gt;
&gt;&gt;    &lt;privnet/&gt;
&gt;&gt;  &lt;/features&gt;
&gt;&gt;  &lt;clock offset='utc'/&gt;
&gt;&gt;  &lt;on_poweroff&gt;destroy&lt;/on_poweroff&gt;
&gt;&gt;  &lt;on_reboot&gt;restart&lt;/on_reboot&gt;
&gt;&gt;  &lt;on_crash&gt;destroy&lt;/on_crash&gt;
&gt;&gt;  &lt;devices&gt;
&gt;&gt;    &lt;emulator&gt;/usr/libexec/libvirt_lxc&lt;/emulator&gt;
&gt;&gt;    &lt;filesystem type='mount' accessmode='mapped'&gt;
&gt;&gt;      &lt;source dir='/mnt'/&gt;
&gt;&gt;      &lt;target dir='/'/&gt;
&gt;&gt;    &lt;/filesystem&gt;
&gt;&gt;    &lt;interface type='network'&gt;
&gt;&gt;      &lt;mac address='00:16:3e:3e:3e:bb'/&gt;
&gt;&gt;      &lt;source network='Public Network'/&gt;
&gt;&gt;    &lt;/interface&gt;
&gt;&gt;    &lt;console type='pty'&gt;
&gt;&gt;      &lt;target type='lxc' port='0'/&gt;
&gt;&gt;    &lt;/console&gt;
&gt;&gt;  &lt;/devices&gt;
&gt;&gt; &lt;/domain&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; I would expect it to have 2 cpu cores and 1 GB RAM.
&gt;&gt;
&gt;&gt;
&gt;&gt; The RAM config works.
&gt;&gt; The CPU config does not:
&gt;&gt;
&gt; 
&gt; You probably checked /proc/meminfo.  That is provided by libvirt using fuse
&gt; filesystem, but at least it is guaranteed thanks to cgroups.  We do not
&gt; (and I
&gt; don't think we even can, at least reliably) do that with cpuinfo.
&gt; 
&gt; [...]
&gt; 
&gt;&gt; It gives me all CPU's from the host.
&gt;&gt;
&gt; 
&gt; Although if you ran some perf benchmark it should just cap at 2 cpus.
&gt; 
&gt;&gt; I also tried it with
&gt;&gt;
&gt;&gt; &lt;cpu&gt;
&gt;&gt;  &lt;topology sockets='1' cores='2' threads='1'/&gt;
&gt;&gt; &lt;/cpu&gt;
&gt;&gt;
&gt; 
&gt; We should not allow this, IMO.  The reason is that we cannot guarantee
&gt; or even
&gt; emulate this (or even the number of CPUs for that matter).  That's not how
&gt; containers work.  We can provide /proc/cpuinfo through a fuse
&gt; filesystem, but if
&gt; the code actually asks the cpu directly there is no layer in which to
&gt; emulate
&gt; the returned information.
&gt; 
&gt;&gt; That didnt help too.
&gt;&gt;
&gt;&gt; I tried to modify the vcpus through virsh:
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; #virsh -c lxc:/// setvcpus lxctest1 2
&gt;&gt;
&gt;&gt; error: this function is not supported by the connection driver:
&gt;&gt; virDomainSetVcpus
&gt;&gt;
&gt; 
&gt; This should not work for LXC, but it does not make sence because if you
&gt; look at
&gt; the XML we allow `&lt;vcpus&gt;2&lt;/vcpus&gt;`.
&gt; 
&gt;&gt; Which didnt work too.
&gt;&gt;
&gt;&gt;
&gt;&gt; This happens on:
&gt;&gt;
&gt; 
&gt; Unfortunately anywhere, for the reasons said above.  Ideally it should
&gt; not be
&gt; able to specify &lt;vcpus/&gt;, but rather just &lt;cputune/&gt;, but I don't think
&gt; we can
&gt; change that semantics now that we supported the former for quite some time.

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190923081721</emailId><senderName>Benny Zlotnik</senderName><senderEmail>bzlotnik@redhat.com</senderEmail><timestampReceived>2019-09-23 08:17:21-0400</timestampReceived><subject>[libvirt-users] VM cloning with memory state</subject><body>

Hi,

We are trying to implement VM cloning with snapshots for ovirt. For
the most part, everything seems to work fine.  However, when
saved-state comes into play it gets complicated.  As it seems
impossible to restore a saved state file for a different VM due to a
mismatch in UUID and name, I was wondering if it is possible to
somehow work around this?
Is it a sensible thing to do? (these are essentially the same VMs in
terms of configuration and disk content)
Is there a better approach to cloning a VM entirely (with snapshots and memory)?

Thanks!

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190904133825</emailId><senderName>Milan Zamazal</senderName><senderEmail>mzamazal@redhat.com</senderEmail><timestampReceived>2019-09-04 13:38:25-0400</timestampReceived><subject>[libvirt-users] Certificate checking on TLS migrations to an IP address</subject><body>

Hi, I'm trying to add TLS migrations to oVirt, but I've hit a problem
with certificate checking.

oVirt uses the destination host IP address, rather than the host name,
in the migration URI passed to virDomainMigrateToURI3.  One reason for
doing that is that a separate migration network may be used for
migrations, while the host name resolves to the management network
interface.

But it causes a problem with certificate checking.  The destination IP
address is checked against the name, which is a host name, given in the
destination certificate.  That means there is mismatch and the migration
fails.  I don't think it'd be a very good idea to avoid the problem by
putting IP addresses into server certificates.

Is there any way to make TLS migrations working under these
circumstances?  For instance, SPICE remote-viewer allows the client to
specify the certificate subject to expect on the host when connecting to
it using an IP address.  Can (or could) libvirt do something similar?
Or is there any other mechanism to handle this problem?

Thanks,
Milan

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190921092856</emailId><senderName>Thomas Luening</senderName><senderEmail>toml@thlu.de</senderEmail><timestampReceived>2019-09-21 09:28:56-0400</timestampReceived><subject>[libvirt-users] Privacy Extension not working in VM</subject><body>

Hello @ all

With the rebuilding of my Server from Debian 9 to Debian 10, I also 
switch from Virtual Box to Libvirt/KVM. Due to new requirements for the 
VMs, now I have an actual problem, which unfortunately I can not solve. 
The problem has already been discussed in the German Debian-Forum ... 
unfortunately also without success.

The facts:
- ISP = Dual Stack with daily separation
- Host and VM = Debian 10
- The VMs are via macvtap-device regular LAN-Clients
   - IPv4 = DHCP and NAT by DSL-Router
   - IPv6 = GUA via RA and SLAAC (2003::/3)
- IPv4 works fine in the VM
- IPv6 (NDP, RA, SLAAC) works basically also fine in the VM

The existing problem in the VM:
- MAC-Based GUA (2000::/3) is ok, both inbound and outbound

- Outbound traffic via the second GUA (PE-Based) is filtered apparently,
   but not via packetfiltering, I don't know where. There are no error
   messages. On the part of the kernel in the VM and the IPv6-stack,
   everything looks completely ok, no error messages, except that
   Outbound-Traffic by the PE-Address is quietly blocked. The MAC-
   Based IPv6 works unchanged and without error as before.

My questions:
1. Is there a special setting for the VM, to allow the use of Privacy
    Extensions for IPv6 unlimited?
2. Or is that possibly even a known and at the moment unsolved problem?
3. Or is this a intended limitation of virtualization?

Can anyone help me with a solution or a hint? Thank you.

BR, Tom

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190915102108</emailId><senderName></senderName><senderEmail>info</senderEmail><timestampReceived>2019-09-15 10:21:08-0400</timestampReceived><subject>[libvirt-users] virsh -c lxc:/// setvcpus and &lt;vcpu&gt; configuration fails</subject><body>

Hi folks!

i created a server with this XML file:

&lt;domain type='lxc'&gt;
  &lt;name&gt;lxctest1&lt;/name&gt;
  &lt;uuid&gt;227bd347-dd1d-4bfd-81e1-01052e91ffe2&lt;/uuid&gt;
  &lt;metadata&gt;
    &lt;libosinfo:libosinfo
xmlns:libosinfo="http://libosinfo.org/xmlns/libvirt/domain/1.0"&gt;
      &lt;libosinfo:os id="http://centos.org/centos/6.9"/&gt;
    &lt;/libosinfo:libosinfo&gt;
  &lt;/metadata&gt;
  &lt;memory unit='KiB'&gt;1024000&lt;/memory&gt;
  &lt;currentMemory unit='KiB'&gt;1024000&lt;/currentMemory&gt;
 &lt;vcpu&gt;2&lt;/vcpu&gt;
  &lt;numatune&gt;
    &lt;memory mode='strict' placement='auto'/&gt;
  &lt;/numatune&gt;
  &lt;resource&gt;
    &lt;partition&gt;/machine&lt;/partition&gt;
  &lt;/resource&gt;
  &lt;os&gt;
    &lt;type arch='x86_64'&gt;exe&lt;/type&gt;
    &lt;init&gt;/sbin/init&lt;/init&gt;
  &lt;/os&gt;
  &lt;idmap&gt;
    &lt;uid start='0' target='200000' count='65535'/&gt;
    &lt;gid start='0' target='200000' count='65535'/&gt;
  &lt;/idmap&gt;
  &lt;features&gt;
    &lt;privnet/&gt;
  &lt;/features&gt;
  &lt;clock offset='utc'/&gt;
  &lt;on_poweroff&gt;destroy&lt;/on_poweroff&gt;
  &lt;on_reboot&gt;restart&lt;/on_reboot&gt;
  &lt;on_crash&gt;destroy&lt;/on_crash&gt;
  &lt;devices&gt;
    &lt;emulator&gt;/usr/libexec/libvirt_lxc&lt;/emulator&gt;
    &lt;filesystem type='mount' accessmode='mapped'&gt;
      &lt;source dir='/mnt'/&gt;
      &lt;target dir='/'/&gt;
    &lt;/filesystem&gt;
    &lt;interface type='network'&gt;
      &lt;mac address='00:16:3e:3e:3e:bb'/&gt;
      &lt;source network='Public Network'/&gt;
    &lt;/interface&gt;
    &lt;console type='pty'&gt;
      &lt;target type='lxc' port='0'/&gt;
    &lt;/console&gt;
  &lt;/devices&gt;
&lt;/domain&gt;


I would expect it to have 2 cpu cores and 1 GB RAM.


The RAM config works.
The CPU config does not:


[root@lxctest1 ~]# lscpu
Architecture:          x86_64
CPU op-mode(s):        32-bit, 64-bit
Byte Order:            Little Endian
CPU(s):                24
On-line CPU(s) list:   0-23
Thread(s) per core:    2
Core(s) per socket:    6
Socket(s):             2
NUMA node(s):          2
Vendor ID:             GenuineIntel
CPU family:            6
Model:                 62
Model name:            Intel(R) Xeon(R) CPU E5-2620 v2 @ 2.10GHz
Stepping:              4
CPU MHz:               2399.950
BogoMIPS:              4205.88
Virtualization:        VT-x
L1d cache:             32K
L1i cache:             32K
L2 cache:              256K
L3 cache:              15360K
NUMA node0 CPU(s):     0,2,4,6,8,10,12,14,16,18,20,22
NUMA node1 CPU(s):     1,3,5,7,9,11,13,15,17,19,21,23


It gives me all CPU's from the host.

I also tried it with

&lt;cpu&gt;
  &lt;topology sockets='1' cores='2' threads='1'/&gt;
&lt;/cpu&gt;

That didnt help too.

I tried to modify the vcpus through virsh:



#virsh -c lxc:/// setvcpus lxctest1 2

error: this function is not supported by the connection driver:
virDomainSetVcpus

Which didnt work too.


This happens on:

Centos 7
Kernel: 5.1.15-1.el7.elrepo.x86_64

#virsh -V
Virsh command line tool of libvirt 4.5.0
See web site at https://libvirt.org/

Compiled with support for:
 Hypervisors: QEMU/KVM LXC ESX Test
 Networking: Remote Network Bridging Interface netcf Nwfilter VirtualPort
 Storage: Dir Disk Filesystem SCSI Multipath iSCSI LVM RBD Gluster ZFS
 Miscellaneous: Daemon Nodedev SELinux Secrets Debug DTrace Readline


and also on

Fedora 30
Kernel: 5.2.9-200.fc30.x86_64

# virsh -V
Virsh command line tool of libvirt 5.1.0
See web site at https://libvirt.org/

Compiled with support for:
 Hypervisors: QEMU/KVM LXC LibXL OpenVZ VMware PHYP VirtualBox ESX
Hyper-V Test
 Networking: Remote Network Bridging Interface netcf Nwfilter VirtualPort
 Storage: Dir Disk Filesystem SCSI Multipath iSCSI LVM RBD Sheepdog
Gluster ZFS
 Miscellaneous: Daemon Nodedev SELinux Secrets Debug DTrace Readline


-----------

Can anyone please tell me what i am doing wrong here ?

Thank you !

Greetings
Oliver

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190916085858</emailId><senderName>Martin Kletzander</senderName><senderEmail>mkletzan@redhat.com</senderEmail><timestampReceived>2019-09-16 08:58:58-0400</timestampReceived><subject>Re: [libvirt-users] virsh -c lxc:/// setvcpus and &lt;vcpu&gt; configuration fails</subject><body>

[Attachment #2 (multipart/signed)]


On Sun, Sep 15, 2019 at 12:21:08PM +0200, info@layer7.net wrote:
&gt;Hi folks!
&gt;
&gt;i created a server with this XML file:
&gt;
&gt;&lt;domain type='lxc'&gt;
&gt;  &lt;name&gt;lxctest1&lt;/name&gt;
&gt;  &lt;uuid&gt;227bd347-dd1d-4bfd-81e1-01052e91ffe2&lt;/uuid&gt;
&gt;  &lt;metadata&gt;
&gt;    &lt;libosinfo:libosinfo
&gt;xmlns:libosinfo="http://libosinfo.org/xmlns/libvirt/domain/1.0"&gt;
&gt;      &lt;libosinfo:os id="http://centos.org/centos/6.9"/&gt;
&gt;    &lt;/libosinfo:libosinfo&gt;
&gt;  &lt;/metadata&gt;
&gt;  &lt;memory unit='KiB'&gt;1024000&lt;/memory&gt;
&gt;  &lt;currentMemory unit='KiB'&gt;1024000&lt;/currentMemory&gt;
&gt; &lt;vcpu&gt;2&lt;/vcpu&gt;
&gt;  &lt;numatune&gt;
&gt;    &lt;memory mode='strict' placement='auto'/&gt;
&gt;  &lt;/numatune&gt;
&gt;  &lt;resource&gt;
&gt;    &lt;partition&gt;/machine&lt;/partition&gt;
&gt;  &lt;/resource&gt;
&gt;  &lt;os&gt;
&gt;    &lt;type arch='x86_64'&gt;exe&lt;/type&gt;
&gt;    &lt;init&gt;/sbin/init&lt;/init&gt;
&gt;  &lt;/os&gt;
&gt;  &lt;idmap&gt;
&gt;    &lt;uid start='0' target='200000' count='65535'/&gt;
&gt;    &lt;gid start='0' target='200000' count='65535'/&gt;
&gt;  &lt;/idmap&gt;
&gt;  &lt;features&gt;
&gt;    &lt;privnet/&gt;
&gt;  &lt;/features&gt;
&gt;  &lt;clock offset='utc'/&gt;
&gt;  &lt;on_poweroff&gt;destroy&lt;/on_poweroff&gt;
&gt;  &lt;on_reboot&gt;restart&lt;/on_reboot&gt;
&gt;  &lt;on_crash&gt;destroy&lt;/on_crash&gt;
&gt;  &lt;devices&gt;
&gt;    &lt;emulator&gt;/usr/libexec/libvirt_lxc&lt;/emulator&gt;
&gt;    &lt;filesystem type='mount' accessmode='mapped'&gt;
&gt;      &lt;source dir='/mnt'/&gt;
&gt;      &lt;target dir='/'/&gt;
&gt;    &lt;/filesystem&gt;
&gt;    &lt;interface type='network'&gt;
&gt;      &lt;mac address='00:16:3e:3e:3e:bb'/&gt;
&gt;      &lt;source network='Public Network'/&gt;
&gt;    &lt;/interface&gt;
&gt;    &lt;console type='pty'&gt;
&gt;      &lt;target type='lxc' port='0'/&gt;
&gt;    &lt;/console&gt;
&gt;  &lt;/devices&gt;
&gt;&lt;/domain&gt;
&gt;
&gt;
&gt;I would expect it to have 2 cpu cores and 1 GB RAM.
&gt;
&gt;
&gt;The RAM config works.
&gt;The CPU config does not:
&gt;

You probably checked /proc/meminfo.  That is provided by libvirt using fuse
filesystem, but at least it is guaranteed thanks to cgroups.  We do not (and I
don't think we even can, at least reliably) do that with cpuinfo.

[...]

&gt;It gives me all CPU's from the host.
&gt;

Although if you ran some perf benchmark it should just cap at 2 cpus.

&gt;I also tried it with
&gt;
&gt;&lt;cpu&gt;
&gt;  &lt;topology sockets='1' cores='2' threads='1'/&gt;
&gt;&lt;/cpu&gt;
&gt;

We should not allow this, IMO.  The reason is that we cannot guarantee or even
emulate this (or even the number of CPUs for that matter).  That's not how
containers work.  We can provide /proc/cpuinfo through a fuse filesystem, but if
the code actually asks the cpu directly there is no layer in which to emulate
the returned information.

&gt;That didnt help too.
&gt;
&gt;I tried to modify the vcpus through virsh:
&gt;
&gt;
&gt;
&gt;#virsh -c lxc:/// setvcpus lxctest1 2
&gt;
&gt;error: this function is not supported by the connection driver:
&gt;virDomainSetVcpus
&gt;

This should not work for LXC, but it does not make sence because if you look at
the XML we allow `&lt;vcpus&gt;2&lt;/vcpus&gt;`.

&gt;Which didnt work too.
&gt;
&gt;
&gt;This happens on:
&gt;

Unfortunately anywhere, for the reasons said above.  Ideally it should not be
able to specify &lt;vcpus/&gt;, but rather just &lt;cputune/&gt;, but I don't think we can
change that semantics now that we supported the former for quite some time.

["signature.asc" (application/pgp-signature)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190916120652</emailId><senderName>Oliver Dzombic</senderName><senderEmail>info@layer7.net</senderEmail><timestampReceived>2019-09-16 12:06:52-0400</timestampReceived><subject>Re: [libvirt-users] virsh -c lxc:/// setvcpus and &lt;vcpu&gt; configuration fails</subject><body>

Hi Martin,

thank you very much for your response!

Answers inline :)


&gt;&gt; Although if you ran some perf benchmark it should just cap at 2 cpus.

A cpuset.cpus from /sys/fs/cgroup.... will show with libvirtd: 0-23

So with 0-23 all 24 Cores will be assigned, AND useable.

I installed stress and run it with --cpu 8 or 16 or what ever. The
container receives, just according to the cgroup, all 24 cores without
any limitation.

/proc/cpuinfo
lscpu

it does not matter what you ask, all cpu's are given. Nothing is limited.

Also you will see the cpu load of the system, so also the accounting of
CPU is given to the container ( the container will see, that there is
load on the cpu ).


Compared to this,

a cpuset.cpus in lxc version 3 will show: 12,17,21,28 ( proxmox )

So 4 cores will be displayed, and as long as you dont put load on them,
you will see ~100% idle on all 4 cores.


Same goes for the implementation with lxd ( tested 3.x ).


And yes, sorry, i just saw later, that virDomainSetVcpus is simply not
supporting lxc. My fault, didnt read the documentation fully at that point.

------

So the general question is what is the expected result, when using
libvirt ( and i would really love to use libvirt, as we already use it
with kvm ) and would also like to use it with docker.

So the goal would be, to have something like what lxd / lxc is giving.

A container, that has N virtual CPUs, where only N virtual CPU's are
seen by the container through /proc/cpuinfo with its own cpu accounting.

So the question is:

Can libvirt set inside cgroups cpuset and cpuacct (correctly/at all) ?


The point here is the following:

If the software will check the container and will see on one hand, that
there are 24 CPU's available, but on the other hand only what ever else
is useable, things will go down a very dark road for us. And i guess not
only for us.

So its mandatory that cgroups are set correctly, at least in terms of
cpuset.

Can libvirt do this ? Or, as it seems now, can libvirt only manage KVM's
cgroups settings correctly ?

We just search for a better implementation for the workload. So
containers would be much better because of less overhead.

Again, thank you for your time !


-- 
Mit freundlichen Gruessen / Best regards

Oliver

Am 16.09.19 um 10:58 schrieb Martin Kletzander:
&gt; On Sun, Sep 15, 2019 at 12:21:08PM +0200, info@layer7.net wrote:
&gt;&gt; Hi folks!
&gt;&gt;
&gt;&gt; i created a server with this XML file:
&gt;&gt;
&gt;&gt; &lt;domain type='lxc'&gt;
&gt;&gt;  &lt;name&gt;lxctest1&lt;/name&gt;
&gt;&gt;  &lt;uuid&gt;227bd347-dd1d-4bfd-81e1-01052e91ffe2&lt;/uuid&gt;
&gt;&gt;  &lt;metadata&gt;
&gt;&gt;    &lt;libosinfo:libosinfo
&gt;&gt; xmlns:libosinfo="http://libosinfo.org/xmlns/libvirt/domain/1.0"&gt;
&gt;&gt;      &lt;libosinfo:os id="http://centos.org/centos/6.9"/&gt;
&gt;&gt;    &lt;/libosinfo:libosinfo&gt;
&gt;&gt;  &lt;/metadata&gt;
&gt;&gt;  &lt;memory unit='KiB'&gt;1024000&lt;/memory&gt;
&gt;&gt;  &lt;currentMemory unit='KiB'&gt;1024000&lt;/currentMemory&gt;
&gt;&gt; &lt;vcpu&gt;2&lt;/vcpu&gt;
&gt;&gt;  &lt;numatune&gt;
&gt;&gt;    &lt;memory mode='strict' placement='auto'/&gt;
&gt;&gt;  &lt;/numatune&gt;
&gt;&gt;  &lt;resource&gt;
&gt;&gt;    &lt;partition&gt;/machine&lt;/partition&gt;
&gt;&gt;  &lt;/resource&gt;
&gt;&gt;  &lt;os&gt;
&gt;&gt;    &lt;type arch='x86_64'&gt;exe&lt;/type&gt;
&gt;&gt;    &lt;init&gt;/sbin/init&lt;/init&gt;
&gt;&gt;  &lt;/os&gt;
&gt;&gt;  &lt;idmap&gt;
&gt;&gt;    &lt;uid start='0' target='200000' count='65535'/&gt;
&gt;&gt;    &lt;gid start='0' target='200000' count='65535'/&gt;
&gt;&gt;  &lt;/idmap&gt;
&gt;&gt;  &lt;features&gt;
&gt;&gt;    &lt;privnet/&gt;
&gt;&gt;  &lt;/features&gt;
&gt;&gt;  &lt;clock offset='utc'/&gt;
&gt;&gt;  &lt;on_poweroff&gt;destroy&lt;/on_poweroff&gt;
&gt;&gt;  &lt;on_reboot&gt;restart&lt;/on_reboot&gt;
&gt;&gt;  &lt;on_crash&gt;destroy&lt;/on_crash&gt;
&gt;&gt;  &lt;devices&gt;
&gt;&gt;    &lt;emulator&gt;/usr/libexec/libvirt_lxc&lt;/emulator&gt;
&gt;&gt;    &lt;filesystem type='mount' accessmode='mapped'&gt;
&gt;&gt;      &lt;source dir='/mnt'/&gt;
&gt;&gt;      &lt;target dir='/'/&gt;
&gt;&gt;    &lt;/filesystem&gt;
&gt;&gt;    &lt;interface type='network'&gt;
&gt;&gt;      &lt;mac address='00:16:3e:3e:3e:bb'/&gt;
&gt;&gt;      &lt;source network='Public Network'/&gt;
&gt;&gt;    &lt;/interface&gt;
&gt;&gt;    &lt;console type='pty'&gt;
&gt;&gt;      &lt;target type='lxc' port='0'/&gt;
&gt;&gt;    &lt;/console&gt;
&gt;&gt;  &lt;/devices&gt;
&gt;&gt; &lt;/domain&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; I would expect it to have 2 cpu cores and 1 GB RAM.
&gt;&gt;
&gt;&gt;
&gt;&gt; The RAM config works.
&gt;&gt; The CPU config does not:
&gt;&gt;
&gt; 
&gt; You probably checked /proc/meminfo.  That is provided by libvirt using fuse
&gt; filesystem, but at least it is guaranteed thanks to cgroups.  We do not
&gt; (and I
&gt; don't think we even can, at least reliably) do that with cpuinfo.
&gt; 
&gt; [...]
&gt; 
&gt;&gt; It gives me all CPU's from the host.
&gt;&gt;
&gt; 
&gt; Although if you ran some perf benchmark it should just cap at 2 cpus.
&gt; 
&gt;&gt; I also tried it with
&gt;&gt;
&gt;&gt; &lt;cpu&gt;
&gt;&gt;  &lt;topology sockets='1' cores='2' threads='1'/&gt;
&gt;&gt; &lt;/cpu&gt;
&gt;&gt;
&gt; 
&gt; We should not allow this, IMO.  The reason is that we cannot guarantee
&gt; or even
&gt; emulate this (or even the number of CPUs for that matter).  That's not how
&gt; containers work.  We can provide /proc/cpuinfo through a fuse
&gt; filesystem, but if
&gt; the code actually asks the cpu directly there is no layer in which to
&gt; emulate
&gt; the returned information.
&gt; 
&gt;&gt; That didnt help too.
&gt;&gt;
&gt;&gt; I tried to modify the vcpus through virsh:
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; #virsh -c lxc:/// setvcpus lxctest1 2
&gt;&gt;
&gt;&gt; error: this function is not supported by the connection driver:
&gt;&gt; virDomainSetVcpus
&gt;&gt;
&gt; 
&gt; This should not work for LXC, but it does not make sence because if you
&gt; look at
&gt; the XML we allow `&lt;vcpus&gt;2&lt;/vcpus&gt;`.
&gt; 
&gt;&gt; Which didnt work too.
&gt;&gt;
&gt;&gt;
&gt;&gt; This happens on:
&gt;&gt;
&gt; 
&gt; Unfortunately anywhere, for the reasons said above.  Ideally it should
&gt; not be
&gt; able to specify &lt;vcpus/&gt;, but rather just &lt;cputune/&gt;, but I don't think
&gt; we can
&gt; change that semantics now that we supported the former for quite some time.

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190923100900</emailId><senderName>Daniel =?utf-8?B?UC4gQmVycmFuZ8Op?=</senderName><senderEmail>berrange@redhat.com</senderEmail><timestampReceived>2019-09-23 10:09:00-0400</timestampReceived><subject>Re: [libvirt-users] Privacy Extension not working in VM</subject><body>

On Sat, Sep 21, 2019 at 11:28:56AM +0200, Thomas Luening wrote:
&gt; Hello @ all
&gt; 
&gt; With the rebuilding of my Server from Debian 9 to Debian 10, I also switch
&gt; from Virtual Box to Libvirt/KVM. Due to new requirements for the VMs, now I
&gt; have an actual problem, which unfortunately I can not solve. The problem has
&gt; already been discussed in the German Debian-Forum ... unfortunately also
&gt; without success.
&gt; 
&gt; The facts:
&gt; - ISP = Dual Stack with daily separation
&gt; - Host and VM = Debian 10
&gt; - The VMs are via macvtap-device regular LAN-Clients
&gt;   - IPv4 = DHCP and NAT by DSL-Router
&gt;   - IPv6 = GUA via RA and SLAAC (2003::/3)
&gt; - IPv4 works fine in the VM
&gt; - IPv6 (NDP, RA, SLAAC) works basically also fine in the VM
&gt; 
&gt; The existing problem in the VM:
&gt; - MAC-Based GUA (2000::/3) is ok, both inbound and outbound
&gt; 
&gt; - Outbound traffic via the second GUA (PE-Based) is filtered apparently,
&gt;   but not via packetfiltering, I don't know where. There are no error
&gt;   messages. On the part of the kernel in the VM and the IPv6-stack,
&gt;   everything looks completely ok, no error messages, except that
&gt;   Outbound-Traffic by the PE-Address is quietly blocked. The MAC-
&gt;   Based IPv6 works unchanged and without error as before.
&gt; 
&gt; My questions:
&gt; 1. Is there a special setting for the VM, to allow the use of Privacy
&gt;    Extensions for IPv6 unlimited?
&gt; 2. Or is that possibly even a known and at the moment unsolved problem?
&gt; 3. Or is this a intended limitation of virtualization?
&gt; 
&gt; Can anyone help me with a solution or a hint? Thank you.

You mention you used 'macvtap' but not which mode of macvtap ? None the
less if you're using it in bridge mode, or passthroug hmode, there should
be no filtering of guest traffic in general, since the guest traffic is
forwarding at the ethernet layer, not IP layer.

The exception would be if you hve the br-netfilter extension loaded which
causes guest traffic to be processed by the host firewall.

Regards,
Daniel
-- 
|: https://berrange.com      -o-    https://www.flickr.com/photos/dberrange :|
|: https://libvirt.org         -o-            https://fstop138.berrange.com :|
|: https://entangle-photo.org    -o-    https://www.instagram.com/dberrange :|

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190904135310</emailId><senderName>Daniel =?utf-8?B?UC4gQmVycmFuZ8Op?=</senderName><senderEmail>berrange@redhat.com</senderEmail><timestampReceived>2019-09-04 13:53:10-0400</timestampReceived><subject>Re: [libvirt-users] Certificate checking on TLS migrations to an IP address</subject><body>

On Wed, Sep 04, 2019 at 03:38:25PM +0200, Milan Zamazal wrote:
&gt; Hi, I'm trying to add TLS migrations to oVirt, but I've hit a problem
&gt; with certificate checking.
&gt; 
&gt; oVirt uses the destination host IP address, rather than the host name,
&gt; in the migration URI passed to virDomainMigrateToURI3.  One reason for
&gt; doing that is that a separate migration network may be used for
&gt; migrations, while the host name resolves to the management network
&gt; interface.
&gt; 
&gt; But it causes a problem with certificate checking.  The destination IP
&gt; address is checked against the name, which is a host name, given in the
&gt; destination certificate.  That means there is mismatch and the migration
&gt; fails.  I don't think it'd be a very good idea to avoid the problem by
&gt; putting IP addresses into server certificates.

In fact that is *exactly* what you should be doing.

Traditionally certificates were created with the 'common name' field
holding the fully qualified DNS based hostname for the server.

This was long known to be a problem because it is very common for
servers to have multiple DNS names, or for clients to use the
unqualified hostname, or use the IP address(es).

Thus, the "Subject alt name" extension was created. This allows
certificates to be created containing multiple hostnames and
multiple IP addresses. The certificate will be validated correctly
if any one of those data items matches. When 'subject alt name' is
present in a certificate, the 'common name' field should be completely
ignored by compliant TLS clients, so you are free to put whatever
you want in the common name - hostname or IP address or blah...

If you look at our docs, we updated them to illustrate how to
issue certs containing hostnames + IP addresses:

https://libvirt.org/remote.html#Remote_TLS_server_certificates

&gt; 
&gt; Is there any way to make TLS migrations working under these
&gt; circumstances?  For instance, SPICE remote-viewer allows the client to
&gt; specify the certificate subject to expect on the host when connecting to
&gt; it using an IP address.  Can (or could) libvirt do something similar?
&gt; Or is there any other mechanism to handle this problem?

Regards,
Daniel
-- 
|: https://berrange.com      -o-    https://www.flickr.com/photos/dberrange :|
|: https://libvirt.org         -o-            https://fstop138.berrange.com :|
|: https://entangle-photo.org    -o-    https://www.instagram.com/dberrange :|

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190904140153</emailId><senderName>Milan Zamazal</senderName><senderEmail>mzamazal@redhat.com</senderEmail><timestampReceived>2019-09-04 14:01:53-0400</timestampReceived><subject>Re: [libvirt-users] Certificate checking on TLS migrations to an IP address</subject><body>

Daniel P. Berrangé &lt;berrange@redhat.com&gt; writes:

&gt; On Wed, Sep 04, 2019 at 03:38:25PM +0200, Milan Zamazal wrote:
&gt;&gt; Hi, I'm trying to add TLS migrations to oVirt, but I've hit a problem
&gt;&gt; with certificate checking.
&gt;
&gt;&gt; 
&gt;&gt; oVirt uses the destination host IP address, rather than the host name,
&gt;&gt; in the migration URI passed to virDomainMigrateToURI3.  One reason for
&gt;&gt; doing that is that a separate migration network may be used for
&gt;&gt; migrations, while the host name resolves to the management network
&gt;&gt; interface.
&gt;&gt; 
&gt;&gt; But it causes a problem with certificate checking.  The destination IP
&gt;&gt; address is checked against the name, which is a host name, given in the
&gt;&gt; destination certificate.  That means there is mismatch and the migration
&gt;&gt; fails.  I don't think it'd be a very good idea to avoid the problem by
&gt;&gt; putting IP addresses into server certificates.
&gt;
&gt; In fact that is *exactly* what you should be doing.

OK, thank you for explanation and the doc reference.

Regards,
Milan

&gt; Traditionally certificates were created with the 'common name' field
&gt; holding the fully qualified DNS based hostname for the server.
&gt;
&gt; This was long known to be a problem because it is very common for
&gt; servers to have multiple DNS names, or for clients to use the
&gt; unqualified hostname, or use the IP address(es).
&gt;
&gt; Thus, the "Subject alt name" extension was created. This allows
&gt; certificates to be created containing multiple hostnames and
&gt; multiple IP addresses. The certificate will be validated correctly
&gt; if any one of those data items matches. When 'subject alt name' is
&gt; present in a certificate, the 'common name' field should be completely
&gt; ignored by compliant TLS clients, so you are free to put whatever
&gt; you want in the common name - hostname or IP address or blah...
&gt;
&gt; If you look at our docs, we updated them to illustrate how to
&gt; issue certs containing hostnames + IP addresses:
&gt;
&gt; https://libvirt.org/remote.html#Remote_TLS_server_certificates
&gt;
&gt;&gt; 
&gt;&gt; Is there any way to make TLS migrations working under these
&gt;&gt; circumstances?  For instance, SPICE remote-viewer allows the client to
&gt;&gt; specify the certificate subject to expect on the host when connecting to
&gt;&gt; it using an IP address.  Can (or could) libvirt do something similar?
&gt;&gt; Or is there any other mechanism to handle this problem?
&gt;
&gt; Regards,
&gt; Daniel

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190918101832</emailId><senderName>Milan Zamazal</senderName><senderEmail>mzamazal@redhat.com</senderEmail><timestampReceived>2019-09-18 10:18:32-0400</timestampReceived><subject>Re: [libvirt-users] Certificate checking on TLS migrations to an IP address</subject><body>

Daniel P. Berrangé &lt;berrange@redhat.com&gt; writes:

&gt; On Wed, Sep 04, 2019 at 03:38:25PM +0200, Milan Zamazal wrote:
&gt;&gt; Hi, I'm trying to add TLS migrations to oVirt, but I've hit a problem
&gt;&gt; with certificate checking.
&gt;
&gt;&gt; 
&gt;&gt; oVirt uses the destination host IP address, rather than the host name,
&gt;&gt; in the migration URI passed to virDomainMigrateToURI3.  One reason for
&gt;&gt; doing that is that a separate migration network may be used for
&gt;&gt; migrations, while the host name resolves to the management network
&gt;&gt; interface.
&gt;&gt; 
&gt;&gt; But it causes a problem with certificate checking.  The destination IP
&gt;&gt; address is checked against the name, which is a host name, given in the
&gt;&gt; destination certificate.  That means there is mismatch and the migration
&gt;&gt; fails.  I don't think it'd be a very good idea to avoid the problem by
&gt;&gt; putting IP addresses into server certificates.
&gt;
&gt; In fact that is *exactly* what you should be doing.
&gt;
&gt; Traditionally certificates were created with the 'common name' field
&gt; holding the fully qualified DNS based hostname for the server.
&gt;
&gt; This was long known to be a problem because it is very common for
&gt; servers to have multiple DNS names, or for clients to use the
&gt; unqualified hostname, or use the IP address(es).

The problem with putting IP addresses into certificates is that the
certificate must be updated each time an IP address changes, is added or
is removed.  Doing this in oVirt would be complicated and error-prone.
While host names are stable, host networks and the related IP addresses
may change.

&gt; Thus, the "Subject alt name" extension was created. This allows
&gt; certificates to be created containing multiple hostnames and
&gt; multiple IP addresses. The certificate will be validated correctly
&gt; if any one of those data items matches. When 'subject alt name' is
&gt; present in a certificate, the 'common name' field should be completely
&gt; ignored by compliant TLS clients, so you are free to put whatever
&gt; you want in the common name - hostname or IP address or blah...

We can switch to using Subject Alt Name and we have a patch for that now
based on your advice, but it doesn't solve the problem with tracking IP
address changes and updating the corresponding certificates whenever a
change occurs.

&gt; If you look at our docs, we updated them to illustrate how to
&gt; issue certs containing hostnames + IP addresses:
&gt;
&gt; https://libvirt.org/remote.html#Remote_TLS_server_certificates
&gt;
&gt;&gt; 
&gt;&gt; Is there any way to make TLS migrations working under these
&gt;&gt; circumstances?  For instance, SPICE remote-viewer allows the client to
&gt;&gt; specify the certificate subject to expect on the host when connecting to
&gt;&gt; it using an IP address.  Can (or could) libvirt do something similar?

Would it be possible?  We have host names in the certificates under our
control and we know which host name to expect in the certificate
regardless the IP address used for the given connection.  Checking the
certificate against a given host name would solve the problem easily and
robustly for us.

&gt;&gt; Or is there any other mechanism to handle this problem?

Thanks,
Milan

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190919085755</emailId><senderName>Daniel =?utf-8?B?UC4gQmVycmFuZ8Op?=</senderName><senderEmail>berrange@redhat.com</senderEmail><timestampReceived>2019-09-19 08:57:55-0400</timestampReceived><subject>Re: [libvirt-users] Certificate checking on TLS migrations to an IP address</subject><body>

On Wed, Sep 18, 2019 at 12:18:32PM +0200, Milan Zamazal wrote:
&gt; Daniel P. Berrangé &lt;berrange@redhat.com&gt; writes:
&gt; 
&gt; &gt; On Wed, Sep 04, 2019 at 03:38:25PM +0200, Milan Zamazal wrote:
&gt; &gt;&gt; Hi, I'm trying to add TLS migrations to oVirt, but I've hit a problem
&gt; &gt;&gt; with certificate checking.
&gt; &gt;
&gt; &gt;&gt; 
&gt; &gt;&gt; oVirt uses the destination host IP address, rather than the host name,
&gt; &gt;&gt; in the migration URI passed to virDomainMigrateToURI3.  One reason for
&gt; &gt;&gt; doing that is that a separate migration network may be used for
&gt; &gt;&gt; migrations, while the host name resolves to the management network
&gt; &gt;&gt; interface.
&gt; &gt;&gt; 
&gt; &gt;&gt; But it causes a problem with certificate checking.  The destination IP
&gt; &gt;&gt; address is checked against the name, which is a host name, given in the
&gt; &gt;&gt; destination certificate.  That means there is mismatch and the migration
&gt; &gt;&gt; fails.  I don't think it'd be a very good idea to avoid the problem by
&gt; &gt;&gt; putting IP addresses into server certificates.
&gt; &gt;
&gt; &gt; In fact that is *exactly* what you should be doing.
&gt; &gt;
&gt; &gt; Traditionally certificates were created with the 'common name' field
&gt; &gt; holding the fully qualified DNS based hostname for the server.
&gt; &gt;
&gt; &gt; This was long known to be a problem because it is very common for
&gt; &gt; servers to have multiple DNS names, or for clients to use the
&gt; &gt; unqualified hostname, or use the IP address(es).
&gt; 
&gt; The problem with putting IP addresses into certificates is that the
&gt; certificate must be updated each time an IP address changes, is added or
&gt; is removed.  Doing this in oVirt would be complicated and error-prone.
&gt; While host names are stable, host networks and the related IP addresses
&gt; may change.
&gt; 
&gt; &gt; Thus, the "Subject alt name" extension was created. This allows
&gt; &gt; certificates to be created containing multiple hostnames and
&gt; &gt; multiple IP addresses. The certificate will be validated correctly
&gt; &gt; if any one of those data items matches. When 'subject alt name' is
&gt; &gt; present in a certificate, the 'common name' field should be completely
&gt; &gt; ignored by compliant TLS clients, so you are free to put whatever
&gt; &gt; you want in the common name - hostname or IP address or blah...
&gt; 
&gt; We can switch to using Subject Alt Name and we have a patch for that now
&gt; based on your advice, but it doesn't solve the problem with tracking IP
&gt; address changes and updating the corresponding certificates whenever a
&gt; change occurs.
&gt; 
&gt; &gt; If you look at our docs, we updated them to illustrate how to
&gt; &gt; issue certs containing hostnames + IP addresses:
&gt; &gt;
&gt; &gt; https://libvirt.org/remote.html#Remote_TLS_server_certificates
&gt; &gt;
&gt; &gt;&gt; 
&gt; &gt;&gt; Is there any way to make TLS migrations working under these
&gt; &gt;&gt; circumstances?  For instance, SPICE remote-viewer allows the client to
&gt; &gt;&gt; specify the certificate subject to expect on the host when connecting to
&gt; &gt;&gt; it using an IP address.  Can (or could) libvirt do something similar?
&gt; 
&gt; Would it be possible?  We have host names in the certificates under our
&gt; control and we know which host name to expect in the certificate
&gt; regardless the IP address used for the given connection.  Checking the
&gt; certificate against a given host name would solve the problem easily and
&gt; robustly for us.

There's two options that could make it work

 - Define a new migration parameter which lets apps pass in the hostname
   to use for TLS cert validation to libvirt, which would have to then
   pass it into QEMU

 - The source host libvirtd has a connection to the dest host libvirtd.
   It can thus ask dest host what its primary hostname is, and then
   automatically tell QEMu to use that for TLS cert validation. This
   could cause problems though for people already using TLS certs
   with IP addresses in.

Regards,
Daniel
-- 
|: https://berrange.com      -o-    https://www.flickr.com/photos/dberrange :|
|: https://libvirt.org         -o-            https://fstop138.berrange.com :|
|: https://entangle-photo.org    -o-    https://www.instagram.com/dberrange :|

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190919101752</emailId><senderName>Milan Zamazal</senderName><senderEmail>mzamazal@redhat.com</senderEmail><timestampReceived>2019-09-19 10:17:52-0400</timestampReceived><subject>Re: [libvirt-users] Certificate checking on TLS migrations to an IP address</subject><body>

Daniel P. Berrangé &lt;berrange@redhat.com&gt; writes:

&gt; On Wed, Sep 18, 2019 at 12:18:32PM +0200, Milan Zamazal wrote:
&gt;&gt; Daniel P. Berrangé &lt;berrange@redhat.com&gt; writes:
&gt;&gt; 
&gt;
&gt;&gt; &gt; On Wed, Sep 04, 2019 at 03:38:25PM +0200, Milan Zamazal wrote:
&gt;&gt; &gt;&gt; Hi, I'm trying to add TLS migrations to oVirt, but I've hit a problem
&gt;&gt; &gt;&gt; with certificate checking.
&gt;&gt; &gt;
&gt;&gt; &gt;&gt; 
&gt;&gt; &gt;&gt; oVirt uses the destination host IP address, rather than the host name,
&gt;&gt; &gt;&gt; in the migration URI passed to virDomainMigrateToURI3.  One reason for
&gt;&gt; &gt;&gt; doing that is that a separate migration network may be used for
&gt;&gt; &gt;&gt; migrations, while the host name resolves to the management network
&gt;&gt; &gt;&gt; interface.
&gt;&gt; &gt;&gt; 
&gt;&gt; &gt;&gt; But it causes a problem with certificate checking.  The destination IP
&gt;&gt; &gt;&gt; address is checked against the name, which is a host name, given in the
&gt;&gt; &gt;&gt; destination certificate.  That means there is mismatch and the migration
&gt;&gt; &gt;&gt; fails.  I don't think it'd be a very good idea to avoid the problem by
&gt;&gt; &gt;&gt; putting IP addresses into server certificates.
&gt;&gt; &gt;
&gt;&gt; &gt; In fact that is *exactly* what you should be doing.
&gt;&gt; &gt;
&gt;&gt; &gt; Traditionally certificates were created with the 'common name' field
&gt;&gt; &gt; holding the fully qualified DNS based hostname for the server.
&gt;&gt; &gt;
&gt;&gt; &gt; This was long known to be a problem because it is very common for
&gt;&gt; &gt; servers to have multiple DNS names, or for clients to use the
&gt;&gt; &gt; unqualified hostname, or use the IP address(es).
&gt;&gt; 
&gt;&gt; The problem with putting IP addresses into certificates is that the
&gt;&gt; certificate must be updated each time an IP address changes, is added or
&gt;&gt; is removed.  Doing this in oVirt would be complicated and error-prone.
&gt;&gt; While host names are stable, host networks and the related IP addresses
&gt;&gt; may change.
&gt;&gt; 
&gt;&gt; &gt; Thus, the "Subject alt name" extension was created. This allows
&gt;&gt; &gt; certificates to be created containing multiple hostnames and
&gt;&gt; &gt; multiple IP addresses. The certificate will be validated correctly
&gt;&gt; &gt; if any one of those data items matches. When 'subject alt name' is
&gt;&gt; &gt; present in a certificate, the 'common name' field should be completely
&gt;&gt; &gt; ignored by compliant TLS clients, so you are free to put whatever
&gt;&gt; &gt; you want in the common name - hostname or IP address or blah...
&gt;&gt; 
&gt;&gt; We can switch to using Subject Alt Name and we have a patch for that now
&gt;&gt; based on your advice, but it doesn't solve the problem with tracking IP
&gt;&gt; address changes and updating the corresponding certificates whenever a
&gt;&gt; change occurs.
&gt;&gt; 
&gt;&gt; &gt; If you look at our docs, we updated them to illustrate how to
&gt;&gt; &gt; issue certs containing hostnames + IP addresses:
&gt;&gt; &gt;
&gt;&gt; &gt; https://libvirt.org/remote.html#Remote_TLS_server_certificates
&gt;&gt; &gt;
&gt;&gt; &gt;&gt; 
&gt;&gt; &gt;&gt; Is there any way to make TLS migrations working under these
&gt;&gt; &gt;&gt; circumstances?  For instance, SPICE remote-viewer allows the client to
&gt;&gt; &gt;&gt; specify the certificate subject to expect on the host when connecting to
&gt;&gt; &gt;&gt; it using an IP address.  Can (or could) libvirt do something similar?
&gt;&gt; 
&gt;&gt; Would it be possible?  We have host names in the certificates under our
&gt;&gt; control and we know which host name to expect in the certificate
&gt;&gt; regardless the IP address used for the given connection.  Checking the
&gt;&gt; certificate against a given host name would solve the problem easily and
&gt;&gt; robustly for us.
&gt;
&gt; There's two options that could make it work
&gt;
&gt;  - Define a new migration parameter which lets apps pass in the hostname
&gt;    to use for TLS cert validation to libvirt, which would have to then
&gt;    pass it into QEMU

I think this is the best option.  We know the destination host name,
while we need to use an IP address to connect to it in order to use a
particular network.

&gt;  - The source host libvirtd has a connection to the dest host libvirtd.
&gt;    It can thus ask dest host what its primary hostname is, and then
&gt;    automatically tell QEMu to use that for TLS cert validation. This
&gt;    could cause problems though for people already using TLS certs
&gt;    with IP addresses in.

This doesn't look very good from the security point of view, since then
the source doesn't check it really connects to the host it expects, just
that the destination host has a valid certificate signed by the right CA
(I suppose).  It may be good enough or even useful for some scenarios,
but not for others.

Thanks,
Milan

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190923130446</emailId><senderName>Milan Zamazal</senderName><senderEmail>mzamazal@redhat.com</senderEmail><timestampReceived>2019-09-23 13:04:46-0400</timestampReceived><subject>Re: [libvirt-users] Certificate checking on TLS migrations to an IP address</subject><body>

Milan Zamazal &lt;mzamazal@redhat.com&gt; writes:

&gt; Daniel P. Berrangé &lt;berrange@redhat.com&gt; writes:
&gt;
&gt;&gt; On Wed, Sep 18, 2019 at 12:18:32PM +0200, Milan Zamazal wrote:
&gt;&gt;&gt; Daniel P. Berrangé &lt;berrange@redhat.com&gt; writes:
&gt;&gt;&gt; 
&gt;&gt;
&gt;&gt;&gt; &gt; On Wed, Sep 04, 2019 at 03:38:25PM +0200, Milan Zamazal wrote:
&gt;&gt;&gt; &gt;&gt; Hi, I'm trying to add TLS migrations to oVirt, but I've hit a problem
&gt;&gt;&gt; &gt;&gt; with certificate checking.
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt;&gt; 
&gt;&gt;&gt; &gt;&gt; oVirt uses the destination host IP address, rather than the host name,
&gt;&gt;&gt; &gt;&gt; in the migration URI passed to virDomainMigrateToURI3.  One reason for
&gt;&gt;&gt; &gt;&gt; doing that is that a separate migration network may be used for
&gt;&gt;&gt; &gt;&gt; migrations, while the host name resolves to the management network
&gt;&gt;&gt; &gt;&gt; interface.
&gt;&gt;&gt; &gt;&gt; 
&gt;&gt;&gt; &gt;&gt; But it causes a problem with certificate checking.  The destination IP
&gt;&gt;&gt; &gt;&gt; address is checked against the name, which is a host name, given in the
&gt;&gt;&gt; &gt;&gt; destination certificate.  That means there is mismatch and the migration
&gt;&gt;&gt; &gt;&gt; fails.  I don't think it'd be a very good idea to avoid the problem by
&gt;&gt;&gt; &gt;&gt; putting IP addresses into server certificates.
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; In fact that is *exactly* what you should be doing.
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; Traditionally certificates were created with the 'common name' field
&gt;&gt;&gt; &gt; holding the fully qualified DNS based hostname for the server.
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; This was long known to be a problem because it is very common for
&gt;&gt;&gt; &gt; servers to have multiple DNS names, or for clients to use the
&gt;&gt;&gt; &gt; unqualified hostname, or use the IP address(es).
&gt;&gt;&gt; 
&gt;&gt;&gt; The problem with putting IP addresses into certificates is that the
&gt;&gt;&gt; certificate must be updated each time an IP address changes, is added or
&gt;&gt;&gt; is removed.  Doing this in oVirt would be complicated and error-prone.
&gt;&gt;&gt; While host names are stable, host networks and the related IP addresses
&gt;&gt;&gt; may change.
&gt;&gt;&gt; 
&gt;&gt;&gt; &gt; Thus, the "Subject alt name" extension was created. This allows
&gt;&gt;&gt; &gt; certificates to be created containing multiple hostnames and
&gt;&gt;&gt; &gt; multiple IP addresses. The certificate will be validated correctly
&gt;&gt;&gt; &gt; if any one of those data items matches. When 'subject alt name' is
&gt;&gt;&gt; &gt; present in a certificate, the 'common name' field should be completely
&gt;&gt;&gt; &gt; ignored by compliant TLS clients, so you are free to put whatever
&gt;&gt;&gt; &gt; you want in the common name - hostname or IP address or blah...
&gt;&gt;&gt; 
&gt;&gt;&gt; We can switch to using Subject Alt Name and we have a patch for that now
&gt;&gt;&gt; based on your advice, but it doesn't solve the problem with tracking IP
&gt;&gt;&gt; address changes and updating the corresponding certificates whenever a
&gt;&gt;&gt; change occurs.
&gt;&gt;&gt; 
&gt;&gt;&gt; &gt; If you look at our docs, we updated them to illustrate how to
&gt;&gt;&gt; &gt; issue certs containing hostnames + IP addresses:
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; https://libvirt.org/remote.html#Remote_TLS_server_certificates
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt;&gt; 
&gt;&gt;&gt; &gt;&gt; Is there any way to make TLS migrations working under these
&gt;&gt;&gt; &gt;&gt; circumstances?  For instance, SPICE remote-viewer allows the client to
&gt;&gt;&gt; &gt;&gt; specify the certificate subject to expect on the host when connecting to
&gt;&gt;&gt; &gt;&gt; it using an IP address.  Can (or could) libvirt do something similar?
&gt;&gt;&gt; 
&gt;&gt;&gt; Would it be possible?  We have host names in the certificates under our
&gt;&gt;&gt; control and we know which host name to expect in the certificate
&gt;&gt;&gt; regardless the IP address used for the given connection.  Checking the
&gt;&gt;&gt; certificate against a given host name would solve the problem easily and
&gt;&gt;&gt; robustly for us.
&gt;&gt;
&gt;&gt; There's two options that could make it work
&gt;&gt;
&gt;&gt;  - Define a new migration parameter which lets apps pass in the hostname
&gt;&gt;    to use for TLS cert validation to libvirt, which would have to then
&gt;&gt;    pass it into QEMU
&gt;
&gt; I think this is the best option.  We know the destination host name,
&gt; while we need to use an IP address to connect to it in order to use a
&gt; particular network.

If we can agree on this, should I file a corresponding RFE on libvirt?

Thanks,
Milan

&gt;&gt;  - The source host libvirtd has a connection to the dest host libvirtd.
&gt;&gt;    It can thus ask dest host what its primary hostname is, and then
&gt;&gt;    automatically tell QEMu to use that for TLS cert validation. This
&gt;&gt;    could cause problems though for people already using TLS certs
&gt;&gt;    with IP addresses in.
&gt;
&gt; This doesn't look very good from the security point of view, since then
&gt; the source doesn't check it really connects to the host it expects, just
&gt; that the destination host has a valid certificate signed by the right CA
&gt; (I suppose).  It may be good enough or even useful for some scenarios,
&gt; but not for others.

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190930194349</emailId><senderName>Ajay Kumar</senderName><senderEmail>ajaykumar.ak99@gmail.com</senderEmail><timestampReceived>2019-09-30 19:43:49-0400</timestampReceived><subject>[libvirt-users] Internal error reported by libvirt while creating a VM</subject><body>

[Attachment #2 (multipart/alternative)]


Hi, am Ajay Kumar.

I am trying to create a virtual machine on the remote host (where libvirt
5.8.0) was installed using a virtual machine manager which are running on
the local ubuntu machine.

*The specification of my remote host are:*
*Hypervisor: *KVM
*QEMU version:* QEMU emulator version 2.4.0.1, Copyright (c) 2003-2008
Fabrice Bellard
The below error is propagating when I am trying to install KVM-VMI (
https://github.com/KVM-VMI/kvm-vmi/tree/kvmi) with modified QEMU, and there
is a modified QEMU involved, in  /usr/local/bin/qemu-system-x86_64.

The below particular error propagating when I am trying to create a virtual
machine using VMM gui (virt-manager).


Unable to complete install: 'internal error: process exited while
connecting to monitor:
(process:7400): GLib-WARNING **: 18:19:45.044: ../../../../glib/gmem.c:489:
custom memory allocation vtable not supported
2019-09-30T18:19:45.046714Z qemu-system-x86_64: -msg timestamp=on:
Unsupported machine type
Use -machine help to list supported machines!'

Traceback (most recent call last):
  File "/usr/share/virt-manager/virtManager/asyncjob.py", line 89, in
cb_wrapper
    callback(asyncjob, *args, **kwargs)
  File "/usr/share/virt-manager/virtManager/create.py", line 2553, in
_do_async_install
    guest.start_install(meter=meter)
  File "/usr/share/virt-manager/virtinst/guest.py", line 498, in
start_install
    doboot, transient)
  File "/usr/share/virt-manager/virtinst/guest.py", line 434, in
_create_guest
    domain = self.conn.createXML(install_xml or final_xml, 0)
  File "/usr/lib/python2.7/dist-packages/libvirt.py", line 3603, in
createXML
    if ret is None:raise libvirtError('virDomainCreateXML() failed',
conn=self)
libvirtError: internal error: process exited while connecting to monitor:
(process:7400): GLib-WARNING **: 18:19:45.044: ../../../../glib/gmem.c:489:
custom memory allocation vtable not supported
2019-09-30T18:19:45.046714Z qemu-system-x86_64: -msg timestamp=on:
Unsupported machine type
Use -machine help to list supported machines!





-- 
*With Best Regards:*
Ajay

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;&lt;div&gt;&lt;font size="4"&gt;&lt;span style="font-family:georgia,serif"&gt;Hi, am \
Ajay Kumar.&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size="4"&gt;&lt;span \
style="font-family:georgia,serif"&gt;&lt;br&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size="4"&gt;&lt;span \
style="font-family:georgia,serif"&gt;I am trying to create a virtual machine on the \
remote host (where libvirt 5.8.0) was installed using a virtual machine manager which \
are running on the local ubuntu machine.&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size="4"&gt;&lt;span \
style="font-family:georgia,serif"&gt;&lt;br&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font \
size="4"&gt;&lt;u&gt;&lt;span style="font-family:georgia,serif"&gt;The specification of my remote \
host are:&lt;/span&gt;&lt;/u&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size="4"&gt;&lt;span \
style="font-family:georgia,serif"&gt;&lt;b&gt;Hypervisor: \
&lt;/b&gt;KVM&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;font size="4"&gt;&lt;b&gt;QEMU version:&lt;/b&gt; QEMU \
emulator version 2.4.0.1, Copyright (c) 2003-2008 Fabrice \
Bellard&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size="4"&gt;The below error is propagating when I am \
trying to install KVM-VMI (&lt;a \
href="https://github.com/KVM-VMI/kvm-vmi/tree/kvmi"&gt;https://github.com/KVM-VMI/kvm-vmi/tree/kvmi&lt;/a&gt;) \
with modified QEMU, and there is a modified QEMU involved, in   \
/usr/local/bin/qemu-system-x86_64. &lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font \
size="4"&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size="4"&gt;The below particular error propagating \
when I am trying to create a virtual machine using VMM gui  \
(virt-manager).&lt;/font&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style="font-family:arial \
black,sans-serif"&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style="font-family:arial \
black,sans-serif"&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style="font-family:arial \
black,sans-serif"&gt;Unable to complete install: 'internal error: process exited \
while connecting to monitor: &lt;br&gt;(process:7400): GLib-WARNING **: 18:19:45.044: \
../../../../glib/gmem.c:489: custom memory allocation vtable not \
supported&lt;br&gt;2019-09-30T18:19:45.046714Z qemu-system-x86_64: -msg timestamp=on: \
Unsupported machine type&lt;br&gt;Use -machine help to list supported \
machines!'&lt;br&gt;&lt;br&gt;Traceback (most recent call last):&lt;br&gt;   File \
"/usr/share/virt-manager/virtManager/asyncjob.py", line 89, in \
cb_wrapper&lt;br&gt;      callback(asyncjob, *args, **kwargs)&lt;br&gt;   File \
"/usr/share/virt-manager/virtManager/create.py", line 2553, in \
_do_async_install&lt;br&gt;      guest.start_install(meter=meter)&lt;br&gt;   File \
"/usr/share/virt-manager/virtinst/guest.py", line 498, in start_install&lt;br&gt; \
doboot, transient)&lt;br&gt;   File "/usr/share/virt-manager/virtinst/guest.py", \
line 434, in _create_guest&lt;br&gt;      domain = self.conn.createXML(install_xml or \
final_xml, 0)&lt;br&gt;   File "/usr/lib/python2.7/dist-packages/libvirt.py", \
line 3603, in createXML&lt;br&gt;      if ret is None:raise \
libvirtError('virDomainCreateXML() failed', conn=self)&lt;br&gt;libvirtError: \
internal error: process exited while connecting to monitor: &lt;br&gt;(process:7400): \
GLib-WARNING **: 18:19:45.044: ../../../../glib/gmem.c:489: custom memory allocation \
vtable not supported&lt;br&gt;2019-09-30T18:19:45.046714Z qemu-system-x86_64: -msg \
timestamp=on: Unsupported machine type&lt;br&gt;Use -machine help to list supported \
machines!&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;span \
style="font-family:georgia,serif"&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span \
style="font-family:georgia,serif"&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span \
style="font-family:georgia,serif"&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span \
style="font-family:georgia,serif"&gt;-- &lt;br&gt;&lt;/span&gt;&lt;div dir="ltr" \
class="gmail_signature" data-smartmail="gmail_signature"&gt;&lt;div dir="ltr"&gt;&lt;div&gt;&lt;div \
dir="ltr"&gt;&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;&lt;div&gt;&lt;span \
style="font-family:georgia,serif"&gt;&lt;b&gt;&lt;div style="display:inline!important"&gt;&lt;span \
style="font-size:13.333333969116211px;font-weight:normal"&gt;With Best \
Regards:&lt;/span&gt;&lt;/div&gt;&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span \
style="font-family:georgia,serif"&gt;Ajay&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;




_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190801033630</emailId><senderName>Ming-Hung Tsai</senderName><senderEmail>mingnus@gmail.com</senderEmail><timestampReceived>2019-08-01 03:36:30-0400</timestampReceived><subject>Re: [libvirt-users] Why librbd disallow VM live migration if the disk cache mode is not none or dire</subject><body>

Michal Privoznik &lt;mprivozn@redhat.com&gt; :
&gt;
&gt; On 7/29/19 3:51 AM, Ming-Hung Tsai wrote:
&gt; &gt; I'm curious that why librbd sets this limitation? The rule first
&gt; &gt; appeared in librbd.git commit d57485f73ab. Theoretically, a
&gt; &gt; write-through cache is also safe for VM migration, if the cache
&gt; &gt; implementation guarantees that cache invalidation and disk write are
&gt; &gt; synchronous operations.
&gt; &gt;
&gt; &gt; For example, I'm using Ceph RBD images as VM storage backend. The Ceph
&gt; &gt; librbd supports synchronous write-through cache, by setting
&gt; &gt; rbd_cache_max_dirty to zero, and setting
&gt; &gt; rbd_cache_block_writes_upfront to true, thus it would be safe for VM
&gt; &gt; migration. Is that true? Any suggestion would be appreciated. Thanks.
&gt;
&gt; The commit you refer to is very old and my hunch is that things looked
&gt; different in 2012. Things might have changed since then and if
&gt; write-through wasn't safe ~7 years ago, it might be safe now (with some
&gt; tuning).
&gt;
&gt; Michal

Yes, but now the limitation is still there, in
qemuMigrationSrcIsSafe(). Should we relax the limitation?


Ming-Hung Tsai

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190802072048</emailId><senderName>Michal Privoznik</senderName><senderEmail>mprivozn@redhat.com</senderEmail><timestampReceived>2019-08-02 07:20:48-0400</timestampReceived><subject>Re: [libvirt-users] Researching why different cache modes result in 'some' guest filesystem corrupti</subject><body>

On 7/30/19 10:40 PM, vincent@cojot.name wrote:
&gt; 
&gt; Does anyone have any idea what's going on or what I may be doing wrong?

I don't think it is you doing something wrong. The way shutdown works is 
that libvirt tells qemu to shut down (or in case of guest initiated 
shutdown it is guest OS who says that), and then qemu starts flushing 
its own internal caches (note that these are on the top of host kernel 
FS caches). And once done, qemu sends libvirt an event to which libvirt 
reacts by killing the process.
However, if there is a bug in qemu so that the event is sent before all 
cahces were flushed it may lead to disk corruption. This also 
corresponds to your experience where cache='none' makes the bug go away 
because in that case qemu doesn't add any of its caches into the picture 
and thus no disk corruption is possible.
Unfortunatelly, I don't know enough about qemu to suggest where the bug 
might be, sorry.

Michal

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190803081139</emailId><senderName>Jan Horak</senderName><senderEmail>horak@gransy.com</senderEmail><timestampReceived>2019-08-03 08:11:39-0400</timestampReceived><subject>Re: [libvirt-users] Detach disk from VM - virsh (working) vs. PHP (not working)</subject><body>

Hi, 

i confirm thats works very well now! Thank you for your support!

Jan

&gt; 3. 8. 2019 v 8:54, Michal Prívozník &lt;mprivozn@redhat.com&gt;:
&gt; 
&gt; On 8/2/19 6:26 PM, Jan Horak wrote:
&gt; &gt; Thank you for your help!
&gt; &gt; 
&gt; &gt; 1, i used vda as install disk and vdb as target disk, because i boot from the \
&gt; &gt; first. After setup boot order flag i was able change install disk to vdb and \
&gt; &gt; target disk to vda. With this configuration when i boot from vdb i can install OS \
&gt; &gt; with grub and after it redefine XML without vdb without problem. Thanks a lot. 
&gt; &gt; 2, maybe i have something wrong, but still not working:
&gt; &gt; 
&gt; &gt; Now in libvirt log i got error: device not found: no target device vdb
&gt; 
&gt; Ah, of coure. I overlooked that virDomainDetachDeviceFlags() is called
&gt; with VIR_DOMAIN_AFFECT_CONFIG, which means that live configuration is
&gt; not affected and if the disk you're trying to detach exists only in live
&gt; XML then the API fails. The same problem was found in
&gt; libvirt_domain_disk_add, libvirt_domain_nic_add and
&gt; libvirt_domain_nic_remove.
&gt; 
&gt; I've pushed the fixes to the master. Thanks for the report.
&gt; 
&gt; Michal


_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20190803202957</emailId><senderName>Julian Sternberg</senderName><senderEmail>jules@ispire.me</senderEmail><timestampReceived>2019-08-03 20:29:57-0400</timestampReceived><subject>[libvirt-users] Dev wanted regarding Ceph and/or libxl related bugs and feature requests</subject><body>

[Attachment #2 (multipart/alternative)]


Hi there,

anybody with ceph api and/or libxl skills able to implement following feature and fix bug requests:

https://bugzilla.redhat.com/show_bug.cgi?id=1729408
https://bugzilla.redhat.com/show_bug.cgi?id=1731159
https://bugzilla.redhat.com/show_bug.cgi?id=1732306
[Attachment #5 (text/html)]

&lt;html&gt;&lt;head&gt;&lt;meta http-equiv="content-type" content="text/html; \
charset=utf-8"&gt;&lt;/head&gt;&lt;body dir="auto"&gt;&lt;div dir="ltr"&gt;Hi there,&lt;/div&gt;&lt;div \
dir="ltr"&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;anybody with ceph api and/or libxl skills able to \
implement following feature and fix bug requests:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;a \
href="https://bugzilla.redhat.com/show_bug.cgi?id=1729408"&gt;https://bugzilla.redhat.com/show_bug.cgi?id=1729408&lt;/a&gt;&lt;/div&gt;&lt;div&gt;&lt;a \
href="https://bugzilla.redhat.com/show_bug.cgi?id=1731159"&gt;https://bugzilla.redhat.com/show_bug.cgi?id=1731159&lt;/a&gt;&lt;/div&gt;&lt;div&gt;&lt;a \
href="https://bugzilla.redhat.com/show_bug.cgi?id=1732306"&gt;https://bugzilla.redhat.com/show_bug.cgi?id=1732306&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;




_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190807170822</emailId><senderName>bharath paulraj</senderName><senderEmail>bharathpaul@gmail.com</senderEmail><timestampReceived>2019-08-07 17:08:22-0400</timestampReceived><subject>Re: [libvirt-users] Reg: content of disk is not reflecting in host.</subject><body>

[Attachment #2 (multipart/alternative)]


Thank you for the clarification.

Regards,
Bharath

On Wed, Aug 7, 2019 at 10:16 PM Daniel P. Berrangé &lt;berrange@redhat.com&gt;
wrote:

&gt; On Wed, Aug 07, 2019 at 09:57:02PM +0530, bharath paulraj wrote:
&gt; &gt; Hi Team,
&gt; &gt;
&gt; &gt; I am doing a small testing and I don't know if my expectation is correct
&gt; or
&gt; &gt; not. Pardon me if I am ignorant.
&gt; &gt; I created a VM and the VM is running. In the hypervisor I have created
&gt; &gt; ".img" file and attached this .img file to the VM.
&gt; &gt; My expectation is that, if VM is writing files to the attached disk, then
&gt; &gt; it should reflect in the .img file created in the hypervisor. But It is
&gt; not
&gt; &gt; working as my expectation.
&gt; &gt; Please correct me if my expectation is wrong.
&gt; &gt;
&gt; &gt; Steps:
&gt; &gt; 1. Created disk.img in the hypervisor using the command: dd if=/dev/zero
&gt; &gt; of=disk.img bs=1M count=50; mkfs ext3 -F disk.img
&gt; &gt; 2. Attached the disk to the running VM using the command: virsh
&gt; attach-disk
&gt; &gt; &lt;Domain-Name&gt; --source disk.img  --target vdb --live
&gt; &gt; 3. In the VM, I mounted the disk and created few files.
&gt; &gt; 4. In the hypervisor, I mounted the disk.img to check if the file created
&gt; &gt; in the VM exists in the .img file.
&gt; &gt;    &gt;&gt; I am not able to see those files.
&gt;
&gt; Do *NOT* do step 4 - it is incredibly dangerous in general and may well
&gt; result in filesystem corruption &amp; serious data loss.
&gt;
&gt; Most filesystems are only designed to be used by a single OS at any time.
&gt;
&gt; By mounting it on the host, you have 2 separate OS both accessing the
&gt; same filesystem.  Even if you mount a filesystem with the read-only
&gt; flag, there can still be writes to the filesystem as the second OS to
&gt; mount will see it "dirty" and try to replay the journal that reflects
&gt; what the first OS was doing.
&gt;
&gt; Assuming you didn't actually corrupt your FS image, the likely reason
&gt; you don't see the file from the host is that the guest OS probably hasn't
&gt; flushed it out to disk yet - it'll still be cached in memory in the guest
&gt; unless something explicitly ran 'sync'.
&gt;
&gt; Regards,
&gt; Daniel
&gt; --
&gt; |: https://berrange.com      -o-
&gt; https://www.flickr.com/photos/dberrange :|
&gt; |: https://libvirt.org         -o-
&gt; https://fstop138.berrange.com :|
&gt; |: https://entangle-photo.org    -o-
&gt; https://www.instagram.com/dberrange :|
&gt;


-- 
Regards,
Bharath

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;Thank you for the clarification.  &lt;br&gt;&lt;/div&gt;&lt;div \
dir="ltr"&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Regards,&lt;/div&gt;&lt;div&gt;Bharath&lt;/div&gt;&lt;br&gt;&lt;div \
class="gmail_quote"&gt;&lt;div dir="ltr" class="gmail_attr"&gt;On Wed, Aug 7, 2019 at 10:16 PM \
Daniel P. Berrangé &lt;&lt;a \
href="mailto:berrange@redhat.com"&gt;berrange@redhat.com&lt;/a&gt;&gt; \
wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote class="gmail_quote" style="margin:0px 0px 0px \
0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"&gt;On Wed, Aug 07, 2019 \
at 09:57:02PM +0530, bharath paulraj wrote:&lt;br&gt; &gt; Hi Team,&lt;br&gt;
&gt; &lt;br&gt;
&gt; I am doing a small testing and I don't know if my expectation is correct \
or&lt;br&gt; &gt; not. Pardon me if I am ignorant.&lt;br&gt;
&gt; I created a VM and the VM is running. In the hypervisor I have created&lt;br&gt;
&gt; ".img" file and attached this .img file to the VM.&lt;br&gt;
&gt; My expectation is that, if VM is writing files to the attached disk, then&lt;br&gt;
&gt; it should reflect in the .img file created in the hypervisor. But It is not&lt;br&gt;
&gt; working as my expectation.&lt;br&gt;
&gt; Please correct me if my expectation is wrong.&lt;br&gt;
&gt; &lt;br&gt;
&gt; Steps:&lt;br&gt;
&gt; 1. Created disk.img in the hypervisor using the command: dd if=/dev/zero&lt;br&gt;
&gt; of=disk.img bs=1M count=50; mkfs ext3 -F disk.img&lt;br&gt;
&gt; 2. Attached the disk to the running VM using the command: virsh attach-disk&lt;br&gt;
&gt; &lt;Domain-Name&gt; --source disk.img   --target vdb --live&lt;br&gt;
&gt; 3. In the VM, I mounted the disk and created few files.&lt;br&gt;
&gt; 4. In the hypervisor, I mounted the disk.img to check if the file created&lt;br&gt;
&gt; in the VM exists in the .img file.&lt;br&gt;
&gt;      &gt;&gt; I am not able to see those files.&lt;br&gt;
&lt;br&gt;
Do *NOT* do step 4 - it is incredibly dangerous in general and may well&lt;br&gt;
result in filesystem corruption &amp; serious data loss.&lt;br&gt;
&lt;br&gt;
Most filesystems are only designed to be used by a single OS at any time.&lt;br&gt;
&lt;br&gt;
By mounting it on the host, you have 2 separate OS both accessing the&lt;br&gt;
same filesystem.   Even if you mount a filesystem with the read-only&lt;br&gt;
flag, there can still be writes to the filesystem as the second OS to&lt;br&gt;
mount will see it "dirty" and try to replay the journal that reflects&lt;br&gt;
what the first OS was doing.&lt;br&gt;
&lt;br&gt;
Assuming you didn't actually corrupt your FS image, the likely reason&lt;br&gt;
you don't see the file from the host is that the guest OS probably hasn't&lt;br&gt;
flushed it out to disk yet - it'll still be cached in memory in the guest&lt;br&gt;
unless something explicitly ran 'sync'. &lt;br&gt;
&lt;br&gt;
Regards,&lt;br&gt;
Daniel&lt;br&gt;
-- &lt;br&gt;
&gt; &gt; &lt;a href="https://berrange.com" rel="noreferrer" \
&gt; &gt; target="_blank"&gt;https://berrange.com&lt;/a&gt;         -o-      &lt;a \
&gt; &gt; href="https://www.flickr.com/photos/dberrange" rel="noreferrer" \
&gt; &gt; target="_blank"&gt;https://www.flickr.com/photos/dberrange&lt;/a&gt; :|&lt;br&gt;
&gt; &gt; &lt;a href="https://libvirt.org" rel="noreferrer" \
&gt; &gt; target="_blank"&gt;https://libvirt.org&lt;/a&gt;              -o-                  &lt;a \
&gt; &gt; href="https://fstop138.berrange.com" rel="noreferrer" \
&gt; &gt; target="_blank"&gt;https://fstop138.berrange.com&lt;/a&gt; :|&lt;br&gt;
&gt; &gt; &lt;a href="https://entangle-photo.org" rel="noreferrer" \
&gt; &gt; target="_blank"&gt;https://entangle-photo.org&lt;/a&gt;      -o-      &lt;a \
&gt; &gt; href="https://www.instagram.com/dberrange" rel="noreferrer" \
&gt; &gt; target="_blank"&gt;https://www.instagram.com/dberrange&lt;/a&gt; :|&lt;br&gt;
&lt;/blockquote&gt;&lt;/div&gt;&lt;br clear="all"&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;-- &lt;br&gt;&lt;div dir="ltr" \
class="gmail_signature"&gt;&lt;div dir="ltr"&gt;Regards,&lt;div&gt;Bharath&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190809121929</emailId><senderName>马昊骢 Ianmalcolm Ma</senderName><senderEmail>mahaocong@didiglobal.com</senderEmail><timestampReceived>2019-08-09 12:19:29-0400</timestampReceived><subject>Re: [libvirt-users] Vm in state "in shutdown"</subject><body>



在 2019/8/7 下午9:11，"Michal Prívozník"&lt;mprivozn@redhat.com&gt; 写入:

   &gt; On 8/5/19 1:25 PM, 马昊骢 Ianmalcolm Ma wrote:
   &gt;&gt; Description of problem:
   &gt;&gt; libvirt 3.9 on CentOS Linux release 7.4.1708 (kernel \
3.10.0-693.21.1.el7.x86_64) on Qemu version 2.10.0  
   &gt; I vaguely recall a bug like this, but I don't know any more details.
   &gt; Then again, libvirt-3.9.0 is 2 years old. So I suggest try to upgrade
   &gt; libvirt and see if it helps. Alternatively, you may try to run git
   &gt; bisect and find the commit that fixed the problem.
    
   &gt; Michal
   Thank you for your help!
   I have already found the report on Bugzilla named ‘Bug 1536461 - Libvirtd hangs \
when shutting down domains',  which is the same as my problem. This bug have already \
fixed on patch named ‘Revert "qemu: monitor: do not   report error on shutdown"'. I \
test it in my problem scenario and it works fine.  
   Thanks,
   Ma haocong
   


_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20190807163902</emailId><senderName>bharath paulraj</senderName><senderEmail>bharathpaul@gmail.com</senderEmail><timestampReceived>2019-08-07 16:39:02-0400</timestampReceived><subject>[libvirt-users] Reg: content of disk is not reflecting in host.</subject><body>

[Attachment #2 (multipart/alternative)]


Hi Team,

I am doing a small testing and I don't know if my expectation is correct or
not. Pardon me if I am ignorant.
I created a VM and the VM is running. In the hypervisor I have created
".img" file and attached this .img file to the VM.
My expectation is that, if VM is writing files to the attached disk, then
it should reflect in the .img file created in the hypervisor. But It is not
working as my expectation.
Please correct me if my expectation is wrong.

Steps:
1. Created disk.img in the hypervisor using the command: dd if=/dev/zero
of=disk.img bs=1M count=50; mkfs ext3 -F disk.img
2. Attached the disk to the running VM using the command: virsh attach-disk
&lt;Domain-Name&gt; --source disk.img  --target vdb --live
3. In the VM, I mounted the disk and created few files.
4. In the hypervisor, I mounted the disk.img to check if the file created
in the VM exists in the .img file.
   &gt;&gt; I am not able to see those files.

Regards,
Bharath

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;Hi Team,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I am doing a small testing and I don't \
know if my expectation is correct or not. Pardon me if I am ignorant.  &lt;/div&gt;&lt;div&gt;I \
created a VM and the VM is running. In the hypervisor I have created ".img" \
file and attached this .img file to the VM.&lt;/div&gt;&lt;div&gt;My expectation is that, if VM \
is writing files to the attached disk, then it should reflect in the .img file \
created in the hypervisor. But It is not working as my expectation.  \
&lt;/div&gt;&lt;div&gt;Please correct me if my expectation is  \
wrong.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Steps:&lt;/div&gt;&lt;div&gt;1. Created disk.img in the \
hypervisor using the command: dd if=/dev/zero of=disk.img bs=1M count=50;  mkfs ext3 \
-F disk.img&lt;/div&gt;&lt;div&gt;2. Attached the disk to the running VM using the command: virsh \
attach-disk &lt;Domain-Name&gt; --source disk.img   --target vdb --live&lt;/div&gt;&lt;div&gt;3. \
In the VM, I mounted the disk and created few files.&lt;/div&gt;&lt;div&gt;4. In the hypervisor, \
I mounted the disk.img to check if the file created in the VM exists in the .img \
file.&lt;/div&gt;&lt;div&gt;     &gt;&gt; I am not able to see those files.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;div \
dir="ltr" class="gmail_signature" data-smartmail="gmail_signature"&gt;&lt;div \
dir="ltr"&gt;Regards,&lt;div&gt;Bharath&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190805112544</emailId><senderName>��������� Ianmalcolm Ma</senderName><senderEmail>mahaocong@didiglobal.com</senderEmail><timestampReceived>2019-08-05 11:25:44-0400</timestampReceived><subject>[libvirt-users] Vm in state "in shutdown"</subject><body>

[Attachment #2 (text/plain)]

Description of problem:
libvirt 3.9 on CentOS Linux release 7.4.1708 (kernel 3.10.0-693.21.1.el7.x86_64) on \
Qemu version 2.10.0

I'm currently facing a strange situation. Sometimes my vm is shown by ���virsh list' \
as in state "in shutdown" but there is no qemu-kvm process linked to it.

Libvirt log when "in shutdown" state occur is as follows:
"d470c3b284425b9bacb34d3b5f3845fe" is vm's name, remoteDispatchDomainMemoryStats API \
is called by ���collectd', which is used to collect some vm running states and host \
information once every 30's.

2019-07-25 14:23:58.706+0000: 15818: warning : qemuMonitorJSONIOProcessEvent:235 : \
type: POWERDOWN, vm: d470c3b284425b9bacb34d3b5f3845fe, cost 1.413 secs 2019-07-25 \
14:23:59.601+0000: 15818: warning : qemuMonitorJSONIOProcessEvent:235 : type: \
SHUTDOWN, vm: d470c3b284425b9bacb34d3b5f3845fe, cost 1.202 secs 2019-07-25 \
14:23:59.601+0000: 15818: warning : qemuMonitorJSONIOProcessEvent:235 : type: STOP, \
vm: d470c3b284425b9bacb34d3b5f3845fe, cost 1.203 secs 2019-07-25 14:23:59.601+0000: \
15818: warning : qemuMonitorJSONIOProcessEvent:235 : type: SHUTDOWN, vm: \
d470c3b284425b9bacb34d3b5f3845fe, cost 1.203 secs 2019-07-25 14:23:59.629+0000: \
15818: error : qemuMonitorIORead:597 : Unable to read from monitor: Connection reset \
by peer 2019-07-25 14:23:59.629+0000: 121081: warning : qemuProcessEventHandler:4840 \
: vm: d470c3b284425b9bacb34d3b5f3845fe, event: 6 locked 2019-07-25 14:23:59.629+0000: \
15822: error : qemuMonitorJSONCommandWithFd:364 : internal error: Missing monitor \
reply object 2019-07-25 14:24:29.483+0000: 15821: warning : qemuGetProcessInfo:1468 : \
cannot parse process status data 2019-07-25 14:24:29.829+0000: 15823: warning : \
qemuDomainObjBeginJobInternal:4391 : Cannot start job (modify, none) for domain \
d470c3b284425b9bacb34d3b5f3845fe; current job is (query, none) owned by (15822 \
remoteDispatchDomainMemoryStats, 0 &lt;null&gt;) for (30s, 0s) 2019-07-25 \
14:24:29.829+0000: 15823: error : qemuDomainObjBeginJobInternal:4403 : Timed out \
during operation: cannot acquire state change lock (held by \
remoteDispatchDomainMemoryStats) 2019-07-25 14:24:29.829+0000: 121081: warning : \
qemuDomainObjBeginJobInternal:4391 : Cannot start job (destroy, none) for domain \
d470c3b284425b9bacb34d3b5f3845fe; current job is (query, none) owned by (15822 \
remoteDispatchDomainMemoryStats, 0 &lt;null&gt;) for (30s, 0s) 2019-07-25 \
14:24:29.829+0000: 121081: error : qemuDomainObjBeginJobInternal:4403 : Timed out \
during operation: cannot acquire state change lock (held by \
remoteDispatchDomainMemoryStats) 2019-07-25 14:24:29.829+0000: 121081: warning : \
qemuProcessEventHandler:4875 : vm: d470c3b284425b9bacb34d3b5f3845fe, event: 6, cost \
31.459 secs

I've tried to find out how did this problem happened. I analyzed the execution \
process of the job and speculated that the problem occurred as follows: step one: \
libvirt send command 'system_powerdown' to qemu. step two: libvirt receive qemu \
monitor close event, and then deal EOF event. step three: \
remoteDispatchDomainMemoryStats job start on the same vm. step four: work thread \
dealing stop job is waited on job.cond, the timeout is 30s.

It seems that the remoteDispatchDomainMemoryStats job is too slow to let the stop job \
wait timeout.

Then I tried to reproduce this process. The step is as follows:
First step:  add a sleep on ���qemuProcessEventHandler' by using \
pthread_cond_timedwait. So can execute 'virsh dommemstat active' command at this time \
interval. Second step: start a vm to test
Third step: execute 'virsh shutdown active' to shutdown the vm
Fourth step: execute 'virsh dommemstat active' when stop job is sleep.

Then it works. The test vm state became to 'in shutdown', and the libvirt log is as \
follows: "active" is my test vm's name.

2019-08-05 08:39:57.001+0000: 25889: warning : qemuDomainObjBeginJobInternal:4308 : \
Starting job: modify (vm=0x7f7bbc145fe0 name=active, current job=none async=none) \
2019-08-05 08:39:57.003+0000: 25889: warning : qemuDomainObjEndJob:4522 : Stopping \
job: modify (async=none vm=0x7f7bbc145fe0 name=active) 2019-08-05 08:39:57.003+0000: \
25881: warning : qemuMonitorJSONIOProcessEvent:235 : type: POWERDOWN, vm: active, \
cost 0.008 secs 2019-08-05 08:39:57.854+0000: 25881: warning : \
qemuMonitorJSONIOProcessEvent:235 : type: SHUTDOWN, vm: active, cost 1.709 secs \
2019-08-05 08:39:57.875+0000: 25881: warning : qemuMonitorJSONIOProcessEvent:235 : \
type: STOP, vm: active, cost 1.751 secs 2019-08-05 08:39:57.875+0000: 25881: warning \
: qemuMonitorJSONIOProcessEvent:235 : type: SHUTDOWN, vm: active, cost 1.751 secs \
2019-08-05 08:39:57.915+0000: 25881: warning : qemuMonitorIO:756 : Error on monitor \
&lt;null&gt; 2019-08-05 08:39:57.915+0000: 25881: warning : qemuMonitorIO:777 : Triggering \
EOF callback 2019-08-05 08:39:57.915+0000: 26915: warning : \
qemuProcessEventHandler:4822 : usleep 20s 2019-08-05 08:40:01.004+0000: 25886: \
warning : qemuDomainObjBeginJobInternal:4308 : Starting job: query (vm=0x7f7bbc145fe0 \
name=active, current job=none async=none) ^@2019-08-05 08:40:17.915+0000: 26915: \
warning : qemuProcessEventHandler:4845 : vm=0x7f7bbc145fe0, event=6 2019-08-05 \
08:40:17.915+0000: 26915: warning : qemuProcessEventHandler:4851 : vm: active, event: \
6 locked 2019-08-05 08:40:17.915+0000: 26915: warning : \
qemuDomainObjBeginJobInternal:4308 : Starting job: destroy (vm=0x7f7bbc145fe0 \
name=active, current job=query async=none) 2019-08-05 08:40:17.915+0000: 26915: \
warning : qemuDomainObjBeginJobInternal:4344 : Waiting for job (vm=0x7f7bbc145fe0 \
name=active), job 26915 qemuProcessEventHandler, owned by 25886 \
remoteDispatchDomainMemoryStats ^@^@^@2019-08-05 08:40:47.915+0000: 26915: warning : \
qemuDomainObjBeginJobInternal:4405 : Cannot start job (destroy, none) for domain \
active; current job is (query, none) owned by (25886 remoteDispatchDomainMemoryStats, \
0 &lt;null&gt;) for (46s, 0s) 2019-08-05 08:40:47.915+0000: 26915: error : \
qemuDomainObjBeginJobInternal:4417 : ���������������cannot acquire state change lock \
(held by remoteDispatchDomainMemoryStats) 2019-08-05 08:40:47.915+0000: 26915: \
warning : qemuProcessEventHandler:4886 : vm: active, event: 6, cost 31.830 secs

The threads backtraces is as follows:
[Switching to thread 17 (Thread 0x7f12fddf5700 (LWP 32580))]
#2  0x00007f12eb26df21 in qemuMonitorSend (mon=mon@entry=0x7f12d0013af0,
    msg=msg@entry=0x7f12fddf46e0) at qemu/qemu_monitor.c:1075
1075            if (virCondWait(&amp;mon-&gt;notify, &amp;mon-&gt;parent.lock) &lt; 0) {
(gdb) l
1070        PROBE(QEMU_MONITOR_SEND_MSG,
1071              "mon=%p msg=%s fd=%d",
1072              mon, mon-&gt;msg-&gt;txBuffer, mon-&gt;msg-&gt;txFD);
1073
1074        while (mon &amp;&amp; mon-&gt;msg &amp;&amp; !mon-&gt;msg-&gt;finished) {
1075            if (virCondWait(&amp;mon-&gt;notify, &amp;mon-&gt;parent.lock) &lt; 0) {
1076                virReportError(VIR_ERR_INTERNAL_ERROR, "%s",
1077                               _("Unable to wait on monitor condition"));
1078                goto cleanup;
1079            }
(gdb) p *msg
$2 = {txFD = -1,
  txBuffer = 0x7f12b8000d50 \
"{\"execute\":\"qom-list\",\"arguments\":{\"path\":\"/machine/peripheral\"},\"id\":\"libvirt-17\"}\r\n", \
txOffset = 0,  txLength = 85, rxBuffer = 0x0, rxLength = 0, rxObject = 0x0,
  finished = false, passwordHandler = 0x0, passwordOpaque = 0x0}
(gdb) bt
#0  pthread_cond_wait@@GLIBC_2.3.2 ()
    at ../nptl/sysdeps/unix/sysv/linux/x86_64/pthread_cond_wait.S:185
#1  0x00007f130d738316 in virCondWait (c=c@entry=0x7f12d0013b28,
    m=m@entry=0x7f12d0013b00) at util/virthread.c:154
#2  0x00007f12eb26df21 in qemuMonitorSend (mon=mon@entry=0x7f12d0013af0,
    msg=msg@entry=0x7f12fddf46e0) at qemu/qemu_monitor.c:1075
#3  0x00007f12eb283b40 in qemuMonitorJSONCommandWithFd (
    mon=mon@entry=0x7f12d0013af0, cmd=cmd@entry=0x7f12b80008c0,
    scm_fd=scm_fd@entry=-1, reply=reply@entry=0x7f12fddf4780)
    at qemu/qemu_monitor_json.c:355
#4  0x00007f12eb2904b9 in qemuMonitorJSONCommand (reply=0x7f12fddf4780,
    cmd=0x7f12b80008c0, mon=0x7f12d0013af0) at qemu/qemu_monitor_json.c:385
...

I found that on function ���qemuMonitorUpdateWatch', if  mon-&gt;watch is zero, then \
event would't be update. But 'qemuMonitorSend' would still wait on mon-&gt;notify. So \
the remoteDispatchDomainMemoryStats job is blocked, and then the stop job blocked \
too. 618 static void
619 qemuMonitorUpdateWatch(qemuMonitorPtr mon)
620 {
621     int events =
622         VIR_EVENT_HANDLE_HANGUP |
623         VIR_EVENT_HANDLE_ERROR;
624
625     if (!mon-&gt;watch)
626         return;
627
628     if (mon-&gt;lastError.code == VIR_ERR_OK) {
629         events |= VIR_EVENT_HANDLE_READABLE;
630
631         if ((mon-&gt;msg &amp;&amp; mon-&gt;msg-&gt;txOffset &lt; mon-&gt;msg-&gt;txLength) &amp;&amp;
632             !mon-&gt;waitGreeting)
633             events |= VIR_EVENT_HANDLE_WRITABLE;
634     }
635
636     virEventUpdateHandle(mon-&gt;watch, events);
637 }

I try to fix this bugs by add a judgment before qemuMonitorUpdateWatch, and it seem \
works. 1046 int
1047 qemuMonitorSend(qemuMonitorPtr mon,
1048                 qemuMonitorMessagePtr msg)
1049 {
1050     int ret = -1;
1051
1052     /* Check whether qemu quit unexpectedly */
1053     if (mon-&gt;lastError.code != VIR_ERR_OK) {
1054         VIR_DEBUG("Attempt to send command while error is set %s",
1055                   NULLSTR(mon-&gt;lastError.message));
1056         virSetError(&amp;mon-&gt;lastError);
1057         return -1;
1058     }
1059
1060     if (!mon-&gt;watch) {
1061         VIR_WARN("Attempt to send command while mon-&gt;watch is zero");
1062         virReportError(VIR_ERR_INTERNAL_ERROR, "%s",
1063                        _("attempt to send command when the monitor is \
closing")); 1064         return -1;
1065     }
1066
1067     mon-&gt;msg = msg;
1068     qemuMonitorUpdateWatch(mon);
1069
1070     PROBE(QEMU_MONITOR_SEND_MSG,
1071           "mon=%p msg=%s fd=%d",
1072           mon, mon-&gt;msg-&gt;txBuffer, mon-&gt;msg-&gt;txFD);
1073
1074     while (mon &amp;&amp; mon-&gt;msg &amp;&amp; !mon-&gt;msg-&gt;finished) {
1075         if (virCondWait(&amp;mon-&gt;notify, &amp;mon-&gt;parent.lock) &lt; 0) {
1076             virReportError(VIR_ERR_INTERNAL_ERROR, "%s",
1077                            _("Unable to wait on monitor condition"));
1078             goto cleanup;
1079         }
1080     }
1081
1082     if (mon-&gt;lastError.code != VIR_ERR_OK) {
1083         VIR_DEBUG("Send command resulted in error %s",
1084                   NULLSTR(mon-&gt;lastError.message));
1085         virSetError(&amp;mon-&gt;lastError);
1086         goto cleanup;
1087     }
1088
1089     ret = 0;
1090
1091  cleanup:
1092     mon-&gt;msg = NULL;
1093     qemuMonitorUpdateWatch(mon);
1094
1095     return ret;
1096 }

I'm not really sure that this change will affect other process.

Thanks!

Ma haocong


[Attachment #3 (text/html)]

&lt;html xmlns:o="urn:schemas-microsoft-com:office:office" \
xmlns:w="urn:schemas-microsoft-com:office:word" \
xmlns:m="http://schemas.microsoft.com/office/2004/12/omml" \
xmlns="http://www.w3.org/TR/REC-html40"&gt; &lt;head&gt;
&lt;meta http-equiv="Content-Type" content="text/html; charset=utf-8"&gt;
&lt;meta name="� ����" content=""&gt;
&lt;meta name="���������" content=""&gt;
&lt;meta name="Generator" content="Microsoft Word 15 (filtered medium)"&gt;
&lt;style&gt;&lt;!--
/* Font Definitions */
@font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:DengXian;
	panose-1:2 1 6 0 3 1 1 1 1 1;}
@font-face
	{font-family:"\@DengXian";}
/* Style Definitions */
p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:12.0pt;
	font-family:DengXian;}
a:link, span.MsoHyperlink
	{mso-style-priority:99;
	color:#0563C1;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{mso-style-priority:99;
	color:#954F72;
	text-decoration:underline;}
span.EmailStyle17
	{mso-style-type:personal-compose;
	font-family:DengXian;
	color:windowtext;}
span.msoIns
	{mso-style-type:export-only;
	mso-style-name:"";
	text-decoration:underline;
	color:teal;}
.MsoChpDefault
	{mso-style-type:export-only;
	font-family:DengXian;}
@page WordSection1
	{size:612.0pt 792.0pt;
	margin:72.0pt 90.0pt 72.0pt 90.0pt;}
div.WordSection1
	{page:WordSection1;}
--&gt;&lt;/style&gt;
&lt;/head&gt;
&lt;body bgcolor="white" lang="ZH-CN" link="#0563C1" vlink="#954F72"&gt;
&lt;div class="WordSection1"&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" style="font-size:10.5pt"&gt;Description of \
problem: &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" style="font-size:10.5pt"&gt;libvirt 3.9 \
on CentOS Linux release 7.4.1708 (kernel 3.10.0-693.21.1.el7.x86_64) on \
Qemu version 2.10.0  &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;&lt;o:p&gt; &lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span \
lang="EN-US" style="font-size:10.5pt"&gt;I'm currently facing a strange situation. \
Sometimes my vm is shown by ���virsh list' as in state "in shutdown" but there is no \
qemu-kvm process linked to it. &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;&lt;o:p&gt; &lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span \
lang="EN-US" style="font-size:10.5pt"&gt;Libvirt log when "in shutdown" state occur is \
as follows: &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;"d470c3b284425b9bacb34d3b5f3845fe" is vm's name, \
remoteDispatchDomainMemoryStats API is called by ���collectd', which is used to \
collect some vm running states and host information once every 30's.  \
&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;&lt;o:p&gt; &lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span \
lang="EN-US" style="font-size:10.5pt"&gt;2019-07-25 14:23:58.706+0000: 15818: \
warning : qemuMonitorJSONIOProcessEvent:235 : type: POWERDOWN, vm: \
d470c3b284425b9bacb34d3b5f3845fe, cost 1.413 secs &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" style="font-size:10.5pt"&gt;2019-07-25 \
14:23:59.601+0000: 15818: warning : qemuMonitorJSONIOProcessEvent:235 : type: \
SHUTDOWN, vm: d470c3b284425b9bacb34d3b5f3845fe, cost 1.202 secs \
&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;2019-07-25 14:23:59.601+0000: 15818: warning : \
qemuMonitorJSONIOProcessEvent:235 : type: STOP, vm: d470c3b284425b9bacb34d3b5f3845fe, \
cost 1.203 secs &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" style="font-size:10.5pt"&gt;2019-07-25 \
14:23:59.601+0000: 15818: warning : qemuMonitorJSONIOProcessEvent:235 : type: \
SHUTDOWN, vm: d470c3b284425b9bacb34d3b5f3845fe, cost 1.203 secs \
&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;2019-07-25 14:23:59.629+0000: 15818: error : \
qemuMonitorIORead:597 : Unable to read from monitor: Connection reset by peer \
&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;2019-07-25 14:23:59.629+0000: 121081: warning : \
qemuProcessEventHandler:4840 : vm: d470c3b284425b9bacb34d3b5f3845fe, event: 6 locked \
&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;2019-07-25 14:23:59.629+0000: 15822: error : \
qemuMonitorJSONCommandWithFd:364 : internal error: Missing monitor reply object \
&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;2019-07-25 14:24:29.483+0000: 15821: warning : \
qemuGetProcessInfo:1468 : cannot parse process status data &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" style="font-size:10.5pt"&gt;2019-07-25 \
14:24:29.829+0000: 15823: warning : qemuDomainObjBeginJobInternal:4391 : Cannot \
start job (modify, none) for domain d470c3b284425b9bacb34d3b5f3845fe; current job is \
(query, none) owned  by (15822 remoteDispatchDomainMemoryStats, 0 &lt;null&gt;) for \
(30s, 0s) &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;2019-07-25 14:24:29.829+0000: 15823: error : \
qemuDomainObjBeginJobInternal:4403 : Timed out during operation: cannot acquire state \
change lock (held by remoteDispatchDomainMemoryStats) &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" style="font-size:10.5pt"&gt;2019-07-25 \
14:24:29.829+0000: 121081: warning : qemuDomainObjBeginJobInternal:4391 : Cannot \
start job (destroy, none) for domain d470c3b284425b9bacb34d3b5f3845fe; current job is \
(query, none)  owned by (15822 remoteDispatchDomainMemoryStats, 0 &lt;null&gt;) for \
(30s, 0s) &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;2019-07-25 14:24:29.829+0000: 121081: error : \
qemuDomainObjBeginJobInternal:4403 : Timed out during operation: cannot acquire state \
change lock (held by remoteDispatchDomainMemoryStats) &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" style="font-size:10.5pt"&gt;2019-07-25 \
14:24:29.829+0000: 121081: warning : qemuProcessEventHandler:4875 : vm: \
d470c3b284425b9bacb34d3b5f3845fe, event: 6, cost 31.459 secs &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;&lt;o:p&gt; &lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span \
lang="EN-US" style="font-size:10.5pt"&gt;I've tried to find out how did this problem \
happened. I analyzed the execution process of the job and speculated that the problem \
occurred as follows: &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" style="font-size:10.5pt"&gt;step one: libvirt \
send command 'system_powerdown' to qemu.&lt;/span&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span \
lang="EN-US" style="font-size:10.5pt"&gt;step two: libvirt receive qemu monitor close \
event, and then deal EOF event.&lt;/span&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span \
lang="EN-US" style="font-size:10.5pt"&gt;step three: remoteDispatchDomainMemoryStats job \
start on the same vm.&lt;/span&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span \
lang="EN-US" style="font-size:10.5pt"&gt;step four: work thread dealing stop job is \
waited on job.cond, the timeout is 30s.&lt;/span&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span \
lang="EN-US" style="font-size:10.5pt"&gt;&lt;o:p&gt; &lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p \
class="MsoNormal"&gt;&lt;span lang="EN-US" style="font-size:10.5pt"&gt;It seems that \
the remoteDispatchDomainMemoryStats job is too slow to let the stop job wait \
timeout. &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;&lt;o:p&gt; &lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span \
lang="EN-US" style="font-size:10.5pt"&gt;Then I tried to reproduce this process. \
The step is as follows: &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" style="font-size:10.5pt"&gt;First step: \
 add a sleep on ���qemuProcessEventHandler' by \
using pthread_cond_timedwait. So can execute 'virsh dommemstat active' command \
at this time interval.  &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" style="font-size:10.5pt"&gt;Second step: start a \
vm to test &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" style="font-size:10.5pt"&gt;Third step: execute \
'virsh shutdown active' to shutdown the vm &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" style="font-size:10.5pt"&gt;Fourth step: execute \
'virsh dommemstat active' when stop job is sleep. &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;&lt;o:p&gt; &lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span \
lang="EN-US" style="font-size:10.5pt"&gt;Then it works. The test vm state became to 'in \
shutdown', and the libvirt log is as follows: &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" style="font-size:10.5pt"&gt;"active" is my test \
vm's name.&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;&lt;o:p&gt; &lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span \
lang="EN-US" style="font-size:10.5pt"&gt;2019-08-05 08:39:57.001+0000: 25889: \
warning : qemuDomainObjBeginJobInternal:4308 : Starting job: modify \
(vm=0x7f7bbc145fe0 name=active, current job=none async=none) &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" style="font-size:10.5pt"&gt;2019-08-05 \
08:39:57.003+0000: 25889: warning : qemuDomainObjEndJob:4522 : Stopping job: \
modify (async=none vm=0x7f7bbc145fe0 name=active) &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" style="font-size:10.5pt"&gt;2019-08-05 \
08:39:57.003+0000: 25881: warning : qemuMonitorJSONIOProcessEvent:235 : type: \
POWERDOWN, vm: active, cost 0.008 secs &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" style="font-size:10.5pt"&gt;2019-08-05 \
08:39:57.854+0000: 25881: warning : qemuMonitorJSONIOProcessEvent:235 : type: \
SHUTDOWN, vm: active, cost 1.709 secs &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" style="font-size:10.5pt"&gt;2019-08-05 \
08:39:57.875+0000: 25881: warning : qemuMonitorJSONIOProcessEvent:235 : type: \
STOP, vm: active, cost 1.751 secs &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" style="font-size:10.5pt"&gt;2019-08-05 \
08:39:57.875+0000: 25881: warning : qemuMonitorJSONIOProcessEvent:235 : type: \
SHUTDOWN, vm: active, cost 1.751 secs &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" style="font-size:10.5pt"&gt;2019-08-05 \
08:39:57.915+0000: 25881: warning : qemuMonitorIO:756 : Error on monitor \
&lt;null&gt; &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" style="font-size:10.5pt"&gt;2019-08-05 \
08:39:57.915+0000: 25881: warning : qemuMonitorIO:777 : Triggering EOF callback \
&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;2019-08-05 08:39:57.915+0000: 26915: warning : \
qemuProcessEventHandler:4822 : usleep 20s &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" style="font-size:10.5pt"&gt;2019-08-05 \
08:40:01.004+0000: 25886: warning : qemuDomainObjBeginJobInternal:4308 : Starting \
job: query (vm=0x7f7bbc145fe0 name=active, current job=none async=none) \
&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;^@2019-08-05 08:40:17.915+0000: 26915: warning : \
qemuProcessEventHandler:4845 : vm=0x7f7bbc145fe0, event=6 &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" style="font-size:10.5pt"&gt;2019-08-05 \
08:40:17.915+0000: 26915: warning : qemuProcessEventHandler:4851 : vm: active, \
event: 6 locked &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" style="font-size:10.5pt"&gt;2019-08-05 \
08:40:17.915+0000: 26915: warning : qemuDomainObjBeginJobInternal:4308 : Starting \
job: destroy (vm=0x7f7bbc145fe0 name=active, current job=query async=none) \
&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;2019-08-05 08:40:17.915+0000: 26915: warning : \
qemuDomainObjBeginJobInternal:4344 : Waiting for job (vm=0x7f7bbc145fe0 name=active), \
job 26915 qemuProcessEventHandler, owned by 25886 remoteDispatchDomainMemoryStats \
&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;^@^@^@2019-08-05 08:40:47.915+0000: 26915: warning : \
qemuDomainObjBeginJobInternal:4405 : Cannot start job (destroy, none) for domain \
active; current job is (query, none) owned by (25886 remoteDispatchDomainMemoryStats, \
0 &lt;null&gt;) for (46s, 0s) &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span \
lang="EN-US" style="font-size:10.5pt"&gt;2019-08-05 08:40:47.915+0000: 26915: error \
: qemuDomainObjBeginJobInternal:4417 : &lt;/span&gt;&lt;span \
style="font-size:10.5pt"&gt;���������������&lt;span lang="EN-US"&gt;cannot acquire state \
change lock (held by remoteDispatchDomainMemoryStats) &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" style="font-size:10.5pt"&gt;2019-08-05 \
08:40:47.915+0000: 26915: warning : qemuProcessEventHandler:4886 : vm: active, \
event: 6, cost 31.830 secs &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;&lt;o:p&gt; &lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span \
lang="EN-US" style="font-size:10.5pt"&gt;The threads backtraces is as follows: \
&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;[Switching to thread 17 (Thread 0x7f12fddf5700 (LWP 32580))] \
&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;#2  0x00007f12eb26df21 in qemuMonitorSend \
(mon=mon@entry=0x7f12d0013af0, &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;    msg=msg@entry=0x7f12fddf46e0) at \
qemu/qemu_monitor.c:1075 &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;1075            if \
(virCondWait(&amp;mon-&gt;notify, &amp;mon-&gt;parent.lock) &lt; 0) { \
&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;(gdb) l &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span \
lang="EN-US" style="font-size:10.5pt"&gt;1070        PROBE(QEMU_MONITOR_SEND_MSG,
 &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;1071              "mon=%p \
msg=%s fd=%d", &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;1072              mon, \
mon-&gt;msg-&gt;txBuffer, mon-&gt;msg-&gt;txFD); &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" style="font-size:10.5pt"&gt;1073 \
&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;1074        while \
(mon &amp;&amp; mon-&gt;msg &amp;&amp; !mon-&gt;msg-&gt;finished) { \
&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;1075            if \
(virCondWait(&amp;mon-&gt;notify, &amp;mon-&gt;parent.lock) &lt; 0) { \
&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;1076                virReportError(VIR_ERR_INTERNAL_ERROR, \
"%s", &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;1077         &amp;nb \
sp;                     _("Unable \
to wait on monitor condition")); &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;1078                goto \
cleanup; &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;1079            }
 &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" style="font-size:10.5pt"&gt;(gdb) p *msg &lt;o:p&gt;
&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" style="font-size:10.5pt"&gt;$2 = {txFD = -1,
&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" style="font-size:10.5pt"&gt;  txBuffer \
= 0x7f12b8000d50 "{\"execute\":\"qom-list\",\"arguments\ \
":{\"path\":\"/machine/peripheral\"},\"id\":\"libvirt-17\"}\r\n", \
txOffset = 0, &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" style="font-size:10.5pt"&gt;  txLength \
= 85, rxBuffer = 0x0, rxLength = 0, rxObject = 0x0, &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" style="font-size:10.5pt"&gt;  finished \
= false, passwordHandler = 0x0, passwordOpaque = 0x0} &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" style="font-size:10.5pt"&gt;(gdb) bt \
&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;#0  pthread_cond_wait@@GLIBC_2.3.2 () \
&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;    at \
../nptl/sysdeps/unix/sysv/linux/x86_64/pthread_cond_wait.S:185 &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;#1  0x00007f130d738316 in virCondWait \
(c=c@entry=0x7f12d0013b28, &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;    m=m@entry=0x7f12d0013b00) at \
util/virthread.c:154 &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;#2  0x00007f12eb26df21 in qemuMonitorSend \
(mon=mon@entry=0x7f12d0013af0, &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;    msg=msg@entry=0x7f12fddf46e0) at \
qemu/qemu_monitor.c:1075 &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;#3  0x00007f12eb283b40 in \
qemuMonitorJSONCommandWithFd ( &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;    mon=mon@entry=0x7f12d0013af0, \
cmd=cmd@entry=0x7f12b80008c0, &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;    scm_fd=scm_fd@entry=-1, \
reply=reply@entry=0x7f12fddf4780) &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;    at qemu/qemu_monitor_json.c:355 \
&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;#4  0x00007f12eb2904b9 in qemuMonitorJSONCommand \
(reply=0x7f12fddf4780, &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;    cmd=0x7f12b80008c0, \
mon=0x7f12d0013af0) at qemu/qemu_monitor_json.c:385 &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" style="font-size:10.5pt"&gt;... \
&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;&lt;o:p&gt; &lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span \
lang="EN-US" style="font-size:10.5pt"&gt;I found that on function \
���qemuMonitorUpdateWatch', if  mon-&gt;watch is zero, then event would't be \
update. But 'qemuMonitorSend' &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" style="font-size:10.5pt"&gt;would still wait \
on mon-&gt;notify. So the remoteDispatchDomainMemoryStats job is blocked, \
and then the stop job blocked too. &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" style="font-size:10.5pt"&gt;618 static void \
&lt;o:p&gt; &lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" style="font-size:10.5pt"&gt;619 \
qemuMonitorUpdateWatch(qemuMonitorPtr mon) &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" style="font-size:10.5pt"&gt;620 { \
&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;621     int events = \
&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;622         VIR_EVENT_HANDLE_HANGUP \
| &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;623         VIR_EVENT_HANDLE_ERROR;
 &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" style="font-size:10.5pt"&gt;624 \
&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;625     if (!mon-&gt;watch) \
&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;626         return;
 &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" style="font-size:10.5pt"&gt;627 \
&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;628     if (mon-&gt;lastError.code \
== VIR_ERR_OK) { &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;629         events \
|= VIR_EVENT_HANDLE_READABLE; &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" style="font-size:10.5pt"&gt;630 \
&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;631         if \
((mon-&gt;msg &amp;&amp; mon-&gt;msg-&gt;txOffset &lt; mon-&gt;msg-&gt;txLength) \
&amp;&amp; &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;632             !mon-&gt;waitGreeting)
 &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;633             events \
|= VIR_EVENT_HANDLE_WRITABLE; &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;634     } &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p \
class="MsoNormal"&gt;&lt;span lang="EN-US" style="font-size:10.5pt"&gt;635 \
&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;636     virEventUpdateHandle(mon-&gt;watch, \
events); &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" style="font-size:10.5pt"&gt;637 } \
&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;&lt;o:p&gt; &lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span \
lang="EN-US" style="font-size:10.5pt"&gt;I try to fix this bugs by add a judgment \
before qemuMonitorUpdateWatch, and it seem works. &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" style="font-size:10.5pt"&gt;1046 int \
&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;1047 qemuMonitorSend(qemuMonitorPtr mon, \
&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;1048                 qemuMonitorMessagePtr \
msg) &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" style="font-size:10.5pt"&gt;1049 { \
&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;1050     int ret = -1; \
&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;1051 &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span \
lang="EN-US" style="font-size:10.5pt"&gt;1052     /* Check \
whether qemu quit unexpectedly */ &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;1053     if (mon-&gt;lastError.code \
!= VIR_ERR_OK) { &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;1054         VIR_DEBUG("Attempt \
to send command while error is set %s", &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;1055         &amp;nb \
sp;         NULLSTR(mon-&gt;lastError.message));
 &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;1056         virSetError(&amp;mon-&gt;lastError);
 &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;1057         return \
-1; &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;1058     } &lt;o:p&gt; &lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" style="font-size:10.5pt"&gt;1059 \
&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;1060     if (!mon-&gt;watch) { \
&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;1061         VIR_WARN("Attempt \
to send command while mon-&gt;watch is zero"); &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;1062         virReportError(VIR_ERR_INTERNAL_ERROR, \
"%s", &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;1063         &amp;nb \
sp;              _("attempt \
to send command when the monitor is closing")); &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;1064         return \
-1; &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;1065     } &lt;o:p&gt; &lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" style="font-size:10.5pt"&gt;1066 \
&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;1067     mon-&gt;msg = msg; \
&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;1068     qemuMonitorUpdateWatch(mon);
 &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" style="font-size:10.5pt"&gt;1069 \
&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;1070     PROBE(QEMU_MONITOR_SEND_MSG,
 &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;1071           "mon=%p \
msg=%s fd=%d", &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;1072           mon, \
mon-&gt;msg-&gt;txBuffer, mon-&gt;msg-&gt;txFD); &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" style="font-size:10.5pt"&gt;1073 \
&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;1074     while (mon &amp;&amp; \
mon-&gt;msg &amp;&amp; !mon-&gt;msg-&gt;finished) { &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;1075         if \
(virCondWait(&amp;mon-&gt;notify, &amp;mon-&gt;parent.lock) &lt; 0) { \
&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;1076             virReportError(VIR_ERR_INTERNAL_ERROR, \
"%s", &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;1077         &amp;nb \
sp;                  _("Unable \
to wait on monitor condition")); &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;1078             goto \
cleanup; &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;1079         } \
&lt;o:p&gt; &lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;1080     } &lt;o:p&gt; &lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" style="font-size:10.5pt"&gt;1081 \
&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;1082     if (mon-&gt;lastError.code \
!= VIR_ERR_OK) { &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;1083         VIR_DEBUG("Send \
command resulted in error %s", &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;1084         &amp;nb \
sp;         NULLSTR(mon-&gt;lastError.message));
 &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;1085         virSetError(&amp;mon-&gt;lastError);
 &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;1086         goto \
cleanup; &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;1087     } &lt;o:p&gt; &lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" style="font-size:10.5pt"&gt;1088 \
&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;1089     ret = 0; \
&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;1090 &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span \
lang="EN-US" style="font-size:10.5pt"&gt;1091  cleanup: &lt;o:p&gt; \
&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;1092     mon-&gt;msg = NULL; \
&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;1093     qemuMonitorUpdateWatch(mon);
 &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" style="font-size:10.5pt"&gt;1094 \
&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;1095     return ret; \
&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;1096 } &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span \
lang="EN-US" style="font-size:10.5pt"&gt;&lt;o:p&gt; &lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p \
class="MsoNormal"&gt;&lt;span lang="EN-US" style="font-size:10.5pt"&gt;I'm not really sure \
that this change will affect other process. &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;&lt;o:p&gt; &lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span \
lang="EN-US" style="font-size:10.5pt"&gt;Thanks!&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p \
class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;&lt;o:p&gt; &lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span \
lang="EN-US" style="font-size:10.5pt"&gt;Ma haocong&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p \
class="MsoNormal"&gt;&lt;span lang="EN-US" \
style="font-size:10.5pt"&gt;&lt;o:p&gt; &lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span \
lang="EN-US" style="font-size:10.5pt"&gt;&lt;o:p&gt; &lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
--===============3775285116699087116==--


</body></email><email><emailId>20190723180058</emailId><senderName>Sven Vogel</senderName><senderEmail>s.vogel@ewerk.com</senderEmail><timestampReceived>2019-07-23 18:00:58-0400</timestampReceived><subject>[libvirt-users] OVS / KVM / libvirt / MTU</subject><body>

Hey there,

I hope anyone can bring some light in the following problem.

&lt;interface type='bridge'&gt;
&lt;source bridge='cloudbr0'/&gt;
&lt;mtu size='2000'/&gt;
&lt;mac address='02:00:74:76:00:01'/&gt;
&lt;model type='virtio'/&gt;
&lt;virtualport type='openvswitch'&gt;
&lt;/virtualport&gt;
&lt;vlan trunk='no'&gt;
&lt;tag id='2097'/&gt;
&lt;/vlan&gt;&lt;link state='up'/&gt;
&lt;/interface&gt;

we have an base bridge for example and cloudbr0. After we add an mtu to the vm bridge \
here it seems the base bridge gets the same mtu like the vnet adapter.

Is this normal behaviour of libvirt together with OVS?

—ovs-vsctl show
5b154321-534d-413e-9761-60476ae06640
    Bridge "cloudbr0"
        Port "cloudbr0"
            Interface "cloudbr0"
                type: internal

—MTU from the bridge after set an MTU into the XML File (before we had here 9000)
mtu                 : 2000
mtu_request         : []
name                : "cloudbr0"
ofport              : 65534

—MTU of the vnet interface
mac_in_use          : "fe:00:74:76:00:01"
mtu                 : 1450
mtu_request         : 1450
name                : „vnet2"

Thanks for help…



__

Sven Vogel
Teamlead Platform

EWERK RZ GmbH
Brühl 24, D-04109 Leipzig
P +49 341 42649 - 11
F +49 341 42649 - 18
S.Vogel@ewerk.com
www.ewerk.com

Geschäftsführer:
Dr. Erik Wende, Hendrik Schubert, Frank Richter
Registergericht: Leipzig HRB 17023

Zertifiziert nach:
ISO/IEC 27001:2013
DIN EN ISO 9001:2015
DIN ISO/IEC 20000-1:2011

EWERK-Blog | LinkedIn | Xing | Twitter | Facebook

Auskünfte und Angebote per Mail sind freibleibend und unverbindlich.

Disclaimer Privacy:
Der Inhalt dieser E-Mail (einschließlich etwaiger beigefügter Dateien) ist \
vertraulich und nur für den Empfänger bestimmt. Sollten Sie nicht der \
bestimmungsgemäße Empfänger sein, ist Ihnen jegliche Offenlegung, \
Vervielfältigung, Weitergabe oder Nutzung des Inhalts untersagt. Bitte informieren \
Sie in diesem Fall unverzüglich den Absender und löschen Sie die E-Mail \
(einschließlich etwaiger beigefügter Dateien) von Ihrem System. Vielen Dank.

The contents of this e-mail (including any attachments) are confidential and may be \
legally privileged. If you are not the intended recipient of this e-mail, any \
disclosure, copying, distribution or use of its contents is strictly prohibited, and \
you should please notify the sender immediately and then delete it (including any \
attachments) from your system. Thank you.

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20190812172429</emailId><senderName>"Lentes, Bernd"</senderName><senderEmail>bernd.lentes@helmholtz-muenchen.de</senderEmail><timestampReceived>2019-08-12 17:24:29-0400</timestampReceived><subject>[libvirt-users] does virsh have a history with timestamps ?</subject><body>

Hi,

i knwo that virsh has its own history, but are somewhere the respective timestamps logged ?


Bernd

-- 

Bernd Lentes 
Systemadministration 
Institut für Entwicklungsgenetik 
Gebäude 35.34 - Raum 208 
HelmholtzZentrum münchen 
bernd.lentes@helmholtz-muenchen.de 
phone: +49 89 3187 1241 
phone: +49 89 3187 3827 
fax: +49 89 3187 2294 
http://www.helmholtz-muenchen.de/idg 

Perfekt ist wer keine Fehler macht 
Also sind Tote perfekt
 

Helmholtz Zentrum Muenchen
Deutsches Forschungszentrum fuer Gesundheit und Umwelt (GmbH)
Ingolstaedter Landstr. 1
85764 Neuherberg
www.helmholtz-muenchen.de
Aufsichtsratsvorsitzende: MinDir'in Prof. Dr. Veronika von Messling
Geschaeftsfuehrung: Prof. Dr. med. Dr. h.c. Matthias Tschoep, Heinrich Bassler, Kerstin Guenther
Registergericht: Amtsgericht Muenchen HRB 6466
USt-IdNr: DE 129521671


_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190729111955</emailId><senderName>Michal Privoznik</senderName><senderEmail>mprivozn@redhat.com</senderEmail><timestampReceived>2019-07-29 11:19:55-0400</timestampReceived><subject>Re: [libvirt-users] OVS / KVM / libvirt / MTU</subject><body>

On 7/23/19 8:00 PM, Sven Vogel wrote:
&gt; Hey there,
&gt; 
&gt; I hope anyone can bring some light in the following problem.
&gt; 
&gt; &lt;interface type='bridge'&gt;
&gt; &lt;source bridge='cloudbr0'/&gt;
&gt; &lt;mtu size='2000'/&gt;
&gt; &lt;mac address='02:00:74:76:00:01'/&gt;
&gt; &lt;model type='virtio'/&gt;
&gt; &lt;virtualport type='openvswitch'&gt;
&gt; &lt;/virtualport&gt;
&gt; &lt;vlan trunk='no'&gt;
&gt; &lt;tag id='2097'/&gt;
&gt; &lt;/vlan&gt;&lt;link state='up'/&gt;
&gt; &lt;/interface&gt;
&gt; 
&gt; we have an base bridge for example and cloudbr0. After we add an mtu to the vm \
&gt; bridge here it seems the base bridge gets the same mtu like the vnet adapter. 
&gt; Is this normal behaviour of libvirt together with OVS?

I wouldn't say it is 'normal', but this behaviour is not specific to 
libvirt. I mean, if you create a tap device yourself by hand and then 
plug it into an ovs bridge the same thing will happen. If you don't want 
to change MTU of the bridge then just don't set it for &lt;interface/&gt; and 
libvirt will copy whatever MTU the bridge has over to the new TAP device.

Michal

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20190729192303</emailId><senderName>Sven Vogel</senderName><senderEmail>s.vogel@ewerk.com</senderEmail><timestampReceived>2019-07-29 19:23:03-0400</timestampReceived><subject>Re: [libvirt-users] OVS / KVM / libvirt / MTU</subject><body>

Hi Michal,

Thanks for your answer.

I don't understand why an interface created without mtu gets only 1500 visible in the \
virtual machine but if I create an interface with mtu higher than 1500 e.g. 2000 the \
bridge will change too. Before the bridge was e.g. by 9000. I ask because you wrote \
if I don't set an mtu of the interface I will get the mtu of the bridge. But it seems \
so.

Can you clarify it a little better for me?


Cheers

Sven

Von meinem iPhone gesendet


__

Sven Vogel
Teamlead Platform

EWERK RZ GmbH
Brühl 24, D-04109 Leipzig
P +49 341 42649 - 11
F +49 341 42649 - 18
S.Vogel@ewerk.com
www.ewerk.com

Geschäftsführer:
Dr. Erik Wende, Hendrik Schubert, Frank Richter
Registergericht: Leipzig HRB 17023

Zertifiziert nach:
ISO/IEC 27001:2013
DIN EN ISO 9001:2015
DIN ISO/IEC 20000-1:2011

EWERK-Blog | LinkedIn | Xing | Twitter | Facebook

Auskünfte und Angebote per Mail sind freibleibend und unverbindlich.

Disclaimer Privacy:
Der Inhalt dieser E-Mail (einschließlich etwaiger beigefügter Dateien) ist \
vertraulich und nur für den Empfänger bestimmt. Sollten Sie nicht der \
bestimmungsgemäße Empfänger sein, ist Ihnen jegliche Offenlegung, \
Vervielfältigung, Weitergabe oder Nutzung des Inhalts untersagt. Bitte informieren \
Sie in diesem Fall unverzüglich den Absender und löschen Sie die E-Mail \
(einschließlich etwaiger beigefügter Dateien) von Ihrem System. Vielen Dank.

The contents of this e-mail (including any attachments) are confidential and may be \
legally privileged. If you are not the intended recipient of this e-mail, any \
disclosure, copying, distribution or use of its contents is strictly prohibited, and \
you should please notify the sender immediately and then delete it (including any \
attachments) from your system. Thank you.
&gt; Am 29.07.2019 um 13:20 schrieb Michal Privoznik &lt;mprivozn@redhat.com&gt;:
&gt; 
&gt; &gt; On 7/23/19 8:00 PM, Sven Vogel wrote:
&gt; &gt; Hey there,
&gt; &gt; I hope anyone can bring some light in the following problem.
&gt; &gt; &lt;interface type='bridge'&gt;
&gt; &gt; &lt;source bridge='cloudbr0'/&gt;
&gt; &gt; &lt;mtu size='2000'/&gt;
&gt; &gt; &lt;mac address='02:00:74:76:00:01'/&gt;
&gt; &gt; &lt;model type='virtio'/&gt;
&gt; &gt; &lt;virtualport type='openvswitch'&gt;
&gt; &gt; &lt;/virtualport&gt;
&gt; &gt; &lt;vlan trunk='no'&gt;
&gt; &gt; &lt;tag id='2097'/&gt;
&gt; &gt; &lt;/vlan&gt;&lt;link state='up'/&gt;
&gt; &gt; &lt;/interface&gt;
&gt; &gt; we have an base bridge for example and cloudbr0. After we add an mtu to the vm \
&gt; &gt; bridge here it seems the base bridge gets the same mtu like the vnet adapter. Is \
&gt; &gt; this normal behaviour of libvirt together with OVS?
&gt; 
&gt; I wouldn't say it is 'normal', but this behaviour is not specific to libvirt. I \
&gt; mean, if you create a tap device yourself by hand and then plug it into an ovs \
&gt; bridge the same thing will happen. If you don't want to change MTU of the bridge \
&gt; then just don't set it for &lt;interface/&gt; and libvirt will copy whatever MTU the \
&gt; bridge has over to the new TAP device. 
&gt; Michal

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20190731083948</emailId><senderName>Michal Privoznik</senderName><senderEmail>mprivozn@redhat.com</senderEmail><timestampReceived>2019-07-31 08:39:48-0400</timestampReceived><subject>Re: [libvirt-users] OVS / KVM / libvirt / MTU</subject><body>

On 7/29/19 9:23 PM, Sven Vogel wrote:
&gt; Hi Michal,
&gt; 
&gt; Thanks for your answer.
&gt; 
&gt; I don't understand why an interface created without mtu gets only 1500 visible in \
&gt; the virtual machine but if I create an interface with mtu higher than 1500 e.g. \
&gt; 2000 the bridge will change too. Before the bridge was e.g. by 9000. I ask because \
&gt; you wrote if I don't set an mtu of the interface I will get the mtu of the bridge. \
&gt; But it seems so. 
&gt; Can you clarify it a little better for me?

I don't know enough about OVS internals to answer that, sorry. Maybe we 
should ask OVS developers why OVS bridge behaves this way.

Michal

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20190808090243</emailId><senderName>Sven Vogel</senderName><senderEmail>s.vogel@ewerk.com</senderEmail><timestampReceived>2019-08-08 09:02:43-0400</timestampReceived><subject>Re: [libvirt-users] OVS / KVM / libvirt / MTU</subject><body>

Hi Alvin,

Thanks for the help. :) This sounds good. My head also wrap about this problem.

The question for me is why they use the smallest?

Cheers

Sven


__

Sven Vogel
Teamlead Platform

EWERK DIGITAL GmbH
Br?hl 24, D-04109 Leipzig
P +49 341 42649 - 11
F +49 341 42649 - 18
S.Vogel@ewerk.com
www.ewerk.com

Gesch?ftsf?hrer:
Dr. Erik Wende, Hendrik Schubert, Frank Richter
Registergericht: Leipzig HRB 17023

Zertifiziert nach:
ISO/IEC 27001:2013
DIN EN ISO 9001:2015
DIN ISO/IEC 20000-1:2011

ISAE 3402 Typ II Assessed

EWERK-Blog&lt;https://blog.ewerk.com/&gt; | \
LinkedIn&lt;https://www.linkedin.com/company/ewerk-group&gt; | \
Xing&lt;https://www.xing.com/company/ewerk&gt; | Twitter&lt;https://twitter.com/EWERK_Group&gt; | \
Facebook&lt;https://de-de.facebook.com/EWERK.IT/&gt;

Mit Handelsregistereintragung vom 09.07.2019 ist die EWERK RZ GmbH auf die EWERK IT \
GmbH verschmolzen und firmiert nun gemeinsam unter dem Namen: EWERK DIGITAL GmbH, f?r \
weitere Informationen klicken Sie hier&lt;https://www.ewerk.com/ewerkdigital&gt;.

Ausk?nfte und Angebote per Mail sind freibleibend und unverbindlich.

Disclaimer Privacy:
Der Inhalt dieser E-Mail (einschlie?lich etwaiger beigef?gter Dateien) ist \
vertraulich und nur f?r den Empf?nger bestimmt. Sollten Sie nicht der \
bestimmungsgem??e Empf?nger sein, ist Ihnen jegliche Offenlegung, Vervielf?ltigung, \
Weitergabe oder Nutzung des Inhalts untersagt. Bitte informieren Sie in diesem Fall \
unverz?glich den Absender und l?schen Sie die E-Mail (einschlie?lich etwaiger \
beigef?gter Dateien) von Ihrem System. Vielen Dank.

The contents of this e-mail (including any attachments) are confidential and may be \
legally privileged. If you are not the intended recipient of this e-mail, any \
disclosure, copying, distribution or use of its contents is strictly prohibited, and \
you should please notify the sender immediately and then delete it (including any \
attachments) from your system. Thank you.

Am 31.07.2019 um 15:50 schrieb Alvin Starr \
&lt;alvin@netvel.net&lt;mailto:alvin@netvel.net&gt;&gt;:

In general if no MTU is set on interface creation the default value is 1500.

On OVS the bridge MTU is automatically set to the smallest port MTU. So you just have \
to set the MTU of each port of the bridge.

Take a look at: https://bugzilla.redhat.com/show_bug.cgi?id=1160897
It is a bit of a pain to read but seems to confirm the statement about the OVS MTU \
value being set by the MTU of the ports.

I have been using OVS with Xen and a few years ago I had to wrap my head around this \
problem. Once you start setting the MTU to something other than 1500 you will find \
you need to set ALL the MTU values of ALL your interfaces. Otherwise some inherited \
default will bite you.


[Attachment #3 (text/html)]

&lt;html&gt;
&lt;head&gt;
&lt;meta http-equiv="Content-Type" content="text/html; charset=us-ascii"&gt;
&lt;/head&gt;
&lt;body style="word-wrap: break-word; -webkit-nbsp-mode: space; line-break: \
after-white-space;" class=""&gt; Hi Alvin,
&lt;div class=""&gt;&lt;br class=""&gt;
&lt;/div&gt;
&lt;div class=""&gt;Thanks for the help. :) This sounds good. My head also wrap about this \
problem.&lt;/div&gt; &lt;div class=""&gt;&lt;br class=""&gt;
&lt;/div&gt;
&lt;div class=""&gt;The question for me is why they use the smallest?&lt;/div&gt;
&lt;div class=""&gt;&lt;br class=""&gt;
&lt;/div&gt;
&lt;div class=""&gt;Cheers&lt;/div&gt;
&lt;div class=""&gt;&lt;br class=""&gt;
&lt;/div&gt;
&lt;div class=""&gt;Sven&lt;br class=""&gt;
&lt;div&gt;&lt;br class=""&gt;
&lt;p style="FONT-SIZE: 10pt; FONT-FAMILY: ARIAL"&gt;&lt;strong&gt;&lt;span style="FONT-SIZE: \
9pt"&gt;&lt;span style="FONT-SIZE: 10pt"&gt;__&lt;br&gt; &lt;br&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/strong&gt;&lt;strong&gt;&lt;span style="FONT-SIZE: 9pt"&gt;&lt;span style="FONT-SIZE: \
8pt"&gt;Sven Vogel&lt;/span&gt;&lt;/span&gt;&lt;br style="FONT-SIZE: 9pt"&gt; &lt;/strong&gt;&lt;span \
style="FONT-SIZE: 8pt"&gt;Teamlead Platform&lt;br&gt; &lt;br&gt;
&lt;/span&gt;&lt;span style="FONT-SIZE: 8pt"&gt;EWERK DIGITAL GmbH&lt;/span&gt;&lt;br style="FONT-SIZE: \
8pt"&gt; &lt;span style="FONT-SIZE: 8pt"&gt;Brühl 24, D-04109 Leipzig&lt;/span&gt;&lt;br \
style="FONT-SIZE: 8pt"&gt; &lt;span style="FONT-SIZE: 8pt"&gt;P +49 341 42649 - \
11&lt;/span&gt;&lt;br style="FONT-SIZE: 8pt"&gt; &lt;span style="FONT-SIZE: 8pt"&gt;F +49 341 42649 \
- 18&lt;/span&gt;&lt;br style="FONT-SIZE: 8pt"&gt; &lt;font style="FONT-SIZE: 8pt" \
color="#000000"&gt;S.Vogel@ewerk.com&lt;br style="FONT-SIZE: 8pt"&gt; www.ewerk.com&lt;br&gt;
&lt;br&gt;
&lt;/font&gt;&lt;font style="FONT-SIZE: 8pt" color="#000000"&gt;Geschäftsführer:&lt;br \
style="FONT-SIZE: 8pt"&gt; Dr. Erik Wende, Hendrik Schubert, Frank Richter&lt;br&gt;
Registergericht: Leipzig HRB 17023&lt;br&gt;
&lt;/font&gt;&lt;font style="FONT-SIZE: 8pt" color="#000000"&gt;&lt;br&gt;
&lt;/font&gt;&lt;font style="FONT-SIZE: 8pt" color="#000000"&gt;Zertifiziert nach:&lt;br&gt;
&lt;/font&gt;&lt;font style="FONT-SIZE: 8pt" color="#000000"&gt;ISO/IEC 27001:2013&lt;br&gt;
DIN EN ISO 9001:2015&lt;br&gt;
DIN ISO/IEC 20000-1:2011&lt;br&gt;
&lt;br&gt;
ISAE 3402 Typ II Assessed&lt;/font&gt;&lt;font style="FONT-SIZE: 8pt" color="#000000"&gt;&lt;br&gt;
&lt;/font&gt;&lt;/p&gt;
&lt;p style="FONT-SIZE: 10pt; FONT-FAMILY: ARIAL"&gt;&lt;font style="FONT-SIZE: 8pt" \
color="#000000"&gt;&lt;a class="socialLink" \
href="https://blog.ewerk.com/"&gt;EWERK-Blog&lt;/a&gt; | &lt;a class="socialLink" \
href="https://www.linkedin.com/company/ewerk-group"&gt;LinkedIn&lt;/a&gt; | &lt;a \
class="socialLink" href="https://www.xing.com/company/ewerk"&gt;Xing&lt;/a&gt; | &lt;a \
class="socialLink" href="https://twitter.com/EWERK_Group"&gt;Twitter&lt;/a&gt; | &lt;a \
class="socialLink" href="https://de-de.facebook.com/EWERK.IT/"&gt; Facebook&lt;/a&gt;&lt;br&gt;
&lt;br&gt;
Mit Handelsregistereintragung vom 09.07.2019 ist die EWERK RZ GmbH auf die EWERK IT \
GmbH verschmolzen und firmiert nun gemeinsam unter dem Namen: &lt;strong&gt;EWERK&lt;/strong&gt; \
&lt;strong&gt;DIGITAL GmbH&lt;/strong&gt;, für weitere Informationen klicken Sie &lt;a \
title="Informationen" href="https://www.ewerk.com/ewerkdigital"&gt;hier&lt;/a&gt;.&lt;br&gt; &lt;br&gt;
Auskünfte und Angebote per Mail sind freibleibend und unverbindlich.&lt;br&gt;
&lt;br&gt;
Disclaimer Privacy:&lt;br&gt;
Der Inhalt dieser E-Mail (einschließlich etwaiger beigefügter Dateien) ist \
vertraulich und nur für den Empfänger bestimmt. Sollten Sie nicht der \
bestimmungsgemäße Empfänger sein, ist Ihnen jegliche Offenlegung, \
Vervielfältigung, Weitergabe oder Nutzung des  Inhalts untersagt. Bitte \
informieren Sie in diesem Fall unverzüglich den Absender und löschen Sie \
die E-Mail (einschließlich etwaiger beigefügter Dateien) von Ihrem System. \
Vielen Dank.&lt;br&gt; &lt;br&gt;
The contents of this e-mail (including any attachments) are confidential and may be \
legally privileged. If you are not the intended recipient of this e-mail, any \
disclosure, copying, distribution or use of its contents is strictly prohibited, and \
you should  please notify the sender immediately and then delete it (including any \
attachments) from your system. Thank you. &lt;/font&gt;&lt;/p&gt;
&lt;blockquote type="cite" class=""&gt;
&lt;div class=""&gt;Am 31.07.2019 um 15:50 schrieb Alvin Starr &lt;&lt;a \
href="mailto:alvin@netvel.net" class=""&gt;alvin@netvel.net&lt;/a&gt;&gt;:&lt;/div&gt; &lt;br \
class="Apple-interchange-newline"&gt; &lt;div class=""&gt;&lt;span style="caret-color: rgb(0, 0, \
0); font-family: Helvetica; font-size: 14px; font-style: normal; font-variant-caps: \
normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: \
0px; text-transform: none; white-space: normal; word-spacing: 0px; \
-webkit-text-stroke-width: 0px; text-decoration: none; float: none; display: inline \
!important;" class=""&gt;In  general if no MTU is set on interface creation the default \
value is 1500.&lt;/span&gt;&lt;br style="caret-color: rgb(0, 0, 0); font-family: Helvetica; \
font-size: 14px; font-style: normal; font-variant-caps: normal; font-weight: normal; \
letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; \
white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; \
text-decoration: none;" class=""&gt; &lt;br style="caret-color: rgb(0, 0, 0); font-family: \
Helvetica; font-size: 14px; font-style: normal; font-variant-caps: normal; \
font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; \
text-transform: none; white-space: normal; word-spacing: 0px; \
-webkit-text-stroke-width: 0px; text-decoration: none;" class=""&gt; &lt;span \
style="caret-color: rgb(0, 0, 0); font-family: Helvetica; font-size: 14px; \
font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: \
normal; text-align: start; text-indent: 0px; text-transform: none; white-space: \
normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration: none; \
float: none; display: inline !important;" class=""&gt;On  OVS the bridge MTU is \
automatically set to the smallest port MTU. So you just have to set the MTU of each \
port of the bridge.&lt;/span&gt;&lt;br style="caret-color: rgb(0, 0, 0); font-family: \
Helvetica; font-size: 14px; font-style: normal; font-variant-caps: normal; \
font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; \
text-transform: none; white-space: normal; word-spacing: 0px; \
-webkit-text-stroke-width: 0px; text-decoration: none;" class=""&gt; &lt;br \
style="caret-color: rgb(0, 0, 0); font-family: Helvetica; font-size: 14px; \
font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: \
normal; text-align: start; text-indent: 0px; text-transform: none; white-space: \
normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration: none;" \
class=""&gt; &lt;span style="caret-color: rgb(0, 0, 0); font-family: Helvetica; font-size: \
14px; font-style: normal; font-variant-caps: normal; font-weight: normal; \
letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; \
white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; \
text-decoration: none; float: none; display: inline !important;" class=""&gt;Take  a \
look at:&lt;span class="Apple-converted-space"&gt; &lt;/span&gt;&lt;/span&gt;&lt;a \
href="https://bugzilla.redhat.com/show_bug.cgi?id=1160897" style="font-family: \
Helvetica; font-size: 14px; font-style: normal; font-variant-caps: normal; \
font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; \
text-indent: 0px; text-transform: none; white-space: normal; widows: auto; \
word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;" \
class=""&gt;https://bugzilla.redhat.com/show_bug.cgi?id=1160897&lt;/a&gt;&lt;br \
style="caret-color: rgb(0, 0, 0); font-family: Helvetica; font-size: 14px; \
font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: \
normal; text-align: start; text-indent: 0px; text-transform: none; white-space: \
normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration: none;" \
class=""&gt; &lt;span style="caret-color: rgb(0, 0, 0); font-family: Helvetica; font-size: \
14px; font-style: normal; font-variant-caps: normal; font-weight: normal; \
letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; \
white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; \
text-decoration: none; float: none; display: inline !important;" class=""&gt;It  is a \
bit of a pain to read but seems to confirm the statement about the OVS MTU value \
being set by the MTU of the ports.&lt;/span&gt;&lt;br style="caret-color: rgb(0, 0, 0); \
font-family: Helvetica; font-size: 14px; font-style: normal; font-variant-caps: \
normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: \
0px; text-transform: none; white-space: normal; word-spacing: 0px; \
-webkit-text-stroke-width: 0px; text-decoration: none;" class=""&gt; &lt;br \
style="caret-color: rgb(0, 0, 0); font-family: Helvetica; font-size: 14px; \
font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: \
normal; text-align: start; text-indent: 0px; text-transform: none; white-space: \
normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration: none;" \
class=""&gt; &lt;span style="caret-color: rgb(0, 0, 0); font-family: Helvetica; font-size: \
14px; font-style: normal; font-variant-caps: normal; font-weight: normal; \
letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; \
white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; \
text-decoration: none; float: none; display: inline !important;" class=""&gt;I  have \
been using OVS with Xen and a few years ago I had to wrap my head around this \
problem.&lt;/span&gt;&lt;br style="caret-color: rgb(0, 0, 0); font-family: Helvetica; \
font-size: 14px; font-style: normal; font-variant-caps: normal; font-weight: normal; \
letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; \
white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; \
text-decoration: none;" class=""&gt; &lt;span style="caret-color: rgb(0, 0, 0); \
font-family: Helvetica; font-size: 14px; font-style: normal; font-variant-caps: \
normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: \
0px; text-transform: none; white-space: normal; word-spacing: 0px; \
-webkit-text-stroke-width: 0px; text-decoration: none; float: none; display: inline \
!important;" class=""&gt;Once  you start setting the MTU to something other than 1500 \
you will find you need to set ALL the MTU values of ALL your interfaces.&lt;/span&gt;&lt;br \
style="caret-color: rgb(0, 0, 0); font-family: Helvetica; font-size: 14px; \
font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: \
normal; text-align: start; text-indent: 0px; text-transform: none; white-space: \
normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration: none;" \
class=""&gt; &lt;span style="caret-color: rgb(0, 0, 0); font-family: Helvetica; font-size: \
14px; font-style: normal; font-variant-caps: normal; font-weight: normal; \
letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; \
white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; \
text-decoration: none; float: none; display: inline !important;" class=""&gt;Otherwise  \
some inherited default will bite you.&lt;/span&gt;&lt;/div&gt; &lt;/blockquote&gt;
&lt;/div&gt;
&lt;br class=""&gt;
&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
--===============4348310099983567270==--


</body></email><email><emailId>20190808094352</emailId><senderName>Peter Crowther</senderName><senderEmail>peter.crowther@melandra.com</senderEmail><timestampReceived>2019-08-08 09:43:52-0400</timestampReceived><subject>Re: [libvirt-users] OVS / KVM / libvirt / MTU</subject><body>

[Attachment #2 (multipart/alternative)]


On Thu, 8 Aug 2019 at 10:08, Sven Vogel &lt;S.Vogel@ewerk.com&gt; wrote:

&gt; The question for me is why they use the smallest?
&gt;

Because otherwise some frames won't get through because the interface can't
receive them, and the job of network equipment is to enable and maintain
communication :-).

&gt;
&gt; Cheers
&gt;
&gt; Sven
&gt;

- Peter

[...]
&gt;


&gt; Am 31.07.2019 um 15:50 schrieb Alvin Starr &lt;alvin@netvel.net&gt;:
&gt;
&gt;
&gt; In general if no MTU is set on interface creation the default value is
&gt; 1500.
&gt;
&gt; On OVS the bridge MTU is automatically set to the smallest port MTU. So
&gt; you just have to set the MTU of each port of the bridge.
&gt;
&gt; Take a look at: https://bugzilla.redhat.com/show_bug.cgi?id=1160897
&gt; It is a bit of a pain to read but seems to confirm the statement about the
&gt; OVS MTU value being set by the MTU of the ports.
&gt;
&gt; I have been using OVS with Xen and a few years ago I had to wrap my head
&gt; around this problem.
&gt; Once you start setting the MTU to something other than 1500 you will find
&gt; you need to set ALL the MTU values of ALL your interfaces.
&gt; Otherwise some inherited default will bite you.
&gt;
&gt;

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;On Thu, 8 Aug 2019 at 10:08, Sven Vogel &lt;&lt;a \
href="mailto:S.Vogel@ewerk.com"&gt;S.Vogel@ewerk.com&lt;/a&gt;&gt; wrote:&lt;br&gt;&lt;div \
class="gmail_quote"&gt;&lt;blockquote class="gmail_quote" style="margin:0px 0px 0px \
0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"&gt;



&lt;div style="overflow-wrap: break-word;"&gt;The question for me is why they use the \
smallest? &lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Because otherwise some frames \
won't get through because the interface can't receive them, and the job of \
network equipment is to enable and maintain communication :-).&lt;br&gt;&lt;/div&gt;&lt;blockquote \
class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid \
rgb(204,204,204);padding-left:1ex"&gt;&lt;div style="overflow-wrap: break-word;"&gt;&lt;div&gt;&lt;br&gt; \
&lt;/div&gt; &lt;div&gt;Cheers&lt;/div&gt;
&lt;div&gt;&lt;br&gt;
&lt;/div&gt;
&lt;div&gt;Sven&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;- Peter&lt;/div&gt;&lt;div&gt; \
&lt;br&gt;&lt;/div&gt;&lt;blockquote class="gmail_quote" style="margin:0px 0px 0px \
0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"&gt;&lt;div \
style="overflow-wrap: break-word;"&gt;&lt;div&gt; \
&lt;div&gt;[...]&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;  &lt;/div&gt;&lt;blockquote class="gmail_quote" \
style="margin:0px 0px 0px 0.8ex;border-left:1px solid \
rgb(204,204,204);padding-left:1ex"&gt;&lt;div style="overflow-wrap: \
break-word;"&gt;&lt;div&gt;&lt;div&gt;Am 31.07.2019 um 15:50 schrieb Alvin Starr &lt;&lt;a \
href="mailto:alvin@netvel.net" target="_blank"&gt;alvin@netvel.net&lt;/a&gt;&gt;:&lt;blockquote \
type="cite"&gt; &lt;br class="gmail-m_34686457727802889Apple-interchange-newline"&gt;
&lt;div&gt;&lt;span style="font-family:Helvetica;font-size:14px;font-style:normal;font-variant- \
caps:normal;font-weight:normal;letter-spacing:normal;text-align:start;text-indent:0px; \
text-transform:none;white-space:normal;word-spacing:0px;text-decoration:none;float:none;display:inline"&gt;In
  general if no MTU is set on interface creation the default value is 1500.&lt;/span&gt;&lt;br \
style="font-family:Helvetica;font-size:14px;font-style:normal;font-variant-caps:normal \
;font-weight:normal;letter-spacing:normal;text-align:start;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;text-decoration:none"&gt;
 &lt;br style="font-family:Helvetica;font-size:14px;font-style:normal;font-variant-caps:n \
ormal;font-weight:normal;letter-spacing:normal;text-align:start;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;text-decoration:none"&gt;
 &lt;span style="font-family:Helvetica;font-size:14px;font-style:normal;font-variant-caps \
:normal;font-weight:normal;letter-spacing:normal;text-align:start;text-indent:0px;text \
-transform:none;white-space:normal;word-spacing:0px;text-decoration:none;float:none;display:inline"&gt;On
  OVS the bridge MTU is automatically set to the smallest port MTU. So you just have \
to set the MTU of each port of the bridge.&lt;/span&gt;&lt;br \
style="font-family:Helvetica;font-size:14px;font-style:normal;font-variant-caps:normal \
;font-weight:normal;letter-spacing:normal;text-align:start;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;text-decoration:none"&gt;
 &lt;br style="font-family:Helvetica;font-size:14px;font-style:normal;font-variant-caps:n \
ormal;font-weight:normal;letter-spacing:normal;text-align:start;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;text-decoration:none"&gt;
 &lt;span style="font-family:Helvetica;font-size:14px;font-style:normal;font-variant-caps \
:normal;font-weight:normal;letter-spacing:normal;text-align:start;text-indent:0px;text \
-transform:none;white-space:normal;word-spacing:0px;text-decoration:none;float:none;display:inline"&gt;Take
  a look at:&lt;span class="gmail-m_34686457727802889Apple-converted-space"&gt;  \
&lt;/span&gt;&lt;/span&gt;&lt;a href="https://bugzilla.redhat.com/show_bug.cgi?id=1160897" \
style="font-family:Helvetica;font-size:14px;font-style:normal;font-variant-caps:normal \
;font-weight:normal;letter-spacing:normal;text-align:start;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px" \
target="_blank"&gt;https://bugzilla.redhat.com/show_bug.cgi?id=1160897&lt;/a&gt;&lt;br \
style="font-family:Helvetica;font-size:14px;font-style:normal;font-variant-caps:normal \
;font-weight:normal;letter-spacing:normal;text-align:start;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;text-decoration:none"&gt;
 &lt;span style="font-family:Helvetica;font-size:14px;font-style:normal;font-variant-caps \
:normal;font-weight:normal;letter-spacing:normal;text-align:start;text-indent:0px;text \
-transform:none;white-space:normal;word-spacing:0px;text-decoration:none;float:none;display:inline"&gt;It
  is a bit of a pain to read but seems to confirm the statement about the OVS MTU \
value being set by the MTU of the ports.&lt;/span&gt;&lt;br \
style="font-family:Helvetica;font-size:14px;font-style:normal;font-variant-caps:normal \
;font-weight:normal;letter-spacing:normal;text-align:start;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;text-decoration:none"&gt;
 &lt;br style="font-family:Helvetica;font-size:14px;font-style:normal;font-variant-caps:n \
ormal;font-weight:normal;letter-spacing:normal;text-align:start;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;text-decoration:none"&gt;
 &lt;span style="font-family:Helvetica;font-size:14px;font-style:normal;font-variant-caps \
:normal;font-weight:normal;letter-spacing:normal;text-align:start;text-indent:0px;text \
-transform:none;white-space:normal;word-spacing:0px;text-decoration:none;float:none;display:inline"&gt;I
  have been using OVS with Xen and a few years ago I had to wrap my head around this \
problem.&lt;/span&gt;&lt;br style="font-family:Helvetica;font-size:14px;font-style:normal;font- \
variant-caps:normal;font-weight:normal;letter-spacing:normal;text-align:start;text-ind \
ent:0px;text-transform:none;white-space:normal;word-spacing:0px;text-decoration:none"&gt;
 &lt;span style="font-family:Helvetica;font-size:14px;font-style:normal;font-variant-caps \
:normal;font-weight:normal;letter-spacing:normal;text-align:start;text-indent:0px;text \
-transform:none;white-space:normal;word-spacing:0px;text-decoration:none;float:none;display:inline"&gt;Once
  you start setting the MTU to something other than 1500 you will find you need to \
set ALL the MTU values of ALL your interfaces.&lt;/span&gt;&lt;br \
style="font-family:Helvetica;font-size:14px;font-style:normal;font-variant-caps:normal \
;font-weight:normal;letter-spacing:normal;text-align:start;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;text-decoration:none"&gt;
 &lt;span style="font-family:Helvetica;font-size:14px;font-style:normal;font-variant-caps \
:normal;font-weight:normal;letter-spacing:normal;text-align:start;text-indent:0px;text \
-transform:none;white-space:normal;word-spacing:0px;text-decoration:none;float:none;display:inline"&gt;Otherwise
  some inherited default will bite you.&lt;/span&gt;&lt;/div&gt;
&lt;/blockquote&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190813131511</emailId><senderName>Petr Stodulka</senderName><senderEmail>pstodulk@redhat.com</senderEmail><timestampReceived>2019-08-13 13:15:11-0400</timestampReceived><subject>[libvirt-users] Recover snapshots from qcow images</subject><body>

Hi guys,
I had to move to the new laptop week ago and I screw migration of my virtual
machines. I recovered my virtual machines on the new laptop (virsh define)
using the backed up xml files, but I am missing any file with metadata about
snapshots. The original storage is cleaned so I cannot take these files
anymore.

Using qemu-info I can see my snapshots inside the qcow images, but libvirt
doesn't know about them:
###########################################
# virsh snapshot-list rhlvm
  Name   Creation Time   State
-------------------------------

# qemu-img info rhlvm.qcow2
image: rhlvm.qcow2
file format: qcow2
virtual size: 25G (26843545600 bytes)
disk size: 2.9G
cluster_size: 65536
Snapshot list:
ID        TAG                 VM SIZE                DATE       VM CLOCK
1         prepared                  0 2018-09-05 11:06:06   00:00:00.000
Format specific information:
     compat: 1.1
     lazy refcounts: true
     refcount bits: 16
     corrupt: false


###########################################

Is there any nice way to regenerate snapshot metadata for libvirt from
the data inside qcow images? I have bunch of VMs so if there is nice way
how to recover those data, you will make me really happy :)

Thanks,

-- 
Petr Stodulka
OS &amp; Application Modernization
IRC nicks: pstodulk, skytak
Software Engineer
Red Hat Czech s.r.o.

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190814125621</emailId><senderName>Varsha Verma</senderName><senderEmail>varsha.verma.eee15@itbhu.ac.in</senderEmail><timestampReceived>2019-08-14 12:56:21-0400</timestampReceived><subject>[libvirt-users] Libvirt API for attaching volume to domain</subject><body>

[Attachment #2 (multipart/alternative)]


Hi,

I wanted to know if there is any Python API exposed for libvirt using which
I can attach a libvirt volume to a libvirt domain/VM.

I intend to do something similar to the `attach-disk` command of virsh
using python.

-- 

*Regards,*

*Varsha Verma*

*Final Year Undergraduate*

*Department of Electrical Engineering*

*IIT-BHU, Varanasi*

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;Hi,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I wanted to know if there is any Python API \
exposed for libvirt using which I can attach a libvirt volume to a libvirt \
domain/VM.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I intend to do something similar to the \
`attach-disk` command of virsh using python.&lt;br clear="all"&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;-- \
&lt;br&gt;&lt;div dir="ltr" class="gmail_signature" data-smartmail="gmail_signature"&gt;&lt;div \
dir="ltr"&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;i&gt;&lt;span \
style="background-color:rgb(153,153,153)"&gt;&lt;/span&gt;&lt;span \
style="color:rgb(153,153,153)"&gt;Regards,&lt;br&gt;&lt;/span&gt;&lt;/i&gt;&lt;/div&gt;&lt;span \
style="color:rgb(153,153,153)"&gt;&lt;i&gt;Varsha Verma&lt;br&gt;&lt;/i&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span \
style="color:rgb(153,153,153)"&gt;&lt;i&gt;Final Year Undergraduate&lt;br&gt;&lt;/i&gt;&lt;/span&gt;&lt;/div&gt;&lt;span \
style="color:rgb(153,153,153)"&gt;&lt;i&gt;Department of Electrical \
Engineering&lt;br&gt;&lt;/i&gt;&lt;/span&gt;&lt;/div&gt;&lt;i&gt;&lt;font color="#999999"&gt;IIT-BHU, \
Varanasi&lt;br&gt;&lt;/font&gt;&lt;/i&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;img width="0" height="0" \
class="mailtrack-img" alt="" style="display:flex" \
src="https://mailtrack.io/trace/mail/61f8c18b6f719adf9aa8c0d487f300743b03cc9f.png?u=1670425"&gt;&lt;/div&gt;




_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190819195357</emailId><senderName>Nir Soffer</senderName><senderEmail>nsoffer@redhat.com</senderEmail><timestampReceived>2019-08-19 19:53:57-0400</timestampReceived><subject>[libvirt-users] Starting VM fails with: "Setting different DAC user or group on /path... which is al</subject><body>

[Attachment #2 (multipart/alternative)]


Hi,

I upgraded to a Fedora 29 host using virt-preview repo to
libvirt-daemon-5.6.0-1.fc29.x86_64
The host was using plain Fedora 29 without virt-preview before that.

After the upgrade, starting some vms that were running fine fail now with
this error:

Error starting domain: internal error: child reported (status=125):
Requested operation is not valid: Setting different DAC user or group on
/home/libvirt/images/voodoo4-os.img which is already in use

Traceback (most recent call last):
  File "/usr/share/virt-manager/virtManager/asyncjob.py", line 75, in
cb_wrapper
    callback(asyncjob, *args, **kwargs)
  File "/usr/share/virt-manager/virtManager/asyncjob.py", line 111, in tmpcb
    callback(*args, **kwargs)
  File "/usr/share/virt-manager/virtManager/object/libvirtobject.py", line
66, in newfn
    ret = fn(self, *args, **kwargs)
  File "/usr/share/virt-manager/virtManager/object/domain.py", line 1279,
in startup
    self._backend.create()
  File "/usr/lib64/python3.7/site-packages/libvirt.py", line 1089, in create
    if ret == -1: raise libvirtError ('virDomainCreate() failed', dom=self)
libvirt.libvirtError: internal error: child reported (status=125):
Requested operation is not valid: Setting different DAC user or group on
/home/libvirt/images/voodoo4-os.img which is already in use

These vms we created by creating one vm, and the cloning the vms.

I tried to delete the disks and add them back in one of the vms, but the vm
still fail with the
same error.

I hope that someone have a clue what is the issue, and how it can be fixed.

Here some details about the setup:

vm1:

&lt;domain type='kvm'&gt;
  &lt;name&gt;voodoo4&lt;/name&gt;
  &lt;uuid&gt;0b3aa57a-00b6-4e99-81f9-8f216f85ccaf&lt;/uuid&gt;
  &lt;title&gt;voodoo4 (fedora 29, gluster)&lt;/title&gt;
  &lt;metadata&gt;
    &lt;libosinfo:libosinfo xmlns:libosinfo="
http://libosinfo.org/xmlns/libvirt/domain/1.0"&gt;
      &lt;libosinfo:os id="http://fedoraproject.org/fedora/29"/&gt;
    &lt;/libosinfo:libosinfo&gt;
  &lt;/metadata&gt;
  &lt;memory unit='KiB'&gt;2097152&lt;/memory&gt;
  &lt;currentMemory unit='KiB'&gt;2097152&lt;/currentMemory&gt;
  &lt;vcpu placement='static'&gt;2&lt;/vcpu&gt;
  &lt;os&gt;
    &lt;type arch='x86_64' machine='pc-q35-3.0'&gt;hvm&lt;/type&gt;
    &lt;boot dev='hd'/&gt;
  &lt;/os&gt;
  &lt;features&gt;
    &lt;acpi/&gt;
    &lt;apic/&gt;
    &lt;vmport state='off'/&gt;
  &lt;/features&gt;
  &lt;cpu mode='host-model' check='partial'&gt;
    &lt;model fallback='allow'/&gt;
  &lt;/cpu&gt;
  &lt;clock offset='utc'&gt;
    &lt;timer name='rtc' tickpolicy='catchup'/&gt;
    &lt;timer name='pit' tickpolicy='delay'/&gt;
    &lt;timer name='hpet' present='no'/&gt;
  &lt;/clock&gt;
  &lt;on_poweroff&gt;destroy&lt;/on_poweroff&gt;
  &lt;on_reboot&gt;restart&lt;/on_reboot&gt;
  &lt;on_crash&gt;destroy&lt;/on_crash&gt;
  &lt;pm&gt;
    &lt;suspend-to-mem enabled='no'/&gt;
    &lt;suspend-to-disk enabled='no'/&gt;
  &lt;/pm&gt;
  &lt;devices&gt;
    &lt;emulator&gt;/usr/bin/qemu-kvm&lt;/emulator&gt;
    &lt;disk type='file' device='cdrom'&gt;
      &lt;driver name='qemu' type='raw'/&gt;
      &lt;target dev='sda' bus='sata'/&gt;
      &lt;readonly/&gt;
      &lt;address type='drive' controller='0' bus='0' target='0' unit='0'/&gt;
    &lt;/disk&gt;
    &lt;disk type='file' device='disk'&gt;
      &lt;driver name='qemu' type='raw'/&gt;
      &lt;source file='/home/libvirt/images/voodoo4-os.img'/&gt;
      &lt;target dev='vda' bus='virtio'/&gt;
      &lt;serial&gt;os&lt;/serial&gt;
      &lt;address type='pci' domain='0x0000' bus='0x04' slot='0x00'
function='0x0'/&gt;
    &lt;/disk&gt;
    &lt;disk type='file' device='disk'&gt;
      &lt;driver name='qemu' type='raw'/&gt;
      &lt;source file='/home/libvirt/images/voodoo4-gv0.img'/&gt;
      &lt;target dev='vdb' bus='virtio'/&gt;
      &lt;serial&gt;gv0&lt;/serial&gt;
      &lt;address type='pci' domain='0x0000' bus='0x05' slot='0x00'
function='0x0'/&gt;
    &lt;/disk&gt;
    &lt;disk type='file' device='disk'&gt;
      &lt;driver name='qemu' type='raw'/&gt;
      &lt;source file='/home/libvirt/images/voodoo4-gv1.img'/&gt;
      &lt;target dev='vdc' bus='virtio'/&gt;
      &lt;serial&gt;gv1&lt;/serial&gt;
      &lt;address type='pci' domain='0x0000' bus='0x08' slot='0x00'
function='0x0'/&gt;
    &lt;/disk&gt;
    &lt;controller type='usb' index='0' model='qemu-xhci' ports='15'&gt;
      &lt;address type='pci' domain='0x0000' bus='0x02' slot='0x00'
function='0x0'/&gt;
    &lt;/controller&gt;
    &lt;controller type='sata' index='0'&gt;
      &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x1f'
function='0x2'/&gt;
    &lt;/controller&gt;
    &lt;controller type='pci' index='0' model='pcie-root'/&gt;
    &lt;controller type='pci' index='1' model='pcie-root-port'&gt;
      &lt;model name='pcie-root-port'/&gt;
      &lt;target chassis='1' port='0x10'/&gt;
      &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x02'
function='0x0' multifunction='on'/&gt;
    &lt;/controller&gt;
    &lt;controller type='pci' index='2' model='pcie-root-port'&gt;
      &lt;model name='pcie-root-port'/&gt;
      &lt;target chassis='2' port='0x11'/&gt;
      &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x02'
function='0x1'/&gt;
    &lt;/controller&gt;
    &lt;controller type='pci' index='3' model='pcie-root-port'&gt;
      &lt;model name='pcie-root-port'/&gt;
      &lt;target chassis='3' port='0x12'/&gt;
      &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x02'
function='0x2'/&gt;
    &lt;/controller&gt;
    &lt;controller type='pci' index='4' model='pcie-root-port'&gt;
      &lt;model name='pcie-root-port'/&gt;
      &lt;target chassis='4' port='0x13'/&gt;
      &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x02'
function='0x3'/&gt;
    &lt;/controller&gt;
    &lt;controller type='pci' index='5' model='pcie-root-port'&gt;
      &lt;model name='pcie-root-port'/&gt;
      &lt;target chassis='5' port='0x14'/&gt;
      &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x02'
function='0x4'/&gt;
    &lt;/controller&gt;
    &lt;controller type='pci' index='6' model='pcie-root-port'&gt;
      &lt;model name='pcie-root-port'/&gt;
      &lt;target chassis='6' port='0x15'/&gt;
      &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x02'
function='0x5'/&gt;
    &lt;/controller&gt;
    &lt;controller type='pci' index='7' model='pcie-root-port'&gt;
      &lt;model name='pcie-root-port'/&gt;
      &lt;target chassis='7' port='0x16'/&gt;
      &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x02'
function='0x6'/&gt;
    &lt;/controller&gt;
    &lt;controller type='pci' index='8' model='pcie-root-port'&gt;
      &lt;model name='pcie-root-port'/&gt;
      &lt;target chassis='8' port='0x17'/&gt;
      &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x02'
function='0x7'/&gt;
    &lt;/controller&gt;
    &lt;controller type='virtio-serial' index='0'&gt;
      &lt;address type='pci' domain='0x0000' bus='0x03' slot='0x00'
function='0x0'/&gt;
    &lt;/controller&gt;
    &lt;interface type='bridge'&gt;
      &lt;mac address='52:54:00:dd:a4:5c'/&gt;
      &lt;source bridge='ovirt'/&gt;
      &lt;model type='virtio'/&gt;
      &lt;address type='pci' domain='0x0000' bus='0x01' slot='0x00'
function='0x0'/&gt;
    &lt;/interface&gt;
    &lt;serial type='pty'&gt;
      &lt;target type='isa-serial' port='0'&gt;
        &lt;model name='isa-serial'/&gt;
      &lt;/target&gt;
    &lt;/serial&gt;
    &lt;console type='pty'&gt;
      &lt;target type='serial' port='0'/&gt;
    &lt;/console&gt;
    &lt;channel type='unix'&gt;
      &lt;target type='virtio' name='org.qemu.guest_agent.0'/&gt;
      &lt;address type='virtio-serial' controller='0' bus='0' port='1'/&gt;
    &lt;/channel&gt;
    &lt;channel type='spicevmc'&gt;
      &lt;target type='virtio' name='com.redhat.spice.0'/&gt;
      &lt;address type='virtio-serial' controller='0' bus='0' port='2'/&gt;
    &lt;/channel&gt;
    &lt;input type='tablet' bus='usb'&gt;
      &lt;address type='usb' bus='0' port='1'/&gt;
    &lt;/input&gt;
    &lt;input type='mouse' bus='ps2'/&gt;
    &lt;input type='keyboard' bus='ps2'/&gt;
    &lt;graphics type='spice' autoport='yes'&gt;
      &lt;listen type='address'/&gt;
    &lt;/graphics&gt;
    &lt;sound model='ich9'&gt;
      &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x1b'
function='0x0'/&gt;
    &lt;/sound&gt;
    &lt;video&gt;
      &lt;model type='qxl' ram='65536' vram='65536' vgamem='16384' heads='1'
primary='yes'/&gt;
      &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x01'
function='0x0'/&gt;
    &lt;/video&gt;
    &lt;redirdev bus='usb' type='spicevmc'&gt;
      &lt;address type='usb' bus='0' port='2'/&gt;
    &lt;/redirdev&gt;
    &lt;redirdev bus='usb' type='spicevmc'&gt;
      &lt;address type='usb' bus='0' port='3'/&gt;
    &lt;/redirdev&gt;
    &lt;memballoon model='virtio'&gt;
      &lt;address type='pci' domain='0x0000' bus='0x06' slot='0x00'
function='0x0'/&gt;
    &lt;/memballoon&gt;
    &lt;rng model='virtio'&gt;
      &lt;backend model='random'&gt;/dev/urandom&lt;/backend&gt;
      &lt;address type='pci' domain='0x0000' bus='0x07' slot='0x00'
function='0x0'/&gt;
    &lt;/rng&gt;
  &lt;/devices&gt;
&lt;/domain&gt;


vm 2:

&lt;domain type='kvm'&gt;
  &lt;name&gt;voodoo5&lt;/name&gt;
  &lt;uuid&gt;8ded8ea2-6524-4fc0-94f6-31667338a5f2&lt;/uuid&gt;
  &lt;title&gt;voodoo5 (fedora 29, gluster)&lt;/title&gt;
  &lt;metadata&gt;
    &lt;libosinfo:libosinfo xmlns:libosinfo="
http://libosinfo.org/xmlns/libvirt/domain/1.0"&gt;
      &lt;libosinfo:os id="http://fedoraproject.org/fedora/29"/&gt;
    &lt;/libosinfo:libosinfo&gt;
  &lt;/metadata&gt;
  &lt;memory unit='KiB'&gt;2097152&lt;/memory&gt;
  &lt;currentMemory unit='KiB'&gt;2097152&lt;/currentMemory&gt;
  &lt;vcpu placement='static'&gt;2&lt;/vcpu&gt;
  &lt;os&gt;
    &lt;type arch='x86_64' machine='pc-q35-3.0'&gt;hvm&lt;/type&gt;
    &lt;boot dev='hd'/&gt;
  &lt;/os&gt;
  &lt;features&gt;
    &lt;acpi/&gt;
    &lt;apic/&gt;
    &lt;vmport state='off'/&gt;
  &lt;/features&gt;
  &lt;cpu mode='host-model' check='partial'&gt;
    &lt;model fallback='allow'/&gt;
  &lt;/cpu&gt;
  &lt;clock offset='utc'&gt;
    &lt;timer name='rtc' tickpolicy='catchup'/&gt;
    &lt;timer name='pit' tickpolicy='delay'/&gt;
    &lt;timer name='hpet' present='no'/&gt;
  &lt;/clock&gt;
  &lt;on_poweroff&gt;destroy&lt;/on_poweroff&gt;
  &lt;on_reboot&gt;restart&lt;/on_reboot&gt;
  &lt;on_crash&gt;destroy&lt;/on_crash&gt;
  &lt;pm&gt;
    &lt;suspend-to-mem enabled='no'/&gt;
    &lt;suspend-to-disk enabled='no'/&gt;
  &lt;/pm&gt;
  &lt;devices&gt;
    &lt;emulator&gt;/usr/bin/qemu-kvm&lt;/emulator&gt;
    &lt;disk type='file' device='disk'&gt;
      &lt;driver name='qemu' type='raw'/&gt;
      &lt;source file='/home/libvirt/images/voodoo5-os.img'/&gt;
      &lt;target dev='vda' bus='virtio'/&gt;
      &lt;serial&gt;os&lt;/serial&gt;
      &lt;address type='pci' domain='0x0000' bus='0x04' slot='0x00'
function='0x0'/&gt;
    &lt;/disk&gt;
    &lt;disk type='file' device='disk'&gt;
      &lt;driver name='qemu' type='raw'/&gt;
      &lt;source file='/home/libvirt/images/voodoo5-gv0.img'/&gt;
      &lt;target dev='vdb' bus='virtio'/&gt;
      &lt;serial&gt;gv0&lt;/serial&gt;
      &lt;address type='pci' domain='0x0000' bus='0x05' slot='0x00'
function='0x0'/&gt;
    &lt;/disk&gt;
    &lt;disk type='file' device='disk'&gt;
      &lt;driver name='qemu' type='raw'/&gt;
      &lt;source file='/home/libvirt/images/voodoo5-gv1.img'/&gt;
      &lt;target dev='vdc' bus='virtio'/&gt;
      &lt;serial&gt;gv1&lt;/serial&gt;
      &lt;address type='pci' domain='0x0000' bus='0x08' slot='0x00'
function='0x0'/&gt;
    &lt;/disk&gt;
    &lt;disk type='file' device='cdrom'&gt;
      &lt;driver name='qemu' type='raw'/&gt;
      &lt;target dev='sda' bus='sata'/&gt;
      &lt;readonly/&gt;
      &lt;address type='drive' controller='0' bus='0' target='0' unit='0'/&gt;
    &lt;/disk&gt;
    &lt;controller type='usb' index='0' model='qemu-xhci' ports='15'&gt;
      &lt;address type='pci' domain='0x0000' bus='0x02' slot='0x00'
function='0x0'/&gt;
    &lt;/controller&gt;
    &lt;controller type='sata' index='0'&gt;
      &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x1f'
function='0x2'/&gt;
    &lt;/controller&gt;
    &lt;controller type='pci' index='0' model='pcie-root'/&gt;
    &lt;controller type='pci' index='1' model='pcie-root-port'&gt;
      &lt;model name='pcie-root-port'/&gt;
      &lt;target chassis='1' port='0x10'/&gt;
      &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x02'
function='0x0' multifunction='on'/&gt;
    &lt;/controller&gt;
    &lt;controller type='pci' index='2' model='pcie-root-port'&gt;
      &lt;model name='pcie-root-port'/&gt;
      &lt;target chassis='2' port='0x11'/&gt;
      &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x02'
function='0x1'/&gt;
    &lt;/controller&gt;
    &lt;controller type='pci' index='3' model='pcie-root-port'&gt;
      &lt;model name='pcie-root-port'/&gt;
      &lt;target chassis='3' port='0x12'/&gt;
      &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x02'
function='0x2'/&gt;
    &lt;/controller&gt;
    &lt;controller type='pci' index='4' model='pcie-root-port'&gt;
      &lt;model name='pcie-root-port'/&gt;
      &lt;target chassis='4' port='0x13'/&gt;
      &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x02'
function='0x3'/&gt;
    &lt;/controller&gt;
    &lt;controller type='pci' index='5' model='pcie-root-port'&gt;
      &lt;model name='pcie-root-port'/&gt;
      &lt;target chassis='5' port='0x14'/&gt;
      &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x02'
function='0x4'/&gt;
    &lt;/controller&gt;
    &lt;controller type='pci' index='6' model='pcie-root-port'&gt;
      &lt;model name='pcie-root-port'/&gt;
      &lt;target chassis='6' port='0x15'/&gt;
      &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x02'
function='0x5'/&gt;
    &lt;/controller&gt;
    &lt;controller type='pci' index='7' model='pcie-root-port'&gt;
      &lt;model name='pcie-root-port'/&gt;
      &lt;target chassis='7' port='0x16'/&gt;
      &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x02'
function='0x6'/&gt;
    &lt;/controller&gt;
    &lt;controller type='pci' index='8' model='pcie-root-port'&gt;
      &lt;model name='pcie-root-port'/&gt;
      &lt;target chassis='8' port='0x17'/&gt;
      &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x02'
function='0x7'/&gt;
    &lt;/controller&gt;
    &lt;controller type='virtio-serial' index='0'&gt;
      &lt;address type='pci' domain='0x0000' bus='0x03' slot='0x00'
function='0x0'/&gt;
    &lt;/controller&gt;
    &lt;interface type='bridge'&gt;
      &lt;mac address='52:54:00:53:6a:b4'/&gt;
      &lt;source bridge='ovirt'/&gt;
      &lt;model type='virtio'/&gt;
      &lt;address type='pci' domain='0x0000' bus='0x01' slot='0x00'
function='0x0'/&gt;
    &lt;/interface&gt;
    &lt;serial type='pty'&gt;
      &lt;target type='isa-serial' port='0'&gt;
        &lt;model name='isa-serial'/&gt;
      &lt;/target&gt;
    &lt;/serial&gt;
    &lt;console type='pty'&gt;
      &lt;target type='serial' port='0'/&gt;
    &lt;/console&gt;
    &lt;channel type='unix'&gt;
      &lt;target type='virtio' name='org.qemu.guest_agent.0'/&gt;
      &lt;address type='virtio-serial' controller='0' bus='0' port='1'/&gt;
    &lt;/channel&gt;
    &lt;channel type='spicevmc'&gt;
      &lt;target type='virtio' name='com.redhat.spice.0'/&gt;
      &lt;address type='virtio-serial' controller='0' bus='0' port='2'/&gt;
    &lt;/channel&gt;
    &lt;input type='tablet' bus='usb'&gt;
      &lt;address type='usb' bus='0' port='1'/&gt;
    &lt;/input&gt;
    &lt;input type='mouse' bus='ps2'/&gt;
    &lt;input type='keyboard' bus='ps2'/&gt;
    &lt;graphics type='spice' autoport='yes'&gt;
      &lt;listen type='address'/&gt;
    &lt;/graphics&gt;
    &lt;sound model='ich9'&gt;
      &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x1b'
function='0x0'/&gt;
    &lt;/sound&gt;
    &lt;video&gt;
      &lt;model type='qxl' ram='65536' vram='65536' vgamem='16384' heads='1'
primary='yes'/&gt;
      &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x01'
function='0x0'/&gt;
    &lt;/video&gt;
    &lt;redirdev bus='usb' type='spicevmc'&gt;
      &lt;address type='usb' bus='0' port='2'/&gt;
    &lt;/redirdev&gt;
    &lt;redirdev bus='usb' type='spicevmc'&gt;
      &lt;address type='usb' bus='0' port='3'/&gt;
    &lt;/redirdev&gt;
    &lt;memballoon model='virtio'&gt;
      &lt;address type='pci' domain='0x0000' bus='0x06' slot='0x00'
function='0x0'/&gt;
    &lt;/memballoon&gt;
    &lt;rng model='virtio'&gt;
      &lt;backend model='random'&gt;/dev/urandom&lt;/backend&gt;
      &lt;address type='pci' domain='0x0000' bus='0x07' slot='0x00'
function='0x0'/&gt;
    &lt;/rng&gt;
  &lt;/devices&gt;
&lt;/domain&gt;


ls -lhZ /home/libvirt/images/voodoo4*
# ls -lhZ /home/libvirt/images/voodoo4*
-rw-------. 1 root root system_u:object_r:virt_image_t:s0 20G Aug 17 03:55
/home/libvirt/images/voodoo4-gv0.img
-rw-------. 1 root root system_u:object_r:virt_image_t:s0 20G Aug 17 03:55
/home/libvirt/images/voodoo4-gv1.img
-rw-------. 1 root root system_u:object_r:virt_image_t:s0 50G Aug 17 03:52
/home/libvirt/images/voodoo4-os.img


cat /etc/libvirt/storage/images.xml
&lt;!--
WARNING: THIS IS AN AUTO-GENERATED FILE. CHANGES TO IT ARE LIKELY TO BE
OVERWRITTEN AND LOST. Changes to this xml configuration should be made
using:
  virsh pool-edit images
or other application using the libvirt API.
--&gt;

The related pool:

&lt;pool type='dir'&gt;
  &lt;name&gt;images&lt;/name&gt;
  &lt;uuid&gt;f7190095-947d-442b-b94b-4a99790795bc&lt;/uuid&gt;
  &lt;capacity unit='bytes'&gt;0&lt;/capacity&gt;
  &lt;allocation unit='bytes'&gt;0&lt;/allocation&gt;
  &lt;available unit='bytes'&gt;0&lt;/available&gt;
  &lt;source&gt;
  &lt;/source&gt;
  &lt;target&gt;
    &lt;path&gt;/home/libvirt/images&lt;/path&gt;
    &lt;permissions&gt;
      &lt;mode&gt;0755&lt;/mode&gt;
      &lt;owner&gt;-1&lt;/owner&gt;
      &lt;group&gt;-1&lt;/group&gt;
    &lt;/permissions&gt;
  &lt;/target&gt;
&lt;/pool&gt;

Nir

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;&lt;div class="gmail_default" \
style="font-size:small;color:#000000"&gt;Hi,&lt;/div&gt;&lt;div class="gmail_default" \
style="font-size:small;color:#000000"&gt;&lt;br&gt;&lt;/div&gt;&lt;div class="gmail_default" \
style="font-size:small;color:#000000"&gt;I upgraded to a Fedora 29 host using \
virt-preview repo to  &lt;/div&gt;&lt;div class="gmail_default" \
style="font-size:small;color:#000000"&gt;libvirt-daemon-5.6.0-1.fc29.x86_64&lt;br&gt;&lt;/div&gt;&lt;div \
class="gmail_default" style="font-size:small;color:#000000"&gt;The host was using plain \
Fedora 29 without virt-preview before that.&lt;/div&gt;&lt;div class="gmail_default" \
style="font-size:small;color:#000000"&gt;&lt;br&gt;&lt;/div&gt;&lt;div class="gmail_default" \
style="font-size:small;color:#000000"&gt;After the upgrade, starting some vms that were \
running fine fail now with&lt;/div&gt;&lt;div class="gmail_default" \
style="font-size:small;color:#000000"&gt;this error:&lt;/div&gt;&lt;div class="gmail_default" \
style="font-size:small;color:#000000"&gt;&lt;br&gt;&lt;/div&gt;&lt;div class="gmail_default" \
style="font-size:small;color:#000000"&gt;Error starting domain: internal error: child \
reported (status=125): Requested operation is not valid: Setting different DAC user \
or group on /home/libvirt/images/voodoo4-os.img which is already in \
use&lt;br&gt;&lt;br&gt;Traceback (most recent call last):&lt;br&gt;   File \
"/usr/share/virt-manager/virtManager/asyncjob.py", line 75, in \
cb_wrapper&lt;br&gt;      callback(asyncjob, *args, **kwargs)&lt;br&gt;   File \
"/usr/share/virt-manager/virtManager/asyncjob.py", line 111, in tmpcb&lt;br&gt;   \
callback(*args, **kwargs)&lt;br&gt;   File \
"/usr/share/virt-manager/virtManager/object/libvirtobject.py", line 66, in \
newfn&lt;br&gt;      ret = fn(self, *args, **kwargs)&lt;br&gt;   File \
"/usr/share/virt-manager/virtManager/object/domain.py", line 1279, in \
startup&lt;br&gt;      self._backend.create()&lt;br&gt;   File \
"/usr/lib64/python3.7/site-packages/libvirt.py", line 1089, in create&lt;br&gt;   \
if ret == -1: raise libvirtError ('virDomainCreate() failed', \
dom=self)&lt;br&gt;libvirt.libvirtError: internal error: child reported (status=125): \
Requested operation is not valid: Setting different DAC user or group on \
/home/libvirt/images/voodoo4-os.img which is already in use&lt;br&gt;&lt;/div&gt;&lt;div \
class="gmail_default" style="font-size:small;color:#000000"&gt;&lt;br&gt;&lt;/div&gt;&lt;div \
class="gmail_default" style="font-size:small;color:#000000"&gt;These vms we created by \
creating one vm, and the cloning the vms.&lt;/div&gt;&lt;div class="gmail_default" \
style="font-size:small;color:#000000"&gt;&lt;br&gt;&lt;/div&gt;&lt;div class="gmail_default" \
style="font-size:small;color:#000000"&gt;I tried to delete the disks and add them back \
in one of the vms, but the vm still fail with the&lt;/div&gt;&lt;div class="gmail_default" \
style="font-size:small;color:#000000"&gt;same error.&lt;/div&gt;&lt;div class="gmail_default" \
style="font-size:small;color:#000000"&gt;&lt;br&gt;&lt;/div&gt;&lt;div class="gmail_default" \
style="font-size:small;color:#000000"&gt;&lt;div class="gmail_default"&gt;I hope that someone \
have a clue what is the issue, and how it can be fixed.&lt;/div&gt;&lt;/div&gt;&lt;div \
class="gmail_default" style="font-size:small;color:#000000"&gt;&lt;br&gt;&lt;/div&gt;&lt;div \
class="gmail_default" style="font-size:small;color:#000000"&gt;Here some details about \
the setup:&lt;/div&gt;&lt;div class="gmail_default" \
style="font-size:small;color:#000000"&gt;&lt;br&gt;&lt;/div&gt;&lt;div class="gmail_default" \
style="font-size:small;color:#000000"&gt;vm1:&lt;/div&gt;&lt;div class="gmail_default" \
style="font-size:small;color:#000000"&gt;&lt;br&gt;&lt;/div&gt;&lt;div class="gmail_default" \
style="font-size:small;color:#000000"&gt;&lt;domain type='kvm'&gt;&lt;br&gt;   \
&lt;name&gt;voodoo4&lt;/name&gt;&lt;br&gt;   \
&lt;uuid&gt;0b3aa57a-00b6-4e99-81f9-8f216f85ccaf&lt;/uuid&gt;&lt;br&gt;   \
&lt;title&gt;voodoo4 (fedora 29, gluster)&lt;/title&gt;&lt;br&gt;   &lt;metadata&gt;&lt;br&gt;    \
&lt;libosinfo:libosinfo xmlns:libosinfo="&lt;a \
href="http://libosinfo.org/xmlns/libvirt/domain/1.0"&gt;http://libosinfo.org/xmlns/libvirt/domain/1.0&lt;/a&gt;"&gt;&lt;br&gt; \
&lt;libosinfo:os id="&lt;a \
href="http://fedoraproject.org/fedora/29"&gt;http://fedoraproject.org/fedora/29&lt;/a&gt;"/&gt;&lt;br&gt; \
&lt;/libosinfo:libosinfo&gt;&lt;br&gt;   &lt;/metadata&gt;&lt;br&gt;   &lt;memory \
unit='KiB'&gt;2097152&lt;/memory&gt;&lt;br&gt;   &lt;currentMemory \
unit='KiB'&gt;2097152&lt;/currentMemory&gt;&lt;br&gt;   &lt;vcpu \
placement='static'&gt;2&lt;/vcpu&gt;&lt;br&gt;   &lt;os&gt;&lt;br&gt;      &lt;type \
arch='x86_64' machine='pc-q35-3.0'&gt;hvm&lt;/type&gt;&lt;br&gt;      \
&lt;boot dev='hd'/&gt;&lt;br&gt;   &lt;/os&gt;&lt;br&gt;   &lt;features&gt;&lt;br&gt;      \
&lt;acpi/&gt;&lt;br&gt;      &lt;apic/&gt;&lt;br&gt;      &lt;vmport state='off'/&gt;&lt;br&gt; \
&lt;/features&gt;&lt;br&gt;   &lt;cpu mode='host-model' \
check='partial'&gt;&lt;br&gt;      &lt;model fallback='allow'/&gt;&lt;br&gt;   \
&lt;/cpu&gt;&lt;br&gt;   &lt;clock offset='utc'&gt;&lt;br&gt;      &lt;timer \
name='rtc' tickpolicy='catchup'/&gt;&lt;br&gt;      &lt;timer \
name='pit' tickpolicy='delay'/&gt;&lt;br&gt;      &lt;timer \
name='hpet' present='no'/&gt;&lt;br&gt;   &lt;/clock&gt;&lt;br&gt;   \
&lt;on_poweroff&gt;destroy&lt;/on_poweroff&gt;&lt;br&gt;   \
&lt;on_reboot&gt;restart&lt;/on_reboot&gt;&lt;br&gt;   \
&lt;on_crash&gt;destroy&lt;/on_crash&gt;&lt;br&gt;   &lt;pm&gt;&lt;br&gt;      &lt;suspend-to-mem \
enabled='no'/&gt;&lt;br&gt;      &lt;suspend-to-disk enabled='no'/&gt;&lt;br&gt;  \
&lt;/pm&gt;&lt;br&gt;   &lt;devices&gt;&lt;br&gt;      \
&lt;emulator&gt;/usr/bin/qemu-kvm&lt;/emulator&gt;&lt;br&gt;      &lt;disk \
type='file' device='cdrom'&gt;&lt;br&gt;         &lt;driver \
name='qemu' type='raw'/&gt;&lt;br&gt;         &lt;target dev='sda' \
bus='sata'/&gt;&lt;br&gt;         &lt;readonly/&gt;&lt;br&gt;         &lt;address \
type='drive' controller='0' bus='0' target='0' \
unit='0'/&gt;&lt;br&gt;      &lt;/disk&gt;&lt;br&gt;      &lt;disk type='file' \
device='disk'&gt;&lt;br&gt;         &lt;driver name='qemu' \
type='raw'/&gt;&lt;br&gt;         &lt;source \
file='/home/libvirt/images/voodoo4-os.img'/&gt;&lt;br&gt;         &lt;target \
dev='vda' bus='virtio'/&gt;&lt;br&gt;         \
&lt;serial&gt;os&lt;/serial&gt;&lt;br&gt;         &lt;address type='pci' \
domain='0x0000' bus='0x04' slot='0x00' \
function='0x0'/&gt;&lt;br&gt;      &lt;/disk&gt;&lt;br&gt;      &lt;disk \
type='file' device='disk'&gt;&lt;br&gt;         &lt;driver \
name='qemu' type='raw'/&gt;&lt;br&gt;         &lt;source \
file='/home/libvirt/images/voodoo4-gv0.img'/&gt;&lt;br&gt;         &lt;target \
dev='vdb' bus='virtio'/&gt;&lt;br&gt;         \
&lt;serial&gt;gv0&lt;/serial&gt;&lt;br&gt;         &lt;address type='pci' \
domain='0x0000' bus='0x05' slot='0x00' \
function='0x0'/&gt;&lt;br&gt;      &lt;/disk&gt;&lt;br&gt;      &lt;disk \
type='file' device='disk'&gt;&lt;br&gt;         &lt;driver \
name='qemu' type='raw'/&gt;&lt;br&gt;         &lt;source \
file='/home/libvirt/images/voodoo4-gv1.img'/&gt;&lt;br&gt;         &lt;target \
dev='vdc' bus='virtio'/&gt;&lt;br&gt;         \
&lt;serial&gt;gv1&lt;/serial&gt;&lt;br&gt;         &lt;address type='pci' \
domain='0x0000' bus='0x08' slot='0x00' \
function='0x0'/&gt;&lt;br&gt;      &lt;/disk&gt;&lt;br&gt;      &lt;controller \
type='usb' index='0' model='qemu-xhci' \
ports='15'&gt;&lt;br&gt;         &lt;address type='pci' \
domain='0x0000' bus='0x02' slot='0x00' \
function='0x0'/&gt;&lt;br&gt;      &lt;/controller&gt;&lt;br&gt;      &lt;controller \
type='sata' index='0'&gt;&lt;br&gt;         &lt;address type='pci' \
domain='0x0000' bus='0x00' slot='0x1f' \
function='0x2'/&gt;&lt;br&gt;      &lt;/controller&gt;&lt;br&gt;      &lt;controller \
type='pci' index='0' model='pcie-root'/&gt;&lt;br&gt;      \
&lt;controller type='pci' index='1' \
model='pcie-root-port'&gt;&lt;br&gt;         &lt;model \
name='pcie-root-port'/&gt;&lt;br&gt;         &lt;target chassis='1' \
port='0x10'/&gt;&lt;br&gt;         &lt;address type='pci' \
domain='0x0000' bus='0x00' slot='0x02' function='0x0' \
multifunction='on'/&gt;&lt;br&gt;      &lt;/controller&gt;&lt;br&gt;      &lt;controller \
type='pci' index='2' model='pcie-root-port'&gt;&lt;br&gt;         \
&lt;model name='pcie-root-port'/&gt;&lt;br&gt;         &lt;target \
chassis='2' port='0x11'/&gt;&lt;br&gt;         &lt;address \
type='pci' domain='0x0000' bus='0x00' slot='0x02' \
function='0x1'/&gt;&lt;br&gt;      &lt;/controller&gt;&lt;br&gt;      &lt;controller \
type='pci' index='3' model='pcie-root-port'&gt;&lt;br&gt;         \
&lt;model name='pcie-root-port'/&gt;&lt;br&gt;         &lt;target \
chassis='3' port='0x12'/&gt;&lt;br&gt;         &lt;address \
type='pci' domain='0x0000' bus='0x00' slot='0x02' \
function='0x2'/&gt;&lt;br&gt;      &lt;/controller&gt;&lt;br&gt;      &lt;controller \
type='pci' index='4' model='pcie-root-port'&gt;&lt;br&gt;         \
&lt;model name='pcie-root-port'/&gt;&lt;br&gt;         &lt;target \
chassis='4' port='0x13'/&gt;&lt;br&gt;         &lt;address \
type='pci' domain='0x0000' bus='0x00' slot='0x02' \
function='0x3'/&gt;&lt;br&gt;      &lt;/controller&gt;&lt;br&gt;      &lt;controller \
type='pci' index='5' model='pcie-root-port'&gt;&lt;br&gt;         \
&lt;model name='pcie-root-port'/&gt;&lt;br&gt;         &lt;target \
chassis='5' port='0x14'/&gt;&lt;br&gt;         &lt;address \
type='pci' domain='0x0000' bus='0x00' slot='0x02' \
function='0x4'/&gt;&lt;br&gt;      &lt;/controller&gt;&lt;br&gt;      &lt;controller \
type='pci' index='6' model='pcie-root-port'&gt;&lt;br&gt;         \
&lt;model name='pcie-root-port'/&gt;&lt;br&gt;         &lt;target \
chassis='6' port='0x15'/&gt;&lt;br&gt;         &lt;address \
type='pci' domain='0x0000' bus='0x00' slot='0x02' \
function='0x5'/&gt;&lt;br&gt;      &lt;/controller&gt;&lt;br&gt;      &lt;controller \
type='pci' index='7' model='pcie-root-port'&gt;&lt;br&gt;         \
&lt;model name='pcie-root-port'/&gt;&lt;br&gt;         &lt;target \
chassis='7' port='0x16'/&gt;&lt;br&gt;         &lt;address \
type='pci' domain='0x0000' bus='0x00' slot='0x02' \
function='0x6'/&gt;&lt;br&gt;      &lt;/controller&gt;&lt;br&gt;      &lt;controller \
type='pci' index='8' model='pcie-root-port'&gt;&lt;br&gt;         \
&lt;model name='pcie-root-port'/&gt;&lt;br&gt;         &lt;target \
chassis='8' port='0x17'/&gt;&lt;br&gt;         &lt;address \
type='pci' domain='0x0000' bus='0x00' slot='0x02' \
function='0x7'/&gt;&lt;br&gt;      &lt;/controller&gt;&lt;br&gt;      &lt;controller \
type='virtio-serial' index='0'&gt;&lt;br&gt;         &lt;address \
type='pci' domain='0x0000' bus='0x03' slot='0x00' \
function='0x0'/&gt;&lt;br&gt;      &lt;/controller&gt;&lt;br&gt;      &lt;interface \
type='bridge'&gt;&lt;br&gt;         &lt;mac \
address='52:54:00:dd:a4:5c'/&gt;&lt;br&gt;         &lt;source \
bridge='ovirt'/&gt;&lt;br&gt;         &lt;model type='virtio'/&gt;&lt;br&gt;      \
&lt;address type='pci' domain='0x0000' bus='0x01' \
slot='0x00' function='0x0'/&gt;&lt;br&gt;      &lt;/interface&gt;&lt;br&gt;      \
&lt;serial type='pty'&gt;&lt;br&gt;         &lt;target type='isa-serial' \
port='0'&gt;&lt;br&gt;            &lt;model name='isa-serial'/&gt;&lt;br&gt;      \
&lt;/target&gt;&lt;br&gt;      &lt;/serial&gt;&lt;br&gt;      &lt;console \
type='pty'&gt;&lt;br&gt;         &lt;target type='serial' \
port='0'/&gt;&lt;br&gt;      &lt;/console&gt;&lt;br&gt;      &lt;channel \
type='unix'&gt;&lt;br&gt;         &lt;target type='virtio' \
name='org.qemu.guest_agent.0'/&gt;&lt;br&gt;         &lt;address \
type='virtio-serial' controller='0' bus='0' \
port='1'/&gt;&lt;br&gt;      &lt;/channel&gt;&lt;br&gt;      &lt;channel \
type='spicevmc'&gt;&lt;br&gt;         &lt;target type='virtio' \
name='com.redhat.spice.0'/&gt;&lt;br&gt;         &lt;address \
type='virtio-serial' controller='0' bus='0' \
port='2'/&gt;&lt;br&gt;      &lt;/channel&gt;&lt;br&gt;      &lt;input \
type='tablet' bus='usb'&gt;&lt;br&gt;         &lt;address \
type='usb' bus='0' port='1'/&gt;&lt;br&gt;      &lt;/input&gt;&lt;br&gt;  \
&lt;input type='mouse' bus='ps2'/&gt;&lt;br&gt;      &lt;input \
type='keyboard' bus='ps2'/&gt;&lt;br&gt;      &lt;graphics \
type='spice' autoport='yes'&gt;&lt;br&gt;         &lt;listen \
type='address'/&gt;&lt;br&gt;      &lt;/graphics&gt;&lt;br&gt;      &lt;sound \
model='ich9'&gt;&lt;br&gt;         &lt;address type='pci' \
domain='0x0000' bus='0x00' slot='0x1b' \
function='0x0'/&gt;&lt;br&gt;      &lt;/sound&gt;&lt;br&gt;      &lt;video&gt;&lt;br&gt;        \
&lt;model type='qxl' ram='65536' vram='65536' \
vgamem='16384' heads='1' primary='yes'/&gt;&lt;br&gt;         \
&lt;address type='pci' domain='0x0000' bus='0x00' \
slot='0x01' function='0x0'/&gt;&lt;br&gt;      &lt;/video&gt;&lt;br&gt;      \
&lt;redirdev bus='usb' type='spicevmc'&gt;&lt;br&gt;         &lt;address \
type='usb' bus='0' port='2'/&gt;&lt;br&gt;      \
&lt;/redirdev&gt;&lt;br&gt;      &lt;redirdev bus='usb' \
type='spicevmc'&gt;&lt;br&gt;         &lt;address type='usb' \
bus='0' port='3'/&gt;&lt;br&gt;      &lt;/redirdev&gt;&lt;br&gt;      \
&lt;memballoon model='virtio'&gt;&lt;br&gt;         &lt;address type='pci' \
domain='0x0000' bus='0x06' slot='0x00' \
function='0x0'/&gt;&lt;br&gt;      &lt;/memballoon&gt;&lt;br&gt;      &lt;rng \
model='virtio'&gt;&lt;br&gt;         &lt;backend \
model='random'&gt;/dev/urandom&lt;/backend&gt;&lt;br&gt;         &lt;address \
type='pci' domain='0x0000' bus='0x07' slot='0x00' \
function='0x0'/&gt;&lt;br&gt;      &lt;/rng&gt;&lt;br&gt;   \
&lt;/devices&gt;&lt;br&gt;&lt;/domain&gt;&lt;br&gt;&lt;/div&gt;&lt;div class="gmail_default" \
style="font-size:small;color:#000000"&gt;&lt;br&gt;&lt;/div&gt;&lt;div class="gmail_default" \
style="font-size:small;color:#000000"&gt;&lt;br&gt;&lt;/div&gt;&lt;div class="gmail_default" \
style="font-size:small;color:#000000"&gt;vm 2:&lt;/div&gt;&lt;div class="gmail_default" \
style="font-size:small;color:#000000"&gt;&lt;br&gt;&lt;/div&gt;&lt;div class="gmail_default" \
style="font-size:small;color:#000000"&gt;&lt;domain type='kvm'&gt;&lt;br&gt;   \
&lt;name&gt;voodoo5&lt;/name&gt;&lt;br&gt;   \
&lt;uuid&gt;8ded8ea2-6524-4fc0-94f6-31667338a5f2&lt;/uuid&gt;&lt;br&gt;   \



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190819195251</emailId><senderName>reza shahriari</senderName><senderEmail>reza_shahriari@yahoo.ca</senderEmail><timestampReceived>2019-08-19 19:52:51-0400</timestampReceived><subject>[libvirt-users] Compiling Libvirt on Windows for Hyper V support</subject><body>

[Attachment #2 (multipart/alternative)]


Hi, 

I am trying to compile Libvirt from the source code on windows using msys2 but keep \
hitting issues while running `./configure`. 

….
&gt; checking whether C compiler handles -Wno-suggest-attribute=pure… yes
&gt; checking whether C compiler handles -Wno-suggest-attribute=const... yes
&gt; checking for how to force completely read-only GOT table…
&gt; checking for how to avoid indirect lib deps... -Wl,--no-copy-dt-needed-entries
&gt; checking for how to stop undefined symbols at link time…
&gt; checking sys/acl.h usability... no                                                  \
&gt;  checking sys/acl.h presence… no
&gt; checking for sys/acl.h… no
&gt; checking for aa_change_profile in -lapparmor… no
&gt; checking for pthread_mutexattr_init… no
&gt; checking for pthread.h... (cached) no
&gt; configure: error: A pthreads impl is required for building libvirt 
...

Does anyone have any experience compiling Libvirt on a windows machine ? Specifically \
I am trying to enable hyper-v domain on Libvirt.

Thanks,

Reza Shahriari


[Attachment #5 (unknown)]

&lt;html&gt;&lt;head&gt;&lt;meta http-equiv="Content-Type" content="text/html; \
charset=utf-8"&gt;&lt;/head&gt;&lt;body style="word-wrap: break-word; -webkit-nbsp-mode: space; \
line-break: after-white-space;" class=""&gt;Hi, &lt;div class=""&gt;&lt;br \
class=""&gt;&lt;/div&gt;&lt;div class=""&gt;I am trying to compile Libvirt from the source code on \
windows using msys2 but keep hitting issues while running \
`./configure`. &lt;/div&gt;&lt;div class=""&gt;&lt;br class=""&gt;&lt;/div&gt;&lt;div class=""&gt;&lt;div \
class=""&gt;….&lt;/div&gt;&lt;div class=""&gt;&lt;blockquote type="cite" class=""&gt;&lt;span style="color: \
rgb(34, 34, 34); font-family: Arial, Helvetica, sans-serif; font-size: small; \
font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, \
255, 255);" class=""&gt;checking whether C compiler handles \
-Wno-suggest-attribute=pure… yes&lt;/span&gt;&lt;/blockquote&gt;&lt;blockquote type="cite" \
class=""&gt;&lt;span style="color: rgb(34, 34, 34); font-family: Arial, Helvetica, \
sans-serif; font-size: small; font-variant-ligatures: normal; orphans: 2; widows: 2; \
background-color: rgb(255, 255, 255);" class=""&gt; checking whether C compiler \
handles -Wno-suggest-attribute=const..&lt;/span&gt;&lt;wbr style="color: rgb(34, 34, 34); \
font-family: Arial, Helvetica, sans-serif; font-size: small; font-variant-ligatures: \
normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);" class=""&gt;&lt;span \
style="color: rgb(34, 34, 34); font-family: Arial, Helvetica, sans-serif; font-size: \
small; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: \
rgb(255, 255, 255);" class=""&gt;. yes&lt;/span&gt;&lt;/blockquote&gt;&lt;blockquote type="cite" \
class=""&gt;&lt;span style="color: rgb(34, 34, 34); font-family: Arial, Helvetica, \
sans-serif; font-size: small; font-variant-ligatures: normal; orphans: 2; widows: 2; \
background-color: rgb(255, 255, 255);" class=""&gt;checking for how to force completely \
read-only GOT table…&lt;/span&gt;&lt;/blockquote&gt;&lt;blockquote type="cite" class=""&gt;&lt;span \
style="color: rgb(34, 34, 34); font-family: Arial, Helvetica, sans-serif; font-size: \
small; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: \
rgb(255, 255, 255);" class=""&gt;checking for how to avoid indirect lib deps... \
-Wl,--no-copy-dt-needed-&lt;/span&gt;&lt;wbr style="color: rgb(34, 34, 34); font-family: \
Arial, Helvetica, sans-serif; font-size: small; font-variant-ligatures: normal; \
orphans: 2; widows: 2; background-color: rgb(255, 255, 255);" class=""&gt;&lt;span \
style="color: rgb(34, 34, 34); font-family: Arial, Helvetica, sans-serif; font-size: \
small; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: \
rgb(255, 255, 255);" class=""&gt;entries&lt;/span&gt;&lt;/blockquote&gt;&lt;blockquote type="cite" \
class=""&gt;&lt;span style="color: rgb(34, 34, 34); font-family: Arial, Helvetica, \
sans-serif; font-size: small; font-variant-ligatures: normal; orphans: 2; widows: 2; \
background-color: rgb(255, 255, 255);" class=""&gt;checking for how to stop undefined \
symbols at link time…&lt;/span&gt;&lt;/blockquote&gt;&lt;blockquote type="cite" class=""&gt;&lt;span \
style="color: rgb(34, 34, 34); font-family: Arial, Helvetica, sans-serif; font-size: \
small; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: \
rgb(255, 255, 255);" class=""&gt;checking sys/acl.h usability... no       \
                        \
                        \
                        \
       &lt;/span&gt;&lt;/blockquote&gt;&lt;blockquote type="cite" class=""&gt;&lt;span \
style="color: rgb(34, 34, 34); font-family: Arial, Helvetica, sans-serif; font-size: \
small; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: \
rgb(255, 255, 255);" class=""&gt;checking sys/acl.h presence… \
no&lt;/span&gt;&lt;/blockquote&gt;&lt;blockquote type="cite" class=""&gt;&lt;span style="color: rgb(34, \
34, 34); font-family: Arial, Helvetica, sans-serif; font-size: small; \
font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, \
255, 255);" class=""&gt;checking for sys/acl.h… no&lt;/span&gt;&lt;/blockquote&gt;&lt;blockquote \
type="cite" class=""&gt;&lt;span style="color: rgb(34, 34, 34); font-family: Arial, \
Helvetica, sans-serif; font-size: small; font-variant-ligatures: normal; orphans: 2; \
widows: 2; background-color: rgb(255, 255, 255);" class=""&gt;checking for \
aa_change_profile in -lapparmor… no&lt;/span&gt;&lt;/blockquote&gt;&lt;blockquote type="cite" \
class=""&gt;&lt;span style="color: rgb(34, 34, 34); font-family: Arial, Helvetica, \
sans-serif; font-size: small; font-variant-ligatures: normal; orphans: 2; widows: 2; \
background-color: rgb(255, 255, 255);" class=""&gt;checking for \
pthread_mutexattr_init… no&lt;/span&gt;&lt;/blockquote&gt;&lt;blockquote type="cite" \
class=""&gt;&lt;span style="color: rgb(34, 34, 34); font-family: Arial, Helvetica, \
sans-serif; font-size: small; font-variant-ligatures: normal; orphans: 2; widows: 2; \
background-color: rgb(255, 255, 255);" class=""&gt;checking for pthread.h... (cached) \
no&lt;/span&gt;&lt;/blockquote&gt;&lt;blockquote type="cite" class=""&gt;&lt;span style="color: rgb(34, \
34, 34); font-family: Arial, Helvetica, sans-serif; font-size: small; \
font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, \
255, 255);" class=""&gt;configure: error: A pthreads impl is required for building \
libvirt &lt;/span&gt;&lt;/blockquote&gt;...&lt;/div&gt;&lt;/div&gt;&lt;div class=""&gt;&lt;br class=""&gt;&lt;/div&gt;&lt;div \
class=""&gt;Does anyone have any experience compiling Libvirt on a windows machine ? \
Specifically I am trying to enable hyper-v domain on Libvirt.&lt;/div&gt;&lt;div class=""&gt;&lt;br \
class=""&gt;&lt;/div&gt;&lt;div class=""&gt;Thanks,&lt;/div&gt;&lt;div class=""&gt;&lt;br class=""&gt;&lt;/div&gt;&lt;div \
class=""&gt;Reza Shahriari&lt;/div&gt;&lt;div class=""&gt;&lt;br class=""&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190821203721</emailId><senderName>Ihar Hrachyshka</senderName><senderEmail>ihrachys@redhat.com</senderEmail><timestampReceived>2019-08-21 20:37:21-0400</timestampReceived><subject>[libvirt-users] RLIMIT_MEMLOCK in container environment</subject><body>

Hi all,

KubeVirt uses libvirtd to manage qemu VMs represented as Kubernetes
API resources. In this case, libvirtd is running inside an
unprivileged pod, with some host mounts / capabilities added to the
pod, needed by libvirtd and other services.

One of the capabilities libvirtd requires for successful startup
inside a pod is SYS_RESOURCE. This capability is used to adjust
RLIMIT_MEMLOCK ulimit value depending on devices attached to the
managed guest, both on startup and during hotplug. AFAIU the need to
lock the memory is to avoid pages being pushed out from RAM into swap.

In KubeVirt world, several libvirtd assumptions do not apply:

1. In Kubernetes environments, swap is usually disabled. (e.g. kubeadm
official deployment tool won't even initialize a cluster until you
disable it.) This is documented in lots of places, f.e.:
https://docs.platform9.com/kubernetes/disabling-swap-kubernetes-node/
(note: while it's vendor docs, regardless it's well known community
recommendation.)

2. hotplug is not supported. Domain definition is stable through its
whole lifetime.

We are working on a series of patches that would remove the need for
SYS_RESOURCE capability from the pod running libvirtd:
https://github.com/kubevirt/kubevirt/pull/2584

We achieve it by making another, *privileged* component to set
RLIMIT_MEMLOCK for libvirtd process using prlimit() syscall, using the
value that is higher than the final value libvirtd uses with
setrlimit() [Linux kernel will allow to lower the value without the
capability.] Since the formula to calculate the actual MEMLOCK value
is embedded in libvirt and is not simple to reproduce outside, we pick
the upper limit value set for libvirtd process quite conservatively
even if ideally we would use the exact same value as libvirtd would
do. The estimation code is here:
https://github.com/kubevirt/kubevirt/pull/2584/files#diff-6edccf5f0d11c09e7025d4fae3fa6dc6

While the solution works, there are some drawbacks:

1. the value we use for prlimit() is not exactly equal to the final
value used by libvirtd;
2. we are doing all this work in environment that is not prone to
issues because of disabled swap space.

I believe we would benefit from one of the following features on
libvirt side (or both):

a) expose the memory lock value calculated by libvirtd through libvirt
ABI so that we can use it when calling prlimit() on libvirtd process;
b) allow to disable setrlimit() calls via libvirtd config file knob or
domain definition.

Do you think it would be acceptable to have one of these enhancements
in libvirtd, or perhaps both, for degenerate cases like KubeVirt?

Thanks for attention,
Ihar

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190826181437</emailId><senderName>Kaushal Shriyan</senderName><senderEmail>kaushalshriyan@gmail.com</senderEmail><timestampReceived>2019-08-26 18:14:37-0400</timestampReceived><subject>[libvirt-users] CPU and Memory requirements for host OS ( CentOS 7.6) on Dell Poweredge R630 server</subject><body>

[Attachment #2 (multipart/alternative)]


Hi,

I am running Dell R630 Poweredge 1U with 32 cores vCPU's and 96 GB
RAM. What should be the minimum numbers of CPU cores and memory that
should be reserved for host OS (CentOS 7.6) and the remaining CPU
cores and memory resources to be allocated for Guest OS?

I look forward to hearing from you and thanks in advance.

Best Regards,

Kaushal

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;Hi,&lt;br&gt;&lt;br&gt;I am running Dell R630 Poweredge 1U with 32 cores \
vCPU's and 96 GB&lt;br&gt;RAM. What should be the minimum numbers of CPU cores and \
memory that&lt;br&gt;should be reserved for host OS (CentOS 7.6) and the remaining \
CPU&lt;br&gt;cores and memory resources to be allocated for Guest OS?&lt;br&gt;&lt;br&gt;I look forward \
to hearing from you and thanks in advance.&lt;br&gt;&lt;br&gt;Best Regards,&lt;br&gt;&lt;br&gt;Kaushal&lt;div \
class="gmail-yj6qo"&gt;&lt;/div&gt;&lt;br class="gmail-Apple-interchange-newline"&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190829132748</emailId><senderName></senderName><senderEmail>ofoerster</senderEmail><timestampReceived>2019-08-29 13:27:48-0400</timestampReceived><subject>[libvirt-users] virsh list -all zombies</subject><body>

Hello Community,
I have a problem with two deleted KVMs. So far we have done everything 
that is necessary:

virsh undefine [kvm-name] --managed-save --snapshots-metadata 
--remove-all-storage --nvram
virsh destroy [kvm-name]

and we delete the xml-File and the .img.

If we now call "virsh list -all", then the machines are also gone. 
However, after a restart of libvirtd they reappear in the list, like 
zombies.

What did we do wrong? Or is that even a bug?

Kind regards,
Oliver


_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190827073455</emailId><senderName>Sven Schwedas</senderName><senderEmail>sven.schwedas@tao.at</senderEmail><timestampReceived>2019-08-27 07:34:55-0400</timestampReceived><subject>Re: [libvirt-users] CPU and Memory requirements for host OS ( CentOS 7.6) on Dell Poweredge R630 ser</subject><body>

[Attachment #2 (multipart/signed)]

[Attachment #4 (multipart/mixed)]


That depends on what you plan on doing with the host. IIRC live VM
migrations use host CPU time, and depending on transport can use quite a
bit of CPU (for encryption/compression). Same with storage, if you have
a ZFS/btrfs/LVM2/RAID/encryption setup that requires a lot of CPU,
that's also counted against host CPU time.

libvirtd itself doesn't need all that much resources for itself, that
said. 2 cores and 2GB RAM should suffice as baseline? Plus whatever you
need to meet above needs, if any apply.

On 26.08.19 20:02, Kaushal Shriyan wrote:
&gt; Hi,
&gt; 
&gt; I am running Dell R630 Poweredge 1U with 32 cores vCPU's and 96 GB
&gt; RAM. What should be the minimum numbers of CPU cores and memory that
&gt; should be reserved for host OS (CentOS 7.6) and the remaining CPU
&gt; cores and memory resources to be allocated for Guest OS?
&gt; 
&gt; I look forward to hearing from you and thanks in advance.
&gt; 
&gt; Best Regards,
&gt; 
&gt; Kaushal
&gt; 
&gt; 
&gt; _______________________________________________
&gt; libvirt-users mailing list
&gt; libvirt-users@redhat.com
&gt; https://www.redhat.com/mailman/listinfo/libvirt-users
&gt; 

-- 
Mit freundlichen Grüßen, / Best Regards,
Sven Schwedas, Systemadministrator
✉ sven.schwedas@tao.at | ☎ +43 680 301 7167
TAO Digital   | Teil der TAO Beratungs- &amp; Management GmbH
Lendplatz 45  | FN 213999f/Klagenfurt, FB-Gericht Villach
A8020 Graz    | https://www.tao-digital.at


["signature.asc" (application/pgp-signature)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190827163150</emailId><senderName>Peter Crowther</senderName><senderEmail>peter.crowther@melandra.com</senderEmail><timestampReceived>2019-08-27 16:31:50-0400</timestampReceived><subject>Re: [libvirt-users] CPU and Memory requirements for host OS ( CentOS 7.6) on Dell Poweredge R630 ser</subject><body>

*may or may not be* enough - a huge amount depends on your workloads.
As ever, watching the available memory and how much CPU is in use in
"top" will give you a better idea of how your infrastructure is
behaving, as will watching the server charts in virt-manager if it's
available.  For example, for some of our workloads, we can overcommit
memory by a factor of two (so run nearly 200G of virtual server RAM on
a 96G machine) and overcommit CPU by nearly a factor of three, and
everything's fine.  For other workloads, they need to get all the
resources we promised them.

Sorry not to give an exact answer; it's a rather similar situation to
"is this machine big enough to run my database server?" but with more
variables.

- Peter

On Tue, 27 Aug 2019 at 17:20, Kaushal Shriyan &lt;kaushalshriyan@gmail.com&gt; wrote:
&gt; 
&gt; 
&gt; On Tue, Aug 27, 2019 at 1:05 PM Sven Schwedas &lt;sven.schwedas@tao.at&gt; wrote:
&gt; &gt; 
&gt; &gt; That depends on what you plan on doing with the host. IIRC live VM
&gt; &gt; migrations use host CPU time, and depending on transport can use quite a
&gt; &gt; bit of CPU (for encryption/compression). Same with storage, if you have
&gt; &gt; a ZFS/btrfs/LVM2/RAID/encryption setup that requires a lot of CPU,
&gt; &gt; that's also counted against host CPU time.
&gt; &gt; 
&gt; &gt; libvirtd itself doesn't need all that much resources for itself, that
&gt; &gt; said. 2 cores and 2GB RAM should suffice as baseline? Plus whatever you
&gt; &gt; need to meet above needs, if any apply.
&gt; &gt; 
&gt; 
&gt; Hi Sven,
&gt; 
&gt; So for host OS, 2 vCPU's with 2GB Memory is enough. Please comment. I have spawned \
&gt; 10 KVM based VM's with CentOS 7.6 on the bare metal server (Dell R630 Poweredge 1U \
&gt; with 32 cores vCPU's and 96 GB RAM.) Is there a way to find out the system \
&gt; resources utilization for all the 10 VM's? 
&gt; Best Regards,
&gt; _______________________________________________
&gt; libvirt-users mailing list
&gt; libvirt-users@redhat.com
&gt; https://www.redhat.com/mailman/listinfo/libvirt-users

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20190822092421</emailId><senderName>Daniel =?utf-8?B?UC4gQmVycmFuZ8Op?=</senderName><senderEmail>berrange@redhat.com</senderEmail><timestampReceived>2019-08-22 09:24:21-0400</timestampReceived><subject>Re: [libvirt-users] RLIMIT_MEMLOCK in container environment</subject><body>

On Wed, Aug 21, 2019 at 01:37:21PM -0700, Ihar Hrachyshka wrote:
&gt; Hi all,
&gt; 
&gt; KubeVirt uses libvirtd to manage qemu VMs represented as Kubernetes
&gt; API resources. In this case, libvirtd is running inside an
&gt; unprivileged pod, with some host mounts / capabilities added to the
&gt; pod, needed by libvirtd and other services.
&gt; 
&gt; One of the capabilities libvirtd requires for successful startup
&gt; inside a pod is SYS_RESOURCE. This capability is used to adjust
&gt; RLIMIT_MEMLOCK ulimit value depending on devices attached to the
&gt; managed guest, both on startup and during hotplug. AFAIU the need to
&gt; lock the memory is to avoid pages being pushed out from RAM into swap.

Libvirt shouldn't set RLIMIT_MEMLOCK by default, unless there's
something in the XML that requires it - one of

 - hard limit memory value is present
 - host PCI device passthrough is requested
 - memory is locked into RAM

which of these are you actually using ?

Regards,
Daniel
-- 
|: https://berrange.com      -o-    https://www.flickr.com/photos/dberrange :|
|: https://libvirt.org         -o-            https://fstop138.berrange.com :|
|: https://entangle-photo.org    -o-    https://www.instagram.com/dberrange :|

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190822145625</emailId><senderName>Ihar Hrachyshka</senderName><senderEmail>ihrachys@redhat.com</senderEmail><timestampReceived>2019-08-22 14:56:25-0400</timestampReceived><subject>Re: [libvirt-users] RLIMIT_MEMLOCK in container environment</subject><body>

On Thu, Aug 22, 2019 at 2:24 AM Daniel P. Berrangé &lt;berrange@redhat.com&gt; wrote:
&gt;
&gt; On Wed, Aug 21, 2019 at 01:37:21PM -0700, Ihar Hrachyshka wrote:
&gt; &gt; Hi all,
&gt; &gt;
&gt; &gt; KubeVirt uses libvirtd to manage qemu VMs represented as Kubernetes
&gt; &gt; API resources. In this case, libvirtd is running inside an
&gt; &gt; unprivileged pod, with some host mounts / capabilities added to the
&gt; &gt; pod, needed by libvirtd and other services.
&gt; &gt;
&gt; &gt; One of the capabilities libvirtd requires for successful startup
&gt; &gt; inside a pod is SYS_RESOURCE. This capability is used to adjust
&gt; &gt; RLIMIT_MEMLOCK ulimit value depending on devices attached to the
&gt; &gt; managed guest, both on startup and during hotplug. AFAIU the need to
&gt; &gt; lock the memory is to avoid pages being pushed out from RAM into swap.
&gt;
&gt; Libvirt shouldn't set RLIMIT_MEMLOCK by default, unless there's
&gt; something in the XML that requires it - one of

You are right, sorry. We add SYS_RESOURCE only for particular domains.

&gt;
&gt;  - hard limit memory value is present
&gt;  - host PCI device passthrough is requested

We are using passthrough to pass SR-IOV NIC VFs into guests. We also
plan to do the same for GPUs in the near future.

&gt;  - memory is locked into RAM
&gt;
&gt; which of these are you actually using ?
&gt;
&gt; Regards,
&gt; Daniel
&gt; --
&gt; |: https://berrange.com      -o-    https://www.flickr.com/photos/dberrange :|
&gt; |: https://libvirt.org         -o-            https://fstop138.berrange.com :|
&gt; |: https://entangle-photo.org    -o-    https://www.instagram.com/dberrange :|

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190822190106</emailId><senderName>Laine Stump</senderName><senderEmail>laine@redhat.com</senderEmail><timestampReceived>2019-08-22 19:01:06-0400</timestampReceived><subject>Re: [libvirt-users] RLIMIT_MEMLOCK in container environment</subject><body>

On 8/22/19 10:56 AM, Ihar Hrachyshka wrote:
&gt; On Thu, Aug 22, 2019 at 2:24 AM Daniel P. Berrangé &lt;berrange@redhat.com&gt; wrote:
&gt;&gt;
&gt;&gt; On Wed, Aug 21, 2019 at 01:37:21PM -0700, Ihar Hrachyshka wrote:
&gt;&gt;&gt; Hi all,
&gt;&gt;&gt;
&gt;&gt;&gt; KubeVirt uses libvirtd to manage qemu VMs represented as Kubernetes
&gt;&gt;&gt; API resources. In this case, libvirtd is running inside an
&gt;&gt;&gt; unprivileged pod, with some host mounts / capabilities added to the
&gt;&gt;&gt; pod, needed by libvirtd and other services.
&gt;&gt;&gt;
&gt;&gt;&gt; One of the capabilities libvirtd requires for successful startup
&gt;&gt;&gt; inside a pod is SYS_RESOURCE. This capability is used to adjust
&gt;&gt;&gt; RLIMIT_MEMLOCK ulimit value depending on devices attached to the
&gt;&gt;&gt; managed guest, both on startup and during hotplug. AFAIU the need to
&gt;&gt;&gt; lock the memory is to avoid pages being pushed out from RAM into swap.


I recall successfully testing GPU assignment from an unprivileged 
libvirtd several years ago by setting a high enough ulimit for the uid 
used to run libvirtd in advance (. I think we check if the current 
setting is high enough, and don't try to set it unless we think we need to.

If I understand you correctly, you're saying that in your case it's okay 
for the memlock limit to be lower than we try to set it to, because swap 
is disabled anyway, is that correct?

&gt;&gt;
&gt;&gt; Libvirt shouldn't set RLIMIT_MEMLOCK by default, unless there's
&gt;&gt; something in the XML that requires it - one of
&gt; 
&gt; You are right, sorry. We add SYS_RESOURCE only for particular domains.
&gt; 
&gt;&gt;
&gt;&gt;   - hard limit memory value is present
&gt;&gt;   - host PCI device passthrough is requested
&gt; 
&gt; We are using passthrough 

(If you want to make Alex happy, use the term "VFIO device assignment" 
rather than passthrough :-).)

&gt; to pass SR-IOV NIC VFs into guests. We also
&gt; plan to do the same for GPUs in the near future.

 &gt;&gt;&gt; I believe we would benefit from one of the following features on
 &gt;&gt;&gt; libvirt side (or both):
 &gt;&gt;&gt;
 &gt;&gt;&gt; a) expose the memory lock value calculated by libvirtd through
 &gt;&gt;&gt; libvirt ABI so that we can use it when calling prlimit() on libvirtd
 &gt;&gt;&gt; process;
 &gt;&gt;&gt; b) allow to disable setrlimit() calls via libvirtd config file knob
 &gt;&gt;&gt; or domain definition.

(b) sounds much more reasonable, as long as qemu doesn't complain (I 
don't know whether or not it checks)

Slightly related to this - I'm currently working on patches to avoid 
making any ioctl calls that would fail in an unprivileged libvirtd when 
using tap/macvtap devices. ATM, I'm doing this by adding an attribute 
"unmanaged='yes'" to the interface &lt;target&gt; element. The idea is that if 
someone sets unmanaged='yes', they're stating that the caller (i.e. 
kubevirt) is responsible for all device setup, and that libvirt should 
just use it without further setup. A similar approach could be applied 
to hostdev devices - if unmanaged is set, we assume that the caller has 
done everything to make the associated device usable.

(Of course this all makes me realize the inanity of adding a &lt;target 
dev='blah' unmanaged='yes'/&gt; for interfaces when hostdevs already have 
&lt;hostdev managed='yes'&gt; and &lt;interface type='hostdev' managed='yes'&gt;. So 
to prevent setting the locklimit for hostdev, would we make a new 
setting like &lt;hostdev managed='no-never-not-even-a-tiny-bit'&gt;? Sigh. I 
*hate* trying to make config consistent :-/)

(alternately, we could just automatically fail the attempt to set the 
lock limit in a graceful manner and allow the guest to continue)

BTW, I'm guessing that you use &lt;hostdev&gt; to assign the SRIOV VFs rather 
than &lt;interface type='hostdev'&gt;, correct? The latter would require that 
you have enough capabilities to set MAC addresses on the VFs (that's the 
entire point of using &lt;interface type='hostdev'&gt; instead of plain &lt;hostdev&gt;)

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190822203953</emailId><senderName>Ihar Hrachyshka</senderName><senderEmail>ihrachys@redhat.com</senderEmail><timestampReceived>2019-08-22 20:39:53-0400</timestampReceived><subject>Re: [libvirt-users] RLIMIT_MEMLOCK in container environment</subject><body>

On Thu, Aug 22, 2019 at 12:01 PM Laine Stump &lt;laine@redhat.com&gt; wrote:
&gt;
&gt; On 8/22/19 10:56 AM, Ihar Hrachyshka wrote:
&gt; &gt; On Thu, Aug 22, 2019 at 2:24 AM Daniel P. Berrangé &lt;berrange@redhat.com&gt; wrote:
&gt; &gt;&gt;
&gt; &gt;&gt; On Wed, Aug 21, 2019 at 01:37:21PM -0700, Ihar Hrachyshka wrote:
&gt; &gt;&gt;&gt; Hi all,
&gt; &gt;&gt;&gt;
&gt; &gt;&gt;&gt; KubeVirt uses libvirtd to manage qemu VMs represented as Kubernetes
&gt; &gt;&gt;&gt; API resources. In this case, libvirtd is running inside an
&gt; &gt;&gt;&gt; unprivileged pod, with some host mounts / capabilities added to the
&gt; &gt;&gt;&gt; pod, needed by libvirtd and other services.
&gt; &gt;&gt;&gt;
&gt; &gt;&gt;&gt; One of the capabilities libvirtd requires for successful startup
&gt; &gt;&gt;&gt; inside a pod is SYS_RESOURCE. This capability is used to adjust
&gt; &gt;&gt;&gt; RLIMIT_MEMLOCK ulimit value depending on devices attached to the
&gt; &gt;&gt;&gt; managed guest, both on startup and during hotplug. AFAIU the need to
&gt; &gt;&gt;&gt; lock the memory is to avoid pages being pushed out from RAM into swap.
&gt;
&gt;
&gt; I recall successfully testing GPU assignment from an unprivileged
&gt; libvirtd several years ago by setting a high enough ulimit for the uid
&gt; used to run libvirtd in advance (. I think we check if the current
&gt; setting is high enough, and don't try to set it unless we think we need to.
&gt;

The PR I linked to in the original email does just that: it starts
libvirtd; then, if domain is going to use VFIO, sets ulimit of
libvirtd process to VM memory size + 1Gb (mimicking libvirt code) +
256Mb (to stay conservative) using prlimit() syscall; then defines the
domain.

&gt; If I understand you correctly, you're saying that in your case it's okay
&gt; for the memlock limit to be lower than we try to set it to, because swap
&gt; is disabled anyway, is that correct?
&gt;

I'm honestly not exactly sure about the reason why we need to set the
limit, but I assume it's because of swap. I can be totally confused on
that part though.

&gt; &gt;&gt;
&gt; &gt;&gt; Libvirt shouldn't set RLIMIT_MEMLOCK by default, unless there's
&gt; &gt;&gt; something in the XML that requires it - one of
&gt; &gt;
&gt; &gt; You are right, sorry. We add SYS_RESOURCE only for particular domains.
&gt; &gt;
&gt; &gt;&gt;
&gt; &gt;&gt;   - hard limit memory value is present
&gt; &gt;&gt;   - host PCI device passthrough is requested
&gt; &gt;
&gt; &gt; We are using passthrough
&gt;
&gt; (If you want to make Alex happy, use the term "VFIO device assignment"
&gt; rather than passthrough :-).)
&gt;

Not sure who Alex is but I'll try to make everyone happy! :)

&gt; &gt; to pass SR-IOV NIC VFs into guests. We also
&gt; &gt; plan to do the same for GPUs in the near future.
&gt;
&gt;  &gt;&gt;&gt; I believe we would benefit from one of the following features on
&gt;  &gt;&gt;&gt; libvirt side (or both):
&gt;  &gt;&gt;&gt;
&gt;  &gt;&gt;&gt; a) expose the memory lock value calculated by libvirtd through
&gt;  &gt;&gt;&gt; libvirt ABI so that we can use it when calling prlimit() on libvirtd
&gt;  &gt;&gt;&gt; process;
&gt;  &gt;&gt;&gt; b) allow to disable setrlimit() calls via libvirtd config file knob
&gt;  &gt;&gt;&gt; or domain definition.
&gt;
&gt; (b) sounds much more reasonable, as long as qemu doesn't complain (I
&gt; don't know whether or not it checks)
&gt;
&gt; Slightly related to this - I'm currently working on patches to avoid
&gt; making any ioctl calls that would fail in an unprivileged libvirtd when
&gt; using tap/macvtap devices. ATM, I'm doing this by adding an attribute
&gt; "unmanaged='yes'" to the interface &lt;target&gt; element. The idea is that if
&gt; someone sets unmanaged='yes', they're stating that the caller (i.e.
&gt; kubevirt) is responsible for all device setup, and that libvirt should
&gt; just use it without further setup. A similar approach could be applied
&gt; to hostdev devices - if unmanaged is set, we assume that the caller has
&gt; done everything to make the associated device usable.
&gt;
&gt; (Of course this all makes me realize the inanity of adding a &lt;target
&gt; dev='blah' unmanaged='yes'/&gt; for interfaces when hostdevs already have
&gt; &lt;hostdev managed='yes'&gt; and &lt;interface type='hostdev' managed='yes'&gt;. So
&gt; to prevent setting the locklimit for hostdev, would we make a new
&gt; setting like &lt;hostdev managed='no-never-not-even-a-tiny-bit'&gt;? Sigh. I
&gt; *hate* trying to make config consistent :-/)
&gt;
&gt; (alternately, we could just automatically fail the attempt to set the
&gt; lock limit in a graceful manner and allow the guest to continue)
&gt;

If that's something maintainers feel good about, I am all for it since
it simplifies the implementation.

&gt; BTW, I'm guessing that you use &lt;hostdev&gt; to assign the SRIOV VFs rather
&gt; than &lt;interface type='hostdev'&gt;, correct? The latter would require that
&gt; you have enough capabilities to set MAC addresses on the VFs (that's the
&gt; entire point of using &lt;interface type='hostdev'&gt; instead of plain &lt;hostdev&gt;)

Yes, we use &lt;hostdev&gt; exactly because interface sets MAC address: in
kubevirt scenario, the container that is running libvirtd has its own
network namespace and doesn't have access to PF to set the VF MAC
address on. Instead, we rely on CNI plugin that is running in the root
namespace context to configure the VF interface as needed. (I've
contributed custom MAC support to SR-IOV CNI plugin very recently.)

Ihar

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190822212647</emailId><senderName>Laine Stump</senderName><senderEmail>laine@redhat.com</senderEmail><timestampReceived>2019-08-22 21:26:47-0400</timestampReceived><subject>Re: [libvirt-users] RLIMIT_MEMLOCK in container environment</subject><body>

(Adding Alex Williamson to Cc so he can correct any mistakes)

On 8/22/19 4:39 PM, Ihar Hrachyshka wrote:
&gt; On Thu, Aug 22, 2019 at 12:01 PM Laine Stump &lt;laine@redhat.com&gt; wrote:
&gt;&gt;
&gt;&gt; On 8/22/19 10:56 AM, Ihar Hrachyshka wrote:
&gt;&gt;&gt; On Thu, Aug 22, 2019 at 2:24 AM Daniel P. Berrangé &lt;berrange@redhat.com&gt; wrote:
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; On Wed, Aug 21, 2019 at 01:37:21PM -0700, Ihar Hrachyshka wrote:
&gt;&gt;&gt;&gt;&gt; Hi all,
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; KubeVirt uses libvirtd to manage qemu VMs represented as Kubernetes
&gt;&gt;&gt;&gt;&gt; API resources. In this case, libvirtd is running inside an
&gt;&gt;&gt;&gt;&gt; unprivileged pod, with some host mounts / capabilities added to the
&gt;&gt;&gt;&gt;&gt; pod, needed by libvirtd and other services.
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; One of the capabilities libvirtd requires for successful startup
&gt;&gt;&gt;&gt;&gt; inside a pod is SYS_RESOURCE. This capability is used to adjust
&gt;&gt;&gt;&gt;&gt; RLIMIT_MEMLOCK ulimit value depending on devices attached to the
&gt;&gt;&gt;&gt;&gt; managed guest, both on startup and during hotplug. AFAIU the need to
&gt;&gt;&gt;&gt;&gt; lock the memory is to avoid pages being pushed out from RAM into swap.
&gt;&gt;
&gt;&gt;
&gt;&gt; I recall successfully testing GPU assignment from an unprivileged
&gt;&gt; libvirtd several years ago by setting a high enough ulimit for the uid
&gt;&gt; used to run libvirtd in advance (. I think we check if the current
&gt;&gt; setting is high enough, and don't try to set it unless we think we need to.
&gt;&gt;
&gt; 
&gt; The PR I linked to in the original email does just that: it starts
&gt; libvirtd; then, if domain is going to use VFIO, sets ulimit of
&gt; libvirtd process to VM memory size + 1Gb (mimicking libvirt code) +
&gt; 256Mb (to stay conservative) using prlimit() syscall; then defines the
&gt; domain.

So you're making an educated guess, which is essentially what libvirt is 
doing (based on advice from other people with better information than 
us, but still a guess).

&gt; 
&gt;&gt; If I understand you correctly, you're saying that in your case it's okay
&gt;&gt; for the memlock limit to be lower than we try to set it to, because swap
&gt;&gt; is disabled anyway, is that correct?
&gt;&gt;
&gt; 
&gt; I'm honestly not exactly sure about the reason why we need to set the
&gt; limit, but I assume it's because of swap. I can be totally confused on
&gt; that part though.


What I understand from an IRC conversation with Alex just now is that 
increasing RLIMIT_MEMLOCK isn't done just to prevent any of the pages 
being swapped out. It's done because "all GPAs (Guest Physical 
Addresses) that could potentially be DMA targets need to have fixed 
mappings through the iommu, therefore all need to be allocated and 
mappings fixed [...] setting rlimit allows us to perform all the 
necessary pins within the user's locked memory limit".

So even if swap is disabled, it still needs to be done (either by 
libvirt, or by someone else who has the necessary privileges and control 
over the libvirtd process).


&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Libvirt shouldn't set RLIMIT_MEMLOCK by default, unless there's
&gt;&gt;&gt;&gt; something in the XML that requires it - one of
&gt;&gt;&gt;
&gt;&gt;&gt; You are right, sorry. We add SYS_RESOURCE only for particular domains.
&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;    - hard limit memory value is present
&gt;&gt;&gt;&gt;    - host PCI device passthrough is requested
&gt;&gt;&gt;
&gt;&gt;&gt; We are using passthrough
&gt;&gt;
&gt;&gt; (If you want to make Alex happy, use the term "VFIO device assignment"
&gt;&gt; rather than passthrough :-).)
&gt;&gt;
&gt; 
&gt; Not sure who Alex is but I'll try to make everyone happy! :)

The Alex I'm referring to is the Alex I just Cc'ed. He is the VFIO 
maintainer.


&gt;&gt;&gt; to pass SR-IOV NIC VFs into guests. We also
&gt;&gt;&gt; plan to do the same for GPUs in the near future.
&gt;&gt;
&gt;&gt;   &gt;&gt;&gt; I believe we would benefit from one of the following features on
&gt;&gt;   &gt;&gt;&gt; libvirt side (or both):
&gt;&gt;   &gt;&gt;&gt;
&gt;&gt;   &gt;&gt;&gt; a) expose the memory lock value calculated by libvirtd through
&gt;&gt;   &gt;&gt;&gt; libvirt ABI so that we can use it when calling prlimit() on libvirtd
&gt;&gt;   &gt;&gt;&gt; process;
&gt;&gt;   &gt;&gt;&gt; b) allow to disable setrlimit() calls via libvirtd config file knob
&gt;&gt;   &gt;&gt;&gt; or domain definition.
&gt;&gt;
&gt;&gt; (b) sounds much more reasonable, as long as qemu doesn't complain (I
&gt;&gt; don't know whether or not it checks)
&gt;&gt;
&gt;&gt; Slightly related to this - I'm currently working on patches to avoid
&gt;&gt; making any ioctl calls that would fail in an unprivileged libvirtd when
&gt;&gt; using tap/macvtap devices. ATM, I'm doing this by adding an attribute
&gt;&gt; "unmanaged='yes'" to the interface &lt;target&gt; element. The idea is that if
&gt;&gt; someone sets unmanaged='yes', they're stating that the caller (i.e.
&gt;&gt; kubevirt) is responsible for all device setup, and that libvirt should
&gt;&gt; just use it without further setup. A similar approach could be applied
&gt;&gt; to hostdev devices - if unmanaged is set, we assume that the caller has
&gt;&gt; done everything to make the associated device usable.
&gt;&gt;
&gt;&gt; (Of course this all makes me realize the inanity of adding a &lt;target
&gt;&gt; dev='blah' unmanaged='yes'/&gt; for interfaces when hostdevs already have
&gt;&gt; &lt;hostdev managed='yes'&gt; and &lt;interface type='hostdev' managed='yes'&gt;. So
&gt;&gt; to prevent setting the locklimit for hostdev, would we make a new
&gt;&gt; setting like &lt;hostdev managed='no-never-not-even-a-tiny-bit'&gt;? Sigh. I
&gt;&gt; *hate* trying to make config consistent :-/)
&gt;&gt;
&gt;&gt; (alternately, we could just automatically fail the attempt to set the
&gt;&gt; lock limit in a graceful manner and allow the guest to continue)
&gt;&gt;
&gt; 
&gt; If that's something maintainers feel good about, I am all for it since
&gt; it simplifies the implementation.

Well, after talking to Alex, I think that since a) libvirt only attempts 
to increase the limit after determining that it isn't already high 
enough, and b) if it isn't high enough and we can't increase it, then 
qemu is going to fail anyway, that c) we can't just fail gracefully and 
continue.

So *somebody* needs to increase the limit, and if you want libvirt to be 
unprivileged, that means it needs to be you doing the increase. And 
since the amount that libvirt increases it is just some number based on 
oral folklore (and not on a specific value we learn by querying 
somewhere), I don't think it's worthwhile figuring out some way for 
libvirt to report it via an official API - that would end up just being 
this:

"Hey, you know that number that you guys are just making a guess about 
based on some advice someone gave you once? Yeah, send me *that* number 
so I can claim to be basing my actions on real science instead of 
slightly educated voodoo! K THX BYE!" :-)


&gt; 
&gt;&gt; BTW, I'm guessing that you use &lt;hostdev&gt; to assign the SRIOV VFs rather
&gt;&gt; than &lt;interface type='hostdev'&gt;, correct? The latter would require that
&gt;&gt; you have enough capabilities to set MAC addresses on the VFs (that's the
&gt;&gt; entire point of using &lt;interface type='hostdev'&gt; instead of plain &lt;hostdev&gt;)
&gt; 
&gt; Yes, we use &lt;hostdev&gt; exactly because interface sets MAC address: in
&gt; kubevirt scenario, the container that is running libvirtd has its own
&gt; network namespace and doesn't have access to PF to set the VF MAC
&gt; address on. Instead, we rely on CNI plugin that is running in the root
&gt; namespace context to configure the VF interface as needed. (I've
&gt; contributed custom MAC support to SR-IOV CNI plugin very recently.)
&gt; 
&gt; Ihar
&gt; 

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190824070819</emailId><senderName>Dan Kenigsberg</senderName><senderEmail>danken@redhat.com</senderEmail><timestampReceived>2019-08-24 07:08:19-0400</timestampReceived><subject>Re: [libvirt-users] RLIMIT_MEMLOCK in container environment</subject><body>

[Attachment #2 (multipart/alternative)]


On Fri, 23 Aug 2019, 0:27 Laine Stump, &lt;laine@redhat.com&gt; wrote:

&gt; (Adding Alex Williamson to Cc so he can correct any mistakes)
&gt;
&gt; On 8/22/19 4:39 PM, Ihar Hrachyshka wrote:
&gt; &gt; On Thu, Aug 22, 2019 at 12:01 PM Laine Stump &lt;laine@redhat.com&gt; wrote:
&gt; &gt;&gt;
&gt; &gt;&gt; On 8/22/19 10:56 AM, Ihar Hrachyshka wrote:
&gt; &gt;&gt;&gt; On Thu, Aug 22, 2019 at 2:24 AM Daniel P. Berrangé &lt;
&gt; berrange@redhat.com&gt; wrote:
&gt; &gt;&gt;&gt;&gt;
&gt; &gt;&gt;&gt;&gt; On Wed, Aug 21, 2019 at 01:37:21PM -0700, Ihar Hrachyshka wrote:
&gt; &gt;&gt;&gt;&gt;&gt; Hi all,
&gt; &gt;&gt;&gt;&gt;&gt;
&gt; &gt;&gt;&gt;&gt;&gt; KubeVirt uses libvirtd to manage qemu VMs represented as Kubernetes
&gt; &gt;&gt;&gt;&gt;&gt; API resources. In this case, libvirtd is running inside an
&gt; &gt;&gt;&gt;&gt;&gt; unprivileged pod, with some host mounts / capabilities added to the
&gt; &gt;&gt;&gt;&gt;&gt; pod, needed by libvirtd and other services.
&gt; &gt;&gt;&gt;&gt;&gt;
&gt; &gt;&gt;&gt;&gt;&gt; One of the capabilities libvirtd requires for successful startup
&gt; &gt;&gt;&gt;&gt;&gt; inside a pod is SYS_RESOURCE. This capability is used to adjust
&gt; &gt;&gt;&gt;&gt;&gt; RLIMIT_MEMLOCK ulimit value depending on devices attached to the
&gt; &gt;&gt;&gt;&gt;&gt; managed guest, both on startup and during hotplug. AFAIU the need to
&gt; &gt;&gt;&gt;&gt;&gt; lock the memory is to avoid pages being pushed out from RAM into
&gt; swap.
&gt; &gt;&gt;
&gt; &gt;&gt;
&gt; &gt;&gt; I recall successfully testing GPU assignment from an unprivileged
&gt; &gt;&gt; libvirtd several years ago by setting a high enough ulimit for the uid
&gt; &gt;&gt; used to run libvirtd in advance (. I think we check if the current
&gt; &gt;&gt; setting is high enough, and don't try to set it unless we think we need
&gt; to.
&gt; &gt;&gt;
&gt; &gt;
&gt; &gt; The PR I linked to in the original email does just that: it starts
&gt; &gt; libvirtd; then, if domain is going to use VFIO, sets ulimit of
&gt; &gt; libvirtd process to VM memory size + 1Gb (mimicking libvirt code) +
&gt; &gt; 256Mb (to stay conservative) using prlimit() syscall; then defines the
&gt; &gt; domain.
&gt;
&gt; So you're making an educated guess, which is essentially what libvirt is
&gt; doing (based on advice from other people with better information than
&gt; us, but still a guess).
&gt;
&gt; &gt;
&gt; &gt;&gt; If I understand you correctly, you're saying that in your case it's okay
&gt; &gt;&gt; for the memlock limit to be lower than we try to set it to, because swap
&gt; &gt;&gt; is disabled anyway, is that correct?
&gt; &gt;&gt;
&gt; &gt;
&gt; &gt; I'm honestly not exactly sure about the reason why we need to set the
&gt; &gt; limit, but I assume it's because of swap. I can be totally confused on
&gt; &gt; that part though.
&gt;
&gt;
&gt; What I understand from an IRC conversation with Alex just now is that
&gt; increasing RLIMIT_MEMLOCK isn't done just to prevent any of the pages
&gt; being swapped out. It's done because "all GPAs (Guest Physical
&gt; Addresses) that could potentially be DMA targets need to have fixed
&gt; mappings through the iommu, therefore all need to be allocated and
&gt; mappings fixed [...] setting rlimit allows us to perform all the
&gt; necessary pins within the user's locked memory limit".
&gt;
&gt; So even if swap is disabled, it still needs to be done (either by
&gt; libvirt, or by someone else who has the necessary privileges and control
&gt; over the libvirtd process).
&gt;
&gt;
&gt; &gt;&gt;&gt;&gt;
&gt; &gt;&gt;&gt;&gt; Libvirt shouldn't set RLIMIT_MEMLOCK by default, unless there's
&gt; &gt;&gt;&gt;&gt; something in the XML that requires it - one of
&gt; &gt;&gt;&gt;
&gt; &gt;&gt;&gt; You are right, sorry. We add SYS_RESOURCE only for particular domains.
&gt; &gt;&gt;&gt;
&gt; &gt;&gt;&gt;&gt;
&gt; &gt;&gt;&gt;&gt;    - hard limit memory value is present
&gt; &gt;&gt;&gt;&gt;    - host PCI device passthrough is requested
&gt; &gt;&gt;&gt;
&gt; &gt;&gt;&gt; We are using passthrough
&gt; &gt;&gt;
&gt; &gt;&gt; (If you want to make Alex happy, use the term "VFIO device assignment"
&gt; &gt;&gt; rather than passthrough :-).)
&gt; &gt;&gt;
&gt; &gt;
&gt; &gt; Not sure who Alex is but I'll try to make everyone happy! :)
&gt;
&gt; The Alex I'm referring to is the Alex I just Cc'ed. He is the VFIO
&gt; maintainer.
&gt;
&gt;
&gt; &gt;&gt;&gt; to pass SR-IOV NIC VFs into guests. We also
&gt; &gt;&gt;&gt; plan to do the same for GPUs in the near future.
&gt; &gt;&gt;
&gt; &gt;&gt;   &gt;&gt;&gt; I believe we would benefit from one of the following features on
&gt; &gt;&gt;   &gt;&gt;&gt; libvirt side (or both):
&gt; &gt;&gt;   &gt;&gt;&gt;
&gt; &gt;&gt;   &gt;&gt;&gt; a) expose the memory lock value calculated by libvirtd through
&gt; &gt;&gt;   &gt;&gt;&gt; libvirt ABI so that we can use it when calling prlimit() on
&gt; libvirtd
&gt; &gt;&gt;   &gt;&gt;&gt; process;
&gt; &gt;&gt;   &gt;&gt;&gt; b) allow to disable setrlimit() calls via libvirtd config file
&gt; knob
&gt; &gt;&gt;   &gt;&gt;&gt; or domain definition.
&gt; &gt;&gt;
&gt; &gt;&gt; (b) sounds much more reasonable, as long as qemu doesn't complain (I
&gt; &gt;&gt; don't know whether or not it checks)
&gt; &gt;&gt;
&gt; &gt;&gt; Slightly related to this - I'm currently working on patches to avoid
&gt; &gt;&gt; making any ioctl calls that would fail in an unprivileged libvirtd when
&gt; &gt;&gt; using tap/macvtap devices.


This is music to my ears, great to hear.

ATM, I'm doing this by adding an attribute
&gt; &gt;&gt; "unmanaged='yes'" to the interface &lt;target&gt; element. The idea is that if
&gt; &gt;&gt; someone sets unmanaged='yes', they're stating that the caller (i.e.
&gt; &gt;&gt; kubevirt) is responsible for all device setup, and that libvirt should
&gt; &gt;&gt; just use it without further setup. A similar approach could be applied
&gt; &gt;&gt; to hostdev devices - if unmanaged is set, we assume that the caller has
&gt; &gt;&gt; done everything to make the associated device usable.
&gt; &gt;&gt;
&gt; &gt;&gt; (Of course this all makes me realize the inanity of adding a &lt;target
&gt; &gt;&gt; dev='blah' unmanaged='yes'/&gt; for interfaces when hostdevs already have
&gt; &gt;&gt; &lt;hostdev managed='yes'&gt; and &lt;interface type='hostdev' managed='yes'&gt;. So
&gt; &gt;&gt; to prevent setting the locklimit for hostdev, would we make a new
&gt; &gt;&gt; setting like &lt;hostdev managed='no-never-not-even-a-tiny-bit'&gt;? Sigh. I
&gt; &gt;&gt; *hate* trying to make config consistent :-/)
&gt;

Sounds tough indeed. I'd try to avoid negatively-named knobs. managed=no is
simpler to perceive than unmanaged=yes. It may be just me, but I'd even
assume managed=no if the target dev name is specified. If libvirt manages
the tap device, it should create a fresh one, too. But all of this is a big
digression.

&gt;&gt;
&gt; &gt;&gt; (alternately, we could just automatically fail the attempt to set the
&gt; &gt;&gt; lock limit in a graceful manner and allow the guest to continue)
&gt; &gt;&gt;
&gt; &gt;
&gt; &gt; If that's something maintainers feel good about, I am all for it since
&gt; &gt; it simplifies the implementation.
&gt;
&gt; Well, after talking to Alex, I think that since a) libvirt only attempts
&gt; to increase the limit after determining that it isn't already high
&gt; enough, and b) if it isn't high enough and we can't increase it, then
&gt; qemu is going to fail anyway, that c) we can't just fail gracefully and
&gt; continue.
&gt;
&gt; So *somebody* needs to increase the limit, and if you want libvirt to be
&gt; unprivileged, that means it needs to be you doing the increase. And
&gt; since the amount that libvirt increases it is just some number based on
&gt; oral folklore (and not on a specific value we learn by querying
&gt; somewhere), I don't think it's worthwhile figuring out some way for
&gt; libvirt to report it via an official API - that would end up just being
&gt; this:
&gt;
&gt; "Hey, you know that number that you guys are just making a guess about
&gt; based on some advice someone gave you once? Yeah, send me *that* number
&gt; so I can claim to be basing my actions on real science instead of
&gt; slightly educated voodoo! K THX BYE!" :-)
&gt;

Well, it's more like: "you know that voodoo you do to guess the number? If
you ever educate yourself about it, e.g by querying qemu, send me *that*
number. I'd rather not think about it ever again, BYE."


&gt; &gt;
&gt; &gt;&gt; BTW, I'm guessing that you use &lt;hostdev&gt; to assign the SRIOV VFs rather
&gt; &gt;&gt; than &lt;interface type='hostdev'&gt;, correct? The latter would require that
&gt; &gt;&gt; you have enough capabilities to set MAC addresses on the VFs (that's the
&gt; &gt;&gt; entire point of using &lt;interface type='hostdev'&gt; instead of plain
&gt; &lt;hostdev&gt;)
&gt; &gt;
&gt; &gt; Yes, we use &lt;hostdev&gt; exactly because interface sets MAC address: in
&gt; &gt; kubevirt scenario, the container that is running libvirtd has its own
&gt; &gt; network namespace and doesn't have access to PF to set the VF MAC
&gt; &gt; address on. Instead, we rely on CNI plugin that is running in the root
&gt; &gt; namespace context to configure the VF interface as needed. (I've
&gt; &gt; contributed custom MAC support to SR-IOV CNI plugin very recently.)
&gt; &gt;
&gt; &gt; Ihar
&gt; &gt;
&gt;
&gt; _______________________________________________
&gt; libvirt-users mailing list
&gt; libvirt-users@redhat.com
&gt; https://www.redhat.com/mailman/listinfo/libvirt-users

[Attachment #5 (text/html)]

&lt;div dir="auto"&gt;&lt;div&gt;&lt;br&gt;&lt;br&gt;&lt;div class="gmail_quote"&gt;&lt;div dir="ltr" \
class="gmail_attr"&gt;On Fri, 23 Aug 2019, 0:27 Laine Stump, &lt;&lt;a \
href="mailto:laine@redhat.com" rel="noreferrer noreferrer" \
target="_blank"&gt;laine@redhat.com&lt;/a&gt;&gt; wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote \
class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc \
solid;padding-left:1ex"&gt;(Adding Alex Williamson to Cc so he can correct any \
mistakes)&lt;br&gt; &lt;br&gt;
On 8/22/19 4:39 PM, Ihar Hrachyshka wrote:&lt;br&gt;
&gt; On Thu, Aug 22, 2019 at 12:01 PM Laine Stump &lt;&lt;a \
href="mailto:laine@redhat.com" rel="noreferrer noreferrer noreferrer" \
target="_blank"&gt;laine@redhat.com&lt;/a&gt;&gt; wrote:&lt;br&gt; &gt;&gt;&lt;br&gt;
&gt;&gt; On 8/22/19 10:56 AM, Ihar Hrachyshka wrote:&lt;br&gt;
&gt;&gt;&gt; On Thu, Aug 22, 2019 at 2:24 AM Daniel P. Berrangé &lt;&lt;a \
href="mailto:berrange@redhat.com" rel="noreferrer noreferrer noreferrer" \
target="_blank"&gt;berrange@redhat.com&lt;/a&gt;&gt; wrote:&lt;br&gt; &gt;&gt;&gt;&gt;&lt;br&gt;
&gt;&gt;&gt;&gt; On Wed, Aug 21, 2019 at 01:37:21PM -0700, Ihar Hrachyshka wrote:&lt;br&gt;
&gt;&gt;&gt;&gt;&gt; Hi all,&lt;br&gt;
&gt;&gt;&gt;&gt;&gt;&lt;br&gt;
&gt;&gt;&gt;&gt;&gt; KubeVirt uses libvirtd to manage qemu VMs represented as \
Kubernetes&lt;br&gt; &gt;&gt;&gt;&gt;&gt; API resources. In this case, libvirtd is running \
inside an&lt;br&gt; &gt;&gt;&gt;&gt;&gt; unprivileged pod, with some host mounts / \
capabilities added to the&lt;br&gt; &gt;&gt;&gt;&gt;&gt; pod, needed by libvirtd and other \
services.&lt;br&gt; &gt;&gt;&gt;&gt;&gt;&lt;br&gt;
&gt;&gt;&gt;&gt;&gt; One of the capabilities libvirtd requires for successful \
startup&lt;br&gt; &gt;&gt;&gt;&gt;&gt; inside a pod is SYS_RESOURCE. This capability is \
used to adjust&lt;br&gt; &gt;&gt;&gt;&gt;&gt; RLIMIT_MEMLOCK ulimit value depending on \
devices attached to the&lt;br&gt; &gt;&gt;&gt;&gt;&gt; managed guest, both on startup and \
during hotplug. AFAIU the need to&lt;br&gt; &gt;&gt;&gt;&gt;&gt; lock the memory is to \
avoid pages being pushed out from RAM into swap.&lt;br&gt; &gt;&gt;&lt;br&gt;
&gt;&gt;&lt;br&gt;
&gt;&gt; I recall successfully testing GPU assignment from an unprivileged&lt;br&gt;
&gt;&gt; libvirtd several years ago by setting a high enough ulimit for the uid&lt;br&gt;
&gt;&gt; used to run libvirtd in advance (. I think we check if the current&lt;br&gt;
&gt;&gt; setting is high enough, and don't try to set it unless we think we need \
to.&lt;br&gt; &gt;&gt;&lt;br&gt;
&gt; &lt;br&gt;
&gt; The PR I linked to in the original email does just that: it starts&lt;br&gt;
&gt; libvirtd; then, if domain is going to use VFIO, sets ulimit of&lt;br&gt;
&gt; libvirtd process to VM memory size + 1Gb (mimicking libvirt code) +&lt;br&gt;
&gt; 256Mb (to stay conservative) using prlimit() syscall; then defines the&lt;br&gt;
&gt; domain.&lt;br&gt;
&lt;br&gt;
So you're making an educated guess, which is essentially what libvirt is &lt;br&gt;
doing (based on advice from other people with better information than &lt;br&gt;
us, but still a guess).&lt;br&gt;
&lt;br&gt;
&gt; &lt;br&gt;
&gt;&gt; If I understand you correctly, you're saying that in your case it's \
okay&lt;br&gt; &gt;&gt; for the memlock limit to be lower than we try to set it to, because \
swap&lt;br&gt; &gt;&gt; is disabled anyway, is that correct?&lt;br&gt;
&gt;&gt;&lt;br&gt;
&gt; &lt;br&gt;
&gt; I'm honestly not exactly sure about the reason why we need to set the&lt;br&gt;
&gt; limit, but I assume it's because of swap. I can be totally confused on&lt;br&gt;
&gt; that part though.&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
What I understand from an IRC conversation with Alex just now is that &lt;br&gt;
increasing RLIMIT_MEMLOCK isn't done just to prevent any of the pages &lt;br&gt;
being swapped out. It's done because "all GPAs (Guest Physical &lt;br&gt;
Addresses) that could potentially be DMA targets need to have fixed &lt;br&gt;
mappings through the iommu, therefore all need to be allocated and &lt;br&gt;
mappings fixed [...] setting rlimit allows us to perform all the &lt;br&gt;
necessary pins within the user's locked memory limit".&lt;br&gt;
&lt;br&gt;
So even if swap is disabled, it still needs to be done (either by &lt;br&gt;
libvirt, or by someone else who has the necessary privileges and control &lt;br&gt;
over the libvirtd process).&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&gt;&gt;&gt;&gt;&lt;br&gt;
&gt;&gt;&gt;&gt; Libvirt shouldn't set RLIMIT_MEMLOCK by default, unless \
there's&lt;br&gt; &gt;&gt;&gt;&gt; something in the XML that requires it - one of&lt;br&gt;
&gt;&gt;&gt;&lt;br&gt;
&gt;&gt;&gt; You are right, sorry. We add SYS_RESOURCE only for particular \
domains.&lt;br&gt; &gt;&gt;&gt;&lt;br&gt;
&gt;&gt;&gt;&gt;&lt;br&gt;
&gt;&gt;&gt;&gt;      - hard limit memory value is present&lt;br&gt;
&gt;&gt;&gt;&gt;      - host PCI device passthrough is requested&lt;br&gt;
&gt;&gt;&gt;&lt;br&gt;
&gt;&gt;&gt; We are using passthrough&lt;br&gt;
&gt;&gt;&lt;br&gt;
&gt;&gt; (If you want to make Alex happy, use the term "VFIO device \
assignment"&lt;br&gt; &gt;&gt; rather than passthrough :-).)&lt;br&gt;
&gt;&gt;&lt;br&gt;
&gt; &lt;br&gt;
&gt; Not sure who Alex is but I'll try to make everyone happy! :)&lt;br&gt;
&lt;br&gt;
The Alex I'm referring to is the Alex I just Cc'ed. He is the VFIO &lt;br&gt;
maintainer.&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&gt;&gt;&gt; to pass SR-IOV NIC VFs into guests. We also&lt;br&gt;
&gt;&gt;&gt; plan to do the same for GPUs in the near future.&lt;br&gt;
&gt;&gt;&lt;br&gt;
&gt;&gt;     &gt;&gt;&gt; I believe we would benefit from one of the following \
features on&lt;br&gt; &gt;&gt;     &gt;&gt;&gt; libvirt side (or both):&lt;br&gt;
&gt;&gt;     &gt;&gt;&gt;&lt;br&gt;
&gt;&gt;     &gt;&gt;&gt; a) expose the memory lock value calculated by libvirtd \
through&lt;br&gt; &gt;&gt;     &gt;&gt;&gt; libvirt ABI so that we can use it when calling \
prlimit() on libvirtd&lt;br&gt; &gt;&gt;     &gt;&gt;&gt; process;&lt;br&gt;
&gt;&gt;     &gt;&gt;&gt; b) allow to disable setrlimit() calls via libvirtd config \
file knob&lt;br&gt; &gt;&gt;     &gt;&gt;&gt; or domain definition.&lt;br&gt;
&gt;&gt;&lt;br&gt;
&gt;&gt; (b) sounds much more reasonable, as long as qemu doesn't complain (I&lt;br&gt;
&gt;&gt; don't know whether or not it checks)&lt;br&gt;
&gt;&gt;&lt;br&gt;
&gt;&gt; Slightly related to this - I'm currently working on patches to avoid&lt;br&gt;
&gt;&gt; making any ioctl calls that would fail in an unprivileged libvirtd when&lt;br&gt;
&gt;&gt; using tap/macvtap devices. &lt;/blockquote&gt;&lt;/div&gt;&lt;/div&gt;&lt;div \
dir="auto"&gt;&lt;br&gt;&lt;/div&gt;&lt;div dir="auto"&gt;This is music to my ears, great to \
hear.&lt;/div&gt;&lt;div dir="auto"&gt;&lt;br&gt;&lt;/div&gt;&lt;div dir="auto"&gt;&lt;div \
class="gmail_quote"&gt;&lt;blockquote class="gmail_quote" style="margin:0 0 0 \
.8ex;border-left:1px #ccc solid;padding-left:1ex"&gt;ATM, I'm doing this by adding \
an attribute&lt;br&gt; &gt;&gt; "unmanaged='yes'" to the interface \
&lt;target&gt; element. The idea is that if&lt;br&gt; &gt;&gt; someone sets \
unmanaged='yes', they're stating that the caller (i.e.&lt;br&gt; &gt;&gt; \
kubevirt) is responsible for all device setup, and that libvirt should&lt;br&gt; &gt;&gt; \
just use it without further setup. A similar approach could be applied&lt;br&gt; &gt;&gt; \
to hostdev devices - if unmanaged is set, we assume that the caller has&lt;br&gt; &gt;&gt; \
done everything to make the associated device usable.&lt;br&gt; &gt;&gt;&lt;br&gt;
&gt;&gt; (Of course this all makes me realize the inanity of adding a &lt;target&lt;br&gt;
&gt;&gt; dev='blah' unmanaged='yes'/&gt; for interfaces when hostdevs \
already have&lt;br&gt; &gt;&gt; &lt;hostdev managed='yes'&gt; and &lt;interface \
type='hostdev' managed='yes'&gt;. So&lt;br&gt; &gt;&gt; to prevent setting \
the locklimit for hostdev, would we make a new&lt;br&gt; &gt;&gt; setting like &lt;hostdev \
managed='no-never-not-even-a-tiny-bit'&gt;? Sigh. I&lt;br&gt; &gt;&gt; *hate* \
trying to make config consistent :-/)&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;/div&gt;&lt;div \
dir="auto"&gt;&lt;br&gt;&lt;/div&gt;&lt;div dir="auto"&gt;Sounds tough indeed. I'd try to avoid \
negatively-named knobs. managed=no is simpler to perceive than unmanaged=yes. It may \
be just me, but I'd even assume managed=no if the target dev name is specified. \
If libvirt manages the tap device, it should create a fresh one, too. But all of this \
is a big digression.&lt;/div&gt;&lt;div dir="auto"&gt;&lt;br&gt;&lt;/div&gt;&lt;div dir="auto"&gt;&lt;div \
class="gmail_quote"&gt;&lt;blockquote class="gmail_quote" style="margin:0 0 0 \
.8ex;border-left:1px #ccc solid;padding-left:1ex"&gt; &gt;&gt;&lt;br&gt;
&gt;&gt; (alternately, we could just automatically fail the attempt to set the&lt;br&gt;
&gt;&gt; lock limit in a graceful manner and allow the guest to continue)&lt;br&gt;
&gt;&gt;&lt;br&gt;
&gt; &lt;br&gt;
&gt; If that's something maintainers feel good about, I am all for it since&lt;br&gt;
&gt; it simplifies the implementation.&lt;br&gt;
&lt;br&gt;
Well, after talking to Alex, I think that since a) libvirt only attempts &lt;br&gt;
to increase the limit after determining that it isn't already high &lt;br&gt;
enough, and b) if it isn't high enough and we can't increase it, then &lt;br&gt;
qemu is going to fail anyway, that c) we can't just fail gracefully and &lt;br&gt;
continue.&lt;br&gt;
&lt;br&gt;
So *somebody* needs to increase the limit, and if you want libvirt to be &lt;br&gt;
unprivileged, that means it needs to be you doing the increase. And &lt;br&gt;
since the amount that libvirt increases it is just some number based on &lt;br&gt;
oral folklore (and not on a specific value we learn by querying &lt;br&gt;
somewhere), I don't think it's worthwhile figuring out some way for &lt;br&gt;
libvirt to report it via an official API - that would end up just being &lt;br&gt;
this:&lt;br&gt;
&lt;br&gt;
"Hey, you know that number that you guys are just making a guess about &lt;br&gt;
based on some advice someone gave you once? Yeah, send me *that* number &lt;br&gt;
so I can claim to be basing my actions on real science instead of &lt;br&gt;
slightly educated voodoo! K THX BYE!" :-)&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;/div&gt;&lt;div \
dir="auto"&gt;&lt;br&gt;&lt;/div&gt;&lt;div dir="auto"&gt;Well, it's more like: "you know that \
voodoo you do to guess the number? If you ever educate yourself about it, e.g by \
querying qemu, send me *that* number. I'd rather not think about it ever again, \
BYE."&lt;/div&gt;&lt;div dir="auto"&gt;&lt;br&gt;&lt;/div&gt;&lt;div dir="auto"&gt;&lt;div \
class="gmail_quote"&gt;&lt;blockquote class="gmail_quote" style="margin:0 0 0 \
.8ex;border-left:1px #ccc solid;padding-left:1ex"&gt;&lt;br&gt; &gt; &lt;br&gt;
&gt;&gt; BTW, I'm guessing that you use &lt;hostdev&gt; to assign the SRIOV VFs \
rather&lt;br&gt; &gt;&gt; than &lt;interface type='hostdev'&gt;, correct? The \
latter would require that&lt;br&gt; &gt;&gt; you have enough capabilities to set MAC \
addresses on the VFs (that's the&lt;br&gt; &gt;&gt; entire point of using &lt;interface \
type='hostdev'&gt; instead of plain &lt;hostdev&gt;)&lt;br&gt; &gt; &lt;br&gt;
&gt; Yes, we use &lt;hostdev&gt; exactly because interface sets MAC address: in&lt;br&gt;
&gt; kubevirt scenario, the container that is running libvirtd has its own&lt;br&gt;
&gt; network namespace and doesn't have access to PF to set the VF MAC&lt;br&gt;
&gt; address on. Instead, we rely on CNI plugin that is running in the root&lt;br&gt;
&gt; namespace context to configure the VF interface as needed. (I've&lt;br&gt;
&gt; contributed custom MAC support to SR-IOV CNI plugin very recently.)&lt;br&gt;
&gt; &lt;br&gt;
&gt; Ihar&lt;br&gt;
&gt; &lt;br&gt;
&lt;br&gt;
_______________________________________________&lt;br&gt;
libvirt-users mailing list&lt;br&gt;
&lt;a href="mailto:libvirt-users@redhat.com" rel="noreferrer noreferrer noreferrer" \
target="_blank"&gt;libvirt-users@redhat.com&lt;/a&gt;&lt;br&gt; &lt;a \
href="https://www.redhat.com/mailman/listinfo/libvirt-users" rel="noreferrer \
noreferrer noreferrer noreferrer" \
target="_blank"&gt;https://www.redhat.com/mailman/listinfo/libvirt-users&lt;/a&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;




_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190820072654</emailId><senderName>Erik Skultety</senderName><senderEmail>eskultet@redhat.com</senderEmail><timestampReceived>2019-08-20 07:26:54-0400</timestampReceived><subject>Re: [libvirt-users] Compiling Libvirt on Windows for Hyper V support</subject><body>

On Mon, Aug 19, 2019 at 03:52:51PM -0400, reza shahriari wrote:
&gt; Hi,
&gt; 
&gt; I am trying to compile Libvirt from the source code on windows using msys2 but keep \
&gt; hitting issues while running `./configure`.

So what arguments does msys2 pass to the configure script?

Erik

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20190820151706</emailId><senderName>reza shahriari</senderName><senderEmail>reza_shahriari@yahoo.ca</senderEmail><timestampReceived>2019-08-20 15:17:06-0400</timestampReceived><subject>Re: [libvirt-users] Compiling Libvirt on Windows for Hyper V support</subject><body>

[Attachment #2 (multipart/alternative)]


I am passing in:

./configure \
  --without-sasl \
  --without-polkit \
  --without-python \
  --without-libxl \
  --without-qemu \
  --without-lxc \
  --without-openvz \
  --without-libvirtd
(The ones on the website: https://libvirt.org/windows.html \
&lt;https://libvirt.org/windows.html&gt;)

&gt; On Aug 20, 2019, at 3:26 AM, Erik Skultety &lt;eskultet@redhat.com&gt; wrote:
&gt; 
&gt; On Mon, Aug 19, 2019 at 03:52:51PM -0400, reza shahriari wrote:
&gt; &gt; Hi,
&gt; &gt; 
&gt; &gt; I am trying to compile Libvirt from the source code on windows using msys2 but \
&gt; &gt; keep hitting issues while running `./configure`.
&gt; 
&gt; So what arguments does msys2 pass to the configure script?
&gt; 
&gt; Erik


[Attachment #5 (unknown)]

&lt;html&gt;&lt;head&gt;&lt;meta http-equiv="Content-Type" content="text/html; \
charset=us-ascii"&gt;&lt;/head&gt;&lt;body style="word-wrap: break-word; -webkit-nbsp-mode: \
space; line-break: after-white-space;" class=""&gt;I am passing in:&lt;div class=""&gt;&lt;br \
class=""&gt;&lt;/div&gt;&lt;div class=""&gt;&lt;pre style="font-family: LibvirtOverpassMono; font-size: \
14.4px; border: 1px solid rgb(153, 153, 153); background-color: rgb(238, 238, 238); \
color: rgb(0, 0, 0); padding: 1em; font-variant-ligatures: normal; orphans: 2; \
widows: 2; background-position: initial initial; background-repeat: initial initial;" \
                class=""&gt;./configure \
  --without-sasl \
  --without-polkit \
  --without-python \
  --without-libxl \
  --without-qemu \
  --without-lxc \
  --without-openvz \
  --without-libvirtd&lt;/pre&gt;&lt;div class=""&gt;(The ones on the website: &lt;a \
href="https://libvirt.org/windows.html" \
class=""&gt;https://libvirt.org/windows.html&lt;/a&gt;)&lt;/div&gt;&lt;div&gt;&lt;br class=""&gt;&lt;blockquote \
type="cite" class=""&gt;&lt;div class=""&gt;On Aug 20, 2019, at 3:26 AM, Erik Skultety &lt;&lt;a \
href="mailto:eskultet@redhat.com" class=""&gt;eskultet@redhat.com&lt;/a&gt;&gt; \
wrote:&lt;/div&gt;&lt;br class="Apple-interchange-newline"&gt;&lt;div class=""&gt;&lt;div class=""&gt;On Mon, \
Aug 19, 2019 at 03:52:51PM -0400, reza shahriari wrote:&lt;br class=""&gt;&lt;blockquote \
type="cite" class=""&gt;Hi,&lt;br class=""&gt;&lt;br class=""&gt;I am trying to compile Libvirt from \
the source code on windows using msys2 but keep hitting issues while running \
`./configure`.&lt;br class=""&gt;&lt;/blockquote&gt;&lt;br class=""&gt;So what arguments does msys2 \
pass to the configure script?&lt;br class=""&gt;&lt;br class=""&gt;Erik&lt;br \
class=""&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br class=""&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190820153537</emailId><senderName>Daniel =?utf-8?B?UC4gQmVycmFuZ8Op?=</senderName><senderEmail>berrange@redhat.com</senderEmail><timestampReceived>2019-08-20 15:35:37-0400</timestampReceived><subject>Re: [libvirt-users] Compiling Libvirt on Windows for Hyper V support</subject><body>

On Tue, Aug 20, 2019 at 11:17:06AM -0400, reza shahriari wrote:
&gt; I am passing in:
&gt; 
&gt; ./configure \
&gt; --without-sasl \
&gt; --without-polkit \
&gt; --without-python \
&gt; --without-libxl \
&gt; --without-qemu \
&gt; --without-lxc \
&gt; --without-openvz \
&gt; --without-libvirtd
&gt; (The ones on the website: https://libvirt.org/windows.html \
&gt; &lt;https://libvirt.org/windows.html&gt;)

Unfortunately that page is somewhat stale.

These days you should not need to pass any args to configure - we should
automagicaly disable everything that doesn't work on Windows.

That said, officially the *only* way we support Windows right now is
via the mingw64 cross-compiler toolchain running on a Linux host, as
that is what our CI systems test for each release.

msys may or may not work - we dont have any CI systems or developers
actively testing that anymore.

&gt; &gt; On Aug 20, 2019, at 3:26 AM, Erik Skultety &lt;eskultet@redhat.com&gt; wrote:
&gt; &gt; 
&gt; &gt; On Mon, Aug 19, 2019 at 03:52:51PM -0400, reza shahriari wrote:
&gt; &gt; &gt; Hi,
&gt; &gt; &gt; 
&gt; &gt; &gt; I am trying to compile Libvirt from the source code on windows using msys2 but \
&gt; &gt; &gt; keep hitting issues while running `./configure`.
&gt; &gt; 
&gt; &gt; So what arguments does msys2 pass to the configure script?

Regards,
Daniel
-- 
&gt; &gt; https://berrange.com      -o-    https://www.flickr.com/photos/dberrange :|
&gt; &gt; https://libvirt.org         -o-            https://fstop138.berrange.com :|
&gt; &gt; https://entangle-photo.org    -o-    https://www.instagram.com/dberrange :|

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20190820154223</emailId><senderName>Daniel =?utf-8?B?UC4gQmVycmFuZ8Op?=</senderName><senderEmail>berrange@redhat.com</senderEmail><timestampReceived>2019-08-20 15:42:23-0400</timestampReceived><subject>Re: [libvirt-users] Compiling Libvirt on Windows for Hyper V support</subject><body>

On Mon, Aug 19, 2019 at 03:52:51PM -0400, reza shahriari wrote:
&gt; Hi, 
&gt; 
&gt; I am trying to compile Libvirt from the source code on windows using msys2 but keep \
&gt; hitting issues while running `./configure`.  
&gt; ….
&gt; &gt; checking whether C compiler handles -Wno-suggest-attribute=pure… yes
&gt; &gt; checking whether C compiler handles -Wno-suggest-attribute=const... yes
&gt; &gt; checking for how to force completely read-only GOT table…
&gt; &gt; checking for how to avoid indirect lib deps... -Wl,--no-copy-dt-needed-entries
&gt; &gt; checking for how to stop undefined symbols at link time…
&gt; &gt; checking sys/acl.h usability... no                                                \
&gt; &gt;  checking sys/acl.h presence… no
&gt; &gt; checking for sys/acl.h… no
&gt; &gt; checking for aa_change_profile in -lapparmor… no
&gt; &gt; checking for pthread_mutexattr_init… no
&gt; &gt; checking for pthread.h... (cached) no
&gt; &gt; configure: error: A pthreads impl is required for building libvirt 
&gt; ...

As the error message says, you need to have a pthreads impl to
build libvirt. This is not a standard part of Windows, but is
provided by the mingw64 cross compiler toolchain. I'm unclear
if its possible to get this into msys or not/


Regards,
Daniel
-- 
&gt; &gt; https://berrange.com      -o-    https://www.flickr.com/photos/dberrange :|
&gt; &gt; https://libvirt.org         -o-            https://fstop138.berrange.com :|
&gt; &gt; https://entangle-photo.org    -o-    https://www.instagram.com/dberrange :|

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20190820160337</emailId><senderName>Daniel =?utf-8?B?UC4gQmVycmFuZ8Op?=</senderName><senderEmail>berrange@redhat.com</senderEmail><timestampReceived>2019-08-20 16:03:37-0400</timestampReceived><subject>Re: [libvirt-users] Compiling Libvirt on Windows for Hyper V support</subject><body>

Re-adding the mailing list CC - please don't drop it.

On Tue, Aug 20, 2019 at 11:54:34AM -0400, reza shahriari wrote:
&gt; Hi, 
&gt; 
&gt; I am using msys2. When I run `./configure` without any parameters and I still see \
&gt; missing pthreads impl. 
&gt; I have installed mingw64 cross compiler toolchain. Here is the output of pacman I \
&gt; see when searching for pthreads (they are all installed). 
&gt; mingw64/mingw-w64-x86_64-libwinpthread-git 7.0.0.5480.e14d23be-1 \
&gt; (mingw-w64-x86_64-toolchain) [installed] MinGW-w64 winpthreads library
&gt; mingw64/mingw-w64-x86_64-winpthreads-git 7.0.0.5480.e14d23be-1 \
&gt; (mingw-w64-x86_64-toolchain) [installed] MinGW-w64 winpthreads library
&gt; msys/mingw-w64-cross-winpthreads-git 7.0.0.5480.b627284b-1 \
&gt; (mingw-w64-cross-toolchain mingw-w64-cross) [installed] MinGW-w64 winpthreads \
&gt; library for cross-compiler 
&gt; 
&gt; Also, is there any another way to enable hyper-v domains on Libvirt ?

The pthreads library is a mandatory part of libvirt, so we can't
skip that.

Can you provide your "config.log" file - if it is larger than
200 KB, please compress it, or upload it somewhere


Regards,
Daniel
-- 
&gt; &gt; https://berrange.com      -o-    https://www.flickr.com/photos/dberrange :|
&gt; &gt; https://libvirt.org         -o-            https://fstop138.berrange.com :|
&gt; &gt; https://entangle-photo.org    -o-    https://www.instagram.com/dberrange :|

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20190820162915</emailId><senderName>reza shahriari</senderName><senderEmail>reza_shahriari@yahoo.ca</senderEmail><timestampReceived>2019-08-20 16:29:15-0400</timestampReceived><subject>Re: [libvirt-users] Compiling Libvirt on Windows for Hyper V support</subject><body>

[Attachment #2 (multipart/alternative)]


Hi,

I have attached my compressed config file.

Thanks,

Reza



&gt; On Aug 20, 2019, at 12:03 PM, Daniel P. Berrang�� &lt;berrange@redhat.com&gt; wrote:
&gt; 
&gt; Re-adding the mailing list CC - please don't drop it.
&gt; 
&gt; On Tue, Aug 20, 2019 at 11:54:34AM -0400, reza shahriari wrote:
&gt; &gt; Hi, 
&gt; &gt; 
&gt; &gt; I am using msys2. When I run `./configure` without any parameters and I still see \
&gt; &gt; missing pthreads impl. 
&gt; &gt; I have installed mingw64 cross compiler toolchain. Here is the output of pacman I \
&gt; &gt; see when searching for pthreads (they are all installed). 
&gt; &gt; mingw64/mingw-w64-x86_64-libwinpthread-git 7.0.0.5480.e14d23be-1 \
&gt; &gt; (mingw-w64-x86_64-toolchain) [installed] MinGW-w64 winpthreads library
&gt; &gt; mingw64/mingw-w64-x86_64-winpthreads-git 7.0.0.5480.e14d23be-1 \
&gt; &gt; (mingw-w64-x86_64-toolchain) [installed] MinGW-w64 winpthreads library
&gt; &gt; msys/mingw-w64-cross-winpthreads-git 7.0.0.5480.b627284b-1 \
&gt; &gt; (mingw-w64-cross-toolchain mingw-w64-cross) [installed] MinGW-w64 winpthreads \
&gt; &gt; library for cross-compiler 
&gt; &gt; 
&gt; &gt; Also, is there any another way to enable hyper-v domains on Libvirt ?
&gt; 
&gt; The pthreads library is a mandatory part of libvirt, so we can't
&gt; skip that.
&gt; 
&gt; Can you provide your "config.log" file - if it is larger than
&gt; 200 KB, please compress it, or upload it somewhere
&gt; 
&gt; 
&gt; Regards,
&gt; Daniel
&gt; -- 
&gt; &gt; &gt; https://berrange.com &lt;https://berrange.com/&gt;      -o-    \
&gt; &gt; &gt; https://www.flickr.com/photos/dberrange \
&gt; &gt; &gt; &lt;https://www.flickr.com/photos/dberrange&gt; :|
&gt; &gt; &gt; https://libvirt.org &lt;https://libvirt.org/&gt;         -o-            \
&gt; &gt; &gt; https://fstop138.berrange.com &lt;https://fstop138.berrange.com/&gt; :|
&gt; &gt; &gt; https://entangle-photo.org &lt;https://entangle-photo.org/&gt;    -o-    \
&gt; &gt; &gt; https://www.instagram.com/dberrange &lt;https://www.instagram.com/dberrange&gt; :|


[Attachment #5 (multipart/mixed)]

[Attachment #7 (unknown)]

&lt;html&gt;&lt;head&gt;&lt;meta http-equiv="Content-Type" content="text/html; \
charset=us-ascii"&gt;&lt;/head&gt;&lt;body style="word-wrap: break-word; -webkit-nbsp-mode: \
space; line-break: after-white-space;" class=""&gt;Hi,&lt;div class=""&gt;&lt;br \
class=""&gt;&lt;/div&gt;&lt;div class=""&gt;I have attached my compressed config file.&lt;div \
class=""&gt;&lt;br class=""&gt;&lt;/div&gt;&lt;div class=""&gt;Thanks,&lt;/div&gt;&lt;div class=""&gt;&lt;br \
class=""&gt;&lt;/div&gt;&lt;div class=""&gt;Reza&lt;/div&gt;&lt;div class=""&gt;&lt;br class=""&gt;&lt;/div&gt;&lt;div \
class=""&gt;&lt;/div&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;


["config.zip" (config.zip)]

PK�aO�q������#
config.log�]yw�F�����NZ�m�@���^m��{�d��B����&amp;���YI�$�8m�����v������L��
���&lt;��\�Y�dJ]W� .�9�h��9���8�\O�w��[�a] \
����;��l�#2�������L��%�dj��Y,:��\�;T��������x1�JQ)�_�=�	r.�E��� \
{J�s�F~"�z���ue��g��&lt;����(.��K��B��3"���^���7��i�3� \
�v=K�R�G^����O�o��7�o�/�Y�0�MM�JX�@�\,��,��I������aw ��bYk�*��+ Je�.���(������ \
U(���S:7�R�9��ui��V!^��OD�����63��p��# \
�}xEoJ�so]��C�}�h�I�7��	6�����vMzEM����q=�W���Is��A�":��� \
�2��=���z���F��[�����R����tvN���a��}M����f�J,�K���a���FeSp����0����;�0�� K7�#Z*c \
= Z6�������HX��R��
b����kx���c�&lt;R����"���g$�w��a����4t2��0��c���D�{�i�o5�tmK�$;�+�`�;��������E`��#p��S8tF \
Yj{a�v`��L�����q��������3X����9�;�6�k�q��@C�����8~��-�WG�����l}A�	�����8l=��1Oz���B�o�����S�� \
����4R��e�,�i�,�gd���=X����Y�x�	��If���d�Z������t)�zF^��67=7��9'��G�������u \
o�c8 ~�k��`k�y���8�F�f2���p�rQ]Puk���=���Z��[D��4�W%kn���O��6�:�t/��s��g�&gt;+�� \
�7i�X�UX���qg�ug����P$��O0�|n���f��l��}�j�Z�?V�f����������_�;�����[�M� \
���������n�{��V ~k�l�&amp;	;�W�V�f_���C�� \
�������;���L���kE~��w�[d7^��8���0�#(�*Jx���vt����{u���'����w�k5d�� \
����$%k�������� �����0O������W�m���"-������m�����F"�	^������p��C�h�����0���Ec��rY�nsK�8M����	 \
���jc@��#�P���K9f�s�S�/���8�$V@�[�HS�G��)C�s� �l+�&lt;�9j~��M��r����Zm���lf; \
��.��W�ch�f��r��L�\Sb�'�5�� g���;A�`8!X�HD�����E�(��@.(��X����X0f���� \
����]�+r��Z���8�G0����L�4oof�� \
t��������������vE�����}�\&lt;��J|�y$npi�y��CgG4�,��P�������zP��T�e=�R�"��PvYRA��M��"-�+bS�jL#F�e
 U��� �XK`]O0�J0~��N)���F����J�&amp;��2	�|��&amp;3��`!J�����h;� \
�j0���K�Z�����GvZ������C)��c�Z�\ik�^�"�^�����7F&gt;7����p�M�d������`5ed  \
H��zK���@��,������0�iiv������GE��A������i��fo�i�6{���wr�o�a%�RW \
����+��S7�m�`X��t�Xh�[�!xl������h�_�.���^������~^�Z�X�&lt;1�}�0���K�g��6d�� \
�m���� ��k��4hs��o�h�Z�
����`��0v���~/P�,�����#��1+\�,	��e-�h������/,���ckW�?j1a��s\j��_��� \
&gt;�]�^@�z��/��j�]^=wo;��n���Y`kX2���L��D&amp;���&amp;� �]�A�
U� _���?����z�����``������gL�����
\YJ�;�Z��$�w�y#��F`K�����y�0S�v�%W�U�a�nD�{N��2.*�����#j6�	8��s�?s,�W�5��OU
BE�,[���'%W;m�~�-|�I�5���e���=�����_7��� \
E�b��b��_��P~�2���[{k�R�����]QTr�6���k��tR���&gt;LW���R�kf�V[�!��K��"���^Xw \
��'�P��KP�H���1a������F&amp;�T�*�Q]����Kbn�%9����*y�qM	�[��]7��r������kbU�JqEIr5W� \
.�\D�.u:��T_t�HF�A��D%�u��ZM+Jd������x��&gt;������%���,�&lt;�����/�*Y���4#L��vW��� \
���pf�Q���(���������I��?&amp;�Z=.Y���%Ki�2�Y�XFu(�:,n�Q�GU�8�)L�L�.Z�ap���%����N��L%�h'������,.mU�L_��Iq \
�����^!K���j �Ib-��#:��&gt;K�]�O�"���\[M�dSx�?AX8��:���NBL	��w�K�e5��+����XNQM��7eaI�p�k���O����Ob;��,t��i��
 d�������Bl����5�h�wt�lW��Ub�[���J���,N��o��a�y�&amp;[���V� \
�����v��9��-�'����`�~��,e|yz�k��!�`��� \
=��"8(O��wH�&amp;�7s�RpD�Y��z���=�:��"a�{W�&amp;���H���'�����o=���G��~�7���+J:��T�2�N \
B�Mm a���13&gt;�W�b��6*Ir����T�K�c*b��Mnv�"�A�����XV�PZ	z0�h&lt;F��j.�4fQuJx��4�^Ejy�T���T	1K��	]#�x�whI��������7����3����1�S���� \
���N}��������� ��&amp;&lt;�1�lF;���6)���_ \
�U9%��2n��P��1V�c�3����Uk���|D�^7�o�&lt;����v�:��n�h \
���2K	�G9j�~\.�kD�;���&lt;�i�D��q��o�B���)d����7������!D�M�WR.��_e�A.(��a���%���/S��"[��I��c�����x \
(�7w��~(��7b���r�F�%Oni�D})#	!����Z�� \
�D,��i1?�$������3Z~Z9��@��hJ���[y�!���UB����E�zVU#�m��q�1��� \
r�a��A��m�J*�*�2��E������+�?����y`8`l�MX��a0�+���=,d�Y���J�TQS�q��A�S���6]l�%�j�e
 9�$�%D��Y����k�$	v�Rw��$0�&lt;�J�]rX���r�����N����v��pp�Y1��dW�TQZc�)�L�������(��I�q�"5deq&amp;a{g�.�m�;��������}2�6 \
GS&lt;8 �P��&lt;������ca��g�d�L&gt;{{D���)����}Q w~���#S����S�tU�Z��?�� ZO \
B�m����?�����iO^i&gt;��������s0 bLg����wc1�����������P�
	1e������c�$;f� e��N��g��/
wz��J�&gt;�!8��1����$5�i4Y���;�t��\"��-����A.	#�2���0&lt;������&gt;jv�di?U� \
g@v���Z�T�������W���2��{���v[�[��z7t2����r��CM' \
��&gt;�9hv_��r����h����m������3��8��a�g�O�Z-������ _�����9W���D�x�619��� \
�' ��
(O�"�ph���c��|69�8pP����!	z�D6{LE3���m����0�J��wD��WJX;����	_v��WJ�Uy�e���@&lt;4�t����?u{���&lt;�2�&amp;���1�2����
 a�M��� �#a?b�dgg���.��_U�%��9����
a~�;_$9�/����L��JL5x�l�L������
w���N��O��Bk�p����XF-,5f�I9�R},}��~�=WiH�{:4��3_�S�*:U�-��8�/:�F�[nT�3|����kD���h�h�#].&lt;L8�����( \
�������5�5�Yv� EZ����� \
��5����#�g��2���%p�m1�D�(�nCH��[��&lt;w���$�p�SVk�Z�����L�7=L�A��?��Es������1�*��h�(H�����y7
 |����f���f��L�k0�A��/�d��d|�z�&gt;�����Bv�IB��t��������O�o�������U�����F&lt;7z��Q \
��eP�:��)'u��+��,����������{US��dh�x`S7U���TG?�����)O�o��7r������&lt;C���m��S���'���+=r��6uS�)B��t�������;�F�{#w� \
�����F&lt;7���c��|�����&amp;�4�%MU���Vuu�/p��c���R��80��CQq�v�8�Due��e��y��PP��y�Ro�+���F`W+���'��J�T_�����	�j9�~U:���+=!U�R��P�����w��kRy \
��)?���u5�-��~I�W�F��I����F�W��B$�J������8��8��8��p����6|�"7�Ny�*���nw=�'Y6fs��� \
9M/M��}M/�[�3�&lt;Bg)R���3 ������@�=�L ��2�p$��G2�p$���D2A��S����� \
�r�8���w��4������k�og6���VUBpX�������a(���rd��!G����t�������f�ytg��`���G6C$� \
�iM5O��oT�]�)L�!�DqH�!�DqHt7$ p�C���uZ�����?d��!G�k�$�v������w
�qP�Au�qP�@]�r�B��0�9�P��AA�&lt;A��a;�_�P�����@������#*��8����#*���SD`�������� \
�����5\��);��Q���H���n!�����#;��8�{��.A;h�S��q��H1��&lt;��N=�7����Xk�x�'3C	�d&amp;�Zkq����Zkq��X+�&amp;zx�����j�jW_�
 ���~��8���c,��8����c,�&lt;l5��1���\8��la���y�re��)x���v�qh�����v�	�s�������	��&lt;���u������-��^/C��0��8�����/��8���k��������4�������\s�1m]3�[�� \
�����q`���W9 �(��@��o(����ii����Sd|�����p=:�(��}�:����XZlR���nh�������mv������� \
mb����&gt;F|H|��|�L&lt;�f6��J�����o�u��CGlFlFlFlFlFlFl��l�L�G~��r�\.K#���jbbbb \
bbb{b@1�����C�,OaP8�a�!FFFFFFF�S���I��;���qy$[[������������B \
��Lh�M������f���smA�F�F�F�F�F�F�F�����DS�f���z��w�g���t���0������������������� \
e3n������!��[X�^8��b�y�7N�M����������������G:N����	�k�����5��V��S��T�����\@B \
��C��|��7�����I�J�J�J�J��k~M�w����������T������jC���V���c�b@�����c6i��L�A�A�A�A�A�A�A���3�T�a�.��n�!��ll
 �a�������������������@��Jc���!����V��������a@@@@@@@�,f��
���4�p��t+���4K8^*�D�������YF���
K�8�(�(�(�(�(�(�7Sp���iw~}�#�&amp;��3�F��Mu�F+�����\���|�G��z�*]�'��Y46�T[*�9����������0J�hv���
 =��`�%�Bb��s��*��CG|�	?�v&amp;���U7F�_��]��r��+�z�F�h1cS�� \
3b@1[��6���Lj���&amp;\����_�7�[	�t��A�! \
�bJ���`�9�&amp;��~�6h�vN�zc���0&amp;U�h����!���!�C��$I�J�'��������7�C�#����\���s����W�l&gt;=�}�au��=qYlt�����g�1�-�p�|&lt;��
                
.���H����t�K[8	P��u��w,s�? ���w�'��I!��\X����h$ v��;b�� \
��(��*�E�����j�;w�4+��m�r"";9������yA����U�=p\�!�p!���zc$�2sd_`#�t_ \
1��3p��^���|p��sq�	1R��Z���3m��Bxs�"��mqq���t��6��G_z�]�kV \
���&gt;���|���;Lf+e�ce��A�4m|c�X���F~��������&gt;��r�Sw	d��Fk \
dG�m1����'�N��4������R���KZ�C�d���l�^ �i|�r,-'Rx��=�}���u�%|X3e��ZJ� E \
�ac*sD{D{�8������6�K��b����k7n&lt;���� �����`aq7��^��`�^����TC \
���`T:�����!�u�����jfF���������������� y#�; \
�XFi���liC�*�I.;�aE�pRR:��'�F��\SKS���������wqy&amp;v'v'v'v���^�������k���5�������C�4s�f�����������cP,�n7
 ��g��X���CZv#J�E��	v�x?����� ���� \
�D����1�qnL�vaL�^'�����y(������XB�q��&amp;��t^P�fL/ \
����E��F�4��%Wq�B�#���#���9�I��mw \
Cmdc��O��v{�^�9^z�\/����k��H�+Y�Bk�lH�x��,�������/�$��*�xri��F��T����V[�K�Z�V���p
 �c�~ 'ofp5�������G���j�	�1��.��P���z#����77 \
��v�X�	$�E#���.��1f�^#&lt;1vF`/���$A�l�g^kj{�:���k�^P��� \
eL�x'�K���1)cR���2N�3��V�&amp;�&lt;��A�V��?z9���7�E&gt;$4����Z��+��{�;�,Z��p��k��1��Wm5w����ln�����/^�FC��y/��3_c����
 ���"��j?��;��\�p��G -�U8z���\L|�^��X \
�h������Kk������ORO�~Q�g�]f#a��Z�����X0�+\������� !�*����p����Li��'�0 \
H@s����&gt;8��0��d�6�P�����#Z�� � &amp;��~x�	�R��,���e��nG�6���+�PfE \
A���WY	����i6������5��P�G �9nde&gt;�����;K�-���{&amp;�� \
�x����p�8l�Q����+��g�������W�a���. 0 ?�{�`?�`b���E� \
����C	CV�j�t��T��W����Gp&gt;����3� =���}���	G����:���=�_�T6�s\o�iu�)�9P3�b�	�ipT \
��[��� ����A����[46�������IhM�����3��W��;���u[:*F�[�b�|b_�}��W,x����%�K�$.I\��$qK��$n�
  ^�(+}C�N��������� 
�i	n��DkX����a�H��U�������gh�[�&amp;8��\O�Ei�L5f����v&amp;-$�H���#iG���I���7igH`kig�w.��� \
��3����3�=0ig�|���T�����r��Wn+�����vF7r�/����W7��K��!yG����;�w$�H��,������x���%^ \
�7&amp;���A�[&gt;0���P�^P��{A�s�^�z[����-�Q�-��������LNH���#�GB��	=z%�WB�`�v���V��1eg~�iQg6zHz�{w��4��������v���V \
�f��M�Z%di&amp;N����Y`'8��b��o��)J��dG0K�Q��G�V�R��F%��Mv�m�w�7����Mn���n���n�Cn2����d+x���&amp;��Mr���
 8�.8�p"M�b���;��j�:%Y���f������~p��B����@&gt;���@&gt;��2��"_�����K�K�_��&gt;c���o
'jZ�/�z��`B����"���������r�X��(����k�'@�OV�`XV�`��x��J�n.��a�IU��I���$���)`�4��	�����8y�JFa[z1���
 ��b�b�
�T�`��
t�@7�
t�J7u!��s�*~�Si	p�H�6��r��A��v�;�=L�U��i�;6���6l�2�]�+�tx���=E��BU��w�zA#���| \
�,��n����n�7��f��6��7������k4����������?#y��h���N+�TAb�&amp;�I`�&amp;m3^)L���e@��^T5��^6�(S^K�2e�(SV�2���'S��?��Y��=`:���� \
w_��� y�`w?� `�6�
`��x��F�������g*-���4��_~ZV��!���/����~&amp;�j�Q���~y�8{�M��l�}3�� i�� \
������I����.��������]�U�Q�Z�e��c�J���� �Q����6�L;�����5��-,?��|���*���w�U�X1W�� \
�U`�s���\�e��g�b������W%��������I�3�� \
m��;�a*-�|�#M�|��r��0!���0�3��0W�|�Ns��0e��|d���W�_� �g�� \
~�����a�E�8"�o��tIC��4$ IC��4$m#��@�?����	�?��;� \
wE�����Z�w��g�g���&lt;�AxS�ry�:�][�"������x�%U+��W�J���+�J����Wte~����lXS����4�����4�G���y��$i�p�IrRd^4�!���"�_On
 c��[�H!�H8��#�H8��#�r�&gt;�"�%U���-yR~���)�`�JQ�J?Y
���d�? ]����`�8iM��g�K���/�K����_����q�)�����2��-8����4M�\�i \
��Mt�7�dWq��Q�)������&lt;z�����7�S MH��4!MH���i�&amp;]��!����%UY�%�nZ�tRN \
��YZ�"g�H��R����G*�����$QC����=H�j=��t���������oU{{�j����t�[���n�[��6#tk���v=x�� \
��{�*�����|/�F�%��7~Wo���n�-����rp��w#�*7o�p���\C�{~����wg�(V=��z�q�z��n�R�T(J \
�R�T(�2#���R�%��Ou��2��n�TiA�����C�*P;/{��w�S��zS��"M����gg�iG0�}x7���i�7���3�P'�	uB�P'�	uvL��������� \
U�Zo�ITsr~���?�jz��#�E��J-rx&lt;�jj��lj���w?����4�&lt;�����h��iDC��mh��v��ag�v��-3 \
��v�N�C���G�O�������hXIS�%A����L'�$f \
���)rFB�x+eL)N"��Q$&lt;����W��&lt;��g���G�n��l$��u���?]��/g���e������a \
��:p	�s8L(�p�)E�L�$����������1�e��YKZy�6�o'�A���V������.���z@�����T���H� \
t��}�o^�7 �/�0�n�v������q#�,H��%d���J����boU�
�����8M��vcCN�+d����e�������;|y�E�5���`��q0��-'�����6�g�zu����
����vo��&amp;��9��n��"��)79�� �q��A};��^g�����q�Kg/��p. \
E���D�{C���E�^�q�?a��{/�zcU����u�����Q�2�����U�^����Env�Rs�_�^����"�.�/w|� \
��.N������.��Cp�!8��-'B���������OZ�\���l.t�sX�\&lt;�[�bkMFi�T��_��E�MR��^V��h}m�N��A��~�7;������X��
 �!1$������u���#y6�w�n|T0�z�{��j[U����u��r��P|�qy�c~M���a����W(u?������nq,P \
�B]�u�.���P��nyu��n��s��A-�O"P��Vu���R��]u����[��R�X��'���,]����������,����X�������p�}�j����A9(� \
����A� @���~2������`w/R~rw�tKx7���;�7���5���]%��CP�}7�F����*n� \
���te����b����8�.�ZCkh \
��5���-'Bkh]\��8]������\����o*{j�q��J�+bp�n}�/��7�q��&gt;����7� ��\�rAn�� \
���'�&amp;�37q����n�M��Z�&amp;���4b���n���|z�n���]�lQ������G$�������_�~�o�����K���E��),"����X����"o�L \
I�"�F4�	~v ���z�������0� Q�/^��n���h�x�4��@Hi \
�r"���=���v��9m�vFzG���*W�����}�tmg�lw����A�����H��2��!"����d�)�����bCl� \
�!v��b[�(?`[!���Z��z�7���5��J\%��P�j+�&amp;R�3�@mE \
�le�m��&gt;��n&lt;����T4��@h�r"�����O���n��}�K+W�Fr��&amp;W�dq��"on��v�K���P�5�������i4��~�/�����_��O�5���������&amp;��&gt;�6�l�A��A�&amp; \
��a*x2^�1�h �@0� �`�z"���ig����8S��L/3m����o�o�,}�@��k�&lt;��f_~�/�����_�~�	�f���5����o��e�i
 ���`�j���p���H�P��
�L�����,xv��vN���I��Y:��x�%�/pb~�8fg���[(8����YZ&amp;���]���������� \
8?^�^���W�\ox����9x�����������������l�OVnp����]OK������^��u�,	��g���f���N����P^����V����(�~�������S \
3�:�� 3�l�t���&lt;v:����������{�V�����Y�����y�|������H�&amp;J��n/�j�z��b^�N��&amp;��'����$�yZ�
 @
P�5@
P��j����������I�g&amp;���= \
Z��L��n������M�&amp;X�������*�7-M����'�T}��������9�#��&amp;b�;���\��r+��?4G�W��\������P�_�Q��h������K��@
 �~T��?���oS��~tz�F��T���U�����Y���&lt;k�?A��g������q���q��$EH��!)BR��I�eG$EL������xjh�L������EN_Lm#'����6��~�&amp;9)��dK���\�S�$Kf*���I�bC���9�Hrl�)O�9�5�"�� \
���{TH�������~�/k���~�����~���#��W�|@sS��W�rR�~��������/Kf�~Y;#��� \
�W���/��R����h�� ��}{4)��A��H���!mH���-;B��v������]��n�jV�m�����u�q�������y��*�(nu����� \
�^}�E�r������G'���l �
yC��7�
yC��!o�;���C���~�M&amp;&amp;'�]+�,�	��l�'�3�8��$rz�	�d|��S��C$�����'��!y�+�84�C��84�[v��������� \
^��k�zN ���ky��rBw]1Ko��3�v]�Q��%'`�C������_#O'�1�2������q������p?����p?�o�������; \
��:h���2�f��\ ��dMc��@�2�� ��eN���(+ E�r�)3h�� \
��4��������E��%y�jW���ng��;�&gt;,O �����vq�j�KA �����Oo�+7�+r[�� YA��d�
�$+��� Y	����	�=�g�y���3�0F&gt;��%1r��FNJ2��u#������YF/�vF������kN��$n��S�[Q��&lt;@�I \
&lt;�K�&amp;�0*|tZ$�LnN����B$ H�( Q@��D��#$
�I����?��w��m��(�z(������db&lt;���OG�K�: Q����D]?�cI��0���xX���D1���l���o�'����_n
��C��?��C��?��R���`+��������n�I����_��Y�e���_Wm����F���`�O�mu�� \
��b9��yH���6���!����!���?����_=:�_ \
��~5-5�j�\�jaV�WE�������U�f���n�W��(����*9�8{9�G�bc \
|(����|(����|��/�������W�R���~�/��|Q4c��[d�|U�Q�����*���W���M����G�bc \
|(����|(���������O�0���+�qB�c+7���&amp;�1mE����`�-M�B����y�� 9q��}��=��R���� \
���A� ��p�OiM���P�X����S����S���/F+P��vH�������~8���|�3x��������|p&gt;8����g�i���"���|��D}q��}�2�G�bm���E������y_Wy�/ \
]&gt;�����z��6�tr&gt;yj��w�����A� ~�� \
~G�_���_��K�:�A��b���W�D��j����gD�F��o[�wB��u��z�J���e0y�?mx����������������&gt;-q� \
k�}Jk &gt;]k��iaV�OE�$}���S����F�0���P~�k��&lt;n#��.n���|�0&gt;�������%'����a|:�!&gt;E�K���|��4������jfI�T&lt;#�����^
 Z�=;!��x��Y��X���=O���x��U��x[Nl�Y���h��6�_�
jc       JN�n�n�t�����AY���vB���!TZCD�kM��0'��f�"T��d����F�Q+�����Y���'X� \
�e�Mt&gt;n��?m:����?��_v"���m����m�,��6������|�la^=������g�A�j.�5j�?0�v�&gt;�n�g�d���H��� \
?�����������?���/9���6������z��k}�i \
W��t�,%�.��0�.�������D@4_�}ng_����xt����AgA��������� :��	��� \
JPw�A#�a�����y�Te3m&gt;��g�~���P	�q��*�QB�����v:��������HwJJJJJJJ \
�D((��+���X����@���t��HWfg������|n. \
+�H�a{�����#�F0�N�y�1�������%'B@t^�������K��p�� \
ffd�\����g5��������m8��?�B���.����w�O~@nw�* \
�Dhh�nk��!��_`.G�M�� +�h�}`nuV=s��l$��N����������n�FQ�l�.
f�M�G${IIIIIIIPr"$$A�%Ar4�SId�B �hh�����?Y��'����pFx��[����'�N~�����V� \
�j��\�ay�=xM �X������z`=�����]�e�2��W�Hnp:����ry�/���~� \
��/|Qy�.�s*�\P�p��A�F4�D�w��� ���������X�D}}$���0���3{`�������};��}���e��;� \
8�����&gt;�fX�S{���?��#�!���#���*��������������(9����� Cb�A9\8u��0�Z��� �� \
�vzC^l7�)��p�6���t����q���PPPPP������ ��3�J?�N�/��_�v&amp;6S����kd$c� \
QI�u��o������ �cV�`q/{���i�G{QDU@TAB&lt;eG��,�C�����|�B�-�N�����p� 
����	; �f��a�l��������9 ������@� \
��	��'�O�����	�����O��3]2`H�D�}n�`H�E� \
��_H�`��&gt;�]G$���R�2Cr!t"v����9��*��f����CD/�@��D/�@� ��^ za��Q| � ��� \
�W�t�|(Y���d��d��a�X�x� )��A3����������_�J��raN�����V Z�h��V Za��D+�� \
i�N�&amp;��S&amp;�X�;i��2 /S �^L�@X�H���YO���XQ{V��{���?�%����!v
�~��	��'�O ���	��x��M����}/��y�|o������[0`�e�zob@���?�m�T�vyn��6$PO \
�@=�z��	��'P/���l=�g���@� ���!4�x[���	!X�p�l��O��j�r3 \
��u��������:W����!���(��  �(��� QD�p
@r'd$	S&amp;$� 'v:@j{����$�X$^@2[K
�&amp;c$3!�^�Yr���l�u;n�w�D-@��D-0jA��x���'dx�)�\�����N�f
�s��s�	��up��M��y���� V
�{�cym�����e��`�V*m��	��)��sm#�#0�hp�f���F��+}
w���n�����wYR�����������-�����{-e�nB��p�	u�&amp;�M��P7�nB��B�ZQ�JsH.]h�.�r��"���W�p4'���t��
 )'�2���]tN�R&lt;����:�\qwc{G[T����mNI����������v�*`.�D���r+P-&gt;i��M1W������|N��*K���Q�^�-�Wwr�nn���}����8���l��%�1@W"Y�
 ie	
�����B�
 40/4 w�U���F�x��x%1���� ������jz ������U  \
�	:^q����[.7��D�����+J2��P��������Y����n� \
��	`��^|!��+�g������-7�_^r�����U���l����E� \
���N1�{���B����*	�]r�����3$����@K���~Q���C{$�2��=l������^��-����w	���=�� \
�x�v����G�'[Va/@�*4	�C4[m~��7?N�_a��D�@6�������'�kw�P|v�U��7Go�F�y�S��P��:D�g�LB��?����sFh��O�m�Y);�y0�~==������na��Rw��Rw#7���F�sgHC

&gt; �A}�|��D}�4���C��&gt;$���C��&gt;�1}(��jhG�y2�C���u�g����D#�����
��&gt;PG����	���V:=��M�F��z��
o0^��j����h.i�k�n���g����fG7� �&amp;wZ�%��[N������3z\($'�)���C��~`��z��
Q%�e0���aas �%J1�]+F��9�S-�."BV��s�����;x����J����]����w�@���e�om�0����5��8������f��
 '���~tl��-�VW6xC��m�`?���s�|������C�������5�+l���?a9~:������Vg_���r���E=t1 \
�IB���&gt;�P�������y�&lt;2�M��JgG�#�+7�q��,C�7b�H��.���y����7��8����&amp;��bE_$5��� \
������`�����y���:&amp;������D���d��7t:��s��11A��nz���"����D������Z���6&amp;-[B�26(w�Y��&gt;+�J����p��%�880~����
 ��7�@�����Z�-L��n[��0J���'\������u�&amp;&amp;�]/t�O�W�n�ng`�0G[T���4aL���j��~ \
��]�P���=a��_�������-\�v5��}j��W;��tB\u"5��\\[~$fuqE�1P(���A��/�V��1��H��O+�p: \
?B|���y��|r��Fy��o�7s���PT \
��v"��x�9q�C@�2|�W���9\����[��d��+���9������]Q�^��t����X-G��[]��Bu��4���+c��"YA�p!���
  ���pR���"���O�~�d������
���k`���a�*�����*������e�9-��m��f�Y,�����&amp;�
\�gy6�o��Rdx�c�g����+���H�����x��RSI�LR��*,��.�O:11��rz�����9�����@��+�d�*��~��y���F=+����+����2�f�R���O�'p�8�w����d��&amp;��Z�I�$&amp;�v�v���r�)�
 �H���RU���gqx� U����_����RB��1������M���yYm�J���/]y�(�!��2�s�@����k���.Jg \
�LVF@Z����(T�U�J�J��K�YXm�j���	pAeKgg���w���a����a�P_]�r������k�!�K^�&lt;�c�^K� \
�t��|&lt;���t����l����}&lt;��k�@�`����������7CR��bU������![_��m{V'}w�=7�PURXa��h@�r��b`8PU+��&gt;n��Y=jV�.Q��i9N[I+��ID��"�]4	&lt;�Q��/�\�����\ \
����Bvf�a��� ���W����j���,K�KoP�j���ly��d( \
?M�,�Eu���gg�[�����SU�������&gt;-ah��9Xk�Op��B�����Wx�Ci'�n&gt;9�r \
�.I�k.}���8���r-ngF�ml��w�sy�l��u�t��P��f����U��l�����6iw~���^�Zvkkv�u� \
X[�=Vh�pi��9&gt;�XMc\�ev��y8o�s������0X��N����e ��X�&lt;-��EP�EP����)��� \
F��'�(��� (�`����7�l'i�)m�m��|�����nuw�b�:*��N�����������o�d�����S�+��%Nh�� \
D8a�d��p�ee�H�AK��u����P������#�p]�0��&lt;��5a=z1��P�C]m5y�j3�&amp;���nyQgTR.!P�{B�08�� \
[�P���� ux9eA�`�P�8��7d87��������?Q���� \
(���77�����8B���c�%vG1��Ukad�n�'����h���7�C��;�L���f�#�9�@���J��z�%�� \
,y�\~/_����Z���0y���rs�2������"p����!�m���"�/rJ's}Tc��5vJ�-�����g{0Y��6;�/��v��� \
���?oN�V&lt;����\�i��r���s+�=T���C�/��&amp;���~�����sT�8C�3��������*0����Q��(��b���],�Mt \
7��Dw�Z��n��G��'���&amp;����Fw�c)����Tpe��Wc�o	+�F��1�IK�7���i$�0�,��f@����0FR����\_ \
]%ga�W��A�������Zh�~�J�p��Hww�Y[A�.pb���#�G\��_�i#FP�|v�!P0Vb�hF%�-�b��l2s;� \
5���n�T������Z������-����x��"~�9A�^�|�����xlg�?�	���3�[7�����bPq��P�{�^2��i�Z��:��&amp;�' \
��o|f��L��1���7����M�	R���5�6u&gt;�~?L�]���E �_	ea�&lt;xN����&amp;�=������ \
^a�}+�������)����]�	IO�Y&amp;$MH��4!iB���	I� \
$-r���u��qX}_�4��=�U�PT+7aqh�����:���k�e��P]�g[@O�����F~�ro� \
$����=_�z�l]j�����%������g����\.����*N�?���F1y�������rTQ�Xh^=n��cJ��K���B�$�Q%!������������#�H�$����69	Ca���
 ���Y�7�wG����w�q:��.J��ug��{!�`�iK����]�p�ysr��jK����Z������� \
�9��"��b���x��&lt;N��:C�D����I�?Bf�������+�_��MM~���x+{ \
���'�fusg)?.�f�&gt;��:��^��7�7�������.����h���7y5zJ����7w?|#�^=�������������u���:����_v}�X��&lt;Xr{*���BN��9�65��	����	� \
'��r�������YH��C�v �6�M�|d��V��5����T|�&lt;563 U5������Z[�U�2����P~�I \
��Dx�f[�	�&gt;��[�� ���,�Y�C�`C���h�q�esRU��1s��6���V�e������i���sEO���F���1��K�v�z^��~rdQY.����M��!d;�=X������B{���Zg��c��lH^#Gw����� \
Q����?|[��F��M2���L��-EC;_���kq�[���P*�ja���Q"8�^�]L*��Yb��-U�B���Q��8��/ \
��?\�����mN%S�O�5n&gt;��Qw���S�^}�s.����-5�xi��]��{F1?��~r��	���z�����ig��P�����/�r \
KsU8�m^������"g�.���=W�R�Z�v7J�q-�����z�-�������4����z�1�eW�����\5,Lj�dh�����\���6 \
��M�����Skql�'����i5������C8�~�2�3c���Y��XM.5��:��N���.gG�e&amp;F���U5�\r��s��q'�&gt;��p�-��'���$�\��_5�}���P� \
�C��9r&lt;�x����W�����&gt;}��.�lNRVt-U}��C���� \
�)��rJl��}}n�~��z�N����D6T[J��x�bV���&amp;p�5�����s�c�qo��c�1�x&lt;����c�1�x}&lt;f�����s?���}Ch�	����#�O��o8_����i���������5!NRg��E������qeD� \
�K� s�L���k�7�+���*�_��
��E1�wfa�F���,SQ5?u��LxqBV�x
�n�
x
�^����k�5�x
�^����������,�'�C;MP��C���5�����Z�c�N�sW�d���
�����l}�[��n� dW���G�^� \
����o��$i����*V�m��|�'���,'���H:�L6Mj-t���!On�r��r������Y���G�C&amp;���djM� �A� \
� �A �@�2d��&amp;�hi��!����9��:�u����C�����[�. m��� \
�d$�\X��i��~hI�h�NR��Zm]RQk���)l�����R��Z`R,�=���Y'�qZ2z��������e�&gt;H����u��X��[�o�p,��]���&amp;���(P. \
\@��r���R.�&gt;�u���.#f \
4B��+|��9_���=���'CH�f/|2dG���(��y��VD���+.'W����z+��j��,��0��j4L[����� \
u~��G��0������y�j�z�o_������b��a����������@p \
8������B4��_d��W�A����@�k���S�S����O����t�b&gt;�N��]w*�=K��9I��_�T��	$�5��$���d@2 \
�H�!�:���lQKP�2���`?d&amp;S?dN��!��6�Cf@����w)��D����C����,�p`���I���������K�?��E�^�rV��&lt;��@�����@����2d��9 \
s��2�!��[�V+ ���:�X�*w/�Cc�u���j{����y���EI�� \
��B��k���[�7�n��������2�u6��&gt;���e��z���e�2p�\.�����2yl�3���Dg^x���H�^���i���L�Q��F�x_y��^�&lt;�5�:S����RrK%/_�n\��y|����R?�R����Wy����T�i�����#I� \
`���@��8V)��������$���q�%3�*�+�-�t%l&lt;�I�4I�#/#���e��6@  �h��,�m�6@ 
�f�6��G��m��&lt;�
�x��o�7���7��
�x���m��h��m�6@ �2! 
�h���h;��O�s�U'+&amp;U����������|�|���f�u{�d����)��F�0���O�'��	�~?��k�'�)�����R�a4�G�������;�#� \
�r�O��#���5���NoG1��7�b�������N���eO���&amp;c������ \
�������TL�=��E�uY�:$���Z@��w/���&lt;���/h7���;�{�h�jfm��u�O�jH�&lt;����;O2�*U�-��%Dj) \
��O������������D^��Rf����\|&amp;F�cAy�C,���*NT�)./N�EpU��Aw����ez�����C��K/��9YId�T, \
��&amp;�r/Q���$�[D�&gt;�li"k��R��$�w��.�������(������t�q'fk�y!	��������6dA��j&amp;F�)]yO�
 A�����(�W���P������C=E�\�'��f�	������(&gt;�PM��	5M�D�O��l�}?�����]ARE�*T-�����.��@$��N�*����
 :�{�]����X���G�����D���i@������	T��:t,�X�� \
cA�������_*L3+�Qp��z%l&lt;0Ao���O��&lt;��;{���$���k��a�����""�T����S�jz*%�L�w������$ \
^���:=�9�]�~�=@��tu������������J������[I�goooooooooo�x��  �
�
�
�
�
�
�� !DDDDD�"�:f���m+��2)em���U_v�����GW����z-�@���6�'�gW����������������������� \
�SRmYs�C���SZWs�����S�����7���9�=�?���v�����������|�����g��S������5�dYsJ]n������&amp;$g
 ��I����Q0����+?&amp;t���0��h�@66�V�BI�����,�R���?�U���������t��ddP:���)�����I�r�0��*�bjI���B�z�}�J-[������9�3�����z�=����$���8��������(rJz \
���:�m0���.V����bkN8�������o  \
D�jc��$Q#9�A�[$�����:���X&amp;��'�[�FVi����q���j�2��B�\ \
_eyW���J�����O�cm�N���c�~�N��Q��H����u�.5A4&amp;8�a�{��'����k�7A \
���lAv��3�������ru������*E��.��NH���]h��F�iKz����T�n��*qn���1�;)�U��q�g�UXKA���H�K&lt;:$���
 ���;����}����^����}��h���l/`�f�g.��d�����$3N�/��e���&gt;�.��s�=&gt;��1�������L��w����G�/��;%���/�/��(�����������+���Sx�~V}o�{d��f�U��H�s^�A�`
 z���$y��u����|"BU�U����:z�?t���r�\u+t�\1��\]�������Z���.w����[�U�f[����P��~r \
_m��&amp;&gt;�2)�M{�;�^��2�k!z!z!z!z!z!z!z!z!z���K~��jb�^Ib)u�gnu�����Lt3=�B��]���)�ZW� \
�Y���:�����/;AD��\8�Y���Yd�Q/���Q9�@��?qB����wf��mve��MI�{G�y����������Cy��\\,��=� \
j��s�tS	L��fD�"���JQ��&lt;,r-�?:��u.�1����d*�t�|J&amp;����f�'V�I-���G��Q�����z��o����I� \
e�eBC�&amp;������cgG:���`*��sI�E����S������q���d1�����q�������9q:������7��S��H	� \
M�?-n"w��-*��}aMI����G�,�������F�F�F�F�F�F�F�F�F4��~x��7�^Y[�������X������&gt;��1�����������8�&lt;��\�qYm+)&amp;Cl"Y�����SMT�k���������}-��X�_c�����"FMd-����Os�� \
i��������������mE�O� \
��;�8����9+��Q�.zw�gC/����l��M�LZ�U:$nqh:C\aB�$��N&gt;��M�\w/:wL�wso��z�,x��� \
/G�r��G�D�j\_�vQ�Q0 \
�������{������Qe�OKi����m��Jv��BM�J��rDue��5�|��'�Ud��b.�g����g����,�D�	���=���sg��afG�//��+��6�[dC��Q�l��u��d�i�F�f��r=L�M���	t���#9�hZE� \
,,����G� \
��5�����Gglna��-J�����Sm�M���Yo������c�����9��b������.�X���x��N�u��V���a: \
���A���.�9���c��SY����b�V�����Od�_�k+v�?d;#ke������#��F[�^��g�Ws��r�*Q����C \
L[���b?s�2!�Y`�+��A���&lt;0h�2.���������������������1�c{���=?�c���kg�e��&lt;4���k�i�|�� \
�t\����`��J��j�fW!*r����d���Q��G�,��{T����x`���J��-��)������������h������t������$$��#���__�gi��0r�6�~H����0�y8+0��,Ty�(�i�O,���nXG(0�E�� \
�HL��'���"��Y�Y�Y�Y�Y�Y�Y�Y�Y�Y p���z��pp���0�`d�b�'2lR�����e��z&amp;����i��2�� \
d�v��1i ���������m  �2�PPPPPPPPPPL	(F�����7^�O���_|�Lb�#5����3m;�X] \
�!@4(0x��� j�p[������dR80\cu�k�k�Pd�5�5�5�5�5�5�5�5�5�5�k4F�w0@�:����Q��P�-J}c�V�5�� \
:&amp;&gt;x���h�e s�Id6�(����P�������F��T)s��uL�b�������������(�������;t������,U+'��OR5ZM
 X���jM_�]FX��}�y(����g���S��[��{k�`XF~Z��uco��C����]e�����.
.�,���x���^n88�F�z��Dr�n�0*(��AJ�U�v����F��"�)�x���&gt;u��~VY�JsV��J�F�0��;g_��]������5$��lc� \
4�(�^v7``�`�\{��0����0����� �k��zM��K4QS���(�
T���9P��.�xm,�9� �}8sf��������������.��i�����Z�'����K�� \
��z���&lt;������P��N��������Zb0�v#�u�*/�� ��je�m��b^�e� \
���L���(r������&gt;�����Z!�ymH}}EH�^ \
����&lt;�4"yi,�cA���%�%T_fw�!d�"^u��!�L�2����8:�c+���_x\	������������0&gt;S�K��v����\\��'�����}MS�����pu \
��_6��,SI,0��^�6�K��(t���2{4��&gt;1��T������:I|�n�@_$�� \
Oa�5�E(W�e{��hR�(#DgiT����s��q�wm�����oW�M&amp;�� \
�{��L���Rw8�2��y�#���+�F���N*��������������j��|q*��d���[��,C���Xl���m�)�����^e��G�������w����O
 ]=~����N}�Z��H�:E���,�[Y���e5��U���nA�dvt�}s����2&amp;L@���N \
B��x&lt;�8���\�}��e��Xu���`&gt;�-9F����$���+?�~���yK�����m��Z7{��RvX�N�-p�y�&lt;�Kp��,\ \
\�N?..........��p�q��4������q�S�f�,I.f6���,���RZ���������1�d�d6e���NG&amp;� \
�u�Q=�����+�r���s-6���f�p���A����5�%����Dh�:�h^l�������+wC3�n�;��2M'�+i`������:��:~~���	�
  1	H�_�5����0���&lt;6�Yp��3���0�^[���L=_f��R7�P���v���� \
�����������U��R��p&lt;����^��.��.^��f \
����S	���\����4���FJ����w`���`�N��Y�R����MD�td����DqDe \
��I�`��W�t��O�����r��P���{���0�|C���*�t�f���w��Nv��������e��@6�/�s..�i*���#�J��} \
kku9;kK���w7�� E�{W������c5�j�$��=��L1�&amp;�\���:� ]&lt;'sn�����;�?5�q�����
}Y��i0};�,�������t=�����g��e���[7=����m���G�I��e~'����+���NU�]�Gn��c�o���wvw��6Z�9���r����=�g�,H������u�t�y�K��G�(((TKkP(P����_ \
P P P P P P���B��6jk�������3�������T�&lt;���n�7�5�p������-��+����P�e!r�y��Y�����L�����d=��i�S� \
��&amp;����zK�W7?v���&amp;�K�b�D�av�����k������}c&lt;�����7/�o�� �%u����Dn \
]$:L��3��YZ��b���~e���"��Q��T��3�����W��{��8j��#�@�~4V�� \
����XS�W���k�4���U�]-�wya���� \
G�V=�������G9�����z,}5r�7�b�LS�����jW{�u��I�x�5�k \
�9�������~4�k��8G�%4/Co9��������^m��~��{����^�h \
u��R��H���k��0Fu��@N�&amp;M�V����uI�m�'T.�?%��6�=���#o����������VW��B`E���*����D_���yMX���",��	K�2�EE�6m�j��p \
,*�{��D��K��V���1B�.������	����	����	����	����	���ONN�!&gt;��W���.��&lt;Kx�e������������y�_���X�"� \
����Y)k�*{6_���G#���kU�' �]Y��@N��=}���/n�0Q&amp;&gt;���9M����CY�����( \
�co�:W�&gt;���P�:��E�DmEEEEEEEEEEE�$����o&gt;{$�v+V�|���5yy�5�����(Yj�o���������"5u�W]�1���8�E1�mS \
�[�f�����kgt��dz�Y�%sxRb_�.	i:]��i��W'c�2-����/��:�����~w��z���S|LmE�f�Zz������;���v���1��*1�D����4�2�Wf��&lt;5��B�/r�N:�F^��p�4�k��z�_�ZD�	&lt;&lt;g�
 &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;�7��b]���o��C}}v����b�.)�h�~�%��*��B�o����TN�\*�*�[L��^OI#Q�U&amp;���
 "��A���*�j���%�����������U	�X���R���O��Xihu�uI����)E��o�'AC���3���v�q�;�yY;G� \
����������������?��{���}����NqF��I���R���������Cn����Y*�3������M�E�sBJ�������&lt;� \
��aB�2O8�� ����K&gt;H�|4�����������H&gt;�7LK���H�&amp;�����=����~�������Y;f���\]�i \
��[��.:���"v�0�2��&amp;� ��{���        �� \
���U��`uOJ{����{�q�t��"�I�EX���/A��@&lt;�D2�3��������b�T��L)�&amp;7�~f�l��|2U��#�'a���~%\T�i���iiiiiiiiiii�WH
 ����Sxv	T��z$gJ�&lt;���)���zz�F��������������������������rz��`�j��
�����t��48���p(q(q(q(q(q(q(q(q(q(q(q(q(q(�(q�Q ����� \
��"?#�00000000�{���8 \
�g���&amp;���8I{����)s�mf(x��iM�;w-|vv-+�:R����}hkiw�Z����Zb��0�a��9s�'����s�O�������6I����a5q�&lt;
 �����l��j��tQ�&amp;���r��m==�m�6�gY�5=���L��U�:�$D\9G��8���)�W.	&amp;��� \
���S_ie�����q.��oW�	 &gt;��h|U��--?���@���0E��D�) S�(LQ��0Ea� �)
S�(�����%��0Ku�j���r� \
l�N�������dN�m*�E�N|.���\�Zk5���uM��g�zj�.�����i]W����J�]}�H�H�#�������4���[P�	d{��K�u�I���P&amp;�IT��Q��^�R�V5(It����V�6�: \
�\y�������&gt;�;rZBa`�X1���w��W K��� \
�0�.�b����&amp;�?�W���oC���l~(�?�T;�p���6�OW�0\a� p�� \
��+W�0\����:1��W'?���p�����&amp;e:]����:�&gt;��R�l!YN�����V�����Tk�)��PFd�fc�`qC���n3 \
p�� p��6�5��xF2����d;��E��P"`�$�M4��{���pZ���Y0�Q�}��Z��4�I����[L����PL|���p�p��t�*���RU�
 �S�&lt;I���N��Q�2Ub� �9
s�(�Q��0Ga� �9
s�D���S�g���	�t$�|1JEM���D��N�o�^�����f*���/��i�%/�P��^�qm���#/�$a0]�ui��F��r��o��n=�����m'��+G6��q+6Ri�"����P[�������������q~�$"��4��q*��� \
�'�z^�	��6q���7���u��N�z��N�K��m2�A\���]�����^g3\F(@� \
B�4�l���Z9\D\�`�����n�A�+p�"S��q��c��MI��C�zJJZ�Q�'���Q�n��0De���!*CT��Q�2D \
e���!��Z�b����������gY�������sy�o^���]���\���&lt;:Q�������*oz�-�]���*V�r������F�3"B�8�4�L�V����"q�6�,I�W@���&lt;�;o�y4������*H��a��7B���N���)^
 U�p��xa�=a��Ol���jO�1�������;w��1�cp�����;w���#��W''o�&gt;��)����
,!�� �&amp;���3 *7Q*�:���W{�E��a���e��#�~}�nt�A�%�a������f��� \
�-�����Z�#�V+���%��Bm��5���#��(=���Z((�\)E��)��vx���p���&lt;�����aJ \
���h���S�0�+����x&gt;�����_��q���\�ZN����/�{��@$ \
�E�z$��q�2����c�hG������M�3�A�1��^b�%������5�����{$�l���QX��R�E��p��nv6} \
��4.����s�qme���#.F\��q1�b����#.F\�O�Ef&amp;o�o�O�Fu���Uv�s���t������7�b4\D�K����I�`r�^{��3y�=��D;+�BZ��� \
�_��+���~����G���0�YQ�+tK9h����e�D|�m1��������W��������O@W5�������jc��	=��b=���P�n0�zHI�z~*[,������T���6�5�+���9��*�I
 ZT�f��S�tTtQKU��4�*�&amp;�va�k�b�T�&gt;����d���E�!���/�x"�C�(F��K�����`���t:Y�� \
                ���6��^� !��*�b9��!UV��[�
!t�����xI��rd
D�����&lt;��L�;�B|���S;�X1&lt;1D��Pn9�T�chT#F[U��	F1\i�uP��������������
�4��Q���q����P'�u@��kbAN�e1�3' Y��l�|�|/h�/�a���E� \
1IN������Mb���&lt;-h�.������J�~�����v�C��^�8E��kc��:J���"���5�:(�*���"b���B�V \
24T��"#����4R���S��B���9����&lt;��y���������m:�+�)j�IvS��x���R�}!���2�5�xJ�P_�H���h�����8� \
�z���QP��|�q���noOogI�����~�e��#^��������O��;L�����s���c����}��@� \
J��^���r�����?��������&gt;-[���E ���}�p�	� \
W64�F)����}��CM���W&lt;�G�����	�6���� �� \
_Y�'�D��yT�b�����������=��m���z�!�����4AK�X��O� NK(%�$X&gt;Y�r}��������lpp@� \
0�! cx���L)����U������ S�x�����y �@x-K|&amp;��kg�:��P�K�sG� \
��L�&gt;.���l�h�"��I������pO�o�5�M���o������/J�6\��Ld��u���t� ���{(���M���� \
�W�*�pZ�lnx:��(��LJ�����0U!�u%�+*z����J�K�&amp;:+K��	�\�i�7H&amp;�Xc�m{�x� \
���1^/n�����iuFTq1�����;��S�/�p�S�j{�Y� vm��a�1v����P��S���6���a� \
����05R{d�(s����4��q,���^MkY���:k�S�Z������~�����&amp;d��"6&amp;�GUK5�5&amp;��GUS5c5&amp;��GUS�u��������[��������:��U��,��?�"~��h����v���D����:�����S��aUe�W��}H;�� \
�V�r�x7�'{q��6�98����8����8����8����8����8�������^�n�[���[fdGU�8&lt;��l5��m��%]Fb���1c$�H��X��&lt;Fb���1c$�H��#�����B!0��Zz�!42���d�a�9�Fs
 ��5k0��)�X��F�k���5k0�`��X����D��c��
��L��y�2}���4����0
cVcj�4�i�0�aL���1
c�4�i�0�aL��k�
�9&gt;���)&gt;�S�6�Uq���������@�]�2~H���T�s `���&gt;+�����s�
z��o�������K�j]�)�:zG�N������#;����|�f{��-��g���m��QI�#��(Wx��n�N� \
���m���5����S�R�c��]������yp/v�f�r��� ����C���, �X�*�*�CJ��F
[UV����60
3\f��p��2�e���.3\f��p���w�*��P�XN��-P�:Z�c�-m�b�)����V�yU���)7��n��d�E�I���'�*��aV����� \
��1������]8~�U���^�� x�����b&lt;�	�. \
F�G���m7�xf'U'r������&gt;�6e�_�`XV�`XV�`XV�`XV��?���*\���0�YDj�^m�\��VeE \
F_E�|����Ds�*��x�dx!?^�/�BVM�����s�9���O4w��x*'�;�j�\���dr���j�,n����\�\�&gt;�d�R��W�q��65e�}��1)��,'C{��zi_��%E�6z�
 ����$���"�����t�����&amp;!'ED{ADEDQDEDQDEDQD��E�ntJ}���K{�������B���5�0�0�s����_�����t���m���o����h(���]��Q4
 EC�P4
EC�P4
EC�.J�u)��eh����@5P
T�@5P�����j ���j ���j \
��gRW����Y[�L�O�&gt;~���ih����i~w3����ih����ih����ihZ�C���-��-�~����l�6�� \
������3ix�*���r�*���r�*���r�*�;��C�P9�r��2Y��'�3��/���%o���� \�|�4�5p
\��5p
\��5p
\��5p
\�nd����n���am��X���amX���amX���amX���am����vC���l ��'���l ���l ���l \
���l ��7w[L��m������P�,O7�^E5d�M;���D������&amp;����*���x�N,���F��$�W� \
�x]2����`)po&gt;[���g������a��+���2'&amp;�e�.&gt;S�h�I�v:��x������I�yX��;�������seV����s�6:��0����T��47�I�=����
 i�}��`��A���hM)��.��"��.���"��.���"��.���"���1y�
��W�_�m���g
m���`���?d��eULm{u������� \
w���|gs4\PE�bWw��tUm;�����]��Y���p�Y��f{#E��}U�#h����$=�q���s��|�p�u���!#�8�x2��4?���u���B2��#) \
��k��M_56��V�����S���BW�&lt;�~X\r��bQ7u��V��de��������n-����(�Y�\��G�n�a�'a�����W�g��h"��}`�a�Q�;����8��[gp�i \
����%�1b{&gt;������9��w�KA��,�:i/���!50.�� �0.�� �0.�� �0.������|ck����_��%�f \
g�Y�������(������	[��4�/OY�M'��(����(8 ����(8
����(8
����(8
�������J��Ju��z2u����O�T.��a&gt;�%�7�Dy� \
������Nm��k3��y����������qwv��S���u���g�����K���x��4����g/,���t���Z�(��B����k��@���+�O����[c��K�u5���:m��H��`[���H� \
t����wc�3�a��&gt;g�Dh"4�M�&amp;B���Dh"4�M�&amp;�IM,������������q��_|����zG����p�n�&amp; \
O,��V��t#7R�_�I�U�t��;n���ss�����Y�����5������i�f.�����j�/��h�	����_�|=�z�N�^����t��J/7�i \
����vgd������$���93f^4q��5�7�0�]xb-��� \
����Z�����l���Y��_y��YlBR��kY�w��t��b�}W�F:�@��E�g7��E[M��5������@z��E�XM����Fm���|��1��r�^��	*�����4�n� \
�/��������Zl����,�*��9N0�5����6��m1_pO+-sl��!����������um���� ���;�,~D��"Z \
W2o�"�f\5��'�E0�����e����s5sG�56���X��W��(���G�=P�+��e*P[��������2�&lt;��I|l�?���-� \
� ~]� ����H2��&lt;�������:���Bj������tp��-sp���0R���� \
�0R�H#�0R�H#�0R�H#��_��y3]�*� \
����&lt;����W�t���%�x|�M��������u�����=�Sn����n��0k]�w];��Wj\���C���b+�����xu{4��%���5R��,����O� \
?�,V��2�7��Z8N�k��*�����o���F���e6��X��Oq��1�����e�h�I�U�4��+�TLiX]k��nSb���3� \
����1������Y��dRGG��=&gt;��%�;�@����Cx��������}�������}�&gt;x���/y�^���7��^�KH��� \
SL�]�Hm�i�G�r�n$�2�DLl�������k�����F��z�F�j�����m6Z�������,�)�^2�1zS�����N/�� \
l(��[j���J/&lt;�f�]����U�N���qih-����_�������o�z]3w������������������Z;������ii�����p|������Vnr�����'����T�V�������G0 \
e�=��b����������5f\S/7��$3�c.	&amp;�����	lw�KA����,�	}�z�)�*�U@VYd�U@VY���
 �* ����
�* ��� ?�U�n���T��s�B?W��Q?W��L�n��1}%~J�|��x��U1-�6Oc"T�����h��� \
M:���G/��v�W�������y�����zci����4�a�)����b��Y���o�/�l����;L�=���i��`Z0-�L�` \
Z0-�L���i��`Z0����d~�K��M&gt;'�K6�?��yK=��g��Mv��������������z����wJ�/w�N�8^����� \
��������4���z+�J��+��6�����9�=�f��jp�+\�_�|;��.��9�cv�&amp;K��XU0�x����e��A�$���dA� \
Y����dA� Y�,H$���dC��d���z+�����y�G� \
�(��4�6��5x��&lt;��[�^����z�X��-f��n}�&lt;	t��.��N����!��������^�����/jXroK�F&amp;�En��Nv4��P�(�v���p�*q��&lt;��`�D��v����;�g \
����R�@�^ i��:z� �[q�����q�&lt;)�|�A�!��@(5�B
��PC�!�B
��PC�!�j5�B
�&gt;�P;��;�������Z����s;��4s�p�������;���k�f��^�\�&gt;'pjf�xq���G��d�&lt;��9�L���;���UN�@O&gt;
 ��� H�('�#����J/�\����FT�k�~��\Nf�H��"X�.'�=��{i��a��`X0,+��`X0,���a��`��0�9DX���nz��C����q�m�VC�Z}[�'��l�v9����k4�^j�i���}��b��a�4���fA� \
Y����fA� Y�,h4���f���2[ �G�7�1l�S�����M � \
m��E�"�+w-��Nd����Bd�.Y�,D"���BdD"���Bd!�Y�,D"����PZg{f)���ng��l��H \
F����^�C��\�r�Wgcz�.�����vOON���R��f��w�81i��O�EUpf�u���e�	;��r���NG�^.���7`vf&amp;��?f���/C����;|����r�� \
�?�z�}��i�{D�������\f�c3}cP�8yp#3�dg��U�bbmKJ.�0���\x�!����� \
s���\x���~g������0|�� �:��(��� \
��CPm���%X2!,���7�j����SJb�st$+^�_V�s�s�s�s�s�s�s�s�s� \
s��G��I��&lt;Z����9l�$��au:��Y���X�d���vFj�Hb�&lt;a� \
���ei��)�������(xn(�0n*��wShQT�XFLj�x���"����qJ�Qi��f�bE�M��x���T��Q|6�����Q�� \
�^�4���t&gt;t�]��)�^$��3n'{&lt;�b�h(�Yp`\`\`\`\`\`\`�������������������������������^��h|qhM4��q-���
 b`wV����OO���Y����?0���88z�	8888888ZGGGGGGGGGGGS����"�=���K�T�O&lt;�&lt;�-�$=N��j \
C��W�1_xO�*X��[qB����@�����^�`��J�=��E&lt;�� \
4�nf������X��Bi����HL+�Q���.g/�UF���LL� X������j����TI�x��Y`���RO+�6�� \
�������FRW�"j��;9)���I�� ���$ ��(;bU��'"�1�D��g��
.z� ��*�V��
�A�@	�x�d����/.7B�����S���h�|�*�I*�8�C|�U����L�&lt;U�����9_���cm��#���8�(&lt;�{:�f�F&lt;�2�";�5�3L&gt;��"4���8	y�y1�h3U+�*uI1"��q�������ry�Q��BQ��� \
�\�_�{�{������	?��I���2�z��/u��z�J�z��]�{UI���W���k��M�Ci���	� �J�(-PZ \
�@iPZ �@i���J�(-PZ �4PZ�B�V���vrA7��_Q?7[�[i_�W����������xa�� \
��_��%X�+]-���i����r7��+0d��l��.\����M������H[l����T[���7!�Y�^�A	a�����������=�lO�� \
�����@��o��}S`���$O���T�����&lt;��5~����o����_wwwwwwwwwwwwwwwwwww�e�~t�9��2�l�w���/\���l�lb��~EkA�}�
 ��&gt;L��LL�/LLLLLLL���������������������b3&amp;1�M��-b���_��������'3����7S`� \
`�`�`�`�`�`�`�`�`�`�`�`�`�`�`�`�`����8q)e�H���H&lt;b�3��_�&lt;_�������no����*�Y_�9� \
=5qt&lt;��t��T&lt;1������~����3�����N9`3��y��v����������� {�P����}w��������� \
:l��������!�\�T�pwA��|f�������}��u4�������D�&amp;u w �M�5 w w w w w w \
w������������^��0g��;��y4�y���I�����w������t�i2����r��cj��25���]^��I��|������ \
@�2d�� @�2d�� @����G'��8)Q��A.� \
��,L����l����0�Z�P���G��N��s���a9��N�c*�J�f}7��D����we����,�(=���7�:��e�(�~{��G�8�z���aR�W�F�f�$Y����P�R�_�Og}6����v��]W�
 �
Q�����'~"8X?%U��@
D�����w\�Ib��,��v��2���
�����Ih�. ]@��v����v���h�. ]@��v���.��GY�y�FTN� \
�de-�o?�_����yk����c���50��cvd.�����gv��X���5&gt;�9���L���x���@����Z�V�j"�Q��I��x��d(��L���jC��dQ����w	1Q�o�G/��by�8f���o���7�S� \
D� �x��B2kX!���f!�;�E�������Qt����x����O�tp20""�z������q&amp;����K�3O3�DW��s�b���-v�2 \
G��&lt;s�eW�e�����K��l���aM���5���r�z�����A���mW�#��nn�,������'�����-s��u�Ur�z�\�"	V��o$�\i6xMuF.�j�m��������h�m�(SY��'
 :��A��*�h�+�M��X7����m���0�&lt;Z��(%�����B�3�Ot��'!�&lt;��	��q�����Z�Q��B��kFav��,��&amp;�Vez+H����f*�{��Rv����3�����nb�������(����pa����VU[E���N�} \
s������b~L��:{Y1��\���l��b�}��&gt;��LD�����{4~z����o(����7��W��@�UGS����,�5�l���i���&gt;�;��wwC"t�D���9�]t�]�e+���5A�.s�TB���B�/ \
�]{6��NHq��]u�m��v(@�q��\j��]*X�%�!�M��lt�m�jx��go=o����G��/3�Iy� \
���eO_&gt;F�/�H�[�'�}{3�GA�}�v�����]�]��P��1�F�3����D�����{�wNS���t?K��`���0��L�_*�no��C����� \
�C��~��{���4��;� ��h�����&amp;qw���%�j�&amp;S�P&amp;�&lt;��I�x	�c \
/����$�:?;.�~�W�{�=�~��������{�=�~�7�=�+*4��y�Y&amp;B'I�in��i���`�f��E��Xf�4����A��R�\�j \
�8�����n�^&amp;X�Q(/��js����v��|7�W�����+���R/[��	��VBRD��8Q�$@j���6-�N����`N3N��� \
:�..�K�,���=��e����Ti$��1*�����u�]�M9F��i����^���5B}Q	�U�)e,����t����}W]4�lt \
���lV�n��F��u��=����,�T��������UY"�U\���K�C:��E,��=��(�+zN�JK���U�M�Pa��;q�����K�g&amp;�&amp;'d��/Tb��_�y
 cuyp��l=X�A��K�W�8}��Z:.���y���U�syU
�J� �*82������t�H��M�x)M�2�����9-��x_���������%���\��l��yv�w��2���khw�
�HX������S�Z�� Twe��4�7�^�|�yF��������R^_?�����V�6���f-��Q���rE��v��6Sra�G�����]�Q�������7���;��A�~e�����A� \
z=����A� z=�D����A� \
z��@�Z��aa�N����"����FQ���N'a�4n�����w��f���4P�&lt;�ZxT�]�����==����D&amp;�IyD�q4�De~��C��8�����8Z�F�
 Q����JR�y�hc��&amp;��&amp;lw2g��b4���������7�L-n��w�j3G����*���6V����P��3%"Q�*����WUl�+��46J}v�f������TVq���v���x�rMi/���#�����Ft��.%��\;3�n���U_a
 �u�K��4��)���ry�Yz���&gt;��$�����
�[����\t.��4�84�dddU&amp;���&lt;� ^)������r���O�~��� \
en�N.J��$��/����_�|/���G�q����%���A9������^�� �!���3D����@x%n���.{��L�q
$�'}�9����dN���0�[������[[�7*����S��{&gt;��m�����m���$�(�V��$h���v��%AT�y4�O~c���;A����$�R$�
 J&gt;-%��A� dP2(��@� dP2(�J%��A� \
dP2(�_�����w�7t���v�~���/~��I���z��x	�u��MV��]�g�&gt;���T�����z��erj=��(1u5����U��R��}�Q��:Us:�R2�t6�l��x��id�gLG�Z�J \
��5��*]s](ij������-�'��fHZ�3c�{���W5w�T�T�9���3� ��	����O�m�:I-�����P%VGZe|;e� \
��bv���@q��J��i�������!�IO A��@R )�H $�* )�H
$�I��@R )�H
$��!iwi��}��]yW�Uq��z	�1D�g��J������)^3��,3_������K����2�����m��J�,��b�{*k���KV	JIi@
 9�z�� �K����i^�i�#:�h��B\����xm1�m�)��9
&gt; ��%��K�cHP��������_�����O�����k���3�N=~�
�	�^��?�=���v����j���g`}�m4�2���u�����P��0��B���n�f�&amp;������t��j��Y;�j��9�'@ \
wk�9�@ ���@ ���r9�@ \
����&gt;�k/~��{�����������~z��KZ�u�����O�~��hM�� \
�v��?:7J�vI]�o�L���E�,����;S�*t�d&lt;����f���H�:�n��v��t��w�t�FmGZ��n������������ \
��Z��������]:�#�Uq���l{�����������q�-[�~~3V���-E���-E������I�p�$���s�9�p8�� \
)�p8����s�9�p8���8�������!u��m��&amp;G[v�O���6��~�]������e�.���z�,[���v�������u����������u����������e���G;���������X;�����,�������6�����M~�� \
8V�z�g��=��&amp;���p���f�h=yy�.����_�df:��A�`W���R�R�����{��GgY�4^5�W�� \
�����y��}����m�k����XB���'x�}�&gt;t����C�t����C����}�&gt;t����C�������q������k \
��C�\?��VnFm�c���'�n�L�� �! \
�����x�^=Ox�^/����x�^/����x�^�W�,0�o������y��@^=Oy��@^ \
/����y����wo=JQ���}p5��t�E4��M|1���2�m�$��gw���V*E���I��v��)�.�e�@^��yA^��yA^���a���� \
.���� ���.���� .���� .���� .���� \
.��rN��_�mC�V�����������6F�I�X��u��J�����J"��hUiOJ�L���x\���e���"���]z��7������k \
~�Oq���J��kq�H������?X;mp��i�u6��]x�6��`#�6��l�F�l�F�l�F�l��a�%����[j�[�3���+�9�W�U�2A��U������j�����z�fX���y����62��'
 2h���e���"��`�fv��*6s����r��
�1��C�����"/��8��i{$�+bOl��}mqs~���� ���._����o���&gt;��6v
h#��6��h#��6J�mD�F�mD�F�mD�F�mD���X��QMsV�
7�3@8p����+�b"�D$���T'+�*]���k�X�@���9������&amp;G�����6�gc���v���o����+�Z�� \
����uJ����&amp;�������q2�~��b����Bx^�Q=g�z�����&amp;���U��+sx�����l-��r����u���he����c�^'�z��y���nk92�'?�x���o�Zsn=��b"�&lt;UO��C� \
��a�[}B�F��M��F�j��F�QB�P#�5B�P#�5B�P#�5B�P#�����C��'�[w�.w[��_�&gt;�[&lt;��dm����U���B�� \
M ���4���d��8��Me�]P���=���+�Os�+���x�tL249�*�������s���2B;��i�����=_���� \
5h�������Ak���Ih Z�� 5h
Z�� 5h
Z�� 5h
Z���YZk���%���
��$�����Cr�F��Q�c�L&amp;�X��n= �D!Q�B��($
�B���V�^�($���D!QH�D!QH���B�����B����Y�R�E�c�	H5��:���fo���m�����N��Y[X��� \
�Gy�h��T�y*��O=Qi1��z��b�;���&gt;�*�R~j7�3Y�h�s[�����&amp;��T(#��J&amp;v�9�m��ti�i��eA�l(-��L�Ij�Rm��m���Z;�q@�q���8 \
���8 ���8 �������m-�P��I��hY'��,g�����s-l�`{+;�e$� \
O{��c/��8��}�����0������������~�P��x �i�V���M���n��ti��� eHk�����LS��^d����s� \
��s����z'tzN�B|��sX�N� \
a�����:������N3�X'��g`�X'��ub�X'�)�N���:�N���:�N���:�N����������B����g AC� \
����C��5�w�D��5�h�a�g���{h����7*��`/-�g�l���m��g-'��	a����7��l�i \
�5&lt;�����LA����	��M]jH��v)���9I�&amp;��e�G,3���NZH�s�&amp;|�	��o*�&amp;|�	��o \
7���M�&amp;|�	��o 7���o�8*t_�whNo{	h([�������f������ \
�Z/��y��g����f�������S�~�"����U�q����)q��Y��[��,�+|�\m����~��E}80M��!��	��i \
4a�0M���i 4a�0M�&amp;L�	��i \
4a�0M�&amp;L������F��i/���U�+NE%N!��I�Vn�����Dpm,�9U�^W�w4���g����� \
|�c����Ra}{�R���� ;�C���!��^[�Z~V�[�4�� 6��&amp;:��j1|]��������n�M;�_��O����&gt;/��
�c�X����yso��eFB�(�UN�T��S�����r2�AZ9u���.��V��RP�#�J���TX5SVqb�7�U13gij�XE���,�5�f'����j�&gt;�u��L�HA��P)�D
 "��HA�
D
"��HA� R)�D
"��HA� R�C���E�M4�#7�O�C�����k*P��k~�i��F�@�NLP2:IL�2+'�I�e�/��E��Hj���iu���,K���$Sr���q���'�OEG7U�zA�:����T�U����6*�
 ���y�s%��r������&amp;���5�3h��,�l�1SkF0oR����Z��:��H&amp;�\�:�b�=m���X�_�u+�� \
����W�#$�����[�/�vy�����~Y��lz�;���D�$]��y�?�)��R���a� \
/^�����fC�kew�����NyR|&gt;����Cj�*���}�:5��Md�����|Z*��e&gt;Q���\NT$�u�X��s�Sz�z?WA���� \
%�HV}����	J.������j�_z��Y�:��Xp�tv^5����q�����8�����w��.�����h�|i`c/v������N \
�^��h��k�q��fg��{���9���Y�R+�*!#��|�rvrHwT����`�����h|a�Db�B�i-�m�����&amp;$����e��&gt;�����M���Ub��ik���ie&gt;�� \
�n���� ��b&lt;q�j�����iuq� \
�H&amp;���ft���C�?8����Ax�}�&gt;|������|���������}�&gt;|���������}��_����b��yY��~����Nt������y����97�3��J���2����)}�9S�47?�+}&lt;@�4,� \
\K�� Ra��TX*,U�Ra��TX*,� K�� Ra��TX*,�
K���y��P*����G�~����;�:4p�l��p%����2��K�g9�a�������_y�a�
���������x oxv�C�#���tV.�k�}��V9|CCh�����Z�~�n�b-xg�W����a�^��g����m�{4����z��D�U/�
 C��k���7����4?X�;����n��CK��CO������^����-�����������)�l�v���i��!���o�:�g������ \
X%���L[�E�A�}z�����&gt;�������G�,}��Bb����h^~Y=U��3�,��UKc=m6I��?"��GV����A��u����!b3AqD� \
b3��A�"f1�1��D� b3��A�"f1��D� b3��A�"f������b�L��-s�/}����|�� \
                �4v�l��&gt;��O���5�/����c��{�w����/�{_��U����I���(��0D�|�w���&gt;!$
!��T�f�4K�m����]PR��q��3�e��+����H�3 �X1�"ua��������CS���VOf!?�4k&lt;�^M[�a`� \
�a� �A� @P ��A� @P (
�A� @P (
�A??|:S}�"SQ{?(��m.9oW�H'��*~%Y�p�s�g�7g+��*�
{�:yy��N�:�o��N���N�0 \
���Ct:	��NB'���I��NB'���I�$t:	��NB'���I�$t:	���:Y�,�N���������o��~�9���3���my-w \
�f2Q���D2��b�����6t4�~��������)���9g�=&lt;�-��$�d��.&gt;��t1[�6M�����A�;��]|�M�*v/�{�{������Y��=�~������y����1�)m�=� \
B�� �4��$|� ����]:���?���z�����n_�S��c��w�2���{��#���lr}{}����
����'��l�i� �&lt;���E,M[��
��U�B@1�K-���]~�xxf�:$iL� ��3����|�������Y���I�&amp;��� \
�o����`������X����o�������h�w� \
7��v���]�~�e��UsE����l|��?��D����������(c?uz�4�z�1J.����l��#@��Nb�,}U���7�Q'���;z#��}�-m�"c��^
 F������k��S=�d%J�.����RY� ocI��� \
��*�����g?��?�������G�������?����������?���������Z�c�����������vM�����|#-������uE�#g��73��v��$E��
 �zI������J��r}��Z������Y�*�� h���7��X ���uX�Gi:�8��� \
I�Ug�QA����T���Y��&gt;���/E�-wM���$�9�D���a��������d��W����c������ \
�"������������[��&amp;\��dt?�R��6T�}WP��jC��� U�6TmU�6Tm��P��jC���
U�6Tm��P�c��P��jC����o����O�/��\�^��?���� '��W�c�J�c�
�Vkwz.)�����.k�b�g����c�6EL"��8q\t���D��^�h�L����Mj~[y}����p���z% \
mX�]�4Z�&lt;o��������s��\]���KC��Z��0��)?�M��$4.����?^i���;:�����u��*�k��@�|/r��!�C \
�@�\A �@�9r��!�C �@����k�@�y�&gt;�!�C \
���"-G�=��7�vK�	m�W���������R��2�j�u�6�y��{�~���8���C7J} �������u�a�'�&gt;R�n \
t������v]�Kmr�����2B���D�S_�������_��J�������wF;H�FH#T������������m1+)�;SK:$�����m��x�b�A��~,cS��&lt;�`�n0��p&lt;T���
 �;�&gt;�h�*N��q��F��dq�����b)Sv�O��.�:l5��`�s�$�P��]/W�j&gt;�� \
ID��$���.�����-V��cOu�������R�D2*�)u�������_�4Y������ng7��&amp;��t�����������{ \
wn&amp;��y�Z�C�G�2�^��b�^�������=ke��L6R��� \
M�����S�����7�H�y��l�����R������i�t��(�I$����(�A��=�O��^r�|�����?�9)(/�9��&gt;qw \
���O�vv�;Q��^�E�&amp;�b&lt;���U��h�{��p��.���x�.����ervu6���'m�4�����F0���)�a��#F \
0�`F0�`�0�a��#F0�`�0zl�0�V0�`�0���#��3�.}\&gt;�o���K�����}���M]x��M�r�o������R��}�������vw�����7���(�n��5ks�����]������W��w \
���wq[�l �!�Z,��~D(Y;%�~�N�^��d��`�BM(a*�eT���!�;� \
�g������,w�!��^���t�t����� �){?'��{� \
%�_���U~���=yq:9't��x��/��S�R�J�Y$�����Q"���FL?�	���)ScZ�U�)b%R5S��C%l"�ne�(�(�Th�lQ�*����=�A!�E�'��@H� \
@�	 �	$H� @�	$&lt;�$�ZH��H� \
@��?HT&gt;{���v�����'��n-7?�~�������&lt;�a�:�����^&gt;����p���rK�g�^�B�q���e�elO�!J�5��B[FG6e��vs:� \
v#II��\ ������S�+�nt�^Y����r}Z8y�e�d����)&gt;^�b��T�&lt;� \
���wb!�41BR���R�VQ�3u���M2&lt;�d&gt;q0���fg��X��Ym����?/��(98���1�is4�1*��/=s"�Dh�^�uR�*�Q6V���F��*I��
 2V�Y� �;�#��2��y��!��c}Jn����*7� \
]3�1��\�����U�jr!���y��p=��7�k��@}r�c���F��}�B�2�m�B������R��r0Q�(�	�����V:�:����� \
��J�$�h*��\=g�������p������/�\=RN��ix2�NO.����2u/w3�6 \
���3m��3��5���LErm2�%�}��? \
��b~�,T��L���]I�����6N��s�%����_���R%�$]�(�����HKSJ�����h�=�/_��4��p�|Pb��t�d����/ \
cP���Q������X�3z���F�N���&lt;��yt��,J��=�3ie�`'7�9q?fE{`�#%�TLu�B���CE��Rd����w(���q�J:�VMO��8pj/l�)�S�N�8pJ�8p
 ��)�S�N�8p
����TS+��&amp;c�S�N�8p
���{�\�����m��7}&gt;��6���U��C2���m��X�����{���M���T}�nG;��K;�A�h�����W����P~P�5�����n�A \
�;� a"&amp; @8�p� A�p� � @8�p� ����CS+�&amp;c \
@8|e�N{���8��]Gl�W�S���w�K��"G�]J��I�6qc��!��ml�_q�R�dC8@8@8@8�3�� \
���O)�,�G� `�nd�]���U�`0�U���nk���e�@jj��uK       \
�������������j�Jj� \
jjjjjjjXg�'QCc1?�u�V{4�����(���Ym�5Z���.1Q�TNIq��o� \
)��:�,6��]����ZLk)��*�'Z~�E]s�����^������;�T��x����-�����q�	���A+���k�9�3�X�Z]�51�}���D�Du�Mu
 �/������q�7��&amp;��0/��je2mV��*wz����5+���E�.�[�xjUA�Ni�G�(i,�.)����X^�=�=�=�=�=�=� \
=Q�'�'�'�'�'�'�'�'�'�'�'�'�X���T���`��������u����t�����^&lt;��w~���������-��~�_��jG��)[o�!i�_�y��vJ�����N����������^?�4����I5#����f� \
VY	B���}z������avnA,?��#���E��C��4F�iTW� h�����/���9����h���a[LD6#���������� \
\�B��^F%.�Nu����~������{����&gt;'��U \
�c.}(��'M��'.��$�������P���XS���*cO������Q���B��Im+n�����^���C2��`LC6QF��q��X��5�4U���M\a�t\�����v \
:��6G;%s!�P2P2P2P2P2P2P2 JJJJJJJJJJJJ&amp;%��
%�%%%%%%%��%(�����H��~��T	��@�/��\�&lt;/�y1���4Z��&amp;��D�R�d������X�+E�xR�2����x���{����3����T1��
 ���-Z�eT_Y���K�T&amp;�J�������u�S���VH���8�d��K1Q�(�����b1������c��j�B;�2�+�B���8Ui���)��T��1n�i�2��H�j:b�T�� \
�&lt;QU�`��Y�������(e���Lu�2��� �����/���v�od(���E�#���2FS \
�����1���e��r����xJ=L�c�q&lt;U��v�q"�gS�. ��*��� &amp;[�+� \
O�:u:���9s�i��9�g*w����4�u:My����O1��r������ow��w��A'�1#������(�0+d�����&lt;�����G \
9&gt;�B.m	o�����kZ���-2�(E���%O�\fj\b)�����N�?pA�;?@"/L&amp;�2��p9U��m����e�{���F�O+� \
��D�V�h�n6Fr;1vxw16+��:�����n�Xg�	ME{6��3�Ibxz�0r�M�n�;��t�;��.���Y�i�t^ \
u�"�4444444���������������B�u�B�uC�A�A�A�A�A�A��3@����"�����KGZ������Kz�}��L��N�g���Y'�N�TC�d$���}����������7�� \
�y�y�yl�4���������������b�&lt;�&lt;�&lt;�&lt;�&lt;�&lt;�&lt;�&lt;�&lt;�&lt;�&lt;�&lt;�&lt;�&lt;�&lt;�&lt;���������&lt;������H��*�n��U�b��T1+�G�s�����B;�h�s���
 n�7����nw�?�����a�
���u�nV�s3������&gt;��S�#�agC������n```````���J��
 �������Yg�����7��8ne����u���I��4�)"�j��;&gt;�����n�3��&lt;��1-�sTx��6�� \
�o��c��V�i���%�K�x�����U��7W��z3��$i�v�x�lk��+���q�y7u������%cO��0����sM�|EpM�evC���~*��	�CCCCCCCCCCCCCCCCCC;�������*
 ���S4����G�/G��oWj��,���n�����m;s�D��8@�&lt;k�upr�e�b#`0�m�Rb�`��/i�!�` \
0�C�&amp;J��(`H��������P4c�l������d�C�!�p8)�p8��C�!�p8�j
 ��C�!�p8�u��C�����l~�2�u���4�?F��9�uc�A� E�"h�Z-�A� \
E�"h�Z-�A� E�"h�Z������E��E����A� \
E�"h�Z-��{��n�B����3������m#�:3�t:�A� C�!�t:�A� C�!���@� \
C�:�6B� C)1t:���4�t:�A� C���mq��������������4��U�-���=���=�:�A�h�3H� \
��C !��pH8$�C !��pH8$	��C !��pH8�&amp;��C���!��qH�qH8�����pH8$	�����@J \
                �)m�AP����0���������k�xQ�}�-
!=X����	�Ut8�*B��PE�"T�H��PE�"T�U�*B��PE�"T��XT�P+�h(U�*B��PE�"T���U�*BY����n���mOis��m�t��x�,g?O�s����q�N�(���{#���LRT����J
 X:!�j&lt;��x4�f4O^�6�=�6��K���&lt;f?g��"�����/��,{n_�[�F�i��X�e�X��B�� \
�����S�M�_9���V����M6��J�4_?���$��]�V-�Ue�����^}.��2- \
��X&amp;������&gt;h/b����	�L�D�S�)�` 0�R�)�`
0�L�S�)�`
0�'05�
�
L�S�)�`
0����_�Th����$Y
]�UVW�������������B�Hl�������������E�bi�e������8&lt;��	B����s������wc��ZBL3���4&gt;"Wr�l������z&amp;
 ���	*�WK���Y��ZE����.o0�*�Y�]���Q�J��L.�7�x���)S�F��g��t&amp;�rO:�������hw*�k��e�t \
(M�Np4&amp;�;���RTA�X������9y����^��v����6mO���� \
������W�����:$��Z&lt;:;	���4����mC���l�DOS���d�T��~��[��n�����U!�F��Y���e���g) \
���o�B����UU���6F�����mW�lij��I�!�_�?;�)�����E��Vq&amp;�]���7{��qi	�V4�� \
�^�x����f&gt;�Nf%�.i�f�=x�4�a���Bu�H���|-�R.e���$.��y\!a���;1Q�e[���l!M�����f�t���+ssM�3����c����V�U�P���_&lt; \
�P�p�c�6{yO��H�m�����&gt;��7_����{w��Dx�S�Z�?iwn��M�.�hpJ-	�J�\�� � \
�Hg�!�;8��������K���o�[�pq@@�q@�q@�q@�q@��� \
���@�q@\����W�q@�u��B;4qQeg$.��6qj�������=u������W���EMe\�����������?�&amp;g�x�8��� \
8���6]�Ap�Ap�Ap����Bp\�� ��W�Ap�u�#� \
��[�n��E��q����m�iJ�-N��E�	���w%V�H-��;bi_�������� m�����?��c����5@ P�5@m��� \
�j� �j� �j��,�j�  �Ea@ P[{�j� \
�j�Z�9P+�C=�V�o���u+^��q�h��9%�Vv�$_+�O���M��l�p-�V����M�g�� 9[6}�� ��l�� \
l(����l(���B� eC�P6�
eC�P6�
eC�P6�mD�P�EeC��0������P6�
eC�P6�������c+r�K����V��o�V��[+:N���'����WR�"T���;"jy����B��u��"kG���j� \
�j� ��B@ P�5@
P�5@
P�5@m��EP��0 ����5@
P�5@���q���"u�&lt;-JVtZ|�7N�MS�i�p�4-:OH�E�+aZDj����K;�I /^}�:����E��44
MC��44
MC��44
MC��44
MC��������� ���-�h���44m�����ih����i��4�����{�gK�?�������&amp;~�k�g�Y���y�����}�/� \
�Q���f�/g=��l.�*`-�ZE�=}�����Le����wM�?��q}�=����g����������������Igz�����3{�����_|:�c�������M/�_&gt;Z�C���C�1t�����6Ca��w0\�H�P��
                
*��&amp;	�J��8��d&amp;�B���5���P��T��������|�A�@�@�@�������������XG,�X�t,:::::::�T�_�X�v�T!�,�N�A�e$�SC�{����5� \
�Z�V��|�|�|�������w3�����������|�|�|�|�|�|�|�|�|�|�|�|�|�|�|�|������	0VQ�D��/ \
2��Y�iT��� \ ;Si*��Un���� \
���7M�����mT�&gt;�7873J�G.�w�"�����P���*���n]�w��P�y�� \
�5����D�D�r/yS7z�t��]��/Q�&amp;�{�;���Lf�^�XeNO�2�:4j�G��,]��Dq�8���v~�%���i��9�'��4�4�4�4�4�4�4
 �������������#�&amp;V
N�������i*���c�&amp;��y�-t����o|��S;��qc����+)|hU���?�{V�}T�&lt;���zm�� \
��� pTp�� ]�����*�xWs&lt;��L[P�,�V[$m(�������� \
��hSn���2$���	�L���g$��=���;�d�����=�F���W \
0�]������#phUV7P(#n�,=p?�8R����&amp;�X���m:�]�,�zh��Uu����i(����OC��  \
�qX@/@/@/@/@/@/@/��������������+��zzzzzzz5�����~ \
zUl�G��� S|���������uy� \
�R�U-�����W]��~x��Z�v�����`XVO	?%si?�5�:���9���U�z=���R��k���z�^� �U	�c��P�w��
qc{���I���{�t���B�����Q��V���$�{����Q9���V� \
2i�������Yq�5QFy[�r������4U��0+J������n	�Y;^�n�/��g�g��K`�`�`�`�`�`�`������ \
�������YG,�Y��,{{{{{{{�T�=�=;�=*�Oz�����@yv�u���W���~�=���9�m[�����Y� \
'�|i�'i���e�Ji	�z��7P�\������an�y��"U����W������O�szN�h,�&lt;�f.���1�ZG�n1��k��\��+) \
�gQ���n�G�)1�����,_��2M�b�V^���U���H�f:��\3�Y������#3����L�{*�W�2�%���$�8�JK������z:=�V
 �25J��h����uV�O*9���u4O��,tJ���X��.���i�����&lt;�@�q�l~D,�/&gt;��,��x��C�9e2�69�����@u


T��0R��=��b-'�z:���Q��LU����[�N����N���tRM���[3]�U�Z���%�#�t�������j�*Y�K���A���_��9�JB��	x3��R�b7F�uyF-��j��X����=iO�q�b.��t%���Sq�=x��^�h����j�"
 �;qK�/�L���l�R=�5�zWe}�
��$��3s�r���V n�����.��iF�Y���������s��D���
�z(L�F,�	���~L�"G��LP�� \
����G�Iz;��f�F���3�sb�fbb�8P��������������������������������������B���!� � � \
� � � �� {{����������4_~���n�%��c�����$�WO�D�z�'H�5s�������^}x�w��i�h�����r�_ \
5*���B:z7�o_?*�k������V��5'���5U�{��x�����R��F4�F%.7���5����"���..����	J���3�"���sl���/���������������S�v�v�v�v�v�v�v�v�v�v��;���i \
������-$i}0��w����K	��$��,�I����Z?��M�+����������J���W�lW!K�]Y*�ve \
�lG��v�lG�]��`;�����]y��(��a�������P.�O�[wc��BAj������{3�9l���Q������=�+�s�;9}��G��O[��%�!�g%u��E-���Ri���V��
 �t'��f��V����L�CW*�vER�x�H�@�����4��t�w`�u��
���6����g*w�����������	�e�I}T^
����|���G@%c`��|�� ���A�� �����Ks������%�u��A�9��P��y� \
&amp;RA����[���&gt;t�A�9l@�)-&gt;,�`^L�D�XH��$�x8f:0��#�+����Cw����\V�9���J�x�J&gt;�n��twM�3T����~+�T&lt;��+N�^&lt;�1�L��m�|I������kyv�X��l'���������� \
-1��X�xc[OO����&gt;&lt;�k�|��~���m=��q�"e�T����P�lg������s- \
�v��_o����	���{�*�T*����������*f�l?/;}��*Up^�y*�h�:����@N3�����0��J@��M&lt;���"Omt���m�M�FQ�^����Z�
 ����d�����	���`������q�m&lt;ZS�����mtg�w��Y�����'���nw�y��5M~}I�_W�������3�u \
aVC�����Pd���$��1�	_����e+�Pn�^�o�P�0D&gt;�i���5�l��*�����e[�%�����Z5�A���`�.oJz�x
 �j����Q����(k	�]Z���Y�h���d����������[�n`�}�Um4&lt;��e��'C���8&gt;��m�5�S�@A|{#�&gt;� \
�Pp�.��������?^1�qo2�0��:�f+����p����N���~�]�j��=?~����S���&lt;�8���n��?����{�A�z�&lt;"Z \
��a���X���_'��F���52����`�LG{kd����zSh�;��	k�},*���c��h��n�43c�}��o�t���-`|���T�]V��;-[�������2V������h��.���yv����`��z��+c�7UCb�����Qc����� \
������r��_A��*r!\|w*6e���KL��Ba�w}S�������3���V�TD7�2N@@�����r"|G@R(��z4�����e'�&gt;�b�����^O�o����[/��d \
�+j���GKZ����,m�XRC��W�����n�������]:����k�P� \
���{2�q����+��������,����n�[����L���f��u~��J�����b2�Q�MG�dm�����{���nl�n�_6���u��7����6�� \
�'�o�����������n ��0W��a�w�����}����� �/��+�oK��P�7�g�yK���qrVYv%&gt;��W� \
��:��*������PW���t�/(��?�[ �����A��C3���p���3|�c�k�:� \
��Y����Y&lt;��WV�����L�k��8G��l��l&lt;�r��!��������]����������v� \
���..7"�����0	�&lt;W�iZ|��� �%'��� �n�@������&lt;i:�t���O/��4��� \
�����.��?���&gt;f��e,��)�4�����;�����t�����_�UZ5 \
g��C�z�N�HKO�����~r���(����������'�ONQ����'H_�����"��O�o���?v��%��h||��_u��o�
 ����e3�/�K5@o��)W�������Et2t�.�*���Jn]�_���!]�t[(����W������&amp;����t.3w�Y0�G9��'I`�I����L��8�TW�Q( \
�B0@&gt;���!��s����I0�=��s}�N2�����SXYmb!������B���Y&lt;���O�� \
���]}(&gt;�	�N�C^�T�v���v�u���i|�y�O����e�Cg&lt;�9.�r�Z����7�'j�e�z�O���x��0v�Q \
��S����`��j	�xhr�=��0�l+~���&amp;�������f��r��7;m�%}����"]NM9$D��^�?�ZR�@s \
���I�s�th*��^�&amp;��p%&amp;~�$���4�"��Zc0�����^��j&gt;���m��K��C}&gt;3GL��*��J����^7�	"]��'�z�v`�
 z!|��c�x����e����n�U�KO��Y�3M�NU��d\+����~e���V!�
t��5�,R���s;w7�IC�#�` ;;)i���
��Z�F0nTQ��bM���yM� \
d��+1n�OP��{����4�kK���po�HwskB��+T������)axP(�Xs��5v�i�7�G�!'( \
���x4����P&lt;�G#( ���x4����P&lt;�GC�h(
���x4��B�����R&lt;�2a�GC�h(
��AE����P&lt;�@�h(
��Y/M�Q��?�W�&gt;}yf=E���
Fxn���M�P$�a/��YxV^:�KX�"�.�s� �Iv�p���+=��D�&gt;\��xk���*��kc� \
��\c�s5��$=Q��\�N	s���[l�b�Y15���:,�������pY!&amp;LN���{���|_~l�9��O���������UR��3�Nc�&amp;��^�������.!���lx���|��H����}$'�M�U�Y�?�!��V�� \
�9k5aw�{ g�%��;�]c��2{�� 3��2#�� \
3��2�dF�Af�dF�Af�dF�Af����dV&amp;L�Af�d��2#�� \
3�@�Af�dF��[�Al�|�9=;|�oBg�gs�� 4�ge[��%���MU��;���P�t����� \
��s'�X��b`��+d1Av�3�����w (����`��s�h7������ \
�������;[��v�x�u�_?�����1�&gt;D�������&lt;~r�T"T]��w�����U��#���k���u��Y�'��#����}6�@�'����d��&amp;|��pc?��&amp;R�=	h# \
�!��h# ��6�h# M�F@m��F@m��F@m�U��V�J@[�0m��F@*" \
��6�0m��F@mo�	g(h�c���&gt;��8Q)v�C�}]3���k�Km��t�Le+I��~��Qq�qm�}�m�%���,UrZ�E0p�&lt;�����u�Y) \
7�r������M�rM:��1w  �tyL� ��9����t \
��j	�7Ig�����tt���3��R�������i#��1�b��.��R�_r�� =&amp;K�5��2�k��\� \
iJ+&amp;n����3��4�q�d��*�^L-�"/ a)v��5���D1�PIk����cU�~# P������ \
��4��m�f��'F�s�v:&lt;R \
����4��=i=T7����HzZ�����gl��ad6M��Ov0VZz�����[n.g�E����b����F�����O!��� \
�p��l�s3�)�����s��:H�YF�0���o���j|�EA�����qe���}�������&lt;�����^j(�K�1�P�I��X�U�,�g&amp;�wf�e;���\6�!+C&amp;&amp;�\f���)�YM��[��T
 4
�k��Op�O~��.�n6�����D�1�P�D�1K�,�D�1+��%b��Y"f��%b��Y"f��%b��Y"f+d��-K%b�L� \
�Y"f��%b1K�,����Y"f��%b���������������R���������������V��Y��"6ks����}����^��� \
^w[-+fl�%�KC���Ph% ����`Q|�]��jo�s[wo����U�\�#���7U�^�� \
��*1j1��)�1	�����.���t��8���J��H�6��7v� ��;&lt;�nggy7y9�� \
���|w�O�=)��1������q�����Y��H�I�y \
C�Y&lt;��L�)�~�L�[J�&amp;����!���-��J�me����JW�Z����$5|o�s	��JmfD�C]4mjOD��@�D4�LD3�D4�LD� \
���f"��h&amp;���f"��h&amp;���f"��h��%��/���Wi��k�E}%A�^�b|�&amp;&gt;$z�&amp;FI��.�m�"���==l0J������ \
f�����.W~�\Q�fW2D3D3D3D3�h�h�h��������hv-�����x��&gt;���y[=�?���'w������q��t�����He���^?�d9����@%3/�Vvma�%K��e��T�l�Sm�4�v����;�Lc�79���hO}�U�Ud~ \
�&amp;����)q�������J���Ec���ZC��;;XXXXXXX�������������&lt;��u�(`�+����������u��u�u�u�u�u�u����-���S�.���yYC&lt;!�x$����
 {����&gt;�4J�|���g���������5����-�LI:M}�.���v�xw���v�^�����2�����,�ddddddd� \
��������������������������B����}�d�&gt;�&gt;�&gt;�&gt;.��W�C��B�A�A�A�A�A��G�oc���W�,�_������� \
�,&gt;�-�U�v��:�f~T8��5��cc������d�z�p�TnL]E���&amp;B����%�&gt;���xgl�l�?s����#{���e3�4��)���7�@J��={|��4�����IQ.���
 Q�%9�������n?��\��2&lt;K9O����c��0���������.�pcR���/���*��%�Y��[�V@�L�����M%�%��~�|;Nw�u�������� \
���'Ze����,i:~�2\�?&lt;�r��_.n-Z=�rY��]a����*�h���BK�( q!q \
�A�B�B�B�B�B�B�*H\H\H\H\H\H\H\H\H\H\H\H\O.$�+ \
��J���������B�����8$�)$.$.$.$.$.$�_(q��w�����w�=����y��K��/]�4c�[;�H�BGt�'�Y��a���D+N� \
�%����6B$$���es�}'��:�{�������(�e]����'��2��CE�Dz����3g�h�(my�BE&amp;~ZqX��2}��iP�0��U�U�����+.�`@�����5��9�o�� \
\���Yi������:�F��[��U��:l��t����w�\�Qr[��;�N��w#&gt;^�=�l���s���v3?y���;{S����B
 ��
��m�GG0�M�[i����z�fy�����]C-Z,r������z�P��/�(���+"�gE����*_�ua(��}���fy�O�a7� \
Y3Y�)Q�T��������1e��I0����W���=|�[����V������������������������ \
�\�`W0������kq��S�`�`�`�`�`�`�`�/�������7h���	�+S�z�������"7��M3-R�"	��&lt; \
2�Og+�xY�[h�?*&amp;��d�����T�����H?��2m������^W�4Z���R���-�&lt;Q�H��q:�i^�����p�&gt;z��x�� \
MW	���Xg�;�)*��[��JY��8��(~�x��-�7q������r2���9�%.{�FTr��-.{�=��L\�WK]��B���������H22�qb��x�lg��;��Y�d������}=_����)�T�x��_�i�B+����M�*�}}��Z/.���7����;� \
�������]�6���+����������=�� ���J���x�x=��
�
�
�
�
�
�� ^!^!^!^!^!^!^!^!^!^!^!^=���(��+�����A�B�z��&amp;�
�
�
�
�
�
���Wg������D���e�GA7
]o�[W��v�&gt;��������A�w�R�6��novvvv��5�!�a����7�C�C�C�����n�0�_j�!�k:e����
 �k�&lt;��L���=1]�C��)�C�;��C�;��C�;���C�;��F�!vX���%��C�;��C�;&lt;�W����O�tm�&amp;���?�����������1��4�o�b��tE����4"�H#��4"�H�
 iD�F�iD�F�iD�F��2�4�R��4�4"�H#��6B��J�4.!��4"�H#��4"�/N�P�%}��i��C��}�p��a� \
!��4"�H#��4"�H#��4"�H#��4"�H#��4"��|��iD���i���4�&gt;������54"�X�SN#���4"�H#��4"� \
H#i�.�7�+E��_E��s��`�8V�������|�Xq&gt;&gt;��2Fh%�eDQF�eDo(#��2��(#��2��(#��2���Y��� \
���a�eDQ����2Vr�q	QF�eDQF�e|}�x�f���_���c��]�p���)D@D@D@D@ \
D@l�B�"�x���biq���i��@,�)�D@D@����b�F�2�k��������� \
����1���Ly�b��e"���D4�D#�H4�D��h$�F��h$�F��h$�F��2K4�R��4L4�D#��6"��JN4.! \
�H4�D#�H4�o!�@�M�w6������&amp;=\5g�����!"��#��&lt;"�����&amp;CQ����*�;�u-]I����T-��d��f8�;��lD�p�G�yD�G�yD�G�yD�G��?!yD�G�G��&lt;bn?�x�������y�� \
�s���G�yD�G�y�����u��R����q���Y�}�w��&gt;�gHWV���L�xw���_1����=���,�`I�"��,2��"��,N�"��,2��"��,2��"��,2��Yf1�2��af�Yd����Yd9�Bf�Yd�Ef�YdWn�S�:����+ \
���b2���8B��)d �B��)d
�B��)d
�B��)d
�B��)d
� [�2���)d
�b��)�~�1��L��pLa!e
��B�0�L!S�2�]��B�pIS�L��ha��p�m�?�������������j��~�&amp;��#���&amp;��l"��&amp;����&amp;��l"��&amp;��l"��&amp;��lba�M��lbn�Md�D61.b��B�&amp;��Md�D6�Md�����%xb��uz��p����xj�:l�8�1 \
1R#�1B�#�1 	#�1B�#�1B�#�1B��0��R�07�b�!Fa�a!�C�b�!F�b�!F8�V�]�&amp;,�vm���r�tz�S�-8L�
 ��W�
;.�KA��D.�K��D.�K��D.�K��D.�K��D.�K��\b.�s�\"��%r�q��%r.1�\"��%r�\"��%��%. \
3���\o{;������ �$�{���4�����F?�������/�?�b-{���M��$����t��UDT�/�r���v/3�� \
$��XJB(	�$��JB(	�$TPBI%!��PBI%!��PBI%!�� \
�P��P���$��JB(	�!(	�$l�CI�F(	�$��JB(	�$��J ���H�v6}���m}��2��g���� \
�qkVs�v���k�E�wT/�X��J�����:����&amp;]�k z?������;=���VO�'��V��D&amp;g������m
�����3��Ht)��~���7�5)!)^��]�g~�������tK����������t�8����{
�4����I$�n�+On
Js�J�SA�%V������u�t���� �g��.�������)� \
�5�����V3*.5�j���v�����/^�x�4�YL%��S�'���0S�a���Hci�y��!e_N��r@���^��^J��\M['�W�_i���w��G{&lt;�7_����t/��8=sEI3���'a���{*x�h�)+_�@�+�]�'Z�����I�����)���n� \
�my'wmKF"����q&amp;��bo��M�j^�����7�����v%	�d \
��*���?�Q8sM+pq�M@^D@|@�k�\�W�M��x�d��+�[�Q~&gt;�����;���Vr8?UA�gr���P��I��2Z�&amp;���M9�dL����V���(�� \
���V�u���Oi�hJ�M}�V������t��7�����W��[#���/4���*����f����������x���I�Q/b�+�}Y�������(���p�dA��i���M7��8�,��� \
@�C� (P @�P @�
(P @���
�e�r
(i(�;(6�
(P �
�4�.�����"w���=�@7���Y_G"�0��`�,4)�����sTD�pM
�B��
�B����mH m������:��}r�������^�Dh0�W�#C�?��L��Qt��(x����*�n�G��x��i��$U��(Z�� \
s���&lt;�����F����R��-�|f�*I%��qz"�����W|M����Ky����F�x���pU���3�u�=�Q��6&amp;��"�u�E�f��t9E \
��B�/�%� ��,�H��y�I1�5�M�����y~��v����x���q�����mfR����Q�B�if�4 �,�#��B+������+� \
BJ`Db��/R��+/"��=A	�sE�l.�L���yE����:�����B�_*T��fz�����m	����Lr������A�����nw-}�&amp;�Hnr�su1��h����K�����1�
 �����Z� ��� �x�O 6������g���hp���F:�����/�!���F�&amp;K&amp;f��?���M23�Eb��l5rE�R��q \
+.���N.Hl��7�����`��C���0���w��!��������e�"�n�J�@'���5����)}d�?�)��3%�!U��\����d���d�d� \
��rJ�Z�?�=����H�CO�Z�8B��C��8:�,^Dv���������B�uo&lt;��������f�o���Q�������?������������?�����������
 ������?���?�
v�l����?���������O��n�Q��u
��O�/�ZF{�75�G��oW����&lt;4���CS���Cs���@4��O!D3���C4cv��k��4���Hd�p��;�_T�:	&gt;tZ3�b��p4j���,�T\���4�?� \
�:p��2.E�[�Q��_o���n�[vE����{��'��.�������t�z��&gt;pe�=pE����JP+ V�!L�j� \
�P+ V@�(P+ V@��Z�j� �P+ V@��Zi�����Zq9�Z�j��4j�J���A��Z�j�
�P+ V�
����S��� ����0[�w��Ra�wm\�g���6�E�&amp;�������]?��� \
rg��|�N�P�5����CW��@��J����/����{��+�C�[�=��v�=b������$���0�p��3��������� \
�K�$&amp;�������M��b��'��D&amp;��#2�������u#z�i���(��Z�=Zl����Q���(-�_�%�������Y@��acB�n�?���P�n)t�)d���W� \
;�U��������J��fd��w�8�t�GW9����'S:���u��+m����;����4�l��&lt;6���v_7���`V�!���&lt;&lt;�dY��$�������	O�8��S4����7M���D��}@+ \
�@��h�� D�6�
D�6m �@��h��
D�6m
� �\Vm.gm �@��h��@��h�����
�q�WQ�b�V@*���b�,��e3 ���:�������-���PD�/Y2����� \
�}r�qD�]�hC�!�m�6D�-��OD��L��h�L���a�/�v�5�u��/�vW5 \
��x�8JXe3�&gt;������7B'{g�����x��Y��x���=Z�6� NN��j�~�1���%rv]F� \
�%���%���YND�_�."_I���5�k ���	_���	_�&amp;|M���5�k ���	_�&amp;|��%|�%|�*&amp;|M���5�k�! \
���=����j ���	_�&amp;|M���u�����	_�)e	_/�S����������&gt;����(I�s�R��bII6��U��s/����L��$O���$��Dk�$���lJ:���)I������Wnt \
�-7�Y� �����������������|� 6PE�Q�
�j���@m�j���@m 6P�
�j������6\��
W1j���@m�
�6P�q��]��@m 6P�
�j#��O�j�LAm&lt;��X�llDl,z�-i�Z�2K��9����:Fci�!�~����F��m�y!&gt;# \
g��g�&gt;��?6�3���g����&amp;:�QH���@g 3��t�@g 3��t:���@g \
3��O-:�5��p�3��t��:��Gg���t:���@g 3r\�Dg 3�tF1:�9&lt;������W�q�v#��F� \
��Mm��5q��F����Z#�g5�^�����Vc$�������k��k�=��Bh?���D������{����|Q�n���4d����h|# \
?����\;����i�N����v���3wn�e������H[2��d����e��f&gt;.s��a��|-�){�����w��m���2���Fd�F \
�1�,�Pc��u`j5�C���Pc�1�C���Pc�1�j5�C���Pc�Z��k5�*F���Pc�1�!�j�3���Qc�1�j5�C�����C��)���Rc�#�����d����&amp;�h&gt;u
 ���?�3JG���}����A���O�J]"���������V�'���k�1��4����o��Sr�+��%���c����V��{�%. \
��?�h:���g�1T�Q�V3#:���+�J���m:�n�iM��l�RSH��`�$�5��6��C���GdN�|\����&lt;����i�&amp;-c������G����#!'�������|��@��[-���G|����Cf!��Y�%{.��fNV5m���k��@�������2�gE�%Fw�b \
�O7Q���e��,�O/��E�r��,$~��k��;Cyh��'��� \
Z�c�K�����\������������d�I)"v�I��`R0)�L &amp;E`R0)�L
&amp;��I��`R��wf�N�@���0\�	��P@H��@�H[C#���J���&amp;���l����{l�;i�3`R���I	��I���I��I�&amp;L�mL
 ��@9��L
�0)`R���I��/?���I�*`R�&lt;����Z�AU�Q8��������7�k�	9)uc��}�&amp;�������v��=Lvn����{X{&lt;��E�LX8�-�c�&lt;fW \
y����;�J���\�j���{B����qdW&gt;��i^L�������|s�b��6l������t�|�SX&amp;M�GD�u�+��Q8����_v	� \
J���(_kA����N����.��4&lt;]$���-��-�W����d�7~����cO&gt;���?�������=}���~ot1�^��{j�V�&lt;j�5��S- \
L��J��8�q;�W������� �S��k^����Gw��x�s��������d���?��2d�� #$�� \
#@F��2d�� #@FlAF�JAF��AF��2 62dD d�k 2d�� #@F������ \
#@Fp�3a��ru�P=,��S�]�eEc'/��P$���p���P�������#�����w���}Q�����g� \
����,/]�E������|�����.�|�������C�]&gt;t���C�]&gt;t���C�]&gt;t�[��}��������.�|��mC��C�(�.���.�|�����.�|�����'t���s���]��k��	
 ���,x��|��3�?��#�c�R4�7n���� M�I�I�&gt;��D����
u�I��t���KnS�:�N�
��\b
������Mm����b�z1����x��n'�(�`����DK�_��MO_\��Y��s������H}����@NSf�}����f���^'iA�)]��d
 1�s^{d���8
��~!B�:c@�!B��� @�!B� ��- _) �1 \
@�!��!B�Bp�!B� @��� \
�������l��Fmg4)Y&gt;+�RS�J��8kD��X�Hw+��"�r��J���ce��f�H�/W�&lt;+n?8�����xM���H�$3�����;�j���&gt;F��Sx���\����R�����.�)��g*�"�X�+��L�
  ��F�Z�V|��X/����2�s�-�:)��"V���:}ILe��;l���u[�gFq9�Z*��7ZzV��"�U8+4	�%����.���e&amp;Haln�� \
��7?�(���Z�_w�#��f]F��y�.F`~�Jd��l�/�J�4�6���k��y��f&gt;���0�N%P��"�t5�S���Z[�L�.��U,��!0
 9{l:���e�If.��I^Z�uUo����V���$=�.�4�j��_�&amp;j�JKm��A��&gt;f�v�5�K^����]f�� \
)�������%���ki�f"-vbV����mf(]�m������w�&gt;2�X�K�j%���el7��r�������W�{� \
�`"/�)"��Z���2�g�m���l�������?}r�^5�v��w�t���}3�Hk&gt;�L7B��`��(����xtN�� \
F�=P#M�������qs1����?{��=���\9Y{�I3��a��nvv����{]�����fD����Lo���a�*G�E�^��K%� \
&gt;�l%gf�2������p����qnZ��U��i���}����4:w��\�Y�rm��iy&lt;	w{�����r��|=��R������[T�r \
&gt; �v���M'oK�)��F��&amp;_�m��w4{t2��m4���&amp;�^���Lz����zF�,����v'������������~��e�J�	�{�����&lt;�&gt;�l�L�U��;���g�����p�&gt;�
&gt; 
��s��j�0������1`��{?l
&lt;���=^ ���@�33�W���Q� \
I�����D�G��7x�~.��?g�u�����?p�5�y����X���o#���/sGE������?�?��k�|d���4�d�;)�l�s���D�BT��������.y�|�zz����r;�)��l��*���H�$��P�|@��y�n���4�b���J
 �����D��D�@4�_�#��I ��I ��I \
��D4	D�@4	D�@4	D�@4	D�@4	D�@4	D��"����$|��&amp;�h�&amp;�h�!D�@4�@9�I���&amp;�h�&amp;�h�&amp;�h�&amp;�/?M�$�
 �I���$|�O�&gt;
}q������5�]������6~5@�O�����_�Q�]%gRb���M�(��Vj�����)���*������|%�y�����N5���| \
{�I�)�%��-�T��C\^@��[�N����G������'�&lt;�4m�\6�5|�����_�Rn9������c��=�`#��&lt;��`
 54G����E�	;`���������n�@��s�b����8��EB \
�qTgJ-������/��3�����*y���qR���L���� \
�&lt;r�+���?��G�&lt;��4x����C���?uW+��M��XUE���/���Yr��y/u�r&gt;j \
��i�Fn��}���$_h_��pO������u&lt;�������~�������������m��;�w�L�zVdL}�������I��R \
d���Q�z�T{��5io�Zs������D]��^���5�i0���6 \
r�Yf��j�������gL�m�]���}�����%��.��X]si.*{i����K�V}F�� \
��]i�Kw�TYk3����urG~�9�&amp;}����o����^G���bs�'{��q���yEw�� \
�G���&gt;������b�rb��������E�����y����3�cFF��&lt;��i�QD1�v&gt;l���'�i�!����SI�E�"d�Y�,B5d�Y�,B!��E�"d�Y�,j!��V����Y�,BmG�E�b \
��VC!��E�"d�Y���'d�(�@!��,��(�����//���_;C�E���l/��]�0��e��uQd��a@�f:S�^������]��E��:�l��*�����T����{!��� \
��4�Tp������{W������=}�����������@�UC�o�z�pqY��"�����m��'s�h3m������qu�L����u�g�� \
AS�Ar���LDc���P=�U�N�6������s��%k�q�����?cnr��.L(����`�r���V��&amp;wM���5�kr���5�kr����]��&amp;wM���5�kr����]j�]�Z�]���]��&amp;wM��vD���u \
���[M���5�kr����]�����'�kr�� \
�kr�g.w��4#�k&amp;[r���t;@ln~U�?{{�oq�iWy����4�����B1���4b���~��y�RWe�M����g���s�eB��I \
���O&lt;�_y,x=d����r�����&amp;��g�i��N0���V�����n�M~�H�������������D���������izy�o�]2o�]�/w�{���x|��4�x�[6�@L/�J������R�[���w�Y���'�
 xr��uv&lt;���J��R��J�:J�o�^&gt;��S�Q.w�{�x6.�W��Qs��BgUz����x�^�Ee�����'��9�E�L+�V:.J������V�BO@� \
U�*h� Z���*h�
Z��VA� U�*h�
Z��V�Z�U�bh�
Z��A� U�vh�[
��VA� U�*h������*h����V�W�������|�m�f8��,	�����N����]�sy���������C�X2f����+i3���Uv��������e�m����Cq��Pw��#�����oN�����pA��V \
����!/&gt;���Pa�����d�|u�+�����4/8���2ZO�{S.� \
�[&amp;B�Q0������2L��Z$����������vH���+����z����G�H�� \
�&gt;���Y���H��)�-���HF(�3�H�Y[�����W�.�~�w��Is;!M�&amp;��#M�&amp;H�	�i�4�H�	�i�4A� \
M�&amp;H�	�i�E��Z�&amp;�b�	�i�4�!M�&amp;�v��[�4A� M�&amp;H�	�����H����4A� \
M�H��7�_�t�(u`]4��0 \
C�&gt;��m�@�u�,r�'��@y��w�xWQ�$�����C�q���v���P�����1�W� v��
@ P�T A P�T*�
@ P� P*���
&gt; � P�T`;|e�\{���8��O�wj����o�M4h���tt�m��OoW��=D�������Y��{a��PAK: \
&gt; �P @�
*T�����
�,�
*�7Tp��x���*�����&gt;�/��?� ��;� \
z+AX�2����PB`������x���&gt;����j���7��x�?h�D� ��� \
D���Jb�k9������J��R�Z�+]�QQ���c9�;�0�0j&lt;�t~�����`,k��C \
�|�DV�/��/7����}�4�`]���R�}q��I���^�W����']������?2EdI��!��ayZ������������n/�7������y�QI�rL�YO���/,���Kx��5���Vk5�#7G����M����
 ���etZ9�"J�(Kd�p;���iE��?�Ro��p���c�=0`8�p�������0`8�p����N�-0S*0 \
�10`8�p��G�p�����������0`8[|�	��0����t���_�����&gt;�{���rd����jy�53�cX�������:��iEl��1
 %��,��������0��iEI^$����%���j2(fMc��,�c��G�;�&lt;N�c��
���]G�y�R����TC_[��*.9��v�9B�mr�4GC$\$��	.���k�d�	I^�J�
]��B�;����zV�?��tK�~�u%�E���u��u�0�.�����SV�:�+����}�I�:���\�_�I!���@A�����BxP2 \
d@���%J�%J�(P2 d@���%J�(�[P2�TP2&amp;cP2 d@����@���iI%�[��%J�(P2 \
d����(��(P2�%c�R���L���y���Y����[�.�y��Uz����PLG�G�[O�,g�Z���tF&amp;�4K�B��"���l�����&lt;�;XM|���?���K5X \
�R�kgr�Tei�*N������;��Zn���x�����_0 �\4Kg�U��������|����o�b}�u�&lt;i�jI~	����Xo \
�:�d�v;��;��	59�Q��6�����XHS$T��G� �L�T���U l����?��C@��U��T	�P% \
J@��*U�@��*U�T	�P% J@��*U��bT�� T�dT	�P% J P% J-�@�tk \
J@��*U�T	��_~U�$�U�T	���g@���4��U� \
��H+-X����g���,��/N��MAh�*-Y�.$�b���d32�dQ��|I9#��H���B���\�:H�$_S�+]1% T�
U2������ Sr�LIC1F�)�6pN����v�^�	�:&amp;��I�(��N&lt;&amp;��z&gt;�t�XA�m|����d�V���l���LfYW;���� \
h%��Vr$�D(F�����Z�Lt��i���j�����c�&amp;W�A��|��Q7;{��i7�������������Zv���-l���T���$� \
D���h��70w��������~f��?�=�m�?��1�R5�Me���&lt;r�q�sz�G��v�������������.��F���� \
!��^I�o�*�����K�������-��]�O�1-Rr�����7�y&lt;-r9�(�`O�E������HYHDJR=��N\&amp;���� \
�_����q7���!���5�����*�DTr�qEP6}O�|gT�t��z����������&lt;�&amp;��7����7��C|3Z=��p����M�Y)]����s�n*s�;�Cl*m��=3���e���e�l�\V����&gt;3���
 �����3�������v�|
����@I�m�`Y:)����\U����,/3JOTS��rN�Yk�&lt;h-�|Z�M�l���[C��
k� v�hQ�\�����C��QB2R��y}���.tZ�6/�:��t���s���~U������/j�?IY���#�����I����&lt;a�#S�A \
�������ix�j~2�N��-f�|HR�zl**�m�}���9�{T���j��������8)�2^�eM=�+Q����`�E�!S6��6+�~y�etZ9�r�0zY"����6�_����G�W&amp; \
�!��&gt;"\!� �!� �!� �!�E�;��C�;��C�;��C�;��C�;��C�;��k�E�;S* \
����������#��C���t���������w��Mq��� � \
��U�����8���J��u�$$��������i�%����@�zI������=��Q���w����]���������B�;��Q���w��-�oQx��������ef~������lf~�8����v�Z��m����p�U!���yzzI�������(� \
OV���G��K����v������}}�H������2qo )��~.&gt;��_R����s)�RC�m
8=�Y�]o�7�K
�+����,���,2)�6�-]��(�(���e�����J�0�,^��zP~7o��Lh��3���T���vv�������'n�E|���Hc�I���d��
 �'�O��x?�~����;v$�O��x?�~�������'�O��x?�~����x?�������������?�%�x��x�z������M��x \
��X���=���'�_���r��x���x�w��������#���'����=�ui���;p����)+�x�a��[F�{�������a��,-���"��%�����S��� \
N��v��q�������gV�����Y���ZC�LE�TG�wE���"i�R�Z�4�}��amq �&lt;��,W-c�N�E��59.�� \
8X�`\�]?�� �|Yg �B!��B!�@ ��qiQ����@ �f0�B���@��v \
D}4�B!�@�7?�@��B!�L��B4��� \
�����/����\\o�%Q)�_�?�W��������4���f�� V_7���I�3� \
�q�;za��^_.3����������w]{���8�@ pf��@ \
l�@��hi�G�@ �q��]�@ \
����A@C��;B������T_V4W��YJ`�� \
���p����	��}1A���	x�y0��`��	�`����`���_�`0�L&amp;8��	�`0�L&amp;�	�`��`0�L&amp;0�	�-�`��h0�L&amp;�	�=n~�	���L&amp;&lt;��	�\L�w�:��� \
��y���_CL���&amp;�i:�)�w��W��_�x���8�,�q��fa�m���/?�_�X��(��U��e	����8��I%��$�&lt;]�` \
�a�����&gt;��(�(Ua4�yI�����porio���Q�q�����(#�'����j����6s&amp;F�+���7tQ��e������� \
�&gt;*!.b�KBq������T���� Y��z`*�I���P��\�-�e��_����_�S�k�3  \
�aq[��\bp�\�}��O����,�Y����=�I�4��	�Sr��8�S�)��`J0%��)��`J0%�L	�S�)������)�f \
��VL	�d3S�)��`J~�w��M�`���)/8$X��1�$	����.��Q���;���M�B�9�?bh��&lt;����O�0%��
 ���n4�S�)��`J0%��_~bJ0%�
�S�)��&lt;bJ�CS�7���������wl�?��s_�_r�l������&gt;���w�N[�������h���E����T����q78�&lt;]���X�Z����#��Gu��&amp;YjT(��Ke \
�M�B+6�$�m������������xk�{������h���������Y�.n�Y|w�����������������u��\��N��5����\j�j�&lt;Q���e&amp;u�-��2h�-���e�2h�Z-��A��]0��A� \
e�2h�Z-����-��A��+.-�.?Z�]��Y�-S�A� \
e��eB9Z�]-s�-�.D��Zh�Z��e�2h��e�2h��2�L���A� \
e���2���1��n\����K�-���n(�A}R��0��a�l ��L[����fo���
s�����D�C�vv&lt;��iS�vupk���eW��KB@:�sjW��aq����}�M����������bW�\��&lt;	�x�w|:�{��~eTi� \
���p�A1��B��~���h?�v���+��1V����[�w�n8�n�4U��Z71��t7brqW������2��t����A7 � \
�t��(� �t���n@7 �
����@ �:����n@7�`�
�t�	�@7 �
� �n4�t���n@7 �_~�n@7�
�t��&lt;�n@7 �&gt;[�W� \
dk��_�/s���H��2��,���E�i�h��=1RI*Ke�����yT��l������K�^�+W�����Z��b&lt;��#4j�h���x����&gt;��21Qr�B��^�[�L&amp;ea�t=�S5��t.�j���- \
�,���D'��&lt;�5��(g��#Y5���;�P��,�S&lt;Hb�c� \
w�1����7�������0���c����F��*E.�[c]����o&amp;K��R����M`b���=�86���L��������,��� \
\&lt;��s���`�.�2�����`H3K���P%�2���L��XQ�{�����&lt;"��$u�a�S�s}�\�n	Y��2������*	cu�
 9��q&gt;-
S2M+��A�)��?�wfy������I����p���&lt;^I���M B
�1q&amp;i+�������G�t&amp;�&amp;��z~=t��o����"SKYd��*��l.35�IL����^����4$���d������VK�4�L�7�A��/_�%MY����j���
 �+$7b�����������7^���v�P�g�����b*���	��Q����7^��������zx�m+���zx=�^��������zx=�^����zG�x=�^H������)
 �7��5���m(�������Vb�zkk���zx��	������x=�^�����������;�^������^;���{��K��]��-_��'���{~"e_{N��t|���T�)��N���_��JU�+��Un�+v;xL� \
�]��B�#;X�  A� h4
���
�A� A� h4
�A� A_
�A�!1h4���4��4�44��4�4\�
��
�W'4h4X��A� A� h4���� \
h�8��z��Oj�:�73�:���G�:�O{�D`���I���$�����q�0�WP�*���1z�W�01������tS`��{a8��]�.Z�{c��9�{ \
����������SynW�/�� �z'#��F/�'g�N�%=�B���C�!�z=�B���C�!�z=�^��mz�,��C��	"�z�0B�w�-
 �7C�'����"��=�^)�W9���C�������z=�B���k�����;Q���D�%]��$��#���	���B/���K��B/�L�]�����y'��� \
�_�������C����y�&lt;t:��Dt:���C����y�&lt;t:���C�eAt:�O���S��y��koi��:�89t^M�7G���J \
�����&lt;t:����&lt;t^���C����y�&lt;t^��-�&lt;t�	�&lt;���8��RoW���{.O��o�&lt;u�&gt;�&lt;��^�&lt;��y&lt;��J��"GY&lt;�y;��
 �wG���Y�a�&amp;X��Y�������C�7��xr5�L��6�w����C����xh&lt;4���C����xh&lt;4���C��x&gt;���+��� \
(��KF����xh&lt;U��������l4���C����x-~���x2���C���^��xh&lt;4^���c��M��0����$�.���{pOF�6����	���{��d�=|��J \
'����6g|�]��&amp;�&gt;����O�������++��(��pc��[D���^a�tC���ik"�&amp;S��I?�e������O���Y�t�k�+_���S��I����������W�zv/R����Wz�i7�� \
����I�Om:����e�S�q��k�{��TP�_�v/j \
������/d(2�E�"C��&gt;2�E�"C���Pd(2�b�24�����Pd�.�E�"CU!d(2�&amp;�5����Pd(2�E��x��E��d(2�}=C�"C��mZ���I�Y�B���~&lt;lK���� \
G^�0��7S���U�D�L�'J���������Tm��/W�Y�e�y&amp;�T��9j�����y:�z�l�����u�~a�����q��z���� \
k.h�"��W���[��'��K�A_������k�����.B3-	�4SK�V�B*�����l�V��T�J,�f=���n�_�o���&lt;��Vw \
&gt;�g�\��gZ�y�E�M\o.}+��V��&lt;�+��R�%�����������y��~��;)�)�)cX�F�s:���m;�S�� \
���/�,Amql�� ��b��f�k�R�[����9�����H��x�-���[e|?\��V�����L���W
��pl�-j}
��f�W���5���s��]x�UV?�&lt;8U��HJ�� \
��;:t�n�"�r|��8�\m��v_�^���w���c�/w��c��a����Y�d��i�`]+����� \
���q7}��6����6���Mgg=#j����$��m�������-��~��;q#=	W���ElL���;�}9��s��e���s�f�Lx� \
��8�	���V��+�xkL���A�(�	�+~x��	�`n�f��{��myz��yw��������1�_��?�vn&gt;|�vnh0� \
��`�4 � h0Ph0@��`�4 �
h0@�a�oB���
�
h0����
h0@�A8�4��� ��4 �
h0@�;&lt;��4�	4 �
h0\
h0@�a�A��g���i��^���d�F���w�l�f���m�M�� \
~���������+����������W��������o(_5~�^Q�jr�;�W�?���U�m�R.p�! \
14u���Y�t#�����8~����ggl�O���if��+x%���3f��0#��0#`F���3f��q���� \
O�y.`F��ma���3f�3f������0#`F���3���0#`Fi�0#`F���f��q��5��0?�26e-����`�M \
����� ��x/���{�/����2���������@���E'���QZ��n�o��&gt;����{�z��7���0������"��_�&amp; \
\�p�"�E��)�E��.\�p�"�E��;&lt;J��x��s.\l\�p��pp��@&gt;�E�4�E��.\ \
�pq���.J��.\���"�E��������/��s���dcI������dc��C66	�ll��Odc���$����( \
�C6��"�����N0L6z�F6F�.�D{Q�J�z=+�(����x]����k~��'y	��i[������o�E�b���3��zn��9��k��y��Mu�l���B��8b� \
��)V��J���Z�Z����&gt;Q�*��V��?��H85�&lt;jG��F��$-}�y[��`�FUcD2��z����`L}����O�:� \
���"��|Z���^�o�^zQ,��xn�����HO���'���c��|�Y�i�)���U���vUc6S����DSQ��D,8Z��!u��y��bY/�����;�-�RP���j�����UI��k�y�f���Z:�9�P���{��O*��g�[�+��aVYN��L,��.-��
 NN��;�,Q����j����^���������N�m�y���J�������{�����*�]Q�Q&gt;'���ow�~�d�����p�Tu� \
X���5sws}��o���ZQ��*$M��L��iUjr6����r������$�NK��7���W���J�Y�����v�Kr���=����NrM��� \
c�I�B&amp;|�7^���P��������Z����f91*��+���r�,+^,f#l�P����G��rN2���_������oEy��m�����vY{���	�g3f��2v�c0f$���
 d��!Pq#=���k���9���H��i��B���K]Y�:J��jx����`��6Sn��H��W��\?��74�E+�og%0J5 \
/t�cr7�r�����s�o���=X��x���)���&lt;a!"/�R������2�r��u�U4�2���Ugg�oZ������S�����N����~;P[�
 ��������=�X&lt;e��\V�\,��Vy����r������#&gt;%o�7���sV����^�;�������7��@=��F}������kx��F�4��pQ~:���48dz�J�����Z$�]��|jcY�&lt;����i�������_��No��wT�q�}���
 G9��]]TVt��(?q��#F���{�������������y���`r�El"����F/��zN^�x~���k7o=|������S'Y&gt;�{ \
��L.�"����������El�w�8N����U���A&gt;J���m-��V�mW���#����	7��/I�n���'����/��N�m���M��U=?[��S�8�����^�U��`���,
 u 8�r�����&gt;O����-IT�����r��u��t��9���H�R�v�?��;����;N�Z5p��F�cK��9'n�y��3Z�b��` \
-bV�����t�:�����"=����5���q�����d���@O_�����i�le�R5�����Y:U}����r�Vc�FY�i��~�����#�.�����;�HT/�����7�y����4-�z�����
 �A����@��� c����2����k�+�BYq�H�1C�o]U�f����lb\[7
�{�����U��z]+���X�m���_�e��e���k;J�����'5��XVZ��S����7�6�_c��xV=;���	�#�V-���z���{�s���z��C�
 �a�c��)��;��&gt;��T������87��~w��F3��	������,��:��T�?�V�8�����s���-������"�`����4 \
;cTE������n��}p����v���V�@�%��(_f������jj�����,�9Q���/]�M�&lt;6�kZ�U��j��3�������g�����|�����Is�'�+�K7���&amp;iTS�d�zk� \
//,� 0&gt;/��J����S������������h���B&lt;oO6����@�6��3��_[�R�L�����7\s��������3�
 �	|[k��yT�%����i��f��X���^����tN��X��h-�W��SJ�iY�E��.Z�b�0��Q�,����y���o_Zac/O2Z1W��!����g����lT�a������z���;E�u����o�����
 iXH��
�GH�B�����4,�a!
K!
iXH�B�����4,�a!
i�`eH�6� 
�s!
i��0�a!
iXH�
G���4�@&gt;�a�����4,�a!
iXH�B�+{g��4��5o��A���m%�$������!I���c'N���%g��e���s\�I|�9�O
��aM
��aq4,��}�
G��hX
�b��a����G�5����=J��R����G���=|�2]��F�I��?QKi����z������+{�S9_\�v��}Z\�~�A(�(�y
��GT��d� ��djk���S�j�D�Y#g#���A��-n�Y8���S������m,5�$��c��Z��!X��
��/g�x~c���r��T(�Gu��,Vr��*��):�L�X�O��&amp;��'��_1����,X�8� \
p�XP����}�-0�����XqvZ�t4+����0���E�&amp;L�0`2�d0`2�d���&amp;L�0`2��&amp;` \
�R	0�.L��6L�0`�B0`��r�d�5`2�d���&amp;L��!�	�0���0`2�d�^&amp;L���0`�? \
dU������{��|xa�U� f��9���+��n�����Y^|-�����r��|�./Kb�B�/�M�����Bex�������z�o�i� \
[eV�����T+X���@���/�I�&gt;*���.^�_p��z��a�����t�'��xp^��5������_�S�������AvSky���g^~�j\��2�����/@
 ��`�!PC �@
�5j��5j��!PC �@
�5���5T*��� �@
�� �@
�5T�5�Qj��5j��!PC �@
9$?A
�2U@
�5j��+PC �@
��5�_�� R1X����IY�S�
�O)Xw��2t2?:i�J�Z�x{4��J0���H�������:dW��O5E4��5�CMegr��_P@��\�r�
��+�
��+ W@��\�r�
��C�U��J��rU�r�
�U!�
�UG9�+���+ W@��\�r���r��Tr�
���G��\�r�b�
���B���j��O�5�FH��T])p�3{:�g1�/l.��n�����6p���%�x���d��I�P��4�LO�K��,l��Njfjk�)�I�Y� \
�le�\k^��O�n~cXt1c��r����m����I�z,���V�wq�j��;���lg������-���l2�n��k��#�=���r�I3c���V��qU�������� \
]'x���?_w���3L�?$����e��}�����+W�Q?��S���l1[NOf�F���y��|���4�H�P�L \
��b�4���������'M����^��r&lt;l���Y��]���C�N'���b�[!s�-��r��r���&amp;�D]�,x9[����q�Tk���_����7���a�T2W���o��[������2!:����D��)b� \
9!|;��)_�rF�����h�{�*o���;� I�U��Y�������D_�)s���va���4���������j�E�c�� \
�G�-���:v��H ��:�$e�"E84BK�spz`�)w������a����4v��l�3����z���|w��{���9'�n��S���w����[�Z�����S�1�?�e��}�f�GG���&gt;T���&lt;�+K��
 �SVc�=���9�$��t��)�a"s�]�}O�!��y4 \
���{��T��7�}�Hfo�!��SE������4�=��&lt;[�4T��4�?��|�Y��cu)y��*��Ip# �+Y� \
?Y*�����b�^�p�����4�������H��u�SGe�x�EI���d��5 \
��wq�7D��S�������'4���@I�\44��l���)u�Cyv|#���z \
�)�3����[$Z�2'���K��!��7���|_+x�Z����*~8B���H&lt;pk���O;����R������S�e��B�U����zi���FY���2��������rD�x�;�=+����a�:���[��-10[^�#g��3��#�	� \
�W��$�����o�3�7~�Q�X�&lt;�X��2#���W \
�����k�0��~�WC�E����j�q�Nc��z���b����}�����{Z����j���R9�R�y09t(��$b�b��="c�= \
�c�LAa�;M���=�+K�!�������x%fO�������������\V�u���������+&lt;$�d��D2d��5-��jV.%���������[���x,���bU5s����x��T^I�����w�]�v�����=9G����`��]�H \
���{2�&amp;r�h0�����'�M��8Kd� \
A��*��}�3�h���,������-����f`��fP9�J�zx8�z4����1��7�����%��&lt;�c:%!\�1����s��}�2���{�R��A$
 �1,�DJ��?R��+����*�����v�(������^�j�1BR��zC��"o�w��M��n�#����&amp;����x��v?��� \
f^������ZJ����K��`k��V�k�4�����'����t��QG��9�3��YX��W�/7e�'�~�Yso��]�� \
�x�u���y/�~����l��~NiS�D����:�n��7�I��-�ML��yS�_�}xs^9���C)U���l�e����)!�n���h�����qF��:���E���"w�'��o�f��a��~���� \
+Vt��5����H\{�a�B�8yA~�xr��}-/	��� \
w��Bli;$�G2�X��@�oe���oL��|h��ZWq������?J&amp;��2��{��B�������G�������0�]Po�|iD)�|�����1��Q&lt;�!� \
��^��9t=N���n]�M����@o�8�W����^�����KP��UI�,�|�:�z���e���� \
CG�}�bR�ucU���!����{?{��em�tt^[��~� �v/y\�y ���#x� \
�i3=@xK�*������f�H���A?�&lt;�x�b����x�@�5/�--&lt;�Y�N����j�9H�73���J�o7�4]��D����%�A��z]�1�������f� \
Ofq�8����u��eT�|�Q��nly���S&amp;=����^�����\z3�����\���$;6!��y"����T��YK/����+��{Q�/y�G:���x�u��+KK����Q� \
� ^�"���;CI����M� p5G�}K	Z&lt;���@aa����)E�&gt;C,YG�������y \
5t~�f��k�(/"��C�2o���������c9�%�r�A�&lt;nmE;�WY&lt;&amp;�����`�@����2h����h��}���T���(�%���������:Z�m�c�A= \
��5�������{Il=��'Qf��%A������{b&amp;�d�*�G��"���CsHx)�9|cJ&lt;#����h�v�G�{q�8���kj��� \
w��*li��W��n_a�K��f0� ���3���&lt;��mm�����?���|�S&gt;��� \
���+?�����^�?)n���;�P�9���$��^�o��?U�;�Uyz��Pgh�����=��k��#�:���\4��&amp;��+y'/��4��Rp,����]*Ut�T�HB/��$^?&gt;}r��/���]� \
����'���fcM��-��`�����G��6':^�Qq&lt;N��4H�e���cL5�;�s�Qo$���g,��9j���	��n	x�|_��������VX���1�=�����M=��v�D��4&amp;��0���k�z�4|s�V� \
��l�����l�gGs�q��:�Wm��UH�����?%q���:�%����{o3s5u���V^oR�6g7k���/���&gt;|� \
����������}aj���W�_��������w����t����=�\W����?��������7���{q�F�#e�.��g���m(� \
���q0��h$���0x���*�_\�j{�����@��o�9"���?��Q�&gt;-x��k��+im�����|��T����G)��c�]����&lt;/o��So�&lt;IkD5�A��M�{F��V�X��K�����	��"������%��������l�'O7WW��"Q?D����� \
��*��+��&lt;���J�{�|�^��R}JN��\wj��X���]ybk��4C \
R�|!��k�g�����Bx�]��ry�JQ���Hq�DZ�i�= ����7���-b�?�*������7���[G�� \
u]�kmu�'�g�P-^��{��2/�@[�����F��R��=�$N�����o`#)��-����� �0U��	x��2�XI0����� \
��zL�%�mz�����;y��]ph��� ����%����&lt;R��&lt;V�� ��� �^c08��,��j��1�^�:�&lt;9cp@�� \
)m�H\��td��a9�^��g�?� \
&amp;�%Khj��kOY�JoNO�-N��q����~h��{�����+�[����v��M�vo�Dp[vX4P�k}��2V���5_�i�6q��L#���L')���_9��v�:I�u�6�����d�^��
 �8�L��'���L�a��4l�+�tn-Uu,OM�)�
�����������+;P�}�s���C�`�A��t�n��s�����b�Xvn]����)N����:f��9�
j�q� j��qeSc�N��t��01�.KU'���/o*S���t�����w&gt;S�����;��+X�M{�Hu���B35��Xs����;
 ��[�j��[��Y�6y��������c�8y+�����]�v��X����������e)�)���G�@�|����q�0��r?`������,B��E��-���p������v
 ThjL
6Mc8��f�M4�E��cL�pT�!�|c���U�2,����;�u]UM���iAk2o2�2$��&amp;���{�&gt;�� \
D��8�X9eGe���k`L�:�!�� \
�@(�&amp;��-����:���D����vPHSn���;6�PSm��c]#M����D��S���.��fw \
*:�W���.�;1dlY��&gt;����~����&amp;��z��t�a:P�n��|x�@��B+�U���1 \
�%)Q������Y����P~0N`X������\���&gt;[W���dG�Fek���(#�����C�����l�O�[h \
:�^m!u��*�nN�Y%@���([-���7�'�d�=��	 u2������+��� p��8e+��5��m�ru�����:����
 ��;����JX=x ����&amp;S��q��A;k,��FrU����I&lt;}�P��
CgZH[�P�,0��r���8�{L�ou��0^h
��l{������i�IL.oA9�5���Cl,�.	�e��)H�eQ�N�@�&lt;j�����q��:��:�e���0�����!fl!��@ \
�c�+���Y��:UQ���0��G�����Fsv����wL���U�|��X�9w��*��%w����l��q^�u�^Wg \
�VW�U����eE%i������i��5����s���*��0�'�+������-��9W^�o^��`:�pah�G���T����$y�� \
�MXm���4v�3'�U�lSdJ7r�_����%k��(������&lt;���d�^�cz�L��p&amp;�q���g4y�pk���7�yA�i~�l�T_V����e�����i_� \
'��)3���:_�r"8-��q���+RB�����������%���������E������h?��-Ydm�`��+���14x� \
�+�,&lt;%�;�Q��� Ce�(2����u����i����'��\\������b9s5����fM��B�����:�q�h�.�`��E�7$�a�lc����j=���O5��g{�1 \
p���h�������KY�1��_3~t� \
��0��X�\A�:�yrz�������&amp;!0=��2`n����_���uo4S$&amp;=���tZ����_&gt;���1=���h�;0�a��$;�������d�{eK�����&gt;��)�DU�:���c����w
 �x`�������.LF��;���$r1x(2[n�qz-�L�v�&gt;K��������;����=m�������j���A/�T�?�(:q��Dvz�������l3fW���g��R����M��i�C��*w�V�H�
 Z��O�."�	F�73`bL'��M�2�W7&amp;'rqT��JI��o��+uNr��]yY�'a�/�e^�-���/�y�����o,���) \
����^F�l�0�DI�u�t6`R���kN�����,���5��V�|�S+��������L������s2���m����c�k���Uej��#����tj�L��dB�gT�8�����!+tap \
�y�0���9M������MJs�������|O�K��L���,�� \
�"�Q�����������kl�S��*z��sgB&gt;\�r�)p�L�wi� \
���6,a�����m6Iz��8��&amp;=�lf�3��`��`�6_)��@�������G�Ey����U��`��d��8�{�[?�q/k��q�,k�'���r2; \
w� �[^���g������iIj~M��34� \
�H���D�N����;&gt;�������-�{�d�	����&amp;&gt;?�����S�[&amp;p���^�'��r����h����35�;F_�����I�aoVL0�����P�R�-lL+���V���o%�� \
�����usALw"���&amp;wA�f�!�uyd7 \
��CD�4�.�������/������V��c����g'}~1���h:9�crNeQG�(���=dKs��g�:�tQ� �$��9����N \
�!=����6�2���5�MG#0�:��s��5�&amp;�!�S?�b_�����0��pw�0�|�F����G&lt;`.p!~4�`CN�R�U����"r��E�T����'2 \
?X� �5K6���)Z�`Pr�&lt;P��rea�dTV?��_��#V���QD��*���"o�!��5}����P���C��f�Pg�Yr�)OA��A�=[�d6�S� \
�#Ui�u�$%�BN�X��AW��G3��T���W�h=��Fp�0�0�0����@�VL �L \
�L �L �L �L ���AX -`,�V� X��@�&lt;&amp;`lA���Vg��
���L ��&amp;`���@�	�@���,g0��&amp;&amp;`�O�KA7�8)2����ux�;{��G�]%1y
�����K�qR��:�������I"�m�9�_u�D�''%9u���.N?&lt;�89B��Pr�p^��t�EQ�I� ��

C�]LC��$�u�(�s��5�$� �S�/� ��\�������������#@?�#@?�#@?�#@?�#@?
�����$@?H �)��G�~�G�~rE�#@?�����#@?�#@?�#@?��`�S�~���������������4 \
���~ ����$�����7	4a��I���/�b|!�����)n�),' \
?�����H��[��d&lt;&gt;eR����|�s�rE�B��&amp;���:� �s��� K%/y\/}�S���x��4 P�V�����.�*d� \
�)� E�W�_zMy��Z!4��)z����X���Dp&gt;���l��$	�~������ \
������N�w���+E�3�+|����$3��ppl91� \
KN��1�$$9�&lt;��S�*���j�����&amp;�{o���)+�0X��u~	�2��$*���[N�%'���OZ*�t�k�Z���5�p�.0�|G��������_�j���M��Hg'^5����xw����p-)O����j}��&gt;�T}+ \
E'(�9dT�.���w[8��g���J�����7�v&amp;����S��!$$���U�Z�E���pcn#�U��p	Us: \
h@����c����!]�1�_����~}��Q���}�d��{���\e���{1q��u�o�-��\���Xm�&gt;�54yq��8����OI \
�����`��V��M�T�{���N6�NSi��j}�,W���rT���������������������������������p��p��p��p� \
�p��p��p��p��p��p��[l�.�U&gt;.�!{�\w�\�����������G��u��u�p��[.�.�.�.�.�.�.�}��������:�.�.�.�.�9��r��r��r��18\�;\��?�\DW�c�����%�YI:_�����Q��_���yP�e \
���_���y�aa��n�����*���ZW���NO#����,�U�.��L��_S_l/��E�Z \
sL�v:S��;�e7��B��{H�p���g������_U�i==D���D�o������A���Do��m�8}zM�L�E�Z.`�~E������C�&gt;���G_�����oe�
 ���&amp;-��%$���
K^l��vE��@ds��- a\��#Y�����-)K�_^���*/����:-hj� ��\@��/�m/�T���cU \
(U�Tv�O�s�n�U���am"�����KP]�[X��`.��"��{X^ ��%�@� ���j%i� \
be����@�QP�rgSN�V��������HUN��C�WX����ce���!7��7d��\�!�����~��z{'���/�c�l���#�]��c�U��.��z�������Z�� \
�"V5�wqX���~�����|?����pq�8���J���]t��$�I�7m�����C�^���U��s�p�W6�������A\�&lt;����U����.����� \
^� �
�2��������#�Z�{�^�
 |�/K��]��Y��#Xu:�fW�����3�����n!��	e�(�Ng�@6���k	KS;#�z��L�)���}�A�X�����&lt;hNY��K����`�z���2���}�A�X�z4�,p����`9%�]�-�V3��'�X \
tu ���K�������v{MN��#�+g�dA2�j5���-�.���=$��e��zk����+[��\"��&lt;XNq;����+g�d!1�b5d������&amp;.��HN�p��Jk{������;=u��X��3F� \
u�w�f#&amp;;o�A�mck&lt;�28������8������E!������u(v��������?^���^���E�������+��7�"W�s�&gt;�Ws�
                
*`�@S#{k�5����Xi�=�oN
�n�e
�@Y�Xx�l��3KX����a!��`�h	KS;�R���u��:.\H��7%\������=�{�
�����O���g-P;4#�
M�}���V�i���l�������P�#N�� \
���k�K�0�����`+���1����������f}���9,��E�l�����E��u?g4�~����� \
�(�8�`(Y��Q�=��&amp;Z�Y�� \
����8�a1$4����s���+��9a�9M�9x�M�/����������]���a&lt;q�!}J$���|2&gt;-�S�Y�$6�E�s`� \
�0b��e�5e��20)c�-�2�s�s�/��4Q+��-.�����*s��&lt;+0��O]���.��Z�����bA��,]K(������&lt;����*l�Tt��V��c \
s2-��"���D��U�����A�7�59��	�Q�(��![�0�%R�d�2���%����%4/hjS!������3�(* �
�1�?�H�9��WE�����(�+U����d7BY����1���yV��A��l��vx�yQ�N�A-��WAC��B���$|[�$�����&gt;���L�8��q*�/��d,ft��H�Y�d�HY��0�{��\5OX����������XDEt�
 ��
��* �B	���hh�!��\���9C�M"�����W�}}L?�h�Q���
�K��g��j��6R�X7�qr���bG�S��N�&lt;�9\�}Q!� \
�'&amp;��a].�,+nlJx�eq����e���&amp;�}.�"����$���e�q&gt;���\J��*��U���b�Cmi�b���4��3&gt;nJ�Y����d���0A��p���ao�����������PQ���������7#��)�NpkL����)�Oa# \
eu��&lt;^���Y� �
��Z�`���&lt;+�X[���.�A�Z������2����1[Uz
����&lt;��p���9D0�D��T��)Z4�u�3P�a����(��t���j�!x}&lt;���&gt;L���0������d9�������u�
� _	��'���x �.D	R8�I�������q�8w��-��Q2�s~�Y'��{D���r�.h����i6O�$����O�8�M������ \
�3�Z�I�fV2+�D$���sl��i�&gt;K�c����=��C��v�u9�Y���+���������xE��L������B2X��8��%�u\�\'��a-?c���TW�:�����5���2,��L \
G�c���a����N�� �����_Hf��$XA��K���}.�r
f�r(8�#�]X�d��u���lVp��M�#(9PZ���Wi�,2Q�j�H
�}������G�(H����R&gt;�Vd�gp��.1�Wv���w9L5�&amp;	OS��#5Q(#}�B�R
J�l�����"�\��\�ed�"*�";��l� /�R��u�B���!\�
m�*H,���[�O�*�a���JbWe#�SK���=�T��lu�~������{���a����������iUIfqR"Pe��"1��$��!E���&gt;�&lt;]�W�"%���D�8+���(q_p���6-J�L0V� \
�"m���� uw�B�:@��%8��Uuz���8h���� ����&amp;�^� ���"�?�b�s�P���\  \
.?��ee���ZX���m���n�B���&gt;�-��q�������{�,����]���"&amp;J�ol�x�QS(V���+W���U�.�Z \
���w���:q��������5��&lt;�Z��Q]�5=C�$����NW�E��sQY�5�	i��A`W���$�.~����}����u&amp;����T��g����A��;�s0i�������8.�4n
 ���l89��^�WYS0�k����&lt;H  \
7i�d��;�v?��9��n@jq�a8�1t�^�S��T��/S�����8����c|_�Kc0�~��I���qdJqe���u�M���I9���2��\��!'�IR5��gy�x�P����nh���	K�&gt;T�"��
 ��:���*}M�%����N��
��~��HS�h� �t ��q��W���Vw�N�~�HJ���(��,Z4�z[+�p	A[1���p�i����+�&amp;���~
�s���\�d��S ��J^}
($z�&amp;Am��0���r�:jf�:�( -���v
M�,�f��:���q��AGw���9�-�X8��?�gp�$�x�����;������������W�#�m����E���0�z������9��
 ��Q�%57�-p}��hl�,*QEQ5��o&gt;�'|���������S�?_��VX&lt;P��mZ�������W�
]��FY-]2� B_CS��#!. \
o�����^��nA1�Q��L��E	�j{�n+���O�X�e��_�!����}�"^�ib�����\��hH����T�� \
�KMa{��,]���g���\��?"S�2�:}�� �&lt;O%����� �)_��������5$;�8��r������ \
�!��uvr�u�8 J&amp;;�dok2����gJ\�2IW��m�P��� \
�\-����&gt;��N�-$Q�"i�d�^�['�@�&gt;�G����1���$��1 ��y��n^�QC��3c:��Lc��,j�u
��Q���/8`)!��~��7[2�h/���
�@c�F+���V&amp;e�,��&lt;s.�I��3��V"N�}��q���wwTA,�]$eV2�"�5+u'�I��@�	�=�F}%���,=o��wZ��%D��e/d*^@��c���TqFMA����EU� \
�X/��l�+:���+\���l�*� ��8,C��:.�@T�&lt;,���~���O���l��(&lt;������� \
=q����F5c��&lt;��H��n��2jy%�����U���T%������jUc*p�MEV}+l���&amp;G4�v�|&lt;���B!baZ��
 J��Y)�v3&gt;3�������������������)�h�ph?��9.&gt; �(�6����:r��z
b!�=��%��
ka���`�*�����l������P��?nh���
�����3����������9��^�!�K�������[��)�Z�QmY��s��8��.����0�jk��W�s�)t�E��������l�����b4��z���5���o��M�|k��h+Y=���f3B
 ��9aV�����)�����&gt;����L�����d�n[ "B�KkXX�=��jx���2�l�a���P6��/K�i \
&gt;��1�&lt;O���W�o��&lt;�_E��J�������5�*�"���� � -��r4���Y5  \
&gt; �Z"�y�_�A\�KGA��x��(M`�5N��]o��o�:��h�$���� \
&gt; �~1��i������7��L�O&amp;�u%�em\D5%�O. \
&gt; J���'Pp�����M��;����u�4��'�B�)	��$-�*�~7%�D?3��w \
&gt; �~q�����L@�6��/NS5B��)	�-�
4�����L@�3H�?eAQS�RP;8�"p�AO�����r�Bl�jBt� \
2�2p�"���"tH"�4��j�&gt;T@������$#7����C�C ��L�S'���&amp; \
]�d��W��4�����y�C��j?�a���� \
G��z��a"�+�,�yZ_Ar���,��@q'&amp;�bZ���j�s|�ATj�������(��y!��#��QR;�"�`���K@��d��?o��W��G�E� \
{�N���V�-FQ��53��������L�� �V�F����`���0 d�^���6~�\ � ��$������	��I�9���FQ
av�$CN�y���P�p(����cq�LS�X��#D��_��wt��&amp;�	�R=N�MK[�5����H�=o0jr"C{���7(n$#�H��#=��p��)�N��Q��
 ���sU@����
�������������~&amp;�9,���k��&lt;�z�E�~a�Dd�`�B�� \
(JQ�����yh�qJeBR���z�o%�WQQ]���i����PI������O/���t.`eUXI��]1���s���-MW�:�T!s�! \
�t���y�I��j_�+�[i��&lt;�����s+d)67(UwvEIT��|��X��*ZF���T����g��0OE_V�IP)P[����� \
�q�#�V�������kg�z�An�&lt;���_:��|8iFMi��K-?p�$��/�EH�2����4�/p	�Ly�+����%��gvQu�/,�%�"H�N���&gt;�Y���|�}� \
�rAS�n� �������~�w'_����Z����L2���B|d�l����6i�T7�V���'Za���]�z�Lj�������JjC�v~�A$�������Ku��q�| \
�+���*�Q5�sa�f�1���KJ� 6Y�n�i�E� @tiEMP�]�Ln��G)�/(  ����=�H�$����!�.i*v \
��l��C�,\� :�K5��!Qc\��ki���CA��&amp;k� ��!6�]�w*^��6:�f� \
�y��Ro���n�1�j�.���� �68���j9"��K�%	 {��$�NDU����S����OR� �a�t�G��p� \
��\����4�����(�Vgk��tD�N��X���E�r.*�}vA�%]�"E�(��Ph��B|�U��	4QE�Z�4  \
l~����e���3h��U��C�R_�B��i��&lt;*v���K�����{Ck�Q����,`3D"��&gt;��&gt;lP���!�Ud�����K�C	u�����rQ��{[d&amp;Zb?�Np��&gt;(a*���1��&gt;��
 ������$�g6_�!�&lt;j�������)YF����f���%�;�j9&gt;�XJ������|��}����'U
�����~�$U~��Q[oU.#��Y�R��xYhDO������ �d��A��&lt;���x�BT='� \
���`]�4����0��R�2��A� \
��/��(�/�A7�mk��u�V����g��Pl��X�]����gV�^��K���]|:�b���� �RY}��.� \
���gp�I�2[Ds�%�:$����b$s9�8`��������l���i��OyT���)�p9�;��U�fQ()�v0�N�5nt�x{Q]o���C��$�Q`[eoa�I��w�)]%�s���LYi��a \
4 ,���c�����\�u�c���6E��3X�����J7�}2-�Yv�el������v��c/���DVw����� I2Y \
��&amp;��k%�+����_,� uqz���}i����3����nE�:��q]�`���e \
��\X���t���[h����jQ�������{7�D_���Nos�$�T[�,���4l_�;~g�=j*�� \
c���B]�:?�	OV���������JV�.����3�w/�� �"��
�n��� _��IV�����K�o��M�W��Ht%H��nYC��iw��#�������,#_7
���t������z	�:����:J��IV'3[?(n�������� ��]Wg�� \
�o'���ut{tT�������;�?�����N��?u��?�����(��~���o�&gt;8����'�_���onO[��Y���M�^��� \
�����_��L�,�G�L�%�Uc!�Z�?z \
A�^���oZ��}����_�~��D���N���@�X~�o�W�?�=E��e���&lt;��x�'����I��j���5K�e��������!oO���ZD����_��h����k�i�.��M��;99!�)5���aGF���&amp;i�i5�=���]�&gt;�g��
 �,[��
IxD��X�:`��
���D���o�d���	�?�b.X�� \
M!��M�������C����u����?�����Qd���^9��?Z���0/����o���a�T��O/�����'����p������V \
0W������a8�q����5�_T����~^D9���:?��4�~l�u&amp;��Gw�v��%���.�o���������B���7�{\�?��~���g��&gt;?:1gz1v��'"6���=��:I \
t0p���~���1������_�������C����?�����;?���]�=���jA��}�H���%D�u����!��x�0Q��3U \
WN��L�K�T��������)� \
M��&gt;�I9Ln���"�#|��+�EK����(���)0[O/�&gt;];�o��=���������q��x�n�������gu \
�_�m��~G��O��\����7���������r�x���=���y� \
V�N{2��V��Xu:��-�*�p�������k�@���}�x� O!�G����2���t� �;�5�����|� \
T��{�B��'C�}�w�� �i�e8�� ��_n�� -��U^C� ���W�Dc��^AsD� \
A���~��`~�c���o��)6&lt;&gt;��l��:	��A�3���R��|� '��t.��Z`~) s5�;�_ \
:N�����UC�K9�U��u���^�U���0@h�/f���s������B��2��S� �� \
�V�A��NGc,�t��.��*���I8x��(���+��mm��h��:W� \
�O���(B���]:��&lt;b�0����gp�Cqx-o�W�A�'�w`!�������k�^3 \
?:g��Bp�O�B\4�c7�O��F�s���&gt;)��tF���9�f, \
�DZ������==e��X�%�n�6{*d,�d�=��C�V�� ?�f�s�b;�&gt;��V��K�H��=�-�� \
�V��9o�v;W��Y���m��:������^2k��m/ \
�pcN����3c��maX@�vZ��h����7N�w��25d��L������ \
k��z��z�n=b�L�t�@G�?�d��g�pc�,��z}���6S�2�=��7�=��+t���fd�b0v�h�G#��� \
����=�XO�8��d�+�^����z63o���D��~k�����@��?�|������H������&lt;rf�n��QC���w�80`p~���=����t���i�5��^� \
�q�)T����B��� K�XaBd�
�i��F�A���������a�s�s��f�aD�A���`&lt;���@�������cn&amp;w�������f�1��x�q�}2 \
M�9�5X�v6�tL���0�ev�hDk \
%����^�O3���|lc��^`E�Q�&lt;g0h�����:���QBg�v�\#��i�32�6Zgp��q:���.C���8K#�Q���D \
5������r:�M���'\S&amp;��D����6_�G�O:i_b���c%vyL'�3b��;-�x���;�)�.&gt;�14f���0)���(C \
?��@���c5�2�����W\�	�Cgx��w�i2�@��q��c�h�b��G�C8��_�G�LH�	N&lt;�c��;f������d"�� \
�����w{�T4#&amp;|��wG�Q�rD0�����:����@u��n�@��9�7��D��m�D\�1����h���B����)-�A�8=i \
�2���4�&amp;����{��y��=p���y'4�]��2^L�/j���=��1�8�zS�^5w2b�	F#"�Hv$(U�]� \
N.�9${9mF�����u�e3i���}�5��B��:2�L&gt;1���0Ln{�����c����!�p4�6���{sM�tu[����!����1�'g���h�C�y�=��:�G�ux��|=���m[�?O
 w�����������]|)��������Oh�������?q�8`�����f��*�w2���u� \
`�[��d�����q�BK�'�45:yA��&amp;�i{��p&lt;�w&gt;���_�v�� \
a���Km��0n�R�K�/g��o��{g��o���l�c�U���5�����v��1���f�a?1��=�2���������/l&gt;�Ku��a��{ \
�3���������uN�,&lt;��N%���s�r����!e����2�`5o/�\��f�&amp;�u�`l�i�o�uMa"1��nv��`��MT���[������t���pyx�n��X���{S�B���T{":`(t�&amp;%@@X
 �����3�!kU �u@����Lh!NC��*�����9�9��:c \
�.w{c���/zY�	��m�Z�����W3��&amp;�P��&amp;�.��6n)��9w�O[���q��l \
��+�F�5F�VS����5l�o�`�#D&gt;���.���G�D[2��iCF��Mi����)�6����1DE�s�������'��a�D�A|J���d����J3m��w�E5���t�_C6���x���j��� \
�� 	��i�3�f9��J�����pw� ����K\6�D~o�
'8�0 1�nM����Zg-�3��@��{�F�F�~�:FV��B.-����y^���E5��Y���&gt;���Q���5'�0�n��&amp;�Z����	:��2�3��V���;��-�M��M�F�v�a�*��T���i��4�q�j��
 �8��4��3�o28�n$G�
�U3j#!�g.C�f���A�i3���
�1���������thB����
���~:�.��xD(f�Lm��'&amp;4�p�p��1�Z�b�C���o���&gt;HG�&gt;E'&lt;zu�ht��~_;�����=�9�9��v�S� \
�@:isZsj:ec���P�5�Z�����_���Z���4��9����g:k������2�fc��^1�u�������w���e3a�����	b�U�����)�Z!�t��x�E�z6hb4&lt;e \
Aa &gt;:bd����id��n&gt;u��(! t��)��/���� \
OS��|K�s0r�����X����WT�������	g��2Ci�D�N2�^o&amp;s������� \
�|�z{��2oh��/��'`��Eb*��j��c3����^h��&lt;`�\��0Q�}��0��g��&amp;4��HL2����&amp;��s_NlFiC \
?�^�����4;�8MP%x����f��a�bI���$���gi,/f#�y_����������"��zk���/m��lj��C����u|x��5O�D%sjO��+	�=�d
 ��-e*�����K�8��V=�10]�h���g��B��5�uv��F�@}4Dg�����f&gt;)����������{����� \
����&gt;g@��i�����3���K��{}�Lk�y3BG3���"����'+� i:v� �/�P�,s��^c�s�����^
A�21
�&gt;�E��b�s����7P��Z�=����P�%8�7� mg��+� �x~{8
�'���&gt;�1��t�y���k�
������&gt;l�6ctJJ7�x�H
m;iW���0���	s2���_��������.���z�������9T�q��hnsrJg�,���t���-;���(�:Wd��� \
�n�d4�2���7g���!��K��	!�9�9��&lt;�k�����/8�3�� &amp;]��)"m:���B����1� u0�a��q�H�0���� \
1�.��!/:;�����kmn����`��(���i������^���M����&amp;v��0�wv���������Hg�dY�{�U}���@B�����W|����YQ��$&amp;{��E�BNV�!U[��=�9�2&gt;&lt;A��{!e�
 �e(9�'Y w8��Y ������@���h=Z6��_60��C�����F�(d
���5R+�J����GXk&amp;�!�2�_d4U�q�;�9�TU�V���\B��	���ly�������y2�X��8|)�R���N�����������i34��� \
��6t �qP��&gt;+z����� ���+��0B�
�� �"� ���j!,���RM�+�/�f��AAl���{s���4(r�T����6%@�����������LJ�V�4� \
���M����'	����7��7��6��j�,5���I4�u�O�]1�3}�P �'��� "5lrW�U� P���(� \
a�K�Tip9�����:���nl��������C�n��M�!'.���{���f��������A�]'�o)Zk	�F�e��T�����Z(��&amp; \
�j���F T �������
l�� �k&gt;5`=
`��E�[C�DM���@���2�C�kav�
U�8�w��r�x�� P�
m���M�����M��_�`���3'�k`eT�6�����4.�?�3������(Z[���ih�*�!,����RQ85�`�wa�2
 �����c��k:�"�C�:D? !"z�7����N��������]�N8"����&lt;h�$�;I�2�l \
���Nw���u_���������%c��:� A�=�jYb������7����������� \
t�qR�4qB�nA�D��Q5�2#��k�����G i���]}�wR�x���z:5WB,Fp#.��������N���nX \
z�7�$��f�o���l��I.CF]�N����,�U�u�}�����+C���'��4�D	1�R���yl�W,.qd�K�r�I�$s��!a����to���M'B^HB� \
�j)�$��kq�?���1�}Kz.���'5�������.���|,Z?�qY`=�{o�l{�?��+n7Qfl�5���$������/��I�'�%k�^\Tq� \
j����7���%�fU����EY�`�tTe�eY�A/{����n2 L1�_=���J \
&gt;j��N7_��;4z�������1�x�^��W�� ?W��=N�O�0L�,�Y�Y��gP�fT�z�8��!&lt;h����� \
��Eo�#��o)�����6�����U2z9��I.���I�7�&amp;��!����QX��_B9��i�����MaO�P�I��e��3��HZ����������O���d��x�*gh8���_?������F��X���0Mx�c�3�*������-� \
#O��Z�v.��1�Z�����*-7��b��M��_����(�Zd:����E�f�������`��\.��@K�|4E��h�]��?� \
�����2�h�@i�T*���\)��b|&lt;�7�@og���p�l�9�D�o���6��'�?��|��U,f���h��"����x�����&lt;zu4�`��h����,[~e��V������).w� \
SS}��M���3�5�q���q����$[���ad��*�M�*O�2#z	��~���ja��tHB����CT���n���w�K���jP \
�E��6&gt;�p�*J��?M�2�&gt;%��7��:�OX \
d.MB��cc�������\�;_����Wm�B[�K�9�	���S}���X���U��K���9=N{�����8��D{�����7�h��nF� \
��H���T�������t�zF[zF�y��&lt;�$�n��5v��l����mV[���7=�v���D4q�S�fT���K&amp;G�����4������.�|�S���)���P�\* \
T%�9�� �W��7sL�.y���a�=��w"��so� \
����$�"��x�~|p���c�6�]�Fs���	��|h�����r��m�~�r����J����A�1S�EK�%o�{,����� \
}?�&gt;C/���o&lt;��T%�I�(|�)�b�qq�{L����G��Z�F0� [T�7���=���S^%� \
�'1A���	���:��m?���9&amp;��%��&lt;�u���2�K�@�C�E!��rN!����O��*�C&amp;V����Q���	�q= \
8l\]�A��6��u����V�O��r ^����c��6^�\�-%��
�+�j6����9��Ez�V���k����GX\m���yc?���%��,���z�i���]�TIi
�p��P�8 �E
Y����15��F)}*�W�p�4� \
"�~�oD*L��N��=�:��nb��M�_t�����p���F��^�+�����Bp�NA6�sv��l5�bj?g \
��idl#��	���.W�F:Atf0p��j�G+�Z�*-9T-NX����A�18 �52����&amp;b�p�@9G`�&amp;�4��
�U6	��ie;,!+d��T����5 C�
`�@�@�*��z/9p`a�B���YG���Md���;���Bf�D��&amp;�1�1V��JNB*�!j &gt;�(� \
V�,J��������i�r;�1�V��������S�` ��,yT��-��jd���p82��aR��4�FY�o���z*L�ZL�� \
�bp�B!8]! ���`6��6N4��@�8��*���[�/h��l� �����������	5 ]6�ai���0l \
�H���H!���4�b����D�S(G(4�F��h���O � �6������X�"MUW�3
k?��i ��@W;�/�O&lt;��_���:Kl�p�zA��;���5��������u*�\6�F��y\x6Yg��VDg���u�Ad8�� \
TG��V�^,t[�S &amp;�`�����SG4���
u| Wp�C7&lt;V0O�l��N�D/�����	����.5�,�Q�aS���K��9��v^�.���p;b�:J�� \
�_8������)�C���)��Z	�Y+�=P0N(T����V�a��X��&lt;��jL��b5@���T�#��w�#�RS��2V�(}��
 ��.Le�D(@Dl�� �����r/TC`�3�G��&amp;d��2o������S��
�J���j���
-��-t��.���S'��	_a��@�M���~r3� \
������bb�aN������Y{�&gt;+��X��+���*3F�+#������_�P����-n��ys^u����; \
��2�]��#��a}�M�s��k����5`G�s)�3^I5�m��-F���C���s�~Axj*?����}�-F������/��� \
5�h�IN&gt;Q������!�c��yP���Cw|!:0�&lt;�M|��w��������L^Z���jw�������/_�+��C	��J!�� \
3�O�z��o\��q/�m�di�X��,�&amp;��l�$7���mmp���j�-B��MnRB����'{��Q(/���������7R����C�� \
�X���-��S�R!����z�����b�ey7���)�=*)�|���%���]w�Mu�=w��{�KW������,��3�h�K��[3�dS&amp;iw�6Q�v�� \
�������6�n�u|����$?'�!�&lt;_s�[��$9��%�5��bwW}���MvwoM��7qZ����������U���u�&gt;lH���7El�� \
3�o���xE���j����#I��d$)V�vM@��F��_w�*�	AK���������6c�.�$��VY��#���"�W&amp;,����|��e�g�������;z���Gia2,�"�
 \n#n��-e?�������� �D��PV���6)�y��E&lt;���&amp;N��C��Bi�qL���4}y�4������$�'	��I"�f[�B)�u�%O�5I)N)'��U�'���\�Ix���yF`�5%�0 \
��wso��9�0����gT���LZf�(Qw}I�^w���l���;�7587Eq�=�w����J���q5I�e�����y������P,����qI��^� \
A�-��&lt;�� ��R%����K}���i�� \
��z�x��V`�	���^sI��.����:��&lt;�b��u�6+3�{G�����7��\����9)U��ew\pm���S#�R*�q�Z5�]S#rO��+���������&amp;��� \
��u�q���7x�� ���&amp;{�6�wG��G�_(uwIir�J�T������ET/�xA��/Pr�g��7�]B��m/;��6��} \
h�B��T����23mk���c8�uG9����c��^Gr�ui�������J��a^�*���\��{4�T�w\��)5�M�)����Z��EM/�EM��F \
,�jD�������)�(_��8���tJL��=E�w�(������m\P��6���c�.��_%�G���k����8�JG�%�����F�{*�]��������r�q�Y_����Gv��f�#�TF�_��U�E�4��`��7���M�K�&amp;���`F�Q���
 �A�X�z
�jv��"	o���Dck�u��&amp;�e��##�.9LYHW&amp;h�!x��������j��H{�o����,����?����&gt;��3��JrG5k]|}�A�-���I7�t�� \
�q�����)��G�:�_uPO�(��*��5B�����Dj*����Q��� ��sL����\�4� \
��R~�t�T�{�u�%���[��&gt;�m����#.��i�+�:P�����t&amp;y��ZW�����m2�����EkMS��.q�����`� \
i�����j*%���'�5v������q5�c� \
�?0Pi%	��w�`��^�&amp;1Hs�T��ToN��&amp;�bN�`&gt;���*��.%�V5�X��������T�A \
S��"-�@�S����H��iW=���*{�R�T�����S��w#d� ,v�1O��� \
��/�Q�J'�����0E��EY.�!E\-u�R$�vB����pE�(h�&lt;"r����?(2!EVp�t��:�j��T_�Y�F \
g;2����������7\�*j�T������M�V�670W��x�S��E�Q#iL�$�-S�~�"q�-�h�/��\������5�����l����5�O�K�
 ����
k�&amp;.�Dy)[�S���e����$:���J�E����Ao�Bm�9�l����KD�**u�����hS�"�op}E����/�_
�T�M�]	�?��@M��p5n�e�=�Wt�w���"MX�%���y6���m"o�V4�l�~'7����
�
&amp;0�����)��,�cY8gn�;r�J����O�;�*�3~w��r4`��!i��)&gt;j�\'��
��"a0B��$mA||A������w4�\U(%u5}Ns��NJ{$�B���o'����LD}����-���$� \
G^����*XP������.*n�;�O(IN� \
��/��-�e��9X6�����M������!E����7�]�:$*���s�Wj�z&gt;#���N�m��;�e��`Ev����aG��7��Q~ \
5��8���m���ou!a�@�aP_&lt;�5������������8�+_�mbG��S!6?s�����0������o�Kk;�*\�!�m�&gt;�=��Z��|��v?�g?�l��^�cc&amp;�GE���~L
 ��FC�"�b���*(\g�#� ��"��-������2�(#����$�v�u��o�����f���|���}�W�]*~# \
[��%)���Q�[� �m|����������~��SZ�"�X���Z}�p����=��Ny����S���2B*�������&gt;���L%I��#����0+G�2�
 HP���~�������Mx�3�aEN'\;�M��2���fiB^����o{�������7K�x��Iy|I?�46?@��=�XE�_~^�d��fW&lt;GQ�eFe���n�`q����D����7��/���Fx�C��E����l[	W��x
 ���%Uz�����vyQ���L�'H��&lt;8&gt;�\yT����V�|L&gt;�~�f���,ew�2����v*����{x;i��cN���{�W�7� \
Oy�Y7�#G�	�F ���A�� �\�&gt;K�$gz��l4u*�h��YVq�E \
j��()b���\�G��)�$5�)&amp;����y��_���C����,��������*��q�Yr���6[���&amp;����3�XU�}������8���t�����	�"Qsv�����B��0
 �x��[8��Q&gt;����o���&gt;�/�"�������FU.�&lt;���	up���V�q����b@��e\�E��Wo#u����5KK�2F0 \
�*�C�R��\�]�)s_��7{n��&gt;�����D��� \
�����8�;�\��_*�����J�.�P���@���t�0�)��������T��������H(t�Sy,�6��G��� \
,��\= �$=���m"�.o�$��/&amp;��t�!bN���������U�L!�iV]�Jo��y���NOQ�
L0��%s�
#����Z�YK�W�f%�����Nd�~a�X*};M����QU}
�6�\�i�{���$/����������I$}���e�D8Ky(�v��1�AE�
=(Q\��*Y�Z+���0�������ot��O��71��4.x|������5R��^{��w�������c��d(��Ma�m^�A \
G��b:��4���������f�R��j?�a��|x�oz�12����J"�4�li����~l�;-&amp;��&amp;a���:�3�����[X#������Q������CD���z��^YvK�1;9���s0��V���zA�p���O/&gt;�����)$�Q�d_
 �g2g3������ow�K����- ��x��h��7qd��|�����	�f�h����K��v*`CB����i� t���G�
=]���J%��@�*���N}4������X��8�&lt;k������ bW��F�$�(I�
4g���@Nh���^^C;�p��C��*���(��l UR�4��=���*�� \
-�Z���M�$��BZ����4(��GPmGCmPN�*g+5�t��Sd6,�#.�J�V����c�u3�y�4M�������d��$����GN6;�j��
 G�����`����Y0�n�&gt;�2V:�aF����E;a8���B38Z1N��b6��d�����q����Jy&amp;���t��O�s$�Mt����c
 ��O������bz������0hy#�q�
�I�v����xK�[:_����=
�������.�3����.���*)�P�ZK��`XUg.�����%���"���1��u \
���?V��Bz��L���)l��oSa����$����z���3����	��D�T�i�A��0�Q=�~t��O�L��R�&gt;u	��OUf�[��k����cx'�D�d��9m
 V����-���Y/q��7]B9�nG�.�o=�F�����Q�	R�Zcp5�-��I/�'���O�����+�h�F�|�0	g���8�p�[��� \
��D����V�U�����5.�H��G������������k����\Q#�&amp;r}"j���1 \
�8�&lt;�u����VInPl������K��K7�`��El��m�{��BBg���k���cT8�5N��)g�����m�c�c&gt;&amp; �&amp;�E  \
����s�9lX�w�d���ZI�q��c�6������bf^�������W�&gt;�����-]-LU�3 \
�Xy����������(gmBL'�2|(��g�d3WZ-��'	������`� |�y� \
#�&amp;�!�����#8��J�S�g?Z,��V�Bg5Bf������O��db{k��_�X������&amp;t��)����y�)^n \
|-����|d�S�y����y�� �����Y�vG"����f����	"�����2��~gXm�/'��+���=���Rq \
F4���4mkN�h��e�-ZD������G@�CR-��}Zj���#Qc�R���v0X�����l��a��3�=�����r5��z�(���j���o��tAJ��w�u��m���
 �M������y�\�4[������(x�Y���
{���]�p��wDt�&amp;����� �e����a�aL�u`����L-�k9LX��O7�k����B����3�1��X���r�6����h7�Ds��@-~\Bj�R����d�yT���5�
 �]��!4l�%�}g  ������u��D�4��@�:?����}
T�h�X]��A����������L�3��*!&lt;u)[�1B��z�T�&lt;��i����\�S����K�� � \
Mt&lt;R3\��[#]W�vr�7T,�M��b��������� 2+L��d@��j}Mh9�m�=RE�WttdC���x \
����U'���'s�d �;��\?Q����KG`5�� &gt;O'�
:b����n�Z	uH�j�����T�fH�g*���~��	 \
[���P�Z�#��I���,vU�3o�W��r�Zm&gt;����i1r��0�y��vH��}R�ZqG�[�5�Z^����*�"_��s4�����z�{q���-��aH������i�a�@/z��AXm_��7�p��^��8��8���^*���.c�d��z�n�i��� \
�A��`\��n�I��n0�����Q�?��'bj!�i����f����q1�qi������� ��~�F��R��GI��b��=� \
K��'e�V!���'��c��X]�)|��h�y��MrW| ����p��|�7����5%p���ukb \
L7�������-���f��l���I����gZ+��V� ���_�����PK?�aO�q������# $ \
config.log  ��frW���frW��Q�nW�PK\��


[Attachment #9 (unknown)]

&lt;html&gt;&lt;head&gt;&lt;meta http-equiv="Content-Type" content="text/html; \
charset=utf-8"&gt;&lt;/head&gt;&lt;body style="word-wrap: break-word; -webkit-nbsp-mode: space; \
line-break: after-white-space;" class=""&gt;&lt;div class=""&gt;&lt;div class=""&gt;&lt;br \
class=""&gt;&lt;div&gt;&lt;br class=""&gt;&lt;blockquote type="cite" class=""&gt;&lt;div class=""&gt;On Aug 20, \
2019, at 12:03 PM, Daniel P. Berrang�� &lt;&lt;a href="mailto:berrange@redhat.com" \
class=""&gt;berrange@redhat.com&lt;/a&gt;&gt; wrote:&lt;/div&gt;&lt;br \
class="Apple-interchange-newline"&gt;&lt;div class=""&gt;&lt;span style="caret-color: rgb(0, 0, \
0); font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-caps: \
normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: \
0px; text-transform: none; white-space: normal; word-spacing: 0px; \
-webkit-text-stroke-width: 0px; text-decoration: none; float: none; display: inline \
!important;" class=""&gt;Re-adding the mailing list CC - please don't drop it.&lt;/span&gt;&lt;br \
style="caret-color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; \
font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: \
normal; text-align: start; text-indent: 0px; text-transform: none; white-space: \
normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration: none;" \
class=""&gt;&lt;br style="caret-color: rgb(0, 0, 0); font-family: Helvetica; font-size: \
12px; font-style: normal; font-variant-caps: normal; font-weight: normal; \
letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; \
white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; \
text-decoration: none;" class=""&gt;&lt;span style="caret-color: rgb(0, 0, 0); font-family: \
Helvetica; font-size: 12px; font-style: normal; font-variant-caps: normal; \
font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; \
text-transform: none; white-space: normal; word-spacing: 0px; \
-webkit-text-stroke-width: 0px; text-decoration: none; float: none; display: inline \
!important;" class=""&gt;On Tue, Aug 20, 2019 at 11:54:34AM -0400, reza shahriari \
wrote:&lt;/span&gt;&lt;br style="caret-color: rgb(0, 0, 0); font-family: Helvetica; font-size: \
12px; font-style: normal; font-variant-caps: normal; font-weight: normal; \
letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; \
white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; \
text-decoration: none;" class=""&gt;&lt;blockquote type="cite" style="font-family: \
Helvetica; font-size: 12px; font-style: normal; font-variant-caps: normal; \
font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; \
text-indent: 0px; text-transform: none; white-space: normal; widows: auto; \
word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; \
text-decoration: none;" class=""&gt;Hi,&lt;span \
class="Apple-converted-space"&gt; &lt;/span&gt;&lt;br class=""&gt;&lt;br class=""&gt;I am using \
msys2. When I run `./configure` without any parameters and I still see missing \
pthreads impl.&lt;br class=""&gt;&lt;br class=""&gt;I have installed mingw64 cross compiler \
toolchain. Here is the output of pacman I see when searching for pthreads (they are \
all installed).&lt;br class=""&gt;&lt;br class=""&gt;mingw64/mingw-w64-x86_64-libwinpthread-git \
7.0.0.5480.e14d23be-1 (mingw-w64-x86_64-toolchain) [installed]&lt;br \
class=""&gt;   MinGW-w64 winpthreads library&lt;br \
class=""&gt;mingw64/mingw-w64-x86_64-winpthreads-git 7.0.0.5480.e14d23be-1 \
(mingw-w64-x86_64-toolchain) [installed]&lt;br class=""&gt;   MinGW-w64 \
winpthreads library&lt;br class=""&gt;msys/mingw-w64-cross-winpthreads-git \
7.0.0.5480.b627284b-1 (mingw-w64-cross-toolchain mingw-w64-cross) [installed]&lt;br \
class=""&gt;   MinGW-w64 winpthreads library for cross-compiler&lt;br \
class=""&gt;&lt;br class=""&gt;&lt;br class=""&gt;Also, is there any another way to enable hyper-v \
domains on Libvirt ?&lt;br class=""&gt;&lt;/blockquote&gt;&lt;br style="caret-color: rgb(0, 0, 0); \
font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-caps: \
normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: \
0px; text-transform: none; white-space: normal; word-spacing: 0px; \
-webkit-text-stroke-width: 0px; text-decoration: none;" class=""&gt;&lt;span \
style="caret-color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; \
font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: \
normal; text-align: start; text-indent: 0px; text-transform: none; white-space: \
normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration: none; \
float: none; display: inline !important;" class=""&gt;The pthreads library is a \
mandatory part of libvirt, so we can't&lt;/span&gt;&lt;br style="caret-color: rgb(0, 0, 0); \
font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-caps: \
normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: \
0px; text-transform: none; white-space: normal; word-spacing: 0px; \
-webkit-text-stroke-width: 0px; text-decoration: none;" class=""&gt;&lt;span \
style="caret-color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; \
font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: \
normal; text-align: start; text-indent: 0px; text-transform: none; white-space: \
normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration: none; \
float: none; display: inline !important;" class=""&gt;skip that.&lt;/span&gt;&lt;br \
style="caret-color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; \
font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: \
normal; text-align: start; text-indent: 0px; text-transform: none; white-space: \
normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration: none;" \
class=""&gt;&lt;br style="caret-color: rgb(0, 0, 0); font-family: Helvetica; font-size: \
12px; font-style: normal; font-variant-caps: normal; font-weight: normal; \
letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; \
white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; \
text-decoration: none;" class=""&gt;&lt;span style="caret-color: rgb(0, 0, 0); font-family: \
Helvetica; font-size: 12px; font-style: normal; font-variant-caps: normal; \
font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; \
text-transform: none; white-space: normal; word-spacing: 0px; \
-webkit-text-stroke-width: 0px; text-decoration: none; float: none; display: inline \
!important;" class=""&gt;Can you provide your "config.log" file - if it is larger \
than&lt;/span&gt;&lt;br style="caret-color: rgb(0, 0, 0); font-family: Helvetica; font-size: \
12px; font-style: normal; font-variant-caps: normal; font-weight: normal; \
letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; \
white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; \
text-decoration: none;" class=""&gt;&lt;span style="caret-color: rgb(0, 0, 0); font-family: \
Helvetica; font-size: 12px; font-style: normal; font-variant-caps: normal; \
font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; \
text-transform: none; white-space: normal; word-spacing: 0px; \
-webkit-text-stroke-width: 0px; text-decoration: none; float: none; display: inline \
!important;" class=""&gt;200 KB, please compress it, or upload it somewhere&lt;/span&gt;&lt;br \
style="caret-color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; \
font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: \
normal; text-align: start; text-indent: 0px; text-transform: none; white-space: \
normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration: none;" \
class=""&gt;&lt;br style="caret-color: rgb(0, 0, 0); font-family: Helvetica; font-size: \
12px; font-style: normal; font-variant-caps: normal; font-weight: normal; \
letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; \
white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; \
text-decoration: none;" class=""&gt;&lt;br style="caret-color: rgb(0, 0, 0); font-family: \
Helvetica; font-size: 12px; font-style: normal; font-variant-caps: normal; \
font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; \
text-transform: none; white-space: normal; word-spacing: 0px; \
-webkit-text-stroke-width: 0px; text-decoration: none;" class=""&gt;&lt;span \
style="caret-color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; \
font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: \
normal; text-align: start; text-indent: 0px; text-transform: none; white-space: \
normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration: none; \
float: none; display: inline !important;" class=""&gt;Regards,&lt;/span&gt;&lt;br \
style="caret-color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; \
font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: \
normal; text-align: start; text-indent: 0px; text-transform: none; white-space: \
normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration: none;" \
class=""&gt;&lt;span style="caret-color: rgb(0, 0, 0); font-family: Helvetica; font-size: \
12px; font-style: normal; font-variant-caps: normal; font-weight: normal; \
letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; \
white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; \
text-decoration: none; float: none; display: inline !important;" \
class=""&gt;Daniel&lt;/span&gt;&lt;br style="caret-color: rgb(0, 0, 0); font-family: Helvetica; \
font-size: 12px; font-style: normal; font-variant-caps: normal; font-weight: normal; \
letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; \
white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; \
text-decoration: none;" class=""&gt;&lt;span style="caret-color: rgb(0, 0, 0); font-family: \
Helvetica; font-size: 12px; font-style: normal; font-variant-caps: normal; \
font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; \
text-transform: none; white-space: normal; word-spacing: 0px; \
-webkit-text-stroke-width: 0px; text-decoration: none; float: none; display: inline \
!important;" class=""&gt;--&lt;span class="Apple-converted-space"&gt; &lt;/span&gt;&lt;/span&gt;&lt;br \
style="caret-color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; \
font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: \
normal; text-align: start; text-indent: 0px; text-transform: none; white-space: \
normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration: none;" \
class=""&gt;&lt;span style="caret-color: rgb(0, 0, 0); font-family: Helvetica; font-size: \
12px; font-style: normal; font-variant-caps: normal; font-weight: normal; \
letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; \
white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; \
text-decoration: none; float: none; display: inline !important;" class=""&gt;|:&lt;span \
class="Apple-converted-space"&gt; &lt;/span&gt;&lt;/span&gt;&lt;a href="https://berrange.com/" \
style="font-family: Helvetica; font-size: 12px; font-style: normal; \
font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: \
auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; \
widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; \
-webkit-text-stroke-width: 0px;" class=""&gt;https://berrange.com&lt;/a&gt;&lt;span \
style="caret-color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; \
font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: \
normal; text-align: start; text-indent: 0px; text-transform: none; white-space: \
normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration: none; \
float: none; display: inline !important;" class=""&gt;&lt;span \
class="Apple-converted-space"&gt; &lt;/span&gt;     -o- \
   &lt;/span&gt;&lt;a href="https://www.flickr.com/photos/dberrange" \
style="font-family: Helvetica; font-size: 12px; font-style: normal; \
font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: \
auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; \
widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; \
-webkit-text-stroke-width: 0px;" \
class=""&gt;https://www.flickr.com/photos/dberrange&lt;/a&gt;&lt;span style="caret-color: rgb(0, \
0, 0); font-family: Helvetica; font-size: 12px; font-style: normal; \
font-variant-caps: normal; font-weight: normal; letter-spacing: normal; text-align: \
start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: \
0px; -webkit-text-stroke-width: 0px; text-decoration: none; float: none; display: \
inline !important;" class=""&gt;&lt;span \
class="Apple-converted-space"&gt; &lt;/span&gt;:|&lt;/span&gt;&lt;br style="caret-color: rgb(0, 0, \
0); font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-caps: \
normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: \
0px; text-transform: none; white-space: normal; word-spacing: 0px; \
-webkit-text-stroke-width: 0px; text-decoration: none;" class=""&gt;&lt;span \
style="caret-color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; \
font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: \
normal; text-align: start; text-indent: 0px; text-transform: none; white-space: \
normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration: none; \
float: none; display: inline !important;" class=""&gt;|:&lt;span \
class="Apple-converted-space"&gt; &lt;/span&gt;&lt;/span&gt;&lt;a href="https://libvirt.org/" \
style="font-family: Helvetica; font-size: 12px; font-style: normal; \
font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: \
auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; \
widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; \
-webkit-text-stroke-width: 0px;" class=""&gt;https://libvirt.org&lt;/a&gt;&lt;span \
style="caret-color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; \
font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: \
normal; text-align: start; text-indent: 0px; text-transform: none; white-space: \
normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration: none; \
float: none; display: inline !important;" class=""&gt;&lt;span \
class="Apple-converted-space"&gt; &lt;/span&gt;        -o- \
           &lt;/span&gt;&lt;a \
href="https://fstop138.berrange.com/" style="font-family: Helvetica; font-size: 12px; \
font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: \
normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; \
white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; \
-webkit-text-stroke-width: 0px;" class=""&gt;https://fstop138.berrange.com&lt;/a&gt;&lt;span \
style="caret-color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; \
font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: \
normal; text-align: start; text-indent: 0px; text-transform: none; white-space: \
normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration: none; \
float: none; display: inline !important;" class=""&gt;&lt;span \
class="Apple-converted-space"&gt; &lt;/span&gt;:|&lt;/span&gt;&lt;br style="caret-color: rgb(0, 0, \
0); font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-caps: \
normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: \
0px; text-transform: none; white-space: normal; word-spacing: 0px; \
-webkit-text-stroke-width: 0px; text-decoration: none;" class=""&gt;&lt;span \
style="caret-color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; \



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190820163635</emailId><senderName>Daniel =?utf-8?B?UC4gQmVycmFuZ8Op?=</senderName><senderEmail>berrange@redhat.com</senderEmail><timestampReceived>2019-08-20 16:36:35-0400</timestampReceived><subject>Re: [libvirt-users] Compiling Libvirt on Windows for Hyper V support</subject><body>

On Tue, Aug 20, 2019 at 12:29:15PM -0400, reza shahriari wrote:
&gt; Hi,
&gt; 
&gt; I have attached my compressed config file.
&gt; 
&gt; Thanks,
&gt; 
&gt; Reza
&gt; 
&gt; 
&gt; 
&gt; &gt; On Aug 20, 2019, at 12:03 PM, Daniel P. Berrangé &lt;berrange@redhat.com&gt; wrote:
&gt; &gt; 
&gt; &gt; Re-adding the mailing list CC - please don't drop it.
&gt; &gt; 
&gt; &gt; On Tue, Aug 20, 2019 at 11:54:34AM -0400, reza shahriari wrote:
&gt; &gt; &gt; Hi, 
&gt; &gt; &gt; 
&gt; &gt; &gt; I am using msys2. When I run `./configure` without any parameters and I still \
&gt; &gt; &gt; see missing pthreads impl. 
&gt; &gt; &gt; I have installed mingw64 cross compiler toolchain. Here is the output of pacman \
&gt; &gt; &gt; I see when searching for pthreads (they are all installed). 
&gt; &gt; &gt; mingw64/mingw-w64-x86_64-libwinpthread-git 7.0.0.5480.e14d23be-1 \
&gt; &gt; &gt; (mingw-w64-x86_64-toolchain) [installed] MinGW-w64 winpthreads library
&gt; &gt; &gt; mingw64/mingw-w64-x86_64-winpthreads-git 7.0.0.5480.e14d23be-1 \
&gt; &gt; &gt; (mingw-w64-x86_64-toolchain) [installed] MinGW-w64 winpthreads library
&gt; &gt; &gt; msys/mingw-w64-cross-winpthreads-git 7.0.0.5480.b627284b-1 \
&gt; &gt; &gt; (mingw-w64-cross-toolchain mingw-w64-cross) [installed] MinGW-w64 winpthreads \
&gt; &gt; &gt; library for cross-compiler 
&gt; &gt; &gt; 
&gt; &gt; &gt; Also, is there any another way to enable hyper-v domains on Libvirt ?
&gt; &gt; 
&gt; &gt; The pthreads library is a mandatory part of libvirt, so we can't
&gt; &gt; skip that.
&gt; &gt; 
&gt; &gt; Can you provide your "config.log" file - if it is larger than
&gt; &gt; 200 KB, please compress it, or upload it somewhere

The log shows

configure:8796: checking for pthread.h
configure:8796: gcc -c -g -O2  conftest.c &gt;&amp;5
conftest.c:82:10: fatal error: pthread.h: No such file or directory
 #include &lt;pthread.h&gt;
          ^~~~~~~~~~~
compilation terminated.


so it is not finding the winpthreads package you installed.

You might be ablke to set the  "CFLAGS" env variable to
"-I/path/to/winpthreads/include" to get it to work. Might
need LDFLAGS="-L/path/to/winpthreads/lib" too.

Regards,
Daniel
-- 
&gt; &gt; https://berrange.com      -o-    https://www.flickr.com/photos/dberrange :|
&gt; &gt; https://libvirt.org         -o-            https://fstop138.berrange.com :|
&gt; &gt; https://entangle-photo.org    -o-    https://www.instagram.com/dberrange :|

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20190820170340</emailId><senderName>reza shahriari</senderName><senderEmail>reza_shahriari@yahoo.ca</senderEmail><timestampReceived>2019-08-20 17:03:40-0400</timestampReceived><subject>Re: [libvirt-users] Compiling Libvirt on Windows for Hyper V support</subject><body>

[Attachment #2 (multipart/alternative)]


Hi,

I tried that out, I got a new error about pthreads in my config.log.

Could you take another look.

Thanks again,

Reza


&gt; On Aug 20, 2019, at 12:36 PM, Daniel P. Berrang�� &lt;berrange@redhat.com&gt; wrote:
&gt; 
&gt; On Tue, Aug 20, 2019 at 12:29:15PM -0400, reza shahriari wrote:
&gt; &gt; Hi,
&gt; &gt; 
&gt; &gt; I have attached my compressed config file.
&gt; &gt; 
&gt; &gt; Thanks,
&gt; &gt; 
&gt; &gt; Reza
&gt; &gt; 
&gt; &gt; 
&gt; &gt; 
&gt; &gt; &gt; On Aug 20, 2019, at 12:03 PM, Daniel P. Berrang�� &lt;berrange@redhat.com&gt; wrote:
&gt; &gt; &gt; 
&gt; &gt; &gt; Re-adding the mailing list CC - please don't drop it.
&gt; &gt; &gt; 
&gt; &gt; &gt; On Tue, Aug 20, 2019 at 11:54:34AM -0400, reza shahriari wrote:
&gt; &gt; &gt; &gt; Hi, 
&gt; &gt; &gt; &gt; 
&gt; &gt; &gt; &gt; I am using msys2. When I run `./configure` without any parameters and I still \
&gt; &gt; &gt; &gt; see missing pthreads impl. 
&gt; &gt; &gt; &gt; I have installed mingw64 cross compiler toolchain. Here is the output of \
&gt; &gt; &gt; &gt; pacman I see when searching for pthreads (they are all installed). 
&gt; &gt; &gt; &gt; mingw64/mingw-w64-x86_64-libwinpthread-git 7.0.0.5480.e14d23be-1 \
&gt; &gt; &gt; &gt; (mingw-w64-x86_64-toolchain) [installed] MinGW-w64 winpthreads library
&gt; &gt; &gt; &gt; mingw64/mingw-w64-x86_64-winpthreads-git 7.0.0.5480.e14d23be-1 \
&gt; &gt; &gt; &gt; (mingw-w64-x86_64-toolchain) [installed] MinGW-w64 winpthreads library
&gt; &gt; &gt; &gt; msys/mingw-w64-cross-winpthreads-git 7.0.0.5480.b627284b-1 \
&gt; &gt; &gt; &gt; (mingw-w64-cross-toolchain mingw-w64-cross) [installed] MinGW-w64 winpthreads \
&gt; &gt; &gt; &gt; library for cross-compiler 
&gt; &gt; &gt; &gt; 
&gt; &gt; &gt; &gt; Also, is there any another way to enable hyper-v domains on Libvirt ?
&gt; &gt; &gt; 
&gt; &gt; &gt; The pthreads library is a mandatory part of libvirt, so we can't
&gt; &gt; &gt; skip that.
&gt; &gt; &gt; 
&gt; &gt; &gt; Can you provide your "config.log" file - if it is larger than
&gt; &gt; &gt; 200 KB, please compress it, or upload it somewhere
&gt; 
&gt; The log shows
&gt; 
&gt; configure:8796: checking for pthread.h
&gt; configure:8796: gcc -c -g -O2  conftest.c &gt;&amp;5
&gt; conftest.c:82:10: fatal error: pthread.h: No such file or directory
&gt; #include &lt;pthread.h&gt;
&gt; ^~~~~~~~~~~
&gt; compilation terminated.
&gt; 
&gt; 
&gt; so it is not finding the winpthreads package you installed.
&gt; 
&gt; You might be ablke to set the  "CFLAGS" env variable to
&gt; "-I/path/to/winpthreads/include" to get it to work. Might
&gt; need LDFLAGS="-L/path/to/winpthreads/lib" too.
&gt; 
&gt; Regards,
&gt; Daniel
&gt; -- 
&gt; &gt; &gt; https://berrange.com &lt;https://berrange.com/&gt;      -o-    \
&gt; &gt; &gt; https://www.flickr.com/photos/dberrange \
&gt; &gt; &gt; &lt;https://www.flickr.com/photos/dberrange&gt; :|
&gt; &gt; &gt; https://libvirt.org &lt;https://libvirt.org/&gt;         -o-            \
&gt; &gt; &gt; https://fstop138.berrange.com &lt;https://fstop138.berrange.com/&gt; :|
&gt; &gt; &gt; https://entangle-photo.org &lt;https://entangle-photo.org/&gt;    -o-    \
&gt; &gt; &gt; https://www.instagram.com/dberrange &lt;https://www.instagram.com/dberrange&gt; :|


[Attachment #5 (multipart/mixed)]

[Attachment #7 (unknown)]

&lt;html&gt;&lt;head&gt;&lt;meta http-equiv="Content-Type" content="text/html; \
charset=us-ascii"&gt;&lt;/head&gt;&lt;body style="word-wrap: break-word; -webkit-nbsp-mode: \
space; line-break: after-white-space;" class=""&gt;Hi,&lt;div class=""&gt;&lt;br \
class=""&gt;&lt;/div&gt;&lt;div class=""&gt;I tried that out, I got a new error about pthreads in my \
config.log.&lt;/div&gt;&lt;div class=""&gt;&lt;br class=""&gt;&lt;/div&gt;&lt;div class=""&gt;Could you take \
another look.&lt;/div&gt;&lt;div class=""&gt;&lt;br class=""&gt;&lt;/div&gt;&lt;div class=""&gt;Thanks \
again,&lt;/div&gt;&lt;div class=""&gt;&lt;br class=""&gt;&lt;/div&gt;&lt;div class=""&gt;Reza&lt;/div&gt;&lt;div \
class=""&gt;&lt;br class=""&gt;&lt;/div&gt;&lt;div class=""&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;


["config (1).zip" (config (1).zip)]

PK�fOe2��#�0�"
config.log�]{w�6��s���[��l�yl�F)I9MH��7s�^��l������^���mZ�4k��i�������O��&amp;�G \
��E����n���2����S��\g47�����t��G�&amp;����m���Qrl��]���������9��qL&amp;S���~25=���O�t�.���&amp;�yvi�~B�Z����������n���;!��� \
?Q�Z�HH��t�7m������	yJ��X}���	��y���,�;���za�x��O)�!/;����#��7����� ��KS \
]���V�J\(Q��bMR�z��y@;����\.�%��jJD��R�R�&amp;�2���j����Bi���3�.��3����se������������ga3S�H9�������tN}��3��3��W����}S��`�,&gt;y����
 �������t5�Z�WM YJ$���Wg�'/���i��+����|:U�e9k���N����#����	����\,�b���;e5����n�R�B����o%BwZN4m����r� \
�+���T%�	�M����S&gt;�|/�;|�Yt�f�Z���r���S��9�I��F�G�X^��&lt;!�X�M���g�i��3�q��X]�� \
"���8n���]�sl��lu.a���5�m�|���Om�@�(8|A#�H4�m.l�-�@�	�x8d�.5|�0�@��8��{���a�;� \
�����  4t��~�}~�9� \
;pu����j����?�60�����2���qg���5����by�o!�D�&amp;���[�T�[�*w4RU�fd{���[������w�$��'���{���.��n�G��������{q��|�=��l
 ���{@���&gt;����m�Y���{�{�Iw�[��n\`��I����1�Cua�m���V���xr���� \
����,�s�"�~v�!�a8�;&lt;�����&lt;yV���Js&amp;*�Uaa�&amp;��M4��Q:��b \
��`����FC�2u�o��}�n�_I���F��k�H�����G \
o�6|�����HO���N��M3�@��8�`M8;���V�f_���K��5�������[��L��(��� \
�{����N�����fu��YE�wz �Q \
��o6��;�{-&lt;\f�����T��6HQ���e���%�f]VcB�'Y_����K	:��3L���C�KJ5T��.�@�J!#��� \
RK��jB���!����Sj���&lt;��	�j������^�&amp;W������H��1�.F�@��i(9f�s6R�����$�"W�@���XS�GI�)CTs� \
&amp;6�Vy�u�z���D45�g;�^_�m&gt;�9.h������������S-W��V�����sq����3����N��� \
i���&amp;Q�3o�jQ-*D )Z(��(S.*�jq,���G�&gt;���� G�����n��Ff�p�=�^�VhN \
tg�x�5��d��x�AW\HB	��"�����}�\&lt;��j|��$ipi�s�=��(�������e�Sww�+"�UmYDTkJ�:�����fF9�z�%3b�lZYKh���L�&amp;7VQX���l�Z	�/?9*��*�����r���I{��A \
����*�w� �)�l1+��{N��m�� \
,���}���vf70)��d�����:�u)%}g�_�0W��������pa?*�y�#��}N&lt;��'X2w \
�7@y�32QL��"�M�z�@��m��s6���t�h���^t����	�v�N�Ov�I������~����;`�G�[ \
�(���u��t�E��K����������~�=��v�������)���ap8&lt;=nu�w�f0/`-^,��1�})��2��,���\}��i0�$!W��;"W�?i���LS�����:�*;q�`�_K�w��A���K��!^	�����a���L[U$���R�{�C \
au����s����.���L!���v���g�=w�~3�����&gt;4�s}�GZf�a��l�F�f�y&gt;���F%����aIl`?i�7����u���H��r�$���f�&amp;�k��X�����96
  ���9��~�����vwL�}�'Fw�#��Zb�����Yy��0RvG%��e�a[^L
"'�aT� ���L����E�&amp;���K��[��o�CU�P��E��
���m�AG�
���O6�o7c��1�������b�B0pk�&gt;u�_�0[�7R�7����w�5�����`��������)�|�����JN����r��'�j���Z|#D�_I�Y3�01A�svU�yq%����=$xyiV]�j��9�-�
 0Y����Yh���8Cr����OC!M)G�u���cs�"�:[Q���;�j^�]Q�� p��dNNS��'�����
�(%-���\�����1��4� �Rc12�2��}x�~�9]eUY���J%6��)��10g�J���+r
���T��U��-&lt;�z5[f�n \
$����q�\�-?O���S�,7����IH�m|'4�t���]o$%�J8��g�2��J��b�6���lIG�VY�Y�u@r�!�zh.��A�w \
�X8u-�vl$7�(E�hD�&gt;��,/m&lt;M��	�����Oc�`O������8w��z2(FtF�}�q�P��e�����r5�8�6TaY��g����U"v���a�����s%��MYn��&lt;��!�~
 �X�+ D���iL�����qo
�I��/�b_������Oa��gQkZ��	|�����3VE^qB���y\ f&lt;j�_��:�^� C6 \
�9���;y�����=��v(�q���0f��,e|q�w�9:&lt;D�����P�/����N������g^�T \
o���,o~=R����Nx�H�����\3��.Q�%��r�]����rc��������Q��S?�0*���2$ \
A��$��zA�L��������\i�I3,��EA���i�[�~������3��&amp;�+����������:L8��%��'�H-�'��rz���p� \
5���j#�S��4W���b��N���u}���)$���7��u9X�^�A \
�m}k4D�VR0����-0����h;�������7���M��%&lt;���l���QvR(��o����a?&lt; �(�����U��8�� \
�j}��^���G���U.����@�~�E�9*�r�98&lt;�~�L��� \
60k��('�.���d�@b�"W�=H!�e@�9^��K�F�,W�k/^.BF_f�A.,������M����[X��I���f�q��g,�
 �����o@2�������q���-m�8�2������a�e|�K��8L�	�[&gt;�f�x�r��3X�)�w-�(�H!"���J
y��-�gU5j�#F3��;���"��p��n��a[��CNIU{�84V���5u9�nh9�~wx����D�3�����NR�*W�*Lm�**�|�#U�T�`������m�O|9�zy� \
��^��9Q�����2��%b�'����`�O�����&gt;�r#�w{����~'jj�e&lt;���2w�eWL5�1o��n��n� \
�_Da�(�{0����Og?�gM�S��4Y{���k�����l������:� \
`���c��z�l~��[����&gt;���C�9����A�T���}����X�2���g��?wQ��� \
_��d��Tl	��/��'�H�'��������l�v{�v.vX���:8��KB������� ���;-���z����k�S 
���P+W��ak|���
�+���=Z���-xwOz����v}7r(oa9h
���e�OsZ����\��::�Z~�������u�]�'�m��a	g&lt;�#~��`�?��:���oed��x�M���g�]���
�e�"&gt;�CmXJ�P;�$)�?vs&lt;��9�����
78���
��������C&lt;�]��f&gt;&gt;���8�*�#�@&lt;��+�	��K)�U�����R=s��W���!('8�� \
�S��9����u-����}h �A�u�ZM}���az�UPw��H��'&amp;�4�9���;p�q�O \
�Aq��t���K��[����E�a��Jdkk��6��/� \
��M$����o��&gt;�����6]o����L&gt;�m&lt;@��N	8d3a�&amp;�g���;4�!���[Is?!���� \
���C`������'��jm]���^���4��-���!2���:U,��_�s����6k��$zM� \
�7���6�^�I��H�g���������t#�?b�#�?b�����e�P�� � �:�n��H�Dy�LS1-Eo
�n�����"�&amp;�DXr��:'���Hh(�� .aU�W+�Z�^�=ux`�h
�G?�,������&gt;�n��Ux
];��� Y��_�n������;�����@��~f5�$������*S�Z�!�j�[B���i���V&gt;��H[��+��8���f�U� \
���z]�V�L�����H�SP���&amp;J���;���@0���b�r�Y�&amp;�A���p�Y��xk�$o��p�M�/����I)|�,"Og \
���]�+���U���CR�����g9� O_���w'Vp	�m2�9cV?u�I����FN��@�i
�)���F�[v
W����I��32@��L�����
��\�8j��nget+���c+��
�[�2�&gt;Fy)RfC�L&lt;�AQh�-0Q(��D	D$�@D	D$�����~�hLa�"0?,� \
�r��;������Pe}L�����������l�g`� ��Qk$��� �*0������rA��i
N���M�c.��wF��������P�
���|0t�ep�����VZ	h% ��VZ	h% ���U3����������Tu��,������a�\ \
&gt;����2�d�))P�@�E \
&gt; )P��C����N_���)���aOL��&lt;A�	�G}H(�p&lt;���	d&amp;��@f�	d&amp;��cBf!D�&lt;�?1�����^4�w��S�!�~`/GX����v�$�a�~��W \
&gt; ��2��h{x)�`�T�eg�/@���	�#\s��:�8�@�����+���_lS@N9��@N9������&gt;0���9]�]����a��@���x��'�����h
&gt; 
 )����k �\�B]O
8�&gt;�����m29��p��� �x���x�	�' \
��x�	����x�x��Z����?.~�����c����F�������WF�!�x�-0���� L*0������w��T\ \
�5E�!�X�0�N���v�E�~V;�� ( �
(���X�^G g��p��q��]��	�'��@{�	�'������s,��!=���P�SXO,�	�'��{�	�'��{�}��&gt;hc�t��A����q�BB��P \
@��a��{����~���t�Q{lO���3�����Na�(� ��z|w�� (�B�]��u3�����~"@"@"@"@"�B`HC[c \
0�yNw�c � �m��5							��HC[��&lt;�#Wp}���������p�U�da	����Z�E9��rZ��{H�M�M�M�M��#���	����/�����
 ��z��Tqw���S�
��Mjl�d�?���n:q�9'��&lt;}s�6�6�6�6����v�_����w��sh^�������nV]5!=����B�4C�o�����(M����������+�*(��=��&lt;�����wV \
/�$%%%%%%%�0��b���=)� []�0�rt8=���u��	������e����xn�N8						�a
FlU���S������&gt;���������x:B������KmbN��|�M���D����������&lt;S�� lM��� \
�NC@9X����z;����#�2��� \
����u����J/[��X;���;���0'zm}UO���S�YmS�jZg!P)�l$�.\%4��� * \
�-a��XS�����v��[	����]������e��z���'�B���&lt;����U]�����&lt;RU����I~G~�����2���� \
��u��8��G����������(�5@��s@������9�3vK�t��]�U����q���f����]��&amp;n���;��W��[�Y4" \
�&gt;��{b3��5E0%Lj�]�n��^R�d"4�2�a���|	V*��t��2��g���"��r�2���s&lt;SS�lS��`�`JL�:DL!����8N���d�:|trMs\�G:LK����f��2��r�2��
 ��n;S���
1���J�����u&amp;�T���L,qC������&amp;s��ta���,�^d�|�F{�������l%�����������o��K,
�Y '6�[��&amp;)�&gt;6��@&amp;
^+�{��)+�"���o�B�8��#�t=�|O�(�#�;m���H1\���-��[@ \E7l� ��a
�+p�;�5�����J�^������I�D�	D	D�~(�f@:QQA ����h2���7j\����~�
&gt; �X/�XcP���P;+�	7�gQ+����� \
&gt; �f��Sq�j�n�"����.����K���r��8���5b��.��i8adn�u�h��@&amp;��%�������ZF��v{��V��*o��gO�C�h�h��M7 \
&gt; �!�d4�n4Y
^�&lt;�������U`�b�� ��tm&lt;]����g�%Q \
��I@����n'��q���I?&lt;���������o&lt;�T����r��i����2�'��&amp;9����GJ�Z ���'��� \
�����f�Wk.�B�V�T~:�^���&lt;R�t�A����I+H.��f�0P�]f�0�:_z�+����M��5-uk�Zc}�0�0����b_����'�!����7D����F���:D�����9 \
����o��N���h�k9 ?vTgWY� P�@�y�Sp:)����j}����Z��� \
�X�������8��������������_����kj�}3 r=Z����\����[��"�� \
,Z������&lt;?�^��!����%�����Y���������v�-�vg���S6���n��� \
:��)��t�Z���^�8�{����^��c����P��������|�Z[�������N�^� ���p \
V�t�H��{���$��O�6{`�|3*N/��G)N����V�1�'a\a�X���/��,A:-��u���9Z������81%�+?����3��`�"$d��d��
                
.�Si�[b{������y���V-q�}U#��rp����h��{�'wMn����x����S&lt;����oE[��e�H��'�����������v�
 )��p��NeX_�"�Azha����/��n��&lt;���k��1Y9a��5c��"IG�e�&gt;�����0�_����#%�� \
&lt;*�bCa9�J��KEy�,`H���	W�+��fz�	����A���z����)l�����$t�|�=- � �������� \
�]�����\��(�������'��	�p{��������E�� \
��*PfN�A��zb������������R�����j�1����}����;K�.�����X�2����H{��,�� \
�cq�5mb������gW�W"�8k0�s� \
�a}D�rw�g/�3�qO/���aDo�[	C���R���|�)����_�Q��E��B�5�s��4�A99 ����6� \
��l�sK��1�;z��Hv q��+��O��`EQ�I��`c�n�tX��W�=�TWLvmg���K�����;V}���i?��E���� \
_��6��0����������������1�_&lt;����j~H��}X{�*���p�y�z��"	z��B*y��Ix��T�Wn$�a���54nM \
��-_T�?�?��-U��-�-�-�-�-�-�-�-w���06vKU{�n�Z���Ztn��[0�T}.�[���-U�S�2\��[���rK%�\ \
�.?�2^����e�A�K�K�K�K�K�K�K����e�fP�����p�xf����f����f��b�f��T�\���8��{qNhj\7gR&lt;��
 tS%�L�L�L�L�L�L�L�Lsw���b3�TUw�����Z���m�j�EJ��B���y�4R�7� \
����Q���7$��V������h�9�9�9�9�9�9�9�9���-����;Iy4.�� \
��Q\4�&amp;��j�46WHc9����O��&gt;�p� {s0��;��n��N���
�r}V�9�9�9�9�9�9�9�9w����c3]��n�������y;��h����K����Q7^��4g&gt;�m���3�����r�0��&lt;;V�dZJwMI!���0 \
IL\�1q7,��H� Q������bY�����;�r�2v
'}�(}p[��2P��b1��A� f3�����ix�c����Is�s�4K�J�V,�MI� %���I%, \
��A�1��B%��u��3	���*`G�#��v;����`��������F��G6�=Ew+-y��,6w��.,u�U\�����8E� \
�7%�� MC�i�ymw_S�x�+��y��t�������{�?w��GF����������6���Rz�&gt;=�oas2E�!�}�������/�c��K�L(h4���fA� \
Y�4�G���8�=�[t V,4NeM����9�85��Q�)`N��i���xhn�i&gt;�����)|��	b1�A� \
F#��'1����3��9��m�EG:Rz���[Q	&gt;s�2�{��%�����I��x�=��ar{��N�]����O�Z�+����'B�_1���.���_F�K����3�N:���(��� \
��i�����'���J^�y��/=���&amp;����M��d/f�&amp;�M0�`6�l���iE�i1����������.-p�ua:i�j]�� \
�����ZW�Q���G���l���++Y�ue�����"�jV���l� \
�U���V���=[F��������'FO^g��0�	��'�O���?��&amp;��E9������{ \
��Wu4��,�,����mjdr52��F&amp;��������lk#�m����M���!���Z���A�y����Zp-�\���k��k�� \
�j��~��^��h�e�l��$���d�\� ���8��(6��a���,_��d ��U \
���c���Xp,8v�8V�uHV�,�[]�Y�!�UJ�*%�i�G��\��*�m���y@��m��&lt;n����F|���o���[�-�v����q��k�{g\����n�sm� \
H�����V�,���.��Y1�xm� ���a$wW����R�@� \
]�.H����t��tix��\���o�Im�s�TK�JZ,�eI� \
�%��K%,x��A�U�)�t��]t��CY&amp;�v��M{����n�x��c�D,����y�&lt;@ \
_�_�.�%��pU�w@��n��m/4� �{���n��Vq� e.�v# i=���"�`���n��0��uI;�P� \
����~Z����	(�J%��A� \
dP�J6C6�����4�����h�t+���d�l��b_��&gt;�5e\�5u������N���;�2���0xwDlg��zA� \
^P/��+�z� u�:�&amp;Blw�7�p���f6=����{� o}���y�����3��m[� \
�y�T(���%�}���Q�.�&gt;�j�j����6l��	`�&amp;�MPy�`�����G/V�CN�"�y@U����c���M�T�9@�E \
��\�@zM*a�?���N��*D��y�OFY�~���~��w#�7�Mwr3�L4�W(A|����7�������?�`������g�����h�4/�
 ��

�.N/���ZI�H��(9-x6���]�9\����-�mrt�4��H�����{��rdH}�WC"���a��7���������� \
����a(��_	"��2T�n��+�nk�������C�i��:����1�lS~�&amp;��p��qx����t�gw�����w��ow��Z2w��Io���v�r���A����Y}m���������)�a#l���6 \
F�Y��&lt;q��������� ��s��M�&lt;X7m����{K����*i�N �g�9�p��r{�G��e���&lt;���t��l� \
K���&gt;z��L�5�-$m m m m m m m m m�v�����0&gt;�v!��t1�(�m! \
�(B&lt;�;�K[�#D�&amp;	���HBt�J�qU,!�g	&amp;��������w��u� ����BH�!9$����C�&gt;H���w1��� \
�-*��~�B\����e��-��-��������1�� qn�[��?j�y|���TP;l���PjCm�
��6������KM�0�sjo�
j�'P;,k���e��������vjo���s�Q{1�|�����v�s_��s_��Fd��g��������������������������G��u����.�hV�6�hV�Es������� \
����D��	���f��G�C���Y$K�q&gt;=w����||7U0?������C{h��=�����L��0�[ \
��������������I��� 1|�n�7*n����]7��?���Bi�d�l�
�A6�� d�dze�3���|=�k�.�R�0f�������&lt;�&gt;���r��&lt;;���������d|_sD��C�
��7���|�o�=4�������B�������a.�6�s��M��
��u�v+��tv�~q2_�V(���&gt;��W������������&lt;��@�y \
���|�~��|Z�c�����#��&gt;]�����m�&gt;�K�O;o~�3:��5�0�r��#����]G~��t4Z)��l"����C|��!&gt;�������I�ny���O��M�dqK�O7��d�&gt;�����'T \
O*d��_W�~6�������� �q�&lt;���x������e:�����=�V��Fz\���c�&amp;Y[7��m�-��������w^��^&lt;����o�
 ��7���|���o���]~�������'pg������w;(�ed�7�������� =� ��p A8�	�;�g �o
�po���.��5}���������a���b������7���|�o�
�������E�.��_�v����3Lpg���
���r1�������z����p������{ev Kqwt2&gt;���!~o IIIIII�/����i
���_��3�� ��R @a�3����0!
���,�����
xN-��]J��#���g@F"�$"�Dl��?a/����&amp;3�0�[��FN������&amp;�E���P�"�5��E�+2�0:�Z��������w�]�;y���0��-�=sDw�;���Nt'�����st��l \
w�5t���h���[{�\���w�5e�|�\S��w�EU�E��_�n�f|������g2_/�y����|�-��a	�z=��@O \
'��	��o m�Df�&lt;����L7� \
������P��X6@W�e�����&gt;L�&amp;���l9�L��/X,s����N.�]���$�|aF�������]Uhog��;r��/� \
�w_�[�E�'gT}���V�]��9���������_���+R����&gt;��z\^�����F����Hs%��b���\�$�7}�x��x��&gt;���� \
&gt;���� &gt;�o���~xpp���������m]����m��=���� �V
�����}�-��]�*U���}�-��D����"_�\�����Gs���oK�O^]{v{-P������: ���: \
g]���L��n��M��k�[�������R\����W���O�nl*uXV����C� \
�f?�����~�$}�&gt;I��O�'���I�$}I�~�G�zt�Y��5 \
��ii�^WY��k�����u~[r{�����_N���������c�&lt;���g��|��hI�$�?���O�'���I�g=�G��M�m��&amp;� \
j�[��5A@T�J��W�Q�m"��P �������������g! �{h� h� \
h�Y���'�;�[�sF��6������B��Xe���+������o�D�M�����1��Ixc//�=�*��f!���8 \
���8 �A�����ik�h�	e�����@�y#i���feM�T��D���HTt�D�"i�'!�r���&gt; :6���/�|&gt;�
'P^��@����J? �����r6)���$!����rY�����*�
� ��*�
� ���W��+f�{t��z�{������!e��w�[n�H�\K�����dZ�d� �jW�Y����}"�rc� ��"7�5*t \
g�h2��*�/F�5=9\���*�����k \
��'�	x��'�	x�X&lt;������#�|~����GL��a���P�&amp;��%���jXZ�a��l�����U�U��.M��`�0&gt;�������l�&gt;�zU���R�m!��&gt; \
���&gt; ���&gt;t��#����� \
�&gt;��7����H���CU�f}������v}�����j|2}Xde}H�v{����Q�I`~��y@��y@���y��Bw��;V \
?ml��wq���_�Nm��k�_s�4�^�3��i�a��P����r�(��@�e@P�e@P�e�N���4�`��P;��2���(�YX�2��+���)���U��S(��P&amp;�%�`�a����O��e0�2 \
(��2 (��2 �������(�{~;VHT  \
��@��EBBP�&amp;iM�K��~;cO���2{U�e�'g�����������0�(�+��2m���n��-lO\h�����S���n��2������'��P1������3��n�g�p�g�p��Ggp'�N�3��,�3�ySjpwtG�[��-
 nm��4���nj����
w��������\�N��Q�2.�V/,��wq@�q@�q@��x \
��C��W���8��C�C\��8��&amp;�!�7$1t�8$�*q��Y�a�.������8y~��(�A6o���o���o�z�9`*�A�{��6��6�5� \
��AB��Io	$s�3�Q3Hue(O.���fn6�����(�A�c�0�c�0�c��09_��A���5�4�/���xA2��	o$r�-�A-HqY��_�+��:~���L���?��F���hsuv \
���}�z��s���� ��� +�
��� +�
��OY��A�����K8w��%��K.a��\ ���%,lI]Bh���r���^ \
�J^Buz����Vk��1?��q�`���@�c���&gt;���&gt;�9�A��������;f��	&gt;����en��.s�h��mzS�2%s&gt;�Qe��mu�N���u1�����&gt;\�����
 }�;?���?���?��!&lt;u����8o"���W�d1�I���
)D�����!by.����n����&lt;8����W�D�-��&amp;E@PE@P��"��S�]3L�w�d�D# \
��{l��mu������Mu�LR��DWv����m�����bl�$��?==��3�z!	H��$ 	H��$ \
H"7I��"Q�g	?o�rq'Q�lN#��v1��o�"|�V��z����A����7���^����C�0C�0C�y \
�;� ��{G?mb�� /lL |h�������� \
�V|u|(���|����z��������*������!`��!`��!r2D����W���������h���������6Y6��R7�f�6�h�D���1E�����hi�+n=��x����j�@
 ��)@
��)@
�"#RTGNMT���D5c ����jMK�P�5	
UpC�P�mC�z@E	Ua@X.���!�������������t 
��+�
��+�
C��?}v|X��$�#;/M��C=���w��M&gt;��G��(O��y)yW��t|���#�#&gt;�����&gt;�_������w����~5w��'U���0�r����b~h��hF�q���������`U�s_^Y��&gt;]�������\��}�����,��=yW�,�e�,(��� \
,(��� ,(Kve��gd�9r���Ks`7 \
"��In�Wd��J��+�K:��L��V������mN�����?���B:yB�K�i�����$��tZ��x���6�������,[2�.i��]b����eY�x��p����vb�{r"�@T��Q�
 D�*U ��&lt;�x����M��������9.�N����9.�.� b-rx���
�� 7��j�Ac'z(8nxWZ���a�#&lt; x@�����&lt; x� \
x�Y�C3b�#f�KXb&amp;�s���*f�/$�������u c�T.�1#e�p#$;���Tt������7������7o \
�@��x�� ��7olo����
Y�&amp;�,_!���A��c���r7�r���0���#8�,f3 �D��������������&lt;|Ct b
��5k �@��X�b
���b���f��k�B��.D�gG��B�
at1���H\B���"7��7�������_�Z&gt;��!t@����B�: t@��a�����a��
�S@�h��+,\�
��P��
������n{yy3�y�(���* T@��P�B�
&gt;Tx���P}�_&amp;bU��4`B����.�&amp;�`}���Ll��&amp;���f�a/r��������N?��"D� A \
�@�"�M"i���BH�"$����?;���.���.&amp;��: \
H\B2[�&amp;����$`#�b��p��&amp;����99��&gt;��%K �@,�X�b	��%6�%��3'����#�P�C���� \
x�����b�n{����X�x^&gt;����2T�2��sM������� X \
��T�U�1tH���W��2��#�n��moxj\�F8�A��	��m',�_����@/i#���O����!a�~P������2�]�#8X \
Gp��� 8Xi�@p����3�����^,C�L^�����k������	���~ \
Q5�'XFX�C��K}jV����\"W&lt;98~�����V��e%��H�O��R.�:�ze:$����r�v \
Z|�c����V;:���(�*e�U��{'5-��^�[tm���'��Z�t�}��)���b�����I�V�,�EY���A�g�Uz&gt;K��� \
�C��Yi�@�=�|����wr��*0�������4�l���t��N�DU���,K�D�~����W=������CI'�� \
~���}���$���j����`����RS?� V8�&gt;okIG� nH&lt;��x \
��=�szN?��XE�/	�����6�	�o2.HtM��3~�}'�������_%�?����=gi���J����1�n[-x�fh?����b���9�c��_��[\�-&gt;���R��+�&lt;,���1� \
�����$2,\�^��]h8��l��j��7�J�����\�@1��Yi���� \
zZ=|vUT��&gt;m�{��=�9'����`����H$|�M�s2�	o�� '���O����j��3����u;�.�[�w/�:GCB�� \
&gt;����H�8~��G���C���� q\i�@������G�|����E��w��9�a�W0�;���'�$���g�� \
&gt; �$��0J�J?�&amp;PJ)�~}
M���:��7z��	o����?���VFVo�O@C��������������S�Z_�
?d3�\($�1��p�������I`��]�/R������u��6A,1}K�"a�&amp;��a)���{����s��&amp;�z���v3z���5|��h�P��V0P� \
�}?��I��HZ������G�?�-�1 �`����ohL�� �O^gs�}���p���@
)l+�~����_y�GZ�&amp;�["���}-tg9QFs�&gt;s2S��,�m�^ \
�=�����|�qg��^�_[��Es�(�ws�"pFJPg[���hM��l���1��W�8�zA&amp;�0�2�}q�������7k��A��$w7K���:&amp;���������t��7$n_t�nL� \
�`=��"bX�U"�p�B��VF��r��i��[� ������~6��;����}K-���3�M�s�t7�+�%� \
�#��Sr�G7�%�d���)��0������z�}?��&gt;��������~����a4rc�9�� $� \
��	c|��������������}O�Lu���$����G��������l�� \
F%	}"4���z�s�$�f��8���8cB���o$��e��q \
�������W2�(���%���Q,�����T��Kz�M{�,�7E���D6��������v�Do����y���3�&lt;_,�?��}�� \
��:��\ 8�����R�q��.���k���o ��N/��� q"~k����b���N ���.� \
b%r(df*:���H&gt;���+m��k�2������ \
��~�\���xT��UE$Wa@"VS�&gt;v�ylLzN��e�f�Y.-����@�`}���lj��{[��b�{����{���H���ST&lt;QG��$T&amp;)��WXLS#��;1��I����	�a��u�����f� \
�����@v��������U��V�����x�x�? �o3�f�Y�2�{�o�@Y Ny5�n���B5����&lt;A \
HL�����!N)���6�0~��.� \
K�����	�����&amp;_;������m"&amp;~q�����F�$k�]�[u�p�/]yM}a�Q�����j�����j��S����9g��O���� \
��Z��E��D���M��/������[�Hs��;��{�����905Hn�7��e����xu[�.W�!���.y���$(�B���N����h]�zC�S��'���x|�Z���`0�5[����X���b�(���^=&lt; \
;do���]�&lt;��^�	����)����4N�r��b`,6h����k�����E�yqGe	�Jq�NV�M"�F��mW���&gt;)���% \
�K���&gt;7�%����R!;������{(��������'�K/J���B���������(���.E���`2��+�,�Q��xq����[�����cU��M��a?.�`f��9�M�V�����h�u����C��&lt;��� \
����$�����"����(��xnP��������&lt;���&gt;E:��P���W�T2��d�-�	�������cH�U�Z����W9���W��c���Z����Q�Ut���mc��q��4�%j���6_3u� \
9�����E;�8 h�v�h�vX�4F;`�F;`�F;`��2���p��8H��s���X����-,	�^���������I�[uu \
�ZX_U^��z:~�&amp;C��N�\��hc���	-����],�x!�	YY9�D^�e���]��+�I��w�9\W/\P1�����}�d�w������j�8�45�&amp;&gt;
 ����]
��&gt;�O�
s��R����&gt;&lt;�Z@��TB�:���%s~�Gex��QN���Z	T�Q\�%o.����U��z1�WTKl^c��U{ad�n \
�M�����@.��o��j����W'�3y��$!`���x��4��.T��VW�Bq���9�h���h���%����w�f��Om�	rf\
 h����l2�G5�dUc�@0�
�*�C���0�y��!�[�����V^I��z�x������u��7��.�����ae��wz(g����0���:�����`���6���B�j'4���i;,/Vl�T��6������#2Gd�liD����#2Gd�����9����Z��� \
���=��~K����D�#�T_�9������P�I�Jp��Uf�[ ��u���{]r��&amp;�@�����*p�-j \
�H�Cvg���=��Ci_@b�7����������ux�KF�R����`G����j�^�5D������_(v�Is}o�8^�V:�i�D�q%�H-$�Ng�	�_6&amp;�� \
�����&lt;9X������@q��&amp;�8]A���� ��p�!�|�DkDt�Y�@�Y'k%f����������6 \
q�g�+HP����SP�C \
�7�(�.��&amp;U�2&amp;���]7qp:��0��xt�s9;N��������[�����C&lt;���]SB�|�:�~��U��W|�|�/z��iw�s�Sx�{�?~�^���l�S�"���;��(nR�kW�}p����i.���|i \
uL�XH�R.��V~w��j�n��L5R���n�^��&amp;��a����(o*�+����V��\�Ay|����U~�:wjZw� \
:N�������e���I�z���4�� d&amp;�v�����������uw���gua���K{3�(���� \
�g@��-��xh!��xH�!'���#��CI&lt;&lt;Y����4x��:������m|��z���~�6�����c��4�A���GX�?fuR_QA� \
m��}�����{��3����N\4��%��b�*��5P��Z#�1�S������f�&lt;�Yw�f!k���Kcr�7�qV��z��f�m��j�6�B~����$���ji��m���uK��sv�P�����Q�-L���FK=�k�X[��j�W���BP/@����2��
 ������/Y.(_(�}0/���������|�N�V2?R&gt;@���S' \
O��?�}/��;B���V���Gz�1,T���{[����~0��e��2���~_T����&amp;~|y�l�����%���%n1�K��\��^�� \
W�Q����_�%V�]�_�O�v�|����"B��miRDH!E�RDH���\��/�d��-f;�Y���O;5OQ���e�c������� \
�f����������t�l/L���s����"�|z!�������/1Z��2�O���%�3����V�����*����V+l�����ee���7�3�����E��P4����Q������h-h����h����My`C�v��B�4a5��T�]�C������,� \
v0a8S�������Vj���z��G�i2�q�K���G�?�(���! �c�K�-���a�������!�j&lt; \
�6�TEy�[������/��v��v��9X2���Xp�a(�����_��3�:�7�zB������K^��gT33��Yp����D \
z�9Bw�0i���Q=����/�j \
esU����&amp;�s���yU��]�=�U�^-�_�Ek\�z���g����=��q�*������(���������a���i0���Iq����6�U][�v���|�!�t�wc���h����6�B����F���2G_^�+Evg�������/;j��.�T~��'��"�
 [�� �d����������7���@���:R(%
��x4p`!���
p8h�� �8 �8X���^���'�J����"U��r��R�R���j�0j`�C�~�U��������N�r;IF������+v�/�|m0�=��m'9���k���/��HL \
O �	�[="�	�	�	�	�	�	�� ����!y���__3,�1Y ��!E%�~���m�Y�����j3!.$�	� \
Q��P����-��.ky��a����2I�;���#g�8�)6W��I�@����� �ja������ \
K|O|o��M|oA���������#�����������������^M��#hi����h&amp;�/l4��������N�����{����� \
K��z���U�j�_��5k��5h����A�e	���e�d&lt;&lt;���8���V56��� �cc��H� |7��� \
�\f�k�lo�A�q\�o*��B��1��KYp����mX�][�&gt;`����i���u��C,��O��Z��I���&gt;D��Z�T�V�R�H�"U�T���jU���}����b�!�_��� \
�}���{	[v �����'��[��f�42^�����s�*@��t3rw��U#�2Y�e����	�)���`�����2`5��`U��\�^��� \
O+�g�R�&amp;!.�+�+ ��C+���g���;�t� *D��2$������W�R&amp;�Z�?�Z�1+1+'fm�� \
f%f%f%f%fm��Z,����q� \
\�0�v1���L���F`3E��~�R��]�����^-���^/��������&gt;#���D�D��o�D�\H4K4��f[="�f�f�f�f�f�Vw��)[�|����-{V��F����Fl-�j{N#��9�����9
 �}t2�S���������������:'
��}��&gt;j��&gt;�Z�P\�N\H\h��F\hAX��������#����������pY\(�
��4
G��&gt;{���I��A���Y��9a8��H��"�O_.��� \
����$���DUf;\�cn(�O"�2�,���Kb�%�~�Mx�UN�����JE���gH���?;�?[������&amp;p� \
3+�k�-���b��(;Jzq�`�u&lt;���;�;�;�;�;�;�;�;�;�;�;�;�;O6w�l/Iw���������������������� \
��������'�?������������������������������;�y�3P=})��K��'.�n��;H��tS���Z���Z�$�/�/'�m�� \
�%�%�%�%�]� ���q�I���r�g�L�oAq��Ml�nF�$�0i�J}+t?HR��`2�x�=z~��;��a��Y8��x�p;2xW��k��8��/2&gt;a;&lt;��2%���|%h��d���(�gc�W���H���N8���y�E�t����	 \
J�����9�U� ����i���c����P&gt;�:L�ri�z0��i�� ��8�\dP�h@�i�T�vS�@y
m
deV_�Z��8YU�s��z�ID�K/��x	���*�VqUE�O����E�
���=�6y+E{����[���gxI��	�X	Rh�a6��7� \
��rp��+~��i��U3�0�N���{J�f8m�J��^Y�:�^�?��}�D�\�.g^m \
�(N��@q�X�8�3�4�H��]�0�&lt;�`Ot�^W3�9��)F)o�*�{lL��ns�p��f�!N���A���y����'���v�=��3�[� \
$;hu��H���g��,�/��H��$��zD�dG�Iv$��d�,��D�-HI-"V�xK���b��u��N��n��'�g�7A�O�#�$��D���;�]�a \
 ��w0 �
tO�*�.��AZ%)i���LR7�q�u����J@I&lt;���:9_��JS�'�'�'�'�'�'��F��_Q'��� � \
��������������O�O�O�O�O�O��M��_�=�;�;�;�;�;�;�;�;�;�;�;�;�;wCwz��U���k�P�����~� \
p5��������]t�����������B��WB�V�" \
!!!!������z�a�8v�����k[�8���������:q����N���X'��]^'N��Y���!N�_N��;q�V'����?�g��"Vu���~y�8�o�V18f�-�x^���uI'\B#-�Q��3���?1���&lt;�&gt;�� \
�P�~�C�y����Z�P\���'���F�n�W��~-q���q�������&amp;n�k���n��k9i��:~?���]k�VC�i&lt;����|'��K���v�� \
���U�en?v|=v7�AKd}gO;9�����p�y�2 \
Rj�[��=W�t[\�V4Q�kB����v���+��������������x���������7X��(���������r@�T���x��o��W��"
 ������V��������N���?��w�
 �=�����g�|�5��x�/VC��^������f4scaQ�
1]'��p�.IT��s��������wZ�&gt;
�}����8���q����&lt;N�x�Pi���&lt;N��&lt;N���&gt;Np�V������7�zb9�n=�Y��~lqpE���:ce������e�������A��
 ���(���GWGC=UN���y�D���n�Y����{	��N��8kb�8E�E��S�3��+��eN��x!�� �� \
I�,��:?6h��N�S���Z��[��������� '2J��LxP9���6���#�5��2�b �!� \
�SG����1�]�{O�]���+�w+M�������������%����U2����L.~������\c;�-���j����H7�len&amp; \
;3�,w��qg����(�p�;��g�_�'i��!��kw��q����f�R����/�6;�'�_�MK:W��0��?�=�Z��ID��t�0�cv�/%�KR�,:^��;��%�5x)U��;%T%
 �O%3�R��io6����Z���i�2"7�����kr�a������EseD�[��&gt;ppW
��@0�]�]$�K�)������/�.?�*� -``������Y�����(
)�rJ�Y[T,�L��c��3�9��I���u�?��qe�C� \
����&lt;������05�x&gt;V�Q������vV&lt;9�P�9���9|�`'���u���8u��e����s����`�)�QTC��^��
 y8����������*Z�`�2Zj��� �V�c/!�(��|����
�j{	h����$ U�)�
�
�
�
����V�����Iu����[�-U�(�^�Y]_Kq�������I�������8�N���^�� ([F������h��
Q�h�3�No�
~��7�U������'|��9���"l�(��"b"�Y�~LO�i���M��~������?�;m�N�WiC�����_�����^*��)�a����M"�/b��4�]�q��GD���Lb&gt;��C��|���|�.	�$w����� \
&amp;\��{�=YI4�kyy')7��n���7��S��+���r���:y���m��J \
U�T�/���%�K�G}��e����5oLY����~K������1��&lt;v�'������v-/l�B^���bs�U@l@l���������� \
6���\�s��-�����*M�+h��Ye��������I���Q��U�C���vV�2 \
������4�t6���K�G�&lt;kh�nV�v��w�G�)���w���I��vi��/��	���)$�����&lt;zT&lt;�Wr���5�m��vx
 x
x
x
x���97^^^^^��Y����&amp;�����A;������!J�8����N�9�����?4��-��y���4I�wO����r���M���%��MCN��iG��l���'48��86Q��v������ \
�����=��]_kFn�1[ 
g��a)�v������W�E4�B���:���I�ik�:F�?��3Z:�bv�%��0�x���tFv+��&gt;#$��:�*P��� \
A*M      ?M������"�������W)@����T \
b�D�;�!&gt;&amp;��w9����&lt;�w4����[#�0b:R���gm[ao��k�����qV_ \
&gt;���G��T�"@|@|@|@|@|@|�$&gt;��_�v��:A��M�p!p��-) \
&gt; ���V-�,H����0�����(�l����z��g��]q��
"7ckN�wH	Z����}��P?�:���@�8����4E������m�YZ�^�}@V��?A��8TH*���97�HJQ�+�I}Ku!f�'���C�zI��;O+"��� \
y	CZ�����x�R�@@rsH(	I U�"������v \
Y����.r�@��)����s�m���H|��?H#������:'�'����mL�~\�&gt;&lt;3vg����Z��.����������w \
����R�V�KM�}x*9�n���4p	�lz8*��/9^Be�O	��vS�����c���d"����#���d"�$25Ed"�D�� \
                A&amp;�L�2i�~E�N���C
!D_')�Ea�{�tr;������ �
x��$��������i����/X��
������l'�U�� ����9T�V�1IZ^-�Z�o�\�����d1�������@�����Q \
nV'C�z[$t�_iY0�U����M,�s�O��4TT�Z�ku��X��h�a�pn�s��H`�t�`E����u����~��� \
?��N�{ ���9����F�������D���+������8�^@+6�����8�#��/W`&lt;�������*�z�9�j�Q�f���R+���������&amp;�K��/�!����%�+�5E�%�K���/�_ \
�O ��NR.T)�}���-��k�)�?G-5�|
������
))�4��~E1{�"�yw�o�����{BD0p'��6��U�^!�[��D$�
�� g���v,E��4
 an&lt;�W����~�'�^��u@���!Vx;����d���x�a��@\E����) ���~ \
S\g�tJ�uYlPI)�d2m%��Z�g��� �)��i�?R�KMW�Oh��B��!�1($���T%r�R�%�-$�U�de \
V�k��Wa"g��$i"�X{����3[�y�.�'����N�g���������u���[4,��`�*f \
#iu�����I����,|��&lt;���)~�������E�����7`��~�K&amp;��P��&lt;7	��6�	���`���	BwGM����#tG�����
 �i~8���������j������
�qP�?R����\[	����\{���^���)����cK.��pNet���.�q&lt;l5�s6�q��u��D�i�����q�����oD�fsf`q���#��Q�\��_V \
C��������	\�)ka�}3���4����Z~-���O ? \
�A1����QP��g��u��SK�V�MXl��\�9�B1w�E�bz@ \
B1�b����B1�b��!C(�P�A����*�W1��������H�=j]�N�4�����e�8 � \
9v$$9N���oG^��*�l4��("�,�yDa�ct�����I��������I�51{7����#4�+��0����M@����gz�16�R*�S����e&amp;8�B��; \
�~D�p���6j&lt;�0��������g�����+��]��K���W���m��Y:�s�99+�M��qc�Ct.j�j&amp;.E&amp;�p�"e�m��KH�U���:ZV_�)���=�(�jay;��(��CcV\l��ABK�������z' \
d��a��� d���&amp;#LF��0�����H��#[�@���LU������w�Pf'��� \
�`��|x��]��1F���#��y���pNm��qO�=�d��qO�=�d��qO�=�d��qO��S7�ms�ws���([3X�g[� \
���W�{��|��]��a` , 5E ,@X��a \
�b�:��7`��x�a_\\`��,�mEZ��Y����_��� �j��u.��� �e.�h �%� \
_������������eaRL�������X����uZ��h���*�45��`&amp;nP����{7���  \
8���E����/~p����l��M�^&amp;�y���T�&gt; ��GL�K�pDo��pD��p�A8��)�p� �#G� \
A8����SI����=���������M���G \
h&lt;Z��U��z�l|�f�3a7��y��0�����xF�rf��@E^��Lm7b�����-����-[���"�-[ \
�@l���bf�S@[P:t���:���|^.�����kN�7b0���m�4�)�L�}�=Qbgc�)�n�C�3�w� \
[��D��LRL�G&lt;_J�����i�+&amp;?{���2�+�|��1�KH�q�� \
��g	����,Q����&gt;����B����,��IK�eR�~��H5�F{�~�����~�2���;��B���H����gv[
 ��Qk%U�5��qT��r� k=�������~�  ���r������jc*����D= S�x�Z_u�)����w�
�����n}�o���&lt;@7��"�E��gjb^���y�"�E���1/b^��y���i\T�_8�a{(,��.9�i�V4�qp������*�5J� \
"	s�������Fa�IS�w�k�P��M��d���������p�,R��E'R�j�2`��QV8�|��9j�0)����z�V�C��l�,�f+�rJ��&lt;�T�5�`�� \
�m�t��Td�S�2L��Fo�@�`}��R��V����D�Q��b �Oe \
����l!�BdP�Z�Hr��qEE�r�u�IZ���o*�S�#�J��!��m�������_toY/�m��}*-�93ss�pPW7HE�U
 d���e�*I �����yV�2�!�[J9�C�&amp;��/�#mU�B���w."�4�R_�8�&gt;n^.)�\
%��W`��7�u7�m8JsF)������:�ACC�{���y�~�+��\�h�G�����4��q,m��!o�(�S]�$��m \
.�jw�DF��0�M3q�M3��&lt;�8�/��$��@�(���4e:���2�*�E�U���%��h��?������*�QY	og�&gt;c�'����$]?A��i�Ea-�/3p���s9���Q��9�pu2����d&gt;1
 [��E�Z���U"9�� ��6�+����]��&lt;�Y����"P��k��Z�:�7[u�J�+�FIvrfy�k�z
�;����	��0�kw�����J�B@��_�") �Pd�D��4!8M�
&gt; ��*S[��`���Y�)�I���ao^O{�=v�h����5E�!��!��!��a��������W�_j�{��R-~���cE;��3��w&amp;AT�j��q��
&gt; 
a�a �������N�i:��@W�e���2�N��������
�$
Z��`�qH�Y��|�a����d8u�(wW��Y	������
N���xl8���x�mQ �l!�N�B����Z�!z��!���0ba}�Rba=��0ba�X�QS�0ba� \
��#F,���!X���|���� O�9Y�!&lt;X�}��������w����MX��Gdeo�&gt;H&amp;�e��OzR���k� \
����4\�@���H W]�����.I����$] \
�"��pQ,F�M��=��d��\���7NQ�)oD$�V^l�����k"Y�L�x�j���q����7������n&lt;yb����!F�/�k����O���B9�BK��r�w�i���k�#���|p�UT��Z�?��J�� \
W_�� W\D�� � �u�A��O����I  \
�gM���q�k��]�����x�D��J��{Luk��{N)�3����U_�Q��0��&lt;���\@. \
��e�������������wv�\����Z��B�� ���;�?21�������8�] \
%o�*=��n���}��&gt;$��G���&amp;�S���t��U6��"������;������A&lt;�� �r����k;
o��D�~~&gt;-����s9~���z�Oo�z: ��G�p*�"@8 � \
��=�o�d{����n�����^Q�����o�G/��&lt;�v���������8NC	�1��n���A� @ �A� \
@ �� ����Ng=����f��$�G�H��CO&amp;�N��i8L*fH�vdG&lt;��dF��8�|7���s����kaP|0GAL\s6}�/]����(9����4 \
�i�� @ 	��t�u�:@ P��a���OPr?#����~&gt;�*��T��)�o��H����l�P!����*�
A� Bv�#�T*�
A� B�
��D�3��5�b4�����K% ��
�@ P@��,(
�@ ���� @dcD���MQ'&amp;$��D@" �H$��D@" \
���D�=/_.NS1j��:+;'*^L���O�C)�V�o472E+���-Z�����d��s[�H���&gt;d0{�������'�s�����|Q�����:_'���d&amp;F2�U�\��0��I~jkcp��k�6�5��i��(�� \
�,x(�@�J� P( ��Bv��
!r�C8r�(�q�:y�:%��(�@��6/�M�d��b��}��a�r��:�������@�Q/+����hw7=W�U���U��N�0��he��*���qEc��+���D�f�T�5���U�E��k�5�p
 �\�{���p�@���U�R���/�,��d�J�/n3B}�i��0�Y��`���7�Swj+��Z+�w:^)|4|�����8�����'����&amp;����pW�J1�r \
QH0�W/n�PA�fS �&amp;D�X��k����^e�������Y��qALmo��G�����D�z�&lt;��D�5=��G�e}����^V��G:���	��m��RC2I����`gO%�.�
 Le;eSY��
L%�T�n`*0�
L�S�����)��#�|����GC�w��%�?��+�8���l�~�� \
���Y�����Vf[�g�I&gt;�Z3�2�JE��x���6F3�Rk5�  �����������q��#bI` i� 9��+F�8���� \
�������ir���uK[k�NAk�S��9������w� �����*��I8S�-�����Z����lT=���� ��N�p,0� � \
�J�� ��p@8v� � \
J�t�DR�B%T4�_�����I��-e�N��)��c�Fa�$�����(I/��%u�DIi/9H����� i��`r�� \
i)�[���k )4�zfM�p	h 4EBS*�" )�h
4�M���=�CS��YK21!�gbZ���Y�Re�?�����DBT*���})�A~"�%A?Fjn|����[��m�����EK���EK�w'����T���4�Pi%�QG^�h�8���1�E�&lt;�����[~���\Ij~6V"`
 w�]�&amp;��o�8���{��EY����.��������p���OdG��y�6�N��� \
pw�M�mX����V]�}u��w���sv{����%�����(�}����9�!����6�-9H/�o�O���s��:h.F��F���4�^}���-�^
 ����J�x5�^
��W����v��j�r�F���� m���n�� �t��/�x��F{�?�M,�{+h�� ��z;A�����Q�c�U�~
bq�?��^��7E�����.�Q \
�E�^��T�/A�g���O���Y�g���X�-&gt;`[�u�V�I��%�7�l8k���Vu��n-7�t�5�#��4��S�o���zJ�:���# \
�����������e�����d���8�E���������7�����k��jqlkqKj��q�j�G��������{��i��F��g��H+y{�V�]Sl����L�dT����O^ \
�fe�s����z�����31vz�����y����Z�i�O�� \
��nI,��2$��?��%\�/i���T�D���y��CW����A��9�h �5HA-8 �@�J� \
�O����i���W	��3I��C��&gt;�!!�]o�h�*M�"��o����[Z \
�]Awk{&amp;&gt;R�yf&lt;�[��Z�m���WL������W�#IQ� �)* \
d�|����������[�n�^��T������N%�k-"�UGb���.�lm�	�[�|A��	�0M����M������U"a}�R� \
E^�S1�yS���(R(�.n�+��.��K�x��d�D�D��z�D$��(7�"����r$j���W��f \
��9X��Iy���������l4Dx�F��'��'�Y���%��t���,@����(w��9S&gt;�T�j��{��z+������+���%�!U��
 4Y^'��/V^���D/�/��|/&lt;W����'�W�K�x,OU���-�,�E���+���Xn��:��]yN�](q�k`������� \
���m��+�W�������n'�i�����1����&amp;�]����d��������,];AG����Z�f�w4������������Wu \
��Dtu)���[�Zh�[� R\��k������v{�f���Z�W \
��K-]�����Z��X�	+�c7�"�c�c�c�c�c�c�c�����r��c�U��(����z�hx�\�e�	'�R\�|*z&lt;}�V���=w�d�s�����%�@ \
�VN�m������'W:6�?�%[�H��RE��G_�N�� \
*��G�,����`������q���]�oUR��p:����B�u{����������^��	k����x�=���~zT^�_&gt;&gt;*(���\�~ \
~������9@����,�,m�������`�M`�`�`�`�`�`�`�v|0KK��YVu����v�k��}�s�]����_��� \
x�/��-�[�&lt;�5���L��r'�`�z�������&lt;�4��3��W�8�����I���s-l���nC��y5k��@#C5�Q�'a,EmQ���*'%
 ��
a?��ll�l�G���+a�M�Pk*j�ABAB%H�FSH(H(H(H(H(H(H��$�RnIhe�K��s�?xiKQK'�J�UT \
r1G��L��F��*����3���{3��!45555555555555555���9���19��j��l�5H�^E� \
]����A�x�������*Rc0Ku��b@4I��.���V4��&lt;s3��`�Y�]�,},��v#1���vW�����/�H��1i&amp;���B-}.VC�B���O�L����g��
 �g�����$0�FS0000000����R�?�|����ol) \
6�b��?��u��n{-1\q;T����WhFJ��Uht�Ld&amp;�of2��2�q42Z����h0�(��h��qQ�EYV�?�E}`Q`QkD,j�E�E%��FS�(�(�(�(�(�(���X�RX�������R��j$�M�M���m-5-
 j��g�3�W0�V�y�����x[�����	��w�N�M�a�.U/�n��jz+����un�O�t�^���~&amp;��un���;�&amp;���w \
�/�u!���D&amp;���k��io(k����������e�t~"����t3�F��pE�����.���1���/����c������(���N��t����
 �^��f��Q1��������Sa��O�f�dr;�����+y���fE#��oD{7�eHo��nl������N��|�,Mz^��!�B^pE� \
|gu����������v��oU[#x�yAy�	��.�x&lt;��Q6��Dpt��$������&amp;&gt;]�P��Rd_Y�|V���sb.'.�oT�S�\�l,���������F��U��r:m�Vb�dyK�B����J��������P��]�Y���q��C1��/B=�N'�$�0 \
?�t�a@���.n]t�a@�t�a@��_5 \
������7��Zv@�@Jxq��i���X��:��������������3�Ex�F_���F�S��`��O���u������?CEv��-bo� \
"���i2'�KH�B�F��D^�7=��:��J�����-]�sY��,��g��z^���Z?s]�3�~���?a6��~���;9FQ�-h�N�gK�[�u�]l]S^�O$Z�A}8QR=I%E�^#N&amp;Z��{�^�1�u:�[��b���	 \
�ttK�����n�n�n�n�n�n�n�&gt;@��@7@7@�z� �p������)g�b�c�2���
�2�@f}���D�^��a�]��g\C���{���H��sY;��
/���[�RSWhiT9����6A�����"��h"Bb��TL]Ss'�����i��F&lt;������:� \
��i��������E��t~�����E���h5�b��O��� \
���J�&amp;$9P��P�U��vwC,!����O���h�u��m	�'��Vbuz'B*}��$�~8{C)(����g����u��i�_�U�,j���
 �N��E� ,K��4�AP[����Ji~�U4��vi608q�k�K���%�	K \
FS,	�$��K,	�$��`���%�R�X�wK��G��������zU����&gt;���C�l�(���x��9-��j \
9c�������zw�����8��4��� \
,w�&amp;���[�V���V�g�����������(�:6#Er��HT�&gt;)�/�z�G�k�����'�e@L@L[ \
�i�1�w��M�`�_��0�&amp;FiG�v�F�4�c�TL�niR���J|x�h������5���N�%?{6S15@L \
&amp;�	�b1�n����q@L &amp;s��f��s������)�U�X�����R�v����]*����G;�i�6��m������z��g������AD/������`��)��j*7~�p`g�����s~4���T�&lt;���]NKu�L
 �!�$��+L��[�/y��������%&amp;[5�|���&amp;�t=8$R�!5pH8$	��C \
!�n����qpH8$r%2��v����������A��k�&lt;�����F�u�^�����K��G��pz�~�u�6��y�US���zM�����
  ���� ��~o��h@����^.�2K baAve,c�Y��Td�R�S];�Wv��*��},9,�� \
�s��|0��P�����XL�X��(f����dA��I��t*x�(���v]���@��]���6j"��]�.`������v���]��J \
ny&lt;������s��U��������Ob1� =S�h:��N_� \
���v��j���W���19�0S�/�Q,�G�������r�N�(��A������:�3���#���$��*����4-�w�t:�L�N����� \
��)��kS�91g�&gt;%�K���$@/z	���FM�z	��^B/���K�|��c�z	�\I�&lt;��jM����Fp���k.����l�1'����9�Rm5�&amp;1_W#n��+��j��m3�wfM7��?�C4�u��`�M���h6j" \
�M�&amp;D�	��h���C4� �M���!�{g�\��W�n��e�W���7����O	��xx��C���� �OCf��d�� \
����L�l�D2��L@&amp; �	�t��d:�2���2��Eg��kM���[�I��xf \
�)3f�4R�t���$�w�i��Xng����VKy�^�5hm���c�Y�1�o \
B���.;�;=������0����^iiq���O�5��{v��l&gt;����}(��e��  \
����j�g���v�8��)�u��:���0LgO�a:h �)`���&amp;�	��a \
0a�n7�0L�8&amp;��B���{|LT%I2y8c�C�T�8��q'���u��H����Z��@/� \
g�1�(&lt;�-J��D�w��#��ya��P���9H�1���!���w��c��a2����'QB�����L0[(�)��i�(�E���?�84�3_��d�l�� \
���@+ovU�U��k���$T��f=}���4q�'��	��~B?���O�'��	�t� \
�'��	��~B?%��o���f���~��Z;u��t�)zj@}0L����T���u��f�`A������`A� \
X,�v��u���`A�+D���^W�F����ayI�(v�c�C�N����Y�]N�6�1_x��*'����(&amp;���i \
���'�^�u��K���r"������9+�iT�:�����b \
��ElJ1,V:�H����J��(��q36'�U�Y����$=�x��Y`��O�&gt;Z����At���e�	�I�����6���xJ1�X���L��&lt;�E��BE(-�E����c!�� \
����*j���!��sl)Y�YJTv/2�p�,��&gt;������*�9���� \
�	�3�(OR��&gt;NB�LL�����W��	�O��qSG�	��|�kmw�1="Sn��(� \
c�nO'�\�!�?OD��������X�YB�QQI,��	�(��h3VrU�����iF�R�l����}l"���z9���	o�7K�D��'�|qLL�(�QR����}^���R��=��V���|�q��wa���x�^*&amp;����J}�^p�zt/ \
{A {�Q��t/ {��^@���n������t/ \
{��w/;I`�v���#����WT�ns�*����k���M���*0�����v����,���]Z�+N��@&amp;��Lq��g�U�t{]rE.��Tu \
'O�](��L�.&lt;[���1!e��.PL���v���eq5g�r���2��&lt;�y��U�SlM��F�KBI�VX��Z���&lt;�3^���w�� \
\]�C��!��a�0d2��m�Cv}6�!����2�C�!�������!�8�����d�S�t-���l�ye���[G��s�H�QK��� \
v�D���&lt;��� �DAl�D@��w��m�@������?�V��:,Y�������u&amp;N���B$(qL�*ZV���HJ$D����N����],� \
D�A��H ")�� ��H
��&gt;)��v� ��H
��� �]�t�C�����J�=���nT���w���L����A�2���+��L���rD�2���+��L�2���+��L�2���+�q������(67[O�N���S.�&lt;����^����J�+Yu;��IpF \
���,o�c���R�� �&lt;��%^��gs�^;�$\eoz�u�c&gt;e;������;z3Z�����T���d���|���{�����������c-{��������Hb7��� \
���1��$vs��Z"H�&amp;���n�I�&amp;���n�|�-�H�&amp;�����'v����]�n/�^�������_�V�K@}e�1� \
��/_T�x�g-�� �t�C��� \
��n�����m�f��o���tM�5I�$]�tM�5I�$]�tM�5I�$]�tM�5I�$]�tM�5I���t���B/�������t�"S��� \
W2?T�N9W�	�������r�1Zy�� 3(�F���-�Q�+7�i2rb�}3r���91�K�d[eB�}���L,�P`.�������� \
jk��&gt;��x!1�8��~���_�t��V8u�yQ|Un|�n?�����a��x \
f!Jb��4�_����	G��/���y��m��a��������L&amp;�����uJb#����Nld�%���b#�F��!6bw�Ol� \
����b#�F26Rk��4��FX���3l��`��/���y*�T�XSa��9��:��W���K���F�E&amp;�B���4�M�����OO�WS�������������W���,�U��������:��sB��"�g�����k64n��l��8 \
xq�e����7/6ZA��Y������{ \
�ls�E����t��,;������!�5��?���(�qb���1sG�����7	'�Q'������	�Y��Z��+$u6�}U��� \
0eh~��&gt;���G�sK}9I��F��U��N���}T��VF:�[w��$�M�&lt;�eS3��^��'��60s��$��4�L-6gO���G��  \
�"�8����;E�to�����p�}��B \
JuV��c@�r�Hp�g�����������c�&gt;����0	�0��$�"'�����%5�g,t8D&lt;���'gzq������Pvt�,�+.F�:�5�� \
*�� S�	"�qp���bt�������u�4��nOos��|v���m��F�X.B���� \
��6u���FR�P�B`kL�[9�?�s��go4�����v�p1z�����0����Z���� \
{^H��6U�B�������72�&gt;���/� �2���k���+����*S�N���;2r��+�8� \
��m��&amp;�i��m��-�������6V���5� \
p�@���������l��������U+:.�����7�����8�$��k���1W�����Rw1�A������&lt;p���� �3
mf������D��-(/�ib����VK�ib����M�&amp;6Ml�������ib����M���i�x�
����IY~FN%�Y��P6�&amp;��\�,�����
�gQ��)����/�?��F��4�vF���-((�ft��F�rl��r)$���3��j,+�E�d����L�9�� \
X��J���~T^3��S����C���wd�%��2C�G�|cD�Vf�\����b$��&lt;��/�����2��	 \
G�:�Q4FZH�����x1�B�Hw\�x� \
�����(&gt;�/wk&lt;U1���4��~��:Tg���s������I�,X�5�W���b�Tj�����iN��a���f�d����C \
�&lt;')�Q�S������C�Z���O�e��E� �/���� �g�d9� �?�?����Ps�����sN�� \
�Q�/4�����~�ln�|uv�HE:��`��B��t�=�����2���s`�L���!�q7s"�������,��K�h4������� \
_`1v�3QHJ&gt;+�S�|�!�4�G�:]���z����5s[�LSG�����M���xn��"���	(q6%�����5#�l��Y \
n~�W�]�r3f���/	x�"�E����-��nH���/^�x�"�E���/^�l�W��[+���;wr�|�����=(��;?t��Hu��.�=�^����\__|��~�e[nVR���;M��wJ{X2��x����:s��F��%����F]H4
 5k��S2�\
�a���Mg.&lt;��b
*�.���5���~&lt;�s�o��x�&amp;����=)o��l+���a�������
���+��?��&lt;7�������t�Q�	��[�b��,��m���|�����#Ow$#\f�m��L��t7����2"Q�V�.T*Ah��N,��rHi��Se9;
 �(�A�j�A� mg{`���������1��k?Jb��l0��&lt;�$�p����s#G��f���b�h��fG�\	��,Qc�{�����I.������IO�R�$n
 �-�\%�,�����S��`9�$R��9�N�b�	FMD�I�l������=�S�~d���;AN�@�5TS����������7+�FV�&amp;e���������j��=�I&amp;��Sn� \
�D�Z��XN���=��2�O�b�i_ aRkdA��8&amp;%L�	�n�D&amp;%LJ��0)aR \
��I�.�	�Z�&amp;%LJ��0)a�����J��.�	�5�g�����_���W\)�����2��Wn���Ve����U�o���� \
��}����E{Wc�������^����&gt;D�~j�� }���!����&amp; ��������kP� �\�]uXv������q��Br�8�]H \
l}v��������$��5��'��� {����2u�N�g[VuF�c��;�]J��y�fn��Q,�8 \
�%~s�:*�h=&lt;_����X``��"�H�V�'�hA��!C���Z"�!C$�H�"1Db�v��-��!C$�H�"1�W�+k�� \
�;O��&lt;������;�^���J��9������&amp;��7�\X~"���a��1{�1��X�%��l����� ��� \
a-�+H`��|������jK.J�G�*�-�y,|M.��bbw�� "l�F	�pW����a�B \
y��r���vv���$���AE�}1Xx�?!&amp;����'�o&gt;��~�v� ���x \
kG�F�t�8��nw�k�FiM�N��]XF	�8��\��O�SH��������BAj�����T�	�*���	�Y@'Be��8����Be���*���{�m�8��Oa��qi�����
 L0��4�!�B�m%��������I����Pa�J -�qs��J���*���n��2�8�*�� \
2�*[�U��-.~����������?8���c~��d���E�I�-�^�K�V�x���y����{K�l��6i�M/&amp;�����I�����p�u�]s�P� \
��So�ZA�k��n��o��U� !s������9���U�$n�:4���D�7I��_:2 \
�����y�������BV�����_�����go�v�kO�-�'kO���0��i0����00,�V�"�00��00s�����0 \
0��00l�G�aN��������I�bk��m���������75������f��F{��w;/AZ�_l	�2|�K�����gPn��K��o|�� \
-���K���_�%H��-A:/���e�����p����@�\�A�I���a=n�w)|-�.��n�����6��x����Kt��F�(&gt;Lng=@�[vj�T�R��Q����U*{�rJd��j3���j�����u�.��6���mqC���q;`1�
 q��J]�
qC�7�
qC�n7��c�
qC�7�
q/Wf��^�����~#�W�4+r1S8;�Uwv%��e�;�i2��j� 4�8I�\{��
� &lt; �� &lt; �� &lt; ���� &lt; �� &lt;( �� �� �� \
&lt;Z���0�B�D��"�!B�"�!B�"�!B���9"�!B�"�E�"���"B�"�!B��� $	B�� \
$	B�� $	B�� ��q$	B�� $	�� $��7E�� $	�X	��X�$e���,#������FzR.I� \
�����z�m���~��k������I,U��c��a����dq�a��J�l�w�w�]�TB?nU����k���������YS�~��5!���.����?�&lt;t�� \
S���A��4�Qm$����4$-D�V�"�4$ IC��4$
Is��G���4$
IC��4$m9f!iH�����3tQ��i����s�*F-��g�b���HP�V�h=�������S�6It^����{5�m{I��������K�'��`D�M+�
 ��W���m����i�&lt;���4��;�y[�
���*�uv
�J��`�N2R�t�g���5�p�V��$y��.�C���������&amp;"�����;K��nO�kz���8gQz��;�it�D��[�KFc�����0R����h�
 u�?k���-e��
�~+�o]�
�������U+���v����5�k���V���y0x!#9o���A���j��-���8���rd�q4LF�����&lt;�����{�������I���c���Ynf:��of~�zi::�:����V�p \
�'A&lt;�M���P$|��q�Zt#�S��� g^���dZ���Sdr2	�E����c������C��-������\�e~P!t��� \
t���!�B_����!tB��!t��Bw���!tB��!��� \
�C��&amp;�7�����v���oI�����a�~8~&gt;��2������x����X�^��P��t�*�J���N��8�� \
��g����*���g�W/5=�J%;�&amp;�0M&amp;?��'�J]�}=��9&lt;I���i8�kf��F�c������F�Q���E�F�n��F�n�v��9��F�n��F��r���p����l8d�V9M�4�T��� \
8:���Q��F�k!([��t�w	��,0����������a0���)���jT�$4z��FM�h��(�86�����j�V��o��Y�g \
m7�����f���`��k��f	}|f�]V�,`0��f	����Y�,`0��0��y&gt;c�D[|�d����.�����n�@'�]����_�����h���|o;z����$����n����9Y���oF���[5���o� \
�=�� 7���� �U���}�`�;���u%i�C�����.5��W���?a*�������sN'�?�o
�7n�a���P�E�,�a�]"`��HX$,	��E����"��"a��HX$,��a���#���������w��
=��Y�A���r�e���	���V��S�������b���q��yQ�����S���Q�� s��&lt;��z��pD�Tdr��b��D(�]Y� \
�cN�����u�b��}8��^^zn�\��.�����L������sgS����,�	�����"es�%�����f����?��[��2�\���ZQ�����wE�Zn�;�Sid���V�,Ku�lc]mu[mJ��V)�@:�
 �[�Wfg��b�*I
&gt; {�D��Q�L&lt;�R��������Uf.�SFYy�������U�P�)qmW��"�tj.�d�W�r`�j����`�P�&amp;�����]"��`W�+��
&gt; 
v�����]��]��`W�+���_&gt;��`���]w=�pC���AB���o�����|���I�mTP���pNdY����d�B������X��	���c����W��� \
M�	���?���~Ut���"�i�n�&amp;�Ta7�W�(�i \
��T|��&lt;��B��z�*�jBd���FM�&lt;_��*M�l�?j�Qyi�M�i��H�����+I�&gt; \
E[�qM�����	O���Z���To��z,%/4��S���c=���U]dRT�� �PRI�?p����+�_� \
Y����UE��.�V��	kI=���\U��3%����~���LP�8[�{�nQ(�j�8��gy}����i��Q�$7}9�I������x7��c \
E]����|H���;1�'+�*��C�sf�����j�3U���|E�'�HS/��9�|//4�6t�a�����?���6v��iq��v4%�HH�� \
}�o��P��s]KiZR�P�1^�R�Yv��#z�Ju}�/x-J\Pg'j�WO#�~")�5{���P�C��g��ey�����C@���u�=�}\��6����7�e�W�����5�1m�g�`�W�����s}���N��Y`0&lt;J9/k�~% \
�%,���75���C�7�;������s��A��7�� �����a7����r�o�7��
�6��o�7���/�7@��Z]t�ku�~��7-2=������Sd���7��������&amp;�.��2�~l������&amp;;`�,�0��=�0@���pB'&lt;�'� \
��pB8!�0�NXN'� 	��&amp;N'� 	�'��*�O��A�dk�������|�� \
��j[m��m����������O���_Snm�=�n���vk�c&gt;a�������"5�gq9����{�f���8���VS�[�]�zG�v�7d� \
�=���?��+�wd�z��u7��W��N����z�s7�q�*u�[Q���vgv�����/v.�u��&lt;�����?�����_�����Xz���ak���eOw���~X��w&gt;��n���������V���u�?�r:	6/!?iT���2[Yvn&amp;
 ����_�����?���7[{��s���]U�r��"q2��VLy��L�Bw]��y�hs��k�/��sk
U�J�6���78��1ES��S0:c�0��cL�A��) �"�) �"�) �"�)
������rS�1ES�1ESd�1�c�0�c���1E6�A�Z���u��]��7��yhg���e:�ij�"^MEn���(i���zT&gt;�� \
_%������;���gT�&amp;Yy��x�����a+R�!d�i�o����8v���X�����W.�!`�j���X���H�����L��9�+�|$u�Z;OT^�O���*����x���*%��b \
�V�����0�y=�0@�`�0B#&lt;�#� a�0B!�0�FXF#� a�&amp;F#� \
a�����&gt;��&lt;UQ�F;�7D�����*Q���k{g;W�v�}��'�tg��d�������-��;���������H��zx�}�� \
`0�����D��w�;��x��������w�;��I���w�;����]�f�������������~�?-�Jg��hc�t���d \
��&lt;�S�����x�t%:n��U�.��nwX +7������������nG�w��T�Q~���k����l� \
7�/�;Nc�z��K�)K��J����Jj*�z��v�������8Q������������:A��.3��\������F�3�/���R9o���� \
�jeF�^���R���j���8Y��w�=N�@���0|�.I�-mA \
�-N�B*&amp;u�E�*v�"~&lt;�������F��k3��=qR7���-k���#����Uni@ \
�����������5�?���$�������g��g���1=��=�������K��z����i���Z����S�S@�!�G+3?�I���CR^k�2Ss;'�\���&amp;3�����2S��\]��\4�	�h���	� \
RZ�B����h�  @+�V�p���p�Z�h�
 �h�
 @+�V��hE�tX��
{z��$�n�}��������T����^?������
�=����~����O�s��On���t��4w4zF����:&gt;��:3yt�b
�� ���_����(�E$v���-IR�����;{�i�2��l�P��W���5�IE[p���D�Z��2J�J������b�����tP�b \
�m:��\QWX$�w"��wg�eL��,P�U*1��ir�z���'&amp;��6�G�K���]����B������@�u�Q��B�P��E@�����/�_��P�&amp;�P� \
�B�����o;6����/�_��P��B������n^�h�G�bK��=�G����*��V{���z���?U��-�4n���?���7��H��"�$n�U��r��X"oh;'��w���������]��O	��&lt;����e
                
-�,Oy EZ�3�V�~-�2���
��1��{�#-��C���x= ��C=��^q�=�Y�!��_G"��(��C]#��^��)���n4�]�M���T$i*]\�y�� \
�'����qY��+�K�V&lt;5A����z@��G���$���Vz�d�Z����/�p����zmo.���7���,�qbY?��v�&amp;[�B�d�D$s*��6�H�#���"O����������&lt;o4t����E���1�.��D,��" \
x�P���Sz5j'?����9�3��+�U���j#�l]��$�0�i�+�r� �Z����� \
����q��	;mf���U{��1.Q=�$,�����St��o�s�D�Y�g���2�x��F��h~[�N���P�m��l�&amp;�9u�{�,*xIi�{��?�� \
����� G�{� �M��L�3��b�jK���N�g��/2@u*�]O���}�|�%���}?%���7�/o�=� \
�M=E��FKvP|�Z��E�LJ� �!P���PCh�!PC�p�[PC �@
�5j��m�����!PC �@
��c5�Z�5j��!P�_���02���K������&amp;!4
��zBs������?vWs;�[��&gt;�O��B�\�j/����sE{��+(&gt;��N���_%�i�a�Y	*v�f���k;w�:^�v�4I \
���"���;~0Ot�y��������{����g�W� ��@�K@��}��@� \
8N@�zz�����f[; @��������0�/[��� \
�PU�E�j���a�JC��@���K����k�`6�&gt;h����Hc6����������e���KE�q����P�.,�C87��&amp;����Vo���C�$w{��6��i�Y��&gt;g�l���������t \
��2y�R�"�}SS	~��|�~�DA�LaO%p��8��8�`�[8p���3g��m�����8p���c�3��g������3g���?��&gt;{=�u������Fl�2?����5��N�'�;|�
 ��N��JS&lt;;ZA�[�gKB6 2����$X'k�&gt;�T�X_ C,��l�%#�
�Q�9��az��]w���fn�����=�����/;C��DHs���BR���l��e#�����E����Ej�UFSz��E&lt;H�8eh���b� \
�������2����}Z�`I���\�2��{�f=����9{��a��������nSk�r�D��OrQg3&amp;�����$��1����+���(b���&gt;5����5�c�H�OU��t���0G
 d���Us�� Lu,�1���i����"M%�0+N��y�%����5��@erVa��J��}'�V ��H�_��\���KQ09Y \
d���$w�����9��d�������?%�p���a��j�����`���C�g�~v���j*�C \
O��evy����������U�2�S�����Lj&amp;�cZ��e� \
?���x�|��~��,j�a�J�R���f@�&lt;�mE�����y��?y \
��H��4�a�����T�����btn/�Y��_����Ke�K&gt;�2�;���&lt;�aZ9���� \
��k�������"�&lt;S"\\$'�M�j�����]���[�Sy�5��h��=N�Z�|��$es��@'��D�c�'���N�� \
���B���q-��F�@� rV�A9�5 �@	PA{�"@�
*T� PAn|PA�~ �@�
*�TP�7� �� �d*��� �� PA \
�@�TPa~|����x6�7v��6[Z��z�����XQ��l���N��fr13�����3������c����G��F��4��6�&gt;[�&amp;	&gt;�, \
�W\�����}�������A�|�^@�����=�{����!�C�w��C�w��|��=�{������;�!�w��|/c��G \
��e �C��|�����k4Y,�~Ch���dy�^f���/�������Y�?r�a��z ��{w��4��_1 \
1�u�c��8%.��'D����"G�]�"�x��$��\q ����^7� \
�g1*���3T�j����bO��ot�@�{T�Q�G�{T��n�Q��C�{T�Q�G�����hT����b�RT��P��}P�G�{T����}�=�C�A?]�{cg��c�����n�]�������R����T}!#��Z��u1�4���vo \
[W���6���pMy� ��H��u^�|Ag \
��?�nm��w��z^Wd���{��+�L�����+h�x�VkR�-w&amp;n4���}G/Jt�UsK,�r���Lic�_$_0�Jy�)�K������t�E����VF�����R�f���(M�L[�����?D�NwT��n������S
 ��ZO���00���%�������#��#0���������'��/?�Ja8�`8|��p���t \
7��{q�;�{������&lt;� ~��H�6���Z�)�� �TM�&gt;-�Q�D6w�.��*v�T&lt;�D\�{�q��4�� \
�����Q�AT]�x_t���Y����O���������q�D��+��R����-n�d-��qxc� \
�����6����P���`P���k/y19&amp;��k������o�[G�&lt;���]��]����]���x��@��;{g���(z������QvP3 \
�F�N���it�����Lyjg��)����m��1E���_A�x�_(�#�TYa��K��o��\��	�  \
��%$�$0���'�/?H�$?Z��%@��Z��"C�}�o�������e*T�f�2[�Yj%S{�7�H�\\$�:�Q&gt;u \
���\;������L1]�_^{����� �8��fS�� \
��9�j,�bK�Z^���D�INI����c�G"�����|�s��e���N\��f�`��G,N�*�������Rp�,o���]�!�#�(�NFE \
������pWC���fVV�&amp;N�(��0*����390��L�383Md,�����iS�RW�]4]L���+��r�]5s!��=�/&gt;�� \
�e��9�%��x=������qO*�izc���E�?���D����&lt;�vN%��D9G�n'&gt;�h�b�R�2���P&lt;GR/Jmm�'����*���;b&gt;
 �:u����&amp; �r��=��t�P0]�R��W�.�t��S�I�
��7F��#���D�L�E�����.��H_e	��H�S��t�l*�I��swF+��O|���� \
�f:�q�[��w���MGy&amp;o�Iy�_�vZ��|r��$�&amp;lY�W�&gt;�aj��j�u:�+8����Vc�2�"1����_E�����+��s�������BE�e��X��
 ����~h�"&gt;bP'P�Pv���@�@��i�K�������S�
&gt; �S`�����S77�SO4�S_~P�f+�S~� N N N N N N��:
�r{���oG�)�b��&gt;�{�3��������Z�w�Hc��*j:!��&lt;&gt;�w\�L\��l�NPa�0`��������B�; \
0�0�0�0�0�0�0�0�0�0�04�	�����/?C���'1���4�?f��B�L�L�0���[��CN�d���"�	��#d�X�
 ����y5��@�kw����c��������{�gf���0V�y���K|	zg��%���%���E�d���Q	&amp;P	PIh��$�g��P�F� \
      ��| ��8     �nn ��h ���@%�V \
�������������/���K��9���Te\|�e�\��)��#�`����u����FI�g�\����f��,���5���oJ��b�H��s�Y���=m��/^��ZE��������H����Fq�/n���'��T�=��,����{�
 ��A�[��#;K
��6��P���d��5L&gt;��4L








C�0�0�0g^V�C�@�@�@�@�@���UC�@�4c�a�Z�a���a a a a a a a� a a a��wo�M�P����  l \
���=p���T��%�T�C[.�;n�4ME �	�G��j���I��� \
�4LB~����,?�G1T��������P1��W�Q1=|	*�P1��T*��A� \
b����bz��bP1�T*f?7*�#����������A� \
bP1�T*s.*������TF����X&amp;���1��u2��&gt;^7�����fp3�����,n73�n7�����fp3��L��i�L�� \
����������V3n�#1n7��Cn7�����fp3�����f�H����j��I��Q��c�me���.�����bp1�\� \
��bp1?=�&lt;���bp1�\.��Y5.����j��t�bp1�\.���v���bp1��3����]��e!�Q|8�J�i���4�}�[������ \
\SG�� 7���l@6 �
�d���l@6?��d���l@6 �
�d�����m�lg���l@6 ��?�l]�A� p�U�S��A
��q7��l2��]����yt|���A�3.��f~���&gt;��@f�^�����'�����:D@f 3��d2��w������@f \
3�������h�LW~��n+df;[�d2���@f \
3�����������u[3A�f46�u��u���)�a{s��eo�~��?*����^��o���QK5��\{�+�-��'�=':���&lt;������u \
4�b�X�or������n���O�D���{o���(J��x������4�ji�-��'��6�C�f�PY�����V/�B&amp;������52J|�-,�R[����]w0���y0PV)0� \
C���@` ~'�` �q` 0�� ��u����������@` \
0�?�@��a���������&lt;*������2�W�S"���D��z&gt;"�*Jd�L;�(0��y!�R��D]O_]{���c����Z��|6��,M�GX�m�jq1aj�����X��*����6c��HeT�FHW�8��Y�$+1SOl^���kh��u�ygU
 c��{&amp;����.]�'&amp;*��u���B4'��r_�
��������f��
���
9���Ek���2�gbV(e���7+�f*�0���6���.�	i�$Uh����
z�C��Y�v	d�ONO]B��L&amp;��V+����&gt;������P���di�����������j�DD�(�	�7 \
'�N�����{fB[#d��LUf�_���&amp;��$r&gt;O zk�+�'����Z�����8���"����U� �-
Y����q����E�2���3�^a�
��?V�S�)Y����KXw�^�t����&lt;U�,�PBF��~)g2U�u�����7� \
�B��xS(g��T&amp;U���=�6��i���na�g��[�����*Z�I�T�VT��5�:st?}u��*���������{ �
���\
�^�^�zW�g�^U!�^`/����{���^`/�������`/����{�9�{��vc�^?������ \
��&gt;�%.��	h9��	QUB\����Fr��� �g���^;� \
vc�R�����c�Q��I���B�`/����{���	`�g��d�~o�%UF�^�z�{���/��R�%�k'_�t�/�z}m�����" \
����f���n�&gt;�7fr�`����^/����x�^/�W�b7���x�^/������G^�[����x��/��OS]�:,����%��F[rQMRKV���sE&amp;���X.���$s$r5+l]~~;]jwW������w�!�
 |�_���W�+��
&gt; �_E/D���W�+��
&gt; �_���W����~|��_���W�+��J=��{�i����|����_d�+kRY�k�4����g��CH�N�Z&gt;}$�UW7��N� \
&gt; 6w�����L���i��`Z0-�L���iE/Y��`Z0-�L���i��`Z��0�~����i��`Z0-�LK=�r��iD����\��r_�e��j"Y�c�����b�������K�_�|R���y��?|K�W���W�+��
&gt; 
&gt; �_���W�+��*z!|�_���W�+��
&gt; �
�_���+�-�
&gt; �_���W���l���+I�^I�����C�+��&amp;w%
�dW��"u��
 +I2W�9�b:� ����O��	aW�+��
v��]��b6BaW�+�����aW�+��
v��]�����PvJ�]��`W�+��
v�O�]=?v��\ Q��N$|�q�
gjD�o
��F�3p������Vkc���E��Z���N��Y���C�I��N'����i����{�TW~}37g��2[��M6��EV����*�]V���E�vr�w1k??�&gt;G�������U}��-�_m7�� \
E�\T�0 E�� \��~"pQ�(\.
�� E��������E��pQ�(\�nm\T ����GqQ�[\.
�� E������v�&amp;+����B	Yn������$M��[�P'�"�H
��?��]o�0��k��fka�����K��$$��A@I=H�*1b|�w�Mj�
L�Vu99'��FY�(�u�h4~�
��@ �:Qh4�V�
�@ �rU
h4���_��K4
�@ �P�h4|4�'���=����#���,I�]��u�I��b.�D��T����E!T&amp;���N�9��%q������d����T�� \
�0K5��t�G�4��2O����rI���������}{�`�.k���//���~%�Uw���z���c1I������+p8������Q�B�&lt;_�HC������z-�(Iq�=*{'���_�N��n�{Y��^8}�_�'��/��|����N����|�_ \
.��/�y����|i��x��/���; |�{|�_�/����
_�������G���� ��i��`u�f��6�z4��G��1+9K����t�/��;�Tk���S�$~m���:�]I��o���m�L+�=��������24����A�&lt;��\y��!e�G��n�r
 D��cO{�����o�Ff���2��bc�s�i��{;M,����W���!V������6����f^��%��3�"JeaG��T,�4�"}[�M�+�����o=^0V�=����q��R \
_ �K��PJ_
�@�%���/�t��/���K�%�|	�v�_
��/���K�%�R�6|��
_���/�Q�R�[���_�/���K������s3�&amp;d���M!@����f2���t��$~�O����Q�����z���J�i:�6����*x����$e�0��rw�t�aP�n��qcO��m�$V�i����{=��&amp;�nl���
 z}��m"&amp;!��=������=W���(�?=&gt;���������&lt;W���C��������3��4�Be��=���}�a@�
������������eI"#5(�R��d��f������&lt;q�}�~h�dH�P��$0YH2$�D��t�@�!��dH2$�Iv��$�C�!��dH2$Y�6����$��G��Q$Y�[$�I�$C�!��dH�� \
���'�'�FT�6����e���j�eK�Y�_v�� \
�Y�_���^�L���^y��)�����8���:�#Q��H���/��:���:t���A���.*�����&gt;�O4M�L��X\�'�M�&amp;@ \
�h4�M�&amp;@ I�M7 	�h4�M�&amp;@ 	��WhbG�&amp;uo�&amp; 	�h4�M�&amp;@�?M�	�i�4��4A� \
M�&amp;H�	�i�4A� M�&amp;H�	�d��*�����Wi���&amp;� H��OiH�	�i�4A���� \
M�;i2�Z!���������i\Hw��T�Ni4������u��a�Vs&gt;,�"���~y�bt����_&lt;}��,\}g��je��r�&gt;���v�O��A� \
|$ g�S ���A� |&gt;��|�O` ���A� |��&gt;�l���&gt; \
��"|��"|&amp;�o���s�4��;���hI��~����`������Sl%s$c�M���'��c�n�����mM$�'��I������A \
	$|����&gt;�:�����&lt;z����ds���Q�&amp;9��$�l�}+�!n \
�p!��X�Kq*t��GPH�p�B"&gt;�1��������y �0` \
�����^ux���i�'L}:��'�iU��~���.���f2t���g�}���N^$t�'c�as2dS�Wh��!S��M���7�^ \
k�����r )c�����)�@N[����
Y���3���������} I��Q@��TG.lh�a�L)�0bLih��w��y�"����`\�*L
���L�If�b����6��:-�BV���%�"�T����P�Y$h�����e��Hx��P/Kl9`�3�d \
Gc��j0���e�!���D|�@sa�J 3lY&lt;aB/U?�1�7J�  4���2Cya+�����l�l,� \
d���?�YFN�'���h*hW�� �\ ������`Z���XS:W��I����w��A[���-i���15�+����� \
V12hQ���U�[��Mh`�W��r�����t���&gt;_]�y�&lt;��H�bd \
��VN�c�l�zX��2�M�B^�s�`mS������Rm�� \
������r����iL�`�El�f��y*���1B7	t�������.�����$���W�y7�5^F4� \
YT3���k�Dm��Y�����R� Q6D��c%���� eC��!�v�%Q6D�eC�
Q6D�e���G����l��!��(�l��e+�F��L?�l�\D���"���A�
Q�&lt;Q6D�e3ee{�Q��\�.�[ ��\	v�Y�����P7TW^X&amp;f���	�Gf9%\x�����$e��'p�w
�w|���WW�u9W��5��]�6�Eb���K�X,��e�;���^3�H5����S��t�S�����S1Wc:a&amp;��&gt;�cZ�����e��.t���E�lq�M���F��pwX.�.�gQ�Z`
 �R���\+o��Q�A��r��!��	#�
� �$��m(��}�]�|a�����s���p7�2M'�&gt;Rnf�0h	W�4e�d������,��+������HB�|�kF)C"�%�V��Yh*a) \
���� &lt;F|F��a�8�N���U5�����Hqi�'&gt;�#!����&lt;Eq��o�����tk�T2��W?~��A�`���xi������u�&lt;{�
 �&lt;5\'u����UT� N���uK1�,`d������ \
L�}�������+�����H�n�����#�M��4��'���T^sL�W,���n�5�������9h��$(UI��\Y?!�1����(������A&lt;"R=��J&gt;y�E&lt;#�V���9Mx��:����*]P���	��iie�K�
 �*65���Z���*U�s ��z�,v���8����3\�N��Ok
�'��m��&lt;8o��:�����w|&gt;;�9�}�i|kS�_A�������D1�Ws���l=3�������a���������3�T�Gs��~�4\a=;�.��U��l}h�U�R���X'6�BJ�{%*��/�&lt;|'M�i�M��m��+���������*�
 i������[4�����c4�id����u?��#���;"�lU�no����a�#9I�Bv�vv����%�YA�lD&amp;},��QE����U���Y�h�),r�^��I���}��}^���L����.fw5�������b�����*�s����$������$qw�Xh������� \
m�m�/4�)��(t�S����(D�5 ��(tMu�zKh���%5�����c������77+c�|�!����5�v� \
���^?M#�'e�������m\_����w��������{0O��)yb����|�mN���Y^kbTM� j��F��-O�:� \
�����K7����dC�b�c��O&amp;%�lv[���jo6��0M��~����H���mq@���!�s�l��B&amp;&lt;YK���d��wW�� \
2�X��������^{��q��=U'�|v�dg�����W,T&lt;����]������P���+���^]]\�`'_k�P�8�#'J&lt;�p@=�K��*e�*�'�%e�wW�k�x��;N������&amp;/MzA�Z��3�PEx����Y��*����NaB�O����&gt; \
�O�Z�srU���}�z�l��/���u�=0b���byH� _2E������N�7��?:����� \
�N23_9WX&lt;��&lt;|�K�'�5� 6I�*��DG��=��N_%2�����3-�!Lue�~��V,�����o�`/�8��w.&gt;2�y�5
W����8�����(ED2���Hwm#��%gfA�[��9�ef���&amp;k)%���$v�_n���&lt;�������]6hgm����%K. \
x.�����s�E^r�V����1�����)���L3O��&lt;�iZ���y����*�����?t�&gt;������%;��H{}��wbg5�� \
�.���Z������J�����}z���q�y \
�E��f{/��zp�^d]{�a������G'E��!��Oxn�'|��!�\���?v��- \
`�zt�o^����q��������0��=��q�&lt;JM��3{�:9I���P����fg����3�+��3�+�n���k�^�&gt;��q�,*��s���'�*7�C{+'�v��m#y)_��#� \
I� h������\FD�|�=8�D��4�Z�Q���{DB������{uD�3��0��s�Ym�������t'���v�f-����y�l��
k��T��Z�F�]��T�v�jk�}u��j�n_���+scY����dK���98�����M��Z{����S����'J{,�Vd
�����@b�D��R��� Q$�d+����O&amp;��z/��9���:��UKE�h���z;�9M�b;5����T�����Q�;9�� \
�CS�X��8e����o1���&amp;gdL�7k����60H�T�'����`$`�A�O6�X�WT�������M�tP7�;�~3�;��U%� \
����#�"-3n��$���d����5&lt;�xO��R�7k(����P���Y \
P��������|z�Z�F%�n�$���2���^��^V��!�h��rK����yKn \
d��+1�ko�r5�x����j��of�@o���v;����Af�4�n��px�7����s?&lt;��k�;�������27��S7F \
��K#�`�pn�D`���p0F��8��#����8#�`����#��Hc�2����p��b��F��8 \
yF���#��1F��w#�,��{x�L���/�o~�e�������3�LJ7�eh_ye�+��D����)��.�h��&amp;����Z����LJx������n��.��P���?V�3%�����WlI7q���Ns
 :ks����Q&amp;�~/�.��Ve-`c�?
��IU��~_���,�����=��D���%w�JDG��������N�o�K�����Jtl��0��y�k�2�zy����+K�$�����+����[�mCJ���&gt;��[ \
��_&amp;��C�a��` �5�L�I&amp;e��h�@�aR�I&amp;E�aR�I�m�&amp;�)�0) \
��"L�0��n�IK�&amp;-��0i1a����&amp;e&amp;E�4�A���#L�0iaR�I&amp;E�a�;�I3�vi&amp;~�i�v	���ih4��m \
E�N�� h�����\���� B3��@�~e���N��4�  \
��P�����b��`nLP��V�vY���\�������5u�����nkl�LU����t;{����^�$f�J�[��j��Gx�?��4+y$�A6�sm-��:�#�S	Pydg��N4�
 �����B����d.c2a�GI��e�����B�������w�Z�y������S����/�q�Z�������O�G����~����������v��m�����&gt;8��2,y3k�&amp; \
����dk�#�Ir`��q�t��BD�L~2�����������x�V�3����@��-������5�P�C��q��HAC]�"J�(u]�Q�P2���R3D�o�D \
J�(5���R#J�(5���6��R��C�QjD��F�zU7��%��R��G����(u�[D��2�R#J�� \
Jm��F���(5���R#J�(�MP�2�&gt;;=y�n�����R����n������T�] \
lh����x��n�V������}'�6k���l� $w�.}v)��f0�&gt;�r \
��vd��D+�M��7Z_m�������ol2O3�|c*#5``1F6�7�"WQ��RSn�����H�!�V�A:���t�i��-H�!��t�iH�!��tZ�

&gt; �i5��NC:
�4���N[��tZ�4�ie��N+�"�������iH��"��7{w��4��	x	�������U \
��A,%$.D�II\vxv�O������#T���xI����l�4�4�4�4�4�4��G����-����d;���J(�����j_Om�Ov�S{fq���0��.Xf,������j��y�����hu���YV���ht�W��F'�
 ��U @�9�1�7�7���-�
�
�
�
�
�
���
&gt; ��c������nn�7K4��-?�[���-�[U�
���������������fW��p������&amp;s1��{aVk�r�����rQe4�MN%�tl�7�|%��3c~��k���3��`�3	o�B=W�h�����E8�D,
 �H���Q�.n����Q���k��~)&lt;�[�����x?Gu��~*9t������!�c�M�uu�&gt;�&gt;w�q����6{�x6�k���Rq��Y�f]��W��|�X�p��	��j�R�b] \
{ {~�^�{:�IxOxO���-���������
&gt; ��c�'�'�'�'��nnxOK4��-?�g���-�gU����	�	�	�	�	�	�	��?yO��wL3�&gt;E�"�9�|��&amp;O}_�2����dL�YR����yT���H��m�1�M2����-.����\B,�
&gt; 
z���#W]��t=L�u����~aW�M�3�U�2)K�)��Pa�2|����
#N�)+���]�� ��,YWq��9K��e%2����u&amp;���L�r�3�����Fv�Cz��Y��&lt;������Vi�&lt;�G��uv^S���s�J�&lt;�/���������!��o
 �$�;�Chc'z&lt;��x:��8[4�Z�����6\��a+���Ljj��f�h�K�YU�J=O�&gt;�(V��z�7 \
���.Qi,2cWf������Q���oz�l�vv=�������7�k���4^�,R/�������&gt;�����4�� dC����z \
x_�L�1������t� �	�	�	�	������������t�=
�i���V�����(��$����-
��(�A�@9[JA9��r�r�r�r�r�r�r�������{97Z�8��E3�&lt;�t������&lt;��&lt;-����1,�7�(Un$�F/ \
��^�e�Bw}��R��H��P���y5%}����P�R�B�(���bj� \
R*+�Y�������^�]����uc*oo�KN^Wj�E��'5�,N�ZUf�[�U�\���z8}L�`���&gt;�\������eul�p��&gt;�&amp;��������(=	h��F�T3�c��2�����[�w
 �c�G/S���Y�0�RUy�R��������YP/T��J�c��&amp;��Q�8�g�^���%��[ w7�'w�g-?O��b�qFWN \
��AA9�^�FFFFFFF�7� ��q � � � � ���A-� ��� ��R�z� �UFF{ \
########�J�q��������Tv�|W��V�J.��dY.X�y�cFQ^�R����;^���`�W� \
������t|r����7�Iy%&gt;+���X��U�*��Ut2\�R~2�7I6�Ft�Z'j�i���x���	8�O���l�L�c��L��F��2�*YQ��&lt;:oJ��pjOz�����\\� \
�T8��pQ6m�E�sa���}�o��LmkQ�P��&gt;K&amp;�0Iei���:�gl��f���^����f���������M�2��pl^�XGB��W�y(��'^���Gf�O�J\��������\	���CW����%_&gt;�%�&lt;f=�����&gt;�;+�F���� \
x�ao��T�$A�B���1(U�	� ���T��E@�B�B�B�B�B�B�����Ru��R�R�R�R�R��
�j��R���Rm�B����R��@�B���TU9�j��*�*�*�*�*���_aP��R����JX�!D��Q*��p������iTFV��������7
 �`pXOSX7�g�x`y`y`y`y.�������������~,,,,,,,,���4X��CJ�&lt;[�&lt;[~��/��Aj�0�+5�" \
�9�}��R����b���Xq0���b�'�F&amp;�IQ��*��&lt;,�yK�������ayU,����R����&lt;,�������&amp;x���[�����=uo8�������_���t5M�W�~
 �9�/&gt;��tD���(�A�x�C��o�-�C��?��C�������?��C������_%����#y��^-�wY��!� \
����_��C��?��C��Oa��7����8������'��`��#W��&amp;���h=Z����h=Z����h=Z����h=Z����h��������,�W��z�0�G��z�^jD��zuZo,�z��G��z���
 ���L��Z�[�����7�o�����:`������+�����/��P?�o@�V�"P?��C�P?����Q�`�C�P? \
������U��_�?��WQ����~�5��W�~����P?��C�P?�/����~3�{��+�Y�������Y�ICH^S�z� \
�z� �z� �z� �z�^�T �zy��U�Z��=@/5���: \
7=@��=@����m	�&amp;����[�w8�������4	������������P�����;��?�/�o����#�����[u� \
��?���#��?�/v�'��9���#��?���7�WI���_^%��WK�]��_=H��:��/ \
��?���#����S�G���������V���h^���&amp;��hds��o� \
�x=^����x=^����x=^����x=^����x=^/p���x�&lt;����w��A@�3�8��\f3� \
����R�%�h���Uv{�������zU3����z��0����f��^_��x=^����x=^/������K%�&amp;�7��������_���w \
l�����w�8J&gt;�6��fG��|�q����g�����0}��c�����[uD0}L���1}L��]������c��&gt;�����f��n������U���[�����c��F�o�3}����c��&gt;���� \
�&gt;�o�z�|��l5�;P������������;���c��;���c��;���c��;���c��;�n�V��1wm/sWU�����c��;�n��1w3u��/2w�s��1w�s���������l����{9��y�g�[}�r���?��-�����=v/u4�^ \
��=v�c�V�����{����e|v/�c��=v��c�����������{m��������a��������^���c��=v��c� \
�0v��x���~[Q��^�@X�+*���D��y�f���.k�f�av������0;�����&gt;f�av�f��av���]���U�1�����v��]�`v�]���
 u��]��av�f��av�Sf��=��- \
�M�n.��9K���w������x�m.���&gt;s{�^jh��@�q{�^���:"�=n�����=n���.��^���q{����Mgs{E7�W \
����*�w�-�wY��q{u#�7���v���q{�����Oa��wu{��{�'��N�m�����x��'I�H;�.W/�]`�H;��#�V�iG��v�iG�e|�.�#�H;���#���I�����d�L{���0��_a@�P��-�P9%.q
 q�l���lR�)K��3�8$N\����V���c;N�&gt;������iWe���i����N����
@���i��H;��0�v �~:i�C�m���&amp;o�kl���f�o���8z�t��������{V\M�u��S�����+��i��]@k�be[�=�s��q]M~���� \
���i:�y�~��{������Xg��Z�����D.�/�  \
[�-�"��f`�mEyd+!�/(�����k�&lt;���Et����w�z�����:������e.���H���&gt;k� \
��F����JIy�{�~����5�����8L+���� �rK��5����dS���pd 2fNMS(.\��}6; \
.�����8X�T�iv`P� �``P�0(`P	tOK`P� �A� ��0��`P� \
�A�m�������Ze�� ��T��
�
0(`P��0� �&amp;Z=-��D��B�dz����)��:/Z��
(�����/�����]����Q�-���QG]��Y���kt$iR�q���\����Xk��n����~q�j�R�:��at��q��b���$NU��S`��
 wT�L3l�9�����dYY�1w������]H����S}q���/��M'O�3b2=�_~�L�@��rQ�?V���f���G��}�������P��J�&amp;J���� \
wG��Td&amp;u]�r�� Z��^���F��L+t������'ny9�wr������uv�o��c"��&lt;��4&amp;��S�g�Npk������g��a����%�3�A�S�O�/v/�[��0���Ke�����v::
 ���eZ�N�����_Y����XL������;��a�������w�q-�#��f������X,�r^gr[f2	��S��dE=�2��:|I���b��[��mT��K�y \
�@K}1/ ��&amp;�R �h��� �@K��-Z �h��
&gt; �RO? �@K��-Z��
���
��h�]���hia�h��h��Zj-Z
�h)�R ��Oa@K�[���_�'��GM�.?�����e~�}.��AW��W��+���qL \
��Q���2]*�Y3��$?NE���".5�v���TQ�vR_�K X*�;�X7��xD�x/r���9mqJ4�,X�U9��UK�EY�~ \
QT1��������p�e���4�&lt;]��%���r���&lt;�X�qCl��-���%yHl&gt;oB���f����= \
����&amp;���o����f�N��8������3�|*WB��� \
���S���4K}�*��Y����%�$���\,c%�j�H]m��5�(�|�-���J\�L(_����I=i���l \
P���#%�^��a@���/�����[_Zh����@z�N&gt;H�n \
ND�LeE{z�^�H�S~7]�rF���".�R�K�"^*�O���=09P��E������$&amp;�x@�G�����D�Z���L#2#���DU���'�
 VJ����z�.��RC�;��B�I�8_jp[���Qd���-z���X��+����l����h��`������F�R����S�L7*��J�L��6w�I�M�����6*fZ������n���C���i�w����� \
�e�{�Kz6?��s�j��� \
���a�=:�cx��/�����l0&gt;�{��O�]#������Lk�h���*�����O�&gt;��:�������&gt;�X�Y���v�4�):������F:���%5 \
��R_�RhRH $�{Z" 5��RH
 5��R�|H
&lt;� 5��RH
 5h�����
��+&gt;�v-�U��6�@j�v��@�Cj`@j���@j���S����O��[x���u��N.�l���g�U�s�*��a�6�9�-u0a-��)���s��K�`��Oe&amp;��J�`rv���
 ���[��:	����f�)�D���~g�4\OP����Q����0x,�������Z4�U�9Yo�������px�����\4�����)������o6C��\|N�
 ���/
�����\�?����9�s�������?�������9�s��������;������?�k��W��?/l���?w;�?����m�������?���)�9�s����s�����
 �[���]�����Ux?C�����U�7.N�S�u��G���{|��������}����&gt;���}.�
�&gt;�?C�)�������/X�v���jSL�\�}&amp;�]�����dx���fM�?�
����u�z&lt;~��������
���K��:�C��*?�3���x���s��g�V��xv�9"N� \
���������C7�7bq���&gt;���.���_�����f��i�8�e*�m7�.|3Z�W���� ��P�/������� \
��o]�JkA\�M��� A8����BImGR�s&amp;i�Sq��+�J=���4��|E SE�5G��|Yc�&lt;��7@� \
�o��}� �7@�}�
�7���C���}�
�7@�}C;6�
o�\��o�k�o����������#�
�����/! o��&gt;�sw�M�`�����E|��BqHp� n3P)Z  ���Nb��
nKaR�
�)�����u���|��
��7�o ��Q�!����[�~$�/t:�?��)�e�p�2�~,�sl���n2D�����~�������hd���G
��V�t�����4ot����������q����
��a�Zq@+ 5�Z#h( �*��"��V@+ �
h�����F�Z��V@+ �96 �S
h��hu[�v���� ��/��v@���j���S@+ �
h�Z���S
Z��T�^��r�-���i��0vr� \
�������m��Y�������y�6�Gn&amp;��-���[�+���gcr������:v{r�����`����^m��E����;Ix��Hx$|�JE \
G�r$&lt;^ �7�E ���Hx$&lt;	���{�����C \
#���Hx$|sl$��	�	��"��l��y$&lt;�_����Hx������Hx$&lt;	��G \
#���H�(	������o��$�[������g�'�wq���]��z��{����i�y?z��&gt;z��y�v�c�;�=Z�"�#�8��.�� \
"��w�;���xG����G�G�!���w�;��96��S�x���xw[�v�������/D��v����n�@��S�;���xG�#����V�wO���"��g�����{������a���I���&gt;k����&gt;�Z�g���q��_N�
 ��+�~�w;��=�B�������m�N���W_:n��a�$G������A}\��_�3��N�hp�2�/���^��H�b�L��}�l2:����$�S��M��%�=���'W��|���r�}{��W�O���[���Q.M�Fr,���E&amp;_�3�������V����r \
�e����/�$��.t�3��Wey����a��7�Bq���/]�^�@��r��H���8�w�"g�LIT���G��D� $*b��IT�� \
QA��D� $*HT�� Q�~bF� ��D�o|�f��IT����-�D�c�������xB��DE��DEy�D�
$*HT�� QA�b��
���)~������9���c��$��5���t���]����E*��"����R��tu��x)qfgvs���k���7G�v����{1����B�?�aT
 ��)��i/�����7|y��j��l���4���j�{Ww�����;�u:[��W&lt;^_����D�������J���gT\ \
y\~U.�M�4��������� ���I�R�����z��0t5n����|� \
���`41[�����������KUu(�2����&amp;+�H��k�����_��?�����e3z�t,c�NG \
d�4tZ@�7�E@����i�4t: \
��{�����NC����i�tsl���:�:��B��l��y�4t�_����i�t�����i�4t: ��NC�����;��a \
_�S�XPzf[�A�oq�i��i�	e%��3v�N6�G����� \
��'@�����d��Z(h�o$nItE����NUt���=&gt;_U����p�����[���,�����(���pz��X�����T��]���yV�;�as�-�&amp;��3nsA������������;Z�"�O���gQ+����f)���y:n~���%�)��d�*�������� \
Wx[F��� �';��^�{nj�7���wng��w��"�~��E�AZ��&gt;�zi��Yi
������#�5Hk�� �AZ��i���uO?�� �AZ��i��
���
����kimW������������v;��6!@Z#Hk�� �AZWV��}�Ci
���AZ���1�Z9{�W?�Z#�g�T����P����s�v�#����r�i��{�6o�������%}�[��]���r&lt;��j�&amp;}
K�W����Z� d��j d{�� dA�r��uD��!B�,Y� d�=�����B�,Y� d��A�z�A�����u� \
d�jA��}@����;���v�n�&amp;Yc!B�,�� B��w� dA�3Y�
����R�(U���*�����TL�pw��)1�. \
�1�)�4?j���+/K�����z��u8�d0?�E9Dk��%��|]�:�����i���A��C�/r�)�4�^\�"�w~��x�������P
 �� ��������Z�s�kWE���
��/d	��"
�`7��]G�n���v��
���&gt;���~�v��
��`��`�/&gt;�n�
���`w�`7�n�#�nm��v�mB�v��v��-b��}�C�
���v��-`7nkO��*3�))qI!��� \
�/SIXn$�"W0q�a�a��ew��0�`�F�2����s�5#�u}��\l	�]�8_7fe����Q�r	O�e��l��5�����#�bE�p�%���M���"����)"4O4�|��5�mD��U�:W��Rv"��M���w|��x����c���-O��F \
%��L|r���eB���e&amp;	��U��W�K�?��%1S��2��+��z�d�+CR�!������5�IZ����Y]�����&lt;���1�w��R�oAd������S"�U��K^�r�� \
�\���x����CW��5����AJ�U!�\��R��1��� {_ly�� �K
"�e.��i�}e�Q!�/j���S��[g�R������m�m�n1�e� \
;����	�xpS�ZV��he��5KY�Dg(��R���.�������4�rE����E 6nl�� "���W4t��t \
Z_�"'�6���&amp; aE �b��������������%8�r��K����g1ub�;���f�&amp;�/�2~��_L��UC����%�YLK \
s���cJ�Q�W�~au�������.�R����B3��{s�����^��J���G3y�b�������g���]�i+f��In)���H������?�:�����'�v���.d����|K�=���&gt;&lt;s���L��.��w������A�} \
U����Q#� ��#,�����,���g�]H�lW��� \
}�I�Q�����8��o!wa�g�^��0��2w�f���W����ot�lp�8m=t����g�n��������^u���v��;������ \
w_���qUv���[�N����.���9O����5N��9gA,�����I�:&amp;=���g��j'���N���~����K�������hh�d�4X��d�D&amp;sV&gt;��'9R�V��z��X�������
 '����f(��q.��&gt;v)�i������1�r���]���c,2���L)$o�����@��C&lt;�$o���:" y��
�7H� y��
��~�������
�7H� y����7�7$o�����VH��j!y+�@�����7m������	��k��
�7H� y1$o}�C��
�7c��
�������/n&gt;����'�'�xy����:O����_C���'�������'�r���Y�6�{'� \
��k�dLY1��j��\~���=K�����HD���������mdW�V����D�V��;Ew�q���w��SF��`��3oa�lCk�� \
%���V��qZ�����/���f(�f��.��K)U\��EY�6��[��2}�Q�v�d�����vP�"O+xZD6��6L�,\������u���lr�4k��.��t�&lt;�
 �V��bLin�=����O��m�d-��Lh�99��&lt;��yJ� \
�g�!LS��c�"�i�v����;�&gt;��,���f�n�~�h���z�A�� 1=�GID��&lt;;�!nX[:� \
��&lt;a�����\7�k���\��� ��k \
'��E�AH�d����?��9A�@+�/���C�GEH'������p�4�d8u�+���������jv�@\dgH��i8�����t�6m�n��*v�']	�h�U��V`E��x�kA��.���u��$Sj��Z���#���/���K�#��;���� \
�#���z{"�3����^y��]y���Z��o�r���?�/� \
�1b�N�x��3k2����]��T���BS�&amp;jS��wh*��#K2z$�/��O��{� _�|�d)�K=�@�/A��!_��#�%�� \
_�|	�%�� _����RO?�� _�|	�%����!_�xC�����k�|������K�/�!_�v����/��/�F�� \
_�|	�����]o�0�{~��l��k����!!���R�S%.Z���������h|��)��$vB-��Da���3dL_ \
�%��%L_�/�/�N ��zt���m'���~���E�'-TR�x5�g�W�|)�z��y�2j��d�������=��zv����q&amp;�',2Ud3#%��b�]h��� \
7��%����]O���=}����-���D�o�@�]���O��jS�6�~4��B�F��-��3H���x��i�$o��� \
�s*��`vw�lL�T&gt;� x]�������j"��ENpx�.���[o��kz���� �?��fD� \
�o)��&lt;1�����D��'��g�����,\������Zpz4&lt;�B��3���*2o~{����3M������o�H��B��������� \
z�p_�	�!�����%|�N��������������~7����y���������������l�pW}�p�oz�j�N�7q�p�&gt;����A�p�p�p��D���&lt;C���a�p�p��_��]�t���q�sr+�&gt;�=��
 �[{���z�ZNz^H]�����9���5;�fYi��/+��7��Xp�m���R�'e�|������?o�~�vB��������^K��k�Y�~m����
 ����� �a}�")�����iNg��l�s���yv���.T}�4M#�-�@	�))l��K�kb����1n��^_N�O��Lb�t2Md^Z.�Y�is��%����Ij:�h1���$/�(7�66��� \
�{(w�|�|	���Gl&gt;l&gt;l&gt;l&gt;l&gt;l&gt;l��
&gt; l�gl&gt;l&gt;l&gt;l&gt;l~�6l�#6�U6�Ga��� \
&gt; ��������a�M6�7���%`�y6666?Q��&gt;��a�a�m666��l�+v����w�����'���fc���y��h�/�C���������&amp;sf��-�v�2����c� \
&gt; ���Lyu���&amp;l����f��r�(��p�YU��E��8�rET�����L��|��������{t8�r���{���L�&gt;�dVWkk�)���IJ�������'�P)E��t���8�����C���$��[g�kb
&gt; 
���S��������8Q_������a��*�����w���������/~���������ZZ�}	��/��w���������������������������������o���wd�������(�~�[��U�}�}w"����������&gt; \
�������' ~��2�&gt;��
�������-~�� ���A��o�_��_�3����M��y
��n{.�MZw;���Hv����0��{M���v���g���H�E��F��XjT��M�j{ \
gPmPm	���G�6�6�6�6�6�6���
&gt; ��g�6�6�6�6�v�6��#T�UT�GA����j���j�j�A�MT�7��%@�yTTTT;Q \
&gt; �&gt;��A�A�mTTT�_����������'/��+��~�\�6�����d���M�OS��V�:V��.M��_�����]l��5,9���t`)
&gt; 
�M���ATz�y������������o&lt;�J  \
|�[~H������{�($��+��d6O�(������l�V������Wu�u��Z��K�5T�� \
dW��p���N�������������6R&amp;�q9������D��'Q�(�=Y�:Y��������Zp��b����r*sY�w���u�h��TF�W����4��Dy]!Oi \
 =��b����������^�����w�����
���w���Qp������6�����Dpx��
��m	px����O8��3dpxpx������:	�q������j��m����5j��
U��L�����[c{FQ�L���1g&lt;�C[z8l�~8&lt;p����U��uC����tj.u7��C�����N0j|;�o���8w�MI���� \
��o/��S9��U�3�������j��&lt;��ZR�������j����ILb�h�������}��$63z�U���+6?�/h���n'yk��l=��`4��"��^�?�����NNt�N�(�(��QC���(�{���+;Q:Q-%����8 \
6����,��|ru�Fuyx���v�}�������}�Z�/9 Z��
Z�����)�:hu�� �A��V����z�z �A��V�Z�����6hu[~��4
Z}�[���2 �A��+�V�� �i��M
��4Z�:hu��R�V�s�:h�&amp;Z�:hu���V�)1�_��&amp;�8�?0���]&gt;}���D���_���^�7����Y^ \
��Mj���^�4�P�L�8\�4��[��MV����oB�I������8� 0��o����S�_*�NA�VOS��� \
����okX���&gt;��i*�X����_����&gt;�f�5��3�:U�li6Z�Z�_� ��8q�9�s=7p�u���, ��M_ ��f�C� \
�=�[t��[���d�&lt;�*�;&lt;h7�e t��{(��](=�{(P���NP \
@�2e���~�Pz��2e��(��P,����C Q(��BX��2e�^�@�2@@hR@ A(P @� \
�@�{�P 4a(P @�2��)wq����h \
,T!����������^�zad[(A���I�x��S,���6hQaF������f�Te���y�zF���5���Q{�E�������i��I��k��n��
 �Ojq"�:4���D.���9�	3����y���L*����0��L�9��!����9���f�C������&amp;�����x���jh}p�v7 \
�=�WCf���d���P2$d���f���s��C9�]�y5�t����4w��|H�E���:��}&amp;���?2�MC�G(p�d�A����Z�yD��`���� \
��4�W/u��v���N�q���DLC�(��tt�����������nh���/�f3�Y=]I��� \
��[��l�C2Kh0����?,�K�l�S����G?k�(�ZS�3��Dj�)��7�P�9}f1O�9����G�����*g�����1�I \
���������5s0�~�9t[fU��MLve���67Q?�cF��Z;������8��6Qw�������&amp;��3shf�=f����lFx+����iY' \
���n�9�&lt;��L)��*7+��"bN���?���jh}�������y�q!s��b#�Qu���0t��q1 %�B��� \
��E�k����c��7S�gB�D|����y�M��*:TuM[��r���1���*RUH��#vy�|���z6���}���� \
��w799���&gt;�|�OM�B�&gt;���Q���+�W��X^�����W��y@�����._�f��zQl:&lt;~x�}�Zx�=�xx���&lt;��N���������?&lt;�~���{����?&lt;~x�����-��������Qx��� \
�_�����^��O��oR���Ax�������� \
�{�����7ax���������&lt;�-P��a�Lk����C���2_]e&gt;�=�u�[���Z��,�&amp;�}.�&gt;���gP�	w����g#,cw&gt;�&lt;��`\}e�._fRi�+��l����yT���*Sf	O����B������� \
�0u�L�}���rW�+��$Z��V���^=6AKe�&amp;eI��.��.fB������.�LS�������e�%6���tQ��f��R�8v�`� \
��_5���F��0���J���ZF�LZd���!i��+��J�lv��=X{��`�����k��=X{��}���`�����k��=X \
��8��oG���*��k��}��=X��8X���`�����ok���F)��`����a��`�����k�{8`���\|�v.�0r�{��1��tA
 ��W����9it4��G3�
�eZ��g5}S�e�q�&amp;n��$N�B��	\�/_j�z24��:%��y�r���M���3 \
e���D�"�Y����2�u�GX���{�ud�.������M����hk����J3�$�zm��U��+���0��|?�X	V \
N�X	�`%�J��+VB�|X	=��J��+V��vnX	���l�a%�`��v������� \
�!��6���T�11i�v�%0$������l�A�J�7���XR ��}�*ayo��9T	T	��T	�8U�&gt;�*���*A�J J J \
J#��s�T	T	�0UUUUU \
�����*��S�_a����K���q�p$���Q(��^���s!&lt;ub��;�����Pt������o��I	N:���hcg�&lt;8����{ \
������}���G���mg�����|t&gt;:��������|t&gt;:���G�[�N��M����M�������at�act&gt;:�S:���/n:�a���G�����M����|t&gt;:�6���G������|t&gt;:�pm \
� 3V�3e'_��"}�!f������7��C�o&amp;��N���O]e&lt;	"���v�D�����"����~d��ld?����G��9d?����G�#����~��id��SYd�i���?��2��7l��G��}JC������C�7�"�������Zd�i9����G��f \
����~d?����G����*�]W�� �%�G�H���P��	���x�P$?������v}_\��( 8�x��I�x% \
�&lt;��J��g�O�8�/��i#0p����J��;���?�%��?��H�kw-�H}��z5���0�H}�~��wz�@�#���H}�&gt;R�o��o \
����G�#���������H}��H}}����H�lR�o^��O�����~�R_D�#���H�0B���CF�#��a�&gt;R���G���9��:���B���}�e2z{s��P}�b�J�kp�5�m���6yC���� \
��fc��r�E�f�����/��|��|M�8*����v&amp;�q�F�+��0A��*��d]��x���f:�H/o�������w����������D~�&amp;����&lt;'��v��;4M������i]�#����W��\�`��a�cF�R�j��y&amp;+�e��ZX8F(�dv
 ����jS�ED������:�����������=����������\m�r�I�I�I�I�I�I^y.�������%=Iugzzzzzzz \
��azzzz�|=	=	=��'�'�'�'�'�'�'�'q;�COBO�{�W�Q&lt;��;�zg���LN��R�/�������������{��Oa�^�N��K-z�x:�j�k���.�:o�-/(�#j�x��HO|�=dW� \
�'���_���}+��4�-,�Go18��yTt+�`LU3!d,~���Cr��` \
�t�����I�uD��PU�|V=��������"	 d d��"���2X�#d d d d \
d�����8��+�+A��	T�+������LkQ��9L�I[u[��0� .�|���dw�Nf77�aOm ���@�&lt; d�9Z \
C*d2��d�q C^�0�2�A ��d�4�����@ ��dJ��r� \
�&lt;H��=�a?�l�n��p�3����l�UH�x�P�Z�`�\����6������Q�	�E��J]O^\{��k��{+~P��Z���\�b��h�����/���rm��E��\�����u�E-��5~8sQ�K�pU��
 ��moq5�X�J]�~|Ml�
;W��#�x��|��x��vu���"2���l+�KcTg�3����}'�=&gt;�*�n
���Y9�c�P�U#�F�w&lt;���������f���OMd�����w \
C'�;S���H���~�Yu��e��g3�(�m�����+'|P��$:�O�k��&lt;�W�tF����J+��][�^X���]I��;]Y���J6B[N��V�5�j]5���r����4LS���	�� \
��/.�.�&amp;`�t���*�/��	O:���3i|��g��"~L��$m��?���q���Vrm" I�������u!^��e���� \
:�l#k5��_���|���AH�G�� \
��]-�XK���}�Z��tlVb���n3�o��#�6�89�'%j����l-u�g�?����������&amp;x#&lt;��mhPO�?���5�������7����#�S&gt;�(
 �� @a 0P(
u��`(
�� @a 0P��@�F1P�*c 0P(TL�� @�"������ @a v` 0P�Q)
��1P(
u�k8(�4P�V��(T���"*�=�Qy�_����)1�|���R�LM��k��"G�&lt;�yK���U���d�*�es�����&gt;������X@, \
��b��X@, ��7���X@, ��b���b���b��X1���8k�6���-�b�F��X@, \
Vb��X@, �i����Xb�=�G �T���*%����?�V��I)�4�i��4�)��4�} \
j;NR���E�|v�z�;��n�TO��zB=��PO�'��	��zB=����g��	��zB=��POgyU}�3����������'��	��zB=��~F=��PO����	��z
 a��	��zB=��PO����� \
�POT=��QO�&lt;���QO���'7=��&amp;��������zr�������������������#�S�=��	��xB&lt;!�O�'��	��x:��/��	��xB&lt;!�O���} \
�v���}�O�'��)&amp;B&lt;!�~G&lt;m�F&lt;!�O�O�'����	��x���'��	��x:�5���{���4p���&lt;�-��7q�xBa
 �R�dL��8���$N�f�b������eiV���P&lt;�7��y'��_��KnX'��CK'=h���^p/��^y���^�K8�H'��3���&amp;aM7���bu�^}�M�e�����������$D8!�|� \
                ��
!�N1 i�[ 	��pB8!�N'�/�'�&lt;� 	��pB85k#��'W}���"��V�p2}N'w" I�N� �*�p�A� \
��p�4 	�d�N'� 	��pB8U=N; \
�F9�p:'��/��/�w�P6y����P�����'e��Ke��#eW�dQ6�	F�\� M��7i���X-u$Y��� \
������epj.����0��lJN�z���~������f��m]�rWf�9;������Dy�e�+���K�����e������j�bD������F{�
 6��&amp;=pb8�g81�N'���_�qb81�N'�����pb81��|�su������ja���0N'v�-
'�'VN'���������81W:N'���5z��pb81�N'���mlN'��svz�N^B���������e�&lt;YydhN�]BI��uvGc-���d��g37����*� \
����E��d�f�WGU��|�D����f!�#_2���+V�����WRG��^�8&gt;^��b���VJO�wG�K��s�D���Ff����0������\g�|N�����in�d�Uq�9�5�J�`��kb�����17��??����w��z���Y)���E��
 ��K&lt;^��� ������H���dUT
N�B.�&lt;��G���\Q0�1��F�-/�5��@�8��eg$Y�D��,���v�E8�� Y��A�]�)� \
�S����z����j�Q���y�'�4Z4=�,�G�"���l�jZ��������49Z�cW��x"k��d�\D��4����w���2:�* \
��-�bI[��=9�ZT�HV��o��$72X��NF���h���/ozO^�2����G6&lt;�V����l|9�SMTl�h����7	���N�B \
��BvV����'�$],�~��k��e��W�|��U8�:Xn�E�,6��q����!(q������-����}�&gt;q��O���|��g�����}�&gt;��q��l���&gt;�SFq�g��}�&gt;�O��;����O��Y��}� \
�����}&amp;)���2��Y�q��O�'����g8�O���&gt;�7���8/��?���E�����G[��� \
�{:b���Xf��|�����e��OH,������{yFb���X-�qJb�tLb��{Nb�Z��,��U�[����oD�t��������1��1��/��yP+�@,��t���b1�@ \
�� ����b�fm��# ���Q���jb�@ �N��8@Lv�U%b2��bI �y��Ua�@ \
���@ ����%�������0Ss����C�03j�X�Yq/Q�Yz�H�Y���P'fR�1� \
E�l8�a��(��y�S�0��A����3�w16����`�0����``���-����`�;���m(��^`��N���iK� \
������n��5�N���'����)Y��(W��`C��&amp;����(�:&gt;O��o�O0XO?��#�`0�����i�	���s	���`� \
�`0������|����`��`8�`0��#,J�s�`0���l��#�`0��n��`����K0�&amp;�|�����bFp3Z���]Z����bE \
]�bE�o-V��������A�X�`-Vf��+\��b��M��f�X�a${+����@���&lt;�y��3&lt;���4r}��[j��D�4�:M��whZ���������=6�r3��)'�����K�5v�������s���y�� \
n�]d=�j�&lt;[s!��oZ�������a�����g���\��a��l3��eKZ ��FwW�73���:x�����9�}�q��RY^��R� \
�n������H���u��e���y�BNP�,J$�A������ ����)������)P~��� \
�,]��u�l�V����(	��i��������c���~�-m�ITr-�}z%"2v��Vv�j�N�d�����������",���X������Ns#�6d����C����4���A \
�����������G�� "��U��H\�.��b1��K����
@���0�Wy�{
���f�������omB6
�&lt;��dl���w_�|YK��B{k)�L�gj�
��-\�S�4�iY�l�O4sn���(�ql�g�C�j�	{��I��ol�e�{�\/Y����\��`x-�$�c�W�3\ \
���p������	�3\r z�����fc����Z�r�c��v�Q��Y)&lt;�J�$MW��soX�&lt;McXFFI�.���F5��l�v��V� \
g���x�!KO\UP4tk��0�y����2�z�j3*����z��Y��,�+��&lt;��Eu�����j�N.��E��y$�Xv&gt;��������f \
D:��q*['����#������5���=1�5�]��i��}��^��,�N��X���������L6��'��X�m�����}� \
 7Q��OS�� +TV�1�6��������&lt;���jio \
�����'(k�4��Z��,�@�Z'�&lt;v�������o����8��z���_��O����|�.��yx+`l��K5��i�.o���:� \
�N6�����crm$���ji9L����8z&gt;��{6������&gt;�����?����������}��}:�9�|��b}i����dS���(`p' \
g�z��Q8`����H���;�vI��Y7	Y��Isy&lt;gQRw�{�����R��������W�/Gik#Y��o�S;v�8�����Y����6��(����B \
����0��c{+�������I���Z��V\`7��������l'f�z�2��������g_�����2Zp�������`���O��R,�� \
[K��&lt;�7�n�H�8)���AX����A\��ES�4-��e���\�4��@��L�r�;�S���9l�y&gt;��Th�'h�I��*����������r��t��tw�./#��~��c(Z��y�Q�
                
-z�	k�����&gt;l����yq�����,
+�lIMu���e;�5���]��f2^���O�NXE_�k��Ay2���;|
�Z w�P�7�����}���zv�AYkvpp������R;�j����
��i�"������h4�n�����\��]���u��;�Vq��Y�z���*T���:��N����7����v����;����UE��c���XU� \
+:�4���C68�?N��@,P5��A�g��:��������.X���s���Vg�|����d�wG������xw="�Q�;�w�)�����wG��(����xw�����[�S���~����Q�;�wG�����N�M��t���R��mk)�]aC��(�������|�w�
 (�]%A��p&amp;���xw����E	���s���Q��*���Q�;�wG��(������xw����)��U��v������=r�������_����p|5rA�a��PE1k=����U��p\��?_��y�k]���
 �&lt; � ���?���s=*�K���~��Tfo���0j����LG�7�]�e�]�rq���H�������D�#~�{FI���Y.SZ}�Z7�,"v['x�BjH�&amp;G���NSL$���9�
 �`���{�xD[��l�H�a��Q���&gt;���'��{7�o;�h��s�[�"��9�Qq��,�Jo i�� \
�B�5�&gt;�����_��	�2/��-� ����8���m{��o���
#Y�p=�����,�3*Mh;d��gm#��y��"��^E"����YJ��'��$��v�c�(��t-��������+����3v��n��V}�*�{�7�k���Je���MY�tWw����\�B� \
��q�f��n���M?�x�@jU ��&lt;���q&lt;����o���0���
;z�%�G�(���j���X�~-A&gt;@W�C��+�+���J0��K6�)&gt;�T2���&amp;�G�Y�����2 \
���z�u���(Y�qi���&amp;DP#}������H�WP�h���$�EvB���F�t86&amp;��� ?� �� ?,J \
�dAV��h��a����5l��B+�R�DyX�BD�qC������4"�d@�~#�'�]4���]�����u'�H���v��sk����� \
9��Frt��c\7��t��b$G��h�7�ps6�td����A�&amp;���&lt;�a�~��*k��61��L}��J_\-Oa(]�L��r��J��9���P�ap�������*�5�{	����-%�]���r!5,�*X��o+��+���X@j�����BT��B����z�F��NT{o \
���|8Q�D�s���5E�NT;Q�D��NT;Q���D���#���v���j'���MT����v�&gt;Q�8���mk�j/l�j'�]�HT��'� \
�^I��3�j'���v������&gt;���j'���&amp;���v���j'��v���NT;Q��������7i0�|��+�&gt;���{��y���2����(�;Q?3�����������0:�cxy�X�����O��YD�q�B0��M	nc=��0|5\d�g� \
�W*9���Jl�w�p�V9����/=b��%���j-�2KL�=���9V���sv����m�8=��Ap��K �N���� \
�X���m[���w���/On�4s����a���.���y��L�	�i���N���Y�O^(���.�N#v+��0��_�&gt;��V������os��G�Au�)����A \
S�����]%, ���y���c@nF����C��l�b{7��������a7�������@2�Vj \
4�����K8U��O"���*NT�������"���*����"�������~DUUETQUDU�����xU��'� �U�m-QU�
QUDU���R�DUa��*	��p&amp;QUDUUETU�U��2QUDUU�DUUETQUDU��=����"�J�UuGT�&amp;s�&lt;��O&gt;���� \
n����6�w���������z�\�&lt;�_�l�����0���������������&lt;`�J�f�f�p��a���F�1A$�r'�G�j \
���:�����:8���W"�V� ��l�fI����A,�5mU/f�b@U=$
��]-�e��h�?�D	�I���y���wB��3}e'|���{g��4�������~����W��q� Q���	D \
j]�����I5~�8a� Qoo�KnB�&lt;���3���zD &gt;���3�� \
&gt;���3�:���&lt;��g�A|��n�������L_����G�9G��LU��g�OD|&amp;G|&amp;.��LS�3�A�g�A|�!�2����3�a�g�A|��g���3�� \
&gt; &gt;�G|fB���TK�W&lt;�zl^���|�����c�������3��}{����������v�Q�u�&gt;��n����� \
&gt; &gt; v�[���=�����GC9d�P&lt;�!{��=��G�G�!{���G�!{4��������=B��#d��=����Q�������Q|��s��Ue�=B���Dd� \
&gt; &gt; qd���5U {D��#d��=��!s��!{�F��#d��=B����� \
&gt; &gt; {���G�|d���5��x�e��=��6W���.z� ;
&amp;$������@����:A���D��T������9#�x������p�9����������|�=*�����g���z�z�Z�O~��?��y�Dk�����Q�R�8����?������ \
9g��,��?��f�����T�V�!�9&amp;v�e��Q��:b�c������f\=^�b,�8��[&gt;S���2N����:&amp;�\��~;� \
y5��hy��[r#������FfD?��}���{�z$��,����j�����&lt;��_^���&lt;=�S�rn\�n��IN��kb���/�����e�9�FX/����ry��\?]�����zuW�����}\��}��_������=��O%�
 ����Y�+w��^�&lt;��^����������Z�Au���i��q8���J��O&lt;�[�����j��9�sy&gt;}�c�6�	���"���S&lt;#X6}�6���f�$�����Q��wJ����jg[K$
 �T�5����$��Dn�$�g9�br�lB~��?M���fZ��1Pn����}��q�m���.7��=&gt;��&lt;�'���T���6D�t���{�v������Ts��L�� \
u�c�����\m6\�j���(�|���x��8 	�@ \
�}�3�t��;�'�tz�nYG8��r��0*w�+Exn��m���"��XQ@�U)$�U�,j� &lt;W��Kd��q��bB\B
��E�3�^&amp;���p���H&gt;h.��k�[��dw�)�q}L���ds$��V��5���P��z����?c���6��� 1%� \
o����w��=��bG0���wK2�%9��������-�4a�U�	�H,����j \
h��}�m�.�%�l�(C�.�����T�Dq����m�A����a��`�R�7������	w�z���Tzt�7J�&lt;�I���K����p/�X��������8��/
 q��n'1��Nr����1�;������l�H�6\i�XzHc����(��NR�TRIU��������x&amp;0����@����u��f�j�u-^%A~��dR�T���d����TBI�!�q��TZC���#��sg�@�fu \
���0� ��~E5���&amp;:�vI ALH�C��a?Z�B����B�3�H���� \
��[@�j�������	�O?�G�0n��k�Z8�$����Lj�MZ��u��J��`�U��3,�k�k ������JI���	��
������F)������a����5���^�zp��\F{#1����
�&gt;��|�=��7��i��h%0��^j�[�4Xb�7���Xg��
u&lt;VSiJe8�M{���&gt;���09���s]|�������1*W��9�|D-��|�)�����y��\����������9vE2�y�Shu���|&lt;�%�`I}
 ��va��\�s4aie�&lt;O$���N�*n�8 \
��0}�'Db,��/Q�Fx���M�~�nU_\10���{�t9��\���2	������8n�?�r�8�W��t�Y�3���[�Gf��� \
B�wN1�^�b��_��c�9%o�QK*_���T�hz1P��?����S�����Q���}|q{��I�Zi��|V�b����n���������m \
���$FpKg��O(������gV-��SZ0��I%���J�}��l���0} \
g^�\2.���TRI�?c�����s�&lt;�Z��-(�?x�9\�$�9|��@�b�����}�(����"�Zi�"��� \
��B�	��T�p.��'����[Ih�����$W&gt;��2�����BD��n�D��0���NV�U��f�+P��M��3���������p \
K&amp;t��)G��'0�f�b�����PJ��V|�{���%�|k&gt;z�Kf$7���Qo�{0K�����k�;����PG-������������Rs�74� \
W��La������2����B�]��������i���v��0����YsY�7=��_����2�t ��6#&amp;�J#�{W��� \
���� �Lo�N��6�1�;4(�8�E�MZ�_������X#98 \
����6�h/i%��J?�/����&gt;��8��;|d�{���f�5������/���#���l� \
�PPn����d�z27�@O�	M�����L6q��-j&lt;Mg�k����Y�a�G�)p&amp;��S�������5��������oa���M�Pp���M���8Z�x����-�8
 �����6l�j����[�_�

��a�/�$3Y� �
c�A�e�?�%Q��r�l4`����.�g�uz+��_=��VN��Fo�l�|�7��k�����q�[��� \
��NS.�.����A��7bt�f�nYkd����xQ�m������O�Z7{���"G}���m�i�Y��������k# \
x���1��HwM��:��������������j���p���?/�[S�E��HC.H�������D!��Z_� \
��&amp;n���p\�{�v�����8K�V2�[l-��^���]\\�Mx/��$�3(k��]8��������2�5�� ��a��  ��
+
���!�q�V��w��/��?=���W�����G-�|�R��M��'�/��s$2���F��5L�F�mYj���w�����V�����E�}�,���&lt;���ls/��q�N���/���n�"3
 ���d�#�5�-1#���
[M�_�� ��U�F2�5���#����Oks"����`�����~U�i��8��[�����MS
y��/���5
��`^�[i75������ ^Lks�����8i��8��0R����mK5y�I�0g���� \
�&amp;��}��V&lt;�����&gt;�������o������!�&amp;���[����O�8Y�[���0��2�&amp;��v7�����}����jE���4'-��������R��������4Uju��Y`-�?����� \
T������wx�ts�&amp;���7)K����:/ � z
�����[�t�l���g�����-�	���:	'RO \
4g4\��9&gt;:Y�m���Z-�Mf�I���`LZA��a�-x��:�������o��4��$�\�I�_�,�n5��Sv�N��7L@w}����{i1�o \
(���th��M���~���'�g�mx������i����r&amp;���no�(������� ��B������7�����^�{#�� \
2�i�Y09(7���D�X��W���"���J@�D.v��&gt;�����D�d�B���!T��(�y��[W���TmG3 \
������6��qm����H\���o��i�K�V����`r�CO$S��������l6?��� \
�A���y�����q��w��]���	��%�����kKu�s&amp;�-�,����B����i_�e���WW�,�����E�&lt;��U \
�(��0I�u�1������l�4�S���1d���q�L�i��f��v�Y������d��g� \
�CG@�4U�^�ONN=�v�&gt;�����Y�y�{����R��_��AF8�v�d��s,P������]u�t��5���w�+�-��\��'[ \
f�i��������:��c�:*L������2e����P]\��k���qO����6-���G?����}�������R�j�[GW��A���,J1��&lt;�� \
n��l�7E��s��6�=��x��$;r�\��,N��K�������i� P��s�'4��,C����R7��|���[��-�q�� \
&lt;�������e��E�G)���&amp;FFs`qQ�m��f�:�!�B�������Jh����r�e���0D��`Nav�j���1��q�(�U�b�
 c��4�2$�M#�7����6�1���4�U���uu�aG'���s��ua���ib- \
��Ia�9��e��B�����j=M�y�z k��8�`�o�]O7!��?��e&gt;��6 ��*:���}AB"�3L��,����g \
�7*�P��IWv� ������=\?�."��� ��^���]�(qU��~�
��*j�z H��1��[��ns�������&gt;J�6�����XZ�������s :	�&lt;.B%��n
]�Q%@���(Z���|�t+������au�p�?+4p�p�X�����}
c��t��B[m��]I���L�]�@����V+�����)BC�	������y\�f��ROB�:���}H��{��"P&amp;���Ru��� \
jq�f�!�"{r 3��`F~c`�2���P0��x���ly����v��m25w�D�!��Zt�N� \
�WN��6�:]r,�[�~�����[��'C�4�s+G�=�����D� \
�l!����o�as(��a�Nf7Wu`��(��r���Dvx��t_H q���:���d0�Y
�`�����4aN�V����X��.
�[#��,#d�!d�q �^�J��tK���%��KZ���x�w�(�IJ��Ijs�{�ee2����_����t��';:���W \
��l��5��uT��|��.����]5^q�d�~��RJ�����e�y����m���M&gt;��e*�FL�q�n����em5EW`��A7�`���� \
��X�J��D8�����Z�� �&gt;`2N����U�'�M�!�J�N^�5�]s�j���E�����Y�1{�g�L��x�]
F�C��,��H��Y���R����X���J&lt;�I�e����B������0�o}�����D3���$��Qi4C�����R��G����\^�*j��� \
���*��U"�b!��/���u�l8��	� \
e:N���8����m�&amp;�k�����^�t��`��UW-�$�v�b�����.�R�g����4�'��4�\*�&gt;�&lt;�9��7t����"�N1s1x0�������ZJ�����nO��8 \
�R~�����1�-��V?�A�J���G|��� ��h�l�O���FQ���|A'����0�3[��A��T|JP� \
�Q&amp;��Pe&gt;�U�r����^y����]t�U���Wy����4��q���%��S���J�$�� SnT�9�P���� \
�){��-s����?�2����������bqxG���\S?[���(�WJV���|�������^�HL \
~��Z���w+��wL���+���:+2��o�  ����ik&amp;d���'� U��h�����\:�{��8������Q \
����)CV\�d"�1� �EV����2q:y+i��\��*�t5�\��&lt;zJ4��r��p�E��\ws������&amp;]����������
 �P������U�a4B\���"b����
+�8P�����,�b���`	{,��G�"����5�n�������&lt;&gt;(��:���r����p��O��*X�����
�g�K����/����ki�Y���!8�V9y$�i]H.s:� \
W���)��$	��yLF��4_����0X$��C$w	���6y��]��9���H������_�� \
&gt;�fF��������x@y�/�����Lg8k�:S�^��� \
&gt; ?xc�Hl��AA�����9S~���"Ib����$�i���s��`��y�� \
&gt; I�T�"Q�&gt;V�~�a������#P�5��������=�;������6���t�������T�^�=�8��e��p�`��\�I��t��t������A��?��5_���\���wX�����:l��=�
&gt; 
�#��
&gt; �y�������'G��U���o�2��3H�d$q Q��&amp;j#��	`6h!�*�J%	�&lt;���
�����ma��&lt;�3�( "l�e��*��RY4(�*���h9O�E�:�Ph��,?8��;RQ�	e(���$}�vq���z�����Yr�AW(J�a�=��E�U�}�;���b�8I,��aP�,,N*��f�����R7�P
 �&gt;P(������B	(��B	(��BU��J@�J@���IW�J@�J@�J@���1��B	(�����BmkP(�P(� \
P(�P(Y@�J@���P(�P(BP(�P(�P(�P(���G@�J@����B	(���P�}r��k�Hu��:|����]����M \
XjE�l���$E�'����cS��m�u}%����Y�LY�"���K���	a�_A���4&lt;��q�I����( \
��eZ�v�	8=[��u(���D�g����Fm�^z@� \
��@�@m��"�Fm�Fm�Fm��Z�/�6��Fm�Fm���[m�h��/�6�*�6��  \
M�#�6h�@J@� �6+h��h#�6h#�6a,�6U���FmVd�@�@�y�3�@���h#�6{mr��:H�pH~� \
�&amp;�� ���-��|�F��'ys��� ����2~*�c��L��{�I���}P&gt;$�(��|b$�Y�Q� \
uB8c)�����-�A�m��-YDi��Q$��Y��� �&amp;��d&lt;�s�?����[�[�����,�x�{�s ��&gt;��
��?����\I�?�lm��_�rt \
��::�����4�'�t���Y�zaf�B��,z^`������rs?d����hr&gt;i�����{����������E���S�i��x����w�
                
.	:@��.�*F@��* |.I���K�k��$�K�$�K���+�n�) ��&gt;l�I�;� �rbF^��dt[N�����d \
��T��j�����vCX&amp;����n�Z����z.��\�������sI���Kz=��z.��\���$����$A��\�d��\���K�W�z.��� \
�Kz=�$+��K"���$Nx=���x=������^�%��Kz=��d���YC~=��z.���Kz=��z.��\�����������sI���H��\�����y.	�c9C��2��,_l�m�{��$���[Dp�Wi�N*0���2^�Q�[� \
�0/z��7i���������D�sWU����2�������K���,��#�u�(q���r�j{�E^�q��|��i��[�O��T���zzO��*#��Mq��SR=�1([1�`�J��7���N��k����,�� \
T���f{I� ��Q�L������XM	���8��YG�e�G \
��KQ��tw�Kg�HO�aj�E8N���u!�3`�&amp;������8{c��"x \
������Q���s	�KJ:���f��S��&lt;&gt;JX���,���)z.��T���&amp;���~��[V�j~Qm#l�Y����H	&lt;�5���YE?j \
Ca���^��(%-h�C�IT�jg�N�SZ*���C�j2���1km{���&gt;\G������|�����kl&lt;�%��ys:��(�� \
B���_�	C��f�)V�����o�w��O���F�A�j�}����m�oF�p���su&lt;q�8���J���{��(;���9��&gt;��?���J�/�x}Np���vhsX�\�P�8{��j�)d�y�s��1J��)�0��1� \
u��W�*����r&gt;���5��E[�ry�GVQf�d93�%�~�X�&lt;�C \
��������]1�u\"���d�)�,z�2�@�\\�,/Id��yq�����������r���(��0M���D6=�!:�����!�\��n�U�,��'���2�m�,[.��y��f+Id-��
 o�m.����G���G#��3o���v��P�����eVM�%����OaP��v/e�VA�1s���:�|��e�����W,sYh��?M9OI����Z�,�i�������eh�t�Y��y��� \
��q�7��)����������� nH-�����&lt;��.�[`y�RS�6�x����o��E�~K�,V�d�? �
&gt; ����� ��-�����~8�DL�1a�
���v�2�v[��l&gt;��C�_T �;n��#����,���������[
���3G!�lz&lt;?.�t��3��$�����@���0��%�lz&lt;/.tnGs��#��������i;v&gt;�y�U�� �r9?:�e�Z��x�\ \
��\@H3:L��L��������*�w�����_b�n;�3[a�6[��� \
q��'��L��gI������n^�����qB("��~���0�A�;a���o�9��;�#��*NSp�eS=wQ(=��&amp;Y����	9(k�ui��3J�B��)/&gt;��l���i�af;���k�p�^�UN� \
he]���q=u���)�0*�a�L��t������U��� \
VA���U]5���0��.���vM.���4��PsTn�8y/�W��*�OTU��xZ \
�2��}	�h�n:��:,�	�VDa���`@"�/r�=IYYD� \
�H���=�0�,IV�rY��$��v���_�����J���L�y��(*h����x�] \
��l���&amp;\�y���%��\�&amp;)��(���8\�)���i����|��rK����5�$-��[kz���|V�M�\�w����zJ*&amp;zi��f�y�f�yY�� \
�K��-�e_G���Q�,~=C��pK��[�I6���u�&lt;M �L�0iJ�Z \
���Da���M%��M�d(��}������da�_C*/YHer������d�C�ZDIi4h���r�m�8�LA���^&lt;��{}�?w�] \
��k+Z��&amp;�E9&lt;�S���ck&lt;.2d��,d���)�^�$�u stkrY �L���W&gt;l��@[�pAU \
Sl������b�1�H�xc\R�)@ae����I�����"����Q\�P��45�[��Z�$�%�pc���E� /A!�3�0u��� \
���2r��� �&lt;���z�E�� �	�=0 F@-���5���`^�)6 \
\�G`�b�b���������l��a���X~&amp;��`)��v+&gt;�Q��d|������(��������3�(`&amp; \
�W�`�)Y�[��������V�C�w$&lt;O��!z�C�X�!����"&gt;t�x��n���3���4J�b-d�FT�p�n����HA�YE!mqIU�7\�1���/�jJ���" \
&lt;�%�����2}������W�fD(f��g�.�&amp;B'�/�Mto�V�0�� Sf�M�g��P��]p��Y�%�z5���
��i^�@j���]a[-�5?�=0��'���\�g�����s9XUy��e�S�B�wq!T��r����Lb:�z�(x�MT7&gt;Sv�\��S�D���6\�@f\�Lab�T������UUh���4� \
��t���Pk0:si���tF �JZ \
�VI**A�-���-mP�pkR���L�$��_=�x���gQ�d0@�������'+Y�����������R �T�'5T�� \
NKP�D�O#pA���w�3SW�����BD�1X�I��R6�Td���E�e-tur��?�\�r�[�|Q�� \
�P�h����"�Q��,4�aQ� :^X���X�`��#��z��a����=��]VA�����) �� \
c�]y3�pk���z�G��BUq�N���f0�-&gt;�����j�_����$��~&amp;���j���G�Ra�R���h��&amp;�44��Z��r����hj��9IS.�����D�m��,���� \
                v����gO ���d4��0K��,�x�E��J�]�e�!���L��"�J*���df�l-=��z
-����z3� ��u�7&gt;�Xn�������z�%!���!��%R�
P|�*�Z����U�j�+�w�%g��;t�[.�G����3���w��9C�3d�0F[��-,�e[�dPi�������e]QRh3���4J	��������6��A����6�?����G�	��� \
b���S�|�����]�g�P���zc���]�Q��!�/6��1`������w���%r� ��e���2n5 \
2Z�a���i�0��0��	Cmw�����,�������DV=e8�2����|��K1�E�V��B�d9�3��Y^�)�4USC_p� \
q[,t!v�V �W��|������4�=!D��AO�(���sS��B�dx���4�u��A[���}��Z�;tBqh \
����U@���&amp;YT��Ih&amp;����Z��2R=�Q�2���aIMiq��K"�a��p�q�W�R�C���(O��p.���],�fPB8p��� \
�4� ��,�c�F Y�M�K��6�*E�o�6p��Kpl ����n?teG���S���}x�~���t���� \
�XOg�t0�.������-�wQ+��AR������3�eM�E�������	��ST���\6�X��t���&lt;k���*_�\�Sz~|�����S�&gt;��Mn,[$q����V�^DT����}$�SX����D����&amp;�b��e���kh��	���* \
���s�� ����
���� �pG����8��U�b \
�+-�Bu�����V,�uSP�F���1��-p.�-\f����?��������4{Tuh'5�+M��L�yF���,_���xY��r�� \
A��F�3�u����-E�������{u�B�6���)�*u�F��P���pj:j�\�+��qY�M ���QV{�Vy \
�zek����I���X�@�WK�[��g��N�	P�"�-epP-bp�-?���,�Or*\��v����;��e�0�Y���-20�|Ofww��X)��9O�M��������	�f�
 8b+���Z���K����t�fj���Z6i��KY�.����b���G���t��� hY?t�R|.�_��Tlj+X�q�4�6[z�
�g�1�y���8W���E\�����).��~
����PF������z;���vf��-7s�U%iB�A����F�@$�����j��dCJ�FS�b{��QI�����&lt;E����������#+��V��pI%���1/0�h������fOo,�2S+���%o��a&gt;��}��Q+u�
 �H��@w~jnK���b�_�y�.��r�jq�"}L���&lt;�j]�&amp;/E|�a�'�2v':��z}� �[Il�0�
�e�Bk�/������j�&amp;��tA��e�2���l7ZR/��W�������.����yKxW�G�CR�u� \
����FW���1��+���� &gt;���V��c2|����+�Cq7�O�w�V,D�Zg''��^o�����x�I4�$��+�k�`&lt;^E�� \
�[Y}��,������58��@Qo6l5S�l`J,�p�����)e�6y/^N���2������fE�SOsaE�r��� �
���(�b��q�]~u��6���yep��~��R
QE�o��
��&amp;���_�QZb��:rG�t���F@&gt;�m�8���B
_|u���2Q�WWL�-��WWL�Mb�e���DP�;5�!F��K��(�D���wi�0H�F�B?M+�!�P����'1���sOb��6Y	����WG�B�I�N�!� \
 �0�u;$��mR����#R^����0O����!�g���O��7�\�I]G�O�@{(�@?eB�bto3�����-�:4���NJD�g�HI�XE-Z�$&amp;$=
 K|,�����5j�oP4J��������.I� \
��mPvW'\��a@��g�@]���)��Pr��v����L����N�k5��:�1�Z��� �(9�9�:�����	4w%�u�u�E�w \
$�&lt;���h+������ f	9�Z{Gd4{�ah��@(P�'o�:�i���gE1%�~��h���3�D��6������f��Mst�Pk%�+�� \
���n��"���al5L\|����7��r��?�M�6 p�����l@���i��V�Rb;[Xz`��L \
Oe�)a��LN��J�J���E�#�B��z�:�+]����8_�ST�FVp�������}��w?��&amp;:��-���I=�@���RD�t��e���M$�yJ�����r���Bd��z�lM�II���
 �X��R�b��gc�4�_kh#5�@O��z���+E����T�����k|I�]d��?��������/!n��;|i�L�bt&gt;�0����}+e*W@��"%)Q�F��q������_�= \
F���q��b&lt;���@W@��dk/w�NN���L�]�|���2Tx�� �%9Mi�_��xs����\��&amp;��+zK�\�/��%�*/ \
��j4Z����Ffpf��C ���U���N�O��qV;E�&amp;.n�����v)�v��w_=��c@��Mw�_���'?;�����?��1Mh� \
|C��d��P��,Y�n��,wy��9v��������'�&gt;9�qW�����|(��{���= ���P�a \
��IE�.����p	=�P5�bf4vU�_V�b�U����^T�Fu \
;��������'��2.��6���}1����������������e��.���"-^cl��&gt;{(� \
h&amp;^Z\sZ�=����U����4���YwE���x�����1K����b��_&amp;{y�}B,2������v�`c��"u�%Z�"��� \
7I�v��o`�����h���g9&lt; `0J�&lt;��Xx��0V \
l���t�~VV�7[�i�4n�/X�V;j��Bd���������C�-��4�N{?�Va�m�l���^/E�  \
,2����m"&lt;���Q�Y�+m������s�3{���j}��U�������s�R�0�/	��&gt;��_�_OS�d%���t#}�"/ \
�&lt;���V��r���[=dI� ~z��|�}T�P�%kbO[��fg���v�O�Wj&lt;��n���D0h9�=#x�D����Q?�~;��N��P \
�7�J���NVr���P&amp;8����������f95�/��z��Jp�a�SU��e��=%0��K(&gt;�#���z�x�qa�]*_�sF;|��XE \
�*W�&gt;XA��1/eqr_D�Y�R/t��c��h��@�����.	�~�����mA�S��kbxf�6���RO&lt;���������x�U��R��c�����m@j�d�#TN��!���~���rni��u*�������x
 ���pu�l'V����w���^�C�,��R
������h/���iI�&amp;�}�����d���uU(\`4��i����A��?�h���������1�m����LYnq��A�����l67��4�o�*bZ�R2��#�1��zE~S$���*�30��&gt; \
�A&lt;;��� �s$�e�B�.OO��+���&gt;��I/1z`w���~8v}��������&amp;jRbA��;�M-0`Z�����0]h \
&lt;��_�i�����_D!s��Bg�F�D������xpd2`��  d)��4��t(���Px��_���+� ��um����aK�n \
A���i1'c8�)~1�m��_��8Y� r��J�n����#��'�l����cp����=����k�STUj�`+ \
�%[���B��a��aU�k����N�{�-?e���{�!����]��{��������q�;�ttT�������?~������r4���?��������a��9�}t��?�~��9�y���~:�}:{�A���� \
/��m/�����.����e�Yc����}��������y����[�N�������x?�A��?R%�*����d���&gt;����Y�z�x��������!Wp�Am
 L��U��M�� �E=QE_-�t
����
��`�f~y@��5�:oQ ��g��Zp����D����+WHvdj�Z�Y�o6��C��M�!����u�����/p	���B���-"VQ?I \
�����reC������z���xq���f9��F�'��6�c��o��6���o���N�����?�+������������q������7�����{��?~���I'E��?��_����^� \
�������� ���������3��%&lt;,��^���[�&lt;6������$���o�����67�9\�w�����ba�D8p����7�G'p�S|T�c6s���\_����v����
 �� ���7���pQ�U�L�����c�������G���~� `�A+���(PB���K(�����)~a��q�a \
�[g�L�\g���K�������{��� �U�������J��7Z�+-������Fs���r$�����7n��x�oo�(1
�����0���h8�����*�
	��b��+gn��IPc��?6i]�����:3|`w���G���&amp;���J7Z�&gt;���c;���!���C��A \
4���A����h���T��#��e�/1��.��K���-&lt;���t6���`�������.���3 \
;����.���F��Q[y~�A��4����N���N��Ii x4p�P����c�����_ \
���=�o_�hC�����G���������b4���E�\ \
���i�o~�8S��AY_i��i	�F���'m���j��N0C������h0g���+"�4����|kH����a����|2��Am \
���M���-�p�T	� �[����u��d��+L4[��_�%��w���R����H��\��DxX����zl��Y���xQ�}'� \
�F���f9$��1�(�{� ��^�3���t���n���t'��	�p)05S,�����}u��2�Z4Uc`���O�A)[� \
hV�G�Z��|��:�l�-���������L������b��,� \
/�)e��Vo~�������ot��j���?�d����{OS�vmx���)���&amp;�&amp;j�;5���&lt;����w�V9���L�!P�1����pF�L��]�::S���
 �7u�o}�?�l��&gt;p|2��@���p��������K���wd��]�3� ����v \
J�M}^��d�(�f}h�`����q�����.����m�tl�n��3(b;��C;�8�f4B���6�F�,3w \
SVG��hP��?`xz���%t���?  ����iG2&gt;5���0sC� v����	X7�@�h� \
%u0��������9�1���k8����i�N����CD������S�x \
��;�����t��nz��������g:?&gt;2h���v��aq������� \
�xea��b��e��@����?y�}�}oS�N`�&amp;j����&lt;�v����O; �^����,���(`� \
�;p���!{�t��QY������rN� �A�����O�g����C���&amp;���%�����D  \
y�9�X����~��3��%����x:����@*/.��)8���0&amp;��T�{8O�@�C*�5w&amp;�Ae�;�����j���l��@X�Fp.`h \
\	��A���a�&gt;������,�N8� /
&gt; r� s&amp;�_���?M�Ac%� \
&gt; �gb1�&lt;�����X?�8c�{�q2��M��;��g(�i'����n�����'�����X����
��"30�f]��nz��&lt;�[�j������	y�.gl�/����'A����q]W��y�26�@�Lt�0
�O�l'�
�w����}�M��B+������4/���`�&gt;�`F�c,G�L������(�{��  ������s��8� \
����:�|�uk���U���p�ShO��������=�[�F��6&lt;��	�x!�1�-����S�v�.c�{����L�����C:&amp;A����g4�i�g@��g4s��KO=��y]_�*;9���V$���@�_�O]EX����&gt;����H4�6s��� \
���?��]�����c������0���� \
��4_�6��j��6��j�w�v@���=���������Sa`��8�����&gt;8���Y8l� \
f�_z6���[����+�`L����w!���GM�����a!�"���|r��h�C0�w�)����;���SPf�r���\�SzB9�U�5C������z$�5�h@��*6�;9��S&amp;�u]��o����s�.N3��E�� \
��rZ��t�p41��.�sw� 8���� ��h"�
SU�^�]�s\&gt;����L�t0e�+zZ�i�v�S�7 \
���u0��S|�k��0��������]��!�u��~�S�;����!}2������bm����u9�s�C&gt;Z� \
U\�r���fpd�n��8z5��\{}Y�PT  .:�c} p���y�@�CjH� ��i���U����y��t` \
8e����Tk|��0�n���Z������RD'��823�!-U��U�X�OA.���K�fH87��3���Mavk���m�7'p \
lh �����c�������3��&amp;U��'����e�I5�8�,��!����S_�I-�Ln�tY7 \
���P�Ytnh������?��������n�|^�����7��z���A��wA��2�si\w-�.�c����������,�h!�3������f�����AW1�v����U�0��9L/^~ \
�6&gt;���K�D&lt;G d&lt;�m ��g4���� �coc�CVa�~���H���E'�&lt;����i \
J]��q�f����C��Z����Wj�&amp;*���N[I��v��4Or��k%ivV'�?�y�m�A�;iT��&gt;��Vj���i�E���-�i����^��6u�[)54p���f��z�X�]��&lt;�$`O]��5��� \
p����P�&lt; �iT[P8��:r p�A�� �j�W��.[�g"��j���^:�V�En \
����y)��&gt;WQ�\���s�Z����PV��,+[�g���p������9�W�9��9&gt; \
px��!o`�H���y��L�~y&amp;@CT/L��R�P&amp;H=6G�����X2B3&amp;��P��*��0��]�?/���S�a���IG \
�4Ae�8� zZ_9�G�T	�6�f� G}�!��A-K�P���Q����x�o,7��?�5���`� \
$=K}�R��W���l*v5-��#����v��H���'�Q�����Mm�d�Q82	����~p�:L9����F����S�b���# \
�/O�����(B �=�J�z_v��wJ��Z���U�
���|���}z
�[�]�1�Al�A�S�gg �K����q�8l��B'�$��Ea0���OV9���mg:c��L���K�����}d&lt;9��5}���A��c����v}i@����a'��ivh1����4�B��zX�x�|� \
q���^	X�I:��X~�f����A��� Z�6`�7iT1n6��gLN�i \
O��Q�N:�~��0��xz�Iv�3N���.�B&amp;�\���&amp;�����M0���h�� \
��|p��R14�Y�;�q���Nm6���W��H ��)�i�2�:I.�6{�8��!��oM���I���o�p'n \
�!�_�8a^91����]DZu� �%���1� q0��v���H�_ �� \
0�,Lg.����!mg��rW[�4]m�9i%[����3�YiK|��	C��S��s)m` �����)��*7w����l \
�z1�}:���[w�`6�	����!����Hn*�}���&amp;�� �-o�y-r���s�5���9 \
�-[����i�|$��a��`�&amp;���J��p��?: \
���Z+���3V&gt;z0���F��_P����#��nI����2_a�4J7��#�������Ob���&gt;�C(���[���P8f�M���7O� \
nw��2�HK�Z����Z���j�M�cc�,�1�(}�!pI,�S�����i�����V�,�r��#��S��q��q���!����p�D��@C�	�8%���9��/B�W�� \
b��8��]w�[�V\�8} 'hs|8��b�6����s���d:���d����u�` PU��b�t�J�������j� \
�U��a��w�f&lt;b��Zg���O'n�� �7S�	 \
��.D��%�V����f9�M��K�`��jd��;�����r+�����2&amp;ljGx���������`�:0��U\fi���&lt;WZ�e�I���2�
 ��/�nQ�,�^�e��j���R����Sn�f��+�P��S���"�3��~�X���;hR+��U�Vi9 \
�[�,�CH��� �k/�S�\h�V���� \
�R���~7Q�����pBo�iD��0�����R.t,7�IW"F��S�-���;S�������{�	���|r���~&gt;�Y��������4
 ��������'���B����D�h��G����b�'&lt;�#g@�8��m�KS��~ �U������^M�&amp;wo!�i��.� \
�~R���=��� �!�C�L&lt;�2���	-��W ��m�������� \
��X[a�wf�CcW��z��������W����Z���	��:��@`��v�&amp;���VHk�?�}��U�	�p����&amp;|�Q�C��Sz?��~�����o69�]~88:��gmW��&lt;
 ���+:��(/73��S���������!���
�gw��z-)	G#=��l��J��:�		k�(	&amp;�i�D��#P������zi�qT�+(�&amp;��5���~g���u�i��4��%�v?jI���\$�m�����H`0
 zz�� w�t���?�����(#�����?���s�1)p%�&amp;��u�����Q�6�iW&lt;U�p�]�� \
&gt;���'���2(����GxR��C!���:��8 \
&gt; bz&lt;��E}�P��x�W�|	1l"�3G��Ty�����%3p"���q������M�V��`f�A� g�x��?�� mv�Q
��03F�6�&gt;����?4���2av�q��iW����qq�c���������][��9��l&lt;�w�v�s@ �^��
i�9l�0��^9�F5g�~*a ���f�����z�:g c2�j�M�������I����=���
O��u�wt���N���S����9 \
�����.r��~7W|�)j�U�����&lt;�:�����u�������0c�&lt;�����d�N��:�N8�����2�T������?���� \
)�'��|�p7��?q�l�;�d�O��������}&gt;��QX7�f"(5:N���R�U�������^�N_�����@�������[������b��d����20Jt:h�~�~�-�q��\��d�jwVGF�H��w��:��y���/�
 �-�*:����F�|&gt;����Q9o�x���8$�y~=�(:U�F���h�~��S��F���b�d'�D��l&gt;��"r����I6����9� \
�&amp;�W�f:Sg��l&amp;�6�d�n��5m���S����r4G��������8������q0Z��w�x1�d.�B�i��F�m������u��V�z��&lt;m�X \
�f����� ��^'M��.�����������3u8�p��&amp;��*�����wz�4�������zxVT���)��D-�]( P��/(\&gt;��c` \
P�8}Q�G� ������&gt;'�	.��K&gt;�$%�����A���M�w����hX N3���� ��
����Q��A�U��G(g�l/T(���4�+�q�_:W����������c��Y�m�NN&amp;����[��7�R]R-��!
fX��w1�r%�$	oY���kx����V	Z�%Ob������mXO�^��Y?�i9�y��l$��	�c�Z \
�@B4�;-����l|�U{2&amp;h�������Dpg����6�S���j}L���`p5����������X \
��7�\��'�W	���%�����[^W�j�Z���{~{��_xRi������G��y ��i2N��a�#4����p+�!�I�(
�X��ex7�3�F��� ^/��B�������=��9����~�{���X���{x�������OIo9�B��b�x�7[&lt;���3!���&lt;���k����3Oi��5�h����@4���j���	 \
����;H=&amp;��1�6PM�l���"(@���FiG�L���L�7M�m ��
�L3@#����I��HC���!�����	uR����Q�j��02��3���(h�Rx3�@z3�������zq����&amp;a��D4&amp;��5����
 ���E@N��v92��8*���!�?C�hg&amp;�5��0j�W��}Z0E\A_��3��-o�0��	i=�Ea"#Rzj��Fi��F�}Uv�� \
q��@���n��~ ��
��P!����N
�)u
�"�}�v`�
����B�jddBZ�����02C��1�����m�FS45��WA����Lo����m�a7	�J��HC���h�L=o����j�d[�����
 ���D!������=��m_��Wg����
���m`F�A�U�c4��!��/��p)��F���_x1��*����%�e��`����X�
�
!;K�wD� ��A(L�B0"{M?�lm��� fCox`P68����(�?5Yf���9�/� o"#�7���i �V� \
KUf/|6,\�8�y;�y�M�������5h�Z��`A&amp;� �q��J�� �EH����x���

�=�|�I���&lt;:�a)��4�5�N����)��t�n~��&lt;�~Z�W&amp;�F]&amp;F7J�WP:�����,�����W�+�=�il����! \
��^�	�Lh������"~���s 2�B������1��e��F�6pdm�����TY�/�,�P/i����2t
���,�6e��rJ
 }l����B�����q"b���g�(�\�P��C������I�A$!oygYd�K�����/���k(���`2FU=�����f��l@QC�����r{�{�
 �����{�Q�k/�hN"�H{�O&amp;��s{�-����q��?���Z`2E�CLf�Bs��Iy��i���
K����Vp�&amp;Rz������cP2��M&amp;����Ug��J��_�����e�tU������.�d�B^�zf��W%�����(�,��kx���@�����1|Sg��&gt;���4���w�M������ \
�S�����\q��,�k`��$m6�I8l��%L�� �M*��Y
���6�".Km�J� XgY���*�'�Gd�w;�[A��?Tq/�%Q�F0rmz�t�J�uTV�e���GE�QH&lt;.(e��J��&amp;^���
 %��h�����zE���4�������*�%V�u���N�����p_���]v�&amp;�M�V"B��������s������w{���)9�F�8/�5����$�%
 $I��B$)�Q� *������!�"����w���=.2��]R_m���6B���y�&amp;]�{XK���6�I7���{x���GiI��8�	��
 _V@�5�(I�^z�	J$x�m)X�ER=���g����vq�������q��)L��=�����&gt;�x'�H���- \
oV��K�Pg]���I*	6�D���&lt;I��bI��.���qA%�$a���{ �r��[lN����"� \
���&amp;I,��&gt;�moz�x��=&lt;�~��s*��l�yG���,��2.[�����&lt;���C�7�@*�S�����b� U�!� \
�p|�P	vq��R����1�x�����/��T�^,$��+�B����$ \
�#,6�7�Y�!F�����0�i�����9)T��WP�p\bm���Sf)����ZV��0"��F(������w�*W��e8��}�`�o���.���E���#��?���'�X}+"�T
 ],��,�z�(��qA;%Q, 8�z��,��~��m/�C��h�Uh��%� AS\ed[������ \
�.�M�+��K��l� ��,F��zPa����=���}� ��I����&gt;����-S� �
bQD�9�@�iU�y9�����BNIE�r
��!H��*!�i����U�f�K�
�C�P,�&lt;t��mJo���ZD�]��!-�*���R~N��4����U��U�*��y����X�-���x�-l��2`�9�~M{\(	9�(�@�����ka�� \
F���D:3�PC��fk���rY�U v���8I��.A6�n����'h�BzP=PYH������p�mR �1]�-�	Py���� \
��_1/����?���?AU�{�Y����u���1)��J� \
����}��#�H���e����z���Z#�d�yS$y�E�O���K��� \
���O��l.6qI�U�o���"?'��]RA�������o�8���! B�f��4.�^��� \
$�zX����S��K�����+�W3| }���Xq�_��y��p���#Gg��MO?��\�h��wS����H���:�
x�o�����|��=[�r�|�-��P��2`��U�Y9|p�bY�F0�X�~3����t�A�w�!MZ
��4�iw���LS������i�����RpK���?�y� 1M�|;������j6� \
&amp;��p���4PM��[&amp;jL��"iDSVK�(H��7+�- \
i�w7�����pM�8H�9q�L�y��DV������%�S�UGP�^�'�Z� ���q ����n|��Fu��|IZ \
���d�0���V��Ng0W���uB,�h��$9�r�6�V����5���&gt;@ �V��7^�m \
�^�Lln�a$���D��.�j� ���1�6���F���1]��uY4\��Z���~@T�h��?�������d&amp;*� \
����D4PM�F �x�6�.RJ��5�-�( ��j�KhWe�����G�j�$�F�ZpM���H������
��)9��$MX���o�1W &amp;��n�iH���H4�.y:C�@M��%bh������&amp;y�����sf'�����.�����������w���C�4 \
�7S/�&amp;��4sE�$��U�i�K��oP��Jv��w \
��p�JZN�]��"�����w"���j��))Y%v��L��ev���j���r���Ot��%E���l�TQ����?rI�K����+TD��U�I��4	':��!M����}P�&amp;aof���j��%Ze
 �s��
���	����6������O��l��VzV�N�{o�_4�W����!��k��o&amp;��PC�~�&lt;��T)��Px:�_�I���bS�(��C!��o���0:�n���7��+Hm��O���cW�m��c�p \
���&gt;D�N�0�=��a�!*+���i \
L~��y�E�e�&gt;��TP��`���K3H��7����r����PE�3�I����yV&amp;�]���0ov���������~HE�7 \
���}��=����0/����?�d�w_�����u��2�X�K��G�����&lt;��&amp;��������.0XdY�?I@1���[(A��-Z����t��bbO	�kE�Z�����
 v�nwa�D�
'(r��z��?k��@��	Di�w��{�������7K�x��0y�~�j�d�G�&gt;�_x�����P&gt;R \
���\C�[R.����/%{L��w��/ \
�Q�UEV`4���n��1��Q�i����yY���J�=K��j���&lt;*���q!T��1�j� \
s�U�b8[���pt���N�#��b���� \
�3+��@u���%�Q�.&lt;:w���L�C(?fI��H�3�8�EaM�({Q��C0��()c��&amp;����RvIJ����B�'�����/M \
��!�NL���0@%�����e�\DC�u8/�5_���q��i^$i�AT�Q��&amp;�h��b�:�@��vuxs@��LH�w�ma!�F��0��;�8�(��c \
zN#�������3&lt;E���4;.�&lt;*(��HZF\���u�x1�Z�r��*.��U��'� �z
0i�V"��C�RB���jl`���X�|�3��������I
!
f�Jj �e� Kp~$���K	�T'�R����}Hw�/�\ \
$3�9]����'NE�b4$���V���BWm�c��u�=7����Q?d�q�6^p�C�~�h�s��L2�r!��m�����{%�X"�dcm�Z \
\����'�:����0��,�9�d�o��J��H��Kf%���C�=�7��C�4�H���S�XUu�*��X�a��;��� \
/�*i�)���J��t��)�D6��"�P4��CGW��*�bm��_�0��t1����kW=�������b�&lt;�����{o�HWo���k�������W�@�j���dgh�W�Ra�v&amp;�$pe���`Z���*0}t������������`8`/���
 �u_{��hZ�"!?E�������������K����e�
������{-l��|�xmt�_�����5� \
3/�'S@�v	����o&gt;�����^�K�co~|��G���/|A���Y��hq!sx1w,]z}|w��P|P� I \
/c��/�xA6�����z� s���{|G�U���&amp;��=.Z�A�|�)o�#�U�XA]d�y�`	7��o�?�t�l�t�%�SE.*����Ne%�q&amp;.g�XE�������hC�[�M���\^�]���/�[&amp;�v`�7�� \
%��q.��:JAmK�J(;�-�YB�� � ��:���6GX�p]�4����r��^tVkh\����f_�	� 0���� \
��7�������i���jP��Z����oG��x �x����d����Af��� \
��pl0���R�y;7�&amp;���T������U��7��Gc�?���w�:���bG�t�rW�������uK����0�C�y�aP���^K��B���u�'�����MK�����;E''6�TG)FY�}h�&gt;��"���+��M��x�	�5���Re/L|��7�sP�
 �]
��3	����0h�pi����:���]c
�aW�H��r�zjzT������'�e��A�\����7a/uWa#��3�C��������(?x��q���,�lK���/��9 \
�5%���3�,w��:k5��&lt;}}��T}�o]�	e'�5��Lr���	i&amp;�7W��QgH5��cx3�E~���F�9t��������&lt;[A���"� \
v]��:�~l�;���������.���&amp;���k%RY�A#���+7-�4[��!�UZ� T^����!�e�'�M % \
G��p��9��}/Nn{*�vr�Q�!��H�i��6v���:U��a8�����L	���Q�k��G{��D��jI�s�����\][5G�ga��v�t���Ek�=�sB��������"���oy���o�g���H��n����Z�g�R���f��?��v1%u&amp;9w
 �k�������zJ6�����x��wuZ������\������^G�a���mr��.��n7���v�� B�
����cW�Ht[��_/������"����"�q��V5@8�i
&gt; Xo�&lt;^�ov�y����y�a��sq���dcOD�c \
&gt; G���E0w���#�.c��}�4����&amp;���2�V	ol=���g.s"�,M�
��/��m���;b������a&amp;���}��T�&lt;D���zBq8p����(D/���R�}����w�����y��Q�c��X.��
��F��/�)��&gt;���
[���v�� �I�� �����f�y��*h�����C�����x���p�����*?�k��)�c�`���e�SH}��hW=#��h���7:�������)�[���JV�&amp;�1�/o�sQ������p}��f�@?�XJ\��y��9��aU����&amp;l� \
���(' ���B,"61S�P��9���$(bH9�v�����d�;���-�5$�pK�m�8�����]=Z��1���rX�&gt;!����b�=� \
JS+��g��O�p6t�N'J=�� �����4k�Q��q(���h1.�M���9{���(���"  ���w��C}jfO�-m`}A^6� \
]��[��$������v�� \
2��K��E2S"�6��zE�z��W����������M1��,����+��j��*]`G�-��"���J$�x�J�����X��Sx;�e|��5&lt;ei��O�{q@�����:|V�G�-��i�o��
 ��A����K�W���e�S�e��.o�Wa}0������ \
&lt;aP�^_����/�FB'��}k��%��,0{�tZ�0����	JstL�_�H�K��F_�d�������{tE&lt;�������=��jX�������W
 ��`�}���wI��.��7�y��f�����Rv�o�=-tn�z���������&amp;���L3-��+��M]Br�7W�L&gt;��� \
�ww�}���&gt;�����+�lLV��p�v's������������#�Z�[���/�cw��}���YB�+�Q��"���%x��PK?�fOe2��#�0�"
 $ config.log
 �xW��xW��Q�nW�PK\K�


[Attachment #9 (unknown)]

&lt;html&gt;&lt;head&gt;&lt;meta http-equiv="Content-Type" content="text/html; \
charset=utf-8"&gt;&lt;/head&gt;&lt;body style="word-wrap: break-word; -webkit-nbsp-mode: space; \
line-break: after-white-space;" class=""&gt;&lt;div class=""&gt;&lt;br class=""&gt;&lt;div&gt;&lt;blockquote \
type="cite" class=""&gt;&lt;div class=""&gt;On Aug 20, 2019, at 12:36 PM, Daniel P. Berrang�� \
&lt;&lt;a href="mailto:berrange@redhat.com" class=""&gt;berrange@redhat.com&lt;/a&gt;&gt; \
wrote:&lt;/div&gt;&lt;br class="Apple-interchange-newline"&gt;&lt;div class=""&gt;&lt;span \
style="caret-color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; \
font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: \
normal; text-align: start; text-indent: 0px; text-transform: none; white-space: \
normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration: none; \
float: none; display: inline !important;" class=""&gt;On Tue, Aug 20, 2019 at 12:29:15PM \
-0400, reza shahriari wrote:&lt;/span&gt;&lt;br style="caret-color: rgb(0, 0, 0); font-family: \
Helvetica; font-size: 12px; font-style: normal; font-variant-caps: normal; \
font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; \
text-transform: none; white-space: normal; word-spacing: 0px; \
-webkit-text-stroke-width: 0px; text-decoration: none;" class=""&gt;&lt;blockquote \
type="cite" style="font-family: Helvetica; font-size: 12px; font-style: normal; \
font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: \
auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; \
widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; \
-webkit-text-stroke-width: 0px; text-decoration: none;" class=""&gt;Hi,&lt;br class=""&gt;&lt;br \
class=""&gt;I have attached my compressed config file.&lt;br class=""&gt;&lt;br \
class=""&gt;Thanks,&lt;br class=""&gt;&lt;br class=""&gt;Reza&lt;br class=""&gt;&lt;br class=""&gt;&lt;br \
class=""&gt;&lt;br class=""&gt;&lt;blockquote type="cite" class=""&gt;On Aug 20, 2019, at 12:03 PM, \
Daniel P. Berrang�� &lt;&lt;a href="mailto:berrange@redhat.com" \
class=""&gt;berrange@redhat.com&lt;/a&gt;&gt; wrote:&lt;br class=""&gt;&lt;br class=""&gt;Re-adding the \
mailing list CC - please don't drop it.&lt;br class=""&gt;&lt;br class=""&gt;On Tue, Aug 20, 2019 \
at 11:54:34AM -0400, reza shahriari wrote:&lt;br class=""&gt;&lt;blockquote type="cite" \
class=""&gt;Hi,&lt;span class="Apple-converted-space"&gt; &lt;/span&gt;&lt;br class=""&gt;&lt;br \
class=""&gt;I am using msys2. When I run `./configure` without any parameters and I \
still see missing pthreads impl.&lt;br class=""&gt;&lt;br class=""&gt;I have installed mingw64 \
cross compiler toolchain. Here is the output of pacman I see when searching for \
pthreads (they are all installed).&lt;br class=""&gt;&lt;br \
class=""&gt;mingw64/mingw-w64-x86_64-libwinpthread-git 7.0.0.5480.e14d23be-1 \
(mingw-w64-x86_64-toolchain) [installed]&lt;br class=""&gt;  MinGW-w64 \
winpthreads library&lt;br class=""&gt;mingw64/mingw-w64-x86_64-winpthreads-git \
7.0.0.5480.e14d23be-1 (mingw-w64-x86_64-toolchain) [installed]&lt;br \
class=""&gt;  MinGW-w64 winpthreads library&lt;br \
class=""&gt;msys/mingw-w64-cross-winpthreads-git 7.0.0.5480.b627284b-1 \
(mingw-w64-cross-toolchain mingw-w64-cross) [installed]&lt;br \
class=""&gt;  MinGW-w64 winpthreads library for cross-compiler&lt;br class=""&gt;&lt;br \
class=""&gt;&lt;br class=""&gt;Also, is there any another way to enable hyper-v domains on \
Libvirt ?&lt;br class=""&gt;&lt;/blockquote&gt;&lt;br class=""&gt;The pthreads library is a mandatory \
part of libvirt, so we can't&lt;br class=""&gt;skip that.&lt;br class=""&gt;&lt;br class=""&gt;Can you \
provide your "config.log" file - if it is larger than&lt;br class=""&gt;200 KB, please \
compress it, or upload it somewhere&lt;br class=""&gt;&lt;/blockquote&gt;&lt;/blockquote&gt;&lt;br \
style="caret-color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; \
font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: \
normal; text-align: start; text-indent: 0px; text-transform: none; white-space: \
normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration: none;" \
class=""&gt;&lt;span style="caret-color: rgb(0, 0, 0); font-family: Helvetica; font-size: \
12px; font-style: normal; font-variant-caps: normal; font-weight: normal; \
letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; \
white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; \
text-decoration: none; float: none; display: inline !important;" class=""&gt;The log \
shows&lt;/span&gt;&lt;br style="caret-color: rgb(0, 0, 0); font-family: Helvetica; font-size: \
12px; font-style: normal; font-variant-caps: normal; font-weight: normal; \
letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; \
white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; \
text-decoration: none;" class=""&gt;&lt;br style="caret-color: rgb(0, 0, 0); font-family: \
Helvetica; font-size: 12px; font-style: normal; font-variant-caps: normal; \
font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; \
text-transform: none; white-space: normal; word-spacing: 0px; \
-webkit-text-stroke-width: 0px; text-decoration: none;" class=""&gt;&lt;span \
style="caret-color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; \
font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: \
normal; text-align: start; text-indent: 0px; text-transform: none; white-space: \
normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration: none; \
float: none; display: inline !important;" class=""&gt;configure:8796: checking for \
pthread.h&lt;/span&gt;&lt;br style="caret-color: rgb(0, 0, 0); font-family: Helvetica; \
font-size: 12px; font-style: normal; font-variant-caps: normal; font-weight: normal; \
letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; \
white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; \
text-decoration: none;" class=""&gt;&lt;span style="caret-color: rgb(0, 0, 0); font-family: \
Helvetica; font-size: 12px; font-style: normal; font-variant-caps: normal; \
font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; \
text-transform: none; white-space: normal; word-spacing: 0px; \
-webkit-text-stroke-width: 0px; text-decoration: none; float: none; display: inline \
!important;" class=""&gt;configure:8796: gcc -c -g -O2  conftest.c \
&gt;&amp;5&lt;/span&gt;&lt;br style="caret-color: rgb(0, 0, 0); font-family: Helvetica; \
font-size: 12px; font-style: normal; font-variant-caps: normal; font-weight: normal; \
letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; \
white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; \
text-decoration: none;" class=""&gt;&lt;span style="caret-color: rgb(0, 0, 0); font-family: \
Helvetica; font-size: 12px; font-style: normal; font-variant-caps: normal; \
font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; \
text-transform: none; white-space: normal; word-spacing: 0px; \
-webkit-text-stroke-width: 0px; text-decoration: none; float: none; display: inline \
!important;" class=""&gt;conftest.c:82:10: fatal error: pthread.h: No such file or \
directory&lt;/span&gt;&lt;br style="caret-color: rgb(0, 0, 0); font-family: Helvetica; \
font-size: 12px; font-style: normal; font-variant-caps: normal; font-weight: normal; \
letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; \
white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; \
text-decoration: none;" class=""&gt;&lt;span style="caret-color: rgb(0, 0, 0); font-family: \
Helvetica; font-size: 12px; font-style: normal; font-variant-caps: normal; \
font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; \
text-transform: none; white-space: normal; word-spacing: 0px; \
-webkit-text-stroke-width: 0px; text-decoration: none; float: none; display: inline \
!important;" class=""&gt;#include &lt;pthread.h&gt;&lt;/span&gt;&lt;br style="caret-color: rgb(0, \
0, 0); font-family: Helvetica; font-size: 12px; font-style: normal; \
font-variant-caps: normal; font-weight: normal; letter-spacing: normal; text-align: \
start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: \
0px; -webkit-text-stroke-width: 0px; text-decoration: none;" class=""&gt;&lt;span \
style="caret-color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; \
font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: \
normal; text-align: start; text-indent: 0px; text-transform: none; white-space: \
normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration: none; \
float: none; display: inline !important;" \
class=""&gt;         ^~~~~~~~~~~&lt;/span&gt;&lt;br \
style="caret-color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; \
font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: \
normal; text-align: start; text-indent: 0px; text-transform: none; white-space: \
normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration: none;" \
class=""&gt;&lt;span style="caret-color: rgb(0, 0, 0); font-family: Helvetica; font-size: \
12px; font-style: normal; font-variant-caps: normal; font-weight: normal; \
letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; \
white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; \
text-decoration: none; float: none; display: inline !important;" class=""&gt;compilation \
terminated.&lt;/span&gt;&lt;br style="caret-color: rgb(0, 0, 0); font-family: Helvetica; \
font-size: 12px; font-style: normal; font-variant-caps: normal; font-weight: normal; \
letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; \
white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; \
text-decoration: none;" class=""&gt;&lt;br style="caret-color: rgb(0, 0, 0); font-family: \
Helvetica; font-size: 12px; font-style: normal; font-variant-caps: normal; \
font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; \
text-transform: none; white-space: normal; word-spacing: 0px; \
-webkit-text-stroke-width: 0px; text-decoration: none;" class=""&gt;&lt;br \
style="caret-color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; \
font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: \
normal; text-align: start; text-indent: 0px; text-transform: none; white-space: \
normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration: none;" \
class=""&gt;&lt;span style="caret-color: rgb(0, 0, 0); font-family: Helvetica; font-size: \
12px; font-style: normal; font-variant-caps: normal; font-weight: normal; \
letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; \
white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; \
text-decoration: none; float: none; display: inline !important;" class=""&gt;so it is \
not finding the winpthreads package you installed.&lt;/span&gt;&lt;br style="caret-color: \
rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; font-style: normal; \
font-variant-caps: normal; font-weight: normal; letter-spacing: normal; text-align: \
start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: \
0px; -webkit-text-stroke-width: 0px; text-decoration: none;" class=""&gt;&lt;br \
style="caret-color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; \
font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: \
normal; text-align: start; text-indent: 0px; text-transform: none; white-space: \
normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration: none;" \
class=""&gt;&lt;span style="caret-color: rgb(0, 0, 0); font-family: Helvetica; font-size: \
12px; font-style: normal; font-variant-caps: normal; font-weight: normal; \
letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; \
white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; \
text-decoration: none; float: none; display: inline !important;" class=""&gt;You might \
be ablke to set the  "CFLAGS" env variable to&lt;/span&gt;&lt;br style="caret-color: \
rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; font-style: normal; \
font-variant-caps: normal; font-weight: normal; letter-spacing: normal; text-align: \
start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: \
0px; -webkit-text-stroke-width: 0px; text-decoration: none;" class=""&gt;&lt;span \
style="caret-color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; \
font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: \
normal; text-align: start; text-indent: 0px; text-transform: none; white-space: \
normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration: none; \
float: none; display: inline !important;" class=""&gt;"-I/path/to/winpthreads/include" \
to get it to work. Might&lt;/span&gt;&lt;br style="caret-color: rgb(0, 0, 0); font-family: \
Helvetica; font-size: 12px; font-style: normal; font-variant-caps: normal; \
font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; \
text-transform: none; white-space: normal; word-spacing: 0px; \
-webkit-text-stroke-width: 0px; text-decoration: none;" class=""&gt;&lt;span \
style="caret-color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; \
font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: \
normal; text-align: start; text-indent: 0px; text-transform: none; white-space: \
normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration: none; \
float: none; display: inline !important;" class=""&gt;need \
LDFLAGS="-L/path/to/winpthreads/lib" too.&lt;/span&gt;&lt;br style="caret-color: rgb(0, 0, 0); \
font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-caps: \
normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: \
0px; text-transform: none; white-space: normal; word-spacing: 0px; \
-webkit-text-stroke-width: 0px; text-decoration: none;" class=""&gt;&lt;br \
style="caret-color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; \
font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: \
normal; text-align: start; text-indent: 0px; text-transform: none; white-space: \
normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration: none;" \
class=""&gt;&lt;span style="caret-color: rgb(0, 0, 0); font-family: Helvetica; font-size: \
12px; font-style: normal; font-variant-caps: normal; font-weight: normal; \
letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; \
white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; \
text-decoration: none; float: none; display: inline !important;" \
class=""&gt;Regards,&lt;/span&gt;&lt;br style="caret-color: rgb(0, 0, 0); font-family: Helvetica; \
font-size: 12px; font-style: normal; font-variant-caps: normal; font-weight: normal; \
letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; \
white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; \
text-decoration: none;" class=""&gt;&lt;span style="caret-color: rgb(0, 0, 0); font-family: \
Helvetica; font-size: 12px; font-style: normal; font-variant-caps: normal; \
font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; \
text-transform: none; white-space: normal; word-spacing: 0px; \
-webkit-text-stroke-width: 0px; text-decoration: none; float: none; display: inline \
!important;" class=""&gt;Daniel&lt;/span&gt;&lt;br style="caret-color: rgb(0, 0, 0); font-family: \
Helvetica; font-size: 12px; font-style: normal; font-variant-caps: normal; \
font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; \
text-transform: none; white-space: normal; word-spacing: 0px; \
-webkit-text-stroke-width: 0px; text-decoration: none;" class=""&gt;&lt;span \
style="caret-color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; \
font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: \
normal; text-align: start; text-indent: 0px; text-transform: none; white-space: \
normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration: none; \



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190820173051</emailId><senderName>Daniel =?utf-8?B?UC4gQmVycmFuZ8Op?=</senderName><senderEmail>berrange@redhat.com</senderEmail><timestampReceived>2019-08-20 17:30:51-0400</timestampReceived><subject>Re: [libvirt-users] Compiling Libvirt on Windows for Hyper V support</subject><body>

On Tue, Aug 20, 2019 at 01:03:40PM -0400, reza shahriari wrote:
&gt; Hi,
&gt; 
&gt; I tried that out, I got a new error about pthreads in my config.log.

It finds the header file now which is good, but it still fails to
find the libpthread.dll file, which is what LDFLAGS should have
addressed

configure:15417: checking for pthread_kill in -lpthread
configure:15442: gcc -o conftest.exe -I/c/msys64/mingw64/x86_64-w64-mingw32/include/  \
-L/c/msys64/mingw64/x86_64-w64-mingw32/lib/:/c/msys64/mingw64/bin/ conftest.c \
-lpthread   &gt;&amp;5 c:/mingw/bin/../lib/gcc/mingw32/8.2.0/../../../../mingw32/bin/ld.exe: \
cannot find -lpthread | char pthread_kill ();



Regards,
Daniel
-- 
&gt; &gt; https://berrange.com      -o-    https://www.flickr.com/photos/dberrange :|
&gt; &gt; https://libvirt.org         -o-            https://fstop138.berrange.com :|
&gt; &gt; https://entangle-photo.org    -o-    https://www.instagram.com/dberrange :|

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20190820175300</emailId><senderName>reza shahriari</senderName><senderEmail>reza_shahriari@yahoo.ca</senderEmail><timestampReceived>2019-08-20 17:53:00-0400</timestampReceived><subject>Re: [libvirt-users] Compiling Libvirt on Windows for Hyper V support</subject><body>

Thanks so much. I got it to go past pthreads. Now I am working on other dependencies



&gt; On Aug 20, 2019, at 1:30 PM, Daniel P. Berrangé &lt;berrange@redhat.com&gt; wrote:
&gt; 
&gt; On Tue, Aug 20, 2019 at 01:03:40PM -0400, reza shahriari wrote:
&gt; &gt; Hi,
&gt; &gt; 
&gt; &gt; I tried that out, I got a new error about pthreads in my config.log.
&gt; 
&gt; It finds the header file now which is good, but it still fails to
&gt; find the libpthread.dll file, which is what LDFLAGS should have
&gt; addressed
&gt; 
&gt; configure:15417: checking for pthread_kill in -lpthread
&gt; configure:15442: gcc -o conftest.exe \
&gt; -I/c/msys64/mingw64/x86_64-w64-mingw32/include/  \
&gt; -L/c/msys64/mingw64/x86_64-w64-mingw32/lib/:/c/msys64/mingw64/bin/ conftest.c \
&gt; -lpthread   &gt;&amp;5 c:/mingw/bin/../lib/gcc/mingw32/8.2.0/../../../../mingw32/bin/ld.exe: \
&gt; cannot find -lpthread | char pthread_kill ();
&gt; 
&gt; 
&gt; 
&gt; Regards,
&gt; Daniel
&gt; -- 
&gt; &gt; &gt; https://berrange.com      -o-    https://www.flickr.com/photos/dberrange :|
&gt; &gt; &gt; https://libvirt.org         -o-            https://fstop138.berrange.com :|
&gt; &gt; &gt; https://entangle-photo.org    -o-    https://www.instagram.com/dberrange :|


_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20190820101202</emailId><senderName>Michal Privoznik</senderName><senderEmail>mprivozn@redhat.com</senderEmail><timestampReceived>2019-08-20 10:12:02-0400</timestampReceived><subject>Re: [libvirt-users] Starting VM fails with: "Setting different DAC user or group on /path... which i</subject><body>

On 8/19/19 9:53 PM, Nir Soffer wrote:
&gt; Hi,
&gt; 
&gt; I upgraded to a Fedora 29 host using virt-preview repo to
&gt; libvirt-daemon-5.6.0-1.fc29.x86_64
&gt; The host was using plain Fedora 29 without virt-preview before that.
&gt; 
&gt; After the upgrade, starting some vms that were running fine fail now with
&gt; this error:
&gt; 
&gt; Error starting domain: internal error: child reported (status=125):
&gt; Requested operation is not valid: Setting different DAC user or group on
&gt; /home/libvirt/images/voodoo4-os.img which is already in use
&gt; 
&gt; Traceback (most recent call last):
&gt;    File "/usr/share/virt-manager/virtManager/asyncjob.py", line 75, in
&gt; cb_wrapper
&gt;      callback(asyncjob, *args, **kwargs)
&gt;    File "/usr/share/virt-manager/virtManager/asyncjob.py", line 111, in tmpcb
&gt;      callback(*args, **kwargs)
&gt;    File "/usr/share/virt-manager/virtManager/object/libvirtobject.py", line
&gt; 66, in newfn
&gt;      ret = fn(self, *args, **kwargs)
&gt;    File "/usr/share/virt-manager/virtManager/object/domain.py", line 1279,
&gt; in startup
&gt;      self._backend.create()
&gt;    File "/usr/lib64/python3.7/site-packages/libvirt.py", line 1089, in create
&gt;      if ret == -1: raise libvirtError ('virDomainCreate() failed', dom=self)
&gt; libvirt.libvirtError: internal error: child reported (status=125):
&gt; Requested operation is not valid: Setting different DAC user or group on
&gt; /home/libvirt/images/voodoo4-os.img which is already in use
&gt; 
&gt; These vms we created by creating one vm, and the cloning the vms.
&gt; 
&gt; I tried to delete the disks and add them back in one of the vms, but the vm
&gt; still fail with the
&gt; same error.
&gt; 
&gt; I hope that someone have a clue what is the issue, and how it can be fixed.

How do you clone the vms? The error message suggests that the image is 
in use - is it possible that you're trying to start two domains over the 
same disk?

Michal

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190814131818</emailId><senderName>Peter Krempa</senderName><senderEmail>pkrempa@redhat.com</senderEmail><timestampReceived>2019-08-14 13:18:18-0400</timestampReceived><subject>Re: [libvirt-users] Libvirt API for attaching volume to domain</subject><body>

[Attachment #2 (multipart/signed)]


On Wed, Aug 14, 2019 at 18:23:30 +0530, Varsha Verma wrote:
&gt; Hi,
&gt; 
&gt; I wanted to know if there is any Python API exposed for libvirt using which
&gt; I can attach a libvirt volume to a libvirt domain/VM.
&gt; 
&gt; I intend to do something similar to the `attach-disk` command of virsh
&gt; using python.

virsh uses the virDomainAttachDeviceFlags API in the 'attach-disk'
command wrapper. the python bindings expose it as 'attachDeviceFlags'
method of the virDomain class.

["signature.asc" (application/pgp-signature)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190814142511</emailId><senderName>Varsha Verma</senderName><senderEmail>varsha.verma.eee15@itbhu.ac.in</senderEmail><timestampReceived>2019-08-14 14:25:11-0400</timestampReceived><subject>Re: [libvirt-users] Libvirt API for attaching volume to domain</subject><body>

[Attachment #2 (multipart/alternative)]


Thanks, this is exactly what I needed.

Is there some documentation where I can get how to exactly call this
function along with the arguments?




On Wed, Aug 14, 2019 at 6:48 PM Peter Krempa &lt;pkrempa@redhat.com&gt; wrote:

&gt; On Wed, Aug 14, 2019 at 18:23:30 +0530, Varsha Verma wrote:
&gt; &gt; Hi,
&gt; &gt;
&gt; &gt; I wanted to know if there is any Python API exposed for libvirt using
&gt; which
&gt; &gt; I can attach a libvirt volume to a libvirt domain/VM.
&gt; &gt;
&gt; &gt; I intend to do something similar to the `attach-disk` command of virsh
&gt; &gt; using python.
&gt;
&gt; virsh uses the virDomainAttachDeviceFlags API in the 'attach-disk'
&gt; command wrapper. the python bindings expose it as 'attachDeviceFlags'
&gt; method of the virDomain class.
&gt;


-- 

*Regards,*

*Varsha Verma*

*Third Year Undergraduate*

*Department of Electrical Engineering*

*IIT-BHU, Varanasi*

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;Thanks, this is exactly what I needed.&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Is there \
some documentation where I can get how to exactly call this function along with the \
arguments?  &lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;img width="0" height="0" class="mailtrack-img" \
alt="" style="display:flex" \
src="https://mailtrack.io/trace/mail/b4da449352945c61d774dbc0d780ba53a7aefee8.png?u=1670425"&gt;&lt;/div&gt;&lt;br&gt;&lt;div \
class="gmail_quote"&gt;&lt;div dir="ltr" class="gmail_attr"&gt;On Wed, Aug 14, 2019 at 6:48 PM \
Peter Krempa &lt;&lt;a href="mailto:pkrempa@redhat.com"&gt;pkrempa@redhat.com&lt;/a&gt;&gt; \
wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote class="gmail_quote" style="margin:0px 0px 0px \
0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"&gt;On Wed, Aug 14, 2019 \
at 18:23:30 +0530, Varsha Verma wrote:&lt;br&gt; &gt; Hi,&lt;br&gt;
&gt; &lt;br&gt;
&gt; I wanted to know if there is any Python API exposed for libvirt using which&lt;br&gt;
&gt; I can attach a libvirt volume to a libvirt domain/VM.&lt;br&gt;
&gt; &lt;br&gt;
&gt; I intend to do something similar to the `attach-disk` command of virsh&lt;br&gt;
&gt; using python.&lt;br&gt;
&lt;br&gt;
virsh uses the virDomainAttachDeviceFlags API in the 'attach-disk'&lt;br&gt;
command wrapper. the python bindings expose it as 'attachDeviceFlags'&lt;br&gt;
method of the virDomain class.&lt;br&gt;
&lt;/blockquote&gt;&lt;/div&gt;&lt;br clear="all"&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;-- &lt;br&gt;&lt;div dir="ltr" \
class="gmail_signature"&gt;&lt;div dir="ltr"&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;i&gt;&lt;span \
style="background-color:rgb(153,153,153)"&gt;&lt;/span&gt;&lt;span \
style="color:rgb(153,153,153)"&gt;Regards,&lt;br&gt;&lt;/span&gt;&lt;/i&gt;&lt;/div&gt;&lt;span \
style="color:rgb(153,153,153)"&gt;&lt;i&gt;Varsha Verma&lt;br&gt;&lt;/i&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span \
style="color:rgb(153,153,153)"&gt;&lt;i&gt;Third Year Undergraduate&lt;br&gt;&lt;/i&gt;&lt;/span&gt;&lt;/div&gt;&lt;span \
style="color:rgb(153,153,153)"&gt;&lt;i&gt;Department of Electrical \
Engineering&lt;br&gt;&lt;/i&gt;&lt;/span&gt;&lt;/div&gt;&lt;i&gt;&lt;font color="#999999"&gt;IIT-BHU, \
Varanasi&lt;br&gt;&lt;/font&gt;&lt;/i&gt;&lt;/div&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190814171056</emailId><senderName>Christian Kujau</senderName><senderEmail>lists@nerdbynature.de</senderEmail><timestampReceived>2019-08-14 17:10:56-0400</timestampReceived><subject>Re: [libvirt-users] Libvirt API for attaching volume to domain</subject><body>

On Wed, 14 Aug 2019, Varsha Verma wrote:
&gt; Is there some documentation where I can get how to exactly call this
&gt; function along with the arguments?

Documentation to various language bindings can be found here:

 https://libvirt.org/bindings.html

HTH,
C.
-- 
BOFH excuse #417:

Computer room being moved.  Our systems are down for the weekend.

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190807131139</emailId><senderName>Michal Prívozník</senderName><senderEmail>mprivozn@redhat.com</senderEmail><timestampReceived>2019-08-07 13:11:39-0400</timestampReceived><subject>Re: [libvirt-users] Vm in state "in shutdown"</subject><body>

On 8/5/19 1:25 PM, 马昊骢 Ianmalcolm Ma wrote:
&gt; Description of problem:
&gt; libvirt 3.9 on CentOS Linux release 7.4.1708 (kernel 3.10.0-693.21.1.el7.x86_64) on Qemu version 2.10.0

I vaguely recall a bug like this, but I don't know any more details.
Then again, libvirt-3.9.0 is 2 years old. So I suggest try to upgrade
libvirt and see if it helps. Alternatively, you may try to run git
bisect and find the commit that fixed the problem.

Michal

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190807164632</emailId><senderName>Daniel =?utf-8?B?UC4gQmVycmFuZ8Op?=</senderName><senderEmail>berrange@redhat.com</senderEmail><timestampReceived>2019-08-07 16:46:32-0400</timestampReceived><subject>Re: [libvirt-users] Reg: content of disk is not reflecting in host.</subject><body>

On Wed, Aug 07, 2019 at 09:57:02PM +0530, bharath paulraj wrote:
&gt; Hi Team,
&gt; 
&gt; I am doing a small testing and I don't know if my expectation is correct or
&gt; not. Pardon me if I am ignorant.
&gt; I created a VM and the VM is running. In the hypervisor I have created
&gt; ".img" file and attached this .img file to the VM.
&gt; My expectation is that, if VM is writing files to the attached disk, then
&gt; it should reflect in the .img file created in the hypervisor. But It is not
&gt; working as my expectation.
&gt; Please correct me if my expectation is wrong.
&gt; 
&gt; Steps:
&gt; 1. Created disk.img in the hypervisor using the command: dd if=/dev/zero
&gt; of=disk.img bs=1M count=50; mkfs ext3 -F disk.img
&gt; 2. Attached the disk to the running VM using the command: virsh attach-disk
&gt; &lt;Domain-Name&gt; --source disk.img  --target vdb --live
&gt; 3. In the VM, I mounted the disk and created few files.
&gt; 4. In the hypervisor, I mounted the disk.img to check if the file created
&gt; in the VM exists in the .img file.
&gt;    &gt;&gt; I am not able to see those files.

Do *NOT* do step 4 - it is incredibly dangerous in general and may well
result in filesystem corruption &amp; serious data loss.

Most filesystems are only designed to be used by a single OS at any time.

By mounting it on the host, you have 2 separate OS both accessing the
same filesystem.  Even if you mount a filesystem with the read-only
flag, there can still be writes to the filesystem as the second OS to
mount will see it "dirty" and try to replay the journal that reflects
what the first OS was doing.

Assuming you didn't actually corrupt your FS image, the likely reason
you don't see the file from the host is that the guest OS probably hasn't
flushed it out to disk yet - it'll still be cached in memory in the guest
unless something explicitly ran 'sync'. 

Regards,
Daniel
-- 
|: https://berrange.com      -o-    https://www.flickr.com/photos/dberrange :|
|: https://libvirt.org         -o-            https://fstop138.berrange.com :|
|: https://entangle-photo.org    -o-    https://www.instagram.com/dberrange :|

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190809130906</emailId><senderName>Sven Vogel</senderName><senderEmail>s.vogel@ewerk.com</senderEmail><timestampReceived>2019-08-09 13:09:06-0400</timestampReceived><subject>Re: [libvirt-users] OVS / KVM / libvirt / MTU</subject><body>

[Attachment #2 (text/plain)]

Hi Peter,

Maybe my English it not good enough. I would understand the highest but not the \
smallest. You know? :)

You mean if any VM has 2000 set and another will set 3000 we get 3000 for all on the \
bridge? What I don't understand is if the bridgec already has 9000 set as MTU they \
will be shrined down?!?

For me I think it lags of some functionality.


__

Sven Vogel
Teamlead Platform

EWERK DIGITAL GmbH
Brühl 24, D-04109 Leipzig
P +49 341 42649 - 11
F +49 341 42649 - 18
S.Vogel@ewerk.com
www.ewerk.com

Geschäftsführer:
Dr. Erik Wende, Hendrik Schubert, Frank Richter
Registergericht: Leipzig HRB 17023

Zertifiziert nach:
ISO/IEC 27001:2013
DIN EN ISO 9001:2015
DIN ISO/IEC 20000-1:2011

ISAE 3402 Typ II Assessed

EWERK-Blog&lt;https://blog.ewerk.com/&gt; | \
LinkedIn&lt;https://www.linkedin.com/company/ewerk-group&gt; | \
Xing&lt;https://www.xing.com/company/ewerk&gt; | Twitter&lt;https://twitter.com/EWERK_Group&gt; | \
Facebook&lt;https://de-de.facebook.com/EWERK.IT/&gt;

Mit Handelsregistereintragung vom 09.07.2019 ist die EWERK RZ GmbH auf die EWERK IT \
GmbH verschmolzen und firmiert nun gemeinsam unter dem Namen: EWERK DIGITAL GmbH, \
für weitere Informationen klicken Sie hier&lt;https://www.ewerk.com/ewerkdigital&gt;.

Auskünfte und Angebote per Mail sind freibleibend und unverbindlich.

Disclaimer Privacy:
Der Inhalt dieser E-Mail (einschließlich etwaiger beigefügter Dateien) ist \
vertraulich und nur für den Empfänger bestimmt. Sollten Sie nicht der \
bestimmungsgemäße Empfänger sein, ist Ihnen jegliche Offenlegung, \
Vervielfältigung, Weitergabe oder Nutzung des Inhalts untersagt. Bitte informieren \
Sie in diesem Fall unverzüglich den Absender und löschen Sie die E-Mail \
(einschließlich etwaiger beigefügter Dateien) von Ihrem System. Vielen Dank.

The contents of this e-mail (including any attachments) are confidential and may be \
legally privileged. If you are not the intended recipient of this e-mail, any \
disclosure, copying, distribution or use of its contents is strictly prohibited, and \
you should please notify the sender immediately and then delete it (including any \
attachments) from your system. Thank you.

Am 08.08.2019 um 11:43 schrieb Peter Crowther \
&lt;peter.crowther@melandra.com&lt;mailto:peter.crowther@melandra.com&gt;&gt;:

On Thu, 8 Aug 2019 at 10:08, Sven Vogel &lt;S.Vogel@ewerk.com&lt;mailto:S.Vogel@ewerk.com&gt;&gt; \
wrote: The question for me is why they use the smallest?

Because otherwise some frames won't get through because the interface can't receive \
them, and the job of network equipment is to enable and maintain communication :-).

Cheers

Sven

- Peter

[...]

Am 31.07.2019 um 15:50 schrieb Alvin Starr \
&lt;alvin@netvel.net&lt;mailto:alvin@netvel.net&gt;&gt;:

In general if no MTU is set on interface creation the default value is 1500.

On OVS the bridge MTU is automatically set to the smallest port MTU. So you just have \
to set the MTU of each port of the bridge.

Take a look at: https://bugzilla.redhat.com/show_bug.cgi?id=1160897
It is a bit of a pain to read but seems to confirm the statement about the OVS MTU \
value being set by the MTU of the ports.

I have been using OVS with Xen and a few years ago I had to wrap my head around this \
problem. Once you start setting the MTU to something other than 1500 you will find \
you need to set ALL the MTU values of ALL your interfaces. Otherwise some inherited \
default will bite you.


[Attachment #3 (text/html)]

&lt;html&gt;
&lt;head&gt;
&lt;meta http-equiv="Content-Type" content="text/html; charset=utf-8"&gt;
&lt;/head&gt;
&lt;body style="word-wrap: break-word; -webkit-nbsp-mode: space; line-break: \
after-white-space;" class=""&gt; Hi Peter,
&lt;div class=""&gt;&lt;br class=""&gt;
&lt;/div&gt;
&lt;div class=""&gt;Maybe my English it not good enough. I would understand the highest but \
not the smallest. You know? :)&lt;/div&gt; &lt;div class=""&gt;&lt;br class=""&gt;
&lt;/div&gt;
&lt;div class=""&gt;You mean if any VM has 2000 set and another will set 3000 we get 3000 \
for all on the bridge? What I don't understand is if the bridgec already has 9000 set \
as MTU they will be shrined down?!?&lt;/div&gt; &lt;div class=""&gt;&lt;br class=""&gt;
&lt;/div&gt;
&lt;div class=""&gt;For me I think it lags of some functionality. &lt;/div&gt;
&lt;div&gt;&lt;br class=""&gt;
&lt;p style="FONT-SIZE: 10pt; FONT-FAMILY: ARIAL"&gt;&lt;strong&gt;&lt;span style="FONT-SIZE: \
9pt"&gt;&lt;span style="FONT-SIZE: 10pt"&gt;__&lt;br&gt; &lt;br&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/strong&gt;&lt;strong&gt;&lt;span style="FONT-SIZE: 9pt"&gt;&lt;span style="FONT-SIZE: \
8pt"&gt;Sven Vogel&lt;/span&gt;&lt;/span&gt;&lt;br style="FONT-SIZE: 9pt"&gt; &lt;/strong&gt;&lt;span \
style="FONT-SIZE: 8pt"&gt;Teamlead Platform&lt;br&gt; &lt;br&gt;
&lt;/span&gt;&lt;span style="FONT-SIZE: 8pt"&gt;EWERK DIGITAL GmbH&lt;/span&gt;&lt;br style="FONT-SIZE: \
8pt"&gt; &lt;span style="FONT-SIZE: 8pt"&gt;Brühl 24, D-04109 Leipzig&lt;/span&gt;&lt;br \
style="FONT-SIZE: 8pt"&gt; &lt;span style="FONT-SIZE: 8pt"&gt;P +49 341 42649 - \
11&lt;/span&gt;&lt;br style="FONT-SIZE: 8pt"&gt; &lt;span style="FONT-SIZE: 8pt"&gt;F +49 341 42649 \
- 18&lt;/span&gt;&lt;br style="FONT-SIZE: 8pt"&gt; &lt;font style="FONT-SIZE: 8pt" \
color="#000000"&gt;S.Vogel@ewerk.com&lt;br style="FONT-SIZE: 8pt"&gt; www.ewerk.com&lt;br&gt;
&lt;br&gt;
&lt;/font&gt;&lt;font style="FONT-SIZE: 8pt" color="#000000"&gt;Geschäftsführer:&lt;br \
style="FONT-SIZE: 8pt"&gt; Dr. Erik Wende, Hendrik Schubert, Frank Richter&lt;br&gt;
Registergericht: Leipzig HRB 17023&lt;br&gt;
&lt;/font&gt;&lt;font style="FONT-SIZE: 8pt" color="#000000"&gt;&lt;br&gt;
&lt;/font&gt;&lt;font style="FONT-SIZE: 8pt" color="#000000"&gt;Zertifiziert nach:&lt;br&gt;
&lt;/font&gt;&lt;font style="FONT-SIZE: 8pt" color="#000000"&gt;ISO/IEC 27001:2013&lt;br&gt;
DIN EN ISO 9001:2015&lt;br&gt;
DIN ISO/IEC 20000-1:2011&lt;br&gt;
&lt;br&gt;
ISAE 3402 Typ II Assessed&lt;/font&gt;&lt;font style="FONT-SIZE: 8pt" color="#000000"&gt;&lt;br&gt;
&lt;/font&gt;&lt;/p&gt;
&lt;p style="FONT-SIZE: 10pt; FONT-FAMILY: ARIAL"&gt;&lt;font style="FONT-SIZE: 8pt" \
color="#000000"&gt;&lt;a class="socialLink" \
href="https://blog.ewerk.com/"&gt;EWERK-Blog&lt;/a&gt; | &lt;a class="socialLink" \
href="https://www.linkedin.com/company/ewerk-group"&gt;LinkedIn&lt;/a&gt; | &lt;a \
class="socialLink" href="https://www.xing.com/company/ewerk"&gt;Xing&lt;/a&gt; | &lt;a \
class="socialLink" href="https://twitter.com/EWERK_Group"&gt;Twitter&lt;/a&gt; | &lt;a \
class="socialLink" href="https://de-de.facebook.com/EWERK.IT/"&gt; Facebook&lt;/a&gt;&lt;br&gt;
&lt;br&gt;
Mit Handelsregistereintragung vom 09.07.2019 ist die EWERK RZ GmbH auf die EWERK IT \
GmbH verschmolzen und firmiert nun gemeinsam unter dem Namen: &lt;strong&gt;EWERK&lt;/strong&gt; \
&lt;strong&gt;DIGITAL GmbH&lt;/strong&gt;, für weitere Informationen klicken Sie &lt;a \
title="Informationen" href="https://www.ewerk.com/ewerkdigital"&gt;hier&lt;/a&gt;.&lt;br&gt; &lt;br&gt;
Auskünfte und Angebote per Mail sind freibleibend und unverbindlich.&lt;br&gt;
&lt;br&gt;
Disclaimer Privacy:&lt;br&gt;
Der Inhalt dieser E-Mail (einschließlich etwaiger beigefügter Dateien) ist \
vertraulich und nur für den Empfänger bestimmt. Sollten Sie nicht der \
bestimmungsgemäße Empfänger sein, ist Ihnen jegliche Offenlegung, \
Vervielfältigung, Weitergabe oder Nutzung des  Inhalts untersagt. Bitte informieren \
Sie in diesem Fall unverzüglich den Absender und löschen Sie die E-Mail \
(einschließlich etwaiger beigefügter Dateien) von Ihrem System. Vielen Dank.&lt;br&gt; \
&lt;br&gt; The contents of this e-mail (including any attachments) are confidential and may \
be legally privileged. If you are not the intended recipient of this e-mail, any \
disclosure, copying, distribution or use of its contents is strictly prohibited, and \
you should  please notify the sender immediately and then delete it (including any \
attachments) from your system. Thank you. &lt;/font&gt;&lt;/p&gt;
&lt;blockquote type="cite" class=""&gt;
&lt;div class=""&gt;Am 08.08.2019 um 11:43 schrieb Peter Crowther &lt;&lt;a \
href="mailto:peter.crowther@melandra.com" \
class=""&gt;peter.crowther@melandra.com&lt;/a&gt;&gt;:&lt;/div&gt; &lt;br \
class="Apple-interchange-newline"&gt; &lt;div class=""&gt;
&lt;div dir="ltr" class=""&gt;On Thu, 8 Aug 2019 at 10:08, Sven Vogel &lt;&lt;a \
href="mailto:S.Vogel@ewerk.com" class=""&gt;S.Vogel@ewerk.com&lt;/a&gt;&gt; wrote:&lt;br \
class=""&gt; &lt;div class="gmail_quote"&gt;
&lt;blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid \
rgb(204,204,204);padding-left:1ex"&gt; &lt;div style="overflow-wrap: break-word;" \
class=""&gt;The question for me is why they use the smallest? &lt;/div&gt;
&lt;/blockquote&gt;
&lt;div class=""&gt;&lt;br class=""&gt;
&lt;/div&gt;
&lt;div class=""&gt;Because otherwise some frames won't get through because the interface \
can't receive them, and the job of network equipment is to enable and maintain \
communication :-).&lt;br class=""&gt; &lt;/div&gt;
&lt;blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid \
rgb(204,204,204);padding-left:1ex"&gt; &lt;div style="overflow-wrap: break-word;" class=""&gt;
&lt;div class=""&gt;&lt;br class=""&gt;
&lt;/div&gt;
&lt;div class=""&gt;Cheers&lt;/div&gt;
&lt;div class=""&gt;&lt;br class=""&gt;
&lt;/div&gt;
&lt;div class=""&gt;Sven&lt;br class=""&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/blockquote&gt;
&lt;div class=""&gt;&lt;br class=""&gt;
&lt;/div&gt;
&lt;div class=""&gt;- Peter&lt;/div&gt;
&lt;div class=""&gt;&lt;br class=""&gt;
&lt;/div&gt;
&lt;blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid \
rgb(204,204,204);padding-left:1ex"&gt; &lt;div style="overflow-wrap: break-word;" class=""&gt;
&lt;div class=""&gt;
&lt;div class=""&gt;[...]&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/blockquote&gt;
&lt;div class=""&gt; &lt;/div&gt;
&lt;blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid \
rgb(204,204,204);padding-left:1ex"&gt; &lt;div style="overflow-wrap: break-word;" class=""&gt;
&lt;div class=""&gt;
&lt;div class=""&gt;Am 31.07.2019 um 15:50 schrieb Alvin Starr &lt;&lt;a \
href="mailto:alvin@netvel.net" target="_blank" class=""&gt;alvin@netvel.net&lt;/a&gt;&gt;: \
&lt;blockquote type="cite" class=""&gt;&lt;br \
class="gmail-m_34686457727802889Apple-interchange-newline"&gt; &lt;div class=""&gt;&lt;span \
style="font-family:Helvetica;font-size:14px;font-style:normal;font-variant-caps:normal \
;font-weight:normal;letter-spacing:normal;text-align:start;text-indent:0px;text-transf \
orm:none;white-space:normal;word-spacing:0px;text-decoration:none;float:none;display:inline" \
class=""&gt;In  general if no MTU is set on interface creation the default value is \
1500.&lt;/span&gt;&lt;br style="font-family:Helvetica;font-size:14px;font-style:normal;font-var \
iant-caps:normal;font-weight:normal;letter-spacing:normal;text-align:start;text-indent \
:0px;text-transform:none;white-space:normal;word-spacing:0px;text-decoration:none" \
class=""&gt; &lt;br style="font-family:Helvetica;font-size:14px;font-style:normal;font-varia \
nt-caps:normal;font-weight:normal;letter-spacing:normal;text-align:start;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;text-decoration:none" \
class=""&gt; &lt;span style="font-family:Helvetica;font-size:14px;font-style:normal;font-var \
iant-caps:normal;font-weight:normal;letter-spacing:normal;text-align:start;text-indent \
:0px;text-transform:none;white-space:normal;word-spacing:0px;text-decoration:none;float:none;display:inline" \
class=""&gt;On  OVS the bridge MTU is automatically set to the smallest port MTU. So you \
just have to set the MTU of each port of the bridge.&lt;/span&gt;&lt;br \
style="font-family:Helvetica;font-size:14px;font-style:normal;font-variant-caps:normal \
;font-weight:normal;letter-spacing:normal;text-align:start;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;text-decoration:none" \
class=""&gt; &lt;br style="font-family:Helvetica;font-size:14px;font-style:normal;font-varia \
nt-caps:normal;font-weight:normal;letter-spacing:normal;text-align:start;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;text-decoration:none" \
class=""&gt; &lt;span style="font-family:Helvetica;font-size:14px;font-style:normal;font-var \
iant-caps:normal;font-weight:normal;letter-spacing:normal;text-align:start;text-indent \
:0px;text-transform:none;white-space:normal;word-spacing:0px;text-decoration:none;float:none;display:inline" \
class=""&gt;Take  a look at:&lt;span \
class="gmail-m_34686457727802889Apple-converted-space"&gt; &lt;/span&gt;&lt;/span&gt;&lt;a \
href="https://bugzilla.redhat.com/show_bug.cgi?id=1160897" \
style="font-family:Helvetica;font-size:14px;font-style:normal;font-variant-caps:normal \
;font-weight:normal;letter-spacing:normal;text-align:start;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px" \
target="_blank" class=""&gt;https://bugzilla.redhat.com/show_bug.cgi?id=1160897&lt;/a&gt;&lt;br \
style="font-family:Helvetica;font-size:14px;font-style:normal;font-variant-caps:normal \
;font-weight:normal;letter-spacing:normal;text-align:start;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;text-decoration:none" \
class=""&gt; &lt;span style="font-family:Helvetica;font-size:14px;font-style:normal;font-var \
iant-caps:normal;font-weight:normal;letter-spacing:normal;text-align:start;text-indent \
:0px;text-transform:none;white-space:normal;word-spacing:0px;text-decoration:none;float:none;display:inline" \
class=""&gt;It  is a bit of a pain to read but seems to confirm the statement about the \
OVS MTU value being set by the MTU of the ports.&lt;/span&gt;&lt;br \
style="font-family:Helvetica;font-size:14px;font-style:normal;font-variant-caps:normal \
;font-weight:normal;letter-spacing:normal;text-align:start;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;text-decoration:none" \
class=""&gt; &lt;br style="font-family:Helvetica;font-size:14px;font-style:normal;font-varia \
nt-caps:normal;font-weight:normal;letter-spacing:normal;text-align:start;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;text-decoration:none" \
class=""&gt; &lt;span style="font-family:Helvetica;font-size:14px;font-style:normal;font-var \
iant-caps:normal;font-weight:normal;letter-spacing:normal;text-align:start;text-indent \
:0px;text-transform:none;white-space:normal;word-spacing:0px;text-decoration:none;float:none;display:inline" \
class=""&gt;I  have been using OVS with Xen and a few years ago I had to wrap my head \
around this problem.&lt;/span&gt;&lt;br \
style="font-family:Helvetica;font-size:14px;font-style:normal;font-variant-caps:normal \
;font-weight:normal;letter-spacing:normal;text-align:start;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;text-decoration:none" \
class=""&gt; &lt;span style="font-family:Helvetica;font-size:14px;font-style:normal;font-var \
iant-caps:normal;font-weight:normal;letter-spacing:normal;text-align:start;text-indent \
:0px;text-transform:none;white-space:normal;word-spacing:0px;text-decoration:none;float:none;display:inline" \
class=""&gt;Once  you start setting the MTU to something other than 1500 you will find \
you need to set ALL the MTU values of ALL your interfaces.&lt;/span&gt;&lt;br \
style="font-family:Helvetica;font-size:14px;font-style:normal;font-variant-caps:normal \
;font-weight:normal;letter-spacing:normal;text-align:start;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;text-decoration:none" \
class=""&gt; &lt;span style="font-family:Helvetica;font-size:14px;font-style:normal;font-var \
iant-caps:normal;font-weight:normal;letter-spacing:normal;text-align:start;text-indent \
:0px;text-transform:none;white-space:normal;word-spacing:0px;text-decoration:none;float:none;display:inline" \
class=""&gt;Otherwise  some inherited default will bite you.&lt;/span&gt;&lt;/div&gt;
&lt;/blockquote&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/blockquote&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/blockquote&gt;
&lt;/div&gt;
&lt;br class=""&gt;
&lt;/body&gt;
&lt;/html&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
--===============2847190139287289097==--


</body></email><email><emailId>20190812095645</emailId><senderName>Li Feng</senderName><senderEmail>fengli@smartx.com</senderEmail><timestampReceived>2019-08-12 09:56:45-0400</timestampReceived><subject>[libvirt-users] Add support for vhost-user-scsi-pci/vhost-user-blk-pci</subject><body>

Hi Guys,

And I want to add the vhost-user-scsi-pci/vhost-user-blk-pci support
for libvirt.

The usage in qemu like this:

Vhost-SCSI
-chardev socket,id=char0,path=/var/tmp/vhost.0
-device vhost-user-scsi-pci,id=scsi0,chardev=char0
Vhost-BLK
-chardev socket,id=char1,path=/var/tmp/vhost.1
-device vhost-user-blk-pci,id=blk0,chardev=char1

What type should I add for libvirt.
Type1:
    &lt;hostdev mode='subsystem' type='vhost-user'&gt;
        &lt;source protocol='vhost-user-scsi' path='/tmp/vhost-scsi.sock'&gt;&lt;/source&gt;
        &lt;alias name="vhost-user-scsi-disk1"/&gt;
    &lt;/hostdev&gt;


Type2:

    &lt;disk type='network' device='disk'&gt;
      &lt;driver name='qemu' type='raw' cache='none' io='native'/&gt;
      &lt;source protocol='vhost-user' path='/tmp/vhost-scsi.sock'&gt;
      &lt;/source&gt;
      &lt;target dev='sdb' bus='vhost-user-scsi'/&gt;
      &lt;boot order='3'/&gt;
      &lt;alias name='scsi0-0-0-1'/&gt;
      &lt;address type='drive' controller='0' bus='0' target='0' unit='1'/&gt;
    &lt;/disk&gt;


    &lt;disk type='network' device='disk'&gt;
      &lt;driver name='qemu' type='raw' cache='none' io='native'/&gt;
      &lt;source protocol='vhost-user' path='/tmp/vhost-blk.sock'&gt;
      &lt;/source&gt;
      &lt;target dev='vda' bus='vhost-user-blk'/&gt;
      &lt;boot order='1'/&gt;
      &lt;alias name='virtio-disk0'/&gt;
      &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x07'
function='0x0'/&gt;
    &lt;/disk&gt;


Could anyone give some suggestions?

Thanks,
Feng Li

-- 
The SmartX email address is only for business purpose. Any sent message 
that is not related to the business is not authorized or permitted by 
SmartX.
���������������������������������������������������SmartX���������������. \
�������������������������������������� \
���,������������������������������������������������������������.



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20190813074141</emailId><senderName>Peter Krempa</senderName><senderEmail>pkrempa@redhat.com</senderEmail><timestampReceived>2019-08-13 07:41:41-0400</timestampReceived><subject>Re: [libvirt-users] does virsh have a history with timestamps ?</subject><body>

[Attachment #2 (multipart/signed)]


On Mon, Aug 12, 2019 at 19:24:29 +0200, Lentes, Bernd wrote:
&gt; Hi,
&gt; 
&gt; i knwo that virsh has its own history, but are somewhere the respective timestamps logged ?

No, libvirt uses readline's history infrastructure which does not record
timestamps with the entries. This is similar to for example bash_history
which also does not record history.

Also note that non-interactive use of virsh (e.g. 'virsh start DOMNAME')
is not recorded at all in virsh's history file.

In this case it's way better to look at the libvirtd log files which
should contain log entries for any operation.

["signature.asc" (application/pgp-signature)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190814112707</emailId><senderName>Peter Krempa</senderName><senderEmail>pkrempa@redhat.com</senderEmail><timestampReceived>2019-08-14 11:27:07-0400</timestampReceived><subject>Re: [libvirt-users] Recover snapshots from qcow images</subject><body>

[Attachment #2 (multipart/signed)]


On Tue, Aug 13, 2019 at 15:15:11 +0200, Petr Stodulka wrote:
&gt; Hi guys,
&gt; I had to move to the new laptop week ago and I screw migration of my virtual
&gt; machines. I recovered my virtual machines on the new laptop (virsh define)
&gt; using the backed up xml files, but I am missing any file with metadata about
&gt; snapshots. The original storage is cleaned so I cannot take these files
&gt; anymore.
&gt; 
&gt; Using qemu-info I can see my snapshots inside the qcow images, but libvirt
&gt; doesn't know about them:
&gt; ###########################################
&gt; # virsh snapshot-list rhlvm
&gt; Name   Creation Time   State
&gt; -------------------------------
&gt; 
&gt; # qemu-img info rhlvm.qcow2
&gt; image: rhlvm.qcow2
&gt; file format: qcow2
&gt; virtual size: 25G (26843545600 bytes)
&gt; disk size: 2.9G
&gt; cluster_size: 65536
&gt; Snapshot list:
&gt; ID        TAG                 VM SIZE                DATE       VM CLOCK
&gt; 1         prepared                  0 2018-09-05 11:06:06   00:00:00.000
&gt; Format specific information:
&gt; compat: 1.1
&gt; lazy refcounts: true
&gt; refcount bits: 16
&gt; corrupt: false
&gt; 
&gt; 
&gt; ###########################################
&gt; 
&gt; Is there any nice way to regenerate snapshot metadata for libvirt from
&gt; the data inside qcow images? I have bunch of VMs so if there is nice way
&gt; how to recover those data, you will make me really happy :)

Hi,

libvirt unfortunately does not support metadata-less snapshots so you
must recreate the metadata to be able to use them. If you didn't modify
your configuration of the VM between the time you took the snapshot and
the current point it should be fairly straightforward to recover them,
but it will require some manual steps.

The snapshot creation api has a _REDEFINE flag which allows to create
the snapshot metadata without actually doing any disk changes. (virsh
snapshot-create --redefine).

For this to happen you must prepare a definition of the snapshot. I'll
provide an example with anotations what to update:

&lt;domainsnapshot&gt;
  &lt;name&gt;1565701354&lt;/name&gt;   &lt;--- this must be equal to the 'TAG' field in the \
qemu-img output  &lt;state&gt;running&lt;/state&gt;    &lt;--- state of the VM at snapshot, you'll \
probably need to use shutoff as the VM was not running  \
&lt;creationTime&gt;1565701354&lt;/creationTime&gt;  &lt;--- convert the "DATE" field to a unix \
timestamp  &lt;memory snapshot='internal'/&gt;  &lt;----- your snapshot is internal so this is \
ok  &lt;disks&gt;
    &lt;disk name='hda' snapshot='no'/&gt;      &lt;--- entries here depend on your \
configuration, you need one line per disk, readonly disks must have 'no' as snapshot, \
others are internal  &lt;disk name='vda' snapshot='internal'/&gt;
    &lt;disk name='vdb' snapshot='internal'/&gt;
    &lt;disk name='vdc' snapshot='internal'/&gt;
  &lt;/disks&gt;
  &lt;domain type='kvm'&gt;   &lt;--- this is the domain definition XML obtained by running a \
virsh dumpxml --migratable --inactive --security-info  &lt;name&gt;upstream&lt;/name&gt;
    &lt;uuid&gt;841752b8-9452-4078-a62b-8fd9a9af011c&lt;/uuid&gt;

   [...] (trimmed irrelevant stuff but make sure to use full XML)

    &lt;devices&gt;
      &lt;emulator&gt;/home/pipo/git/qemu.git/x86_64-softmmu/qemu-system-x86_64&lt;/emulator&gt;
      &lt;disk type='file' device='cdrom'&gt;
        &lt;driver name='qemu' type='raw'/&gt;
        &lt;source file='/var/lib/libvirt/images/systemrescuecd-x86-4.9.5.iso'/&gt;
        &lt;backingStore/&gt;
        &lt;target dev='hda' bus='ide'/&gt;
        &lt;readonly/&gt;
        &lt;boot order='1'/&gt;
        &lt;address type='drive' controller='0' bus='0' target='0' unit='0'/&gt;
      &lt;/disk&gt;
      &lt;disk type='file' device='disk'&gt;   &lt;---- these conform to the table above
        &lt;driver name='qemu' type='qcow2'/&gt;
        &lt;source file='/tmp/pull4.qcow2'/&gt;
        &lt;target dev='vda' bus='virtio'/&gt;
        &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x0a' function='0x0'/&gt;
      &lt;/disk&gt;
      &lt;disk type='file' device='disk'&gt;
        &lt;driver name='qemu' type='qcow2'/&gt;
        &lt;source file='/tmp/commit4.qcow2'/&gt;
        &lt;target dev='vdb' bus='virtio'/&gt;
        &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x0c' function='0x0'/&gt;
      &lt;/disk&gt;
      &lt;disk type='file' device='disk'&gt;
        &lt;driver name='qemu' type='qcow2'/&gt;
        &lt;source file='/tmp/copy4.qcow2'/&gt;
        &lt;target dev='vdc' bus='virtio'/&gt;
        &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x0d' function='0x0'/&gt;
      &lt;/disk&gt;

   [...]

  &lt;/domain&gt;
  &lt;cookie&gt;
  &lt;/cookie&gt;
&lt;/domainsnapshot&gt;


Use a document which you create with:

virsh snapshot-create $VMNAME --redefine --current

Use --current only for the most recent snapshot.


["signature.asc" (application/pgp-signature)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190815075725</emailId><senderName>Peter Krempa</senderName><senderEmail>pkrempa@redhat.com</senderEmail><timestampReceived>2019-08-15 07:57:25-0400</timestampReceived><subject>Re: [libvirt-users] Libvirt API for attaching volume to domain</subject><body>

[Attachment #2 (multipart/signed)]


[Please don't top-post on technical lists.]

On Wed, Aug 14, 2019 at 19:43:11 +0530, Varsha Verma wrote:
&gt; Thanks, this is exactly what I needed.
&gt; 
&gt; Is there some documentation where I can get how to exactly call this
&gt; function along with the arguments?

python has builtin documentation:

import libvirt
help(libvirt)

Disk XML documentation is here:
https://libvirt.org/formatdomain.html#elementsDisks

the C api documentation is here:
https://libvirt.org/html/libvirt-libvirt-domain.html#virDomainAttachDeviceFlags

Also for inspiration 'virsh attach-disk' supports the --print-xml
argument.

["signature.asc" (application/pgp-signature)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190820160240</emailId><senderName>Nir Soffer</senderName><senderEmail>nsoffer@redhat.com</senderEmail><timestampReceived>2019-08-20 16:02:40-0400</timestampReceived><subject>Re: [libvirt-users] Starting VM fails with: "Setting different DAC user or group on /path... which i</subject><body>

[Attachment #2 (multipart/alternative)]


On Tue, Aug 20, 2019 at 1:12 PM Michal Privoznik &lt;mprivozn@redhat.com&gt;
wrote:

&gt; On 8/19/19 9:53 PM, Nir Soffer wrote:
&gt; &gt; Hi,
&gt; &gt;
&gt; &gt; I upgraded to a Fedora 29 host using virt-preview repo to
&gt; &gt; libvirt-daemon-5.6.0-1.fc29.x86_64
&gt; &gt; The host was using plain Fedora 29 without virt-preview before that.
&gt; &gt;
&gt; &gt; After the upgrade, starting some vms that were running fine fail now with
&gt; &gt; this error:
&gt; &gt;
&gt; &gt; Error starting domain: internal error: child reported (status=125):
&gt; &gt; Requested operation is not valid: Setting different DAC user or group on
&gt; &gt; /home/libvirt/images/voodoo4-os.img which is already in use
&gt; &gt;
&gt; &gt; Traceback (most recent call last):
&gt; &gt;    File "/usr/share/virt-manager/virtManager/asyncjob.py", line 75, in
&gt; &gt; cb_wrapper
&gt; &gt;      callback(asyncjob, *args, **kwargs)
&gt; &gt;    File "/usr/share/virt-manager/virtManager/asyncjob.py", line 111, in
&gt; tmpcb
&gt; &gt;      callback(*args, **kwargs)
&gt; &gt;    File "/usr/share/virt-manager/virtManager/object/libvirtobject.py",
&gt; line
&gt; &gt; 66, in newfn
&gt; &gt;      ret = fn(self, *args, **kwargs)
&gt; &gt;    File "/usr/share/virt-manager/virtManager/object/domain.py", line
&gt; 1279,
&gt; &gt; in startup
&gt; &gt;      self._backend.create()
&gt; &gt;    File "/usr/lib64/python3.7/site-packages/libvirt.py", line 1089, in
&gt; create
&gt; &gt;      if ret == -1: raise libvirtError ('virDomainCreate() failed',
&gt; dom=self)
&gt; &gt; libvirt.libvirtError: internal error: child reported (status=125):
&gt; &gt; Requested operation is not valid: Setting different DAC user or group on
&gt; &gt; /home/libvirt/images/voodoo4-os.img which is already in use
&gt; &gt;
&gt; &gt; These vms we created by creating one vm, and the cloning the vms.
&gt; &gt;
&gt; &gt; I tried to delete the disks and add them back in one of the vms, but the
&gt; vm
&gt; &gt; still fail with the
&gt; &gt; same error.
&gt; &gt;
&gt; &gt; I hope that someone have a clue what is the issue, and how it can be
&gt; fixed.
&gt;
&gt; How do you clone the vms?


Using virt-manager "Clone..." command.

The error message suggests that the image is
&gt; in use - is it possible that you're trying to start two domains over the
&gt; same disk?
&gt;

No, the disks are different (these vms were running for 2-3 weeks) before
the upgrade.

# ls -lhiZ /home/libvirt/images/voodoo{4,5,8}-*.img
  247 -rw-------. 1 root root system_u:object_r:virt_image_t:s0 20G Aug 17
03:55 /home/libvirt/images/voodoo4-gv0.img
37249 -rw-------. 1 root root system_u:object_r:virt_image_t:s0 20G Aug 17
03:55 /home/libvirt/images/voodoo4-gv1.img
37252 -rw-------. 1 root root system_u:object_r:virt_image_t:s0 50G Aug 17
03:52 /home/libvirt/images/voodoo4-os.img
37250 -rw-------. 1 root root system_u:object_r:virt_image_t:s0 20G Aug 17
03:55 /home/libvirt/images/voodoo5-gv0.img
37281 -rw-------. 1 root root system_u:object_r:virt_image_t:s0 20G Aug 17
03:55 /home/libvirt/images/voodoo5-gv1.img
  223 -rw-------. 1 root root system_u:object_r:virt_image_t:s0 50G Aug 17
03:45 /home/libvirt/images/voodoo5-os.img
37253 -rw-------. 1 root root system_u:object_r:virt_image_t:s0 20G Aug 17
03:55 /home/libvirt/images/voodoo8-gv0.img
37282 -rw-------. 1 root root system_u:object_r:virt_image_t:s0 20G Aug 17
03:55 /home/libvirt/images/voodoo8-gv1.img
37251 -rw-------. 1 root root system_u:object_r:virt_image_t:s0 50G Aug 17
03:46 /home/libvirt/images/voodoo8-os.img

I suspected that the disk serial is the issue - I'm using
the same serial for for all "os" and "gvX" disks, used in the guest
to locate the right disk (e.g. /dev/disk/by-id/virtio-gv0).

I tried to replace to use unique serials (e.g. gv0 -&gt; voodoo4-gv0) but I
still see
the same error, so this must be something else.


&gt;
&gt; Michal
&gt;

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;&lt;div class="gmail_default" \
style="font-size:small;color:#000000"&gt;&lt;span style="color:rgb(34,34,34)"&gt;On Tue, Aug \
20, 2019 at 1:12 PM Michal Privoznik &lt;&lt;a \
href="mailto:mprivozn@redhat.com"&gt;mprivozn@redhat.com&lt;/a&gt;&gt; \
wrote:&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class="gmail_quote"&gt;&lt;blockquote class="gmail_quote" \
style="margin:0px 0px 0px 0.8ex;border-left:1px solid \
rgb(204,204,204);padding-left:1ex"&gt;On 8/19/19 9:53 PM, Nir Soffer wrote:&lt;br&gt; &gt; \
Hi,&lt;br&gt; &gt; &lt;br&gt;
&gt; I upgraded to a Fedora 29 host using virt-preview repo to&lt;br&gt;
&gt; libvirt-daemon-5.6.0-1.fc29.x86_64&lt;br&gt;
&gt; The host was using plain Fedora 29 without virt-preview before that.&lt;br&gt;
&gt; &lt;br&gt;
&gt; After the upgrade, starting some vms that were running fine fail now with&lt;br&gt;
&gt; this error:&lt;br&gt;
&gt; &lt;br&gt;
&gt; Error starting domain: internal error: child reported (status=125):&lt;br&gt;
&gt; Requested operation is not valid: Setting different DAC user or group on&lt;br&gt;
&gt; /home/libvirt/images/voodoo4-os.img which is already in use&lt;br&gt;
&gt; &lt;br&gt;
&gt; Traceback (most recent call last):&lt;br&gt;
&gt;      File "/usr/share/virt-manager/virtManager/asyncjob.py", line 75, \
in&lt;br&gt; &gt; cb_wrapper&lt;br&gt;
&gt;         callback(asyncjob, *args, **kwargs)&lt;br&gt;
&gt;      File "/usr/share/virt-manager/virtManager/asyncjob.py", line 111, \
in tmpcb&lt;br&gt; &gt;         callback(*args, **kwargs)&lt;br&gt;
&gt;      File "/usr/share/virt-manager/virtManager/object/libvirtobject.py", \
line&lt;br&gt; &gt; 66, in newfn&lt;br&gt;
&gt;         ret = fn(self, *args, **kwargs)&lt;br&gt;
&gt;      File "/usr/share/virt-manager/virtManager/object/domain.py", line \
1279,&lt;br&gt; &gt; in startup&lt;br&gt;
&gt;         self._backend.create()&lt;br&gt;
&gt;      File "/usr/lib64/python3.7/site-packages/libvirt.py", line 1089, \
in create&lt;br&gt; &gt;         if ret == -1: raise libvirtError ('virDomainCreate() \
failed', dom=self)&lt;br&gt; &gt; libvirt.libvirtError: internal error: child reported \
(status=125):&lt;br&gt; &gt; Requested operation is not valid: Setting different DAC user \
or group on&lt;br&gt; &gt; /home/libvirt/images/voodoo4-os.img which is already in use&lt;br&gt;
&gt; &lt;br&gt;
&gt; These vms we created by creating one vm, and the cloning the vms.&lt;br&gt;
&gt; &lt;br&gt;
&gt; I tried to delete the disks and add them back in one of the vms, but the vm&lt;br&gt;
&gt; still fail with the&lt;br&gt;
&gt; same error.&lt;br&gt;
&gt; &lt;br&gt;
&gt; I hope that someone have a clue what is the issue, and how it can be fixed.&lt;br&gt;
&lt;br&gt;
How do you clone the vms? &lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div class="gmail_default" \
style="font-size:small;color:rgb(0,0,0)"&gt;Using virt-manager "Clone..." \
command.&lt;/div&gt;&lt;div class="gmail_default" \
style="font-size:small;color:rgb(0,0,0)"&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;blockquote \
class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid \
rgb(204,204,204);padding-left:1ex"&gt;The error message suggests that the image is &lt;br&gt; \
in use - is it possible that you're trying to start two domains over the &lt;br&gt; \
same disk?&lt;br&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div class="gmail_default" \
style="font-size:small;color:rgb(0,0,0)"&gt;No, the disks are different (these vms were \
running for 2-3 weeks) before&lt;/div&gt;&lt;div class="gmail_default" \
style="font-size:small;color:rgb(0,0,0)"&gt;the upgrade.&lt;/div&gt;&lt;div class="gmail_default" \
style="font-size:small;color:rgb(0,0,0)"&gt;&lt;br&gt;&lt;/div&gt;# ls -lhiZ \
/home/libvirt/images/voodoo{4,5,8}-*.img&lt;br&gt;   247 -rw-------. 1 root root \
system_u:object_r:virt_image_t:s0 20G Aug 17 03:55 \
/home/libvirt/images/voodoo4-gv0.img&lt;br&gt;37249 -rw-------. 1 root root \
system_u:object_r:virt_image_t:s0 20G Aug 17 03:55 \
/home/libvirt/images/voodoo4-gv1.img&lt;br&gt;37252 -rw-------. 1 root root \
system_u:object_r:virt_image_t:s0 50G Aug 17 03:52 \
/home/libvirt/images/voodoo4-os.img&lt;br&gt;37250 -rw-------. 1 root root \
system_u:object_r:virt_image_t:s0 20G Aug 17 03:55 \
/home/libvirt/images/voodoo5-gv0.img&lt;br&gt;37281 -rw-------. 1 root root \
system_u:object_r:virt_image_t:s0 20G Aug 17 03:55 \
/home/libvirt/images/voodoo5-gv1.img&lt;br&gt;   223 -rw-------. 1 root root \
system_u:object_r:virt_image_t:s0 50G Aug 17 03:45 \
/home/libvirt/images/voodoo5-os.img&lt;br&gt;37253 -rw-------. 1 root root \
system_u:object_r:virt_image_t:s0 20G Aug 17 03:55 \
/home/libvirt/images/voodoo8-gv0.img&lt;br&gt;37282 -rw-------. 1 root root \
system_u:object_r:virt_image_t:s0 20G Aug 17 03:55 \
/home/libvirt/images/voodoo8-gv1.img&lt;br&gt;37251 -rw-------. 1 root root \
system_u:object_r:virt_image_t:s0 50G Aug 17 03:46 \
/home/libvirt/images/voodoo8-os.img&lt;br&gt;&lt;div class="gmail_default" \
style="font-size:small;color:rgb(0,0,0)"&gt;&lt;br&gt;&lt;/div&gt;&lt;div class="gmail_default" \
style="font-size:small;color:rgb(0,0,0)"&gt;I suspected that the disk serial is the \
issue - I'm using&lt;/div&gt;&lt;div class="gmail_default" \
style="font-size:small;color:rgb(0,0,0)"&gt;the same serial for for all "os" \
and "gvX" disks, used in the guest&lt;/div&gt;&lt;div class="gmail_default" \
style="font-size:small;color:rgb(0,0,0)"&gt;to locate the right disk (e.g. \
/dev/disk/by-id/virtio-gv0).&lt;/div&gt;&lt;div class="gmail_default" \
style="font-size:small;color:rgb(0,0,0)"&gt;&lt;br&gt;&lt;/div&gt;&lt;div class="gmail_default" \
style="font-size:small;color:rgb(0,0,0)"&gt;I tried to replace to use unique serials \
(e.g. gv0 -&gt; voodoo4-gv0) but I still see&lt;/div&gt;&lt;div class="gmail_default" \
style="font-size:small;color:rgb(0,0,0)"&gt;the same error, so this must be something \
else.&lt;/div&gt;&lt;/div&gt;&lt;div&gt;  &lt;/div&gt;&lt;blockquote class="gmail_quote" style="margin:0px 0px \
0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"&gt; &lt;br&gt;
Michal&lt;br&gt;
&lt;/blockquote&gt;&lt;/div&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190821193448</emailId><senderName>reza shahriari</senderName><senderEmail>reza_shahriari@yahoo.ca</senderEmail><timestampReceived>2019-08-21 19:34:48-0400</timestampReceived><subject>Re: [libvirt-users] Compiling Libvirt on Windows for Hyper V support</subject><body>

[Attachment #2 (multipart/alternative)]


Hi,

I have hit a new issue with `./configure` when specifying the `—with-hyper` \
parameter.

Configure runs successfully when no parameters are given but when trying to build \
with hyper-v I run into this issue. I was wondering if anyone knows how to install \
this dependency on msys2.

&gt; checking for libxl_cpupool_cpuadd_cpumap in -lxenlight... no
&gt; checking whether LIBXL_DOMAIN_TYPE_PVH is declared... no
&gt; checking for PARALLELS_SDK... no
&gt; checking for bhyve... no
&gt; checking for bhyvectl... no
&gt; checking for bhyveload... no
&gt; configure: error: openwsman is required for the Hyper-V driver

Thanks,

Reza Shahriari


&gt; On Aug 20, 2019, at 1:53 PM, reza shahriari &lt;reza_shahriari@yahoo.ca&gt; wrote:
&gt; 
&gt; Thanks so much. I got it to go past pthreads. Now I am working on other \
&gt; dependencies 
&gt; 
&gt; 
&gt; &gt; On Aug 20, 2019, at 1:30 PM, Daniel P. Berrangé &lt;berrange@redhat.com&gt; wrote:
&gt; &gt; 
&gt; &gt; On Tue, Aug 20, 2019 at 01:03:40PM -0400, reza shahriari wrote:
&gt; &gt; &gt; Hi,
&gt; &gt; &gt; 
&gt; &gt; &gt; I tried that out, I got a new error about pthreads in my config.log.
&gt; &gt; 
&gt; &gt; It finds the header file now which is good, but it still fails to
&gt; &gt; find the libpthread.dll file, which is what LDFLAGS should have
&gt; &gt; addressed
&gt; &gt; 
&gt; &gt; configure:15417: checking for pthread_kill in -lpthread
&gt; &gt; configure:15442: gcc -o conftest.exe \
&gt; &gt; -I/c/msys64/mingw64/x86_64-w64-mingw32/include/  \
&gt; &gt; -L/c/msys64/mingw64/x86_64-w64-mingw32/lib/:/c/msys64/mingw64/bin/ conftest.c \
&gt; &gt; -lpthread   &gt;&amp;5 c:/mingw/bin/../lib/gcc/mingw32/8.2.0/../../../../mingw32/bin/ld.exe: \
&gt; &gt; cannot find -lpthread | char pthread_kill ();
&gt; &gt; 
&gt; &gt; 
&gt; &gt; 
&gt; &gt; Regards,
&gt; &gt; Daniel
&gt; &gt; -- 
&gt; &gt; &gt; &gt; https://berrange.com      -o-    https://www.flickr.com/photos/dberrange :|
&gt; &gt; &gt; &gt; https://libvirt.org         -o-            https://fstop138.berrange.com :|
&gt; &gt; &gt; &gt; https://entangle-photo.org    -o-    https://www.instagram.com/dberrange :|
&gt; 


[Attachment #5 (unknown)]

&lt;html&gt;&lt;head&gt;&lt;meta http-equiv="Content-Type" content="text/html; \
charset=utf-8"&gt;&lt;/head&gt;&lt;body style="word-wrap: break-word; -webkit-nbsp-mode: space; \
line-break: after-white-space;" class=""&gt;Hi,&lt;div class=""&gt;&lt;br class=""&gt;&lt;/div&gt;&lt;div \
class=""&gt;I have hit a new issue with `./configure` when specifying the \
`—with-hyper` parameter.&lt;/div&gt;&lt;div class=""&gt;&lt;br class=""&gt;&lt;/div&gt;&lt;div \
class=""&gt;Configure runs successfully when no parameters are given but when trying to \
build with hyper-v I run into this issue. I was wondering if anyone knows how to \
install this dependency on msys2.&lt;/div&gt;&lt;div class=""&gt;&lt;br class=""&gt;&lt;/div&gt;&lt;div \
class=""&gt;&lt;blockquote type="cite" class=""&gt;&lt;span style="color: rgb(34, 34, 34); \
font-family: Arial, Helvetica, sans-serif; font-size: small; font-variant-ligatures: \
normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);" \
class=""&gt;checking for libxl_cpupool_cpuadd_cpumap in -lxenlight... no&lt;/span&gt;&lt;br \
style="color: rgb(34, 34, 34); font-family: Arial, Helvetica, sans-serif; font-size: \
small; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: \
rgb(255, 255, 255);" class=""&gt;&lt;span style="color: rgb(34, 34, 34); font-family: \
Arial, Helvetica, sans-serif; font-size: small; font-variant-ligatures: normal; \
orphans: 2; widows: 2; background-color: rgb(255, 255, 255);" class=""&gt;checking \
whether LIBXL_DOMAIN_TYPE_PVH is declared... no&lt;/span&gt;&lt;br style="color: rgb(34, 34, \
34); font-family: Arial, Helvetica, sans-serif; font-size: small; \
font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, \
255, 255);" class=""&gt;&lt;span style="color: rgb(34, 34, 34); font-family: Arial, \
Helvetica, sans-serif; font-size: small; font-variant-ligatures: normal; orphans: 2; \
widows: 2; background-color: rgb(255, 255, 255);" class=""&gt;checking for \
PARALLELS_SDK... no&lt;/span&gt;&lt;br style="color: rgb(34, 34, 34); font-family: Arial, \
Helvetica, sans-serif; font-size: small; font-variant-ligatures: normal; orphans: 2; \
widows: 2; background-color: rgb(255, 255, 255);" class=""&gt;&lt;span style="color: \
rgb(34, 34, 34); font-family: Arial, Helvetica, sans-serif; font-size: small; \
font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, \
255, 255);" class=""&gt;checking for bhyve... no&lt;/span&gt;&lt;br style="color: rgb(34, 34, \
34); font-family: Arial, Helvetica, sans-serif; font-size: small; \
font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, \
255, 255);" class=""&gt;&lt;span style="color: rgb(34, 34, 34); font-family: Arial, \
Helvetica, sans-serif; font-size: small; font-variant-ligatures: normal; orphans: 2; \
widows: 2; background-color: rgb(255, 255, 255);" class=""&gt;checking for bhyvectl... \
no&lt;/span&gt;&lt;br style="color: rgb(34, 34, 34); font-family: Arial, Helvetica, \
sans-serif; font-size: small; font-variant-ligatures: normal; orphans: 2; widows: 2; \
background-color: rgb(255, 255, 255);" class=""&gt;&lt;span style="color: rgb(34, 34, 34); \
font-family: Arial, Helvetica, sans-serif; font-size: small; font-variant-ligatures: \
normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);" \
class=""&gt;checking for bhyveload... no&lt;/span&gt;&lt;br style="color: rgb(34, 34, 34); \
font-family: Arial, Helvetica, sans-serif; font-size: small; font-variant-ligatures: \
normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);" class=""&gt;&lt;span \
style="color: rgb(34, 34, 34); font-family: Arial, Helvetica, sans-serif; font-size: \
small; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: \
rgb(255, 255, 255);" class=""&gt;configure: error: openwsman is required for the Hyper-V \
driver&lt;/span&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br class=""&gt;&lt;/div&gt;&lt;div&gt;Thanks,&lt;/div&gt;&lt;div&gt;&lt;br \
class=""&gt;&lt;/div&gt;&lt;div&gt;Reza Shahriari&lt;/div&gt;&lt;div&gt;&lt;br class=""&gt;&lt;/div&gt;&lt;div&gt;&lt;br \
class=""&gt;&lt;blockquote type="cite" class=""&gt;&lt;div class=""&gt;On Aug 20, 2019, at 1:53 PM, \
reza shahriari &lt;&lt;a href="mailto:reza_shahriari@yahoo.ca" \
class=""&gt;reza_shahriari@yahoo.ca&lt;/a&gt;&gt; wrote:&lt;/div&gt;&lt;br \
class="Apple-interchange-newline"&gt;&lt;div class=""&gt;&lt;div class=""&gt;Thanks so much. I got \
it to go past pthreads. Now I am working on other dependencies&lt;br class=""&gt;&lt;br \
class=""&gt;&lt;br class=""&gt;&lt;br class=""&gt;&lt;blockquote type="cite" class=""&gt;On Aug 20, 2019, \
at 1:30 PM, Daniel P. Berrangé &lt;&lt;a href="mailto:berrange@redhat.com" \
class=""&gt;berrange@redhat.com&lt;/a&gt;&gt; wrote:&lt;br class=""&gt;&lt;br class=""&gt;On Tue, Aug 20, \
2019 at 01:03:40PM -0400, reza shahriari wrote:&lt;br class=""&gt;&lt;blockquote type="cite" \
class=""&gt;Hi,&lt;br class=""&gt;&lt;br class=""&gt;I tried that out, I got a new error about \
pthreads in my config.log.&lt;br class=""&gt;&lt;/blockquote&gt;&lt;br class=""&gt;It finds the header \
file now which is good, but it still fails to&lt;br class=""&gt;find the libpthread.dll \
file, which is what LDFLAGS should have&lt;br class=""&gt;addressed&lt;br class=""&gt;&lt;br \
class=""&gt;configure:15417: checking for pthread_kill in -lpthread&lt;br \
class=""&gt;configure:15442: gcc -o conftest.exe \
-I/c/msys64/mingw64/x86_64-w64-mingw32/include/ \
 -L/c/msys64/mingw64/x86_64-w64-mingw32/lib/:/c/msys64/mingw64/bin/ conftest.c \
-lpthread   &gt;&amp;5&lt;br \
class=""&gt;c:/mingw/bin/../lib/gcc/mingw32/8.2.0/../../../../mingw32/bin/ld.exe: cannot \
find -lpthread&lt;br class=""&gt;| char pthread_kill ();&lt;br class=""&gt;&lt;br class=""&gt;&lt;br \
class=""&gt;&lt;br class=""&gt;Regards,&lt;br class=""&gt;Daniel&lt;br class=""&gt;-- &lt;br class=""&gt;|: &lt;a \
href="https://berrange.com" class=""&gt;https://berrange.com&lt;/a&gt; \
     -o-    &lt;a \
href="https://www.flickr.com/photos/dberrange" \
class=""&gt;https://www.flickr.com/photos/dberrange&lt;/a&gt; :|&lt;br class=""&gt;|: &lt;a \
href="https://libvirt.org" class=""&gt;https://libvirt.org&lt;/a&gt; \
        -o- \
           &lt;a \
href="https://fstop138.berrange.com" class=""&gt;https://fstop138.berrange.com&lt;/a&gt; :|&lt;br \
class=""&gt;|: &lt;a href="https://entangle-photo.org" \
class=""&gt;https://entangle-photo.org&lt;/a&gt;    -o-    &lt;a \
href="https://www.instagram.com/dberrange" \
class=""&gt;https://www.instagram.com/dberrange&lt;/a&gt; :|&lt;br class=""&gt;&lt;/blockquote&gt;&lt;br \
class=""&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br class=""&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190824202346</emailId><senderName>Laine Stump</senderName><senderEmail>laine@redhat.com</senderEmail><timestampReceived>2019-08-24 20:23:46-0400</timestampReceived><subject>Re: [libvirt-users] RLIMIT_MEMLOCK in container environment</subject><body>

On 8/24/19 3:08 AM, Dan Kenigsberg wrote:
&gt; 
&gt; 
&gt; On Fri, 23 Aug 2019, 0:27 Laine Stump, &lt;laine@redhat.com 
&gt; &lt;mailto:laine@redhat.com&gt;&gt; wrote:
&gt; 
&gt;     (Adding Alex Williamson to Cc so he can correct any mistakes)
&gt; 
&gt;     On 8/22/19 4:39 PM, Ihar Hrachyshka wrote:
&gt;      &gt; On Thu, Aug 22, 2019 at 12:01 PM Laine Stump &lt;laine@redhat.com
&gt;     &lt;mailto:laine@redhat.com&gt;&gt; wrote:
&gt;      &gt;&gt;
&gt;      &gt;&gt; On 8/22/19 10:56 AM, Ihar Hrachyshka wrote:
&gt;      &gt;&gt;&gt; On Thu, Aug 22, 2019 at 2:24 AM Daniel P. Berrangé
&gt;     &lt;berrange@redhat.com &lt;mailto:berrange@redhat.com&gt;&gt; wrote:
&gt;      &gt;&gt;&gt;&gt;
&gt;      &gt;&gt;&gt;&gt; On Wed, Aug 21, 2019 at 01:37:21PM -0700, Ihar Hrachyshka wrote:
&gt;      &gt;&gt;&gt;&gt;&gt; Hi all,
&gt;      &gt;&gt;&gt;&gt;&gt;
&gt;      &gt;&gt;&gt;&gt;&gt; KubeVirt uses libvirtd to manage qemu VMs represented as
&gt;     Kubernetes
&gt;      &gt;&gt;&gt;&gt;&gt; API resources. In this case, libvirtd is running inside an
&gt;      &gt;&gt;&gt;&gt;&gt; unprivileged pod, with some host mounts / capabilities added
&gt;     to the
&gt;      &gt;&gt;&gt;&gt;&gt; pod, needed by libvirtd and other services.
&gt;      &gt;&gt;&gt;&gt;&gt;
&gt;      &gt;&gt;&gt;&gt;&gt; One of the capabilities libvirtd requires for successful startup
&gt;      &gt;&gt;&gt;&gt;&gt; inside a pod is SYS_RESOURCE. This capability is used to adjust
&gt;      &gt;&gt;&gt;&gt;&gt; RLIMIT_MEMLOCK ulimit value depending on devices attached to the
&gt;      &gt;&gt;&gt;&gt;&gt; managed guest, both on startup and during hotplug. AFAIU the
&gt;     need to
&gt;      &gt;&gt;&gt;&gt;&gt; lock the memory is to avoid pages being pushed out from RAM
&gt;     into swap.
&gt;      &gt;&gt;
&gt;      &gt;&gt;
&gt;      &gt;&gt; I recall successfully testing GPU assignment from an unprivileged
&gt;      &gt;&gt; libvirtd several years ago by setting a high enough ulimit for
&gt;     the uid
&gt;      &gt;&gt; used to run libvirtd in advance (. I think we check if the current
&gt;      &gt;&gt; setting is high enough, and don't try to set it unless we think
&gt;     we need to.
&gt;      &gt;&gt;
&gt;      &gt;
&gt;      &gt; The PR I linked to in the original email does just that: it starts
&gt;      &gt; libvirtd; then, if domain is going to use VFIO, sets ulimit of
&gt;      &gt; libvirtd process to VM memory size + 1Gb (mimicking libvirt code) +
&gt;      &gt; 256Mb (to stay conservative) using prlimit() syscall; then
&gt;     defines the
&gt;      &gt; domain.
&gt; 
&gt;     So you're making an educated guess, which is essentially what
&gt;     libvirt is
&gt;     doing (based on advice from other people with better information than
&gt;     us, but still a guess).
&gt; 
&gt;      &gt;
&gt;      &gt;&gt; If I understand you correctly, you're saying that in your case
&gt;     it's okay
&gt;      &gt;&gt; for the memlock limit to be lower than we try to set it to,
&gt;     because swap
&gt;      &gt;&gt; is disabled anyway, is that correct?
&gt;      &gt;&gt;
&gt;      &gt;
&gt;      &gt; I'm honestly not exactly sure about the reason why we need to set the
&gt;      &gt; limit, but I assume it's because of swap. I can be totally
&gt;     confused on
&gt;      &gt; that part though.
&gt; 
&gt; 
&gt;     What I understand from an IRC conversation with Alex just now is that
&gt;     increasing RLIMIT_MEMLOCK isn't done just to prevent any of the pages
&gt;     being swapped out. It's done because "all GPAs (Guest Physical
&gt;     Addresses) that could potentially be DMA targets need to have fixed
&gt;     mappings through the iommu, therefore all need to be allocated and
&gt;     mappings fixed [...] setting rlimit allows us to perform all the
&gt;     necessary pins within the user's locked memory limit".
&gt; 
&gt;     So even if swap is disabled, it still needs to be done (either by
&gt;     libvirt, or by someone else who has the necessary privileges and
&gt;     control
&gt;     over the libvirtd process).
&gt; 
&gt; 
&gt;      &gt;&gt;&gt;&gt;
&gt;      &gt;&gt;&gt;&gt; Libvirt shouldn't set RLIMIT_MEMLOCK by default, unless there's
&gt;      &gt;&gt;&gt;&gt; something in the XML that requires it - one of
&gt;      &gt;&gt;&gt;
&gt;      &gt;&gt;&gt; You are right, sorry. We add SYS_RESOURCE only for particular
&gt;     domains.
&gt;      &gt;&gt;&gt;
&gt;      &gt;&gt;&gt;&gt;
&gt;      &gt;&gt;&gt;&gt;    - hard limit memory value is present
&gt;      &gt;&gt;&gt;&gt;    - host PCI device passthrough is requested
&gt;      &gt;&gt;&gt;
&gt;      &gt;&gt;&gt; We are using passthrough
&gt;      &gt;&gt;
&gt;      &gt;&gt; (If you want to make Alex happy, use the term "VFIO device
&gt;     assignment"
&gt;      &gt;&gt; rather than passthrough :-).)
&gt;      &gt;&gt;
&gt;      &gt;
&gt;      &gt; Not sure who Alex is but I'll try to make everyone happy! :)
&gt; 
&gt;     The Alex I'm referring to is the Alex I just Cc'ed. He is the VFIO
&gt;     maintainer.
&gt; 
&gt; 
&gt;      &gt;&gt;&gt; to pass SR-IOV NIC VFs into guests. We also
&gt;      &gt;&gt;&gt; plan to do the same for GPUs in the near future.
&gt;      &gt;&gt;
&gt;      &gt;&gt;   &gt;&gt;&gt; I believe we would benefit from one of the following
&gt;     features on
&gt;      &gt;&gt;   &gt;&gt;&gt; libvirt side (or both):
&gt;      &gt;&gt;   &gt;&gt;&gt;
&gt;      &gt;&gt;   &gt;&gt;&gt; a) expose the memory lock value calculated by libvirtd through
&gt;      &gt;&gt;   &gt;&gt;&gt; libvirt ABI so that we can use it when calling prlimit()
&gt;     on libvirtd
&gt;      &gt;&gt;   &gt;&gt;&gt; process;
&gt;      &gt;&gt;   &gt;&gt;&gt; b) allow to disable setrlimit() calls via libvirtd config
&gt;     file knob
&gt;      &gt;&gt;   &gt;&gt;&gt; or domain definition.
&gt;      &gt;&gt;
&gt;      &gt;&gt; (b) sounds much more reasonable, as long as qemu doesn't complain (I
&gt;      &gt;&gt; don't know whether or not it checks)
&gt;      &gt;&gt;
&gt;      &gt;&gt; Slightly related to this - I'm currently working on patches to avoid
&gt;      &gt;&gt; making any ioctl calls that would fail in an unprivileged
&gt;     libvirtd when
&gt;      &gt;&gt; using tap/macvtap devices. 
&gt; 
&gt; 
&gt; This is music to my ears, great to hear.
&gt; 
&gt;     ATM, I'm doing this by adding an attribute
&gt;      &gt;&gt; "unmanaged='yes'" to the interface &lt;target&gt; element. The idea is
&gt;     that if
&gt;      &gt;&gt; someone sets unmanaged='yes', they're stating that the caller (i.e.
&gt;      &gt;&gt; kubevirt) is responsible for all device setup, and that libvirt
&gt;     should
&gt;      &gt;&gt; just use it without further setup. A similar approach could be
&gt;     applied
&gt;      &gt;&gt; to hostdev devices - if unmanaged is set, we assume that the
&gt;     caller has
&gt;      &gt;&gt; done everything to make the associated device usable.
&gt;      &gt;&gt;
&gt;      &gt;&gt; (Of course this all makes me realize the inanity of adding a &lt;target
&gt;      &gt;&gt; dev='blah' unmanaged='yes'/&gt; for interfaces when hostdevs
&gt;     already have
&gt;      &gt;&gt; &lt;hostdev managed='yes'&gt; and &lt;interface type='hostdev'
&gt;     managed='yes'&gt;. So
&gt;      &gt;&gt; to prevent setting the locklimit for hostdev, would we make a new
&gt;      &gt;&gt; setting like &lt;hostdev managed='no-never-not-even-a-tiny-bit'&gt;?
&gt;     Sigh. I
&gt;      &gt;&gt; *hate* trying to make config consistent :-/)
&gt; 
&gt; 
&gt; Sounds tough indeed. I'd try to avoid negatively-named knobs. managed=no 
&gt; is simpler to perceive than unmanaged=yes.

Yeah, I don't like double negatives either, but since the default needs 
to preserve existing behavior, and it's easier for a default setting to 
be "no" rather than "yes"...,

Still, I'm not married to this name, just using it so that I can get 
*something* going.


&gt; It may be just me, but I'd 
&gt; even assume managed=no if the target dev name is specified. If libvirt 
&gt; manages the tap device, it should create a fresh one, too.

If we were starting from scratch, that's what I would prefer too. The 
only problem is that we have to maintain existing behavior for current 
users. The way that it works currently is that if you specify the tap 
device name and it exists, then libvirt will still set the MAC address 
and some IFF_* flags. If we suddenly stop doing that, then the existing 
users' configs will be broken :-/



&gt; But all of 
&gt; this is a big digression.
&gt; 
&gt;      &gt;&gt;
&gt;      &gt;&gt; (alternately, we could just automatically fail the attempt to
&gt;     set the
&gt;      &gt;&gt; lock limit in a graceful manner and allow the guest to continue)
&gt;      &gt;&gt;
&gt;      &gt;
&gt;      &gt; If that's something maintainers feel good about, I am all for it
&gt;     since
&gt;      &gt; it simplifies the implementation.
&gt; 
&gt;     Well, after talking to Alex, I think that since a) libvirt only
&gt;     attempts
&gt;     to increase the limit after determining that it isn't already high
&gt;     enough, and b) if it isn't high enough and we can't increase it, then
&gt;     qemu is going to fail anyway, that c) we can't just fail gracefully and
&gt;     continue.
&gt; 
&gt;     So *somebody* needs to increase the limit, and if you want libvirt
&gt;     to be
&gt;     unprivileged, that means it needs to be you doing the increase. And
&gt;     since the amount that libvirt increases it is just some number based on
&gt;     oral folklore (and not on a specific value we learn by querying
&gt;     somewhere), I don't think it's worthwhile figuring out some way for
&gt;     libvirt to report it via an official API - that would end up just being
&gt;     this:
&gt; 
&gt;     "Hey, you know that number that you guys are just making a guess about
&gt;     based on some advice someone gave you once? Yeah, send me *that* number
&gt;     so I can claim to be basing my actions on real science instead of
&gt;     slightly educated voodoo! K THX BYE!" :-)
&gt; 
&gt; 
&gt; Well, it's more like: "you know that voodoo you do to guess the number? 
&gt; If you ever educate yourself about it, e.g by querying qemu, send me 
&gt; *that* number. I'd rather not think about it ever again, BYE."

I can see the motivation. But that assumes that qemu knows the right 
answer, and had a way to query it. If they ever do that, then maybe we 
could think about supporting it, but until then reporting any value is 
tantamount to lying.


&gt; 
&gt; 
&gt;      &gt;
&gt;      &gt;&gt; BTW, I'm guessing that you use &lt;hostdev&gt; to assign the SRIOV VFs
&gt;     rather
&gt;      &gt;&gt; than &lt;interface type='hostdev'&gt;, correct? The latter would
&gt;     require that
&gt;      &gt;&gt; you have enough capabilities to set MAC addresses on the VFs
&gt;     (that's the
&gt;      &gt;&gt; entire point of using &lt;interface type='hostdev'&gt; instead of
&gt;     plain &lt;hostdev&gt;)
&gt;      &gt;
&gt;      &gt; Yes, we use &lt;hostdev&gt; exactly because interface sets MAC address: in
&gt;      &gt; kubevirt scenario, the container that is running libvirtd has its own
&gt;      &gt; network namespace and doesn't have access to PF to set the VF MAC
&gt;      &gt; address on. Instead, we rely on CNI plugin that is running in the
&gt;     root
&gt;      &gt; namespace context to configure the VF interface as needed. (I've
&gt;      &gt; contributed custom MAC support to SR-IOV CNI plugin very recently.)
&gt;      &gt;
&gt;      &gt; Ihar
&gt;      &gt;
&gt; 
&gt;     _______________________________________________
&gt;     libvirt-users mailing list
&gt;     libvirt-users@redhat.com &lt;mailto:libvirt-users@redhat.com&gt;
&gt;     https://www.redhat.com/mailman/listinfo/libvirt-users
&gt; 

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190826022116</emailId><senderName>Su Hua</senderName><senderEmail>suhua.tanke@gmail.com</senderEmail><timestampReceived>2019-08-26 02:21:16-0400</timestampReceived><subject>[libvirt-users] About vhost-user-blk support</subject><body>

Hi, everyone, ask a question, which version can fully support the device type
of qemu hw/block/vhost-user-blk.c? If so, what should the format of the xml
file look like?

Regards
       Su

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190827163244</emailId><senderName>Kaushal Shriyan</senderName><senderEmail>kaushalshriyan@gmail.com</senderEmail><timestampReceived>2019-08-27 16:32:44-0400</timestampReceived><subject>Re: [libvirt-users] CPU and Memory requirements for host OS ( CentOS 7.6) on Dell Poweredge R630 ser</subject><body>

[Attachment #2 (multipart/alternative)]


On Tue, Aug 27, 2019 at 1:05 PM Sven Schwedas &lt;sven.schwedas@tao.at&gt; wrote:

&gt; That depends on what you plan on doing with the host. IIRC live VM
&gt; migrations use host CPU time, and depending on transport can use quite a
&gt; bit of CPU (for encryption/compression). Same with storage, if you have
&gt; a ZFS/btrfs/LVM2/RAID/encryption setup that requires a lot of CPU,
&gt; that's also counted against host CPU time.
&gt;
&gt; libvirtd itself doesn't need all that much resources for itself, that
&gt; said. 2 cores and 2GB RAM should suffice as baseline? Plus whatever you
&gt; need to meet above needs, if any apply.
&gt;
&gt;
Hi Sven,

So for host OS, 2 vCPU's with 2GB Memory is enough. Please comment. I have
spawned 10 KVM based VM's with CentOS 7.6 on the bare metal server (Dell
R630 Poweredge 1U with 32 cores vCPU's and 96 GB RAM.) Is there a way to
find out the system resources utilization for all the 10 VM's?

Best Regards,

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;&lt;/div&gt;&lt;br&gt;&lt;div class="gmail_quote"&gt;&lt;div dir="ltr" \
class="gmail_attr"&gt;On Tue, Aug 27, 2019 at 1:05 PM Sven Schwedas &lt;&lt;a \
href="mailto:sven.schwedas@tao.at"&gt;sven.schwedas@tao.at&lt;/a&gt;&gt; \
wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote class="gmail_quote" style="margin:0px 0px 0px \
0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"&gt;That depends on what \
you plan on doing with the host. IIRC live VM&lt;br&gt; migrations use host CPU time, and \
depending on transport can use quite a&lt;br&gt; bit of CPU (for encryption/compression). \
Same with storage, if you have&lt;br&gt; a ZFS/btrfs/LVM2/RAID/encryption setup that \
requires a lot of CPU,&lt;br&gt; that's also counted against host CPU time.&lt;br&gt;
&lt;br&gt;
libvirtd itself doesn't need all that much resources for itself, that&lt;br&gt;
said. 2 cores and 2GB RAM should suffice as baseline? Plus whatever you&lt;br&gt;
need to meet above needs, if any apply.&lt;br&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Hi \
Sven,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;So for host OS, 2 vCPU's with 2GB Memory is \
enough. Please comment. I have spawned 10 KVM based VM's with CentOS 7.6 on the \
bare metal server (Dell R630 Poweredge 1U with 32 cores vCPU's and 96 GB RAM.) Is \
there a way to find out the system resources utilization for all the 10 \
VM's?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Best  Regards,&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190829093758</emailId><senderName>Valentina Krasnobaeva</senderName><senderEmail>valentina.krasnobaeva@6wind.com</senderEmail><timestampReceived>2019-08-29 09:37:58-0400</timestampReceived><subject>[libvirt-users] [libvirtd] qemu_process: reset CPU affinity to all enabled CPUs, when runs in custom</subject><body>

[Attachment #2 (multipart/alternative)]


Hello All,

Since 4.5.0-23.el7 version (Red Hat 7.7), when I launch pinned VM,
libvirtd reset CPU affinity to all enabled in host CPUs, if it runs in
custom cpuset.
I can't reproduce this behavior with 4.5.0-10.el7_6.12 with the same
kernel version (Red Hat 7.7).

Libvirt runs in a custom cpuset 'libvirt', where the number of
available cpus is restricted to 0,2,4,6,8.
And this 'libvirt' cpuset is created in a system with total cpus
number: 40 (all cpus are enabled in BIOS) and I have '0-39' range in
/sys/fs/cgroup/cpuset/cpuset.cpus.

When a VM with pinned vcpus is launched, VM XML config is in attachement:

  &lt;vcpu placement='static'&gt;2&lt;/vcpu&gt;
  &lt;vcpupin vcpu='0' cpuset='4'/&gt;
  &lt;vcpupin vcpu='1' cpuset='6'/&gt;

I have the following error:

# virsh create /tmp/vm1_2vms-2cores_host1.xml
error: Failed to create domain from /tmp/vm1_2vms-2cores_host1.xml
error: Unable to write to
'/sys/fs/cgroup/cpuset/machine.slice/machine-qemu\x2d1\x2dvm12vms\x2d2coreshost1.scope/emulator/cpuset.cpus':
 Permission denied

And in the debug log I can see, that
/sys/fs/cgroup/cpuset/machine.slice was created with a proper cpuset
list: 0,2,4,6,8.
This list at the beginning was successfully inherited and set in
/sys/fs/cgroup/cpuset/machine.slice/machine-qemu\x2d1\x2dvm12vms\x2d2coreshost1.scope/emulator/cpuset.cpus.
 But finally libvirtd tries to reset inherited cpus and set there: "0-39"

2019-08-28 15:11:03.357+0000: 25536: debug : virCgroupDetect:747 :
Detected mount/mapping 0:cpu at /sys/fs/cgroup/cpu,cpuacct in
/machine.slice/machine-qemu\x2d4\x2dvm12vms\x2d2coreshost1.scope/emulator
for pid -1
2019-08-28 15:11:03.357+0000: 25536: debug : virCgroupDetect:747 :
Detected mount/mapping 1:cpuacct at /sys/fs/cgroup/cpu,cpuacct in
/machine.slice/machine-qemu\x2d4\x2dvm12vms\x2d2coreshost1.scope/emulator
for pid -1
2019-08-28 15:11:03.357+0000: 25536: debug : virCgroupDetect:747 :
Detected mount/mapping 2:cpuset at /sys/fs/cgroup/cpuset in
/machine.slice/machine-qemu\x2d4\x2dvm12vms\x2d2coreshost1.scope/emulator
for pid -1
2019-08-28 15:11:03.357+0000: 25536: debug : virCgroupMakeGroup:1049 :
Make group /machine.slice/machine-qemu\x2d4\x2dvm12vms\x2d2coreshost1.scope/emulator
2019-08-28 15:11:03.357+0000: 25536: debug : virCgroupMakeGroup:1073 :
Make controller
/sys/fs/cgroup/cpu,cpuacct/machine.slice/machine-qemu\x2d4\x2dvm12vms\x2d2coreshost1.scope/emulator/
 2019-08-28 15:11:03.357+0000: 25536: debug : virCgroupMakeGroup:1073 :
Make controller
/sys/fs/cgroup/cpu,cpuacct/machine.slice/machine-qemu\x2d4\x2dvm12vms\x2d2coreshost1.scope/emulator/
 2019-08-28 15:11:03.357+0000: 25536: debug : virCgroupMakeGroup:1073 :
Make controller
/sys/fs/cgroup/cpuset/machine.slice/machine-qemu\x2d4\x2dvm12vms\x2d2coreshost1.scope/emulator/
 2019-08-28 15:11:03.357+0000: 25536: debug :
virCgroupCpuSetInherit:989 : Setting up inheritance
/machine.slice/machine-qemu\x2d4\x2dvm12vms\x2d2coreshost1.scope -&gt;
/machine.slice/machine-qemu\x2d4\x2dvm12vms\x2d2coreshost1.scope/emulator
2019-08-28 15:11:03.357+0000: 25536: debug : virCgroupGetValueStr:832
&gt; Get value /sys/fs/cgroup/cpuset/machine.slice/machine-qemu\x2d4\x2dvm12vms\x2d2coreshost1.scope/cpuset.cpus
&gt; 
2019-08-28 15:11:03.357+0000: 25536: debug : virFileClose:111 : Closed fd 27
2019-08-28 15:11:03.357+0000: 25536: debug :
virCgroupCpuSetInherit:999 : Inherit cpuset.cpus = 0,2,4,6,8
2019-08-28 15:11:03.357+0000: 25536: debug : virCgroupSetValueStr:796
&gt; Set value '/sys/fs/cgroup/cpuset/machine.slice/machine-qemu\x2d4\x2dvm12vms\x2d2coreshost1.scope/emulator/cpuset.cpus'
&gt; 
to '0,2,4,6,8'
2019-08-28 15:11:03.358+0000: 25536: debug : virFileClose:111 : Closed fd 27
2019-08-28 15:11:03.358+0000: 25536: debug : virCgroupGetValueStr:832
&gt; Get value /sys/fs/cgroup/cpuset/machine.slice/machine-qemu\x2d4\x2dvm12vms\x2d2coreshost1.scope/cpuset.mems
&gt; 
2019-08-28 15:11:03.358+0000: 25536: debug : virFileClose:111 : Closed fd 27
2019-08-28 15:11:03.358+0000: 25536: debug :
virCgroupCpuSetInherit:999 : Inherit cpuset.mems = 0-1
2019-08-28 15:11:03.358+0000: 25536: debug : virCgroupSetValueStr:796
&gt; Set value '/sys/fs/cgroup/cpuset/machine.slice/machine-qemu\x2d4\x2dvm12vms\x2d2coreshost1.scope/emulator/cpuset.mems'
&gt; 
to '0-1'
2019-08-28 15:11:03.358+0000: 25536: debug : virFileClose:111 : Closed fd 27
2019-08-28 15:11:03.358+0000: 25536: debug : virCgroupGetValueStr:832
&gt; Get value /sys/fs/cgroup/cpuset/machine.slice/machine-qemu\x2d4\x2dvm12vms\x2d2coreshost1.scope/cpuset.memory_migrate
&gt; 
2019-08-28 15:11:03.358+0000: 25536: debug : virFileClose:111 : Closed fd 27
2019-08-28 15:11:03.358+0000: 25536: debug :
virCgroupCpuSetInherit:999 : Inherit cpuset.memory_migrate = 1
2019-08-28 15:11:03.358+0000: 25536: debug : virCgroupSetValueStr:796
&gt; Set value '/sys/fs/cgroup/cpuset/machine.slice/machine-qemu\x2d4\x2dvm12vms\x2d2coreshost1.scope/emulator/cpuset.memory_migrate'
&gt; 
to '1'
2019-08-28 15:11:03.358+0000: 25536: debug : virFileClose:111 : Closed fd 27
2019-08-28 15:11:03.358+0000: 25536: debug : virCgroupMakeGroup:1062 :
Skipping unmounted controller memory
2019-08-28 15:11:03.358+0000: 25536: debug : virCgroupMakeGroup:1062 :
Skipping unmounted controller devices
2019-08-28 15:11:03.358+0000: 25536: debug : virCgroupMakeGroup:1062 :
Skipping unmounted controller freezer
2019-08-28 15:11:03.358+0000: 25536: debug : virCgroupMakeGroup:1062 :
Skipping unmounted controller blkio
2019-08-28 15:11:03.358+0000: 25536: debug : virCgroupMakeGroup:1062 :
Skipping unmounted controller net_cls
2019-08-28 15:11:03.358+0000: 25536: debug : virCgroupMakeGroup:1062 :
Skipping unmounted controller perf_event
2019-08-28 15:11:03.358+0000: 25536: debug : virCgroupMakeGroup:1055 :
Not creating systemd controller group
2019-08-28 15:11:03.358+0000: 25536: debug : virCgroupMakeGroup:1126 :
Done making controllers for group
2019-08-28 15:11:03.358+0000: 25536: debug : virCgroupSetValueStr:796
&gt; Set value '/sys/fs/cgroup/cpuset/machine.slice/machine-qemu\x2d4\x2dvm12vms\x2d2coreshost1.scope/emulator/cpuset.cpus'
&gt; 
to '0-39'
2019-08-28 15:11:03.358+0000: 25536: debug : virFileClose:111 : Closed fd 27
2019-08-28 15:11:03.358+0000: 25536: error : virCgroupSetValueStr:806
&gt; Unable to write to
'/sys/fs/cgroup/cpuset/machine.slice/machine-qemu\x2d4\x2dvm12vms\x2d2coreshost1.scope/emulator/cpuset.cpus':
 Permission denied

The same log snippet with 4.5.0-10.el7_6.12 version, everything works well:

2019-08-28 16:13:22.837+0000: 26937: debug : virCgroupDetect:747 :
Detected mount/mapping 0:cpu at /sys/fs/cgroup/cpu,cpuacct in
/machine.slice/machine-qemu\x2d1\x2dvm12vms\x2d2coreshost1.scope/vcpu1
for pid -1
2019-08-28 16:13:22.837+0000: 26937: debug : virCgroupDetect:747 :
Detected mount/mapping 1:cpuacct at /sys/fs/cgroup/cpu,cpuacct in
/machine.slice/machine-qemu\x2d1\x2dvm12vms\x2d2coreshost1.scope/vcpu1
for pid -1
2019-08-28 16:13:22.837+0000: 26937: debug : virCgroupDetect:747 :
Detected mount/mapping 2:cpuset at /sys/fs/cgroup/cpuset in
/machine.slice/machine-qemu\x2d1\x2dvm12vms\x2d2coreshost1.scope/vcpu1
for pid -1
2019-08-28 16:13:22.837+0000: 26937: debug : virCgroupMakeGroup:1049 :
Make group /machine.slice/machine-qemu\x2d1\x2dvm12vms\x2d2coreshost1.scope/vcpu1
2019-08-28 16:13:22.837+0000: 26937: debug : virCgroupMakeGroup:1073 :
Make controller
/sys/fs/cgroup/cpu,cpuacct/machine.slice/machine-qemu\x2d1\x2dvm12vms\x2d2coreshost1.scope/vcpu1/
 2019-08-28 16:13:22.837+0000: 26937: debug : virCgroupMakeGroup:1073 :
Make controller
/sys/fs/cgroup/cpu,cpuacct/machine.slice/machine-qemu\x2d1\x2dvm12vms\x2d2coreshost1.scope/vcpu1/
 2019-08-28 16:13:22.837+0000: 26937: debug : virCgroupMakeGroup:1073 :
Make controller
/sys/fs/cgroup/cpuset/machine.slice/machine-qemu\x2d1\x2dvm12vms\x2d2coreshost1.scope/vcpu1/
 2019-08-28 16:13:22.838+0000: 26937: debug :
virCgroupCpuSetInherit:989 : Setting up inheritance
/machine.slice/machine-qemu\x2d1\x2dvm12vms\x2d2coreshost1.scope -&gt;
/machine.slice/machine-qemu\x2d1\x2dvm12vms\x2d2coreshost1.scope/vcpu1
2019-08-28 16:13:22.838+0000: 26937: debug : virCgroupGetValueStr:832
&gt; Get value /sys/fs/cgroup/cpuset/machine.slice/machine-qemu\x2d1\x2dvm12vms\x2d2coreshost1.scope/cpuset.cpus
&gt; 
2019-08-28 16:13:22.838+0000: 26937: debug : virFileClose:111 : Closed fd 29
2019-08-28 16:13:22.838+0000: 26937: debug :
virCgroupCpuSetInherit:999 : Inherit cpuset.cpus = 0,2,4,6,8
2019-08-28 16:13:22.838+0000: 26937: debug : virCgroupSetValueStr:796
&gt; Set value '/sys/fs/cgroup/cpuset/machine.slice/machine-qemu\x2d1\x2dvm12vms\x2d2coreshost1.scope/vcpu1/cpuset.cpus'
&gt; 
to '0,2,4,6,8'
2019-08-28 16:13:22.838+0000: 26937: debug : virFileClose:111 : Closed fd 29
2019-08-28 16:13:22.838+0000: 26937: debug : virCgroupGetValueStr:832
&gt; Get value /sys/fs/cgroup/cpuset/machine.slice/machine-qemu\x2d1\x2dvm12vms\x2d2coreshost1.scope/cpuset.mems
&gt; 
2019-08-28 16:13:22.838+0000: 26937: debug : virFileClose:111 : Closed fd 29
2019-08-28 16:13:22.838+0000: 26937: debug :
virCgroupCpuSetInherit:999 : Inherit cpuset.mems = 0-1
2019-08-28 16:13:22.838+0000: 26937: debug : virCgroupSetValueStr:796
&gt; Set value '/sys/fs/cgroup/cpuset/machine.slice/machine-qemu\x2d1\x2dvm12vms\x2d2coreshost1.scope/vcpu1/cpuset.mems'
&gt; 
to '0-1'
2019-08-28 16:13:22.838+0000: 26937: debug : virFileClose:111 : Closed fd 29
2019-08-28 16:13:22.838+0000: 26937: debug : virCgroupGetValueStr:832
&gt; Get value /sys/fs/cgroup/cpuset/machine.slice/machine-qemu\x2d1\x2dvm12vms\x2d2coreshost1.scope/cpuset.memory_migrate
&gt; 
2019-08-28 16:13:22.838+0000: 26937: debug : virFileClose:111 : Closed fd 29
2019-08-28 16:13:22.838+0000: 26937: debug :
virCgroupCpuSetInherit:999 : Inherit cpuset.memory_migrate = 1
2019-08-28 16:13:22.838+0000: 26937: debug : virCgroupSetValueStr:796
&gt; Set value '/sys/fs/cgroup/cpuset/machine.slice/machine-qemu\x2d1\x2dvm12vms\x2d2coreshost1.scope/vcpu1/cpuset.memory_migrate'
&gt; 
to '1'
2019-08-28 16:13:22.838+0000: 26937: debug : virFileClose:111 : Closed fd 29
2019-08-28 16:13:22.838+0000: 26937: debug : virCgroupMakeGroup:1062 :
Skipping unmounted controller memory
2019-08-28 16:13:22.838+0000: 26937: debug : virCgroupMakeGroup:1062 :
Skipping unmounted controller devices
2019-08-28 16:13:22.838+0000: 26937: debug : virCgroupMakeGroup:1062 :
Skipping unmounted controller freezer
2019-08-28 16:13:22.838+0000: 26937: debug : virCgroupMakeGroup:1062 :
Skipping unmounted controller blkio
2019-08-28 16:13:22.838+0000: 26937: debug : virCgroupMakeGroup:1062 :
Skipping unmounted controller net_cls
2019-08-28 16:13:22.838+0000: 26937: debug : virCgroupMakeGroup:1062 :
Skipping unmounted controller perf_event
2019-08-28 16:13:22.838+0000: 26937: debug : virCgroupMakeGroup:1055 :
Not creating systemd controller group
2019-08-28 16:13:22.838+0000: 26937: debug : virCgroupMakeGroup:1126 :
Done making controllers for group
2019-08-28 16:13:22.838+0000: 26937: debug : virCgroupSetValueStr:796
&gt; Set value '/sys/fs/cgroup/cpuset/machine.slice/machine-qemu\x2d1\x2dvm12vms\x2d2coreshost1.scope/vcpu1/cpuset.mems'
&gt; 
to '0'
2019-08-28 16:13:22.838+0000: 26937: debug : virFileClose:111 : Closed fd 29
2019-08-28 16:13:22.838+0000: 26937: debug : virCgroupSetValueStr:796
&gt; Set value '/sys/fs/cgroup/cpu,cpuacct/machine.slice/machine-qemu\x2d1\x2dvm12vms\x2d2coreshost1.scope/vcpu1/tasks'
&gt; 
to '27045'

Would someone give me a hint, please, if we need to change settings
lied to NUMA or vCPUs in VM XML config according to last changed in
libvirtd ?

Please, find a bug report about this issue here:
https://bugzilla.redhat.com/show_bug.cgi?id=1746517

I suppose, that this may be an impact of one of the following patches
applied to 4.5.0-10.el7_6.12 source code version:

libvirt-qemu-Rework-setting-process-affinity.patch
libvirt-qemu-Fix-qemuProcessInitCpuAffinity.patch
libvirt-qemu-Fix-NULL-pointer-access-in-qemuProcessInitCpuAffinity.patch
libvirt-qemu-Fix-leak-in-qemuProcessInitCpuAffinity.patch

How reproducible: Always

Steps to Reproduce:
1. create a cpuset with reduced cpus list and launch libvirtd in it
2. prepare VM XML with pinned vcpus and &lt;numatune&gt; setting
3. virsh create vm.xml

Actual results:

error: Failed to create domain from /tmp/vm1_2vms-2cores_host1.xml
error: Unable to write to
'/sys/fs/cgroup/cpuset/machine.slice/machine-qemu\x2d1\x2dvm12vms\x2d2coreshost1.scope/emulator/cpuset.cpus':
 Permission denied

Expected results:
should work as with a previous version 4.5.0-10.el7_6.12.

Additional info:

# ps auxf | grep libvirt
root     24571  2.3  0.0 1895564 28052 ?       Ssl  16:52   0:00
/usr/sbin/libvirtd

# grep Cpus_allowed /proc/24571/task/*/status
/proc/24571/task/24571/status:Cpus_allowed:     00,00000554
/proc/24571/task/24571/status:Cpus_allowed_list:        2,4,6,8,10
/proc/24571/task/24572/status:Cpus_allowed:     00,00000554
/proc/24571/task/24572/status:Cpus_allowed_list:        2,4,6,8,10
/proc/24571/task/24573/status:Cpus_allowed:     00,00000554
/proc/24571/task/24573/status:Cpus_allowed_list:        2,4,6,8,10
/proc/24571/task/24574/status:Cpus_allowed:     00,00000554
/proc/24571/task/24574/status:Cpus_allowed_list:        2,4,6,8,10
/proc/24571/task/24575/status:Cpus_allowed:     00,00000554
..
for all threads

Processor: "Intel(R) Xeon(R) CPU E5-2630 v4 @ 2.20GHz"

        Sockets: 2, Cores: 20, HyperThreads: 40

         socket 0                 socket 1
  +---------------------+  +---------------------+
  |        c0        c1 |  |        c0        c1 |
  | +-------+ +-------+ |  | +-------+ +-------+ |
  | |  0| 20| |  2| 22| |  | |  1| 21| |  3| 23| |
  | +-------+ +-------+ |  | +-------+ +-------+ |
  |        c2        c3 |  |        c2        c3 |
  | +-------+ +-------+ |  | +-------+ +-------+ |
  | |  4| 24| |  6| 26| |  | |  5| 25| |  7| 27| |
  | +-------+ +-------+ |  | +-------+ +-------+ |
  |        c4        c8 |  |        c4        c8 |
  | +-------+ +-------+ |  | +-------+ +-------+ |
  | |  8| 28| | 10| 30| |  | |  9| 29| | 11| 31| |
  | +-------+ +-------+ |  | +-------+ +-------+ |
  |        c9       c10 |  |        c9       c10 |
  | +-------+ +-------+ |  | +-------+ +-------+ |
  | | 12| 32| | 14| 34| |  | | 13| 33| | 15| 35| |
  | +-------+ +-------+ |  | +-------+ +-------+ |
  |       c11       c12 |  |       c11       c12 |
  | +-------+ +-------+ |  | +-------+ +-------+ |
  | | 16| 36| | 18| 38| |  | | 17| 37| | 19| 39| |
  | +-------+ +-------+ |  | +-------+ +-------+ |
  +---------------------+  +---------------------+

# cat  /sys/fs/cgroup/cpuset/cpuset.cpus
0-39

# cat  /sys/fs/cgroup/cpuset/libvirt/cpuset.cpus
2,4,6,8,10

# cat /sys/fs/cgroup/cpuset/machine.slice/cpuset.cpus
0,2,4,6,8


[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;&lt;div \
dir="ltr"&gt;&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;&lt;div \
dir="ltr"&gt;&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;Hello \
All,&lt;br&gt;&lt;pre class="gmail-bz_comment_text" id="gmail-comment_text_0"&gt;Since \
4.5.0-23.el7 version (Red Hat 7.7), when I launch pinned VM, libvirtd reset CPU \
affinity to all enabled in host CPUs, if it runs in custom cpuset.  &lt;br&gt;I can't \
reproduce this behavior with 4.5.0-10.el7_6.12 with the same kernel version (Red Hat \
7.7).

Libvirt runs in a custom cpuset 'libvirt', where the number of available cpus \
is restricted to 0,2,4,6,8. &lt;br&gt;And this 'libvirt' cpuset is created in a \
system with total cpus number: 40 (all cpus are enabled in BIOS) and I have \
'0-39' range in /sys/fs/cgroup/cpuset/cpuset.cpus. 

When a VM with pinned vcpus is launched, VM XML config is in attachement:

  &lt;vcpu placement='static'&gt;2&lt;/vcpu&gt;
  &lt;vcpupin vcpu='0' cpuset='4'/&gt;
  &lt;vcpupin vcpu='1' cpuset='6'/&gt;

I have the following error:

# virsh create /tmp/vm1_2vms-2cores_host1.xml 
error: Failed to create domain from /tmp/vm1_2vms-2cores_host1.xml
error: Unable to write to \
'/sys/fs/cgroup/cpuset/machine.slice/machine-qemu\x2d1\x2dvm12vms\x2d2coreshost1.scope/emulator/cpuset.cpus': \
Permission denied

And in the debug log I can see, that /sys/fs/cgroup/cpuset/machine.slice was created \
with a proper cpuset list: 0,2,4,6,8. &lt;br&gt;This list at the beginning was successfully \
inherited and set in \
/sys/fs/cgroup/cpuset/machine.slice/machine-qemu\x2d1\x2dvm12vms\x2d2coreshost1.scope/emulator/cpuset.cpus. \
&lt;br&gt;But finally libvirtd tries to reset inherited cpus and set there: \
"0-39"

2019-08-28 15:11:03.357+0000: 25536: debug : virCgroupDetect:747 : Detected \
mount/mapping 0:cpu at /sys/fs/cgroup/cpu,cpuacct in \
/machine.slice/machine-qemu\x2d4\x2dvm12vms\x2d2coreshost1.scope/emulator for pid -1 \
2019-08-28 15:11:03.357+0000: 25536: debug : virCgroupDetect:747 : Detected \
mount/mapping 1:cpuacct at /sys/fs/cgroup/cpu,cpuacct in \
/machine.slice/machine-qemu\x2d4\x2dvm12vms\x2d2coreshost1.scope/emulator for pid -1 \
2019-08-28 15:11:03.357+0000: 25536: debug : virCgroupDetect:747 : Detected \
mount/mapping 2:cpuset at /sys/fs/cgroup/cpuset in \
/machine.slice/machine-qemu\x2d4\x2dvm12vms\x2d2coreshost1.scope/emulator for pid -1 \
2019-08-28 15:11:03.357+0000: 25536: debug : virCgroupMakeGroup:1049 : Make group \
/machine.slice/machine-qemu\x2d4\x2dvm12vms\x2d2coreshost1.scope/emulator 2019-08-28 \
15:11:03.357+0000: 25536: debug : virCgroupMakeGroup:1073 : Make controller \
/sys/fs/cgroup/cpu,cpuacct/machine.slice/machine-qemu\x2d4\x2dvm12vms\x2d2coreshost1.scope/emulator/
 2019-08-28 15:11:03.357+0000: 25536: debug : virCgroupMakeGroup:1073 : Make \
controller /sys/fs/cgroup/cpu,cpuacct/machine.slice/machine-qemu\x2d4\x2dvm12vms\x2d2coreshost1.scope/emulator/
 2019-08-28 15:11:03.357+0000: 25536: debug : virCgroupMakeGroup:1073 : Make \
controller /sys/fs/cgroup/cpuset/machine.slice/machine-qemu\x2d4\x2dvm12vms\x2d2coreshost1.scope/emulator/
 2019-08-28 15:11:03.357+0000: 25536: debug : virCgroupCpuSetInherit:989 : Setting up \
inheritance /machine.slice/machine-qemu\x2d4\x2dvm12vms\x2d2coreshost1.scope -&gt; \
/machine.slice/machine-qemu\x2d4\x2dvm12vms\x2d2coreshost1.scope/emulator 2019-08-28 \
15:11:03.357+0000: 25536: debug : virCgroupGetValueStr:832 : Get value \
/sys/fs/cgroup/cpuset/machine.slice/machine-qemu\x2d4\x2dvm12vms\x2d2coreshost1.scope/cpuset.cpus
 2019-08-28 15:11:03.357+0000: 25536: debug : virFileClose:111 : Closed fd 27
2019-08-28 15:11:03.357+0000: 25536: debug : virCgroupCpuSetInherit:999 : Inherit \
cpuset.cpus = 0,2,4,6,8 2019-08-28 15:11:03.357+0000: 25536: debug : \
virCgroupSetValueStr:796 : Set value \
'/sys/fs/cgroup/cpuset/machine.slice/machine-qemu\x2d4\x2dvm12vms\x2d2coreshost1.scope/emulator/cpuset.cpus' \
to '0,2,4,6,8' 2019-08-28 15:11:03.358+0000: 25536: debug : virFileClose:111 \
: Closed fd 27 2019-08-28 15:11:03.358+0000: 25536: debug : virCgroupGetValueStr:832 \
: Get value /sys/fs/cgroup/cpuset/machine.slice/machine-qemu\x2d4\x2dvm12vms\x2d2coreshost1.scope/cpuset.mems
 2019-08-28 15:11:03.358+0000: 25536: debug : virFileClose:111 : Closed fd 27
2019-08-28 15:11:03.358+0000: 25536: debug : virCgroupCpuSetInherit:999 : Inherit \
cpuset.mems = 0-1 2019-08-28 15:11:03.358+0000: 25536: debug : \
virCgroupSetValueStr:796 : Set value \
'/sys/fs/cgroup/cpuset/machine.slice/machine-qemu\x2d4\x2dvm12vms\x2d2coreshost1.scope/emulator/cpuset.mems' \
to '0-1' 2019-08-28 15:11:03.358+0000: 25536: debug : virFileClose:111 : \
Closed fd 27 2019-08-28 15:11:03.358+0000: 25536: debug : virCgroupGetValueStr:832 : \
Get value /sys/fs/cgroup/cpuset/machine.slice/machine-qemu\x2d4\x2dvm12vms\x2d2coreshost1.scope/cpuset.memory_migrate
 2019-08-28 15:11:03.358+0000: 25536: debug : virFileClose:111 : Closed fd 27
2019-08-28 15:11:03.358+0000: 25536: debug : virCgroupCpuSetInherit:999 : Inherit \
cpuset.memory_migrate = 1 2019-08-28 15:11:03.358+0000: 25536: debug : \
virCgroupSetValueStr:796 : Set value \
'/sys/fs/cgroup/cpuset/machine.slice/machine-qemu\x2d4\x2dvm12vms\x2d2coreshost1.scope/emulator/cpuset.memory_migrate' \
to '1' 2019-08-28 15:11:03.358+0000: 25536: debug : virFileClose:111 : Closed \
fd 27 2019-08-28 15:11:03.358+0000: 25536: debug : virCgroupMakeGroup:1062 : Skipping \
unmounted controller memory 2019-08-28 15:11:03.358+0000: 25536: debug : \
virCgroupMakeGroup:1062 : Skipping unmounted controller devices 2019-08-28 \
15:11:03.358+0000: 25536: debug : virCgroupMakeGroup:1062 : Skipping unmounted \
controller freezer 2019-08-28 15:11:03.358+0000: 25536: debug : \
virCgroupMakeGroup:1062 : Skipping unmounted controller blkio 2019-08-28 \
15:11:03.358+0000: 25536: debug : virCgroupMakeGroup:1062 : Skipping unmounted \
controller net_cls 2019-08-28 15:11:03.358+0000: 25536: debug : \
virCgroupMakeGroup:1062 : Skipping unmounted controller perf_event 2019-08-28 \
15:11:03.358+0000: 25536: debug : virCgroupMakeGroup:1055 : Not creating systemd \
controller group 2019-08-28 15:11:03.358+0000: 25536: debug : virCgroupMakeGroup:1126 \
: Done making controllers for group 2019-08-28 15:11:03.358+0000: 25536: debug : \
virCgroupSetValueStr:796 : Set value \
'/sys/fs/cgroup/cpuset/machine.slice/machine-qemu\x2d4\x2dvm12vms\x2d2coreshost1.scope/emulator/cpuset.cpus' \
to '0-39' 2019-08-28 15:11:03.358+0000: 25536: debug : virFileClose:111 : \
Closed fd 27 2019-08-28 15:11:03.358+0000: 25536: error : virCgroupSetValueStr:806 : \
Unable to write to '/sys/fs/cgroup/cpuset/machine.slice/machine-qemu\x2d4\x2dvm12vms\x2d2coreshost1.scope/emulator/cpuset.cpus': \
Permission denied

The same log snippet with 4.5.0-10.el7_6.12 version, everything works well:

2019-08-28 16:13:22.837+0000: 26937: debug : virCgroupDetect:747 : Detected \
mount/mapping 0:cpu at /sys/fs/cgroup/cpu,cpuacct in \
/machine.slice/machine-qemu\x2d1\x2dvm12vms\x2d2coreshost1.scope/vcpu1 for pid -1 \
2019-08-28 16:13:22.837+0000: 26937: debug : virCgroupDetect:747 : Detected \
mount/mapping 1:cpuacct at /sys/fs/cgroup/cpu,cpuacct in \
/machine.slice/machine-qemu\x2d1\x2dvm12vms\x2d2coreshost1.scope/vcpu1 for pid -1 \
2019-08-28 16:13:22.837+0000: 26937: debug : virCgroupDetect:747 : Detected \
mount/mapping 2:cpuset at /sys/fs/cgroup/cpuset in \
/machine.slice/machine-qemu\x2d1\x2dvm12vms\x2d2coreshost1.scope/vcpu1 for pid -1 \
2019-08-28 16:13:22.837+0000: 26937: debug : virCgroupMakeGroup:1049 : Make group \
/machine.slice/machine-qemu\x2d1\x2dvm12vms\x2d2coreshost1.scope/vcpu1 2019-08-28 \
16:13:22.837+0000: 26937: debug : virCgroupMakeGroup:1073 : Make controller \
/sys/fs/cgroup/cpu,cpuacct/machine.slice/machine-qemu\x2d1\x2dvm12vms\x2d2coreshost1.scope/vcpu1/
 2019-08-28 16:13:22.837+0000: 26937: debug : virCgroupMakeGroup:1073 : Make \
controller /sys/fs/cgroup/cpu,cpuacct/machine.slice/machine-qemu\x2d1\x2dvm12vms\x2d2coreshost1.scope/vcpu1/
 2019-08-28 16:13:22.837+0000: 26937: debug : virCgroupMakeGroup:1073 : Make \
controller /sys/fs/cgroup/cpuset/machine.slice/machine-qemu\x2d1\x2dvm12vms\x2d2coreshost1.scope/vcpu1/
 2019-08-28 16:13:22.838+0000: 26937: debug : virCgroupCpuSetInherit:989 : Setting up \
inheritance /machine.slice/machine-qemu\x2d1\x2dvm12vms\x2d2coreshost1.scope -&gt; \
/machine.slice/machine-qemu\x2d1\x2dvm12vms\x2d2coreshost1.scope/vcpu1 2019-08-28 \
16:13:22.838+0000: 26937: debug : virCgroupGetValueStr:832 : Get value \
/sys/fs/cgroup/cpuset/machine.slice/machine-qemu\x2d1\x2dvm12vms\x2d2coreshost1.scope/cpuset.cpus
 2019-08-28 16:13:22.838+0000: 26937: debug : virFileClose:111 : Closed fd 29
2019-08-28 16:13:22.838+0000: 26937: debug : virCgroupCpuSetInherit:999 : Inherit \
cpuset.cpus = 0,2,4,6,8 2019-08-28 16:13:22.838+0000: 26937: debug : \
virCgroupSetValueStr:796 : Set value \
'/sys/fs/cgroup/cpuset/machine.slice/machine-qemu\x2d1\x2dvm12vms\x2d2coreshost1.scope/vcpu1/cpuset.cpus' \
to '0,2,4,6,8' 2019-08-28 16:13:22.838+0000: 26937: debug : virFileClose:111 \
: Closed fd 29 2019-08-28 16:13:22.838+0000: 26937: debug : virCgroupGetValueStr:832 \
: Get value /sys/fs/cgroup/cpuset/machine.slice/machine-qemu\x2d1\x2dvm12vms\x2d2coreshost1.scope/cpuset.mems
 2019-08-28 16:13:22.838+0000: 26937: debug : virFileClose:111 : Closed fd 29
2019-08-28 16:13:22.838+0000: 26937: debug : virCgroupCpuSetInherit:999 : Inherit \
cpuset.mems = 0-1 2019-08-28 16:13:22.838+0000: 26937: debug : \
virCgroupSetValueStr:796 : Set value \
'/sys/fs/cgroup/cpuset/machine.slice/machine-qemu\x2d1\x2dvm12vms\x2d2coreshost1.scope/vcpu1/cpuset.mems' \
to '0-1' 2019-08-28 16:13:22.838+0000: 26937: debug : virFileClose:111 : \
Closed fd 29 2019-08-28 16:13:22.838+0000: 26937: debug : virCgroupGetValueStr:832 : \
Get value /sys/fs/cgroup/cpuset/machine.slice/machine-qemu\x2d1\x2dvm12vms\x2d2coreshost1.scope/cpuset.memory_migrate
 2019-08-28 16:13:22.838+0000: 26937: debug : virFileClose:111 : Closed fd 29
2019-08-28 16:13:22.838+0000: 26937: debug : virCgroupCpuSetInherit:999 : Inherit \
cpuset.memory_migrate = 1 2019-08-28 16:13:22.838+0000: 26937: debug : \
virCgroupSetValueStr:796 : Set value \
'/sys/fs/cgroup/cpuset/machine.slice/machine-qemu\x2d1\x2dvm12vms\x2d2coreshost1.scope/vcpu1/cpuset.memory_migrate' \
to '1' 2019-08-28 16:13:22.838+0000: 26937: debug : virFileClose:111 : Closed \
fd 29 2019-08-28 16:13:22.838+0000: 26937: debug : virCgroupMakeGroup:1062 : Skipping \
unmounted controller memory 2019-08-28 16:13:22.838+0000: 26937: debug : \
virCgroupMakeGroup:1062 : Skipping unmounted controller devices 2019-08-28 \
16:13:22.838+0000: 26937: debug : virCgroupMakeGroup:1062 : Skipping unmounted \
controller freezer 2019-08-28 16:13:22.838+0000: 26937: debug : \
virCgroupMakeGroup:1062 : Skipping unmounted controller blkio 2019-08-28 \
16:13:22.838+0000: 26937: debug : virCgroupMakeGroup:1062 : Skipping unmounted \
controller net_cls 2019-08-28 16:13:22.838+0000: 26937: debug : \
virCgroupMakeGroup:1062 : Skipping unmounted controller perf_event 2019-08-28 \
16:13:22.838+0000: 26937: debug : virCgroupMakeGroup:1055 : Not creating systemd \
controller group 2019-08-28 16:13:22.838+0000: 26937: debug : virCgroupMakeGroup:1126 \
: Done making controllers for group 2019-08-28 16:13:22.838+0000: 26937: debug : \
virCgroupSetValueStr:796 : Set value \
'/sys/fs/cgroup/cpuset/machine.slice/machine-qemu\x2d1\x2dvm12vms\x2d2coreshost1.scope/vcpu1/cpuset.mems' \
to '0' 2019-08-28 16:13:22.838+0000: 26937: debug : virFileClose:111 : Closed \
fd 29 2019-08-28 16:13:22.838+0000: 26937: debug : virCgroupSetValueStr:796 : Set \
value '/sys/fs/cgroup/cpu,cpuacct/machine.slice/machine-qemu\x2d1\x2dvm12vms\x2d2coreshost1.scope/vcpu1/tasks' \
to '27045'

Would someone give me a hint, please, if we need to change settings lied to NUMA or \
vCPUs in VM XML config according to last changed in libvirtd ?&lt;br&gt;&lt;/pre&gt;&lt;pre \
class="gmail-bz_comment_text" id="gmail-comment_text_0"&gt;Please, find a bug report \
about this issue here: &lt;a \
href="https://bugzilla.redhat.com/show_bug.cgi?id=1746517"&gt;https://bugzilla.redhat.com/show_bug.cgi?id=1746517&lt;/a&gt;&lt;br&gt;&lt;/pre&gt;&lt;pre \
class="gmail-bz_comment_text" id="gmail-comment_text_0"&gt;I suppose, that this may be \
an impact of one of the following patches applied to 4.5.0-10.el7_6.12 source code \
version:&lt;br&gt;&lt;br&gt;libvirt-qemu-Rework-setting-process-affinity.patch&lt;br&gt;&lt;code&gt;&lt;span \
class="gmail-http"&gt;&lt;span class="gmail-http"&gt;&lt;span \
class="gmail-ruby"&gt;libvirt-qemu-Fix-qemuProcessInitCpuAffinity.&lt;span \
class="gmail-hljs-symbol"&gt;patch&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;br&gt;&lt;code&gt;&lt;span \
class="gmail-http"&gt;&lt;span class="gmail-http"&gt;&lt;span \
class="gmail-ruby"&gt;libvirt-qemu-Fix-NULL-pointer-access-&lt;span \
class="gmail-hljs-keyword"&gt;in&lt;/span&gt;-qemuProcessInitCpuAffinity.&lt;span \
class="gmail-hljs-symbol"&gt;patch&lt;br&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span \
class="gmail-http"&gt;&lt;span class="gmail-http"&gt;&lt;span \
class="gmail-ruby"&gt;libvirt-qemu-Fix-leak-&lt;span \
class="gmail-hljs-keyword"&gt;in&lt;/span&gt;-qemuProcessInitCpuAffinity.&lt;span \
class="gmail-hljs-symbol"&gt;patch&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;br&gt;&lt;code&gt;&lt;span \
class="gmail-http"&gt;&lt;span class="gmail-http"&gt;&lt;span class="gmail-ruby"&gt;&lt;span \
class="gmail-hljs-symbol"&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;br&gt;How reproducible: \
Always

Steps to Reproduce:
1. create a cpuset with reduced cpus list and launch libvirtd in it
2. prepare VM XML with pinned vcpus and &lt;numatune&gt; setting
3. virsh create vm.xml

Actual results:

error: Failed to create domain from /tmp/vm1_2vms-2cores_host1.xml
error: Unable to write to \
'/sys/fs/cgroup/cpuset/machine.slice/machine-qemu\x2d1\x2dvm12vms\x2d2coreshost1.scope/emulator/cpuset.cpus': \
Permission denied

Expected results:
should work as with a previous version 4.5.0-10.el7_6.12.

Additional info:

# ps auxf | grep libvirt
root     24571  2.3  0.0 1895564 28052 ?       Ssl  16:52   0:00 /usr/sbin/libvirtd

# grep Cpus_allowed /proc/24571/task/*/status
/proc/24571/task/24571/status:Cpus_allowed:     00,00000554
/proc/24571/task/24571/status:Cpus_allowed_list:        2,4,6,8,10
/proc/24571/task/24572/status:Cpus_allowed:     00,00000554
/proc/24571/task/24572/status:Cpus_allowed_list:        2,4,6,8,10
/proc/24571/task/24573/status:Cpus_allowed:     00,00000554
/proc/24571/task/24573/status:Cpus_allowed_list:        2,4,6,8,10
/proc/24571/task/24574/status:Cpus_allowed:     00,00000554
/proc/24571/task/24574/status:Cpus_allowed_list:        2,4,6,8,10
/proc/24571/task/24575/status:Cpus_allowed:     00,00000554
..
for all threads

Processor: "Intel(R) Xeon(R) CPU E5-2630 v4 @ 2.20GHz"

        Sockets: 2, Cores: 20, HyperThreads: 40

         socket 0                 socket 1        
  +---------------------+  +---------------------+
  |        c0        c1 |  |        c0        c1 |
  | +-------+ +-------+ |  | +-------+ +-------+ |
  | |  0| 20| |  2| 22| |  | |  1| 21| |  3| 23| |
  | +-------+ +-------+ |  | +-------+ +-------+ |
  |        c2        c3 |  |        c2        c3 |
  | +-------+ +-------+ |  | +-------+ +-------+ |
  | |  4| 24| |  6| 26| |  | |  5| 25| |  7| 27| |
  | +-------+ +-------+ |  | +-------+ +-------+ |
  |        c4        c8 |  |        c4        c8 |
  | +-------+ +-------+ |  | +-------+ +-------+ |
  | |  8| 28| | 10| 30| |  | |  9| 29| | 11| 31| |
  | +-------+ +-------+ |  | +-------+ +-------+ |
  |        c9       c10 |  |        c9       c10 |
  | +-------+ +-------+ |  | +-------+ +-------+ |
  | | 12| 32| | 14| 34| |  | | 13| 33| | 15| 35| |
  | +-------+ +-------+ |  | +-------+ +-------+ |
  |       c11       c12 |  |       c11       c12 |
  | +-------+ +-------+ |  | +-------+ +-------+ |
  | | 16| 36| | 18| 38| |  | | 17| 37| | 19| 39| |
  | +-------+ +-------+ |  | +-------+ +-------+ |
  +---------------------+  +---------------------+

# cat  /sys/fs/cgroup/cpuset/cpuset.cpus 
0-39

# cat  /sys/fs/cgroup/cpuset/libvirt/cpuset.cpus 
2,4,6,8,10

# cat /sys/fs/cgroup/cpuset/machine.slice/cpuset.cpus 
0,2,4,6,8&lt;/pre&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;


--000000000000f56e6205913e4491--


["vm1_2vms-2cores_host1.xml" (text/xml)]

&lt;domain type='kvm'&gt;
  &lt;name&gt;vm1_2vms-2cores_host1&lt;/name&gt; &lt;!-- change the name according to your needs--&gt;
  &lt;memory&gt;1048576&lt;/memory&gt; &lt;!-- adapt to the desired memory size --&gt;
  &lt;os&gt;
    &lt;type&gt;hvm&lt;/type&gt;
    &lt;boot dev="hd"/&gt;
  &lt;/os&gt;
  &lt;vcpu placement='static'&gt;2&lt;/vcpu&gt;
  &lt;vcpupin vcpu='0' cpuset='4'/&gt;
  &lt;vcpupin vcpu='1' cpuset='6'/&gt;
  &lt;cpu&gt;
    &lt;numa&gt;
      &lt;!-- adapt to the desired memory size --&gt;
      &lt;cell id="0" cpus="1" memory="1048576" memAccess="shared"/&gt;
    &lt;/numa&gt;
  &lt;/cpu&gt;
  &lt;numatune&gt;
    &lt;!-- adapt to set the host node where hugepages are taken --&gt;
    &lt;memory mode='strict' nodeset='0'/&gt;
  &lt;/numatune&gt;
  &lt;features&gt;
    &lt;acpi/&gt;
  &lt;/features&gt;
  &lt;devices&gt;
    &lt;disk type='file' device='disk'&gt;
      &lt;source file='/var/lib/libvirt/images/vm1_2vms-2cores_host1-seed.iso'/&gt;
      &lt;target dev='vdb' bus='virtio'/&gt;
    &lt;/disk&gt;
    &lt;disk type='file' device='disk'&gt;
      &lt;driver type='qcow2' cache='none'/&gt;
      &lt;source file='/var/lib/libvirt/images/ubuntu-16.04.img'/&gt;
      &lt;target dev='vda' bus='virtio'/&gt;
    &lt;/disk&gt;
    &lt;interface type='user'&gt;
      &lt;model type='virtio'/&gt;
    &lt;/interface&gt;
    &lt;serial type='tcp'&gt;
      &lt;source mode='bind' host='0.0.0.0' service='10000'/&gt;
      &lt;protocol type='raw'/&gt;
      &lt;target port='0'/&gt;
      &lt;alias name='serial0'/&gt;
    &lt;/serial&gt;
    &lt;serial type='pty'&gt;
      &lt;source path='/dev/pts/4'/&gt;
      &lt;target port='1'/&gt;
      &lt;alias name='serial1'/&gt;
    &lt;/serial&gt;
    &lt;console type='tcp'&gt;
      &lt;source mode='bind' host='0.0.0.0' service='10000'/&gt;
      &lt;protocol type='raw'/&gt;
      &lt;target type='serial' port='0'/&gt;
      &lt;alias name='serial0'/&gt;
    &lt;/console&gt;
  &lt;/devices&gt;
&lt;/domain&gt;


_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190829134753</emailId><senderName></senderName><senderEmail>ofoerster</senderEmail><timestampReceived>2019-08-29 13:47:53-0400</timestampReceived><subject>Re: [libvirt-users] virsh list -all zombies</subject><body>

The problem is solved. We forgot a outsourced xml File. 
[Double-Face-Palm]

-------------------------------------------------------------------------------------- \
--------------------------------------------------------------------------------------------------------------------


Am 29.08.2019 15:27 schrieb ofoerster@posteo.de:
&gt; Hello Community,
&gt; I have a problem with two deleted KVMs. So far we have done everything
&gt; that is necessary:
&gt; 
&gt; virsh undefine [kvm-name] --managed-save --snapshots-metadata
&gt; --remove-all-storage --nvram
&gt; virsh destroy [kvm-name]
&gt; 
&gt; and we delete the xml-File and the .img.
&gt; 
&gt; If we now call "virsh list -all", then the machines are also gone.
&gt; However, after a restart of libvirtd they reappear in the list, like
&gt; zombies.
&gt; 
&gt; What did we do wrong? Or is that even a bug?
&gt; 
&gt; Kind regards,
&gt; Oliver
&gt; 
&gt; 
&gt; _______________________________________________
&gt; libvirt-users mailing list
&gt; libvirt-users@redhat.com
&gt; https://www.redhat.com/mailman/listinfo/libvirt-users

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20190703202923</emailId><senderName>Roger Jin</senderName><senderEmail>rogerjin@mit.edu</senderEmail><timestampReceived>2019-07-03 20:29:23-0400</timestampReceived><subject>[libvirt-users] libvirt-python blockPull</subject><body>

[Attachment #2 (multipart/related)]

[Attachment #4 (multipart/alternative)]


Hi Libvirt,
Does libvirt-python currently support adding a base path to
virDomain.blockPull()?

In particular, I would like to have the behavior of the following virsh
command (from
https://kashyapc.wordpress.com/2013/01/22/live-backup-with-external-disk-snapshots-and-libvirts-blockpull/)
 in libvirt-python:
[image: image.png]


Thanks!

Sincerely,
Roger Jin


[Attachment #7 (text/html)]

&lt;div dir="ltr"&gt;&lt;div&gt;Hi Libvirt,&lt;/div&gt;&lt;div&gt;Does libvirt-python currently support \
adding a base path to virDomain.blockPull()? &lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;In \
particular, I would like to have the behavior of the following virsh command (from &lt;a \
href="https://kashyapc.wordpress.com/2013/01/22/live-backup-with-external-disk-snapsho \
ts-and-libvirts-blockpull/"&gt;https://kashyapc.wordpress.com/2013/01/22/live-backup-with-external-disk-snapshots-and-libvirts-blockpull/&lt;/a&gt;) \
in libvirt-python:&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;img src="cid:ii_jxnp1u0d0" alt="image.png" \
width="483" height="319"&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks!&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Sincerely,&lt;/div&gt;&lt;div&gt;Roger \
Jin&lt;br&gt;&lt;/div&gt;&lt;/div&gt;

--000000000000a68fa4058cccb987--


["image.png" (image/png)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190704171651</emailId><senderName>Peter Krempa</senderName><senderEmail>pkrempa@redhat.com</senderEmail><timestampReceived>2019-07-04 17:16:51-0400</timestampReceived><subject>Re: [libvirt-users] Blockpull while domain is shutoff</subject><body>

[Attachment #2 (multipart/signed)]


On Wed, Jul 03, 2019 at 14:07:10 -0400, Roger Jin wrote:
&gt; Hi Libvirt,
&gt; Is there a command that performs the same operation as blockpull while a
&gt; domain is shutoff?  I have a backing chain
&gt; 
&gt; base &lt;-- A &lt;-- B
&gt; 
&gt; that I would like to shorten to
&gt; 
&gt; base &lt;-- B


Generally we refer as 'base' to the image which has overlays, so you are
here describing a 'commit' operation. Which image is the topmost overlay
used by the vm?

&gt; It seems like blockpull B, setting --base &lt;path-to-base&gt; does this, but
&gt; only when the domain is running.

Libvirt currently does not implement these operations while the VM is
shutoff because the difference of interactions beween qemu and qemu-img.

As a workaround, you can either do the pull via qemu-img manually, or
start the vm in paused mode (virsh start --paused), then do the
blockpull and then 'virsh destroy' the VM. The filesystems would be
never touched so 'destroy' should be safe in this case.

["signature.asc" (application/pgp-signature)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190703191042</emailId><senderName>Roger Jin</senderName><senderEmail>rogerjin@mit.edu</senderEmail><timestampReceived>2019-07-03 19:10:42-0400</timestampReceived><subject>[libvirt-users] libvirt-python Create External Snapshot</subject><body>

[Attachment #2 (multipart/alternative)]


Hi Libvirt,
Does libvirt-python currently support the creation of external snapshots?
I ran

domain.snapshotCreateXML(xml)

where xml is

&lt;domainsnapshot&gt;
  &lt;name&gt;snap1&lt;/name&gt;
  &lt;description&gt;Snapshot of OS install and updates&lt;/description&gt;
  &lt;disks&gt;
    &lt;disk name='vda'&gt;
            &lt;source file='/home/potato/libvirt/backups/test-snap1.qcow2'/&gt;
    &lt;/disk&gt;
  &lt;/disks&gt;
&lt;/domainsnapshot&gt;

And got the following error:
    if ret is None:raise libvirtError('virDomainSnapshotCreateXML()
failed', dom=self)
libvirt.libvirtError: unsupported configuration: disk 'vda' must use
snapshot mode 'internal'

Is this expected?  Thanks!

Sincerely,
Roger Jin

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;&lt;div&gt;Hi Libvirt,&lt;/div&gt;&lt;div&gt;Does libvirt-python currently support the \
creation of external snapshots?   I ran &lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;pre \
style="background-color:rgb(39,40,34);color:rgb(248,248,242);font-family:"Source \
Code Pro";font-size:15pt"&gt;domain.&lt;span \
style="color:rgb(102,217,239)"&gt;snapshotCreateXML&lt;/span&gt;(xml)&lt;/pre&gt;&lt;/div&gt;&lt;div&gt;where \
xml is &lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;domainsnapshot&gt;&lt;br&gt;   \
&lt;name&gt;snap1&lt;/name&gt;&lt;br&gt;   &lt;description&gt;Snapshot of OS install and \
updates&lt;/description&gt;&lt;br&gt;   &lt;disks&gt;&lt;br&gt;      &lt;disk \
name='vda'&gt;&lt;br&gt;                  &lt;source \
file='/home/potato/libvirt/backups/test-snap1.qcow2'/&gt;&lt;br&gt;      \
&lt;/disk&gt;&lt;br&gt;   &lt;/disks&gt;&lt;br&gt;&lt;/domainsnapshot&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;And \
got the following error:&lt;/div&gt;&lt;div&gt;      if ret is None:raise \
libvirtError('virDomainSnapshotCreateXML() failed', \
dom=self)&lt;br&gt;libvirt.libvirtError: unsupported configuration: disk 'vda' must \
use snapshot mode 'internal'&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Is this expected?   \
Thanks!&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Sincerely,&lt;/div&gt;&lt;div&gt;Roger Jin&lt;br&gt;&lt;/div&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190704190018</emailId><senderName>Laine Stump</senderName><senderEmail>laine@redhat.com</senderEmail><timestampReceived>2019-07-04 19:00:18-0400</timestampReceived><subject>Re: [libvirt-users] UDP broadcasts vs. nat Masquerading issue</subject><body>

On 6/28/19 10:23 AM, Nikolai Zhubr wrote:
&gt; Hi all,
&gt; 
&gt; I'm observing an issue that as soon as libvirt starts, UPD broadcasts 
&gt; going through physical network (and unrelated to any virtualization) get 
&gt; broken. Specifically, windows neighbourhood browsing through samba's 
&gt; nmbd starts suffering badly (Samba is running on this same box).
&gt; 
&gt; At the moment I'm running a quite outdated version 1.2.9 of libvirt, but 
&gt; other than this issue, it does its job pretty well, so I'd first 
&gt; consider some patching/backporting rather than totally replacing it with 
&gt; a new one. Anyway, I first need to better understand what is going on 
&gt; and what is wrong with it.
&gt; This could also be related somewhat to
&gt; https://www.redhat.com/archives/libvir-list/2013-September/msg01311.html
&gt; but I suppose it is not exactly that thing.
&gt; 
&gt; I've already figured the source of trouble is anyway related to these 
&gt; rules added:
&gt; 
&gt; -A POSTROUTING -o br0 -j MASQUERADE
&gt; -A POSTROUTING -o enp0s25 -j MASQUERADE
&gt; -A POSTROUTING -o virbr2_nic -j MASQUERADE
&gt; -A POSTROUTING -o vnet0 -j MASQUERADE

*None* of those rules were added by libvirt (unless your build of 
libvirt, in addition to being ancient, has also been heavily hacked by a 
third party with downstream-only patches, although I can't imagine how 
the rules you show could possibly be a useful addition).

Detailed documentation of what iptables rules are added by libvirt can 
be found here:


    https://libvirt.org/firewall.html

(particularly in the "virtual network" section).

The masquerade rules added by libvirt are based on the IP address of the 
NATed subnet, e.g.:

A LIBVIRT_PRT -s 192.168.12.0/24 ! -d 192.168.12.0/24 -p tcp \
   -j MASQUERADE --to-ports 1024-65535
-A LIBVIRT_PRT -s 192.168.12.0/24 ! -d 192.168.12.0/24 -p udp \
    -j MASQUERADE --to-ports 1024-65535
-A LIBVIRT_PRT -s 192.168.12.0/24 ! -d 192.168.12.0/24 \
    -j MASQUERADE

(this is from a less ancient version of libvirt that puts the rules on 
its own private chain, but in the version you are using the rule would 
be the same, except that "LIBVIRT_PRT" would be replaced with "POSTROUTING")

You can verify my "counter-claim" by running "virsh net-destroy" for all 
of your libvirt networks, and seeing that the offending rules haven't 
been removed.

In short, you need to look elsewhere for the culprit.


&gt; 
&gt; Here, virbr2_nic and vnet0 are used by libvirt for arranging network 
&gt; configurations for VMs, ok. However, br0 is a main interface of this 
&gt; host with primary ip address, with enp0s25 being a physical nic of this 
&gt; host, and it is used for all sorts of regular (unrelated to 
&gt; virtualization) communications. Also, br0 is used for attaching bridged 
&gt; (as opposed to NATed) VMs managed by libvirt.
&gt; 
&gt; Clearly, libvirt somehow chooses to set up masquerading for literally 
&gt; all existing network interfaces here (except lo),

It's clear that the rules are there. It's not clear that they were added 
by libvirt.

&gt; but I can't see a real 
&gt; reason for the first two rules in the list above. Furthermore, they 
&gt; corrupt UDP broadcats coming from outside and reaching this host 
&gt; (through enp0s25/br0) such that source address gets replaced by this 
&gt; hosts primary address (as per masquerading). I've verified this by 
&gt; arranging a hand-crafted UDP listener and printing the respective source 
&gt; addresses as seen by normal userspace.
&gt; 
&gt; Now I've discovered that I can "eliminate" the problem by either:
&gt; 
&gt; 1. Removing "-A POSTROUTING -o br0 -j MASQUERADE" (manually)
&gt; 2. Inserting "-A POSTROUTING -s 192.168.0.0/24 -d 192.168.0.255/32 -j 
&gt; ACCEPT"
&gt; (Of course correcting rules by hand is not a solution, just a test)
&gt; 
&gt; So question is, how the correct rules should ideally look like? And, is 
&gt; this issue known/fixed in most current libvirt?

Except for putting the libvirt-added rules in their own private chains 
(appearing in libvirt 5.1.0, released on Feb 1, 2019), the iptables 
rules added by libvirt to support its virtual networks didn't materially 
change in &gt; 10 years. Your email is the first time I've ever seen such 
rules attributed to libvirt so, as I said above, I think you need to 
take a deeper dive into your host system's config.


Good luck!

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190711151903</emailId><senderName>Peter Krempa</senderName><senderEmail>pkrempa@redhat.com</senderEmail><timestampReceived>2019-07-11 15:19:03-0400</timestampReceived><subject>Re: [libvirt-users] Strange issues with libvirt v5.5.0</subject><body>

[Attachment #2 (multipart/signed)]


On Thu, Jul 11, 2019 at 16:46:29 +0200, Julian Sternberg wrote:
&gt; &lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;&lt;div style="font-family: Verdana;font-size: \
&gt; 12.0px;"&gt;&lt;div&gt;Hey Peter,&lt;/div&gt;

Hi,

at first I'd like to ask you to CC the libvirt-users or libvir-list with
such kind of questions (questions implying regression of behaviour are
okay on the development list).

I've CC'd libvirt-users with this reply to archive this.

Also I'd strongly encourage you _not_ to use HTML formatting on
thechnical communications. As you can see I'm using a plain-text mail
client and it messes up.

&gt; 
&gt; &lt;div&gt; &lt;/div&gt;
&gt; 
&gt; &lt;div&gt;can you give me some insight regarding this commit:&lt;br/&gt;
&gt; https://github.com/libvirt/libvirt/commit/7d5b283065e484645b6116397ac55b068396c430&lt;/div&gt;
&gt; 

That one does not seem to be related to your issue.

It simply assumes that when starting a qemu process (so nothing really
related to any of the vol-* and pool-* virsh APIs) when the disk is
referencing a volume from the storage driver and the referenced volume
is a directory, then we assume that qemu should use 'fat' as the driver.

&gt; 
&gt; &lt;div&gt; &lt;/div&gt;
&gt; 
&gt; &lt;div&gt;I'm having strange issues since switching from libvirt 5.4.0 to 5.5.0 \
&gt; which is as follows:&lt;/div&gt; 
&gt; &lt;div&gt; &lt;/div&gt;


 I'll have to cut off everything here and replace it with a non-HTML
 version so there might be weird quoting:

&gt; 
&gt; on libvirt 5.5.0 the volumes list only show the first image from the remote ceph \
&gt; rbd cluster: 
&gt; # virsh vol-list vm_volumes
&gt; Name Path
&gt; -------------------------------------------------
&gt; vmanager101-root vm_volumes/vmanager101-root
&gt; 
&gt; But the rbd command itself all seing them:
&gt; # rbd -p vm_volumes ls
&gt; vmanager101-root
&gt; vmanager102-root
&gt; vmanager103-root
&gt; vmanager105-root
&gt; 
&gt; on libvirt5.4.0 everything looks correct and it shows all the existing ones:
&gt; 
&gt; # virsh vol-list vm_volumes
&gt; Name Path
&gt; -------------------------------------------------
&gt; vmanager101-root vm_volumes/vmanager101-root
&gt; vmanager102-root vm_volumes/vmanager102-root
&gt; vmanager103-root vm_volumes/vmanager103-root
&gt; vmanager105-root vm_volumes/vmanager105-root

I've looked at the git history and didn't find anything that could be
related here unfortunately. I'm also not very familiar with RBD in
libvirt.

&gt; 
&gt; Seconds strange behavior is as follow:
&gt; virsh vol-create-as vm_volumes test.img --capacity 1G --format raw
&gt; error: Failed to create vol test.img error: unsupported configuration: only RAW \
&gt; volumes are supported by this storage pool

So this is really weird. The error message is produced if the target
format is not 'raw' but the above command clearly supplies it.

I'd suggest you collect debug logs while trying both and attach them
here. Unfortunately I don't see what could be wrong here.


["signature.asc" (application/pgp-signature)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190712134418</emailId><senderName>"Mohamed, Faris"</senderName><senderEmail>faris.mohamed@kandy.io</senderEmail><timestampReceived>2019-07-12 13:44:18-0400</timestampReceived><subject>[libvirt-users] Question regarding using multiple physical functions inside a network pool.</subject><body>

Hello,

I was planning on adding multiple physical functions using the built in SR-IOV \
features offered by libvirt to a create a bigger pool of virtual functions using the

&lt;forward mode='hostdev' managed='yes'&gt; heading

(I want to be able to use more virtual machines then there are virtual functions \
available on an ethernet port).

As soon as I try to define multiple physical functions in a pool, I get this error:


error: Failed to define network from biggernetwork.xml
error: XML error: Only one &lt;pf&gt; element is allowed in &lt;forward&gt; of network bigger \
network


when using this command:

sudo virsh net-define biggernetwork.xml


on the following XML document:

&lt;network&gt;
   &lt;name&gt;bigger network&lt;/name&gt;
   &lt;forward mode='hostdev' managed='yes'&gt;
    &lt;pf dev='eth5'/&gt;
    &lt;pf dev='eth7'/&gt;
   &lt;/forward&gt;
&lt;/network&gt;

It seems that you are not able to add multiple physical functions to this network to \
create a pool of more virtual functions.

Is there anyway that you can do this using that I am missing? I seem to be looking at \
the documentation and there seems to be nothing related to this. I think this would \
be extremely useful and would make automate adding virtual functions to virtual \
machines much easier to manage.

Thanks in advance,
Faris


-----------------------------------------------------------------------------------------------------------------------
                
Notice: This e-mail together with any attachments may contain information of Ribbon \
Communications Inc. that is confidential and/or proprietary for the sole use of the \
intended recipient.  Any review, disclosure, reliance or distribution by others or \
forwarding without express permission is strictly prohibited.  If you are not the \
intended recipient, please notify the sender immediately and then delete all copies, \
                including any attachments.
-----------------------------------------------------------------------------------------------------------------------



[Attachment #3 (text/html)]

&lt;html&gt;&lt;head&gt;&lt;meta http-equiv=Content-Type content="text/html; charset=us-ascii"&gt;&lt;meta \
name=Generator content="Microsoft Word 15 (filtered medium)"&gt;&lt;style&gt;&lt;!-- /* Font \
Definitions */ @font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
/* Style Definitions */
p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0in;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Calibri",sans-serif;}
a:link, span.MsoHyperlink
	{mso-style-priority:99;
	color:#0563C1;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{mso-style-priority:99;
	color:#954F72;
	text-decoration:underline;}
span.EmailStyle17
	{mso-style-type:personal-compose;
	font-family:"Calibri",sans-serif;
	color:windowtext;}
.MsoChpDefault
	{mso-style-type:export-only;
	font-family:"Calibri",sans-serif;}
@page WordSection1
	{size:8.5in 11.0in;
	margin:1.0in 1.0in 1.0in 1.0in;}
div.WordSection1
	{page:WordSection1;}
--&gt;&lt;/style&gt;&lt;!--[if gte mso 9]&gt;&lt;xml&gt;
&lt;o:shapedefaults v:ext="edit" spidmax="1026" /&gt;
&lt;/xml&gt;&lt;![endif]--&gt;&lt;!--[if gte mso 9]&gt;&lt;xml&gt;
&lt;o:shapelayout v:ext="edit"&gt;
&lt;o:idmap v:ext="edit" data="1" /&gt;
&lt;/o:shapelayout&gt;&lt;/xml&gt;&lt;![endif]--&gt;&lt;/head&gt;&lt;body lang=EN-US link="#0563C1" \
vlink="#954F72"&gt;&lt;div class=WordSection1&gt;&lt;p class=MsoNormal&gt;Hello, &lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;&lt;p \
class=MsoNormal&gt;&lt;o:p&gt; &lt;/o:p&gt;&lt;/p&gt;&lt;p class=MsoNormal&gt;I was planning on adding \
multiple physical functions using the built in SR-IOV features offered by libvirt to \
a create a bigger pool of virtual functions using the  &lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;&lt;p \
class=MsoNormal&gt;&lt;o:p&gt; &lt;/o:p&gt;&lt;/p&gt;&lt;p class=MsoNormal&gt;&lt;forward mode='hostdev' \
managed='yes'&gt; heading&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;&lt;p class=MsoNormal&gt;&lt;o:p&gt; &lt;/o:p&gt;&lt;/p&gt;&lt;p \
class=MsoNormal&gt;(I want to be able to use more virtual machines then there are \
virtual functions available on an ethernet port).&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;&lt;p \
class=MsoNormal&gt;&lt;o:p&gt; &lt;/o:p&gt;&lt;/p&gt;&lt;p class=MsoNormal&gt;As soon as I try to define \
multiple physical functions in a pool, I get this error:&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;&lt;p \
class=MsoNormal&gt;&lt;o:p&gt; &lt;/o:p&gt;&lt;/p&gt;&lt;p class=MsoNormal&gt;&lt;o:p&gt; &lt;/o:p&gt;&lt;/p&gt;&lt;p \
class=MsoNormal&gt;error: Failed to define network from \
biggernetwork.xml&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;&lt;p class=MsoNormal&gt;error: XML error: Only one \
&lt;pf&gt; element is allowed in &lt;forward&gt; of network bigger \
network&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;&lt;p class=MsoNormal&gt;&lt;o:p&gt; &lt;/o:p&gt;&lt;/p&gt;&lt;p \
class=MsoNormal&gt;&lt;o:p&gt; &lt;/o:p&gt;&lt;/p&gt;&lt;p class=MsoNormal&gt; when using this command: \
&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;&lt;p class=MsoNormal&gt;&lt;o:p&gt; &lt;/o:p&gt;&lt;/p&gt;&lt;p class=MsoNormal&gt;sudo virsh \
net-define biggernetwork.xml&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;&lt;p class=MsoNormal&gt;&lt;o:p&gt; &lt;/o:p&gt;&lt;/p&gt;&lt;p \
class=MsoNormal&gt;&lt;o:p&gt; &lt;/o:p&gt;&lt;/p&gt;&lt;p class=MsoNormal&gt;on the following XML \
document:&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;&lt;p class=MsoNormal&gt;&lt;o:p&gt; &lt;/o:p&gt;&lt;/p&gt;&lt;p \
class=MsoNormal&gt;&lt;network&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;&lt;p class=MsoNormal&gt;   \
&lt;name&gt;bigger network&lt;/name&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;&lt;p class=MsoNormal&gt;   \
&lt;forward mode='hostdev' managed='yes'&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;&lt;p \
class=MsoNormal&gt;    &lt;pf dev='eth5'/&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;&lt;p \
class=MsoNormal&gt;    &lt;pf dev='eth7'/&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;&lt;p \
class=MsoNormal&gt;   &lt;/forward&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;&lt;p class=MsoNormal&gt; \
&lt;/network&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;&lt;p class=MsoNormal&gt;&lt;o:p&gt; &lt;/o:p&gt;&lt;/p&gt;&lt;p \
class=MsoNormal&gt;It seems that you are not able to add multiple physical functions to \
this network to create a pool of more virtual functions.&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;&lt;p \
class=MsoNormal&gt;&lt;o:p&gt; &lt;/o:p&gt;&lt;/p&gt;&lt;p class=MsoNormal&gt;Is there anyway that you can \
do this using that I am missing? I seem to be looking at the documentation and there \
seems to be nothing related to this. I think this would be extremely useful and would \
make automate adding virtual functions to virtual machines much easier to \
manage.&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;&lt;p class=MsoNormal&gt;&lt;o:p&gt; &lt;/o:p&gt;&lt;/p&gt;&lt;p \
class=MsoNormal&gt;Thanks in advance,&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;&lt;p \
class=MsoNormal&gt;Faris&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;&lt;/div&gt;&lt;br /&gt;&lt;br /&gt;&lt;span style="font-family:Arial; \
Font-size:8.0pt"&gt; &lt;hr /&gt; Notice: This e-mail together with any attachments may \
contain information of Ribbon Communications Inc. that is confidential and/or \
proprietary for the sole use of the intended recipient.  Any review, disclosure, \
reliance or distribution by others or forwarding without express permission is \
strictly prohibited.  If you are not the intended recipient, please notify the sender \
immediately and then delete all copies, including any attachments.&lt;hr /&gt; \
&lt;/span&gt;&lt;/body&gt;&lt;/html&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
--===============1043422988456451895==--


</body></email><email><emailId>20190711160853</emailId><senderName>Ján Tomko</senderName><senderEmail>jtomko@redhat.com</senderEmail><timestampReceived>2019-07-11 16:08:53-0400</timestampReceived><subject>Re: [libvirt-users] Strange issues with libvirt v5.5.0</subject><body>

[Attachment #2 (multipart/signed)]


On Thu, Jul 11, 2019 at 05:19:03PM +0200, Peter Krempa wrote:
&gt; On Thu, Jul 11, 2019 at 16:46:29 +0200, Julian Sternberg wrote:

[...]

&gt; &gt; Seconds strange behavior is as follow:
&gt; &gt; virsh vol-create-as vm_volumes test.img --capacity 1G --format raw
&gt; &gt; error: Failed to create vol test.img error: unsupported configuration: only RAW \
&gt; &gt; volumes are supported by this storage pool
&gt; 
&gt; So this is really weird. The error message is produced if the target
&gt; format is not 'raw' but the above command clearly supplies it.
&gt; 
&gt; I'd suggest you collect debug logs while trying both and attach them
&gt; here. Unfortunately I don't see what could be wrong here.

This is a known bug waiting to be fixed:
https://bugzilla.redhat.com/show_bug.cgi?id=1724065

Jano


["signature.asc" (application/pgp-signature)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190716060827</emailId><senderName>Vojto_Ľach</senderName><senderEmail>vojtech.lach@gmail.com</senderEmail><timestampReceived>2019-07-16 06:08:27-0400</timestampReceived><subject>[libvirt-users] filesharing file owner problem</subject><body>

[Attachment #2 (multipart/alternative)]


Hello,
 I'm having an issue with usage of libvirt driven qemu where I'm sharing
directory with guest machine.
virsh domain filesharing configuration:
    &lt;filesystem type='mount' accessmode='passthrough'&gt;
      &lt;driver type='path' wrpolicy='immediate'/&gt;
      &lt;source dir='/media/share'/&gt;
      &lt;target dir='data'/&gt;
      &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x07'
function='0x0'/&gt;
    &lt;/filesystem&gt;

/etc/libvirt/qemu.conf :
user = "root"
group = "root"
dynamic_ownership = 0
clear_emulator_capabilities = 0

even with this unsecure configuration I wasn't able to achieve that newly
created files/dirs in guest machine have ownership of guest machine user
but they are still created under root user id. Also strange is that group
of those files/dirs are correct.
Can somebody help me with this?

Thank you.

Vojtech

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;Hello,&lt;div&gt;  I'm having an issue with usage of libvirt driven qemu \
where I'm sharing directory with guest machine.&lt;/div&gt;&lt;div&gt;virsh domain \
filesharing configuration:&lt;/div&gt;&lt;div&gt;      &lt;filesystem type='mount' \
accessmode='passthrough'&gt;&lt;br&gt;         &lt;driver type='path' \
wrpolicy='immediate'/&gt;&lt;br&gt;         &lt;source \
dir='/media/share'/&gt;&lt;br&gt;         &lt;target dir='data'/&gt;&lt;br&gt;    \
&lt;address type='pci' domain='0x0000' bus='0x00' \
slot='0x07' function='0x0'/&gt;&lt;br&gt;      \
&lt;/filesystem&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;/etc/libvirt/qemu.conf \
:&lt;br&gt;&lt;/div&gt;&lt;div&gt;user = "root"&lt;/div&gt;&lt;div&gt;group = \
"root"&lt;br&gt;&lt;/div&gt;&lt;div&gt;dynamic_ownership = \
0&lt;br&gt;&lt;/div&gt;&lt;div&gt;clear_emulator_capabilities = 0&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;even \
with this unsecure configuration I wasn't able to achieve that newly created \
files/dirs in guest machine have ownership of guest machine user but they are still \
created under root user id. Also strange is that group of those files/dirs are \
correct.&lt;/div&gt;&lt;div&gt;Can somebody help me with this?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thank \
you.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Vojtech&lt;/div&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190717183308</emailId><senderName>Probir Roy</senderName><senderEmail>proy@email.wm.edu</senderEmail><timestampReceived>2019-07-17 18:33:08-0400</timestampReceived><subject>[libvirt-users] Preloading shared library with libVirt</subject><body>

[Attachment #2 (multipart/alternative)]


Hi,

I am trying to preload two shared libraries while running Qemu using
libvirt. To preload the shared libraries I have added an environment
variable in the $domain.xml file with the following command:

```
virt-xml generic --edit --confirm --qemu-commandline
'env=LD_PRELOAD=/home/probir/Downloads/kpv_temp/temp/kvmTest/build_kvm/libperform.so:/ \
home/probir/Downloads/kpv_temp/temp/kvmTest/dependencies/libmonitor/installDir/lib/libmonitor.so'


```
However, while running the domain, I get the following message of failure
to preload the shared files in the log.

```
2019-07-17 17:35:22.939+0000: starting up libvirt version: 1.3.1, package:
1ubuntu10.27 (Marc Deslauriers &lt;marc.deslauriers@ubuntu.com&gt; Tue, 02 Jul
2019 09:22:37 -0400), qemu version: 2.5.0 (Debian 1:2.5+dfsg-5ubuntu10.39),
hostname: probir-XPS-13-9343
LC_ALL=C PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
QEMU_AUDIO_DRV=spice
LD_PRELOAD=/home/probir/Downloads/kpv_temp/temp/kvmTest/build_kvm/libperform.so:/home/ \
probir/Downloads/kpv_temp/temp/kvmTest/dependencies/libmonitor/installDir/lib/libmonitor.so
                
/usr/bin/kvm-spice -name generic -S -machine
pc-i440fx-xenial,accel=kvm,usb=off -cpu Broadwell-noTSX-IBRS -m 4096
-realtime mlock=off -smp 2,sockets=2,cores=1,threads=1 -uuid
8f755c9c-adf8-4baf-8d6a-947ebdf61ff8 -no-user-config -nodefaults -chardev
socket,id=charmonitor,path=/var/lib/libvirt/qemu/domain-generic/monitor.sock,server,nowait
                
-mon chardev=charmonitor,id=monitor,mode=control -rtc
base=utc,driftfix=slew -global kvm-pit.lost_tick_policy=discard -no-hpet
-no-shutdown -global PIIX4_PM.disable_s3=1 -global PIIX4_PM.disable_s4=1
-boot strict=on -device ich9-usb-ehci1,id=usb,bus=pci.0,addr=0x6.0x7
-device
ich9-usb-uhci1,masterbus=usb.0,firstport=0,bus=pci.0,multifunction=on,addr=0x6
-device ich9-usb-uhci2,masterbus=usb.0,firstport=2,bus=pci.0,addr=0x6.0x1
-device ich9-usb-uhci3,masterbus=usb.0,firstport=4,bus=pci.0,addr=0x6.0x2
-device virtio-serial-pci,id=virtio-serial0,bus=pci.0,addr=0x5 -drive
file=/var/lib/libvirt/images/generic.img,format=qcow2,if=none,id=drive-ide0-0-0
-device
ide-hd,bus=ide.0,unit=0,drive=drive-ide0-0-0,id=ide0-0-0,bootindex=1 -drive
if=none,id=drive-ide0-0-1,readonly=on -device
ide-cd,bus=ide.0,unit=1,drive=drive-ide0-0-1,id=ide0-0-1 -netdev
tap,fd=26,id=hostnet0 -device
rtl8139,netdev=hostnet0,id=net0,mac=52:54:00:82:62:ba,bus=pci.0,addr=0x3
-chardev pty,id=charserial0 -device
isa-serial,chardev=charserial0,id=serial0 -chardev
spicevmc,id=charchannel0,name=vdagent -device
virtserialport,bus=virtio-serial0.0,nr=1,chardev=charchannel0,id=channel0,name=com.redhat.spice.0
                
-spice
port=5900,addr=127.0.0.1,disable-ticketing,image-compression=off,seamless-migration=on
                
-device
qxl-vga,id=video0,ram_size=67108864,vram_size=67108864,vgamem_mb=16,bus=pci.0,addr=0x2
                
-device intel-hda,id=sound0,bus=pci.0,addr=0x4 -device
hda-duplex,id=sound0-codec0,bus=sound0.0,cad=0 -chardev
spicevmc,id=charredir0,name=usbredir -device
usb-redir,chardev=charredir0,id=redir0 -chardev
spicevmc,id=charredir1,name=usbredir -device
usb-redir,chardev=charredir1,id=redir1 -device
virtio-balloon-pci,id=balloon0,bus=pci.0,addr=0x7 -msg timestamp=on
Domain id=9 is tainted: custom-argv
ERROR: ld.so: object
'/home/probir/Downloads/kpv_temp/temp/kvmTest/build_kvm/libperform.so' from
LD_PRELOAD cannot be preloaded (cannot open shared object file): ignored.
ERROR: ld.so: object
'/home/probir/Downloads/kpv_temp/temp/kvmTest/dependencies/libmonitor/installDir/lib/libmonitor.so'
 from LD_PRELOAD cannot be preloaded (cannot open shared object file):
ignored.
ERROR: ld.so: object
'/home/probir/Downloads/kpv_temp/temp/kvmTest/build_kvm/libperform.so' from
LD_PRELOAD cannot be preloaded (cannot open shared object file): ignored.
ERROR: ld.so: object
'/home/probir/Downloads/kpv_temp/temp/kvmTest/dependencies/libmonitor/installDir/lib/libmonitor.so'
 from LD_PRELOAD cannot be preloaded (cannot open shared object file):
ignored.
char device redirected to /dev/pts/21 (label charserial0)

```

I further went ahead to verify the shared library with ldd and ls -l.
Following results came out:

```
probir@probir-XPS-13-9343:~/Downloads/kpv_temp/temp/kvmTest/test/kvm$ ls -l
/home/probir/Downloads/kpv_temp/temp/kvmTest/build_kvm/libperform.so
-rwxrwxr-x 1 probir probir 834240 Jun 13 17:53
/home/probir/Downloads/kpv_temp/temp/kvmTest/build_kvm/libperform.so
probir@probir-XPS-13-9343:~/Downloads/kpv_temp/temp/kvmTest/test/kvm$ ldd
/home/probir/Downloads/kpv_temp/temp/kvmTest/build_kvm/libperform.so
linux-vdso.so.1 =&gt;  (0x00007ffdd97d5000)
libxed.so =&gt;
/home/probir/Downloads/kpv_temp/temp/kvmTest/dependencies/xed/kits/xed-install-base/lib/libxed.so
 (0x00007f706442e000)
libmonitor.so.0 =&gt;
/home/probir/Downloads/kpv_temp/temp/kvmTest/dependencies/libmonitor/installDir/lib/libmonitor.so.0
 (0x00007f706420a000)
libpthread.so.0 =&gt; /lib/x86_64-linux-gnu/libpthread.so.0
(0x00007f7063fed000)
libbfd-2.26.1-system.so =&gt; /usr/lib/x86_64-linux-gnu/libbfd-2.26.1-system.so
(0x00007f7063ca8000)
libstdc++.so.6 =&gt; /usr/lib/x86_64-linux-gnu/libstdc++.so.6
(0x00007f7063926000)
libgcc_s.so.1 =&gt; /lib/x86_64-linux-gnu/libgcc_s.so.1 (0x00007f7063710000)
libc.so.6 =&gt; /lib/x86_64-linux-gnu/libc.so.6 (0x00007f7063346000)
/lib64/ld-linux-x86-64.so.2 (0x00007f7064f48000)
libdl.so.2 =&gt; /lib/x86_64-linux-gnu/libdl.so.2 (0x00007f7063142000)
libz.so.1 =&gt; /lib/x86_64-linux-gnu/libz.so.1 (0x00007f7062f28000)
libm.so.6 =&gt; /lib/x86_64-linux-gnu/libm.so.6 (0x00007f7062c1f000)

```
and
```
probir@probir-XPS-13-9343:~/Downloads/kpv_temp/temp/kvmTest/test/kvm$ ls -l
/home/probir/Downloads/kpv_temp/temp/kvmTest/dependencies/libmonitor/installDir/lib/libmonitor.so


lrwxrwxrwx 1 probir probir 19 Mar 28 13:45
/home/probir/Downloads/kpv_temp/temp/kvmTest/dependencies/libmonitor/installDir/lib/libmonitor.so
                
-&gt; libmonitor.so.0.0.0
probir@probir-XPS-13-9343:~/Downloads/kpv_temp/temp/kvmTest/test/kvm$ ldd
/home/probir/Downloads/kpv_temp/temp/kvmTest/dependencies/libmonitor/installDir/lib/libmonitor.so
 linux-vdso.so.1 =&gt;  (0x00007ffc5d12b000)
libdl.so.2 =&gt; /lib/x86_64-linux-gnu/libdl.so.2 (0x00007ff8ae23e000)
libc.so.6 =&gt; /lib/x86_64-linux-gnu/libc.so.6 (0x00007ff8ade74000)
/lib64/ld-linux-x86-64.so.2 (0x00007ff8ae666000)
```
I cannot figure out what is causing the failure of preload. Previously, I
manually preloaded the same shared libraries for other application.

Probir


[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;&lt;div class="gmail_default" \
style="font-family:arial,helvetica,sans-serif"&gt;Hi,&lt;/div&gt;&lt;div class="gmail_default" \
style="font-family:arial,helvetica,sans-serif"&gt;&lt;br&gt;&lt;/div&gt;&lt;div class="gmail_default" \
style="font-family:arial,helvetica,sans-serif"&gt;I am trying to preload two shared \
libraries while running Qemu using libvirt. To preload the shared libraries I have \
added an environment variable in the $domain.xml file with the following \
command:&lt;br&gt;&lt;br&gt;```&lt;br&gt;virt-xml generic --edit --confirm --qemu-commandline \
'env=LD_PRELOAD=/home/probir/Downloads/kpv_temp/temp/kvmTest/build_kvm/libperform. \
so:/home/probir/Downloads/kpv_temp/temp/kvmTest/dependencies/libmonitor/installDir/lib/libmonitor.so'&lt;br&gt;&lt;br&gt;```&lt;br&gt;However, \
while running the domain, I get the following message of failure to preload the \
shared files in the log.&lt;br&gt;&lt;br&gt;```&lt;br&gt;2019-07-17 17:35:22.939+0000: starting up \
libvirt version: 1.3.1, package: 1ubuntu10.27 (Marc Deslauriers &lt;&lt;a \
href="mailto:marc.deslauriers@ubuntu.com"&gt;marc.deslauriers@ubuntu.com&lt;/a&gt;&gt; Tue, 02 \
Jul 2019 09:22:37 -0400), qemu version: 2.5.0 (Debian 1:2.5+dfsg-5ubuntu10.39), \
hostname: probir-XPS-13-9343&lt;br&gt;LC_ALL=C \
PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin \
QEMU_AUDIO_DRV=spice \
LD_PRELOAD=/home/probir/Downloads/kpv_temp/temp/kvmTest/build_kvm/libperform.so:/home/ \
probir/Downloads/kpv_temp/temp/kvmTest/dependencies/libmonitor/installDir/lib/libmonitor.so \
/usr/bin/kvm-spice -name generic -S -machine pc-i440fx-xenial,accel=kvm,usb=off -cpu \
Broadwell-noTSX-IBRS -m 4096 -realtime mlock=off -smp 2,sockets=2,cores=1,threads=1 \
-uuid 8f755c9c-adf8-4baf-8d6a-947ebdf61ff8 -no-user-config -nodefaults -chardev \
socket,id=charmonitor,path=/var/lib/libvirt/qemu/domain-generic/monitor.sock,server,nowait \
-mon chardev=charmonitor,id=monitor,mode=control -rtc base=utc,driftfix=slew -global \
kvm-pit.lost_tick_policy=discard -no-hpet -no-shutdown -global PIIX4_PM.disable_s3=1 \
-global PIIX4_PM.disable_s4=1 -boot strict=on -device \
ich9-usb-ehci1,id=usb,bus=pci.0,addr=0x6.0x7 -device \
ich9-usb-uhci1,masterbus=usb.0,firstport=0,bus=pci.0,multifunction=on,addr=0x6 \
-device ich9-usb-uhci2,masterbus=usb.0,firstport=2,bus=pci.0,addr=0x6.0x1 -device \
ich9-usb-uhci3,masterbus=usb.0,firstport=4,bus=pci.0,addr=0x6.0x2 -device \
virtio-serial-pci,id=virtio-serial0,bus=pci.0,addr=0x5 -drive \
file=/var/lib/libvirt/images/generic.img,format=qcow2,if=none,id=drive-ide0-0-0 \
-device ide-hd,bus=ide.0,unit=0,drive=drive-ide0-0-0,id=ide0-0-0,bootindex=1 -drive \
if=none,id=drive-ide0-0-1,readonly=on -device \
ide-cd,bus=ide.0,unit=1,drive=drive-ide0-0-1,id=ide0-0-1 -netdev \
tap,fd=26,id=hostnet0 -device \
rtl8139,netdev=hostnet0,id=net0,mac=52:54:00:82:62:ba,bus=pci.0,addr=0x3 -chardev \
pty,id=charserial0 -device isa-serial,chardev=charserial0,id=serial0 -chardev \
spicevmc,id=charchannel0,name=vdagent -device \
virtserialport,bus=virtio-serial0.0,nr=1,chardev=charchannel0,id=channel0,name=com.redhat.spice.0 \
-spice port=5900,addr=127.0.0.1,disable-ticketing,image-compression=off,seamless-migration=on \
-device qxl-vga,id=video0,ram_size=67108864,vram_size=67108864,vgamem_mb=16,bus=pci.0,addr=0x2 \
-device intel-hda,id=sound0,bus=pci.0,addr=0x4 -device \
hda-duplex,id=sound0-codec0,bus=sound0.0,cad=0 -chardev \
spicevmc,id=charredir0,name=usbredir -device usb-redir,chardev=charredir0,id=redir0 \
-chardev spicevmc,id=charredir1,name=usbredir -device \
usb-redir,chardev=charredir1,id=redir1 -device \
virtio-balloon-pci,id=balloon0,bus=pci.0,addr=0x7 -msg timestamp=on&lt;br&gt;Domain id=9 is \
tainted: custom-argv&lt;br&gt;ERROR: ld.so: object \
'/home/probir/Downloads/kpv_temp/temp/kvmTest/build_kvm/libperform.so' from \
LD_PRELOAD cannot be preloaded (cannot open shared object file): ignored.&lt;br&gt;ERROR: \
ld.so: object '/home/probir/Downloads/kpv_temp/temp/kvmTest/dependencies/libmonitor/installDir/lib/libmonitor.so' \
from LD_PRELOAD cannot be preloaded (cannot open shared object file): \
ignored.&lt;br&gt;ERROR: ld.so: object \
'/home/probir/Downloads/kpv_temp/temp/kvmTest/build_kvm/libperform.so' from \
LD_PRELOAD cannot be preloaded (cannot open shared object file): ignored.&lt;br&gt;ERROR: \
ld.so: object '/home/probir/Downloads/kpv_temp/temp/kvmTest/dependencies/libmonitor/installDir/lib/libmonitor.so' \
from LD_PRELOAD cannot be preloaded (cannot open shared object file): \
ignored.&lt;br&gt;char device redirected to /dev/pts/21 (label \
charserial0)&lt;br&gt;&lt;br&gt;```&lt;br&gt;&lt;br&gt;I further went ahead to verify the shared library with \
ldd and ls -l. Following results came \
out:&lt;br&gt;&lt;br&gt;```&lt;br&gt;probir@probir-XPS-13-9343:~/Downloads/kpv_temp/temp/kvmTest/test/kvm$ \
ls -l /home/probir/Downloads/kpv_temp/temp/kvmTest/build_kvm/libperform.so&lt;br&gt;-rwxrwxr-x \
1 probir probir 834240 Jun 13 17:53 \
/home/probir/Downloads/kpv_temp/temp/kvmTest/build_kvm/libperform.so&lt;br&gt;probir@probir-XPS-13-9343:~/Downloads/kpv_temp/temp/kvmTest/test/kvm$ \
ldd /home/probir/Downloads/kpv_temp/temp/kvmTest/build_kvm/libperform.so&lt;br&gt;	linux-vdso.so.1 \
=&gt;   (0x00007ffdd97d5000)&lt;br&gt;	libxed.so =&gt; \
/home/probir/Downloads/kpv_temp/temp/kvmTest/dependencies/xed/kits/xed-install-base/lib/libxed.so \
(0x00007f706442e000)&lt;br&gt;	libmonitor.so.0 =&gt; \
/home/probir/Downloads/kpv_temp/temp/kvmTest/dependencies/libmonitor/installDir/lib/libmonitor.so.0 \
(0x00007f706420a000)&lt;br&gt;	libpthread.so.0 =&gt; /lib/x86_64-linux-gnu/libpthread.so.0 \
(0x00007f7063fed000)&lt;br&gt;	&lt;a \
href="http://libbfd-2.26.1-system.so"&gt;libbfd-2.26.1-system.so&lt;/a&gt; =&gt; \
/usr/lib/x86_64-linux-gnu/&lt;a \
href="http://libbfd-2.26.1-system.so"&gt;libbfd-2.26.1-system.so&lt;/a&gt; \
(0x00007f7063ca8000)&lt;br&gt;	libstdc++.so.6 =&gt; \
/usr/lib/x86_64-linux-gnu/libstdc++.so.6 (0x00007f7063926000)&lt;br&gt;	libgcc_s.so.1 =&gt; \
/lib/x86_64-linux-gnu/libgcc_s.so.1 (0x00007f7063710000)&lt;br&gt;	libc.so.6 =&gt; \
/lib/x86_64-linux-gnu/libc.so.6 (0x00007f7063346000)&lt;br&gt;	/lib64/ld-linux-x86-64.so.2 \
(0x00007f7064f48000)&lt;br&gt;	libdl.so.2 =&gt; /lib/x86_64-linux-gnu/libdl.so.2 \
(0x00007f7063142000)&lt;br&gt;	libz.so.1 =&gt; /lib/x86_64-linux-gnu/libz.so.1 \
(0x00007f7062f28000)&lt;br&gt;	libm.so.6 =&gt; /lib/x86_64-linux-gnu/libm.so.6 \
(0x00007f7062c1f000)&lt;br&gt;&lt;br&gt;```&lt;br&gt;and \
&lt;br&gt;```&lt;br&gt;probir@probir-XPS-13-9343:~/Downloads/kpv_temp/temp/kvmTest/test/kvm$ ls \
-l /home/probir/Downloads/kpv_temp/temp/kvmTest/dependencies/libmonitor/installDir/lib/libmonitor.so \
&lt;br&gt;lrwxrwxrwx 1 probir probir 19 Mar 28 13:45 \
/home/probir/Downloads/kpv_temp/temp/kvmTest/dependencies/libmonitor/installDir/lib/libmonitor.so \
-&gt; libmonitor.so.0.0.0&lt;br&gt;probir@probir-XPS-13-9343:~/Downloads/kpv_temp/temp/kvmTest/test/kvm$ \
ldd /home/probir/Downloads/kpv_temp/temp/kvmTest/dependencies/libmonitor/installDir/lib/libmonitor.so&lt;br&gt;	linux-vdso.so.1 \
=&gt;   (0x00007ffc5d12b000)&lt;br&gt;	libdl.so.2 =&gt; /lib/x86_64-linux-gnu/libdl.so.2 \
(0x00007ff8ae23e000)&lt;br&gt;	libc.so.6 =&gt; /lib/x86_64-linux-gnu/libc.so.6 \
(0x00007ff8ade74000)&lt;br&gt;	/lib64/ld-linux-x86-64.so.2 (0x00007ff8ae666000)&lt;br&gt;```&lt;br&gt;I \
cannot figure out what is causing the failure of preload. Previously, I manually \
preloaded the same shared libraries for other application.&lt;br&gt;&lt;/div&gt;&lt;br&gt;&lt;div \
dir="ltr" class="gmail_signature" \
data-smartmail="gmail_signature"&gt;Probir&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190718073909</emailId><senderName>Vasiliy Tolstov</senderName><senderEmail>v.tolstov@selfip.ru</senderEmail><timestampReceived>2019-07-18 07:39:09-0400</timestampReceived><subject>[libvirt-users] domain xml questions</subject><body>

Hi!
If i want to use bridged network or openvswitch, does guestfwd only
works with slirp network? Or how it work in case of using
bridge/openvswitch?

&lt;devices&gt;
  &lt;channel type='unix'&gt;
    &lt;source mode='bind' path='/tmp/guestfwd'/&gt;
    &lt;target type='guestfwd' address='10.0.2.1' port='4600'/&gt;
  &lt;/channel&gt;
&lt;/devices&gt;

If this cant't work with provided network types, how can i create
inside guest serial console on 10 tty that binded to listening unix
domain socket on host system?
-- 
Vasiliy Tolstov,
e-mail: v.tolstov@selfip.ru

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190720082035</emailId><senderName>Probir Roy</senderName><senderEmail>proy@email.wm.edu</senderEmail><timestampReceived>2019-07-20 08:20:35-0400</timestampReceived><subject>[libvirt-users] virsh edit has no impact on domain</subject><body>

[Attachment #2 (multipart/alternative)]


Hi,

I am using "virsh edit" to edit a domain. After edit it says

&gt;&gt; Domain ubuntu18.04 XML configuration edited.

However, reopening the domain with "virsh edit" shows old file.

The domain is also turned off.

$virsh list --all --persistent
 Id    Name                           State
----------------------------------------------------
 -     ubuntu18.04                    shut off


I have also tried running "virsh define" to set new configuration.


$virsh define ubuntu18.04.xml
&gt;&gt;&gt; Domain ubuntu18.04 defined from ubuntu18.04.xml

However, it also did not change the file. How can I edit the domain config
file?

OS: Ubuntu 18.04.1
virsh: 4.0.0


-- 
Probir

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;&lt;div class="gmail_default" \
style="font-family:arial,helvetica,sans-serif"&gt;Hi,&lt;/div&gt;&lt;div class="gmail_default" \
style="font-family:arial,helvetica,sans-serif"&gt;&lt;br&gt;&lt;/div&gt;&lt;div class="gmail_default" \
style="font-family:arial,helvetica,sans-serif"&gt;I am using "virsh edit" to \
edit a domain. After edit it says &lt;br&gt;&lt;br&gt;&gt;&gt; Domain ubuntu18.04 XML \
configuration edited.&lt;br&gt;&lt;br&gt;However, reopening the domain with "virsh \
edit" shows old file.&lt;br&gt;&lt;br&gt;The domain is also turned off.&lt;br&gt;&lt;br&gt;$virsh list \
--all --persistent&lt;br&gt;  Id      Name                                        \
State&lt;br&gt;----------------------------------------------------&lt;br&gt;  -       \
ubuntu18.04                              shut off&lt;br&gt;&lt;br&gt;&lt;br&gt;I have also tried \
running "virsh define" to set new configuration.&lt;br&gt;&lt;br&gt;&lt;br&gt;$virsh define \
ubuntu18.04.xml&lt;br&gt;&gt;&gt;&gt; Domain ubuntu18.04 defined from \
ubuntu18.04.xml&lt;br&gt;&lt;br&gt;However, it also did not change the file. How can I edit the \
domain config file?&lt;/div&gt;&lt;div class="gmail_default" \
style="font-family:arial,helvetica,sans-serif"&gt;&lt;br&gt;&lt;/div&gt;&lt;div class="gmail_default" \
style="font-family:arial,helvetica,sans-serif"&gt;OS: Ubuntu 18.04.1&lt;/div&gt;&lt;div \
class="gmail_default" style="font-family:arial,helvetica,sans-serif"&gt;virsh: \
4.0.0&lt;/div&gt;&lt;div class="gmail_default" \
style="font-family:arial,helvetica,sans-serif"&gt;&lt;br&gt;&lt;/div&gt;&lt;br&gt;-- &lt;br&gt;&lt;div dir="ltr" \
class="gmail_signature" data-smartmail="gmail_signature"&gt;Probir&lt;/div&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190719171625</emailId><senderName>Probir Roy</senderName><senderEmail>proy@email.wm.edu</senderEmail><timestampReceived>2019-07-19 17:16:25-0400</timestampReceived><subject>[libvirt-users] Installing QEMU from source causing error</subject><body>

[Attachment #2 (multipart/alternative)]


Hi,

I am trying to run Qemu-4.0 installed from source code.

When I run virt-manager to create a VM, I get the following error:

```
Unable to complete install: 'internal error: process exited while
connecting to monitor: 2019-07-19T17:06:35.954242Z qemu-system-x86_64:
-enable-kvm: unsupported machine type
Use -machine help to list supported machines'

Traceback (most recent call last):
  File "/usr/share/virt-manager/virtManager/asyncjob.py", line 89, in
cb_wrapper
    callback(asyncjob, *args, **kwargs)
  File "/usr/share/virt-manager/virtManager/create.py", line 2553, in
_do_async_install
    guest.start_install(meter=meter)
  File "/usr/share/virt-manager/virtinst/guest.py", line 498, in
start_install
    doboot, transient)
  File "/usr/share/virt-manager/virtinst/guest.py", line 434, in
_create_guest
    domain = self.conn.createXML(install_xml or final_xml, 0)
  File "/usr/lib/python2.7/dist-packages/libvirt.py", line 3603, in
createXML
    if ret is None:raise libvirtError('virDomainCreateXML() failed',
conn=self)
libvirtError: internal error: process exited while connecting to monitor:
2019-07-19T17:06:35.954242Z qemu-system-x86_64: -enable-kvm: unsupported
machine type
Use -machine help to list supported machines

```

I configured the Qemu with following command:
```
./../configure --prefix=/usr --enable-spice --target-list=x86_64-softmmu
--enable-kvm --enable-debug --enable-libssh2
```

Is it that I missed enabling any configuration while installing Qemu? What
is the expected QEMU configuration to run with libvirt?

-
Probir

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;&lt;div style="font-family:arial,helvetica,sans-serif" \
class="gmail_default"&gt;Hi,&lt;/div&gt;&lt;div style="font-family:arial,helvetica,sans-serif" \
class="gmail_default"&gt;&lt;br&gt;&lt;/div&gt;&lt;div class="gmail_default" \
style="font-family:arial,helvetica,sans-serif"&gt;I am trying to run Qemu-4.0 installed \
from source code.&lt;br&gt;&lt;br&gt;When I run virt-manager to create a VM, I get the following \
error:&lt;br&gt;&lt;br&gt;```&lt;br&gt;Unable to complete install: 'internal error: process exited \
while connecting to monitor: 2019-07-19T17:06:35.954242Z qemu-system-x86_64: \
-enable-kvm: unsupported machine type&lt;br&gt;Use -machine help to list supported \
machines'&lt;br&gt;&lt;br&gt;Traceback (most recent call last):&lt;br&gt;   File \
"/usr/share/virt-manager/virtManager/asyncjob.py", line 89, in \
cb_wrapper&lt;br&gt;      callback(asyncjob, *args, **kwargs)&lt;br&gt;   File \
"/usr/share/virt-manager/virtManager/create.py", line 2553, in \
_do_async_install&lt;br&gt;      guest.start_install(meter=meter)&lt;br&gt;   File \
"/usr/share/virt-manager/virtinst/guest.py", line 498, in start_install&lt;br&gt; \
doboot, transient)&lt;br&gt;   File "/usr/share/virt-manager/virtinst/guest.py", \
line 434, in _create_guest&lt;br&gt;      domain = self.conn.createXML(install_xml or \
final_xml, 0)&lt;br&gt;   File "/usr/lib/python2.7/dist-packages/libvirt.py", \
line 3603, in createXML&lt;br&gt;      if ret is None:raise \
libvirtError('virDomainCreateXML() failed', conn=self)&lt;br&gt;libvirtError: \
internal error: process exited while connecting to monitor: \
2019-07-19T17:06:35.954242Z qemu-system-x86_64: -enable-kvm: unsupported machine \
type&lt;br&gt;Use -machine help to list supported machines&lt;br&gt;&lt;br&gt;```&lt;br&gt;&lt;br&gt;I configured \
the Qemu with following command:&lt;br&gt;```&lt;br&gt;./../configure --prefix=/usr \
--enable-spice --target-list=x86_64-softmmu --enable-kvm --enable-debug \
--enable-libssh2&lt;br&gt;```&lt;br&gt;&lt;br&gt;Is it that I missed enabling any configuration while \
installing Qemu? What is the expected QEMU configuration to run with \
libvirt?&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div \
style="font-family:arial,helvetica,sans-serif" class="gmail_default"&gt;-&lt;/div&gt;&lt;div \
style="font-family:arial,helvetica,sans-serif" \
class="gmail_default"&gt;Probir&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190718034914</emailId><senderName>netsurfed</senderName><senderEmail>zhuohaofan@126.com</senderEmail><timestampReceived>2019-07-18 03:49:14-0400</timestampReceived><subject>[libvirt-users] make install libvirt v5.5.0 failed</subject><body>

[Attachment #2 (multipart/alternative)]

[Attachment #4 (text/plain)]

Hi all:
    Unable to install libvirt v5.5.0 correctly through the source code which clone \
                from git. The error message is shown below.
libtool: install: (cd /home/libvirt/src; /bin/sh /home/libvirt/libtool  --silent \
--tag CC --mode=relink gcc -std=gnu99 -I/usr/include/libxml2 -fno-common -W -Waddress \
-Waggressive-loop-optimizations -Wall -Wattributes -Wbad-function-cast \
-Wbuiltin-macro-redefined -Wcast-align -Wchar-subscripts -Wclobbered -Wcomment \
-Wcomments -Wcoverage-mismatch -Wcpp -Wdeprecated-declarations -Wdiv-by-zero \
-Wdouble-promotion -Wempty-body -Wendif-labels -Wextra -Wformat-contains-nul \
-Wformat-extra-args -Wformat-security -Wformat-y2k -Wformat-zero-length \
-Wfree-nonheap-object -Wignored-qualifiers -Wimplicit -Wimplicit-function-declaration \
-Wimplicit-int -Winit-self -Winline -Wint-to-pointer-cast -Winvalid-memory-model \
-Winvalid-pch -Wlogical-op -Wmain -Wmaybe-uninitialized -Wmissing-braces \
-Wmissing-declarations -Wmissing-field-initializers -Wmissing-include-dirs \
-Wmissing-parameter-type -Wmissing-prototypes -Wmultichar -Wnarrowing \
-Wnested-externs -Wnonnull -Wold-style-declaration -Wold-style-definition -Woverflow \
-Woverride-init -Wpacked-bitfield-compat -Wparentheses -Wpointer-arith -Wpointer-sign \
-Wpointer-to-int-cast -Wpragmas -Wpsabi -Wreturn-local-addr -Wreturn-type \
-Wsequence-point -Wshadow -Wsizeof-pointer-memaccess -Wstrict-aliasing \
-Wstrict-prototypes -Wsuggest-attribute=const -Wsuggest-attribute=format \
-Wsuggest-attribute=noreturn -Wsuggest-attribute=pure -Wswitch -Wsync-nand \
-Wtrampolines -Wtrigraphs -Wtype-limits -Wuninitialized -Wunknown-pragmas -Wunused \
-Wunused-but-set-parameter -Wunused-but-set-variable -Wunused-function -Wunused-label \
-Wunused-local-typedefs -Wunused-parameter -Wunused-result -Wunused-value \
-Wunused-variable -Wvarargs -Wvariadic-macros -Wvector-operation-performance \
-Wvolatile-register-var -Wwrite-strings -Wnormalized=nfc -Wno-sign-compare \
-Wjump-misses-init -Wswitch-enum -Wno-format-nonliteral -fstack-protector-strong \
-fexceptions -fasynchronous-unwind-tables -fipa-pure-const \
-Wno-suggest-attribute=pure -Wno-suggest-attribute=const -Werror \
-Wframe-larger-than=4096 -g -O2 -module -avoid-version -Wl,-z -Wl,nodelete \
-export-dynamic -Wl,-z -Wl,relro -Wl,-z -Wl,now -Wl,--no-copy-dt-needed-entries \
-Wl,-z -Wl,defs -o libvirt_driver_vbox.la -rpath /usr/lib/libvirt/connection-driver \
                libvirt_driver_vbox_impl.la libvirt.la ../gnulib/lib/libgnu.la -ldl )
./.libs/libvirt_driver_vbox_impl.a(libvirt_driver_vbox_impl_la-vbox_common.o): In \
                function `vboxAttachDrives':
/home/libvirt/src/vbox/vbox_common.c:1124: undefined reference to \
                `virDomainDeviceFindSCSIController'
./.libs/libvirt_driver_vbox_impl.a(libvirt_driver_vbox_impl_la-vbox_common.o): In \
function `vboxDomainSnapshotCreateXML': vbox_common.c:(.text+0x698f): undefined \
reference to `virObjectAutoUnref' vbox_common.c:(.text+0x80fa): undefined reference \
                to `virObjectAutoUnref'
./.libs/libvirt_driver_vbox_impl.a(libvirt_driver_vbox_impl_la-vbox_common.o): In \
function `vboxDomainSnapshotGetXMLDesc': vbox_common.c:(.text+0xc430): undefined \
reference to `virDomainSnapshotDefNew' vbox_common.c:(.text+0xc7bc): undefined \
reference to `virObjectAutoUnref' vbox_common.c:(.text+0xe100): undefined reference \
                to `virObjectAutoUnref'
./.libs/libvirt_driver_vbox_impl.a(libvirt_driver_vbox_impl_la-vbox_common.o): In \
function `vboxAttachNetwork.isra.17': vbox_common.c:(.text+0x10656): undefined \
                reference to `virDomainNetModelTypeToString'
./.libs/libvirt_driver_vbox_impl.a(libvirt_driver_vbox_impl_la-vbox_common.o): In \
function `vboxDomainGetXMLDesc': vbox_common.c:(.text+0x1574d): undefined reference \
                to `virDomainHostdevDefNew'
collect2: error: ld returned 1 exit status
libtool: install: error: relink `libvirt_driver_vbox.la' with the above command \
before installing it make[3]: *** [install-modLTLIBRARIES] Error 1
make[3]: Leaving directory `/home/libvirt/src'
make[2]: *** [install-am] Error 2
make[2]: Leaving directory `/home/libvirt/src'
make[1]: *** [install] Error 2
make[1]: Leaving directory `/home/libvirt/src'
make: *** [install-recursive] Error 1


Here's how I do it.
[root@localhost libvirt]# uname -a
Linux localhost.localdomain 3.10.0-693.el7.x86_64 #1 SMP Tue Aug 22 21:09:27 UTC 2017 \
x86_64 x86_64 x86_64 GNU/Linux [root@localhost libvirt]# git clone \
https://libvirt.org/git/libvirt.git [root@localhost libvirt]# cd libvirt
[root@localhost libvirt]# git checkout v5.5.0
[root@localhost libvirt]# ./autogen.sh
[root@localhost libvirt]# ./configure --prefix=/usr --sysconfdir=/etc \
--localstatedir=/var [root@localhost libvirt]# make -j32
[root@localhost libvirt]# make install


[Attachment #5 (text/html)]

&lt;div style="line-height:1.7;color:#000000;font-size:14px;font-family:Arial"&gt;&lt;div&gt;Hi \
all:&lt;/div&gt;&lt;div&gt;    Unable to install libvirt v5.5.0 correctly through \
the source code which clone from git. The error message is shown \
below.&lt;/div&gt;&lt;div&gt;&lt;div&gt;libtool: install: (cd /home/libvirt/src; /bin/sh \
/home/libvirt/libtool  --silent --tag CC --mode=relink gcc -std=gnu99 \
-I/usr/include/libxml2 -fno-common -W -Waddress -Waggressive-loop-optimizations -Wall \
-Wattributes -Wbad-function-cast -Wbuiltin-macro-redefined -Wcast-align \
-Wchar-subscripts -Wclobbered -Wcomment -Wcomments -Wcoverage-mismatch -Wcpp \
-Wdeprecated-declarations -Wdiv-by-zero -Wdouble-promotion -Wempty-body \
-Wendif-labels -Wextra -Wformat-contains-nul -Wformat-extra-args -Wformat-security \
-Wformat-y2k -Wformat-zero-length -Wfree-nonheap-object -Wignored-qualifiers \
-Wimplicit -Wimplicit-function-declaration -Wimplicit-int -Winit-self -Winline \
-Wint-to-pointer-cast -Winvalid-memory-model -Winvalid-pch -Wlogical-op -Wmain \
-Wmaybe-uninitialized -Wmissing-braces -Wmissing-declarations \
-Wmissing-field-initializers -Wmissing-include-dirs -Wmissing-parameter-type \
-Wmissing-prototypes -Wmultichar -Wnarrowing -Wnested-externs -Wnonnull \
-Wold-style-declaration -Wold-style-definition -Woverflow -Woverride-init \
-Wpacked-bitfield-compat -Wparentheses -Wpointer-arith -Wpointer-sign \
-Wpointer-to-int-cast -Wpragmas -Wpsabi -Wreturn-local-addr -Wreturn-type \
-Wsequence-point -Wshadow -Wsizeof-pointer-memaccess -Wstrict-aliasing \
-Wstrict-prototypes -Wsuggest-attribute=const -Wsuggest-attribute=format \
-Wsuggest-attribute=noreturn -Wsuggest-attribute=pure -Wswitch -Wsync-nand \
-Wtrampolines -Wtrigraphs -Wtype-limits -Wuninitialized -Wunknown-pragmas -Wunused \
-Wunused-but-set-parameter -Wunused-but-set-variable -Wunused-function -Wunused-label \
-Wunused-local-typedefs -Wunused-parameter -Wunused-result -Wunused-value \
-Wunused-variable -Wvarargs -Wvariadic-macros -Wvector-operation-performance \
-Wvolatile-register-var -Wwrite-strings -Wnormalized=nfc -Wno-sign-compare \
-Wjump-misses-init -Wswitch-enum -Wno-format-nonliteral -fstack-protector-strong \
-fexceptions -fasynchronous-unwind-tables -fipa-pure-const \
-Wno-suggest-attribute=pure -Wno-suggest-attribute=const -Werror \
-Wframe-larger-than=4096 -g -O2 -module -avoid-version -Wl,-z -Wl,nodelete \
-export-dynamic -Wl,-z -Wl,relro -Wl,-z -Wl,now -Wl,--no-copy-dt-needed-entries \
-Wl,-z -Wl,defs -o libvirt_driver_vbox.la -rpath /usr/lib/libvirt/connection-driver \
libvirt_driver_vbox_impl.la libvirt.la ../gnulib/lib/libgnu.la -ldl \
)&lt;/div&gt;&lt;div&gt;./.libs/libvirt_driver_vbox_impl.a(libvirt_driver_vbox_impl_la-vbox_common.o): \
In function `vboxAttachDrives':&lt;/div&gt;&lt;div&gt;/home/libvirt/src/vbox/vbox_common.c:1124: \
undefined reference to \
`virDomainDeviceFindSCSIController'&lt;/div&gt;&lt;div&gt;./.libs/libvirt_driver_vbox_impl.a(libvirt_driver_vbox_impl_la-vbox_common.o): \
In function `vboxDomainSnapshotCreateXML':&lt;/div&gt;&lt;div&gt;vbox_common.c:(.text+0x698f): \
undefined reference to `virObjectAutoUnref'&lt;/div&gt;&lt;div&gt;vbox_common.c:(.text+0x80fa): \
undefined reference to \
`virObjectAutoUnref'&lt;/div&gt;&lt;div&gt;./.libs/libvirt_driver_vbox_impl.a(libvirt_driver_vbox_impl_la-vbox_common.o): \
In function `vboxDomainSnapshotGetXMLDesc':&lt;/div&gt;&lt;div&gt;vbox_common.c:(.text+0xc430): \
undefined reference to \
`virDomainSnapshotDefNew'&lt;/div&gt;&lt;div&gt;vbox_common.c:(.text+0xc7bc): undefined reference \
to `virObjectAutoUnref'&lt;/div&gt;&lt;div&gt;vbox_common.c:(.text+0xe100): undefined reference \
to `virObjectAutoUnref'&lt;/div&gt;&lt;div&gt;./.libs/libvirt_driver_vbox_impl.a(libvirt_driver_vbox_impl_la-vbox_common.o): \
In function `vboxAttachNetwork.isra.17':&lt;/div&gt;&lt;div&gt;vbox_common.c:(.text+0x10656): \
undefined reference to \
`virDomainNetModelTypeToString'&lt;/div&gt;&lt;div&gt;./.libs/libvirt_driver_vbox_impl.a(libvirt_driver_vbox_impl_la-vbox_common.o): \
In function `vboxDomainGetXMLDesc':&lt;/div&gt;&lt;div&gt;vbox_common.c:(.text+0x1574d): \
undefined reference to `virDomainHostdevDefNew'&lt;/div&gt;&lt;div&gt;collect2: error: ld \
returned 1 exit status&lt;/div&gt;&lt;div&gt;libtool: install: error: relink \
`libvirt_driver_vbox.la' with the above command before installing \
it&lt;/div&gt;&lt;div&gt;make[3]: *** [install-modLTLIBRARIES] Error 1&lt;/div&gt;&lt;div&gt;make[3]: Leaving \
directory `/home/libvirt/src'&lt;/div&gt;&lt;div&gt;make[2]: *** [install-am] Error \
2&lt;/div&gt;&lt;div&gt;make[2]: Leaving directory `/home/libvirt/src'&lt;/div&gt;&lt;div&gt;make[1]: *** \
[install] Error 2&lt;/div&gt;&lt;div&gt;make[1]: Leaving directory \
`/home/libvirt/src'&lt;/div&gt;&lt;div&gt;make: *** [install-recursive] Error \
1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Here's how I do it.&lt;/div&gt;&lt;div&gt;&lt;div&gt;[root@localhost \
libvirt]# uname -a&lt;/div&gt;&lt;div&gt;Linux localhost.localdomain 3.10.0-693.el7.x86_64 #1 SMP \
Tue Aug 22 21:09:27 UTC 2017 x86_64 x86_64 x86_64 \
GNU/Linux&lt;/div&gt;&lt;/div&gt;&lt;div&gt;[root@localhost libvirt]# git clone &lt;a \
href="https://libvirt.org/git/libvirt.git" \
_src="https://libvirt.org/git/libvirt.git"&gt;https://libvirt.org/git/libvirt.git&lt;/a&gt; \
&lt;/div&gt;&lt;div&gt;[root@localhost libvirt]# cd libvirt&lt;/div&gt;&lt;div&gt;[root@localhost libvirt]# \
git checkout v5.5.0&lt;/div&gt;&lt;div&gt;[root@localhost libvirt]# \
./autogen.sh&lt;/div&gt;&lt;div&gt;[root@localhost libvirt]# ./configure --prefix=/usr \
--sysconfdir=/etc --localstatedir=/var&lt;/div&gt;&lt;div&gt;[root@localhost libvirt]# make \
-j32&lt;/div&gt;&lt;div&gt;[root@localhost libvirt]# make install&lt;/div&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190726112922</emailId><senderName>bharath paulraj</senderName><senderEmail>bharathpaul@gmail.com</senderEmail><timestampReceived>2019-07-26 11:29:22-0400</timestampReceived><subject>[libvirt-users] &lt;VM LIVE Migration&gt; &lt;Sync conntrack entries&gt;</subject><body>

[Attachment #2 (multipart/alternative)]


Hi Team,

I am using QEMU/KVM for launching VMs and libvirt to govern those VMs.
I would like to synchronise the connection tracking entries specific
to the VM during the VM LIVE migrations. It is required when the
firewall is implemented at the host level like libvirt's "network
filters". If stateful firewall is enabled, then unless these
connection tracking entries are synchronised, all the connections to
the VM are lost and all TCP connections should be reestablished. Is
there any option already available? I don't think current libvirt
hooks are helpful, as VM pause in the source hypervisor and VM on in
the destination hypervisor is done by QEMU and it does not wait for
any application that needs to sync-up some metadata — In my case, it
is conntrack entries.

Also I tried with the existing hooks - stop, release, startcpus and
nothing worked well.

Has anybody came across similar scenario? If yes, how you overcome this?


-- 
Regards,
Bharath

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;&lt;pre style="white-space:pre-wrap;color:rgb(0,0,0)"&gt;&lt;font \
face="verdana, sans-serif"&gt;Hi Team,

I am using QEMU/KVM for launching VMs and libvirt to govern those VMs.  I would like \
to synchronise the connection tracking entries specific to the VM during the VM LIVE \
migrations. It is required when the firewall is implemented at the host level like \
libvirt's "network filters". If stateful firewall is enabled, then \
unless these connection tracking entries are synchronised, all the connections to the \
VM are lost and all TCP connections should be reestablished. Is there any option \
already available? I don't think current libvirt hooks are helpful, as VM pause \
in the source hypervisor and VM on in the destination hypervisor is done by QEMU and \
it does not wait for any application that needs to sync-up some metadata — In my \
case, it is conntrack entries.&lt;/font&gt;&lt;/pre&gt;&lt;pre \
style="white-space:pre-wrap;color:rgb(0,0,0)"&gt;&lt;font face="verdana, sans-serif"&gt;Also I \
tried with the existing hooks - stop, release, startcpus and nothing worked \
well.&lt;/font&gt;&lt;/pre&gt;&lt;pre style="white-space:pre-wrap;color:rgb(0,0,0)"&gt;&lt;font \
face="verdana, sans-serif"&gt;Has anybody came across similar scenario? If yes, how you \
overcome this?&lt;/font&gt;&lt;/pre&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;-- &lt;br&gt;&lt;div dir="ltr" \
class="gmail_signature" data-smartmail="gmail_signature"&gt;&lt;div \
dir="ltr"&gt;Regards,&lt;div&gt;Bharath&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190723023101</emailId><senderName>netsurfed</senderName><senderEmail>zhuohaofan@126.com</senderEmail><timestampReceived>2019-07-23 02:31:01-0400</timestampReceived><subject>Re: [libvirt-users] make install libvirt v5.5.0 failed</subject><body>

[Attachment #2 (multipart/alternative)]

[Attachment #4 (text/plain)]

Hi all:
    Does anyone have a similar problem?  Any Suggestions?
    THX!

2019-07-18 11:49:14£¬"netsurfed" &lt;zhuohaofan@126.com&gt; £º

Hi all:
    Unable to install libvirt v5.5.0 correctly through the source code which clone \
                from git. The error message is shown below.
libtool: install: (cd /home/libvirt/src; /bin/sh /home/libvirt/libtool  --silent \
--tag CC --mode=relink gcc -std=gnu99 -I/usr/include/libxml2 -fno-common -W -Waddress \
-Waggressive-loop-optimizations -Wall -Wattributes -Wbad-function-cast \
-Wbuiltin-macro-redefined -Wcast-align -Wchar-subscripts -Wclobbered -Wcomment \
-Wcomments -Wcoverage-mismatch -Wcpp -Wdeprecated-declarations -Wdiv-by-zero \
-Wdouble-promotion -Wempty-body -Wendif-labels -Wextra -Wformat-contains-nul \
-Wformat-extra-args -Wformat-security -Wformat-y2k -Wformat-zero-length \
-Wfree-nonheap-object -Wignored-qualifiers -Wimplicit -Wimplicit-function-declaration \
-Wimplicit-int -Winit-self -Winline -Wint-to-pointer-cast -Winvalid-memory-model \
-Winvalid-pch -Wlogical-op -Wmain -Wmaybe-uninitialized -Wmissing-braces \
-Wmissing-declarations -Wmissing-field-initializers -Wmissing-include-dirs \
-Wmissing-parameter-type -Wmissing-prototypes -Wmultichar -Wnarrowing \
-Wnested-externs -Wnonnull -Wold-style-declaration -Wold-style-definition -Woverflow \
-Woverride-init -Wpacked-bitfield-compat -Wparentheses -Wpointer-arith -Wpointer-sign \
-Wpointer-to-int-cast -Wpragmas -Wpsabi -Wreturn-local-addr -Wreturn-type \
-Wsequence-point -Wshadow -Wsizeof-pointer-memaccess -Wstrict-aliasing \
-Wstrict-prototypes -Wsuggest-attribute=const -Wsuggest-attribute=format \
-Wsuggest-attribute=noreturn -Wsuggest-attribute=pure -Wswitch -Wsync-nand \
-Wtrampolines -Wtrigraphs -Wtype-limits -Wuninitialized -Wunknown-pragmas -Wunused \
-Wunused-but-set-parameter -Wunused-but-set-variable -Wunused-function -Wunused-label \
-Wunused-local-typedefs -Wunused-parameter -Wunused-result -Wunused-value \
-Wunused-variable -Wvarargs -Wvariadic-macros -Wvector-operation-performance \
-Wvolatile-register-var -Wwrite-strings -Wnormalized=nfc -Wno-sign-compare \
-Wjump-misses-init -Wswitch-enum -Wno-format-nonliteral -fstack-protector-strong \
-fexceptions -fasynchronous-unwind-tables -fipa-pure-const \
-Wno-suggest-attribute=pure -Wno-suggest-attribute=const -Werror \
-Wframe-larger-than=4096 -g -O2 -module -avoid-version -Wl,-z -Wl,nodelete \
-export-dynamic -Wl,-z -Wl,relro -Wl,-z -Wl,now -Wl,--no-copy-dt-needed-entries \
-Wl,-z -Wl,defs -o libvirt_driver_vbox.la -rpath /usr/lib/libvirt/connection-driver \
                libvirt_driver_vbox_impl.la libvirt.la ../gnulib/lib/libgnu.la -ldl )
./.libs/libvirt_driver_vbox_impl.a(libvirt_driver_vbox_impl_la-vbox_common.o): In \
                function `vboxAttachDrives':
/home/libvirt/src/vbox/vbox_common.c:1124: undefined reference to \
                `virDomainDeviceFindSCSIController'
./.libs/libvirt_driver_vbox_impl.a(libvirt_driver_vbox_impl_la-vbox_common.o): In \
function `vboxDomainSnapshotCreateXML': vbox_common.c:(.text+0x698f): undefined \
reference to `virObjectAutoUnref' vbox_common.c:(.text+0x80fa): undefined reference \
                to `virObjectAutoUnref'
./.libs/libvirt_driver_vbox_impl.a(libvirt_driver_vbox_impl_la-vbox_common.o): In \
function `vboxDomainSnapshotGetXMLDesc': vbox_common.c:(.text+0xc430): undefined \
reference to `virDomainSnapshotDefNew' vbox_common.c:(.text+0xc7bc): undefined \
reference to `virObjectAutoUnref' vbox_common.c:(.text+0xe100): undefined reference \
                to `virObjectAutoUnref'
./.libs/libvirt_driver_vbox_impl.a(libvirt_driver_vbox_impl_la-vbox_common.o): In \
function `vboxAttachNetwork.isra.17': vbox_common.c:(.text+0x10656): undefined \
                reference to `virDomainNetModelTypeToString'
./.libs/libvirt_driver_vbox_impl.a(libvirt_driver_vbox_impl_la-vbox_common.o): In \
function `vboxDomainGetXMLDesc': vbox_common.c:(.text+0x1574d): undefined reference \
                to `virDomainHostdevDefNew'
collect2: error: ld returned 1 exit status
libtool: install: error: relink `libvirt_driver_vbox.la' with the above command \
before installing it make[3]: *** [install-modLTLIBRARIES] Error 1
make[3]: Leaving directory `/home/libvirt/src'
make[2]: *** [install-am] Error 2
make[2]: Leaving directory `/home/libvirt/src'
make[1]: *** [install] Error 2
make[1]: Leaving directory `/home/libvirt/src'
make: *** [install-recursive] Error 1


Here's how I do it.
[root@localhost libvirt]# uname -a
Linux localhost.localdomain 3.10.0-693.el7.x86_64 #1 SMP Tue Aug 22 21:09:27 UTC 2017 \
x86_64 x86_64 x86_64 GNU/Linux [root@localhost libvirt]# git clone \
https://libvirt.org/git/libvirt.git [root@localhost libvirt]# cd libvirt
[root@localhost libvirt]# git checkout v5.5.0
[root@localhost libvirt]# ./autogen.sh
[root@localhost libvirt]# ./configure --prefix=/usr --sysconfdir=/etc \
--localstatedir=/var [root@localhost libvirt]# make -j32
[root@localhost libvirt]# make install


[Attachment #5 (text/html)]

&lt;div style="line-height:1.7;color:#000000;font-size:14px;font-family:Arial"&gt;&lt;div&gt;Hi \
all:&lt;/div&gt;&lt;div&gt;    Does anyone have a similar problem?  Any \
Suggestions?&lt;/div&gt;&lt;div&gt;    THX!&lt;/div&gt;&lt;div \
style="position:relative;zoom:1"&gt;&lt;/div&gt;&lt;div \
id="divNeteaseMailCard"&gt;&lt;/div&gt;&lt;br&gt;2019-07-18 11:49:14£¬"netsurfed" \
&lt;zhuohaofan@126.com&gt; £º&lt;br&gt; &lt;blockquote id="isReplyContent" \
style="PADDING-LEFT: 1ex; MARGIN: 0px 0px 0px 0.8ex; BORDER-LEFT: #ccc 1px \
solid"&gt;&lt;div style="line-height:1.7;color:#000000;font-size:14px;font-family:Arial"&gt;&lt;div&gt;Hi \
all:&lt;/div&gt;&lt;div&gt;    Unable to install libvirt v5.5.0 correctly through \
the source code which clone from git. The error message is shown \
below.&lt;/div&gt;&lt;div&gt;&lt;div&gt;libtool: install: (cd /home/libvirt/src; /bin/sh \
/home/libvirt/libtool  --silent --tag CC --mode=relink gcc -std=gnu99 \
-I/usr/include/libxml2 -fno-common -W -Waddress -Waggressive-loop-optimizations -Wall \
-Wattributes -Wbad-function-cast -Wbuiltin-macro-redefined -Wcast-align \
-Wchar-subscripts -Wclobbered -Wcomment -Wcomments -Wcoverage-mismatch -Wcpp \
-Wdeprecated-declarations -Wdiv-by-zero -Wdouble-promotion -Wempty-body \
-Wendif-labels -Wextra -Wformat-contains-nul -Wformat-extra-args -Wformat-security \
-Wformat-y2k -Wformat-zero-length -Wfree-nonheap-object -Wignored-qualifiers \
-Wimplicit -Wimplicit-function-declaration -Wimplicit-int -Winit-self -Winline \
-Wint-to-pointer-cast -Winvalid-memory-model -Winvalid-pch -Wlogical-op -Wmain \
-Wmaybe-uninitialized -Wmissing-braces -Wmissing-declarations \
-Wmissing-field-initializers -Wmissing-include-dirs -Wmissing-parameter-type \
-Wmissing-prototypes -Wmultichar -Wnarrowing -Wnested-externs -Wnonnull \
-Wold-style-declaration -Wold-style-definition -Woverflow -Woverride-init \
-Wpacked-bitfield-compat -Wparentheses -Wpointer-arith -Wpointer-sign \
-Wpointer-to-int-cast -Wpragmas -Wpsabi -Wreturn-local-addr -Wreturn-type \
-Wsequence-point -Wshadow -Wsizeof-pointer-memaccess -Wstrict-aliasing \
-Wstrict-prototypes -Wsuggest-attribute=const -Wsuggest-attribute=format \
-Wsuggest-attribute=noreturn -Wsuggest-attribute=pure -Wswitch -Wsync-nand \
-Wtrampolines -Wtrigraphs -Wtype-limits -Wuninitialized -Wunknown-pragmas -Wunused \
-Wunused-but-set-parameter -Wunused-but-set-variable -Wunused-function -Wunused-label \
-Wunused-local-typedefs -Wunused-parameter -Wunused-result -Wunused-value \
-Wunused-variable -Wvarargs -Wvariadic-macros -Wvector-operation-performance \
-Wvolatile-register-var -Wwrite-strings -Wnormalized=nfc -Wno-sign-compare \
-Wjump-misses-init -Wswitch-enum -Wno-format-nonliteral -fstack-protector-strong \
-fexceptions -fasynchronous-unwind-tables -fipa-pure-const \
-Wno-suggest-attribute=pure -Wno-suggest-attribute=const -Werror \
-Wframe-larger-than=4096 -g -O2 -module -avoid-version -Wl,-z -Wl,nodelete \
-export-dynamic -Wl,-z -Wl,relro -Wl,-z -Wl,now -Wl,--no-copy-dt-needed-entries \
-Wl,-z -Wl,defs -o libvirt_driver_vbox.la -rpath /usr/lib/libvirt/connection-driver \
libvirt_driver_vbox_impl.la libvirt.la ../gnulib/lib/libgnu.la -ldl \
)&lt;/div&gt;&lt;div&gt;./.libs/libvirt_driver_vbox_impl.a(libvirt_driver_vbox_impl_la-vbox_common.o): \
In function `vboxAttachDrives':&lt;/div&gt;&lt;div&gt;/home/libvirt/src/vbox/vbox_common.c:1124: \
undefined reference to \
`virDomainDeviceFindSCSIController'&lt;/div&gt;&lt;div&gt;./.libs/libvirt_driver_vbox_impl.a(libvirt_driver_vbox_impl_la-vbox_common.o): \
In function `vboxDomainSnapshotCreateXML':&lt;/div&gt;&lt;div&gt;vbox_common.c:(.text+0x698f): \
undefined reference to `virObjectAutoUnref'&lt;/div&gt;&lt;div&gt;vbox_common.c:(.text+0x80fa): \
undefined reference to \
`virObjectAutoUnref'&lt;/div&gt;&lt;div&gt;./.libs/libvirt_driver_vbox_impl.a(libvirt_driver_vbox_impl_la-vbox_common.o): \
In function `vboxDomainSnapshotGetXMLDesc':&lt;/div&gt;&lt;div&gt;vbox_common.c:(.text+0xc430): \
undefined reference to \
`virDomainSnapshotDefNew'&lt;/div&gt;&lt;div&gt;vbox_common.c:(.text+0xc7bc): undefined reference \
to `virObjectAutoUnref'&lt;/div&gt;&lt;div&gt;vbox_common.c:(.text+0xe100): undefined reference \
to `virObjectAutoUnref'&lt;/div&gt;&lt;div&gt;./.libs/libvirt_driver_vbox_impl.a(libvirt_driver_vbox_impl_la-vbox_common.o): \
In function `vboxAttachNetwork.isra.17':&lt;/div&gt;&lt;div&gt;vbox_common.c:(.text+0x10656): \
undefined reference to \
`virDomainNetModelTypeToString'&lt;/div&gt;&lt;div&gt;./.libs/libvirt_driver_vbox_impl.a(libvirt_driver_vbox_impl_la-vbox_common.o): \
In function `vboxDomainGetXMLDesc':&lt;/div&gt;&lt;div&gt;vbox_common.c:(.text+0x1574d): \
undefined reference to `virDomainHostdevDefNew'&lt;/div&gt;&lt;div&gt;collect2: error: ld \
returned 1 exit status&lt;/div&gt;&lt;div&gt;libtool: install: error: relink \
`libvirt_driver_vbox.la' with the above command before installing \
it&lt;/div&gt;&lt;div&gt;make[3]: *** [install-modLTLIBRARIES] Error 1&lt;/div&gt;&lt;div&gt;make[3]: Leaving \
directory `/home/libvirt/src'&lt;/div&gt;&lt;div&gt;make[2]: *** [install-am] Error \
2&lt;/div&gt;&lt;div&gt;make[2]: Leaving directory `/home/libvirt/src'&lt;/div&gt;&lt;div&gt;make[1]: *** \
[install] Error 2&lt;/div&gt;&lt;div&gt;make[1]: Leaving directory \
`/home/libvirt/src'&lt;/div&gt;&lt;div&gt;make: *** [install-recursive] Error \
1&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Here's how I do it.&lt;/div&gt;&lt;div&gt;&lt;div&gt;[root@localhost \
libvirt]# uname -a&lt;/div&gt;&lt;div&gt;Linux localhost.localdomain 3.10.0-693.el7.x86_64 #1 SMP \
Tue Aug 22 21:09:27 UTC 2017 x86_64 x86_64 x86_64 \
GNU/Linux&lt;/div&gt;&lt;/div&gt;&lt;div&gt;[root@localhost libvirt]# git clone &lt;a \
href="https://libvirt.org/git/libvirt.git" \
_src="https://libvirt.org/git/libvirt.git"&gt;https://libvirt.org/git/libvirt.git&lt;/a&gt; \
&lt;/div&gt;&lt;div&gt;[root@localhost libvirt]# cd libvirt&lt;/div&gt;&lt;div&gt;[root@localhost libvirt]# \
git checkout v5.5.0&lt;/div&gt;&lt;div&gt;[root@localhost libvirt]# \
./autogen.sh&lt;/div&gt;&lt;div&gt;[root@localhost libvirt]# ./configure --prefix=/usr \
--sysconfdir=/etc --localstatedir=/var&lt;/div&gt;&lt;div&gt;[root@localhost libvirt]# make \
-j32&lt;/div&gt;&lt;div&gt;[root@localhost libvirt]# make install&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190729015146</emailId><senderName>Ming-Hung Tsai</senderName><senderEmail>mingnus@gmail.com</senderEmail><timestampReceived>2019-07-29 01:51:46-0400</timestampReceived><subject>[libvirt-users] Why librbd disallow VM live migration if the disk cache mode is not none or directsy</subject><body>

I'm curious that why librbd sets this limitation? The rule first
appeared in librbd.git commit d57485f73ab. Theoretically, a
write-through cache is also safe for VM migration, if the cache
implementation guarantees that cache invalidation and disk write are
synchronous operations.

For example, I'm using Ceph RBD images as VM storage backend. The Ceph
librbd supports synchronous write-through cache, by setting
rbd_cache_max_dirty to zero, and setting
rbd_cache_block_writes_upfront to true, thus it would be safe for VM
migration. Is that true? Any suggestion would be appreciated. Thanks.


Ming-Hung Tsai

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190729175057</emailId><senderName>Kaushal Shriyan</senderName><senderEmail>kaushalshriyan@gmail.com</senderEmail><timestampReceived>2019-07-29 17:50:57-0400</timestampReceived><subject>[libvirt-users] virsh command to list CPU,Memory and Storage</subject><body>

[Attachment #2 (multipart/alternative)]


Hi,

Is there a way to find out total CPU's, Memory and Storage using virsh
command? For example virsh list --all list out all VM's

11    dockerregistry01               running
12    gitlab      running

Any help will be highly appreciated. Thanks in Advance.

Best Regards,

Kaushal

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;Hi,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Is there a way to find out total CPU's, \
Memory and Storage using virsh command? For example virsh list --all list out all \
VM's&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;11      dockerregistry01                      \
running&lt;br&gt;&lt;/div&gt;&lt;div&gt;12      gitlab         running&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Any \
help will be highly appreciated. Thanks in Advance.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Best  \
Regards,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Kaushal&lt;/div&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190730120601</emailId><senderName></senderName><senderEmail>jinlei_dlut@163.com</senderEmail><timestampReceived>2019-07-30 12:06:01-0400</timestampReceived><subject>[libvirt-users] Libvirt Virtualization Problem</subject><body>

[Attachment #2 (multipart/alternative)]

[Attachment #4 (text/plain)]

Dear Sir/Madam:
  I use virt-manager to create a new virtual machine(it's name is generic), then I \
edit generic to set it's cpu_mode as 'host-model', and I start it, but when dumpxml \
generic, it's cpu_mode is changed as 'custom'.  I want to know that why it is?
  And what's the principle of dumpxml?


Thanks!


A user of libvirt




 


[Attachment #5 (text/html)]

&lt;div style="line-height:1.7;color:#000000;font-size:14px;font-family:Arial"&gt;&lt;div \
style="line-height:1.7;color:#000000;font-size:14px;font-family:Arial"&gt;&lt;div&gt;Dear \
Sir/Madam:&lt;/div&gt;&lt;div&gt;  I use virt-manager to create a new virtual machine(it's \
name is generic), then I edit generic to set it's cpu_mode as 'host-model', and I \
start it, but when dumpxml generic, it's cpu_mode is changed as \
'custom'.&lt;/div&gt;&lt;div&gt;  I want to know that why it is?&lt;/div&gt;&lt;div&gt;  And what's \
the principle of dumpxml?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks!&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;A \
user of libvirt&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;br&gt;&lt;span \
title="neteasefooter"&gt;&lt;p&gt; &lt;/p&gt;&lt;/span&gt;&lt;/div&gt;&lt;br&gt;&lt;br&gt;&lt;span \
title="neteasefooter"&gt;&lt;p&gt; &lt;/p&gt;&lt;/span&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190730070625</emailId><senderName>Erik Skultety</senderName><senderEmail>eskultet@redhat.com</senderEmail><timestampReceived>2019-07-30 07:06:25-0400</timestampReceived><subject>Re: [libvirt-users] virsh command to list CPU,Memory and Storage</subject><body>

On Mon, Jul 29, 2019 at 11:08:57PM +0530, Kaushal Shriyan wrote:
&gt; Hi,
&gt;
&gt; Is there a way to find out total CPU's, Memory and Storage using virsh
&gt; command? For example virsh list --all list out all VM's
&gt;
&gt; 11    dockerregistry01               running
&gt; 12    gitlab      running
&gt;
&gt; Any help will be highly appreciated. Thanks in Advance.
&gt;
&gt; Best Regards,
&gt;
&gt; Kaushal

Hi,
have a look at dominfo command, that will give you basic information about the
guest, that however, doesn't include storage. For storage, you'd want to use a
sequence of commands: domblklist &lt;domain&gt;;domblkinfo &lt;domain&gt; &lt;disk&gt; --human.

Regards,
Erik

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190729022031</emailId><senderName>Ming-Hung Tsai</senderName><senderEmail>mingnus@gmail.com</senderEmail><timestampReceived>2019-07-29 02:20:31-0400</timestampReceived><subject>Re: [libvirt-users] Why librbd disallow VM live migration if the disk cache mode is not none or dire</subject><body>

Sorry, the title and content are wrong. I mean libvirt, not librbd.

Ming-Hung Tsai &lt;mingnus@gmail.com&gt; :
&gt;
&gt; I'm curious that why librbd sets this limitation? The rule first
&gt; appeared in librbd.git commit d57485f73ab. Theoretically, a
&gt; write-through cache is also safe for VM migration, if the cache
&gt; implementation guarantees that cache invalidation and disk write are
&gt; synchronous operations.
&gt;
&gt; For example, I'm using Ceph RBD images as VM storage backend. The Ceph
&gt; librbd supports synchronous write-through cache, by setting
&gt; rbd_cache_max_dirty to zero, and setting
&gt; rbd_cache_block_writes_upfront to true, thus it would be safe for VM
&gt; migration. Is that true? Any suggestion would be appreciated. Thanks.

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190719173605</emailId><senderName>Daniel =?utf-8?B?UC4gQmVycmFuZ8Op?=</senderName><senderEmail>berrange@redhat.com</senderEmail><timestampReceived>2019-07-19 17:36:05-0400</timestampReceived><subject>Re: [libvirt-users] Installing QEMU from source causing error</subject><body>

On Fri, Jul 19, 2019 at 12:16:25PM -0500, Probir Roy wrote:
&gt; Hi,
&gt; 
&gt; I am trying to run Qemu-4.0 installed from source code.
&gt; 
&gt; When I run virt-manager to create a VM, I get the following error:
&gt; 
&gt; ```
&gt; Unable to complete install: 'internal error: process exited while
&gt; connecting to monitor: 2019-07-19T17:06:35.954242Z qemu-system-x86_64:
&gt; -enable-kvm: unsupported machine type
&gt; Use -machine help to list supported machines'

You don't mention what your OS is ?  Some OS vendors patch QEMU
to have different machine types than upstream QEMU provides, and
I guess that's what you've hit.

If you look in your libvirt XML 'virsh dumpxml $GUESTNAME' you'll
see a machine type listed - probably "pc-$SOMETHING" or "q35-$SOMETHING".

If you simply delete the "-$SOMETHING" part to leave just "pc" or
just "q35", then libvirt will expand the machine type into the
latest one available with your self-built QEMU

Regards,
Daniel
-- 
|: https://berrange.com      -o-    https://www.flickr.com/photos/dberrange :|
|: https://libvirt.org         -o-            https://fstop138.berrange.com :|
|: https://entangle-photo.org    -o-    https://www.instagram.com/dberrange :|

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190720193652</emailId><senderName>Probir Roy</senderName><senderEmail>proy@email.wm.edu</senderEmail><timestampReceived>2019-07-20 19:36:52-0400</timestampReceived><subject>Re: [libvirt-users] Installing QEMU from source causing error</subject><body>

[Attachment #2 (multipart/alternative)]


It is true that the machine contains 'pc-i440fx-4.0'. I am using
Ubuntu18.04 and libvirt-4.0.0

This is probably a separate issue, but while updating the machine name
neither "virsh define" or "virsh edit" updates the name to "pc".

I was reading the FAQ of libvirt on updating the configuration at :
https://wiki.libvirt.org/page/FAQ#What_is_the_.27virsh_edit.27_command_and_how_do_I_use_it.3F

"... A common problem seen when people edit the on-disk XML is a VM that
simply vanishes the next time libvirtd is restarted after the edit. The VM
disappears from libvirt because the XML has become invalid, after which
libvirt can't do anything with it. "

Is it also true for virsh?

I also tried creating a new VM by "virsh dumpxml" and editing the xml with
new "name" and "pc" and removed the "uuid" field and then "virsh define".
virsh creates a new domain with UUID, but with machine='pc-i440fx-4.0'. Is
it possible the virsh is using some configuration that resetting to
predefined machine name?




On Fri, Jul 19, 2019 at 12:36 PM Daniel P. Berrangé &lt;berrange@redhat.com&gt;
wrote:

&gt; On Fri, Jul 19, 2019 at 12:16:25PM -0500, Probir Roy wrote:
&gt; &gt; Hi,
&gt; &gt;
&gt; &gt; I am trying to run Qemu-4.0 installed from source code.
&gt; &gt;
&gt; &gt; When I run virt-manager to create a VM, I get the following error:
&gt; &gt;
&gt; &gt; ```
&gt; &gt; Unable to complete install: 'internal error: process exited while
&gt; &gt; connecting to monitor: 2019-07-19T17:06:35.954242Z qemu-system-x86_64:
&gt; &gt; -enable-kvm: unsupported machine type
&gt; &gt; Use -machine help to list supported machines'
&gt;
&gt; You don't mention what your OS is ?  Some OS vendors patch QEMU
&gt; to have different machine types than upstream QEMU provides, and
&gt; I guess that's what you've hit.
&gt;
&gt; If you look in your libvirt XML 'virsh dumpxml $GUESTNAME' you'll
&gt; see a machine type listed - probably "pc-$SOMETHING" or "q35-$SOMETHING".
&gt;
&gt; If you simply delete the "-$SOMETHING" part to leave just "pc" or
&gt; just "q35", then libvirt will expand the machine type into the
&gt; latest one available with your self-built QEMU
&gt;
&gt; Regards,
&gt; Daniel
&gt; --
&gt; |: https://berrange.com      -o-
&gt; https://www.flickr.com/photos/dberrange :|
&gt; |: https://libvirt.org         -o-
&gt; https://fstop138.berrange.com :|
&gt; |: https://entangle-photo.org    -o-
&gt; https://www.instagram.com/dberrange :|
&gt;


-- 
Probir Roy
College of William and Mary
Phone: 7577531428
Web: www.probir.info

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;&lt;div class="gmail_default" \
style="font-family:arial,helvetica,sans-serif"&gt;It is true that the machine contains \
'pc-i440fx-4.0'. I am using Ubuntu18.04 and libvirt-4.0.0&lt;/div&gt;&lt;div \
class="gmail_default" style="font-family:arial,helvetica,sans-serif"&gt;&lt;br&gt;&lt;/div&gt;&lt;div \
class="gmail_default" style="font-family:arial,helvetica,sans-serif"&gt;This is probably \
a separate issue, but while updating the machine name neither "virsh \
define" or "virsh edit" updates the name to "pc".  \
&lt;/div&gt;&lt;div class="gmail_default" \
style="font-family:arial,helvetica,sans-serif"&gt;&lt;br&gt;&lt;/div&gt;&lt;div class="gmail_default" \
style="font-family:arial,helvetica,sans-serif"&gt;I was reading the FAQ of libvirt on \
updating the configuration at :&lt;a \
href="https://wiki.libvirt.org/page/FAQ#What_is_the_.27virsh_edit.27_command_and_how_d \
o_I_use_it.3F"&gt;https://wiki.libvirt.org/page/FAQ#What_is_the_.27virsh_edit.27_command_and_how_do_I_use_it.3F&lt;/a&gt;&lt;/div&gt;&lt;div \
class="gmail_default" style="font-family:arial,helvetica,sans-serif"&gt;&lt;br&gt;&lt;/div&gt;&lt;div \
class="gmail_default" style="font-family:arial,helvetica,sans-serif"&gt;&lt;/div&gt;&lt;div \
class="gmail_default" style="font-family:arial,helvetica,sans-serif"&gt;"... A \
common problem seen when people edit the on-disk XML is a VM that simply vanishes the \
next time libvirtd is restarted after the edit. The VM disappears from libvirt \
because the XML has become invalid, after which libvirt can't do anything with \
it. "&lt;/div&gt;&lt;div class="gmail_default" \
style="font-family:arial,helvetica,sans-serif"&gt;&lt;br&gt;&lt;/div&gt;&lt;div class="gmail_default" \
style="font-family:arial,helvetica,sans-serif"&gt;Is it also true for virsh?&lt;/div&gt;&lt;div \
class="gmail_default" style="font-family:arial,helvetica,sans-serif"&gt;&lt;br&gt;&lt;/div&gt;&lt;div \
class="gmail_default" style="font-family:arial,helvetica,sans-serif"&gt;I also tried \
creating a new VM by "virsh dumpxml" and editing the xml with new \
"name" and "pc" and removed the "uuid" field and then \
"virsh define". virsh creates a new domain with UUID, but with \
machine='pc-i440fx-4.0'. Is it possible the virsh is using some configuration \
that resetting to predefined machine name?&lt;br&gt;&lt;/div&gt;&lt;div class="gmail_default" \
style="font-family:arial,helvetica,sans-serif"&gt;&lt;br&gt;&lt;/div&gt;&lt;div class="gmail_default" \
style="font-family:arial,helvetica,sans-serif"&gt;&lt;br&gt;&lt;/div&gt;&lt;div class="gmail_default" \
style="font-family:arial,helvetica,sans-serif"&gt;   &lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;div \
class="gmail_quote"&gt;&lt;div dir="ltr" class="gmail_attr"&gt;On Fri, Jul 19, 2019 at 12:36 \
PM Daniel P. Berrangé &lt;&lt;a \
href="mailto:berrange@redhat.com"&gt;berrange@redhat.com&lt;/a&gt;&gt; \
wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote class="gmail_quote" style="margin:0px 0px 0px \
0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"&gt;On Fri, Jul 19, 2019 \
at 12:16:25PM -0500, Probir Roy wrote:&lt;br&gt; &gt; Hi,&lt;br&gt;
&gt; &lt;br&gt;
&gt; I am trying to run Qemu-4.0 installed from source code.&lt;br&gt;
&gt; &lt;br&gt;
&gt; When I run virt-manager to create a VM, I get the following error:&lt;br&gt;
&gt; &lt;br&gt;
&gt; ```&lt;br&gt;
&gt; Unable to complete install: 'internal error: process exited while&lt;br&gt;
&gt; connecting to monitor: 2019-07-19T17:06:35.954242Z qemu-system-x86_64:&lt;br&gt;
&gt; -enable-kvm: unsupported machine type&lt;br&gt;
&gt; Use -machine help to list supported machines'&lt;br&gt;
&lt;br&gt;
You don't mention what your OS is ?   Some OS vendors patch QEMU&lt;br&gt;
to have different machine types than upstream QEMU provides, and&lt;br&gt;
I guess that's what you've hit.&lt;br&gt;
&lt;br&gt;
If you look in your libvirt XML 'virsh dumpxml $GUESTNAME' you'll&lt;br&gt;
see a machine type listed - probably "pc-$SOMETHING" or \
"q35-$SOMETHING".&lt;br&gt; &lt;br&gt;
If you simply delete the "-$SOMETHING" part to leave just "pc" \
or&lt;br&gt; just "q35", then libvirt will expand the machine type into the&lt;br&gt;
latest one available with your self-built QEMU&lt;br&gt;
&lt;br&gt;
Regards,&lt;br&gt;
Daniel&lt;br&gt;
-- &lt;br&gt;
&gt; &gt; &lt;a href="https://berrange.com" rel="noreferrer" \
&gt; &gt; target="_blank"&gt;https://berrange.com&lt;/a&gt;         -o-      &lt;a \
&gt; &gt; href="https://www.flickr.com/photos/dberrange" rel="noreferrer" \
&gt; &gt; target="_blank"&gt;https://www.flickr.com/photos/dberrange&lt;/a&gt; :|&lt;br&gt;
&gt; &gt; &lt;a href="https://libvirt.org" rel="noreferrer" \
&gt; &gt; target="_blank"&gt;https://libvirt.org&lt;/a&gt;              -o-                  &lt;a \
&gt; &gt; href="https://fstop138.berrange.com" rel="noreferrer" \
&gt; &gt; target="_blank"&gt;https://fstop138.berrange.com&lt;/a&gt; :|&lt;br&gt;
&gt; &gt; &lt;a href="https://entangle-photo.org" rel="noreferrer" \
&gt; &gt; target="_blank"&gt;https://entangle-photo.org&lt;/a&gt;      -o-      &lt;a \
&gt; &gt; href="https://www.instagram.com/dberrange" rel="noreferrer" \
&gt; &gt; target="_blank"&gt;https://www.instagram.com/dberrange&lt;/a&gt; :|&lt;br&gt;
&lt;/blockquote&gt;&lt;/div&gt;&lt;br clear="all"&gt;&lt;br&gt;-- &lt;br&gt;&lt;div dir="ltr" \
class="gmail_signature"&gt;Probir Roy&lt;br&gt;College of William and Mary&lt;br&gt;Phone: \
7577531428&lt;br&gt;Web: &lt;a href="http://www.probir.info" \
target="_blank"&gt;www.probir.info&lt;/a&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190721014525</emailId><senderName>Probir Roy</senderName><senderEmail>proy@email.wm.edu</senderEmail><timestampReceived>2019-07-21 01:45:25-0400</timestampReceived><subject>Re: [libvirt-users] Installing QEMU from source causing error</subject><body>

[Attachment #2 (multipart/alternative)]


I also ran "virsh capabilities". It looks like the machine "pc-i440fx-4.0"
is available there. Does it mean anything to this case? I am guessing "4.0"
means Qemu version, which is the version I am trying to install from source.

https://gist.github.com/proywm/433de1f410c5e7d68cff5833e03fb5dc

On Sat, Jul 20, 2019 at 2:36 PM Probir Roy &lt;proy@email.wm.edu&gt; wrote:

&gt; It is true that the machine contains 'pc-i440fx-4.0'. I am using
&gt; Ubuntu18.04 and libvirt-4.0.0
&gt;
&gt; This is probably a separate issue, but while updating the machine name
&gt; neither "virsh define" or "virsh edit" updates the name to "pc".
&gt;
&gt; I was reading the FAQ of libvirt on updating the configuration at :
&gt; https://wiki.libvirt.org/page/FAQ#What_is_the_.27virsh_edit.27_command_and_how_do_I_use_it.3F
&gt;
&gt; "... A common problem seen when people edit the on-disk XML is a VM that
&gt; simply vanishes the next time libvirtd is restarted after the edit. The VM
&gt; disappears from libvirt because the XML has become invalid, after which
&gt; libvirt can't do anything with it. "
&gt;
&gt; Is it also true for virsh?
&gt;
&gt; I also tried creating a new VM by "virsh dumpxml" and editing the xml with
&gt; new "name" and "pc" and removed the "uuid" field and then "virsh define".
&gt; virsh creates a new domain with UUID, but with machine='pc-i440fx-4.0'. Is
&gt; it possible the virsh is using some configuration that resetting to
&gt; predefined machine name?
&gt;
&gt;
&gt;
&gt;
&gt; On Fri, Jul 19, 2019 at 12:36 PM Daniel P. Berrangé &lt;berrange@redhat.com&gt;
&gt; wrote:
&gt;
&gt;&gt; On Fri, Jul 19, 2019 at 12:16:25PM -0500, Probir Roy wrote:
&gt;&gt; &gt; Hi,
&gt;&gt; &gt;
&gt;&gt; &gt; I am trying to run Qemu-4.0 installed from source code.
&gt;&gt; &gt;
&gt;&gt; &gt; When I run virt-manager to create a VM, I get the following error:
&gt;&gt; &gt;
&gt;&gt; &gt; ```
&gt;&gt; &gt; Unable to complete install: 'internal error: process exited while
&gt;&gt; &gt; connecting to monitor: 2019-07-19T17:06:35.954242Z qemu-system-x86_64:
&gt;&gt; &gt; -enable-kvm: unsupported machine type
&gt;&gt; &gt; Use -machine help to list supported machines'
&gt;&gt;
&gt;&gt; You don't mention what your OS is ?  Some OS vendors patch QEMU
&gt;&gt; to have different machine types than upstream QEMU provides, and
&gt;&gt; I guess that's what you've hit.
&gt;&gt;
&gt;&gt; If you look in your libvirt XML 'virsh dumpxml $GUESTNAME' you'll
&gt;&gt; see a machine type listed - probably "pc-$SOMETHING" or "q35-$SOMETHING".
&gt;&gt;
&gt;&gt; If you simply delete the "-$SOMETHING" part to leave just "pc" or
&gt;&gt; just "q35", then libvirt will expand the machine type into the
&gt;&gt; latest one available with your self-built QEMU
&gt;&gt;
&gt;&gt; Regards,
&gt;&gt; Daniel
&gt;&gt; --
&gt;&gt; |: https://berrange.com      -o-
&gt;&gt; https://www.flickr.com/photos/dberrange :|
&gt;&gt; |: https://libvirt.org         -o-
&gt;&gt; https://fstop138.berrange.com :|
&gt;&gt; |: https://entangle-photo.org    -o-
&gt;&gt; https://www.instagram.com/dberrange :|
&gt;&gt;
&gt;
&gt;
&gt; --
&gt; Probir Roy
&gt; College of William and Mary
&gt; Phone: 7577531428
&gt; Web: www.probir.info
&gt;


-- 
Probir Roy
College of William and Mary
Phone: 7577531428
Web: www.probir.info

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;&lt;div class="gmail_default" \
style="font-family:arial,helvetica,sans-serif"&gt;I also ran "virsh \
capabilities". It looks like the machine "pc-i440fx-4.0" is available \
there. Does it mean anything to this case? I am guessing "4.0" means Qemu \
version, which is the version I am trying to install from source.&lt;br&gt;&lt;/div&gt;&lt;div \
class="gmail_default" style="font-family:arial,helvetica,sans-serif"&gt;&lt;br&gt;&lt;/div&gt;&lt;div \
class="gmail_default" style="font-family:arial,helvetica,sans-serif"&gt;&lt;a \
href="https://gist.github.com/proywm/433de1f410c5e7d68cff5833e03fb5dc"&gt;https://gist.github.com/proywm/433de1f410c5e7d68cff5833e03fb5dc&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;div \
class="gmail_quote"&gt;&lt;div dir="ltr" class="gmail_attr"&gt;On Sat, Jul 20, 2019 at 2:36 PM \
Probir Roy &lt;&lt;a href="mailto:proy@email.wm.edu"&gt;proy@email.wm.edu&lt;/a&gt;&gt; \
wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote class="gmail_quote" style="margin:0px 0px 0px \
0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"&gt;&lt;div dir="ltr"&gt;&lt;div \
class="gmail_default" style="font-family:arial,helvetica,sans-serif"&gt;It is true that \
the machine contains 'pc-i440fx-4.0'. I am using Ubuntu18.04 and \
libvirt-4.0.0&lt;/div&gt;&lt;div class="gmail_default" \
style="font-family:arial,helvetica,sans-serif"&gt;&lt;br&gt;&lt;/div&gt;&lt;div class="gmail_default" \
style="font-family:arial,helvetica,sans-serif"&gt;This is probably a separate issue, but \
while updating the machine name neither "virsh define" or "virsh \
edit" updates the name to "pc".  &lt;/div&gt;&lt;div class="gmail_default" \
style="font-family:arial,helvetica,sans-serif"&gt;&lt;br&gt;&lt;/div&gt;&lt;div class="gmail_default" \
style="font-family:arial,helvetica,sans-serif"&gt;I was reading the FAQ of libvirt on \
updating the configuration at :&lt;a \
href="https://wiki.libvirt.org/page/FAQ#What_is_the_.27virsh_edit.27_command_and_how_do_I_use_it.3F" \
target="_blank"&gt;https://wiki.libvirt.org/page/FAQ#What_is_the_.27virsh_edit.27_command_and_how_do_I_use_it.3F&lt;/a&gt;&lt;/div&gt;&lt;div \
class="gmail_default" style="font-family:arial,helvetica,sans-serif"&gt;&lt;br&gt;&lt;/div&gt;&lt;div \
class="gmail_default" style="font-family:arial,helvetica,sans-serif"&gt;&lt;/div&gt;&lt;div \
class="gmail_default" style="font-family:arial,helvetica,sans-serif"&gt;"... A \
common problem seen when people edit the on-disk XML is a VM that simply vanishes the \
next time libvirtd is restarted after the edit. The VM disappears from libvirt \
because the XML has become invalid, after which libvirt can't do anything with \
it. "&lt;/div&gt;&lt;div class="gmail_default" \
style="font-family:arial,helvetica,sans-serif"&gt;&lt;br&gt;&lt;/div&gt;&lt;div class="gmail_default" \
style="font-family:arial,helvetica,sans-serif"&gt;Is it also true for virsh?&lt;/div&gt;&lt;div \
class="gmail_default" style="font-family:arial,helvetica,sans-serif"&gt;&lt;br&gt;&lt;/div&gt;&lt;div \
class="gmail_default" style="font-family:arial,helvetica,sans-serif"&gt;I also tried \
creating a new VM by "virsh dumpxml" and editing the xml with new \
"name" and "pc" and removed the "uuid" field and then \
"virsh define". virsh creates a new domain with UUID, but with \
machine='pc-i440fx-4.0'. Is it possible the virsh is using some configuration \
that resetting to predefined machine name?&lt;br&gt;&lt;/div&gt;&lt;div class="gmail_default" \
style="font-family:arial,helvetica,sans-serif"&gt;&lt;br&gt;&lt;/div&gt;&lt;div class="gmail_default" \
style="font-family:arial,helvetica,sans-serif"&gt;&lt;br&gt;&lt;/div&gt;&lt;div class="gmail_default" \
style="font-family:arial,helvetica,sans-serif"&gt;   &lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;div \
class="gmail_quote"&gt;&lt;div dir="ltr" class="gmail_attr"&gt;On Fri, Jul 19, 2019 at 12:36 \
PM Daniel P. Berrangé &lt;&lt;a href="mailto:berrange@redhat.com" \
target="_blank"&gt;berrange@redhat.com&lt;/a&gt;&gt; wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote \
class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid \
rgb(204,204,204);padding-left:1ex"&gt;On Fri, Jul 19, 2019 at 12:16:25PM -0500, Probir \
Roy wrote:&lt;br&gt; &gt; Hi,&lt;br&gt;
&gt; &lt;br&gt;
&gt; I am trying to run Qemu-4.0 installed from source code.&lt;br&gt;
&gt; &lt;br&gt;
&gt; When I run virt-manager to create a VM, I get the following error:&lt;br&gt;
&gt; &lt;br&gt;
&gt; ```&lt;br&gt;
&gt; Unable to complete install: 'internal error: process exited while&lt;br&gt;
&gt; connecting to monitor: 2019-07-19T17:06:35.954242Z qemu-system-x86_64:&lt;br&gt;
&gt; -enable-kvm: unsupported machine type&lt;br&gt;
&gt; Use -machine help to list supported machines'&lt;br&gt;
&lt;br&gt;
You don't mention what your OS is ?   Some OS vendors patch QEMU&lt;br&gt;
to have different machine types than upstream QEMU provides, and&lt;br&gt;
I guess that's what you've hit.&lt;br&gt;
&lt;br&gt;
If you look in your libvirt XML 'virsh dumpxml $GUESTNAME' you'll&lt;br&gt;
see a machine type listed - probably "pc-$SOMETHING" or \
"q35-$SOMETHING".&lt;br&gt; &lt;br&gt;
If you simply delete the "-$SOMETHING" part to leave just "pc" \
or&lt;br&gt; just "q35", then libvirt will expand the machine type into the&lt;br&gt;
latest one available with your self-built QEMU&lt;br&gt;
&lt;br&gt;
Regards,&lt;br&gt;
Daniel&lt;br&gt;
-- &lt;br&gt;
&gt; &gt; &lt;a href="https://berrange.com" rel="noreferrer" \
&gt; &gt; target="_blank"&gt;https://berrange.com&lt;/a&gt;         -o-      &lt;a \
&gt; &gt; href="https://www.flickr.com/photos/dberrange" rel="noreferrer" \
&gt; &gt; target="_blank"&gt;https://www.flickr.com/photos/dberrange&lt;/a&gt; :|&lt;br&gt;
&gt; &gt; &lt;a href="https://libvirt.org" rel="noreferrer" \
&gt; &gt; target="_blank"&gt;https://libvirt.org&lt;/a&gt;              -o-                  &lt;a \
&gt; &gt; href="https://fstop138.berrange.com" rel="noreferrer" \
&gt; &gt; target="_blank"&gt;https://fstop138.berrange.com&lt;/a&gt; :|&lt;br&gt;
&gt; &gt; &lt;a href="https://entangle-photo.org" rel="noreferrer" \
&gt; &gt; target="_blank"&gt;https://entangle-photo.org&lt;/a&gt;      -o-      &lt;a \
&gt; &gt; href="https://www.instagram.com/dberrange" rel="noreferrer" \
&gt; &gt; target="_blank"&gt;https://www.instagram.com/dberrange&lt;/a&gt; :|&lt;br&gt;
&lt;/blockquote&gt;&lt;/div&gt;&lt;br clear="all"&gt;&lt;br&gt;-- &lt;br&gt;&lt;div dir="ltr" \
class="gmail-m_-4501197972431479314gmail_signature"&gt;Probir Roy&lt;br&gt;College of William \
and Mary&lt;br&gt;Phone: 7577531428&lt;br&gt;Web: &lt;a href="http://www.probir.info" \
target="_blank"&gt;www.probir.info&lt;/a&gt;&lt;/div&gt; &lt;/blockquote&gt;&lt;/div&gt;&lt;br clear="all"&gt;&lt;br&gt;-- \
&lt;br&gt;&lt;div dir="ltr" class="gmail_signature"&gt;Probir Roy&lt;br&gt;College of William and \
Mary&lt;br&gt;Phone: 7577531428&lt;br&gt;Web: &lt;a href="http://www.probir.info" \
target="_blank"&gt;www.probir.info&lt;/a&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190718090434</emailId><senderName>Daniel =?utf-8?B?UC4gQmVycmFuZ8Op?=</senderName><senderEmail>berrange@redhat.com</senderEmail><timestampReceived>2019-07-18 09:04:34-0400</timestampReceived><subject>Re: [libvirt-users] domain xml questions</subject><body>

On Thu, Jul 18, 2019 at 10:39:09AM +0300, Vasiliy Tolstov wrote:
&gt; Hi!
&gt; If i want to use bridged network or openvswitch, does guestfwd only
&gt; works with slirp network? Or how it work in case of using
&gt; bridge/openvswitch?

It is only supported with type=user (aka slirp) networking.

&gt; &lt;devices&gt;
&gt;   &lt;channel type='unix'&gt;
&gt;     &lt;source mode='bind' path='/tmp/guestfwd'/&gt;
&gt;     &lt;target type='guestfwd' address='10.0.2.1' port='4600'/&gt;
&gt;   &lt;/channel&gt;
&gt; &lt;/devices&gt;
&gt; 
&gt; If this cant't work with provided network types, how can i create
&gt; inside guest serial console on 10 tty that binded to listening unix
&gt; domain socket on host system?

For general purpose data channels we'd recommend using virtio-console

https://libvirt.org/formatdomain.html#elementCharChannel

eg this example shows how QEMU guest agent is configured. Just change
the target name to something for your app

  &lt;channel type='unix'&gt;
    &lt;source mode='bind' path='/var/lib/libvirt/qemu/f16x86_64.agent'/&gt;
    &lt;target type='virtio' name='org.qemu.guest_agent.0' state='connected'/&gt;
  &lt;/channel&gt;

Regards,
Daniel
-- 
|: https://berrange.com      -o-    https://www.flickr.com/photos/dberrange :|
|: https://libvirt.org         -o-            https://fstop138.berrange.com :|
|: https://entangle-photo.org    -o-    https://www.instagram.com/dberrange :|

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190718082557</emailId><senderName>Peter Krempa</senderName><senderEmail>pkrempa@redhat.com</senderEmail><timestampReceived>2019-07-18 08:25:57-0400</timestampReceived><subject>Re: [libvirt-users] Preloading shared library with libVirt</subject><body>

[Attachment #2 (multipart/signed)]


On Wed, Jul 17, 2019 at 13:33:08 -0500, Probir Roy wrote:
&gt; Hi,
&gt; 
&gt; I am trying to preload two shared libraries while running Qemu using
&gt; libvirt. To preload the shared libraries I have added an environment
&gt; variable in the $domain.xml file with the following command:
&gt; 
&gt; ```
&gt; virt-xml generic --edit --confirm --qemu-commandline
&gt; 'env=LD_PRELOAD=/home/probir/Downloads/kpv_temp/temp/kvmTest/build_kvm/libperform.so \
&gt; :/home/probir/Downloads/kpv_temp/temp/kvmTest/dependencies/libmonitor/installDir/lib/libmonitor.so'
&gt;  
&gt; ```
&gt; However, while running the domain, I get the following message of failure
&gt; to preload the shared files in the log.
&gt; 
&gt; ```
&gt; 2019-07-17 17:35:22.939+0000: starting up libvirt version: 1.3.1, package:
&gt; 1ubuntu10.27 (Marc Deslauriers &lt;marc.deslauriers@ubuntu.com&gt; Tue, 02 Jul
&gt; 2019 09:22:37 -0400), qemu version: 2.5.0 (Debian 1:2.5+dfsg-5ubuntu10.39),
&gt; hostname: probir-XPS-13-9343
&gt; LC_ALL=C PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
&gt; QEMU_AUDIO_DRV=spice
&gt; LD_PRELOAD=/home/probir/Downloads/kpv_temp/temp/kvmTest/build_kvm/libperform.so:/hom \
&gt; e/probir/Downloads/kpv_temp/temp/kvmTest/dependencies/libmonitor/installDir/lib/libmonitor.so
&gt;                 
&gt; /usr/bin/kvm-spice -name generic -S -machine

[...]

&gt; ERROR: ld.so: object
&gt; '/home/probir/Downloads/kpv_temp/temp/kvmTest/build_kvm/libperform.so' from
&gt; LD_PRELOAD cannot be preloaded (cannot open shared object file): ignored.
&gt; ERROR: ld.so: object
&gt; '/home/probir/Downloads/kpv_temp/temp/kvmTest/dependencies/libmonitor/installDir/lib/libmonitor.so'
&gt;  from LD_PRELOAD cannot be preloaded (cannot open shared object file):
&gt; ignored.

My rough guess would be that the process we forked off for qemu has
security confinment applied (apparmor and unix permissions changed in
case of ubuntu) and ld.so is thus unable to open the libraries you want
it to preload.

For any other resource libvirt configures the confinment such as that
the process has access, but in this case this is out of our scope and
you have to make sure that the libs are accessible yourself.


["signature.asc" (application/pgp-signature)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190705162641</emailId><senderName>Nikolai Zhubr</senderName><senderEmail>n-a-zhubr@yandex.ru</senderEmail><timestampReceived>2019-07-05 16:26:41-0400</timestampReceived><subject>Re: [libvirt-users] UDP broadcasts vs. nat Masquerading issue</subject><body>

Hi Daniel and Laine,

[...]
&gt;&gt; -A POSTROUTING -o br0 -j MASQUERADE
&gt;&gt; -A POSTROUTING -o enp0s25 -j MASQUERADE
&gt;&gt; -A POSTROUTING -o virbr2_nic -j MASQUERADE
&gt;&gt; -A POSTROUTING -o vnet0 -j MASQUERADE
&gt;
&gt; *None* of those rules were added by libvirt (unless your build of
[...]
&gt; You can verify my "counter-claim" by running "virsh net-destroy" for all
&gt; of your libvirt networks, and seeing that the offending rules haven't
&gt; been removed.
&gt;
&gt; In short, you need to look elsewhere for the culprit.

Yes, found it. You were both right, essentially.
The offending rules were added by a firewall in response to new 
interfaces created by libvirt dynamically, due to some dubious relict 
settings left in the firewall. (Silly me.)

So this it not an issue of libvirt indeed!

Tons of thanks for the quick and precise hit!


Regards,
Nikolai

&gt;&gt;
&gt;&gt; Here, virbr2_nic and vnet0 are used by libvirt for arranging network
&gt;&gt; configurations for VMs, ok. However, br0 is a main interface of this
&gt;&gt; host with primary ip address, with enp0s25 being a physical nic of
&gt;&gt; this host, and it is used for all sorts of regular (unrelated to
&gt;&gt; virtualization) communications. Also, br0 is used for attaching
&gt;&gt; bridged (as opposed to NATed) VMs managed by libvirt.
&gt;&gt;
&gt;&gt; Clearly, libvirt somehow chooses to set up masquerading for literally
&gt;&gt; all existing network interfaces here (except lo),
&gt;
&gt; It's clear that the rules are there. It's not clear that they were added
&gt; by libvirt.
&gt;
&gt;&gt; but I can't see a real reason for the first two rules in the list
&gt;&gt; above. Furthermore, they corrupt UDP broadcats coming from outside and
&gt;&gt; reaching this host (through enp0s25/br0) such that source address gets
&gt;&gt; replaced by this hosts primary address (as per masquerading). I've
&gt;&gt; verified this by arranging a hand-crafted UDP listener and printing
&gt;&gt; the respective source addresses as seen by normal userspace.
&gt;&gt;
&gt;&gt; Now I've discovered that I can "eliminate" the problem by either:
&gt;&gt;
&gt;&gt; 1. Removing "-A POSTROUTING -o br0 -j MASQUERADE" (manually)
&gt;&gt; 2. Inserting "-A POSTROUTING -s 192.168.0.0/24 -d 192.168.0.255/32 -j
&gt;&gt; ACCEPT"
&gt;&gt; (Of course correcting rules by hand is not a solution, just a test)
&gt;&gt;
&gt;&gt; So question is, how the correct rules should ideally look like? And,
&gt;&gt; is this issue known/fixed in most current libvirt?
&gt;
&gt; Except for putting the libvirt-added rules in their own private chains
&gt; (appearing in libvirt 5.1.0, released on Feb 1, 2019), the iptables
&gt; rules added by libvirt to support its virtual networks didn't materially
&gt; change in &gt; 10 years. Your email is the first time I've ever seen such
&gt; rules attributed to libvirt so, as I said above, I think you need to
&gt; take a deeper dive into your host system's config.
&gt;
&gt;
&gt; Good luck!
&gt;

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190704171823</emailId><senderName>Peter Krempa</senderName><senderEmail>pkrempa@redhat.com</senderEmail><timestampReceived>2019-07-04 17:18:23-0400</timestampReceived><subject>Re: [libvirt-users] libvirt-python Create External Snapshot</subject><body>

[Attachment #2 (multipart/signed)]


On Wed, Jul 03, 2019 at 15:10:42 -0400, Roger Jin wrote:
&gt; Hi Libvirt,
&gt; Does libvirt-python currently support the creation of external snapshots?
&gt; I ran
&gt; 
&gt; domain.snapshotCreateXML(xml)
&gt; 
&gt; where xml is
&gt; 
&gt; &lt;domainsnapshot&gt;
&gt;   &lt;name&gt;snap1&lt;/name&gt;
&gt;   &lt;description&gt;Snapshot of OS install and updates&lt;/description&gt;
&gt;   &lt;disks&gt;
&gt;     &lt;disk name='vda'&gt;
&gt;             &lt;source file='/home/potato/libvirt/backups/test-snap1.qcow2'/&gt;
&gt;     &lt;/disk&gt;
&gt;   &lt;/disks&gt;
&gt; &lt;/domainsnapshot&gt;
&gt; 
&gt; And got the following error:
&gt;     if ret is None:raise libvirtError('virDomainSnapshotCreateXML()
&gt; failed', dom=self)
&gt; libvirt.libvirtError: unsupported configuration: disk 'vda' must use
&gt; snapshot mode 'internal'

You must use the libvirt.VIR_DOMAIN_SNAPSHOT_CREATE_DISK_ONLY flag if
you don't want to include the memory state of the VM or include the
&lt;memory&gt; element in the above XML.

["signature.asc" (application/pgp-signature)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190705162722</emailId><senderName>Daniel =?utf-8?B?UC4gQmVycmFuZ8Op?=</senderName><senderEmail>berrange@redhat.com</senderEmail><timestampReceived>2019-07-05 16:27:22-0400</timestampReceived><subject>Re: [libvirt-users] UDP broadcasts vs. nat Masquerading issue</subject><body>

On Fri, Jul 05, 2019 at 07:26:41PM +0300, Nikolai Zhubr wrote:
&gt; Hi Daniel and Laine,
&gt; 
&gt; [...]
&gt; &gt; &gt; -A POSTROUTING -o br0 -j MASQUERADE
&gt; &gt; &gt; -A POSTROUTING -o enp0s25 -j MASQUERADE
&gt; &gt; &gt; -A POSTROUTING -o virbr2_nic -j MASQUERADE
&gt; &gt; &gt; -A POSTROUTING -o vnet0 -j MASQUERADE
&gt; &gt; 
&gt; &gt; *None* of those rules were added by libvirt (unless your build of
&gt; [...]
&gt; &gt; You can verify my "counter-claim" by running "virsh net-destroy" for all
&gt; &gt; of your libvirt networks, and seeing that the offending rules haven't
&gt; &gt; been removed.
&gt; &gt; 
&gt; &gt; In short, you need to look elsewhere for the culprit.
&gt; 
&gt; Yes, found it. You were both right, essentially.
&gt; The offending rules were added by a firewall in response to new interfaces
&gt; created by libvirt dynamically, due to some dubious relict settings left in
&gt; the firewall. (Silly me.)
&gt; 
&gt; So this it not an issue of libvirt indeed!
&gt; 
&gt; Tons of thanks for the quick and precise hit!

No worries, thanks for confirming the root cause you found too.

Regards,
Daniel
-- 
|: https://berrange.com      -o-    https://www.flickr.com/photos/dberrange :|
|: https://libvirt.org         -o-            https://fstop138.berrange.com :|
|: https://entangle-photo.org    -o-    https://www.instagram.com/dberrange :|

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190711192711</emailId><senderName>Julian Sternberg</senderName><senderEmail>j.sternberg@gmx.net</senderEmail><timestampReceived>2019-07-11 19:27:11-0400</timestampReceived><subject>Re: [libvirt-users] Strange issues with libvirt v5.5.0</subject><body>

[Attachment #2 (multipart/alternative)]


Thanks for the fast reply guys. 

I raised a Bug report for the other issue: \
https://bugzilla.redhat.com/show_bug.cgi?id=1729292 \
&lt;https://bugzilla.redhat.com/show_bug.cgi?id=1729292&gt;


&gt; Am 11.07.2019 um 18:08 schrieb Ján Tomko &lt;jtomko@redhat.com&gt;:
&gt; 
&gt; On Thu, Jul 11, 2019 at 05:19:03PM +0200, Peter Krempa wrote:
&gt; &gt; On Thu, Jul 11, 2019 at 16:46:29 +0200, Julian Sternberg wrote:
&gt; 
&gt; [...]
&gt; 
&gt; &gt; &gt; Seconds strange behavior is as follow:
&gt; &gt; &gt; virsh vol-create-as vm_volumes test.img --capacity 1G --format raw
&gt; &gt; &gt; error: Failed to create vol test.img error: unsupported configuration: only RAW \
&gt; &gt; &gt; volumes are supported by this storage pool
&gt; &gt; 
&gt; &gt; So this is really weird. The error message is produced if the target
&gt; &gt; format is not 'raw' but the above command clearly supplies it.
&gt; &gt; 
&gt; &gt; I'd suggest you collect debug logs while trying both and attach them
&gt; &gt; here. Unfortunately I don't see what could be wrong here.
&gt; 
&gt; This is a known bug waiting to be fixed:
&gt; https://bugzilla.redhat.com/show_bug.cgi?id=1724065
&gt; 
&gt; Jano


[Attachment #5 (unknown)]

&lt;html&gt;&lt;head&gt;&lt;meta http-equiv="Content-Type" content="text/html; \
charset=utf-8"&gt;&lt;/head&gt;&lt;body style="word-wrap: break-word; -webkit-nbsp-mode: space; \
line-break: after-white-space;" class=""&gt;Thanks for the fast reply guys. &lt;div \
class=""&gt;&lt;br class=""&gt;&lt;div class=""&gt;I raised a Bug report for the other \
issue: &lt;a href="https://bugzilla.redhat.com/show_bug.cgi?id=1729292" \
class=""&gt;https://bugzilla.redhat.com/show_bug.cgi?id=1729292&lt;/a&gt;&lt;div class=""&gt;&lt;br \
class=""&gt;&lt;div class=""&gt;&lt;div&gt;&lt;br class=""&gt;&lt;blockquote type="cite" class=""&gt;&lt;div \
class=""&gt;Am 11.07.2019 um 18:08 schrieb Ján Tomko &lt;&lt;a \
href="mailto:jtomko@redhat.com" class=""&gt;jtomko@redhat.com&lt;/a&gt;&gt;:&lt;/div&gt;&lt;br \
class="Apple-interchange-newline"&gt;&lt;div class=""&gt;&lt;div class=""&gt;On Thu, Jul 11, 2019 at \
05:19:03PM +0200, Peter Krempa wrote:&lt;br class=""&gt;&lt;blockquote type="cite" class=""&gt;On \
Thu, Jul 11, 2019 at 16:46:29 +0200, Julian Sternberg wrote:&lt;br \
class=""&gt;&lt;/blockquote&gt;&lt;br class=""&gt;[...]&lt;br class=""&gt;&lt;br class=""&gt;&lt;blockquote \
type="cite" class=""&gt;&lt;blockquote type="cite" class=""&gt;Seconds strange behavior is as \
follow:&lt;br class=""&gt;virsh vol-create-as vm_volumes test.img --capacity 1G --format \
raw&lt;br class=""&gt;error: Failed to create vol test.img error: unsupported \
configuration: only RAW volumes are supported by this storage pool&lt;br \
class=""&gt;&lt;/blockquote&gt;&lt;br class=""&gt;So this is really weird. The error message is \
produced if the target&lt;br class=""&gt;format is not 'raw' but the above command clearly \
supplies it.&lt;br class=""&gt;&lt;br class=""&gt;I'd suggest you collect debug logs while trying \
both and attach them&lt;br class=""&gt;here. Unfortunately I don't see what could be wrong \
here.&lt;br class=""&gt;&lt;/blockquote&gt;&lt;br class=""&gt;This is a known bug waiting to be \
fixed:&lt;br class=""&gt;&lt;a href="https://bugzilla.redhat.com/show_bug.cgi?id=1724065" \
class=""&gt;https://bugzilla.redhat.com/show_bug.cgi?id=1724065&lt;/a&gt;&lt;br class=""&gt;&lt;br \
class=""&gt;Jano&lt;br class=""&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br \
class=""&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190715151611</emailId><senderName>Michal Privoznik</senderName><senderEmail>mprivozn@redhat.com</senderEmail><timestampReceived>2019-07-15 15:16:11-0400</timestampReceived><subject>Re: [libvirt-users] Question regarding using multiple physical functions inside a network pool.</subject><body>

On 7/12/19 3:44 PM, Mohamed, Faris wrote:
&gt; Hello,
&gt; 
&gt; I was planning on adding multiple physical functions using the built in SR-IOV \
&gt; features offered by libvirt to a create a bigger pool of virtual functions using \
&gt; the 
&gt; &lt;forward mode='hostdev' managed='yes'&gt; heading
&gt; 
&gt; (I want to be able to use more virtual machines then there are virtual functions \
&gt; available on an ethernet port). 
&gt; As soon as I try to define multiple physical functions in a pool, I get this error:
&gt; 
&gt; 
&gt; error: Failed to define network from biggernetwork.xml
&gt; error: XML error: Only one &lt;pf&gt; element is allowed in &lt;forward&gt; of network bigger \
&gt; network 
&gt; 
&gt; when using this command:
&gt; 
&gt; sudo virsh net-define biggernetwork.xml
&gt; 
&gt; 
&gt; on the following XML document:
&gt; 
&gt; &lt;network&gt;
&gt; &lt;name&gt;bigger network&lt;/name&gt;
&gt; &lt;forward mode='hostdev' managed='yes'&gt;
&gt; &lt;pf dev='eth5'/&gt;
&gt; &lt;pf dev='eth7'/&gt;
&gt; &lt;/forward&gt;
&gt; &lt;/network&gt;

You need to define only the PF and libvirt will handle the rest:

https://wiki.libvirt.org/page/Networking#Assignment_with_.3Cinterface_type.3D.27hostdev.27.3E_.28SRIOV_devices_only.29


Michal

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20190716153820</emailId><senderName>Marcus Furlong</senderName><senderEmail>furlongm@gmail.com</senderEmail><timestampReceived>2019-07-16 15:38:20-0400</timestampReceived><subject>[libvirt-users] libvirtd failing on MacOS in setgroups</subject><body>

Hi,

I get the following error when running libvirtd on MacOS as root:

$ sudo libvirtd
2019-07-11 00:12:33.379+0000: 123145573953536: info : libvirt version: 5.5.0
2019-07-11 00:12:33.379+0000: 123145573953536: warning :
virProcessGetStartTime:1070 : Process start time of pid 49746 not
available on this platform
2019-07-11 00:12:33.379+0000: 123145573953536: error :
virSysinfoReadDMI:1172 : internal error: Failed to find path for
dmidecode binary
2019-07-11 00:12:33.380+0000: 123145573953536: error :
virFileFindHugeTLBFS:3734 : this function is not supported by the
connection driver: virFileFindHugeTLBFS
2019-07-11 00:12:33.382+0000: 123145573953536: warning :
virQEMUCapsInit:919 : Failed to get host CPU cache info
2019-07-11 00:12:33.401+0000: 123145573953536: error :
virHostCPUGetTscInfo:1405 : Probing TSC is not supported on this
platform: Function not implemented
2019-07-11 00:12:33.401+0000: 123145573953536: error : virExec:521 :
Cannot find 'pm-is-supported' in path: No such file or directory
2019-07-11 00:12:33.401+0000: 123145573953536: warning :
virQEMUCapsInit:926 : Failed to get host power management capabilities
2019-07-11 00:12:33.401+0000: 123145573953536: error :
virNumaGetPages:988 : Operation not supported: page info is not
supported on this platform
2019-07-11 00:12:33.401+0000: 123145573953536: warning :
virQEMUCapsInit:933 : Failed to get pages info
2019-07-11 00:12:33.407+0000: 123145573953536: error :
qemuProcessQMPLaunch:8501 : internal error: Failed to start QEMU
binary /usr/local/bin/qemu-system-alpha for probing: libvirt:  error :
cannot set supplemental groups: Invalid argument
2019-07-11 00:12:33.407+0000: 123145573953536: warning :
virQEMUCapsLogProbeFailure:4578 : Failed to probe capabilities for
/usr/local/bin/qemu-system-alpha: internal error: Failed to start QEMU
binary /usr/local/bin/qemu-system-alpha for probing: libvirt:  error :
cannot set supplemental groups: Invalid argument
2019-07-11 00:12:33.413+0000: 123145573953536: error :
qemuProcessQMPLaunch:8501 : internal error: Failed to start QEMU
binary /usr/local/bin/qemu-system-arm for probing: libvirt:  error :
cannot set supplemental groups: Invalid argument
2019-07-11 00:12:33.413+0000: 123145573953536: warning :
virQEMUCapsLogProbeFailure:4578 : Failed to probe capabilities for
/usr/local/bin/qemu-system-arm: internal error: Failed to start QEMU
binary /usr/local/bin/qemu-system-arm for probing: libvirt:  error :
cannot set supplemental groups: Invalid argument
2019-07-11 00:12:33.419+0000: 123145573953536: error :
qemuProcessQMPLaunch:8501 : internal error: Failed to start QEMU
binary /usr/local/bin/qemu-system-arm for probing: libvirt:  error :
cannot set supplemental groups: Invalid argument
2019-07-11 00:12:33.419+0000: 123145573953536: warning :
virQEMUCapsLogProbeFailure:4578 : Failed to probe capabilities for
/usr/local/bin/qemu-system-arm: internal error: Failed to start QEMU
binary /usr/local/bin/qemu-system-arm for probing: libvirt:  error :
cannot set supplemental groups: Invalid argument
2019-07-11 00:12:33.424+0000: 123145573953536: error :
qemuProcessQMPLaunch:8501 : internal error: Failed to start QEMU
binary /usr/local/bin/qemu-system-aarch64 for probing: libvirt:  error
: cannot set supplemental groups: Invalid argument
2019-07-11 00:12:33.424+0000: 123145573953536: warning :
virQEMUCapsLogProbeFailure:4578 : Failed to probe capabilities for
/usr/local/bin/qemu-system-aarch64: internal error: Failed to start
QEMU binary /usr/local/bin/qemu-system-aarch64 for probing: libvirt:
error : cannot set supplemental groups: Invalid argument
2019-07-11 00:12:33.431+0000: 123145573953536: error :
qemuProcessQMPLaunch:8501 : internal error: Failed to start QEMU
binary /usr/local/bin/qemu-system-cris for probing: libvirt:  error :
cannot set supplemental groups: Invalid argument
2019-07-11 00:12:33.431+0000: 123145573953536: warning :
virQEMUCapsLogProbeFailure:4578 : Failed to probe capabilities for
/usr/local/bin/qemu-system-cris: internal error: Failed to start QEMU
binary /usr/local/bin/qemu-system-cris for probing: libvirt:  error :
cannot set supplemental groups: Invalid argument
2019-07-11 00:12:33.437+0000: 123145573953536: error :
qemuProcessQMPLaunch:8501 : internal error: Failed to start QEMU
binary /usr/local/bin/qemu-system-i386 for probing: libvirt:  error :
cannot set supplemental groups: Invalid argument
2019-07-11 00:12:33.437+0000: 123145573953536: warning :
virQEMUCapsLogProbeFailure:4578 : Failed to probe capabilities for
/usr/local/bin/qemu-system-i386: internal error: Failed to start QEMU
binary /usr/local/bin/qemu-system-i386 for probing: libvirt:  error :
cannot set supplemental groups: Invalid argument
2019-07-11 00:12:33.443+0000: 123145573953536: error :
qemuProcessQMPLaunch:8501 : internal error: Failed to start QEMU
binary /usr/local/bin/qemu-system-lm32 for probing: libvirt:  error :
cannot set supplemental groups: Invalid argument
2019-07-11 00:12:33.443+0000: 123145573953536: warning :
virQEMUCapsLogProbeFailure:4578 : Failed to probe capabilities for
/usr/local/bin/qemu-system-lm32: internal error: Failed to start QEMU
binary /usr/local/bin/qemu-system-lm32 for probing: libvirt:  error :
cannot set supplemental groups: Invalid argument
2019-07-11 00:12:33.449+0000: 123145573953536: error :
qemuProcessQMPLaunch:8501 : internal error: Failed to start QEMU
binary /usr/local/bin/qemu-system-m68k for probing: libvirt:  error :
cannot set supplemental groups: Invalid argument
2019-07-11 00:12:33.449+0000: 123145573953536: warning :
virQEMUCapsLogProbeFailure:4578 : Failed to probe capabilities for
/usr/local/bin/qemu-system-m68k: internal error: Failed to start QEMU
binary /usr/local/bin/qemu-system-m68k for probing: libvirt:  error :
cannot set supplemental groups: Invalid argument
2019-07-11 00:12:33.497+0000: 123145573953536: error :
qemuProcessQMPLaunch:8501 : internal error: Failed to start QEMU
binary /usr/local/bin/qemu-system-microblaze for probing: libvirt:
error : cannot set supplemental groups: Invalid argument
2019-07-11 00:12:33.497+0000: 123145573953536: warning :
virQEMUCapsLogProbeFailure:4578 : Failed to probe capabilities for
/usr/local/bin/qemu-system-microblaze: internal error: Failed to start
QEMU binary /usr/local/bin/qemu-system-microblaze for probing:
libvirt:  error : cannot set supplemental groups: Invalid argument
2019-07-11 00:12:33.503+0000: 123145573953536: error :
qemuProcessQMPLaunch:8501 : internal error: Failed to start QEMU
binary /usr/local/bin/qemu-system-microblazeel for probing: libvirt:
error : cannot set supplemental groups: Invalid argument
2019-07-11 00:12:33.503+0000: 123145573953536: warning :
virQEMUCapsLogProbeFailure:4578 : Failed to probe capabilities for
/usr/local/bin/qemu-system-microblazeel: internal error: Failed to
start QEMU binary /usr/local/bin/qemu-system-microblazeel for probing:
libvirt:  error : cannot set supplemental groups: Invalid argument
2019-07-11 00:12:33.509+0000: 123145573953536: error :
qemuProcessQMPLaunch:8501 : internal error: Failed to start QEMU
binary /usr/local/bin/qemu-system-mips for probing: libvirt:  error :
cannot set supplemental groups: Invalid argument
2019-07-11 00:12:33.509+0000: 123145573953536: warning :
virQEMUCapsLogProbeFailure:4578 : Failed to probe capabilities for
/usr/local/bin/qemu-system-mips: internal error: Failed to start QEMU
binary /usr/local/bin/qemu-system-mips for probing: libvirt:  error :
cannot set supplemental groups: Invalid argument
2019-07-11 00:12:33.515+0000: 123145573953536: error :
qemuProcessQMPLaunch:8501 : internal error: Failed to start QEMU
binary /usr/local/bin/qemu-system-mipsel for probing: libvirt:  error
: cannot set supplemental groups: Invalid argument
2019-07-11 00:12:33.515+0000: 123145573953536: warning :
virQEMUCapsLogProbeFailure:4578 : Failed to probe capabilities for
/usr/local/bin/qemu-system-mipsel: internal error: Failed to start
QEMU binary /usr/local/bin/qemu-system-mipsel for probing: libvirt:
error : cannot set supplemental groups: Invalid argument
2019-07-11 00:12:33.521+0000: 123145573953536: error :
qemuProcessQMPLaunch:8501 : internal error: Failed to start QEMU
binary /usr/local/bin/qemu-system-mips64 for probing: libvirt:  error
: cannot set supplemental groups: Invalid argument
2019-07-11 00:12:33.521+0000: 123145573953536: warning :
virQEMUCapsLogProbeFailure:4578 : Failed to probe capabilities for
/usr/local/bin/qemu-system-mips64: internal error: Failed to start
QEMU binary /usr/local/bin/qemu-system-mips64 for probing: libvirt:
error : cannot set supplemental groups: Invalid argument
2019-07-11 00:12:33.527+0000: 123145573953536: error :
qemuProcessQMPLaunch:8501 : internal error: Failed to start QEMU
binary /usr/local/bin/qemu-system-mips64el for probing: libvirt:
error : cannot set supplemental groups: Invalid argument
2019-07-11 00:12:33.527+0000: 123145573953536: warning :
virQEMUCapsLogProbeFailure:4578 : Failed to probe capabilities for
/usr/local/bin/qemu-system-mips64el: internal error: Failed to start
QEMU binary /usr/local/bin/qemu-system-mips64el for probing: libvirt:
error : cannot set supplemental groups: Invalid argument
2019-07-11 00:12:33.533+0000: 123145573953536: error :
qemuProcessQMPLaunch:8501 : internal error: Failed to start QEMU
binary /usr/local/bin/qemu-system-ppc for probing: libvirt:  error :
cannot set supplemental groups: Invalid argument
2019-07-11 00:12:33.533+0000: 123145573953536: warning :
virQEMUCapsLogProbeFailure:4578 : Failed to probe capabilities for
/usr/local/bin/qemu-system-ppc: internal error: Failed to start QEMU
binary /usr/local/bin/qemu-system-ppc for probing: libvirt:  error :
cannot set supplemental groups: Invalid argument
2019-07-11 00:12:33.571+0000: 123145573953536: error :
qemuProcessQMPLaunch:8501 : internal error: Failed to start QEMU
binary /usr/local/bin/qemu-system-ppc64 for probing: libvirt:  error :
cannot set supplemental groups: Invalid argument
2019-07-11 00:12:33.571+0000: 123145573953536: warning :
virQEMUCapsLogProbeFailure:4578 : Failed to probe capabilities for
/usr/local/bin/qemu-system-ppc64: internal error: Failed to start QEMU
binary /usr/local/bin/qemu-system-ppc64 for probing: libvirt:  error :
cannot set supplemental groups: Invalid argument
2019-07-11 00:12:33.576+0000: 123145573953536: error :
qemuProcessQMPLaunch:8501 : internal error: Failed to start QEMU
binary /usr/local/bin/qemu-system-ppc64 for probing: libvirt:  error :
cannot set supplemental groups: Invalid argument
2019-07-11 00:12:33.576+0000: 123145573953536: warning :
virQEMUCapsLogProbeFailure:4578 : Failed to probe capabilities for
/usr/local/bin/qemu-system-ppc64: internal error: Failed to start QEMU
binary /usr/local/bin/qemu-system-ppc64 for probing: libvirt:  error :
cannot set supplemental groups: Invalid argument
2019-07-11 00:12:33.582+0000: 123145573953536: error :
qemuProcessQMPLaunch:8501 : internal error: Failed to start QEMU
binary /usr/local/bin/qemu-system-riscv32 for probing: libvirt:  error
: cannot set supplemental groups: Invalid argument
2019-07-11 00:12:33.582+0000: 123145573953536: warning :
virQEMUCapsLogProbeFailure:4578 : Failed to probe capabilities for
/usr/local/bin/qemu-system-riscv32: internal error: Failed to start
QEMU binary /usr/local/bin/qemu-system-riscv32 for probing: libvirt:
error : cannot set supplemental groups: Invalid argument
2019-07-11 00:12:33.588+0000: 123145573953536: error :
qemuProcessQMPLaunch:8501 : internal error: Failed to start QEMU
binary /usr/local/bin/qemu-system-riscv64 for probing: libvirt:  error
: cannot set supplemental groups: Invalid argument
2019-07-11 00:12:33.588+0000: 123145573953536: warning :
virQEMUCapsLogProbeFailure:4578 : Failed to probe capabilities for
/usr/local/bin/qemu-system-riscv64: internal error: Failed to start
QEMU binary /usr/local/bin/qemu-system-riscv64 for probing: libvirt:
error : cannot set supplemental groups: Invalid argument
2019-07-11 00:12:33.594+0000: 123145573953536: error :
qemuProcessQMPLaunch:8501 : internal error: Failed to start QEMU
binary /usr/local/bin/qemu-system-s390x for probing: libvirt:  error :
cannot set supplemental groups: Invalid argument
2019-07-11 00:12:33.594+0000: 123145573953536: warning :
virQEMUCapsLogProbeFailure:4578 : Failed to probe capabilities for
/usr/local/bin/qemu-system-s390x: internal error: Failed to start QEMU
binary /usr/local/bin/qemu-system-s390x for probing: libvirt:  error :
cannot set supplemental groups: Invalid argument
2019-07-11 00:12:33.600+0000: 123145573953536: error :
qemuProcessQMPLaunch:8501 : internal error: Failed to start QEMU
binary /usr/local/bin/qemu-system-sh4 for probing: libvirt:  error :
cannot set supplemental groups: Invalid argument
2019-07-11 00:12:33.600+0000: 123145573953536: warning :
virQEMUCapsLogProbeFailure:4578 : Failed to probe capabilities for
/usr/local/bin/qemu-system-sh4: internal error: Failed to start QEMU
binary /usr/local/bin/qemu-system-sh4 for probing: libvirt:  error :
cannot set supplemental groups: Invalid argument
2019-07-11 00:12:33.605+0000: 123145573953536: error :
qemuProcessQMPLaunch:8501 : internal error: Failed to start QEMU
binary /usr/local/bin/qemu-system-sh4eb for probing: libvirt:  error :
cannot set supplemental groups: Invalid argument
2019-07-11 00:12:33.605+0000: 123145573953536: warning :
virQEMUCapsLogProbeFailure:4578 : Failed to probe capabilities for
/usr/local/bin/qemu-system-sh4eb: internal error: Failed to start QEMU
binary /usr/local/bin/qemu-system-sh4eb for probing: libvirt:  error :
cannot set supplemental groups: Invalid argument
2019-07-11 00:12:33.612+0000: 123145573953536: error :
qemuProcessQMPLaunch:8501 : internal error: Failed to start QEMU
binary /usr/local/bin/qemu-system-sparc for probing: libvirt:  error :
cannot set supplemental groups: Invalid argument
2019-07-11 00:12:33.612+0000: 123145573953536: warning :
virQEMUCapsLogProbeFailure:4578 : Failed to probe capabilities for
/usr/local/bin/qemu-system-sparc: internal error: Failed to start QEMU
binary /usr/local/bin/qemu-system-sparc for probing: libvirt:  error :
cannot set supplemental groups: Invalid argument
2019-07-11 00:12:33.619+0000: 123145573953536: error :
qemuProcessQMPLaunch:8501 : internal error: Failed to start QEMU
binary /usr/local/bin/qemu-system-sparc64 for probing: libvirt:  error
: cannot set supplemental groups: Invalid argument
2019-07-11 00:12:33.619+0000: 123145573953536: warning :
virQEMUCapsLogProbeFailure:4578 : Failed to probe capabilities for
/usr/local/bin/qemu-system-sparc64: internal error: Failed to start
QEMU binary /usr/local/bin/qemu-system-sparc64 for probing: libvirt:
error : cannot set supplemental groups: Invalid argument
2019-07-11 00:12:33.667+0000: 123145573953536: error :
qemuProcessQMPLaunch:8501 : internal error: Failed to start QEMU
binary /usr/local/bin/qemu-system-unicore32 for probing: libvirt:
error : cannot set supplemental groups: Invalid argument
2019-07-11 00:12:33.667+0000: 123145573953536: warning :
virQEMUCapsLogProbeFailure:4578 : Failed to probe capabilities for
/usr/local/bin/qemu-system-unicore32: internal error: Failed to start
QEMU binary /usr/local/bin/qemu-system-unicore32 for probing: libvirt:
 error : cannot set supplemental groups: Invalid argument
2019-07-11 00:12:33.673+0000: 123145573953536: error :
qemuProcessQMPLaunch:8501 : internal error: Failed to start QEMU
binary /usr/local/bin/qemu-system-x86_64 for probing: libvirt:  error
: cannot set supplemental groups: Invalid argument
2019-07-11 00:12:33.673+0000: 123145573953536: warning :
virQEMUCapsLogProbeFailure:4578 : Failed to probe capabilities for
/usr/local/bin/qemu-system-x86_64: internal error: Failed to start
QEMU binary /usr/local/bin/qemu-system-x86_64 for probing: libvirt:
error : cannot set supplemental groups: Invalid argument
2019-07-11 00:12:33.679+0000: 123145573953536: error :
qemuProcessQMPLaunch:8501 : internal error: Failed to start QEMU
binary /usr/local/bin/qemu-system-xtensa for probing: libvirt:  error
: cannot set supplemental groups: Invalid argument
2019-07-11 00:12:33.679+0000: 123145573953536: warning :
virQEMUCapsLogProbeFailure:4578 : Failed to probe capabilities for
/usr/local/bin/qemu-system-xtensa: internal error: Failed to start
QEMU binary /usr/local/bin/qemu-system-xtensa for probing: libvirt:
error : cannot set supplemental groups: Invalid argument
2019-07-11 00:12:33.685+0000: 123145573953536: error :
qemuProcessQMPLaunch:8501 : internal error: Failed to start QEMU
binary /usr/local/bin/qemu-system-xtensaeb for probing: libvirt:
error : cannot set supplemental groups: Invalid argument
2019-07-11 00:12:33.685+0000: 123145573953536: warning :
virQEMUCapsLogProbeFailure:4578 : Failed to probe capabilities for
/usr/local/bin/qemu-system-xtensaeb: internal error: Failed to start
QEMU binary /usr/local/bin/qemu-system-xtensaeb for probing: libvirt:
error : cannot set supplemental groups: Invalid argument

As a result `virsh capabilities` as root returns nothing:

$ sudo virsh capabilities | grep qemu
      &lt;baselabel type='qemu'&gt;+0:+0&lt;/baselabel&gt;

whereas running as a regular user works fine:

$ virsh capabilites | grep qemu
      &lt;domain type='qemu'/&gt;
      &lt;domain type='qemu'/&gt;
      &lt;domain type='qemu'/&gt;
      &lt;domain type='qemu'/&gt;
      &lt;domain type='qemu'/&gt;
      &lt;domain type='qemu'/&gt;
      &lt;domain type='qemu'/&gt;
      &lt;domain type='qemu'/&gt;
      &lt;domain type='qemu'/&gt;
      &lt;domain type='qemu'/&gt;
      &lt;domain type='qemu'/&gt;
      &lt;domain type='qemu'/&gt;
      &lt;domain type='qemu'/&gt;
      &lt;domain type='qemu'/&gt;
      &lt;domain type='qemu'/&gt;
      &lt;domain type='qemu'/&gt;
      &lt;domain type='qemu'/&gt;
      &lt;domain type='qemu'/&gt;
      &lt;domain type='qemu'/&gt;
      &lt;domain type='qemu'/&gt;
      &lt;domain type='qemu'/&gt;
      &lt;domain type='qemu'/&gt;
      &lt;domain type='qemu'/&gt;
      &lt;domain type='qemu'/&gt;
      &lt;domain type='qemu'/&gt;
      &lt;domain type='qemu'/&gt;
      &lt;domain type='qemu'/&gt;
      &lt;domain type='qemu'/&gt;

and by extension, running VMs as regular user works fine via
qemu:///session , but qemu:///system does not work.

It seems like setgroups is failing:

https://github.com/libvirt/libvirt/blob/v5.5.0/src/util/virutil.c#L1045-L1051

Is this the expected behaviour?

Marcus.

--
Marcus Furlong

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190717075058</emailId><senderName>Michal Privoznik</senderName><senderEmail>mprivozn@redhat.com</senderEmail><timestampReceived>2019-07-17 07:50:58-0400</timestampReceived><subject>Re: [libvirt-users] filesharing file owner problem</subject><body>

On 7/16/19 8:08 AM, Vojto Ľach wrote:
&gt; Hello,
&gt;   I'm having an issue with usage of libvirt driven qemu where I'm sharing
&gt; directory with guest machine.
&gt; virsh domain filesharing configuration:
&gt;      &lt;filesystem type='mount' accessmode='passthrough'&gt;
&gt;        &lt;driver type='path' wrpolicy='immediate'/&gt;
&gt;        &lt;source dir='/media/share'/&gt;
&gt;        &lt;target dir='data'/&gt;
&gt;        &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x07'
&gt; function='0x0'/&gt;
&gt;      &lt;/filesystem&gt;
&gt; 
&gt; /etc/libvirt/qemu.conf :
&gt; user = "root"
&gt; group = "root"
&gt; dynamic_ownership = 0
&gt; clear_emulator_capabilities = 0

So this configuration means that qemu is run under root:root. Libvirt 
does not interfere with the files a guest is creating. Libvirt does not 
get any event or anything. It's up to qemu to chown() the files.

I've just tested this with qemu from git and looks like labels are 
applied correctly. So maybe try upgrading your qemu?
&gt; 
&gt; even with this unsecure configuration I wasn't able to achieve that newly
&gt; created files/dirs in guest machine have ownership of guest machine user
&gt; but they are still created under root user id. Also strange is that group
&gt; of those files/dirs are correct.
&gt; Can somebody help me with this?
&gt; 
&gt; Thank you.
&gt; 

You're welcome :-)

Michal

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190718090152</emailId><senderName>Daniel =?utf-8?B?UC4gQmVycmFuZ8Op?=</senderName><senderEmail>berrange@redhat.com</senderEmail><timestampReceived>2019-07-18 09:01:52-0400</timestampReceived><subject>Re: [libvirt-users] Preloading shared library with libVirt</subject><body>

On Thu, Jul 18, 2019 at 10:25:57AM +0200, Peter Krempa wrote:
&gt; On Wed, Jul 17, 2019 at 13:33:08 -0500, Probir Roy wrote:
&gt; &gt; Hi,
&gt; &gt; 
&gt; &gt; I am trying to preload two shared libraries while running Qemu using
&gt; &gt; libvirt. To preload the shared libraries I have added an environment
&gt; &gt; variable in the $domain.xml file with the following command:
&gt; &gt; 
&gt; &gt; ```
&gt; &gt; virt-xml generic --edit --confirm --qemu-commandline
&gt; &gt; 'env=LD_PRELOAD=/home/probir/Downloads/kpv_temp/temp/kvmTest/build_kvm/libperform. \
&gt; &gt; so:/home/probir/Downloads/kpv_temp/temp/kvmTest/dependencies/libmonitor/installDir/lib/libmonitor.so'
&gt; &gt;  
&gt; &gt; ```
&gt; &gt; However, while running the domain, I get the following message of failure
&gt; &gt; to preload the shared files in the log.
&gt; &gt; 
&gt; &gt; ```
&gt; &gt; 2019-07-17 17:35:22.939+0000: starting up libvirt version: 1.3.1, package:
&gt; &gt; 1ubuntu10.27 (Marc Deslauriers &lt;marc.deslauriers@ubuntu.com&gt; Tue, 02 Jul
&gt; &gt; 2019 09:22:37 -0400), qemu version: 2.5.0 (Debian 1:2.5+dfsg-5ubuntu10.39),
&gt; &gt; hostname: probir-XPS-13-9343
&gt; &gt; LC_ALL=C PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
&gt; &gt; QEMU_AUDIO_DRV=spice
&gt; &gt; LD_PRELOAD=/home/probir/Downloads/kpv_temp/temp/kvmTest/build_kvm/libperform.so:/h \
&gt; &gt; ome/probir/Downloads/kpv_temp/temp/kvmTest/dependencies/libmonitor/installDir/lib/libmonitor.so
&gt; &gt;                 
&gt; &gt; /usr/bin/kvm-spice -name generic -S -machine
&gt; 
&gt; [...]
&gt; 
&gt; &gt; ERROR: ld.so: object
&gt; &gt; '/home/probir/Downloads/kpv_temp/temp/kvmTest/build_kvm/libperform.so' from
&gt; &gt; LD_PRELOAD cannot be preloaded (cannot open shared object file): ignored.
&gt; &gt; ERROR: ld.so: object
&gt; &gt; '/home/probir/Downloads/kpv_temp/temp/kvmTest/dependencies/libmonitor/installDir/lib/libmonitor.so'
&gt; &gt;  from LD_PRELOAD cannot be preloaded (cannot open shared object file):
&gt; &gt; ignored.
&gt; 
&gt; My rough guess would be that the process we forked off for qemu has
&gt; security confinment applied (apparmor and unix permissions changed in
&gt; case of ubuntu) and ld.so is thus unable to open the libraries you want
&gt; it to preload.

Yep, $HOME permissions would be the most likely explanation as $HOME
is usually locked down by default which would prevent the qemu user
from loading anything from under it.

Regards,
Daniel
-- 
&gt; &gt; https://berrange.com      -o-    https://www.flickr.com/photos/dberrange :|
&gt; &gt; https://libvirt.org         -o-            https://fstop138.berrange.com :|
&gt; &gt; https://entangle-photo.org    -o-    https://www.instagram.com/dberrange :|

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20190718161540</emailId><senderName>Vasiliy Tolstov</senderName><senderEmail>v.tolstov@selfip.ru</senderEmail><timestampReceived>2019-07-18 16:15:40-0400</timestampReceived><subject>Re: [libvirt-users] domain xml questions</subject><body>

чт, 18 июл. 2019 г. в 12:04, Daniel P. Berrangé &lt;berrange@redhat.com&gt;:
&gt;
&gt; On Thu, Jul 18, 2019 at 10:39:09AM +0300, Vasiliy Tolstov wrote:
&gt; &gt; Hi!
&gt; &gt; If i want to use bridged network or openvswitch, does guestfwd only
&gt; &gt; works with slirp network? Or how it work in case of using
&gt; &gt; bridge/openvswitch?
&gt;
&gt; It is only supported with type=user (aka slirp) networking.
&gt;
&gt; &gt; &lt;devices&gt;
&gt; &gt;   &lt;channel type='unix'&gt;
&gt; &gt;     &lt;source mode='bind' path='/tmp/guestfwd'/&gt;
&gt; &gt;     &lt;target type='guestfwd' address='10.0.2.1' port='4600'/&gt;
&gt; &gt;   &lt;/channel&gt;
&gt; &gt; &lt;/devices&gt;
&gt; &gt;
&gt; &gt; If this cant't work with provided network types, how can i create
&gt; &gt; inside guest serial console on 10 tty that binded to listening unix
&gt; &gt; domain socket on host system?
&gt;
&gt; For general purpose data channels we'd recommend using virtio-console
&gt;

Thanks, but virtio-serial as i know not supported in Freebsd, also
Serial supported in all OS and without virtio drivers
installed/loaded.

-- 
Vasiliy Tolstov,
e-mail: v.tolstov@selfip.ru

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190722084319</emailId><senderName>Andrea Bolognani</senderName><senderEmail>abologna@redhat.com</senderEmail><timestampReceived>2019-07-22 08:43:19-0400</timestampReceived><subject>Re: [libvirt-users] virsh edit has no impact on domain</subject><body>

On Sat, 2019-07-20 at 03:20 -0500, Probir Roy wrote:
&gt; Hi,
&gt; 
&gt; I am using "virsh edit" to edit a domain. After edit it says 
&gt; 
&gt; &gt;&gt; Domain ubuntu18.04 XML configuration edited.
&gt; 
&gt; However, reopening the domain with "virsh edit" shows old file.
&gt; 
&gt; The domain is also turned off.
&gt; 
&gt; $virsh list --all --persistent
&gt;  Id    Name                           State
&gt; ----------------------------------------------------
&gt;  -     ubuntu18.04                    shut off
&gt; 
&gt; 
&gt; I have also tried running "virsh define" to set new configuration.
&gt; 
&gt; 
&gt; $virsh define ubuntu18.04.xml
&gt; &gt;&gt;&gt; Domain ubuntu18.04 defined from ubuntu18.04.xml
&gt; 
&gt; However, it also did not change the file. How can I edit the domain config file?
&gt; 
&gt; OS: Ubuntu 18.04.1
&gt; virsh: 4.0.0

What exactly did you change? Can you show both the output of 'virsh
dumpxml ubuntu18.04 --inactive' and the contents of ubuntu18.04.xml?

-- 
Andrea Bolognani / Red Hat / Virtualization

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190722085346</emailId><senderName>Andrea Bolognani</senderName><senderEmail>abologna@redhat.com</senderEmail><timestampReceived>2019-07-22 08:53:46-0400</timestampReceived><subject>Re: [libvirt-users] Installing QEMU from source causing error</subject><body>

On Sat, 2019-07-20 at 20:45 -0500, Probir Roy wrote:
&gt; I also ran "virsh capabilities". It looks like the machine "pc-i440fx-4.0" is \
&gt; available there. Does it mean anything to this case? I am guessing "4.0" means Qemu \
&gt; version, which is the version I am trying to install from source. 
&gt; https://gist.github.com/proywm/433de1f410c5e7d68cff5833e03fb5dc

It's true that the pc-i440fx-4.0 machine type exists, but it's in
the /usr/bin/kvm-spice binary while...

[...]
&gt; &gt; &gt; &gt; I am trying to run Qemu-4.0 installed from source code.
&gt; &gt; &gt; &gt; 
&gt; &gt; &gt; &gt; When I run virt-manager to create a VM, I get the following error:
&gt; &gt; &gt; &gt; 
&gt; &gt; &gt; &gt; ```
&gt; &gt; &gt; &gt; Unable to complete install: 'internal error: process exited while
&gt; &gt; &gt; &gt; connecting to monitor: 2019-07-19T17:06:35.954242Z qemu-system-x86_64:
&gt; &gt; &gt; &gt; -enable-kvm: unsupported machine type
&gt; &gt; &gt; &gt; Use -machine help to list supported machines'

... from the error message it looks like you're using the
/usr/bin/qemu-system-x86_64 binary instead, which does *not* contain
that machine type.

Since the newest machine type for that binary is versioned with 3.0,
are you sure you've compiled and installed QEMU 4.0?

-- 
Andrea Bolognani / Red Hat / Virtualization

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20190723142512</emailId><senderName>Erik Skultety</senderName><senderEmail>eskultet@redhat.com</senderEmail><timestampReceived>2019-07-23 14:25:12-0400</timestampReceived><subject>Re: [libvirt-users] make install libvirt v5.5.0 failed</subject><body>

On Tue, Jul 23, 2019 at 10:31:01AM +0800, netsurfed wrote:
&gt; Hi all:
&gt; Does anyone have a similar problem?  Any Suggestions?
&gt; THX!
&gt; 
&gt; 2019-07-18 11:49:14，"netsurfed" &lt;zhuohaofan@126.com&gt; ：
&gt; 
&gt; Hi all:
&gt; Unable to install libvirt v5.5.0 correctly through the source code which clone from \
&gt;                 git. The error message is shown below.
&gt; libtool: install: (cd /home/libvirt/src; /bin/sh /home/libvirt/libtool  --silent \
&gt; --tag CC --mode=relink gcc -std=gnu99 -I/usr/include/libxml2 -fno-common -W \
&gt; -Waddress -Waggressive-loop-optimizations -Wall -Wattributes -Wbad-function-cast \
&gt; -Wbuiltin-macro-redefined -Wcast-align -Wchar-subscripts -Wclobbered -Wcomment \
&gt; -Wcomments -Wcoverage-mismatch -Wcpp -Wdeprecated-declarations -Wdiv-by-zero \
&gt; -Wdouble-promotion -Wempty-body -Wendif-labels -Wextra -Wformat-contains-nul \
&gt; -Wformat-extra-args -Wformat-security -Wformat-y2k -Wformat-zero-length \
&gt; -Wfree-nonheap-object -Wignored-qualifiers -Wimplicit \
&gt; -Wimplicit-function-declaration -Wimplicit-int -Winit-self -Winline \
&gt; -Wint-to-pointer-cast -Winvalid-memory-model -Winvalid-pch -Wlogical-op -Wmain \
&gt; -Wmaybe-uninitialized -Wmissing-braces -Wmissing-declarations \
&gt; -Wmissing-field-initializers -Wmissing-include-dirs -Wmissing-parameter-type \
&gt; -Wmissing-prototypes -Wmultichar -Wnarrowing -Wnested-externs -Wnonnull \
&gt; -Wold-style-declaration -Wold-style-definition -Woverflow -Woverride-init \
&gt; -Wpacked-bitfield-compat -Wparentheses -Wpointer-arith -Wpointer-sign \
&gt; -Wpointer-to-int-cast -Wpragmas -Wpsabi -Wreturn-local-addr -Wreturn-type \
&gt; -Wsequence-point -Wshadow -Wsizeof-pointer-memaccess -Wstrict-aliasing \
&gt; -Wstrict-prototypes -Wsuggest-attribute=const -Wsuggest-attribute=format \
&gt; -Wsuggest-attribute=noreturn -Wsuggest-attribute=pure -Wswitch -Wsync-nand \
&gt; -Wtrampolines -Wtrigraphs -Wtype-limits -Wuninitialized -Wunknown-pragmas -Wunused \
&gt; -Wunused-but-set-parameter -Wunused-but-set-variable -Wunused-function \
&gt; -Wunused-label -Wunused-local-typedefs -Wunused-parameter -Wunused-result \
&gt; -Wunused-value -Wunused-variable -Wvarargs -Wvariadic-macros \
&gt; -Wvector-operation-performance -Wvolatile-register-var -Wwrite-strings \
&gt; -Wnormalized=nfc -Wno-sign-compare -Wjump-misses-init -Wswitch-enum \
&gt; -Wno-format-nonliteral -fstack-protector-strong -fexceptions \
&gt; -fasynchronous-unwind-tables -fipa-pure-const -Wno-suggest-attribute=pure \
&gt; -Wno-suggest-attribute=const -Werror -Wframe-larger-than=4096 -g -O2 -module \
&gt; -avoid-version -Wl,-z -Wl,nodelete -export-dynamic -Wl,-z -Wl,relro -Wl,-z -Wl,now \
&gt; -Wl,--no-copy-dt-needed-entries -Wl,-z -Wl,defs -o libvirt_driver_vbox.la -rpath \
&gt; /usr/lib/libvirt/connection-driver libvirt_driver_vbox_impl.la libvirt.la \
&gt;                 ../gnulib/lib/libgnu.la -ldl )
&gt; ./.libs/libvirt_driver_vbox_impl.a(libvirt_driver_vbox_impl_la-vbox_common.o): In \
&gt;                 function `vboxAttachDrives':
&gt; /home/libvirt/src/vbox/vbox_common.c:1124: undefined reference to \
&gt;                 `virDomainDeviceFindSCSIController'
&gt; ./.libs/libvirt_driver_vbox_impl.a(libvirt_driver_vbox_impl_la-vbox_common.o): In \
&gt; function `vboxDomainSnapshotCreateXML': vbox_common.c:(.text+0x698f): undefined \
&gt; reference to `virObjectAutoUnref' vbox_common.c:(.text+0x80fa): undefined reference \
&gt;                 to `virObjectAutoUnref'
&gt; ./.libs/libvirt_driver_vbox_impl.a(libvirt_driver_vbox_impl_la-vbox_common.o): In \
&gt; function `vboxDomainSnapshotGetXMLDesc': vbox_common.c:(.text+0xc430): undefined \
&gt; reference to `virDomainSnapshotDefNew' vbox_common.c:(.text+0xc7bc): undefined \
&gt; reference to `virObjectAutoUnref' vbox_common.c:(.text+0xe100): undefined reference \
&gt;                 to `virObjectAutoUnref'
&gt; ./.libs/libvirt_driver_vbox_impl.a(libvirt_driver_vbox_impl_la-vbox_common.o): In \
&gt; function `vboxAttachNetwork.isra.17': vbox_common.c:(.text+0x10656): undefined \
&gt;                 reference to `virDomainNetModelTypeToString'
&gt; ./.libs/libvirt_driver_vbox_impl.a(libvirt_driver_vbox_impl_la-vbox_common.o): In \
&gt; function `vboxDomainGetXMLDesc': vbox_common.c:(.text+0x1574d): undefined reference \
&gt;                 to `virDomainHostdevDefNew'
&gt; collect2: error: ld returned 1 exit status
&gt; libtool: install: error: relink `libvirt_driver_vbox.la' with the above command \
&gt; before installing it make[3]: *** [install-modLTLIBRARIES] Error 1
&gt; make[3]: Leaving directory `/home/libvirt/src'
&gt; make[2]: *** [install-am] Error 2
&gt; make[2]: Leaving directory `/home/libvirt/src'
&gt; make[1]: *** [install] Error 2
&gt; make[1]: Leaving directory `/home/libvirt/src'
&gt; make: *** [install-recursive] Error 1
&gt; 
&gt; 
&gt; Here's how I do it.
&gt; [root@localhost libvirt]# uname -a
&gt; Linux localhost.localdomain 3.10.0-693.el7.x86_64 #1 SMP Tue Aug 22 21:09:27 UTC \
&gt; 2017 x86_64 x86_64 x86_64 GNU/Linux [root@localhost libvirt]# git clone \
&gt; https://libvirt.org/git/libvirt.git [root@localhost libvirt]# cd libvirt
&gt; [root@localhost libvirt]# git checkout v5.5.0
&gt; [root@localhost libvirt]# ./autogen.sh

You can pass --system to avoid calling the configure explicitly like you do
below :). In fact, ./autogen.sh calls configure, so any configure parameters
should be passed to autogen.sh directly.

&gt; [root@localhost libvirt]# ./configure --prefix=/usr --sysconfdir=/etc \
&gt; --localstatedir=/var [root@localhost libvirt]# make -j32
&gt; [root@localhost libvirt]# make install

Anyhow, I tried both on Fedora 30 and Centos 7, no issues raised. Are you sure
your git is absolutely clean when doing the installation? Without more
information I can only suggest not building the vbox driver if you don't
intend to use it (pass --with-vbox=no to configure).

Regards,
Erik

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20190726075100</emailId><senderName>Tanmoy Sinha</senderName><senderEmail>tanmoy.sinha@gmail.com</senderEmail><timestampReceived>2019-07-26 07:51:00-0400</timestampReceived><subject>[libvirt-users] Define libvirt network portgroup with native untagged.</subject><body>

[Attachment #2 (multipart/alternative)]


Hi,

I have created a libvirt network on top of a OVS bridge (named vlan-br)
which receives all VLAN tagged packets, i.e. connected to a trunk port. The
definition xml is below.

What I want to achieve in the portgroup definition 'trunk-native-1221' is
to allow 1221 as untagged/native but rest all VLAN as tagged. The following
portgroup definition works, but I don't want to enumerate all the tagged
VLANs in the portgroup definition.

I understand what libvirt does on the underlying OVS bridge, once a guest
interface (say vNetX) is attached to the portgroup is to set the vnetX with
tag=1221 and vlan_mode= native-untagged and it sets trunk =
[1222,1221,1223,1224]. Now if I go and clear the trunk setting on the OVS
bridge for that interface I am able to see both tagged and untagged (1221)
packets on the guest.

This is exactly what I want to achieve in the libvirt network definition,
i.e. have one untagged VLAN and* allow all other VLANs without having to
enumerate them in the portgroup definition, as that is hard to maintain. *


&lt;network&gt;

        &lt;name&gt;kvm-core-net&lt;/name&gt;

        &lt;bridge name = 'vlan-br'/&gt;

        &lt;forward mode = 'bridge'/&gt;

        &lt;virtualport type='openvswitch'/&gt;

        .......

        &lt;portgroup name='*trunk-native-1221*'&gt;

        &lt;vlan trunk='yes'&gt;

            &lt;tag id='1222'/&gt;

            &lt;tag id='1221' nativeMode='untagged'/&gt;

            &lt;tag id='1223'/&gt;

            &lt;tag id='1224'/&gt;

        &lt;/vlan&gt;

        &lt;/portgtroup&gt;

.....

&lt;/network&gt;


Regards
Tanmoy Sinha

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;&lt;div&gt;Hi,  &lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I have created a libvirt network \
on top of a OVS bridge (named vlan-br) which receives all VLAN tagged packets, i.e. \
connected to a trunk port. The definition xml is below.  \
&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;What I want to achieve in the portgroup definition \
'trunk-native-1221' is to allow 1221 as untagged/native but rest all VLAN as \
tagged. The following portgroup definition works, but I don't want to enumerate \
all the tagged VLANs in the portgroup definition.  &lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I \
understand what libvirt does on the underlying OVS bridge, once a guest interface \
(say vNetX) is attached to the portgroup is to set the vnetX with tag=1221 and \
vlan_mode= native-untagged and it sets trunk = [1222,1221,1223,1224]. Now if I go and \
clear the trunk setting on the OVS bridge for that interface I am able to see both \
tagged and untagged (1221) packets on the guest.  &lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;This is \
exactly what I want to achieve in the libvirt network definition, i.e. have one \
untagged VLAN and&lt;b&gt; allow all other VLANs without having to enumerate them in the \
portgroup definition, as that is hard to maintain.  \
&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;





&lt;p class="gmail-p1" style="margin:0px;font-variant-numeric:normal;font-variant-east-as \
ian:normal;font-stretch:normal;font-size:11px;line-height:normal;font-family:Menlo;color:rgb(0,0,0)"&gt;&lt;span \
class="gmail-s1" style="font-variant-ligatures:no-common-ligatures"&gt;&lt;network&gt;&lt;/span&gt;&lt;/p&gt;
 &lt;p class="gmail-p1" \
style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stre \
tch:normal;font-size:11px;line-height:normal;font-family:Menlo;color:rgb(0,0,0)"&gt;&lt;span \
class="gmail-s1" style="font-variant-ligatures:no-common-ligatures"&gt;&lt;span \
class="gmail-Apple-converted-space"&gt;            \
&lt;/span&gt;&lt;name&gt;kvm-core-net&lt;/name&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="gmail-p1" \
style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stre \
tch:normal;font-size:11px;line-height:normal;font-family:Menlo;color:rgb(0,0,0)"&gt;&lt;span \
class="gmail-s1" style="font-variant-ligatures:no-common-ligatures"&gt;&lt;span \
class="gmail-Apple-converted-space"&gt;            &lt;/span&gt;&lt;bridge name = \
'vlan-br'/&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="gmail-p1" \
style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stre \
tch:normal;font-size:11px;line-height:normal;font-family:Menlo;color:rgb(0,0,0)"&gt;&lt;span \
class="gmail-s1" style="font-variant-ligatures:no-common-ligatures"&gt;&lt;span \
class="gmail-Apple-converted-space"&gt;            &lt;/span&gt;&lt;forward mode = \
'bridge'/&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="gmail-p1" \
style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stre \
tch:normal;font-size:11px;line-height:normal;font-family:Menlo;color:rgb(0,0,0)"&gt;&lt;span \
class="gmail-s1" style="font-variant-ligatures:no-common-ligatures"&gt;&lt;span \
class="gmail-Apple-converted-space"&gt;            &lt;/span&gt;&lt;virtualport \
type='openvswitch'/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p class="gmail-p1" \
style="margin:0px;font:11px Menlo;color:rgb(0,0,0)"&gt;&lt;span class="gmail-s1" \
style="font-variant-ligatures:no-common-ligatures"&gt;            .......&lt;/span&gt;&lt;/p&gt;&lt;p \
class="gmail-p1" style="margin:0px;font-style:normal;font-variant:normal;font-stretch: \
normal;font-size:11px;line-height:normal;font-family:Menlo;color:rgb(0,0,0)"&gt;&lt;span \
class="gmail-s1" style="font-variant-ligatures:no-common-ligatures"&gt;            \
&lt;portgroup name='&lt;b&gt;trunk-native-1221&lt;/b&gt;'&gt;&lt;/span&gt;&lt;/p&gt;&lt;p \
class="gmail-p1" style="margin:0px;font:11px Menlo;color:rgb(0,0,0)"&gt;&lt;span \
class="gmail-s1" style="font-variant-ligatures:no-common-ligatures"&gt;&lt;span \
class="gmail-Apple-converted-space"&gt;            &lt;/span&gt;&lt;vlan \
trunk='yes'&gt;&lt;/span&gt;&lt;/p&gt;&lt;p class="gmail-p1" style="margin:0px;font:11px \
Menlo;color:rgb(0,0,0)"&gt;&lt;span class="gmail-s1" \
style="font-variant-ligatures:no-common-ligatures"&gt;&lt;span \
class="gmail-Apple-converted-space"&gt;                  &lt;/span&gt;&lt;tag \
id='1222'/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p class="gmail-p1" style="margin:0px;font:11px \
Menlo;color:rgb(0,0,0)"&gt;&lt;span class="gmail-s1" \
style="font-variant-ligatures:no-common-ligatures"&gt;&lt;span \
class="gmail-Apple-converted-space"&gt;                  &lt;/span&gt;&lt;tag \
id='1221' nativeMode='untagged'/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p class="gmail-p1" \
style="margin:0px;font:11px Menlo;color:rgb(0,0,0)"&gt;&lt;span class="gmail-s1" \
style="font-variant-ligatures:no-common-ligatures"&gt;&lt;span \
class="gmail-Apple-converted-space"&gt;                  &lt;/span&gt;&lt;tag \
id='1223'/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p class="gmail-p1" \
style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stre \
tch:normal;font-size:11px;line-height:normal;font-family:Menlo;color:rgb(0,0,0)"&gt;&lt;span \
class="gmail-s1" style="font-variant-ligatures:no-common-ligatures"&gt;










&lt;/span&gt;&lt;/p&gt;&lt;p class="gmail-p1" \
style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stre \
tch:normal;font-size:11px;line-height:normal;font-family:Menlo;color:rgb(0,0,0)"&gt;&lt;span \
class="gmail-s1" style="font-variant-ligatures:no-common-ligatures"&gt;&lt;span \
class="gmail-Apple-converted-space"&gt;                   &lt;/span&gt;&lt;tag \
id='1224'/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p class="gmail-p1" \
style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stre \
tch:normal;font-size:11px;line-height:normal;font-family:Menlo;color:rgb(0,0,0)"&gt;&lt;span \
class="gmail-s1" style="font-variant-ligatures:no-common-ligatures"&gt;            \
&lt;/vlan&gt;&lt;/span&gt;&lt;/p&gt;&lt;p class="gmail-p1" \
style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stre \
tch:normal;font-size:11px;line-height:normal;font-family:Menlo;color:rgb(0,0,0)"&gt;&lt;span \
class="gmail-s1" style="font-variant-ligatures:no-common-ligatures"&gt;            \
&lt;/portgtroup&gt;&lt;/span&gt;&lt;/p&gt;&lt;p class="gmail-p1" \
style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stre \
tch:normal;font-size:11px;line-height:normal;font-family:Menlo;color:rgb(0,0,0)"&gt;&lt;span \
class="gmail-s1" style="font-variant-ligatures:no-common-ligatures"&gt;.....&lt;/span&gt;&lt;/p&gt;&lt;p \
class="gmail-p1" style="margin:0px;font-variant-numeric:normal;font-variant-east-asian \
:normal;font-stretch:normal;font-size:11px;line-height:normal;font-family:Menlo;color:rgb(0,0,0)"&gt;&lt;span \
class="gmail-s1" style="font-variant-ligatures:no-common-ligatures"&gt;&lt;/network&gt;&lt;/span&gt;&lt;/p&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;br \
clear="all"&gt;&lt;div&gt;&lt;div dir="ltr" class="gmail_signature" \
data-smartmail="gmail_signature"&gt;&lt;div dir="ltr"&gt;&lt;div&gt;Regards&lt;br&gt;Tanmoy \
Sinha&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190726114209</emailId><senderName>Daniel =?utf-8?B?UC4gQmVycmFuZ8Op?=</senderName><senderEmail>berrange@redhat.com</senderEmail><timestampReceived>2019-07-26 11:42:09-0400</timestampReceived><subject>Re: [libvirt-users] &lt;VM LIVE Migration&gt; &lt;Sync conntrack entries&gt;</subject><body>

On Fri, Jul 26, 2019 at 04:47:22PM +0530, bharath paulraj wrote:
&gt; Hi Team,
&gt; 
&gt; I am using QEMU/KVM for launching VMs and libvirt to govern those VMs.
&gt; I would like to synchronise the connection tracking entries specific
&gt; to the VM during the VM LIVE migrations. It is required when the
&gt; firewall is implemented at the host level like libvirt's "network
&gt; filters". If stateful firewall is enabled, then unless these
&gt; connection tracking entries are synchronised, all the connections to
&gt; the VM are lost and all TCP connections should be reestablished. Is
&gt; there any option already available? I don't think current libvirt
&gt; hooks are helpful, as VM pause in the source hypervisor and VM on in
&gt; the destination hypervisor is done by QEMU and it does not wait for
&gt; any application that needs to sync-up some metadata — In my case, it
&gt; is conntrack entries.
&gt; 
&gt; Also I tried with the existing hooks - stop, release, startcpus and
&gt; nothing worked well.
&gt; 
&gt; Has anybody came across similar scenario? If yes, how you overcome this?

If you need network connections to survive live migration, then you
must not use the virtual network, as NAT state cannot be transferred.

Bridge the guest directly to the LAN, instead of using IP layer forwarding
and NAT.


Regards,
Daniel
-- 
|: https://berrange.com      -o-    https://www.flickr.com/photos/dberrange :|
|: https://libvirt.org         -o-            https://fstop138.berrange.com :|
|: https://entangle-photo.org    -o-    https://www.instagram.com/dberrange :|

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190729112324</emailId><senderName>Michal Privoznik</senderName><senderEmail>mprivozn@redhat.com</senderEmail><timestampReceived>2019-07-29 11:23:24-0400</timestampReceived><subject>Re: [libvirt-users] Why librbd disallow VM live migration if the disk cache mode is not none or dire</subject><body>

On 7/29/19 3:51 AM, Ming-Hung Tsai wrote:
&gt; I'm curious that why librbd sets this limitation? The rule first
&gt; appeared in librbd.git commit d57485f73ab. Theoretically, a
&gt; write-through cache is also safe for VM migration, if the cache
&gt; implementation guarantees that cache invalidation and disk write are
&gt; synchronous operations.
&gt; 
&gt; For example, I'm using Ceph RBD images as VM storage backend. The Ceph
&gt; librbd supports synchronous write-through cache, by setting
&gt; rbd_cache_max_dirty to zero, and setting
&gt; rbd_cache_block_writes_upfront to true, thus it would be safe for VM
&gt; migration. Is that true? Any suggestion would be appreciated. Thanks.

The commit you refer to is very old and my hunch is that things looked 
different in 2012. Things might have changed since then and if 
write-through wasn't safe ~7 years ago, it might be safe now (with some 
tuning).

Michal

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190730071410</emailId><senderName>Peter Krempa</senderName><senderEmail>pkrempa@redhat.com</senderEmail><timestampReceived>2019-07-30 07:14:10-0400</timestampReceived><subject>Re: [libvirt-users] virsh command to list CPU,Memory and Storage</subject><body>

[Attachment #2 (multipart/signed)]


On Tue, Jul 30, 2019 at 09:06:25 +0200, Erik Skultety wrote:
&gt; On Mon, Jul 29, 2019 at 11:08:57PM +0530, Kaushal Shriyan wrote:
&gt; &gt; Hi,
&gt; &gt;
&gt; &gt; Is there a way to find out total CPU's, Memory and Storage using virsh
&gt; &gt; command? For example virsh list --all list out all VM's
&gt; &gt;
&gt; &gt; 11    dockerregistry01               running
&gt; &gt; 12    gitlab      running
&gt; &gt;
&gt; &gt; Any help will be highly appreciated. Thanks in Advance.
&gt; &gt;
&gt; &gt; Best Regards,
&gt; &gt;
&gt; &gt; Kaushal
&gt; 
&gt; Hi,
&gt; have a look at dominfo command, that will give you basic information about the
&gt; guest, that however, doesn't include storage. For storage, you'd want to use a
&gt; sequence of commands: domblklist &lt;domain&gt;;domblkinfo &lt;domain&gt; &lt;disk&gt; --human.

Or everything together but in a less-human-friendly form via virsh
domstats.

Also virt-top might be of interest.

["signature.asc" (application/pgp-signature)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190730121251</emailId><senderName>Daniel =?utf-8?B?UC4gQmVycmFuZ8Op?=</senderName><senderEmail>berrange@redhat.com</senderEmail><timestampReceived>2019-07-30 12:12:51-0400</timestampReceived><subject>Re: [libvirt-users] Libvirt Virtualization Problem</subject><body>

On Tue, Jul 30, 2019 at 08:06:01PM +0800, 王金磊 wrote:
&gt; Dear Sir/Madam:
&gt;   I use virt-manager to create a new virtual machine(it's name is generic),
&gt; then I edit generic to set it's cpu_mode as 'host-model', and I start it,
&gt; but when dumpxml generic, it's cpu_mode is changed as 'custom'.
&gt;   I want to know that why it is?
&gt;   And what's the principle of dumpxml?

"host-model" is a CPU type that will be expanded to a named CPU model
and feature list that matches the host's CPU, as reported by the
'virsh domcapabilities' command.

Libvirt actually stores two XML documents for most guests. There is
the persistent config which is the master configuration that exists
even when the guest is stopped. Then their is the live config which
only exists whde the guest is running.

When you ran 'virsh dumpxml' on a running guest, it will show you
the live config, and that has the CPU model expanded to a named
CPU + features, hence you see it reported as 'custom'.

If you run 'virsh dumpxml --inactive' you'll see the persistent
config and that should still report 'host-model'.

Regards,
Daniel
-- 
|: https://berrange.com      -o-    https://www.flickr.com/photos/dberrange :|
|: https://libvirt.org         -o-            https://fstop138.berrange.com :|
|: https://entangle-photo.org    -o-    https://www.instagram.com/dberrange :|

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190730204049</emailId><senderName></senderName><senderEmail>vincent</senderEmail><timestampReceived>2019-07-30 20:40:49-0400</timestampReceived><subject>[libvirt-users] Researching why different cache modes result in 'some' guest filesystem corruption..</subject><body>


Hi All,

I've been chasing down an issue in recent weeks (my own lab, so no prod 
here) and I'm reaching out in case someone might have some guidance to 
share.

I'm running fairly large VMs (RHOSP underclouds - 8vcpu, 32gb ram, about 
200gb single disk as a growable qcow2) on some RHEL7.6 hypervisors (kernel 
3.10.0-927.2x.y, libvirt 4.5.0, qemu-kvm-1.5.3) on top of SSD/NVMe drives 
with various filesystems (vxfs, zfs, etc..) and using ECC RAM.

The issue can be described as follows:

- the guest VMs work fine for a while (days, weeks) but after a kernel
   update (z-stream) comes in, I am often greeted by the following message
   immediately after rebooting (or attempting to reboot into the new
   kernel):

"error: not a correct xfs inode"

- booting the previous kernel works fine and re-generating the initramfs
   for the new kernel (from the n-1 kernel) does not solve anything.

- if booted from an ISO, xfs_repair does not find errors.

- on ext4, there seems to be some kind of corruption there too.

I'm building the initial guest image qcow2 for those guest VMs this way:

1) start with a rhel-guest image (currently 
rhel-server-7.6-update-5-x86_64-kvm.qcow2)

2) convert to LVM by doing this:
  qemu-img create -f qcow2 -o \
preallocation=metadata,cluster_size=1048576,lazy_refcounts=off final_guest.qcow2 512G \
virt-format -a final_guest.qcow2 --partition=mbr --lvm=/dev/rootdg/lv_root \
--filesystem=xfs  guestfish --ro -a rhel_guest.qcow2 -m /dev/sda1 -- tar-out / - | \
  guestfish --rw -a final_guest.qcow2 -m /dev/rootdg/lv_root  -- tar-in - /

3) use "final_guest.qcow2" as the basis for my guests with LVM.

After chasing down this issue some more and attempting various 
things (build the image on Fedora29, build a real XFS filesystem inside a 
VM and use the generated qcow2 as a basis instead of virt-format)..

..I've noticed that the SATA disk of each of those guests were using 
'directsync' (instead of 'Hypervisor Default'). As soon as I switched to 
'None', the XFS issues disappeared and I've now applied several 
consecutive kernel updates without issues. Also, 'directsync' or 
'writethrough', while providing decent performance, both exhibited the XFS 
'corruption' behaviour.. Only 'none' seem to have solved that.

I've read the docs but I thought it was OK to use those modes (UPS, 
Battery-Backed RAID, etc..)

Does anyone have any idea what's going on or what I may be doing wrong?

Thanks for reading,

Vincent

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20190731135012</emailId><senderName>Alvin Starr</senderName><senderEmail>alvin@netvel.net</senderEmail><timestampReceived>2019-07-31 13:50:12-0400</timestampReceived><subject>Re: [libvirt-users] OVS / KVM / libvirt / MTU</subject><body>

In general if no MTU is set on interface creation the default value is 1500.

On OVS the bridge MTU is automatically set to the smallest port MTU. So 
you just have to set the MTU of each port of the bridge.

Take a look at: https://bugzilla.redhat.com/show_bug.cgi?id=1160897
It is a bit of a pain to read but seems to confirm the statement about 
the OVS MTU value being set by the MTU of the ports.

I have been using OVS with Xen and a few years ago I had to wrap my head 
around this problem.
Once you start setting the MTU to something other than 1500 you will 
find you need to set ALL the MTU values of ALL your interfaces.
Otherwise some inherited default will bite you.


On 7/31/19 4:39 AM, Michal Privoznik wrote:
&gt; On 7/29/19 9:23 PM, Sven Vogel wrote:
&gt;&gt; Hi Michal,
&gt;&gt;
&gt;&gt; Thanks for your answer.
&gt;&gt;
&gt;&gt; I don't understand why an interface created without mtu gets only 
&gt;&gt; 1500 visible in the virtual machine but if I create an interface with 
&gt;&gt; mtu higher than 1500 e.g. 2000 the bridge will change too. Before the 
&gt;&gt; bridge was e.g. by 9000.
&gt;&gt; I ask because you wrote if I don't set an mtu of the interface I will 
&gt;&gt; get the mtu of the bridge. But it seems so.
&gt;&gt;
&gt;&gt; Can you clarify it a little better for me?
&gt;
&gt; I don't know enough about OVS internals to answer that, sorry. Maybe 
&gt; we should ask OVS developers why OVS bridge behaves this way.
&gt;
&gt; Michal
&gt;
&gt; _______________________________________________
&gt; libvirt-users mailing list
&gt; libvirt-users@redhat.com
&gt; https://www.redhat.com/mailman/listinfo/libvirt-users

-- 
Alvin Starr                   ||   land:  (647)478-6285
Netvel Inc.                   ||   Cell:  (416)806-0133
alvin@netvel.net              ||

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190603165313</emailId><senderName>Laine Stump</senderName><senderEmail>laine@redhat.com</senderEmail><timestampReceived>2019-06-03 16:53:13-0400</timestampReceived><subject>Re: [libvirt-users] Easy solution for custom firewall rules- is it possible?</subject><body>

 &gt; Am Donnerstag, den 30.05.2019, 21:44 -0400 schrieb Joshua Kramer:
 &gt;&gt; Hello All-
 &gt;&gt;
 &gt;&gt; I've looked in several places and haven't found an answer to this
 &gt;&gt; question: is it possible to have libvirt add custom rules to iptables
 &gt;&gt; for virtual network interfaces?  I took a look at the "Firewall and
 &gt;&gt; Network Filtering in Libvirt" page and it seems overly complicated
 &gt;&gt; for
 &gt;&gt; what I want to do.
 &gt;&gt;
 &gt;&gt; Given an interface virbr2 and its network 192.168.4.0/24, libvirt
 &gt;&gt; installs the following rules in iptables.  Essentially, these rules
 &gt;&gt; will drop any packets for the interface virbr2 where the source or
 &gt;&gt; destination is not on the 192.168.4.0/24 network.
 &gt;&gt;
 &gt;&gt; -P FORWARD ACCEPT
 &gt;&gt; -A FORWARD -d 192.168.4.0/24 -o virbr2 -j ACCEPT
 &gt;&gt; -A FORWARD -s 192.168.4.0/24 -i virbr2 -j ACCEPT
 &gt;&gt; -A FORWARD -i virbr2 -o virbr2 -j ACCEPT
 &gt;&gt; -A FORWARD -o virbr2 -j REJECT --reject-with icmp-port-unreachable
 &gt;&gt; -A FORWARD -i virbr2 -j REJECT --reject-with icmp-port-unreachable
 &gt;&gt;
 &gt;&gt; I have a VPN server on the 4/24 network- and it hands out addresses
 &gt;&gt; in
 &gt;&gt; the 8/24 network.  So I would like libvirt to also create the
 &gt;&gt; following rules in iptables:
 &gt;&gt;
 &gt;&gt; -A FORWARD -d 192.168.8.0/24 -o virbr2 -j ACCEPT
 &gt;&gt; -A FORWARD -s 192.168.8.0/24 -i virbr2 -j ACCEPT
 &gt;&gt;
 &gt;&gt; I've tried creating direct rules in firewalld for the FORWARD_direct
 &gt;&gt; chain.  Firewalld happily creates those rules, but they are never
 &gt;&gt; reached, because they fall AFTER the libvirt rules.  I've also tried
 &gt;&gt; creating an IP address on the virbr2 interface in the 8/24 network,
 &gt;&gt; but that doesn't work either.  How can I get this done?
 &gt;&gt;

On 5/31/19 10:42 AM, nakata wrote:
&gt; Hi,
&gt; 
&gt; libvirts nwfilter module can achieve that.

In general it is true that nwfilter can add iptables (or more commonly 
ebtables) rules. But I don't think it can do what is being requested by 
Joshua since those rules are not only specific to the guest interface, 
but also are applied *in addition to* the iptables rules added by the 
libvirt network, not *instead of*.

Much of what nwfilter does is via the ebtables "nat" table, not 
input/output/forward. So any rules you added using nwfilter would only 
be traversed by traffic going in or out of a particular guest's tap 
interface, and even after it passed that, it would *still* be subject to 
the iptables rules added by the network (which may be more restrictive - 
in this case, even though the packets with the source address on the VPN 
would be able to get past the guest's tap device onto the bridge, they 
would then be subject to the iptables rules when trying to leave the 
bridge).


&gt; I'm currently working on opt-out patches to disable that functionality
&gt; if wished. I also don't use firewalld.

What are you trying to "opt out" of? If your libvirt network has 
&lt;forward mode='open'/&gt; then there will be no iptables rules created at 
all. (Similarly, if you don't like the DHCP service that is setup for a 
libvirt virtual network, remove the &lt;dhcp&gt; section from the network's 
config before you start it, and if you don't like the provided DNS 
server, add &lt;dns enable='no'/&gt; to the network config).

(&lt;forward mode='open'/&gt; and &lt;dns enable='no'/&gt; have been in libvirt 
since v2.2.0. It has always been possible to disable the auto-configured 
dhcp server by removing the &lt;dhcp&gt; section).


&gt; 
&gt; It's both paternalizing and annoying and takes away user flexilibity in
&gt; exchange for nothing.

libvirt's virtual networks aren't taking away flexibility for nothing. 
They are a convenience that was added specifically to make it as simple 
as possible to set up a usable network connection that fits the needs of 
95% of users. In order to make it as foolproof as possible, by design it 
has just a few presets with limited configuration (although the amount 
of configuation possible has grown a bit over the years as various 
things have shown themselves to be commonly needed). Anyone with needs 
more complex than what can be satisfied by libvirt's few preset modes 
and configuration knobs can easily setup their own bridge device, 
iptables rules, and dnsmasq instance outside of libvirt in the host 
system config (or you can turn various parts of it off, using the 
options described above, and still use the rest of what libvirt creates.

So, if you just need flexibility for iptables rules, use &lt;forward 
mode='open'/&gt;. If you need full flexibility, then don't use a libvirt 
virtual network - setup your own bridge, and configure the guest 
interfaces with &lt;interface type='bridge'&gt;.

&gt; 
&gt; anyways
&gt; Check the nwfilter page to write own filters for the beginning:
&gt; https://libvirt.org/formatnwfilter.html#nwfwrite
&gt; 
&gt; some more info:
&gt; https://www.redhat.com/archives/libvir-list/2010-June/msg00762.html

This is a very informative and useful email. For that reason, it was 
formatted and put into libvirt's official documentation here:

    https://libvirt.org/firewall.html

There have been a few changes/additions over the years (although not 
many!) so that is a better reference document.

(if that email is referenced somewhere in the wiki or something, we 
should change it to point to the docs page)

&gt; 
&gt; https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/virtua \
&gt; lization_deployment_and_administration_guide/sect-virtual_networking-applying_network_filtering
&gt; 

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20190603165506</emailId><senderName>Laine Stump</senderName><senderEmail>laine@redhat.com</senderEmail><timestampReceived>2019-06-03 16:55:06-0400</timestampReceived><subject>Re: [libvirt-users] Easy solution for custom firewall rules-</subject><body>

On 6/2/19 10:02 PM, Joshua Kramer wrote:
&gt; Nakta wrote:
&gt;&gt; libvirts nwfilter module can achieve that.
&gt; 
&gt; I read over those resources and I did what I thought would be correct,
&gt; but it's not having any effect.
&gt; 
&gt; I created a new nwfilter like this:
&gt; &lt;filter name='allow-virbr2-vpn' chain='ipv4' priority='-700'&gt;
&gt;    &lt;rule action='accept' direction='in' priority='500'&gt;
&gt;      &lt;all state='ESTABLISHED'/&gt;
&gt;    &lt;/rule&gt;
&gt;    &lt;rule action='accept' direction='out' priority='500'&gt;
&gt;      &lt;all state='ESTABLISHED,RELATED'/&gt;
&gt;    &lt;/rule&gt;
&gt;    &lt;rule action='accept' direction='in' priority='100'&gt;
&gt;      &lt;ip dstipaddr='192.168.8.0' dstipmask='24'/&gt;
&gt;    &lt;/rule&gt;
&gt;    &lt;rule action='accept' direction='out' priority='100'&gt;
&gt;      &lt;ip srcipaddr='192.168.8.0' srcipmask='24'/&gt;
&gt;    &lt;/rule&gt;
&gt;    &lt;rule action='drop' direction='inout' priority='500'&gt;
&gt;      &lt;all/&gt;
&gt;    &lt;/rule&gt;
&gt; &lt;/filter&gt;
&gt; 
&gt; I then associated that filter with the Interface device on the VM
&gt; server within KVM... and shutdown/restart that VM.
&gt;   &lt;interface type='network'&gt;
&gt;        &lt;mac address='XX:XX:XX:XX:XX:XX'/&gt;
&gt;        &lt;source network='locservers'/&gt;
&gt;        &lt;model type='virtio'/&gt;
&gt;        &lt;filterref filter='allow-virbr2-vpn'/&gt;
&gt;        &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x03'
&gt; function='0x0'/&gt;
&gt;      &lt;/interface&gt;
&gt; 
&gt; After this, nothing happens.  I did 'ebtables --list', and the new
&gt; rules aren't there.

Try "ebtables -t nat -L", although as I said in the other message I just 
posted, it's not going to do what you need anyway, because these rules 
will be applied *in addition to* the network's iptables rules, not 
*instead of*.

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190610093243</emailId><senderName>Martin Kletzander</senderName><senderEmail>mkletzan@redhat.com</senderEmail><timestampReceived>2019-06-10 09:32:43-0400</timestampReceived><subject>Re: [libvirt-users] Cloud automation</subject><body>

[Attachment #2 (multipart/signed)]


Yes, even though libvirt is remotely accessible, it is node-centric, that is it
manages the whole node (server) for you, but nothing else (well, it can
migrate).  If you want to have a "cloud" or anything involving more servers you
probably want something on top of libvirt as well (oVirt, OpenStack, or others,
see https://libvirt.org/apps.html )

On Fri, Jun 07, 2019 at 04:16:07PM +0000, Brandon Doyle wrote:
&gt; Can you not use virt-manager or ovirt to accomplish this?
&gt; 
&gt; 
&gt; Regards,
&gt; 
&gt; Brandon Doyle
&gt; 
&gt; 
&gt; On 6/6/19 10:25 AM, Adrien Macor wrote:
&gt; 
&gt; Hi,
&gt; 
&gt; I have a question for you:
&gt; 
&gt; Let's suppose I have three physical servers; two on the same area, and the last one \
&gt; elsewhere (not on the same network, but all three have connectivity between each \
&gt; others). 
&gt; May I use this infrastructure with libvirt? I mean in terms of cloud automation: is \
&gt; it possible to remotely deploy VMs (with particulary configurations) with libvirt? 
&gt; For example, is it possible to have one master node controlling the two others?
&gt; 
&gt; Thanks for the reply
&gt; 
&gt; 
&gt; 
&gt; _______________________________________________
&gt; libvirt-users mailing list
&gt; libvirt-users@redhat.com&lt;mailto:libvirt-users@redhat.com&gt;
&gt; https://www.redhat.com/mailman/listinfo/libvirt-users

&gt; _______________________________________________
&gt; libvirt-users mailing list
&gt; libvirt-users@redhat.com
&gt; https://www.redhat.com/mailman/listinfo/libvirt-users


["signature.asc" (application/pgp-signature)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190610102624</emailId><senderName>Peter Krempa</senderName><senderEmail>pkrempa@redhat.com</senderEmail><timestampReceived>2019-06-10 10:26:24-0400</timestampReceived><subject>Re: [libvirt-users] Same host migration</subject><body>

[Attachment #2 (multipart/signed)]


On Sat, Jun 08, 2019 at 23:03:50 +0300, Vasiliy Tolstov wrote:
&gt; чт, 6 июн. 2019 г. в 14:19, Sukrit Bhatnagar &lt;skrtbhtngr@gmail.com&gt;:
&gt; &gt;
&gt; &gt; Hi,
&gt; &gt;
&gt; &gt; I have been selected for GSoC'19 under qemu and was
&gt; &gt; trying out migration of the pvrdma device.
&gt; &gt; For my current task, I need to perform a "null" migration
&gt; &gt; i.e. migrate the VM to the same host for testing purpose.
&gt; &gt; I am using libvirt 5.1.0 on Fedora 30.
&gt; &gt;
&gt; &gt; &gt;From what I know, libvirt does not allow this type of
&gt; &gt; migration by default.
&gt; &gt; Trying this:
&gt; &gt; virsh migrate --unsafe --verbose fedora29 qemu+unix:///system
&gt; &gt; results in the following error:
&gt; &gt; error: internal error: Attempt to migrate guest to the same host dell
&gt; &gt;
&gt; &gt; Is there some way I can get this to work? If the solution
&gt; &gt; requires changing the source code, then that is
&gt; &gt; also fine. Using qemu-system-x86_64 to perform
&gt; &gt; migration allows same-host migration. I need the same
&gt; &gt; functionality using virsh as libvirt performs some additional
&gt; &gt; servicing which is required for the device I am migrating.
&gt; &gt;
&gt; &gt; Thanks,
&gt; &gt; Sukrit
&gt; &gt;
&gt; 
&gt; Yeah, this feature also will be useful to able to upgrade qemu on the
&gt; file (install never package, do all vm same host migration, that
&gt; starts never qemu process).

Note that libvirt uses the machine name in many places which makes it
almost impossible to run two VMs with the same name on the single host,
so apart from removing the limitation mentioned above (which I'm not
sure if we want to remove it) the migration MUST change name of the VM.

["signature.asc" (application/pgp-signature)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190610165733</emailId><senderName>lejeczek</senderName><senderEmail>peljasz@yahoo.co.uk</senderEmail><timestampReceived>2019-06-10 16:57:33-0400</timestampReceived><subject>Re: [libvirt-users] lxc - pass filesystem off host's automounts</subject><body>



On 10/06/2019 12:46, Daniel P. Berrangé wrote:
&gt; On Mon, Jun 10, 2019 at 12:28:02PM +0100, lejeczek wrote:
&gt;&gt; hi guys
&gt;&gt;
&gt;&gt; in my qutest I have this:
&gt;&gt;
&gt;&gt; ...
&gt;&gt;
&gt;&gt;     &lt;filesystem type='mount' accessmode='passthrough'&gt;
&gt;&gt;       &lt;source dir='/home'/&gt;
&gt;&gt;       &lt;target dir='/home'/&gt;
&gt;&gt;     &lt;/filesystem&gt;
&gt;&gt;
&gt;&gt; ...
&gt;&gt;
&gt;&gt; and on the host /home/* are user home dirs which are automounted off a
&gt;&gt; glusterfs volume.
&gt;&gt;
&gt;&gt; The guest starts okey, I can see dirs under /home but if I go to
&gt;&gt; /home/userA I get:
&gt;&gt;
&gt;&gt; ls: cannot access /home/userA/: Too many levels of symbolic links
&gt;&gt;
&gt;&gt; Do you know if what I'm trying should just work a okey?
&gt; Unfortunately I don't believe the setup you describe can work.
&gt;
&gt; When we passthrough /home it will be marked as a private mount
&gt; inside the container. This means that any child mounts within
&gt; it will *not* propagate into the container.
&gt;
&gt;
&gt; Regards,
&gt; Daniel
Is it possible (and safe) to get fuse dev into a lxc container?
many thanks, L.



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190613103019</emailId><senderName>Marcus Hoffmann</senderName><senderEmail>bubu@bubu1.eu</senderEmail><timestampReceived>2019-06-13 10:30:19-0400</timestampReceived><subject>Re: [libvirt-users] Using qemu active blockcommit results in 'Permission denied' error</subject><body>

[Attachment #2 (multipart/signed)]

[Attachment #4 (multipart/mixed)]


Hello Peter,

On 13.06.19 10:08, Peter Krempa wrote:
&gt; On Tue, Jun 11, 2019 at 14:35:46 +0200, Peter Krempa wrote:
&gt;&gt; On Fri, May 31, 2019 at 14:03:40 +0200, Marcus Hoffmann wrote:
[...]
&gt;&gt;
&gt;&gt; I managed to reproduce this issue but when using selinux. I'll try to
&gt;&gt; fix it with selinux and will try to assess whether it has the possiblity
&gt;&gt; to fix apparmor too. I'll cc you on a patch when I'll be able to fix it.
&gt; 
&gt; 
&gt; Well,
&gt; 
&gt; The problem I managed to fix had the same symptoms but probably was not
&gt; what you see, as you are using libvirt 5.0.0 and I broke the permissions
&gt; code in libvirt 5.4.0.
&gt; 
&gt; Unfortunately I can't tell what's wrong from the debug logs you've
&gt; provided. Is there a possibility to collect anything from apparmor? In
&gt; selinux world we do collect denials of the security model in a log file
&gt; which might indicate what's happening.

As I wrote in my original email I *thought* I had disabled apparmor
enforcement for libvirt completely at this point. I'm not an apparmor
expert, so I'm really not too sure. I'll see if I can gather more
information.

&gt; 
&gt; Also I've pushed a patch which adds more logging to the
&gt; permission-changing code executed while doing blockjobs:
&gt; 
&gt; commit e6635c626a252669c79a84fe0a2af11a361aa341 (HEAD -&gt; master, origin/master, origin/HEAD)
&gt; Author: Peter Krempa &lt;pkrempa@redhat.com&gt;
&gt; Date:   Wed Jun 12 13:49:57 2019 +0200
&gt; 
&gt;     qemu: domain: Log some useful data in qemuDomainStorageSourceAccessModify
&gt;     
&gt;     Log the flags passed to the function in a exploded state so that it's
&gt;     easily visible what's happening to the image.
&gt;     
&gt;     Signed-off-by: Peter Krempa &lt;pkrempa@redhat.com&gt;
&gt;     Reviewed-by: Ján Tomko &lt;jtomko@redhat.com&gt;
&gt; 
&gt; Unfortunately that commit can't be applied to libvirt 5.0 because it
&gt; depends on a refactor which I pushed in 5.4 (which also caused the
&gt; problem I was fixing recently). If you could test the upstream version
&gt; it would be great.
&gt; 
&gt; Thanks for reporting the problem and I'd be grateful if you could
&gt; collect logs from the apparmor security thing.
&gt; 


I'll try to upgrade to upstream libvirt. It will probably take me a bit
to get around to this.

Thanks looing into this.

Marcus


["signature.asc" (application/pgp-signature)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190614133352</emailId><senderName>"Lentes, Bernd"</senderName><senderEmail>bernd.lentes@helmholtz-muenchen.de</senderEmail><timestampReceived>2019-06-14 13:33:52-0400</timestampReceived><subject>Re: [libvirt-users] blockcommit of domain not successfull</subject><body>



----- On Jun 14, 2019, at 9:14 AM, Peter Krempa pkrempa@redhat.com wrote:

&gt; On Thu, Jun 13, 2019 at 16:01:18 +0200, Lentes, Bernd wrote:
&gt;&gt; 
&gt;&gt; ----- On Jun 13, 2019, at 1:08 PM, Bernd Lentes
&gt;&gt; bernd.lentes@helmholtz-muenchen.de wrote:
&gt;&gt; 
&gt;&gt; I found further information in /var/log/messages for both occurrences:
&gt;&gt; 
&gt;&gt; 2019-06-01T03:05:31.620725+02:00 ha-idg-2 systemd-coredump[14253]: Core Dumping
&gt;&gt; has been disabled for process 30590 (qemu-system-x86).
&gt;&gt; 2019-06-01T03:05:31.712673+02:00 ha-idg-2 systemd-coredump[14253]: Process 30590
&gt;&gt; (qemu-system-x86) of user 488 dumped core.
&gt;&gt; 2019-06-01T03:05:32.173272+02:00 ha-idg-2 kernel: [294682.387828] br0: port
&gt;&gt; 4(vnet2) entered disabled state
&gt;&gt; 2019-06-01T03:05:32.177111+02:00 ha-idg-2 kernel: [294682.388384] device vnet2
&gt;&gt; left promiscuous mode
&gt;&gt; 2019-06-01T03:05:32.177122+02:00 ha-idg-2 kernel: [294682.388391] br0: port
&gt;&gt; 4(vnet2) entered disabled state
&gt;&gt; 2019-06-01T03:05:32.208916+02:00 ha-idg-2 wickedd[2954]: error retrieving tap
&gt;&gt; attribute from sysfs
&gt;&gt; 2019-06-01T03:05:41.395685+02:00 ha-idg-2 systemd-machined[2824]: Machine
&gt;&gt; qemu-31-severin terminated.
&gt;&gt; 
&gt;&gt; 
&gt;&gt; 2019-06-08T05:59:17.502899+02:00 ha-idg-1 systemd-coredump[31089]: Core Dumping
&gt;&gt; has been disabled for process 19489 (qemu-system-x86).
&gt;&gt; 2019-06-08T05:59:17.523050+02:00 ha-idg-1 systemd-coredump[31089]: Process 19489
&gt;&gt; (qemu-system-x86) of user 489 dumped core.
&gt;&gt; 2019-06-08T05:59:17.650334+02:00 ha-idg-1 kernel: [999258.577132] br0: port
&gt;&gt; 9(vnet7) entered disabled state
&gt;&gt; 2019-06-08T05:59:17.650354+02:00 ha-idg-1 kernel: [999258.578103] device vnet7
&gt;&gt; left promiscuous mode
&gt;&gt; 2019-06-08T05:59:17.650355+02:00 ha-idg-1 kernel: [999258.578108] br0: port
&gt;&gt; 9(vnet7) entered disabled state
&gt;&gt; 2019-06-08T05:59:25.983702+02:00 ha-idg-1 systemd-machined[1383]: Machine
&gt;&gt; qemu-205-severin terminated.
&gt;&gt; 
&gt;&gt; Core Dumping is disabled, but nevertheless a core dump has been created ?
&gt;&gt; Where could i find it ?
&gt;&gt; Would it be useful to provide it ?
&gt; 
&gt; So this really hints to qemu crashing. It certainly will be beneficial
&gt; to collect the backtrace, but you really should report this (including
&gt; the error message from the vm log file) to the qemu team.
&gt; 
&gt; They might have even fixed it by now, so a plain update might help.

Hi Peter,

thanks for your help. I'll continue on the Qemu ML:
https://lists.nongnu.org/archive/html/qemu-discuss/2019-06/msg00014.html


Bernd
 

Helmholtz Zentrum Muenchen
Deutsches Forschungszentrum fuer Gesundheit und Umwelt (GmbH)
Ingolstaedter Landstr. 1
85764 Neuherberg
www.helmholtz-muenchen.de
Aufsichtsratsvorsitzende: MinDir'in Prof. Dr. Veronika von Messling
Geschaeftsfuehrung: Prof. Dr. med. Dr. h.c. Matthias Tschoep, Heinrich Bassler, Kerstin Guenther
Registergericht: Amtsgericht Muenchen HRB 6466
USt-IdNr: DE 129521671

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190614143715</emailId><senderName>Martin Kletzander</senderName><senderEmail>mkletzan@redhat.com</senderEmail><timestampReceived>2019-06-14 14:37:15-0400</timestampReceived><subject>Re: [libvirt-users] Libvirt API for getting disk capacity from VM XML</subject><body>

[Attachment #2 (multipart/signed)]


On Thu, Jun 13, 2019 at 03:17:16PM +0530, Varsha Verma wrote:
&gt;Hello everyone,
&gt;I am doing an outreachy internship at Openstack Ironic. In the sushy-tools
&gt;project, we are using libvirt VMs to simulate bare metal machines for
&gt;testing purposes.
&gt;
&gt;In the XML description of a domain, there are a bunch of disk elements
&gt;giving information about the various storage devices attached to the
&gt;domain. Is there some way to get the size/capacity of those disks using the
&gt;libvirt API?
&gt;

Yes, there is, virStorageVolGetXMLDesc:

  https://libvirt.org/html/libvirt-libvirt-storage.html#virStorageVolGetXMLDesc

Look for &lt;capacity/&gt;

The tricky part might be to get the storage volume object.  I'm not sure how
sushy-tools are using libvirt and what the deployment looks like, so here are
few tips and feel free to ask for more info.

If it is a path on the local filesystem, you might just use
`virStorageVolLookupByKey` and be done with it:

  https://libvirt.org/html/libvirt-libvirt-storage.html#virStorageVolLookupByKey

If it is not, you might need to look it up based on the pool it is in.

If you have the pool already, then it is a matter of `virStorageVolLookupBy*`
for example.  If you don't have that you might look for the pool with
`virStoragePoolLookupBy*`, for example `virStoragePoolLookupByName`:

  https://libvirt.org/html/libvirt-libvirt-storage.html#virStoragePoolLookupByName

And one more general libvirt advice (although maybe not really a good one,
definitely not a silver bullet):

You can always have a look at how `virsh` does things.  It might be a bit
confusing at times, but if you have a command name (in our case we'd use the
`vol-dumpxml` command), you can CamelCase it ("VolDumpXML"), prepend "cmd" (as
in "command") and the resulting name (`cmdVolDumpXML`) is the name of the
function that virsh runs for that command.  You can see it in
tools/virsh-volume.c:

  https://github.com/libvirt/libvirt/blob/master/tools/virsh-volume.c#L1211

The main part of how it looks up a volume is `virshCommandOptVol` which is just
a syntax sugar for `virshCommandOptVolBy` in the same file:

  https://github.com/libvirt/libvirt/blob/master/tools/virsh-volume.c#L68

Which is trying to do the lookup by all various possible things.  Same thing can
be found for `pool-*` commands.

HTH, have a nice day,
Martin

&gt;--
&gt;
&gt;*Regards,*
&gt;
&gt;*Varsha Verma*
&gt;
&gt;*Fourth Year Undergraduate*
&gt;
&gt;*Department of Electrical Engineering*
&gt;
&gt;*IIT-BHU, Varanasi*

&gt;_______________________________________________
&gt;libvirt-users mailing list
&gt;libvirt-users@redhat.com
&gt;https://www.redhat.com/mailman/listinfo/libvirt-users


["signature.asc" (application/pgp-signature)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190606142512</emailId><senderName>Adrien Macor</senderName><senderEmail>adrien.macor@hotmail.com</senderEmail><timestampReceived>2019-06-06 14:25:12-0400</timestampReceived><subject>[libvirt-users] Cloud automation</subject><body>

Hi,

I have a question for you:

Let=92s suppose I have three physical servers; two on the same area, and th=
e last one elsewhere (not on the same network, but all three have connectiv=
ity between each others).

May I use this infrastructure with libvirt? I mean in terms of cloud automa=
tion: is it possible to remotely deploy VMs (with particulary configuration=
s) with libvirt?

For example, is it possible to have one master node controlling the two oth=
ers?

Thanks for the reply

[Attachment #3 (text/html)]

&lt;html&gt;
&lt;head&gt;
&lt;meta http-equiv="Content-Type" content="text/html; charset=Windows-1252"&gt;
&lt;style type="text/css" style="display:none;"&gt; P {margin-top:0;margin-bottom:0;} \
&lt;/style&gt; &lt;/head&gt;
&lt;body dir="ltr"&gt;
&lt;p dir="ltr" style="margin-top: 0px; color: rgb(34, 34, 34); font-family: Helvetica, \
Arial, sans-serif; font-size: 15px; background-color: rgb(255, 255, 255)"&gt; Hi,&lt;/p&gt;
&lt;p dir="ltr" style="color: rgb(34, 34, 34); font-family: Helvetica, Arial, \
sans-serif; font-size: 15px; background-color: rgb(255, 255, 255)"&gt; I have a question \
for you:&lt;/p&gt; &lt;p dir="ltr" style="color: rgb(34, 34, 34); font-family: Helvetica, \
Arial, sans-serif; font-size: 15px; background-color: rgb(255, 255, 255)"&gt; Let’s \
suppose I have three physical servers; two on the same area, and the last one \
elsewhere (not on the same network, but all three have connectivity between each \
others)&lt;span style="color: rgb(34, 34, 34); font-family: Helvetica, Arial, \
sans-serif; font-size: 15px;"&gt;. &lt;/span&gt;&lt;/p&gt; &lt;p dir="ltr" style="color: rgb(34, \
34, 34); font-family: Helvetica, Arial, sans-serif; font-size: 15px; \
background-color: rgb(255, 255, 255)"&gt; &lt;span style="color: rgb(34, 34, 34); \
font-family: Helvetica, Arial, sans-serif; font-size: 15px;"&gt;May I use this \
infrastructure with libvirt? I mean in terms of cloud automation: is it possible to \
remotely deploy VMs (with particulary configurations) with &lt;span style="font-family: \
Helvetica, Arial, sans-serif; background-color: rgb(255, 255, 255); display: inline \
!important"&gt; libvirt&lt;/span&gt;?&lt;/span&gt;&lt;/p&gt;
&lt;p dir="ltr" style="color: rgb(34, 34, 34); font-family: Helvetica, Arial, \
sans-serif; font-size: 15px; background-color: rgb(255, 255, 255)"&gt; &lt;span \
style="color: rgb(34, 34, 34); font-family: Helvetica, Arial, sans-serif; font-size: \
15px;"&gt;For example, is it possible to have one master node controlling the two \
others?&lt;/span&gt;&lt;/p&gt; &lt;p dir="ltr" style="color: rgb(34, 34, 34); font-family: \
Helvetica, Arial, sans-serif; font-size: 15px; background-color: rgb(255, 255, 255)"&gt; \
Thanks for the reply&lt;/p&gt; &lt;/body&gt;
&lt;/html&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
--===============2534994352865490415==--


</body></email><email><emailId>20190606112705</emailId><senderName>Sukrit Bhatnagar</senderName><senderEmail>skrtbhtngr@gmail.com</senderEmail><timestampReceived>2019-06-06 11:27:05-0400</timestampReceived><subject>[libvirt-users] Same host migration</subject><body>

Hi,

I have been selected for GSoC'19 under qemu and was
trying out migration of the pvrdma device.
For my current task, I need to perform a "null" migration
i.e. migrate the VM to the same host for testing purpose.
I am using libvirt 5.1.0 on Fedora 30.

&gt;From what I know, libvirt does not allow this type of
migration by default.
Trying this:
virsh migrate --unsafe --verbose fedora29 qemu+unix:///system
results in the following error:
error: internal error: Attempt to migrate guest to the same host dell

Is there some way I can get this to work? If the solution
requires changing the source code, then that is
also fine. Using qemu-system-x86_64 to perform
migration allows same-host migration. I need the same
functionality using virsh as libvirt performs some additional
servicing which is required for the device I am migrating.

Thanks,
Sukrit

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190610112802</emailId><senderName>lejeczek</senderName><senderEmail>peljasz@yahoo.co.uk</senderEmail><timestampReceived>2019-06-10 11:28:02-0400</timestampReceived><subject>[libvirt-users] lxc - pass filesystem off host's automounts</subject><body>

hi guys

in my qutest I have this:

...

       &lt;filesystem type='mount' accessmode='passthrough'&gt;
           &lt;source dir='/home'/&gt;
           &lt;target dir='/home'/&gt;
       &lt;/filesystem&gt;

...

and on the host /home/* are user home dirs which are automounted off a
glusterfs volume.

The guest starts okey, I can see dirs under /home but if I go to
/home/userA I get:

ls: cannot access /home/userA/: Too many levels of symbolic links

Do you know if what I'm trying should just work a okey?

many thanks, L.


["pEpkey.asc" (application/pgp-keys)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190530201214</emailId><senderName>Marcus Hoffmann</senderName><senderEmail>bubu@bubu1.eu</senderEmail><timestampReceived>2019-05-30 20:12:14-0400</timestampReceived><subject>[libvirt-users] Using qemu active blockcommit results in 'Permission denied' error</subject><body>

Hello all,

I tried following this guide:
https://wiki.libvirt.org/page/Live-disk-backup-with-active-blockcommit

Unfortunately when I try to do the final virsh blockcommit step I always
get the following error:

error: internal error: unable to execute QEMU command 'block-commit':
Could not reopen file: Permission denied

I checked directory und image file permissions, app-armor profiles (set
to complain mode for now.) and libvirt logs but nothing there gives me
any hints what might be going wrong.

This is on a debian buster system, using

libvirtd (libvirt) 5.0.0
qemu		   3.1+dfsg-7

I would appreciate any hints on how to proceed/get more debug info on this.

Thanks!
Marcus

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190604124429</emailId><senderName>"Lentes, Bernd"</senderName><senderEmail>bernd.lentes@helmholtz-muenchen.de</senderEmail><timestampReceived>2019-06-04 12:44:29-0400</timestampReceived><subject>[libvirt-users] blockcommit of domain not successfull</subject><body>

Hi,

i have several domains running on a 2-node HA-cluster.
Each night i create snapshots of the domains, after copying the consistent raw file \
to a CIFS server i blockcommit the changes into the raw files. That's running quite \
well. But recent the blockcommit didn't work for one domain:
I create a logfile from the whole procedure:
===============================================================
 ...
Sat Jun  1 03:05:24 CEST 2019
Target     Source
------------------------------------------------
vdb        /mnt/snap/severin.sn
hdc        -

/usr/bin/virsh blockcommit severin /mnt/snap/severin.sn --verbose --active --pivot
Block commit: [  0 %]Block commit: [ 15 %]Block commit: [ 28 %]Block commit: [ 35 \
%]Block commit: [ 43 %]Block commit: [ 53 %]Block commit: [ 63 %]Block commit: [ 73 \
%]Block commit: [ 82 %]Block commit: [ 89 %]Block commit: [ 98 %]Block commit: [100 \
                %]Target     Source
------------------------------------------------
vdb        /mnt/snap/severin.sn
 ...
==============================================================

The libvirtd-log says (it's UTC IIRC):
=============================================================
 ...
2019-05-31 20:31:34.481+0000: 4170: error : qemuMonitorIO:719 : internal error: End \
of file from qemu monitor 2019-06-01 01:05:32.233+0000: 4170: error : \
qemuMonitorIO:719 : internal error: End of file from qemu monitor 2019-06-01 \
01:05:43.804+0000: 22605: warning : qemuGetProcessInfo:1461 : cannot parse process \
status data 2019-06-01 01:05:43.848+0000: 22596: warning : qemuGetProcessInfo:1461 : \
cannot parse process status data 2019-06-01 01:06:11.438+0000: 26112: warning : \
qemuDomainObjBeginJobInternal:4865 : Cannot start job (destroy, none) for doma in \
severin; current job is (modify, none) owned by (5372 \
remoteDispatchDomainBlockJobAbort, 0 &lt;null&gt;) for (39s, 0s) 2019-06-01 \
01:06:11.438+0000: 26112: error : qemuDomainObjBeginJobInternal:4877 : Timed out \
during operation: cannot acquire state change lock (held by \
remoteDispatchDomainBlockJobAbort) 2019-06-01 01:06:13.976+0000: 5369: warning : \
qemuGetProcessInfo:1461 : cannot parse process status data 2019-06-01 \
01:06:14.028+0000: 22596: warning : qemuGetProcessInfo:1461 : cannot parse process \
status data 2019-06-01 01:06:44.165+0000: 5371: warning : qemuGetProcessInfo:1461 : \
cannot parse process status data 2019-06-01 01:06:44.218+0000: 22605: warning : \
qemuGetProcessInfo:1461 : cannot parse process status data 2019-06-01 \
01:07:14.343+0000: 5369: warning : qemuGetProcessInfo:1461 : cannot parse process \
status data 2019-06-01 01:07:14.387+0000: 22598: warning : qemuGetProcessInfo:1461 : \
cannot parse process status data 2019-06-01 01:07:44.495+0000: 22605: warning : \
                qemuGetProcessInfo:1461 : cannot parse process status data
 ...
===========================================================
and "cannot parse process status data" continuously until the end of the logfile.

The syslog from the domain itself didn't reveal anything, it just continues to run.
The libvirt log from the domains just says:
qemu-system-x86_64: block/mirror.c:864: mirror_run: Assertion \
`((&amp;bs-&gt;tracked_requests)-&gt;lh_first == ((void *)0))' failed.

Hosts are SLES 12 SP4 with libvirt-daemon-4.0.0-8.9.1.x86_64.


Bernd




-- 

Bernd Lentes 
Systemadministration 
Institut für Entwicklungsgenetik 
Gebäude 35.34 - Raum 208 
HelmholtzZentrum münchen 
bernd.lentes@helmholtz-muenchen.de 
phone: +49 89 3187 1241 
phone: +49 89 3187 3827 
fax: +49 89 3187 2294 
http://www.helmholtz-muenchen.de/idg 

wer Fehler macht kann etwas lernen 
wer nichts macht kann auch nichts lernen
 

Helmholtz Zentrum Muenchen
Deutsches Forschungszentrum fuer Gesundheit und Umwelt (GmbH)
Ingolstaedter Landstr. 1
85764 Neuherberg
www.helmholtz-muenchen.de
Stellv. Aufsichtsratsvorsitzender: MinDirig. Dr. Manfred Wolter
Geschaeftsfuehrung: Prof. Dr. med. Dr. h.c. Matthias Tschoep, Heinrich Bassler, \
                Kerstin Guenther
Registergericht: Amtsgericht Muenchen HRB 6466
USt-IdNr: DE 129521671


_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20190605072742</emailId><senderName>Peter Krempa</senderName><senderEmail>pkrempa@redhat.com</senderEmail><timestampReceived>2019-06-05 07:27:42-0400</timestampReceived><subject>Re: [libvirt-users] blockcommit of domain not successfull</subject><body>

[Attachment #2 (multipart/signed)]


On Tue, Jun 04, 2019 at 14:44:29 +0200, Lentes, Bernd wrote:
&gt; Hi,

Hi, 

&gt; 
&gt; i have several domains running on a 2-node HA-cluster.
&gt; Each night i create snapshots of the domains, after copying the consistent raw file \
&gt; to a CIFS server i blockcommit the changes into the raw files. That's running quite \
&gt; well. But recent the blockcommit didn't work for one domain:
&gt; I create a logfile from the whole procedure:
&gt; ===============================================================
&gt; ...
&gt; Sat Jun  1 03:05:24 CEST 2019
&gt; Target     Source
&gt; ------------------------------------------------
&gt; vdb        /mnt/snap/severin.sn
&gt; hdc        -
&gt; 
&gt; /usr/bin/virsh blockcommit severin /mnt/snap/severin.sn --verbose --active --pivot
&gt; Block commit: [  0 %]Block commit: [ 15 %]Block commit: [ 28 %]Block commit: [ 35 \
&gt; %]Block commit: [ 43 %]Block commit: [ 53 %]Block commit: [ 63 %]Block commit: [ 73 \
&gt; %]Block commit: [ 82 %]Block commit: [ 89 %]Block commit: [ 98 %]Block commit: [100 \
&gt;                 %]Target     Source
&gt; ------------------------------------------------
&gt; vdb        /mnt/snap/severin.sn
&gt; ...
&gt; ==============================================================
&gt; 
&gt; The libvirtd-log says (it's UTC IIRC):
&gt; =============================================================
&gt; ...
&gt; 2019-05-31 20:31:34.481+0000: 4170: error : qemuMonitorIO:719 : internal error: End \
&gt; of file from qemu monitor 2019-06-01 01:05:32.233+0000: 4170: error : \
&gt; qemuMonitorIO:719 : internal error: End of file from qemu monitor

This message is printed if qemu crashes for some reason and then closes
the monitor socket unexpectedly.

&gt; 2019-06-01 01:05:43.804+0000: 22605: warning : qemuGetProcessInfo:1461 : cannot \
&gt; parse process status data 2019-06-01 01:05:43.848+0000: 22596: warning : \
&gt; qemuGetProcessInfo:1461 : cannot parse process status data 2019-06-01 \
&gt; 01:06:11.438+0000: 26112: warning : qemuDomainObjBeginJobInternal:4865 : Cannot \
&gt; start job (destroy, none) for doma in severin; current job is (modify, none) owned \
&gt; by (5372 remoteDispatchDomainBlockJobAbort, 0 &lt;null&gt;) for (39s, 0s) 2019-06-01 \
&gt; 01:06:11.438+0000: 26112: error : qemuDomainObjBeginJobInternal:4877 : Timed out \
&gt; during operation: cannot acquire state change lock (held by \
&gt; remoteDispatchDomainBlockJobAbort)

So this means that the virDomainBlockJobAbort API which is also used for
--pivot got stuck for some time.

This is kind of strange if the VM crashed, there might also be a bug in
the synchronous block job handling, but it's hard to tell from this log.

&gt; 2019-06-01 01:06:13.976+0000: 5369: warning : qemuGetProcessInfo:1461 : cannot \
&gt; parse process status data 2019-06-01 01:06:14.028+0000: 22596: warning : \
&gt; qemuGetProcessInfo:1461 : cannot parse process status data 2019-06-01 \
&gt; 01:06:44.165+0000: 5371: warning : qemuGetProcessInfo:1461 : cannot parse process \
&gt; status data 2019-06-01 01:06:44.218+0000: 22605: warning : qemuGetProcessInfo:1461 \
&gt; : cannot parse process status data 2019-06-01 01:07:14.343+0000: 5369: warning : \
&gt; qemuGetProcessInfo:1461 : cannot parse process status data 2019-06-01 \
&gt; 01:07:14.387+0000: 22598: warning : qemuGetProcessInfo:1461 : cannot parse process \
&gt; status data 2019-06-01 01:07:44.495+0000: 22605: warning : qemuGetProcessInfo:1461 \
&gt;                 : cannot parse process status data
&gt; ...
&gt; ===========================================================
&gt; and "cannot parse process status data" continuously until the end of the logfile.
&gt; 
&gt; The syslog from the domain itself didn't reveal anything, it just continues to run.
&gt; The libvirt log from the domains just says:
&gt; qemu-system-x86_64: block/mirror.c:864: mirror_run: Assertion \
&gt; `((&amp;bs-&gt;tracked_requests)-&gt;lh_first == ((void *)0))' failed.

So that's interresting. Usually assertion failure in qemu leads to
calling abort() and thus the vm would have crashed. Didn't you HA
solution restart it?

At any rate it would be really beneficial if you could collect debug
logs for libvirtd which also contain the monitor interactions with qemu:

https://wiki.libvirt.org/page/DebugLogs

The qemu assertion failure above should ideally be reported to qemu, but
if you are able to reproduce the problem with libvirtd debug logs
enabled I can extract more useful info from there which the qemu project
would ask you anyways.


["signature.asc" (application/pgp-signature)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190605113349</emailId><senderName>"Lentes, Bernd"</senderName><senderEmail>bernd.lentes@helmholtz-muenchen.de</senderEmail><timestampReceived>2019-06-05 11:33:49-0400</timestampReceived><subject>Re: [libvirt-users] blockcommit of domain not successfull</subject><body>

Hi Peter,

thanks for your help.

----- On Jun 5, 2019, at 9:27 AM, Peter Krempa pkrempa@redhat.com wrote:


&gt; &gt; =============================================================
&gt; &gt; ...
&gt; &gt; 2019-05-31 20:31:34.481+0000: 4170: error : qemuMonitorIO:719 : internal error:
&gt; &gt; End of file from qemu monitor
&gt; &gt; 2019-06-01 01:05:32.233+0000: 4170: error : qemuMonitorIO:719 : internal error:
&gt; &gt; End of file from qemu monitor
&gt; 
&gt; This message is printed if qemu crashes for some reason and then closes
&gt; the monitor socket unexpectedly.
&gt; 
&gt; &gt; 2019-06-01 01:05:43.804+0000: 22605: warning : qemuGetProcessInfo:1461 : cannot
&gt; &gt; parse process status data
&gt; &gt; 2019-06-01 01:05:43.848+0000: 22596: warning : qemuGetProcessInfo:1461 : cannot
&gt; &gt; parse process status data
&gt; &gt; 2019-06-01 01:06:11.438+0000: 26112: warning :
&gt; &gt; qemuDomainObjBeginJobInternal:4865 : Cannot start job (destroy, none) for doma
&gt; &gt; in severin; current job is (modify, none) owned by (5372
&gt; &gt; remoteDispatchDomainBlockJobAbort, 0 &lt;null&gt;) for (39s, 0s)
&gt; &gt; 2019-06-01 01:06:11.438+0000: 26112: error : qemuDomainObjBeginJobInternal:4877
&gt; &gt; &gt; Timed out during operation: cannot acquire
&gt; &gt; state change lock (held by remoteDispatchDomainBlockJobAbort)
&gt; 
&gt; So this means that the virDomainBlockJobAbort API which is also used for
&gt; --pivot got stuck for some time.
&gt; 
&gt; This is kind of strange if the VM crashed, there might also be a bug in
&gt; the synchronous block job handling, but it's hard to tell from this log.

The VM didn't crash. It kept running.
See "last":
root     pts/49       ha-idg-2.scidom. Tue Jun  4 14:02 - 13:18  (23:16)
root     pts/47       pc60337.scidom.d Mon Jun  3 15:13   still logged in
reboot   system boot  2.6.4-52-smp     Wed May 15 20:19         (20+17:02)
reboot   system boot  2.6.4-52-smp     Fri Mar 15 17:38         (81+18:44)
reboot   system boot  2.6.4-52-smp     Wed Feb 27 20:29         (15+21:04)

&gt; &gt; The syslog from the domain itself didn't reveal anything, it just continues to
&gt; &gt; run.
&gt; &gt; The libvirt log from the domains just says:
&gt; &gt; qemu-system-x86_64: block/mirror.c:864: mirror_run: Assertion
&gt; &gt; `((&amp;bs-&gt;tracked_requests)-&gt;lh_first == ((void *)0))' failed.
&gt; 
&gt; So that's interresting. Usually assertion failure in qemu leads to
&gt; calling abort() and thus the vm would have crashed. Didn't you HA
&gt; solution restart it?

No. As said the VM didn't crash. It kept running.
 
&gt; At any rate it would be really beneficial if you could collect debug
&gt; logs for libvirtd which also contain the monitor interactions with qemu:
&gt; 
&gt; https://wiki.libvirt.org/page/DebugLogs
&gt; 
&gt; The qemu assertion failure above should ideally be reported to qemu, but
&gt; if you are able to reproduce the problem with libvirtd debug logs
&gt; enabled I can extract more useful info from there which the qemu project
&gt; would ask you anyways.

I can't reproduce it. It seems to happen accidentally. But i can collect the logs. Do \
they get very large ? I can contact you the next time it happen. Is that ok for you ?


Bernd
 

Helmholtz Zentrum Muenchen
Deutsches Forschungszentrum fuer Gesundheit und Umwelt (GmbH)
Ingolstaedter Landstr. 1
85764 Neuherberg
www.helmholtz-muenchen.de
Stellv. Aufsichtsratsvorsitzender: MinDirig. Dr. Manfred Wolter
Geschaeftsfuehrung: Prof. Dr. med. Dr. h.c. Matthias Tschoep, Heinrich Bassler, \
                Kerstin Guenther
Registergericht: Amtsgericht Muenchen HRB 6466
USt-IdNr: DE 129521671

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20190605144901</emailId><senderName>Peter Krempa</senderName><senderEmail>pkrempa@redhat.com</senderEmail><timestampReceived>2019-06-05 14:49:01-0400</timestampReceived><subject>Re: [libvirt-users] blockcommit of domain not successfull</subject><body>

[Attachment #2 (multipart/signed)]


On Wed, Jun 05, 2019 at 13:33:49 +0200, Lentes, Bernd wrote:
&gt; Hi Peter,
&gt; 
&gt; thanks for your help.
&gt; 
&gt; ----- On Jun 5, 2019, at 9:27 AM, Peter Krempa pkrempa@redhat.com wrote:

[...]

&gt; 
&gt; &gt; 
&gt; &gt; So that's interresting. Usually assertion failure in qemu leads to
&gt; &gt; calling abort() and thus the vm would have crashed. Didn't you HA
&gt; &gt; solution restart it?
&gt; 
&gt; No. As said the VM didn't crash. It kept running.

That's interresting. I hope you manage to reproduce it then.

&gt; 
&gt; &gt; At any rate it would be really beneficial if you could collect debug
&gt; &gt; logs for libvirtd which also contain the monitor interactions with qemu:
&gt; &gt; 
&gt; &gt; https://wiki.libvirt.org/page/DebugLogs
&gt; &gt; 
&gt; &gt; The qemu assertion failure above should ideally be reported to qemu, but
&gt; &gt; if you are able to reproduce the problem with libvirtd debug logs
&gt; &gt; enabled I can extract more useful info from there which the qemu project
&gt; &gt; would ask you anyways.
&gt; 
&gt; I can't reproduce it. It seems to happen accidentally. But i can collect the logs. \
&gt; Do they get very large ? I can contact you the next time it happen. Is that ok for \
&gt; you ?

Unfortunately they do get very large if there's some monitoring
gathering stats through libvirt, but it's okay to nuke them prior
to attempting the block commit, or daily or so.

Please do contact me if you gather anything interresting.


["signature.asc" (application/pgp-signature)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190605160206</emailId><senderName>"Lentes, Bernd"</senderName><senderEmail>bernd.lentes@helmholtz-muenchen.de</senderEmail><timestampReceived>2019-06-05 16:02:06-0400</timestampReceived><subject>Re: [libvirt-users] blockcommit of domain not successfull</subject><body>



----- On Jun 5, 2019, at 4:49 PM, Peter Krempa pkrempa@redhat.com wrote:

&gt; On Wed, Jun 05, 2019 at 13:33:49 +0200, Lentes, Bernd wrote:
&gt;&gt; Hi Peter,
&gt;&gt; 
&gt;&gt; thanks for your help.
&gt;&gt; 
&gt;&gt; ----- On Jun 5, 2019, at 9:27 AM, Peter Krempa pkrempa@redhat.com wrote:
&gt; 
&gt; [...]
&gt; 
&gt;&gt; 
&gt;&gt; &gt; 
&gt;&gt; &gt; So that's interresting. Usually assertion failure in qemu leads to
&gt;&gt; &gt; calling abort() and thus the vm would have crashed. Didn't you HA
&gt;&gt; &gt; solution restart it?
&gt;&gt; 
&gt;&gt; No. As said the VM didn't crash. It kept running.
&gt; 
&gt; That's interresting. I hope you manage to reproduce it then.
&gt; 

&gt;&gt; I can't reproduce it. It seems to happen accidentally. But i can collect the
&gt;&gt; logs. Do they get very large ?
&gt;&gt; I can contact you the next time it happen. Is that ok for you ?
&gt; 
&gt; Unfortunately they do get very large if there's some monitoring
&gt; gathering stats through libvirt, but it's okay to nuke them prior
&gt; to attempting the block commit, or daily or so.
&gt; 
&gt; Please do contact me if you gather anything interresting.

Hi,

i followed https://wiki.libvirt.org/page/DebugLogs.
Where do i have to set LIBVIRT_LOG_OUTPUTS="1:file:/tmp/libvirt_client.log" ?
Also in /etc/libvirt/libvirtd.conf ?

Bernd
 

Helmholtz Zentrum Muenchen
Deutsches Forschungszentrum fuer Gesundheit und Umwelt (GmbH)
Ingolstaedter Landstr. 1
85764 Neuherberg
www.helmholtz-muenchen.de
Stellv. Aufsichtsratsvorsitzender: MinDirig. Dr. Manfred Wolter
Geschaeftsfuehrung: Prof. Dr. med. Dr. h.c. Matthias Tschoep, Heinrich Bassler, Kerstin Guenther
Registergericht: Amtsgericht Muenchen HRB 6466
USt-IdNr: DE 129521671

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190606071707</emailId><senderName>Peter Krempa</senderName><senderEmail>pkrempa@redhat.com</senderEmail><timestampReceived>2019-06-06 07:17:07-0400</timestampReceived><subject>Re: [libvirt-users] blockcommit of domain not successfull</subject><body>

[Attachment #2 (multipart/signed)]


On Wed, Jun 05, 2019 at 18:02:06 +0200, Lentes, Bernd wrote:

[...]

&gt; Hi,
&gt; 
&gt; i followed https://wiki.libvirt.org/page/DebugLogs.
&gt; Where do i have to set LIBVIRT_LOG_OUTPUTS="1:file:/tmp/libvirt_client.log" ?
&gt; Also in /etc/libvirt/libvirtd.conf ?

No, that's an environment variable if you want to debug the client, but
that's not necessary in this case. Only the daemon logs are
interresting.

["signature.asc" (application/pgp-signature)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190611171905</emailId><senderName>"Lentes, Bernd"</senderName><senderEmail>bernd.lentes@helmholtz-muenchen.de</senderEmail><timestampReceived>2019-06-11 17:19:05-0400</timestampReceived><subject>Re: [libvirt-users] blockcommit of domain not successfull</subject><body>


----- On Jun 5, 2019, at 4:49 PM, Peter Krempa pkrempa@redhat.com wrote:

&gt; On Wed, Jun 05, 2019 at 13:33:49 +0200, Lentes, Bernd wrote:
&gt; &gt; Hi Peter,
&gt; &gt; 
&gt; &gt; thanks for your help.
&gt; &gt; 
&gt; &gt; ----- On Jun 5, 2019, at 9:27 AM, Peter Krempa pkrempa@redhat.com wrote:
&gt; 
&gt; [...]
&gt; 
&gt; &gt; 
&gt; &gt; &gt; 
&gt; &gt; &gt; So that's interresting. Usually assertion failure in qemu leads to
&gt; &gt; &gt; calling abort() and thus the vm would have crashed. Didn't you HA
&gt; &gt; &gt; solution restart it?
&gt; &gt; 
&gt; &gt; No. As said the VM didn't crash. It kept running.
&gt; 
&gt; That's interresting. I hope you manage to reproduce it then.
&gt; 
&gt; &gt; 
&gt; &gt; &gt; At any rate it would be really beneficial if you could collect debug
&gt; &gt; &gt; logs for libvirtd which also contain the monitor interactions with qemu:
&gt; &gt; &gt; 
&gt; &gt; &gt; https://wiki.libvirt.org/page/DebugLogs
&gt; &gt; &gt; 
&gt; &gt; &gt; The qemu assertion failure above should ideally be reported to qemu, but
&gt; &gt; &gt; if you are able to reproduce the problem with libvirtd debug logs
&gt; &gt; &gt; enabled I can extract more useful info from there which the qemu project
&gt; &gt; &gt; would ask you anyways.
&gt; &gt; 
&gt; &gt; I can't reproduce it. It seems to happen accidentally. But i can collect the
&gt; &gt; logs. Do they get very large ?
&gt; &gt; I can contact you the next time it happen. Is that ok for you ?
&gt; 
&gt; Unfortunately they do get very large if there's some monitoring
&gt; gathering stats through libvirt, but it's okay to nuke them prior
&gt; to attempting the block commit, or daily or so.
&gt; 
&gt; Please do contact me if you gather anything interresting.

Hi,

it happened again.
Following the log of my script it started on 8th of june at 5:59:09 (UTC+2) to \
blockcommit the domain. These are the related lines in libvirtd.log:
===================================================
2019-06-07 20:30:57.170+0000: 30299: error : qemuMonitorIO:719 : internal error: End \
of file from qemu monitor 2019-06-08 03:59:17.690+0000: 30299: error : \
qemuMonitorIO:719 : internal error: End of file from qemu monitor 2019-06-08 \
03:59:26.145+0000: 30300: warning : qemuGetProcessInfo:1461 : cannot parse process \
status data 2019-06-08 03:59:26.191+0000: 30303: warning : qemuGetProcessInfo:1461 : \
cannot parse process status data 2019-06-08 03:59:56.095+0000: 27956: warning : \
qemuDomainObjBeginJobInternal:4865 : Cannot start job (destroy, none) for domain \
severin; current job is (modify, none) owned by (13061 \
remoteDispatchDomainBlockJobAbort, 0 &lt;null&gt;) for (38s,  0s)
2019-06-08 03:59:56.095+0000: 27956: error : qemuDomainObjBeginJobInternal:4877 : \
Timed out during operation: cannot acquire state change lock (held by \
remoteDispatchDomainBlockJobAbort) 2019-06-08 03:59:56.325+0000: 13060: warning : \
qemuGetProcessInfo:1461 : cannot parse process status data 2019-06-08 \
03:59:56.372+0000: 30304: warning : qemuGetProcessInfo:1461 : cannot parse process \
status data 2019-06-08 04:00:26.503+0000: 13060: warning : qemuGetProcessInfo:1461 : \
cannot parse process status data ====================================================

Since then the script is stuck.

Thanks for your help.


Bernd
 

Helmholtz Zentrum Muenchen
Deutsches Forschungszentrum fuer Gesundheit und Umwelt (GmbH)
Ingolstaedter Landstr. 1
85764 Neuherberg
www.helmholtz-muenchen.de
Aufsichtsratsvorsitzende: MinDir'in Prof. Dr. Veronika von Messling
Geschaeftsfuehrung: Prof. Dr. med. Dr. h.c. Matthias Tschoep, Heinrich Bassler, \
                Kerstin Guenther
Registergericht: Amtsgericht Muenchen HRB 6466
USt-IdNr: DE 129521671

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20190613075658</emailId><senderName>Peter Krempa</senderName><senderEmail>pkrempa@redhat.com</senderEmail><timestampReceived>2019-06-13 07:56:58-0400</timestampReceived><subject>Re: [libvirt-users] blockcommit of domain not successfull</subject><body>

[Attachment #2 (multipart/signed)]


On Tue, Jun 11, 2019 at 19:19:05 +0200, Lentes, Bernd wrote:

[...]

&gt; 
&gt; Hi,

Hi,

&gt; 
&gt; it happened again.
&gt; Following the log of my script it started on 8th of june at 5:59:09 (UTC+2) to \
&gt; blockcommit the domain. These are the related lines in libvirtd.log:
&gt; ===================================================

Thanks for comming back to me with the information.

Unfortunately this is not a full debug log but I can try to tell you
what I see here:

&gt; 2019-06-07 20:30:57.170+0000: 30299: error : qemuMonitorIO:719 : internal error: \
&gt; End of file from qemu monitor 2019-06-08 03:59:17.690+0000: 30299: error : \
&gt; qemuMonitorIO:719 : internal error: End of file from qemu monitor

So this looks like qemu crashed. Or at least it's the usual symptom we
get. Is there anything in /var/log/libvirt/qemu/$VMNAME.log?

&gt; 2019-06-08 03:59:26.145+0000: 30300: warning : qemuGetProcessInfo:1461 : cannot \
&gt; parse process status data 2019-06-08 03:59:26.191+0000: 30303: warning : \
&gt; qemuGetProcessInfo:1461 : cannot parse process status data 2019-06-08 \
&gt; 03:59:56.095+0000: 27956: warning : qemuDomainObjBeginJobInternal:4865 : Cannot \
&gt; start job (destroy, none) for domain severin; current job is (modify, none) owned \
&gt; by (13061 remoteDispatchDomainBlockJobAbort, 0 &lt;null&gt;) for (38s, 0s)

And this looks to me as if the Abort job can't be interrupted properly
while waiting synchronously for the job to finish. This seems to be the
problem. If the VM indeed crashed there's a problem in job waiting
apparently.

I'd still really like to have debug logs in this case to really see what
happened.


["signature.asc" (application/pgp-signature)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190613095916</emailId><senderName>Varsha Verma</senderName><senderEmail>varsha.verma.eee15@itbhu.ac.in</senderEmail><timestampReceived>2019-06-13 09:59:16-0400</timestampReceived><subject>[libvirt-users] Libvirt API for getting disk capacity from VM XML</subject><body>

[Attachment #2 (multipart/alternative)]


Hello everyone,
I am doing an outreachy internship at Openstack Ironic. In the sushy-tools
project, we are using libvirt VMs to simulate bare metal machines for
testing purposes.

In the XML description of a domain, there are a bunch of disk elements
giving information about the various storage devices attached to the
domain. Is there some way to get the size/capacity of those disks using the
libvirt API?

-- 

*Regards,*

*Varsha Verma*

*Fourth Year Undergraduate*

*Department of Electrical Engineering*

*IIT-BHU, Varanasi*

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;&lt;div&gt;Hello everyone,&lt;/div&gt;&lt;div&gt;I am doing an outreachy internship at \
Openstack Ironic. In the sushy-tools project, we are using libvirt VMs to simulate \
bare metal machines for testing purposes. &lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;In the XML \
description of a domain, there are a bunch of disk elements giving information about \
the various storage devices attached to the domain. Is there some way to get the \
size/capacity of those disks using the libvirt API?&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;-- &lt;br&gt;&lt;div \
dir="ltr" class="gmail_signature" data-smartmail="gmail_signature"&gt;&lt;div \
dir="ltr"&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;i&gt;&lt;span \
style="background-color:rgb(153,153,153)"&gt;&lt;/span&gt;&lt;span \
style="color:rgb(153,153,153)"&gt;Regards,&lt;br&gt;&lt;/span&gt;&lt;/i&gt;&lt;/div&gt;&lt;span \
style="color:rgb(153,153,153)"&gt;&lt;i&gt;Varsha Verma&lt;br&gt;&lt;/i&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span \
style="color:rgb(153,153,153)"&gt;&lt;i&gt;Fourth Year Undergraduate&lt;br&gt;&lt;/i&gt;&lt;/span&gt;&lt;/div&gt;&lt;span \
style="color:rgb(153,153,153)"&gt;&lt;i&gt;Department of Electrical \
Engineering&lt;br&gt;&lt;/i&gt;&lt;/span&gt;&lt;/div&gt;&lt;i&gt;&lt;font color="#999999"&gt;IIT-BHU, \
Varanasi&lt;br&gt;&lt;/font&gt;&lt;/i&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190619121810</emailId><senderName>Saso Tavcar</senderName><senderEmail>saso.tavcar@dspot.si</senderEmail><timestampReceived>2019-06-19 12:18:10-0400</timestampReceived><subject>[libvirt-users] libvirtd does not update VM .xml configuration on filesystem after virsh blockcommit</subject><body>

Hi,

Recently We've upgraded some KVM hosts from Fedora 29 to Fedora 30 and
now experience broken VM configurations on filesystem after virsh blockcommit.

Commands "virsh dumpxml ..." and "virsh dumpxml --inactive ..." is showing diffrent \
configuration than the one on filesystem. In case of restart libvirtd or system \
reboot, there are broken VM xml configurations on filesystem.

Everything is OK on Fedora 29 KVM hosts!


0. XML configurations before snapshot is taken (all good, nothing found)

[root@server1 ~]# cat /etc/libvirt/qemu/somedomain.com.ncloud.xml| grep BACK
[root@server1 ~]# cat /etc/libvirt/qemu/somedomain.com.ncloud.xml| grep backingStore
[root@server1 ~]# /usr/bin/virsh --quiet  dumpxml somedomain.com.ncloud|grep BACK
[root@server1 ~]# /usr/bin/virsh --quiet  dumpxml somedomain.com.ncloud|grep \
backingStore [root@server1 ~]# /usr/bin/virsh --quiet  dumpxml --inactive \
somedomain.com.ncloud|grep BACK [root@server1 ~]# /usr/bin/virsh --quiet  dumpxml \
--inactive somedomain.com.ncloud|grep backingStore



1. When VM snapshot is taken with (all OK)

/usr/bin/virsh --quiet  snapshot-create-as --domain somedomain.com.ncloud ....

there is a change of configuration, active, inactive and filesystem:

- active (virsh dumpxml)

[root@server1 ~]# /usr/bin/virsh --quiet  dumpxml somedomain.com.ncloud|grep BACK
      &lt;source file='/Virtualization/linux/somedomain.com/somedomain.com.ncloud.qcow2-BACKUPING_NOW'/&gt;
                
      &lt;source file='/Virtualization/linux/somedomain.com/somedomain.com.ncloud-swap.qcow2-BACKUPING_NOW'/&gt;
                
      &lt;source file='/Virtualization/linux/somedomain.com/somedomain.com.ncloud-data1.qcow2-BACKUPING_NOW'/&gt;
                
      &lt;source file='/Virtualization/linux/somedomain.com/somedomain.com.ncloud-data2.qcow2-BACKUPING_NOW'/&gt;


[root@server1 ~]# /usr/bin/virsh --quiet  dumpxml somedomain.com.ncloud|grep \
backingStore  &lt;backingStore type='file'&gt;
      &lt;/backingStore&gt;
      &lt;backingStore type='file'&gt;
      &lt;/backingStore&gt;
      &lt;backingStore type='file'&gt;
      &lt;/backingStore&gt;
      &lt;backingStore type='file'&gt;
      &lt;/backingStore&gt;

- inactive (virsh dumpxml --inactive)

[root@server1 ~]# /usr/bin/virsh --quiet  dumpxml --inactive \
                somedomain.com.ncloud|grep BACK
      &lt;source file='/Virtualization/linux/somedomain.com/somedomain.com.ncloud.qcow2-BACKUPING_NOW'/&gt;
                
      &lt;source file='/Virtualization/linux/somedomain.com/somedomain.com.ncloud-swap.qcow2-BACKUPING_NOW'/&gt;
                
      &lt;source file='/Virtualization/linux/somedomain.com/somedomain.com.ncloud-data1.qcow2-BACKUPING_NOW'/&gt;
                
      &lt;source file='/Virtualization/linux/somedomain.com/somedomain.com.ncloud-data2.qcow2-BACKUPING_NOW'/&gt;


[root@server1 ~]# /usr/bin/virsh --quiet  dumpxml --inactive \
somedomain.com.ncloud|grep backingStore  &lt;backingStore type='file'&gt;
      &lt;/backingStore&gt;
      &lt;backingStore type='file'&gt;
      &lt;/backingStore&gt;
      &lt;backingStore type='file'&gt;
      &lt;/backingStore&gt;
      &lt;backingStore type='file'&gt;
      &lt;/backingStore&gt;


- XML configuration on filesystem has changed

[root@server1 ~]# ls -al /etc/libvirt/qemu/somedomain.com.ncloud.xml
-rw-------. 1 root root 6260 Jun 18 23:00 /etc/libvirt/qemu/somedomain.com.ncloud.xml

[root@server1 ~]# cat /etc/libvirt/qemu/somedomain.com.ncloud.xml |grep BACK
      &lt;source file='/Virtualization/linux/somedomain.com/somedomain.com.ncloud.qcow2-BACKUPING_NOW'/&gt;
                
      &lt;source file='/Virtualization/linux/somedomain.com/somedomain.com.ncloud-swap.qcow2-BACKUPING_NOW'/&gt;
                
      &lt;source file='/Virtualization/linux/somedomain.com/somedomain.com.ncloud-data1.qcow2-BACKUPING_NOW'/&gt;
                
      &lt;source file='/Virtualization/linux/somedomain.com/somedomain.com.ncloud-data2.qcow2-BACKUPING_NOW'/&gt;


[root@server1 ~]# cat /etc/libvirt/qemu/somedomain.com.ncloud.xml |grep backingStore
      &lt;backingStore type='file'&gt;
      &lt;/backingStore&gt;
      &lt;backingStore type='file'&gt;
      &lt;/backingStore&gt;
      &lt;backingStore type='file'&gt;
      &lt;/backingStore&gt;
      &lt;backingStore type='file'&gt;
      &lt;/backingStore&gt;



2. When VM backup is done, data merged with virsh backcommit ..." and snapshot \
deleted (NOT OK!!!)

...
/usr/bin/virsh --quiet  blockcommit somedomain.com.ncloud sdd --active --pivot
/usr/bin/virsh --quiet  snapshot-delete --domain somedomain.com.ncloud \
somedomain.com.ncloud-SNAPSHOT --metadata


there is a following state of VM configurations:


- active (virsh dumpxml),

[root@server1 ~]# /usr/bin/virsh --quiet  dumpxml  somedomain.com.ncloud|grep BACK \
;;; OK

[root@server1 ~]# /usr/bin/virsh --quiet  dumpxml  somedomain.com.ncloud|grep \
backingStore ;;; why is there empty backingStore left ???  &lt;backingStore/&gt;
      &lt;backingStore/&gt;
      &lt;backingStore/&gt;
      &lt;backingStore/&gt;

- inactive

[root@server1 qemu]# virsh dumpxml --inactive somedomain.com.ncloud |grep BACK        \
;;; OK [root@server1 qemu]# virsh dumpxml --inactive somedomain.com.ncloud |grep \
backingStore  ;;; OK


- XML on filesystem (.xml file on filesystem has not changed/reverted since snapshot \
has been taken - NOT OK!!!!, should be cleared of snapshot source file and \
backingStore)

[root@server1 ~]# ls -al /etc/libvirt/qemu/somedomain.com.ncloud.xml
-rw-------. 1 root root 6260 Jun 18 23:00 /etc/libvirt/qemu/somedomain.com.ncloud.xml

[root@server1 qemu]# cat somedomain.com.ns2.xml |grep BACK
      &lt;source file='/Virtualization/linux/somedomain.com/somedomain.com.ns2.qcow2-BACKUPING_NOW'/&gt;


[root@server1 qemu]# cat somedomain.com.ns2.xml |grep backingStore
      &lt;backingStore type='file' index='1'&gt;
      &lt;/backingStore&gt;

###################################################################################### \
########################################################################################


- Fedora 29 has libvirt 4.7.0 and qemu 3.0.1:

[root@solaris1 ~]# rpm -qa |grep libvirt-daemon-kvm
libvirt-daemon-kvm-4.7.0-3.fc29.x86_64

[root@solaris1 ~]# rpm -qa |grep qemu-system-x86
qemu-system-x86-core-3.0.1-3.fc29.x86_64
qemu-system-x86-3.0.1-3.fc29.x86_64

- Fedora 30 has libvirt 5.1.0 and qemu 3.1.0:

[root@server1 ~]# rpm -qa |grep libvirt-daemon-kvm
libvirt-daemon-kvm-5.1.0-8.fc30.x86_64

[root@server1 ~]# rpm -qa |grep qemu-system-x86
qemu-system-x86-3.1.0-8.fc30.x86_64
qemu-system-x86-core-3.1.0-8.fc30.x86_64


For every VM from "virsh list" we do following steps (in script) for VM backup:

/usr/bin/virsh --quiet  domblklist somedomain.com.ncloud
/usr/bin/virsh --quiet  dumpxml --inactive somedomain.com.ncloud &gt; \
/Backuping/VMs/Daily/somedomain.com.ncloud.xml

/usr/bin/virsh --quiet  snapshot-create-as --domain somedomain.com.ncloud \
somedomain.com.ncloud-SNAPSHOT  --diskspec \
sda,file=/Virtualization/linux/somedomain.com/somedomain.com.ncloud.qcow2-BACKUPING_NOW \
--diskspec sdb,file=/Virtualization/linux/somedomain.com/somedomain.com.ncloud-swap.qcow2-BACKUPING_NOW \
--diskspec sdc,file=/Virtualization/linux/somedomain.com/somedomain.com.ncloud-data1.qcow2-BACKUPING_NOW \
--diskspec sdd,file=/Virtualization/linux/somedomain.com/somedomain.com.ncloud-data2.qcow2-BACKUPING_NOW \
--disk-only --atomic --quiesce

/usr/bin/virsh --quiet  snapshot-list somedomain.com.ncloud 

/usr/bin/scp -p server1.somedomain.us:/Virtualization/linux/somedomain.com/somedomain.com.ncloud.qcow2 \
                somedomain.com.ncloud.qcow2
/usr/bin/scp -p server1.somedomain.us:/Virtualization/linux/somedomain.com/somedomain.com.ncloud-swap.qcow2 \
                somedomain.com.ncloud-swap.qcow2
/usr/bin/scp -p server1.somedomain.us:/Virtualization/linux/somedomain.com/somedomain.com.ncloud-data1.qcow2 \
                somedomain.com.ncloud-data1.qcow2
/usr/bin/scp -p server1.somedomain.us:/Virtualization/linux/somedomain.com/somedomain.com.ncloud-data2.qcow2 \
somedomain.com.ncloud-data2.qcow2

/usr/bin/virsh --quiet  blockcommit somedomain.com.ncloud sda --active --pivot
/usr/bin/virsh --quiet  blockcommit somedomain.com.ncloud sdb --active --pivot
/usr/bin/virsh --quiet  blockcommit somedomain.com.ncloud sdc --active --pivot
/usr/bin/virsh --quiet  blockcommit somedomain.com.ncloud sdd --active --pivot
/usr/bin/virsh --quiet  snapshot-delete --domain somedomain.com.ncloud \
somedomain.com.ncloud-SNAPSHOT --metadata

/usr/bin/ssh server1.somedomain.us "/usr/bin/rm \
                /Virtualization/linux/somedomain.com/somedomain.com.ncloud.qcow2-BACKUPING_NOW"
                
/usr/bin/ssh server1.somedomain.us "/usr/bin/rm \
                /Virtualization/linux/somedomain.com/somedomain.com.ncloud-swap.qcow2-BACKUPING_NOW"
                
/usr/bin/ssh server1.somedomain.us "/usr/bin/rm \
                /Virtualization/linux/somedomain.com/somedomain.com.ncloud-data1.qcow2-BACKUPING_NOW"
                
/usr/bin/ssh server1.somedomain.us "/usr/bin/rm \
/Virtualization/linux/somedomain.com/somedomain.com.ncloud-data2.qcow2-BACKUPING_NOW"

/usr/bin/pigz --best --rsyncable somedomain.com.ncloud.qcow2
/usr/bin/pigz --best --rsyncable somedomain.com.ncloud-swap.qcow2
/usr/bin/pigz --best --rsyncable somedomain.com.ncloud-data1.qcow2
/usr/bin/pigz --best --rsyncable somedomain.com.ncloud-data2.qcow2


There is no error on script (commands) execution:


[root@server1 ~]# /Backuping/bin/simple_KVM_backup.pl --depth 7 --path Daily \
--hosting_server server1.somedomain.us

###Backuping VM somedomain.com.ncloud:

+ Moving somedomain.com.ncloud.xml.06 to somedomain.com.ncloud.xml.07.
+ Moving somedomain.com.ncloud.qcow2.gz.06 to somedomain.com.ncloud.qcow2.gz.07.
...

+ Disk snapshot somedomain.com.ncloud-SNAPSHOT for somedomain.com.ncloud ... Domain \
snapshot somedomain.com.ncloud-SNAPSHOT created  Name                       Creation \
                Time               State
-----------------------------------------------------------------------
 somedomain.com.ncloud-SNAPSHOT   2019-06-18 23:00:04 +0200   disk-snapshot

Done!

+ Time scp start : 2019-06-18 23:00:05
somedomain.com.ncloud.qcow2                                                           \
100%   20GB 401.3MB/s   00:51     Done!
somedomain.com.ncloud-swap.qcow2                                                      \
100% 4097MB 483.5MB/s   00:08     Done!
somedomain.com.ncloud-data1.qcow2                                                     \
100%  100GB 400.7MB/s   04:15     Done!
somedomain.com.ncloud-data2.qcow2                                                     \
100%  100GB 440.6MB/s   03:52     Done!
+ Time scp end   : 2019-06-18 23:09:14

+ Time blockcommit start : 2019-06-18 23:09:14
Successfully pivoted

Successfully pivoted

Successfully pivoted

Successfully pivoted

+ Time blockcommit end   : 2019-06-18 23:09:16

+ Snapshot delete ... Domain snapshot somedomain.com.ncloud-SNAPSHOT deleted

Done!
+ Delete snapshot files ... Done!

+ Time compress start : 2019-06-18 23:09:17


Regards,
saso

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20190627105756</emailId><senderName>Tanmoy Sinha</senderName><senderEmail>tanmoy.sinha@gmail.com</senderEmail><timestampReceived>2019-06-27 10:57:56-0400</timestampReceived><subject>[libvirt-users] mkfs fails on qemu-nbd device</subject><body>

[Attachment #2 (multipart/alternative)]


Hi All,

I am unable to figure out the issue here, when I try to create a filesystem
(ext4) on a virtual disk using qemu-nbd. This happens intermittently.

Following is the sequence of commands:-

$&gt; qemu-img create -f qcow2 test.qcow2 30G


$&gt; qemu-nbd --connect=/dev/nbd0 test.qcow2


$&gt; *mkfs.ext4 /dev/nbd0*
* mkfs.ext4: Device size reported to be zero.  Invalid partition specified,
or*
*Thu Jun 13 14:44:24 2019 partition table wasn't reread after running
fdisk, due to*
*Thu Jun 13 14:44:24 2019 a modified partition being busy and in use.  You
may need to reboot*
*Thu Jun 13 14:44:24 2019 to re-read your partition table.*


Following is the version details:

root@localhost:~# qemu-img --version

qemu-img version 2.8.1(Debian 1:2.8+dfsg-6+deb9u7)

Copyright (c) 2003-2016 Fabrice Bellard and the QEMU Project developers


root@localhost:~# qemu-nbd --version

qemu-nbd version 0.0.1

Written by Anthony Liguori.


Copyright (C) 2006 Anthony Liguori &lt;anthony@codemonkey.ws&gt;.

This is free software; see the source for copying conditions.  There is NO

warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.


root@localhost:~# uname -a

Linux localhost 4.9.0-9-amd64 #1 SMP Debian 4.9.168-1+deb9u2 (2019-05-13)
x86_64 GNU/Linux

Regards
Tanmoy Sinha

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;&lt;div&gt;Hi All,  &lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I am unable to figure out the \
issue here, when I try to create a filesystem (ext4) on a virtual disk using \
qemu-nbd. This happens intermittently.  &lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Following is the \
sequence of commands:-  &lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;





&lt;p class="gmail-p1" style="margin:0px;font-variant-numeric:normal;font-variant-east-as \
ian:normal;font-stretch:normal;font-size:11px;line-height:normal;font-family:Menlo;color:rgb(180,36,25)"&gt;&lt;span \
class="gmail-s1" style="font-variant-ligatures:no-common-ligatures"&gt;$&gt; qemu-img \
create -f qcow2 test.qcow2 30G&lt;/span&gt;&lt;/p&gt;&lt;p class="gmail-p1" \
style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stre \
tch:normal;font-size:11px;line-height:normal;font-family:Menlo;color:rgb(180,36,25)"&gt;&lt;span \
class="gmail-s1" style="font-variant-ligatures:no-common-ligatures"&gt;&lt;br&gt;&lt;/span&gt;&lt;/p&gt;&lt;p \
class="gmail-p1" style="margin:0px;font-variant-numeric:normal;font-variant-east-asian \
:normal;font-stretch:normal;font-size:11px;line-height:normal;font-family:Menlo;color:rgb(180,36,25)"&gt;&lt;span \
style="font-variant-ligatures:no-common-ligatures"&gt;$&gt; qemu-nbd --connect=/dev/nbd0 \
test.qcow2&lt;/span&gt;&lt;br&gt;&lt;/p&gt;&lt;p class="gmail-p1" \
style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stre \
tch:normal;font-size:11px;line-height:normal;font-family:Menlo;color:rgb(180,36,25)"&gt;&lt;span \
style="font-variant-ligatures:no-common-ligatures"&gt;&lt;br&gt;&lt;/span&gt;&lt;/p&gt;&lt;p class="gmail-p1" \
style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stre \
tch:normal;font-size:11px;line-height:normal;font-family:Menlo;color:rgb(180,36,25)"&gt;&lt;span \
style="font-variant-ligatures:no-common-ligatures"&gt;$&gt;  &lt;/span&gt;&lt;span \
style="color:rgb(0,0,0)"&gt;&lt;b&gt;mkfs.ext4 /dev/nbd0&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;&lt;div class="gmail-" \
style="color:rgb(0,0,0);margin:0px;font-stretch:normal;font-size:11px;line-height:normal;font-family:Menlo"&gt;&lt;span \
class="gmail-" style="font-variant-ligatures:no-common-ligatures"&gt;&lt;b&gt;&lt;span \
class="gmail-Apple-converted-space"&gt;  &lt;/span&gt;mkfs.ext4:&lt;span class="gmail-"&gt;&lt;span \
class="gmail-Apple-converted-space"&gt;  &lt;/span&gt;Device size reported to be zero.   \
Invalid partition specified, or&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class="gmail-" \
style="color:rgb(0,0,0);margin:0px;font-stretch:normal;font-size:11px;line-height:normal;font-family:Menlo"&gt;&lt;span \
class="gmail-" style="font-variant-ligatures:no-common-ligatures"&gt;&lt;b \
class="gmail-"&gt;Thu Jun 13 14:44:24 2019 partition table wasn't reread after \
running fdisk, due to&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class="gmail-" \
style="color:rgb(0,0,0);margin:0px;font-stretch:normal;font-size:11px;line-height:normal;font-family:Menlo"&gt;&lt;span \
class="gmail-" style="font-variant-ligatures:no-common-ligatures"&gt;&lt;b \
class="gmail-"&gt;Thu Jun 13 14:44:24 2019 a modified partition being busy and in use.   \
You may need to reboot&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class="gmail-" \
style="color:rgb(0,0,0);margin:0px;font-stretch:normal;font-size:11px;line-height:normal;font-family:Menlo"&gt;&lt;span \
class="gmail-" style="font-variant-ligatures:no-common-ligatures"&gt;&lt;b \
class="gmail-"&gt;Thu Jun 13 14:44:24 2019 to re-read your partition \
table.&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Following is the \
version details:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;





&lt;p class="gmail-p1" style="margin:0px;font-variant-numeric:normal;font-variant-east-as \
ian:normal;font-stretch:normal;font-size:11px;line-height:normal;font-family:Menlo;color:rgb(0,0,0)"&gt;&lt;span \
class="gmail-s1" style="font-variant-ligatures:no-common-ligatures"&gt;root@localhost:~# \
qemu-img --version&lt;/span&gt;&lt;/p&gt; &lt;p class="gmail-p1" \
style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stre \
tch:normal;font-size:11px;line-height:normal;font-family:Menlo;color:rgb(0,0,0)"&gt;&lt;span \
class="gmail-s1" style="font-variant-ligatures:no-common-ligatures"&gt;qemu-img version \
2.8.1(Debian 1:2.8+dfsg-6+deb9u7)&lt;/span&gt;&lt;/p&gt; &lt;p class="gmail-p1" \
style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stre \
tch:normal;font-size:11px;line-height:normal;font-family:Menlo;color:rgb(0,0,0)"&gt;&lt;span \
class="gmail-s1" style="font-variant-ligatures:no-common-ligatures"&gt;Copyright (c) \
2003-2016 Fabrice Bellard and the QEMU Project developers&lt;/span&gt;&lt;/p&gt;&lt;p \
class="gmail-p1" style="margin:0px;font-variant-numeric:normal;font-variant-east-asian \
:normal;font-stretch:normal;font-size:11px;line-height:normal;font-family:Menlo;color:rgb(0,0,0)"&gt;&lt;span \
class="gmail-s1" style="font-variant-ligatures:no-common-ligatures"&gt;&lt;br&gt;&lt;/span&gt;&lt;/p&gt; \
&lt;p class="gmail-p1" style="margin:0px;font-variant-numeric:normal;font-variant-east-as \
ian:normal;font-stretch:normal;font-size:11px;line-height:normal;font-family:Menlo;color:rgb(0,0,0)"&gt;&lt;span \
class="gmail-s1" style="font-variant-ligatures:no-common-ligatures"&gt;root@localhost:~# \
qemu-nbd --version&lt;/span&gt;&lt;/p&gt; &lt;p class="gmail-p1" \
style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stre \
tch:normal;font-size:11px;line-height:normal;font-family:Menlo;color:rgb(0,0,0)"&gt;&lt;span \
class="gmail-s1" style="font-variant-ligatures:no-common-ligatures"&gt;qemu-nbd version \
0.0.1&lt;/span&gt;&lt;/p&gt; &lt;p class="gmail-p1" \
style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stre \
tch:normal;font-size:11px;line-height:normal;font-family:Menlo;color:rgb(0,0,0)"&gt;&lt;span \
class="gmail-s1" style="font-variant-ligatures:no-common-ligatures"&gt;Written by \
Anthony Liguori.&lt;/span&gt;&lt;/p&gt; &lt;p class="gmail-p2" \
style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stre \
tch:normal;font-size:11px;line-height:normal;font-family:Menlo;color:rgb(0,0,0);min-height:13px"&gt;&lt;span \
class="gmail-s1" style="font-variant-ligatures:no-common-ligatures"&gt;&lt;/span&gt;&lt;br&gt;&lt;/p&gt; \
&lt;p class="gmail-p1" style="margin:0px;font-variant-numeric:normal;font-variant-east-as \
ian:normal;font-stretch:normal;font-size:11px;line-height:normal;font-family:Menlo;color:rgb(0,0,0)"&gt;&lt;span \
class="gmail-s1" style="font-variant-ligatures:no-common-ligatures"&gt;Copyright (C) \
2006 Anthony Liguori &lt;&lt;a \
href="mailto:anthony@codemonkey.ws"&gt;anthony@codemonkey.ws&lt;/a&gt;&gt;.&lt;/span&gt;&lt;/p&gt; &lt;p \
class="gmail-p1" style="margin:0px;font-variant-numeric:normal;font-variant-east-asian \
:normal;font-stretch:normal;font-size:11px;line-height:normal;font-family:Menlo;color:rgb(0,0,0)"&gt;&lt;span \
class="gmail-s1" style="font-variant-ligatures:no-common-ligatures"&gt;This is free \
software; see the source for copying conditions.&lt;span \
class="gmail-Apple-converted-space"&gt;   &lt;/span&gt;There is NO&lt;/span&gt;&lt;/p&gt; &lt;p \
class="gmail-p1" style="margin:0px;font-variant-numeric:normal;font-variant-east-asian \
:normal;font-stretch:normal;font-size:11px;line-height:normal;font-family:Menlo;color:rgb(0,0,0)"&gt;&lt;span \
class="gmail-s1" style="font-variant-ligatures:no-common-ligatures"&gt;warranty; not \
even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.&lt;/span&gt;&lt;/p&gt;&lt;p \
class="gmail-p1" style="margin:0px;font-variant-numeric:normal;font-variant-east-asian \
:normal;font-stretch:normal;font-size:11px;line-height:normal;font-family:Menlo;color:rgb(0,0,0)"&gt;&lt;span \
class="gmail-s1" style="font-variant-ligatures:no-common-ligatures"&gt;&lt;br&gt;&lt;/span&gt;&lt;/p&gt;&lt;/div&gt;&lt;div&gt;






&lt;p class="gmail-p1" style="margin:0px;font-variant-numeric:normal;font-variant-east-as \
ian:normal;font-stretch:normal;font-size:11px;line-height:normal;font-family:Menlo;color:rgb(0,0,0)"&gt;&lt;span \
class="gmail-s1" style="font-variant-ligatures:no-common-ligatures"&gt;root@localhost:~# \
uname -a&lt;/span&gt;&lt;/p&gt; &lt;p class="gmail-p1" \
style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stre \
tch:normal;font-size:11px;line-height:normal;font-family:Menlo;color:rgb(0,0,0)"&gt;&lt;span \
class="gmail-s1" style="font-variant-ligatures:no-common-ligatures"&gt;Linux localhost \
4.9.0-9-amd64 #1 SMP Debian 4.9.168-1+deb9u2 (2019-05-13) x86_64 \
GNU/Linux&lt;/span&gt;&lt;/p&gt;&lt;/div&gt;&lt;br clear="all"&gt;&lt;div&gt;&lt;div dir="ltr" class="gmail_signature" \
data-smartmail="gmail_signature"&gt;&lt;div dir="ltr"&gt;&lt;div&gt;Regards&lt;br&gt;Tanmoy \
Sinha&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190627172905</emailId><senderName>"Marc Roos"</senderName><senderEmail>m.roos@f1-outsourcing.eu</senderEmail><timestampReceived>2019-06-27 17:29:05-0400</timestampReceived><subject>[libvirt-users] macvtap vlan and tcp header overhead (and mtu size)</subject><body>


I have a host setup for libvirt kvm/qemu vms. And I wonder a bit about 
the overhead of the macvtap and how to configure the mtu's properly. To 
be able to communicate with the host, I have moved the ip address of the 
host from the adapter to a macvtap to allow host communication. 

I have the below setup on hosts. 

                                              
                                +---------+   
                                | macvtap0|   
                             +--|   ip    |   
                             |  | mtu1500 |   
                             |  +---------+   
                 +---------+ |  +---------+   
                 |eth0.v100| |  | macvtap1|   
              +--|  no ip  +-+--|   ip    |   
 +---------+  |  | mtu1500 |    | mtu1500 |   
 |   eth0  |  |  +---------+    +---------+   
 |         +--+                               
 | mtu9000 |  |  +---------+                  
 +---------+  |  |eth0.v101|                  
              +--|   ip    |                  
                 | mtu9000 |                  
                 +---------+                  

https://pastebin.com/9jJrMCTD



I can do a ping -M do -s 9000 between hosts via the vlan interface 
eth0.v101. That is as expected.

The ping -M do -s 1500 macvtap0 and another host or macvtap1 fails. The 
maximum size that does not fragment is 1472.
That is 28 bytes??? Where have they gone? I am only using macvtap, can 
this be the combination of the parent interface being a vlan and that 
macvtap is not properly handling this? Anyone experienced something 
similar? Or can explain where these 28 bytes go?










_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190627113856</emailId><senderName>Peter Krempa</senderName><senderEmail>pkrempa@redhat.com</senderEmail><timestampReceived>2019-06-27 11:38:56-0400</timestampReceived><subject>Re: [libvirt-users] mkfs fails on qemu-nbd device</subject><body>

[Attachment #2 (multipart/signed)]


On Thu, Jun 27, 2019 at 16:22:27 +0530, Tanmoy Sinha wrote:
&gt; Hi All,
&gt; 
&gt; I am unable to figure out the issue here, when I try to create a filesystem
&gt; (ext4) on a virtual disk using qemu-nbd. This happens intermittently.
&gt; 
&gt; Following is the sequence of commands:-
&gt; 
&gt; $&gt; qemu-img create -f qcow2 test.qcow2 30G
&gt; 
&gt; 
&gt; $&gt; qemu-nbd --connect=/dev/nbd0 test.qcow2

I think you forgot to use -f  qcow2 in this command line.

Also the qemu mailing list will probably be better target for this
question since your examples are not using libvirt.

["signature.asc" (application/pgp-signature)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190619122343</emailId><senderName>Saso Tavcar</senderName><senderEmail>fast@ais42.net</senderEmail><timestampReceived>2019-06-19 12:23:43-0400</timestampReceived><subject>[libvirt-users] libvirtd does not update VM .xml configurations on filesystem after virsh snapshot/b</subject><body>

Hi,

Recently We've upgraded some KVM hosts from Fedora 29 to Fedora 30 and
now experience broken VM configurations on filesystem after virsh blockcommit.

Commands "virsh dumpxml ..." and "virsh dumpxml --inactive ..." is showing diffrent \
configuration than the one on filesystem. In case of restart libvirtd or system \
reboot, there are broken VM xml configurations on filesystem.

Everything is OK on Fedora 29 KVM hosts!


0. XML configurations before snapshot is taken (all good, nothing found)

[root@server1 ~]# cat /etc/libvirt/qemu/somedomain.com.ncloud.xml| grep BACK
[root@server1 ~]# cat /etc/libvirt/qemu/somedomain.com.ncloud.xml| grep backingStore
[root@server1 ~]# /usr/bin/virsh --quiet  dumpxml somedomain.com.ncloud|grep BACK
[root@server1 ~]# /usr/bin/virsh --quiet  dumpxml somedomain.com.ncloud|grep \
backingStore [root@server1 ~]# /usr/bin/virsh --quiet  dumpxml --inactive \
somedomain.com.ncloud|grep BACK [root@server1 ~]# /usr/bin/virsh --quiet  dumpxml \
--inactive somedomain.com.ncloud|grep backingStore



1. When VM snapshot is taken with (all OK)

/usr/bin/virsh --quiet  snapshot-create-as --domain somedomain.com.ncloud ....

there is a change of configuration, active, inactive and filesystem:

- active (virsh dumpxml)

[root@server1 ~]# /usr/bin/virsh --quiet  dumpxml somedomain.com.ncloud|grep BACK
     &lt;source file='/Virtualization/linux/somedomain.com/somedomain.com.ncloud.qcow2-BACKUPING_NOW'/&gt;
                
     &lt;source file='/Virtualization/linux/somedomain.com/somedomain.com.ncloud-swap.qcow2-BACKUPING_NOW'/&gt;
                
     &lt;source file='/Virtualization/linux/somedomain.com/somedomain.com.ncloud-data1.qcow2-BACKUPING_NOW'/&gt;
                
     &lt;source file='/Virtualization/linux/somedomain.com/somedomain.com.ncloud-data2.qcow2-BACKUPING_NOW'/&gt;


[root@server1 ~]# /usr/bin/virsh --quiet  dumpxml somedomain.com.ncloud|grep \
backingStore  &lt;backingStore type='file'&gt;
     &lt;/backingStore&gt;
     &lt;backingStore type='file'&gt;
     &lt;/backingStore&gt;
     &lt;backingStore type='file'&gt;
     &lt;/backingStore&gt;
     &lt;backingStore type='file'&gt;
     &lt;/backingStore&gt;

- inactive (virsh dumpxml --inactive)

[root@server1 ~]# /usr/bin/virsh --quiet  dumpxml --inactive \
                somedomain.com.ncloud|grep BACK
     &lt;source file='/Virtualization/linux/somedomain.com/somedomain.com.ncloud.qcow2-BACKUPING_NOW'/&gt;
                
     &lt;source file='/Virtualization/linux/somedomain.com/somedomain.com.ncloud-swap.qcow2-BACKUPING_NOW'/&gt;
                
     &lt;source file='/Virtualization/linux/somedomain.com/somedomain.com.ncloud-data1.qcow2-BACKUPING_NOW'/&gt;
                
     &lt;source file='/Virtualization/linux/somedomain.com/somedomain.com.ncloud-data2.qcow2-BACKUPING_NOW'/&gt;


[root@server1 ~]# /usr/bin/virsh --quiet  dumpxml --inactive \
somedomain.com.ncloud|grep backingStore  &lt;backingStore type='file'&gt;
     &lt;/backingStore&gt;
     &lt;backingStore type='file'&gt;
     &lt;/backingStore&gt;
     &lt;backingStore type='file'&gt;
     &lt;/backingStore&gt;
     &lt;backingStore type='file'&gt;
     &lt;/backingStore&gt;


- XML configuration on filesystem has changed

[root@server1 ~]# ls -al /etc/libvirt/qemu/somedomain.com.ncloud.xml
-rw-------. 1 root root 6260 Jun 18 23:00 /etc/libvirt/qemu/somedomain.com.ncloud.xml

[root@server1 ~]# cat /etc/libvirt/qemu/somedomain.com.ncloud.xml |grep BACK
     &lt;source file='/Virtualization/linux/somedomain.com/somedomain.com.ncloud.qcow2-BACKUPING_NOW'/&gt;
                
     &lt;source file='/Virtualization/linux/somedomain.com/somedomain.com.ncloud-swap.qcow2-BACKUPING_NOW'/&gt;
                
     &lt;source file='/Virtualization/linux/somedomain.com/somedomain.com.ncloud-data1.qcow2-BACKUPING_NOW'/&gt;
                
     &lt;source file='/Virtualization/linux/somedomain.com/somedomain.com.ncloud-data2.qcow2-BACKUPING_NOW'/&gt;


[root@server1 ~]# cat /etc/libvirt/qemu/somedomain.com.ncloud.xml |grep backingStore
     &lt;backingStore type='file'&gt;
     &lt;/backingStore&gt;
     &lt;backingStore type='file'&gt;
     &lt;/backingStore&gt;
     &lt;backingStore type='file'&gt;
     &lt;/backingStore&gt;
     &lt;backingStore type='file'&gt;
     &lt;/backingStore&gt;



2. When VM backup is done, data merged with virsh backcommit ..." and snapshot \
deleted (NOT OK!!!)

...
/usr/bin/virsh --quiet  blockcommit somedomain.com.ncloud sdd --active --pivot
/usr/bin/virsh --quiet  snapshot-delete --domain somedomain.com.ncloud \
somedomain.com.ncloud-SNAPSHOT --metadata


there is a following state of VM configurations:


- active (virsh dumpxml),

[root@server1 ~]# /usr/bin/virsh --quiet  dumpxml  somedomain.com.ncloud|grep BACK \
;;; OK

[root@server1 ~]# /usr/bin/virsh --quiet  dumpxml  somedomain.com.ncloud|grep \
backingStore ;;; why is there empty backingStore left ???  &lt;backingStore/&gt;
     &lt;backingStore/&gt;
     &lt;backingStore/&gt;
     &lt;backingStore/&gt;

- inactive

[root@server1 qemu]# virsh dumpxml --inactive somedomain.com.ncloud |grep BACK        \
;;; OK [root@server1 qemu]# virsh dumpxml --inactive somedomain.com.ncloud |grep \
backingStore  ;;; OK


- XML on filesystem (.xml file on filesystem has not changed/reverted since snapshot \
has been taken - NOT OK!!!!, should be cleared of snapshot source file and \
backingStore)

[root@server1 ~]# ls -al /etc/libvirt/qemu/somedomain.com.ncloud.xml
-rw-------. 1 root root 6260 Jun 18 23:00 /etc/libvirt/qemu/somedomain.com.ncloud.xml

[root@server1 qemu]# cat somedomain.com.ns2.xml |grep BACK
     &lt;source file='/Virtualization/linux/somedomain.com/somedomain.com.ns2.qcow2-BACKUPING_NOW'/&gt;


[root@server1 qemu]# cat somedomain.com.ns2.xml |grep backingStore
     &lt;backingStore type='file' index='1'&gt;
     &lt;/backingStore&gt;

###################################################################################### \
########################################################################################


- Fedora 29 has libvirt 4.7.0 and qemu 3.0.1:

[root@solaris1 ~]# rpm -qa |grep libvirt-daemon-kvm
libvirt-daemon-kvm-4.7.0-3.fc29.x86_64

[root@solaris1 ~]# rpm -qa |grep qemu-system-x86
qemu-system-x86-core-3.0.1-3.fc29.x86_64
qemu-system-x86-3.0.1-3.fc29.x86_64

- Fedora 30 has libvirt 5.1.0 and qemu 3.1.0:

[root@server1 ~]# rpm -qa |grep libvirt-daemon-kvm
libvirt-daemon-kvm-5.1.0-8.fc30.x86_64

[root@server1 ~]# rpm -qa |grep qemu-system-x86
qemu-system-x86-3.1.0-8.fc30.x86_64
qemu-system-x86-core-3.1.0-8.fc30.x86_64


For every VM from "virsh list" we do following steps (in script) for VM backup:

/usr/bin/virsh --quiet  domblklist somedomain.com.ncloud
/usr/bin/virsh --quiet  dumpxml --inactive somedomain.com.ncloud &gt; \
/Backuping/VMs/Daily/somedomain.com.ncloud.xml

/usr/bin/virsh --quiet  snapshot-create-as --domain somedomain.com.ncloud \
somedomain.com.ncloud-SNAPSHOT  --diskspec \
sda,file=/Virtualization/linux/somedomain.com/somedomain.com.ncloud.qcow2-BACKUPING_NOW \
--diskspec sdb,file=/Virtualization/linux/somedomain.com/somedomain.com.ncloud-swap.qcow2-BACKUPING_NOW \
--diskspec sdc,file=/Virtualization/linux/somedomain.com/somedomain.com.ncloud-data1.qcow2-BACKUPING_NOW \
--diskspec sdd,file=/Virtualization/linux/somedomain.com/somedomain.com.ncloud-data2.qcow2-BACKUPING_NOW \
--disk-only --atomic --quiesce

/usr/bin/virsh --quiet  snapshot-list somedomain.com.ncloud 

/usr/bin/scp -p server1.somedomain.us:/Virtualization/linux/somedomain.com/somedomain.com.ncloud.qcow2 \
                somedomain.com.ncloud.qcow2
/usr/bin/scp -p server1.somedomain.us:/Virtualization/linux/somedomain.com/somedomain.com.ncloud-swap.qcow2 \
                somedomain.com.ncloud-swap.qcow2
/usr/bin/scp -p server1.somedomain.us:/Virtualization/linux/somedomain.com/somedomain.com.ncloud-data1.qcow2 \
                somedomain.com.ncloud-data1.qcow2
/usr/bin/scp -p server1.somedomain.us:/Virtualization/linux/somedomain.com/somedomain.com.ncloud-data2.qcow2 \
somedomain.com.ncloud-data2.qcow2

/usr/bin/virsh --quiet  blockcommit somedomain.com.ncloud sda --active --pivot
/usr/bin/virsh --quiet  blockcommit somedomain.com.ncloud sdb --active --pivot
/usr/bin/virsh --quiet  blockcommit somedomain.com.ncloud sdc --active --pivot
/usr/bin/virsh --quiet  blockcommit somedomain.com.ncloud sdd --active --pivot
/usr/bin/virsh --quiet  snapshot-delete --domain somedomain.com.ncloud \
somedomain.com.ncloud-SNAPSHOT --metadata

/usr/bin/ssh server1.somedomain.us "/usr/bin/rm \
                /Virtualization/linux/somedomain.com/somedomain.com.ncloud.qcow2-BACKUPING_NOW"
                
/usr/bin/ssh server1.somedomain.us "/usr/bin/rm \
                /Virtualization/linux/somedomain.com/somedomain.com.ncloud-swap.qcow2-BACKUPING_NOW"
                
/usr/bin/ssh server1.somedomain.us "/usr/bin/rm \
                /Virtualization/linux/somedomain.com/somedomain.com.ncloud-data1.qcow2-BACKUPING_NOW"
                
/usr/bin/ssh server1.somedomain.us "/usr/bin/rm \
/Virtualization/linux/somedomain.com/somedomain.com.ncloud-data2.qcow2-BACKUPING_NOW"

/usr/bin/pigz --best --rsyncable somedomain.com.ncloud.qcow2
/usr/bin/pigz --best --rsyncable somedomain.com.ncloud-swap.qcow2
/usr/bin/pigz --best --rsyncable somedomain.com.ncloud-data1.qcow2
/usr/bin/pigz --best --rsyncable somedomain.com.ncloud-data2.qcow2


There is no error on script (commands) execution:


[root@server1 ~]# /Backuping/bin/simple_KVM_backup.pl --depth 7 --path Daily \
--hosting_server server1.somedomain.us

###Backuping VM somedomain.com.ncloud:

+ Moving somedomain.com.ncloud.xml.06 to somedomain.com.ncloud.xml.07.
+ Moving somedomain.com.ncloud.qcow2.gz.06 to somedomain.com.ncloud.qcow2.gz.07.
...

+ Disk snapshot somedomain.com.ncloud-SNAPSHOT for somedomain.com.ncloud ... Domain \
snapshot somedomain.com.ncloud-SNAPSHOT created Name                       Creation \
                Time               State
-----------------------------------------------------------------------
somedomain.com.ncloud-SNAPSHOT   2019-06-18 23:00:04 +0200   disk-snapshot

Done!

+ Time scp start : 2019-06-18 23:00:05
somedomain.com.ncloud.qcow2                                                           \
100%   20GB 401.3MB/s   00:51     Done!
somedomain.com.ncloud-swap.qcow2                                                      \
100% 4097MB 483.5MB/s   00:08     Done!
somedomain.com.ncloud-data1.qcow2                                                     \
100%  100GB 400.7MB/s   04:15     Done!
somedomain.com.ncloud-data2.qcow2                                                     \
100%  100GB 440.6MB/s   03:52     Done!
+ Time scp end   : 2019-06-18 23:09:14

+ Time blockcommit start : 2019-06-18 23:09:14
Successfully pivoted

Successfully pivoted

Successfully pivoted

Successfully pivoted

+ Time blockcommit end   : 2019-06-18 23:09:16

+ Snapshot delete ... Domain snapshot somedomain.com.ncloud-SNAPSHOT deleted

Done!
+ Delete snapshot files ... Done!

+ Time compress start : 2019-06-18 23:09:17


Regards,
saso


_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20190613110855</emailId><senderName>"Lentes, Bernd"</senderName><senderEmail>bernd.lentes@helmholtz-muenchen.de</senderEmail><timestampReceived>2019-06-13 11:08:55-0400</timestampReceived><subject>Re: [libvirt-users] blockcommit of domain not successfull</subject><body>



----- On Jun 13, 2019, at 9:56 AM, Peter Krempa pkrempa@redhat.com wrote:


&gt; 
&gt; Thanks for comming back to me with the information.
&gt; 
&gt; Unfortunately this is not a full debug log but I can try to tell you
&gt; what I see here:

I configured libvirtd that way:
ha-idg-1:~ # grep -Ev '^$|#' /etc/libvirt/libvirtd.conf

log_level = 1
log_filters="1:qemu 3:remote 4:event 3:util.json 3:rpc"
log_outputs="1:file:/var/log/libvirt/libvirtd.log"
keepalive_interval = -1

That's what i found on https://wiki.libvirt.org/page/DebugLogs .
Isn't that correct ? That should create informative logfiles.
The other host has excat the same configuration but produce much bigger logfiles !?!
I have libvirt-daemon-4.0.0-8.12.1.x86_64.

&gt; 
&gt; &gt; 2019-06-07 20:30:57.170+0000: 30299: error : qemuMonitorIO:719 : internal error:
&gt; &gt; End of file from qemu monitor
&gt; &gt; 2019-06-08 03:59:17.690+0000: 30299: error : qemuMonitorIO:719 : internal error:
&gt; &gt; End of file from qemu monitor
&gt; 
&gt; So this looks like qemu crashed. Or at least it's the usual symptom we
&gt; get. Is there anything in /var/log/libvirt/qemu/$VMNAME.log?

That's all:
qemu-system-x86_64: block/mirror.c:864: mirror_run: Assertion \
`((&amp;bs-&gt;tracked_requests)-&gt;lh_first == ((void *)0))' failed.


&gt; 
&gt; &gt; 2019-06-08 03:59:26.145+0000: 30300: warning : qemuGetProcessInfo:1461 : cannot
&gt; &gt; parse process status data
&gt; &gt; 2019-06-08 03:59:26.191+0000: 30303: warning : qemuGetProcessInfo:1461 : cannot
&gt; &gt; parse process status data
&gt; &gt; 2019-06-08 03:59:56.095+0000: 27956: warning :
&gt; &gt; qemuDomainObjBeginJobInternal:4865 : Cannot start job (destroy, none) for
&gt; &gt; domain severin; current job is (modify, none) owned by (13061
&gt; &gt; remoteDispatchDomainBlockJobAbort, 0 &lt;null&gt;) for (38s,
&gt; &gt; 0s)
&gt; 
&gt; And this looks to me as if the Abort job can't be interrupted properly
&gt; while waiting synchronously for the job to finish. This seems to be the
&gt; problem. If the VM indeed crashed there's a problem in job waiting
&gt; apparently.
&gt; 
&gt; I'd still really like to have debug logs in this case to really see what
&gt; happened.

I configured logging as i  found on https://wiki.libvirt.org/page/DebugLogs.
What else can i do ?

Bernd

Bernd
 

Helmholtz Zentrum Muenchen
Deutsches Forschungszentrum fuer Gesundheit und Umwelt (GmbH)
Ingolstaedter Landstr. 1
85764 Neuherberg
www.helmholtz-muenchen.de
Aufsichtsratsvorsitzende: MinDir'in Prof. Dr. Veronika von Messling
Geschaeftsfuehrung: Prof. Dr. med. Dr. h.c. Matthias Tschoep, Heinrich Bassler, \
                Kerstin Guenther
Registergericht: Amtsgericht Muenchen HRB 6466
USt-IdNr: DE 129521671

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20190613140118</emailId><senderName>"Lentes, Bernd"</senderName><senderEmail>bernd.lentes@helmholtz-muenchen.de</senderEmail><timestampReceived>2019-06-13 14:01:18-0400</timestampReceived><subject>Re: [libvirt-users] blockcommit of domain not successfull</subject><body>


----- On Jun 13, 2019, at 1:08 PM, Bernd Lentes bernd.lentes@helmholtz-muenchen.de \
wrote:

I found further information in /var/log/messages for both occurrences:

2019-06-01T03:05:31.620725+02:00 ha-idg-2 systemd-coredump[14253]: Core Dumping has \
been disabled for process 30590 (qemu-system-x86). 2019-06-01T03:05:31.712673+02:00 \
ha-idg-2 systemd-coredump[14253]: Process 30590 (qemu-system-x86) of user 488 dumped \
core. 2019-06-01T03:05:32.173272+02:00 ha-idg-2 kernel: [294682.387828] br0: port \
4(vnet2) entered disabled state 2019-06-01T03:05:32.177111+02:00 ha-idg-2 kernel: \
[294682.388384] device vnet2 left promiscuous mode 2019-06-01T03:05:32.177122+02:00 \
ha-idg-2 kernel: [294682.388391] br0: port 4(vnet2) entered disabled state \
2019-06-01T03:05:32.208916+02:00 ha-idg-2 wickedd[2954]: error retrieving tap \
attribute from sysfs 2019-06-01T03:05:41.395685+02:00 ha-idg-2 \
systemd-machined[2824]: Machine qemu-31-severin terminated.


2019-06-08T05:59:17.502899+02:00 ha-idg-1 systemd-coredump[31089]: Core Dumping has \
been disabled for process 19489 (qemu-system-x86). 2019-06-08T05:59:17.523050+02:00 \
ha-idg-1 systemd-coredump[31089]: Process 19489 (qemu-system-x86) of user 489 dumped \
core. 2019-06-08T05:59:17.650334+02:00 ha-idg-1 kernel: [999258.577132] br0: port \
9(vnet7) entered disabled state 2019-06-08T05:59:17.650354+02:00 ha-idg-1 kernel: \
[999258.578103] device vnet7 left promiscuous mode 2019-06-08T05:59:17.650355+02:00 \
ha-idg-1 kernel: [999258.578108] br0: port 9(vnet7) entered disabled state \
2019-06-08T05:59:25.983702+02:00 ha-idg-1 systemd-machined[1383]: Machine \
qemu-205-severin terminated.

Core Dumping is disabled, but nevertheless a core dump has been created ?
Where could i find it ?
Would it be useful to provide it ?


Bernd
 

Helmholtz Zentrum Muenchen
Deutsches Forschungszentrum fuer Gesundheit und Umwelt (GmbH)
Ingolstaedter Landstr. 1
85764 Neuherberg
www.helmholtz-muenchen.de
Aufsichtsratsvorsitzende: MinDir'in Prof. Dr. Veronika von Messling
Geschaeftsfuehrung: Prof. Dr. med. Dr. h.c. Matthias Tschoep, Heinrich Bassler, \
                Kerstin Guenther
Registergericht: Amtsgericht Muenchen HRB 6466
USt-IdNr: DE 129521671

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20190614071402</emailId><senderName>Peter Krempa</senderName><senderEmail>pkrempa@redhat.com</senderEmail><timestampReceived>2019-06-14 07:14:02-0400</timestampReceived><subject>Re: [libvirt-users] blockcommit of domain not successfull</subject><body>

[Attachment #2 (multipart/signed)]


On Thu, Jun 13, 2019 at 16:01:18 +0200, Lentes, Bernd wrote:
&gt; 
&gt; ----- On Jun 13, 2019, at 1:08 PM, Bernd Lentes bernd.lentes@helmholtz-muenchen.de \
&gt; wrote: 
&gt; I found further information in /var/log/messages for both occurrences:
&gt; 
&gt; 2019-06-01T03:05:31.620725+02:00 ha-idg-2 systemd-coredump[14253]: Core Dumping has \
&gt; been disabled for process 30590 (qemu-system-x86). 2019-06-01T03:05:31.712673+02:00 \
&gt; ha-idg-2 systemd-coredump[14253]: Process 30590 (qemu-system-x86) of user 488 \
&gt; dumped core. 2019-06-01T03:05:32.173272+02:00 ha-idg-2 kernel: [294682.387828] br0: \
&gt; port 4(vnet2) entered disabled state 2019-06-01T03:05:32.177111+02:00 ha-idg-2 \
&gt; kernel: [294682.388384] device vnet2 left promiscuous mode \
&gt; 2019-06-01T03:05:32.177122+02:00 ha-idg-2 kernel: [294682.388391] br0: port \
&gt; 4(vnet2) entered disabled state 2019-06-01T03:05:32.208916+02:00 ha-idg-2 \
&gt; wickedd[2954]: error retrieving tap attribute from sysfs \
&gt; 2019-06-01T03:05:41.395685+02:00 ha-idg-2 systemd-machined[2824]: Machine \
&gt; qemu-31-severin terminated. 
&gt; 
&gt; 2019-06-08T05:59:17.502899+02:00 ha-idg-1 systemd-coredump[31089]: Core Dumping has \
&gt; been disabled for process 19489 (qemu-system-x86). 2019-06-08T05:59:17.523050+02:00 \
&gt; ha-idg-1 systemd-coredump[31089]: Process 19489 (qemu-system-x86) of user 489 \
&gt; dumped core. 2019-06-08T05:59:17.650334+02:00 ha-idg-1 kernel: [999258.577132] br0: \
&gt; port 9(vnet7) entered disabled state 2019-06-08T05:59:17.650354+02:00 ha-idg-1 \
&gt; kernel: [999258.578103] device vnet7 left promiscuous mode \
&gt; 2019-06-08T05:59:17.650355+02:00 ha-idg-1 kernel: [999258.578108] br0: port \
&gt; 9(vnet7) entered disabled state 2019-06-08T05:59:25.983702+02:00 ha-idg-1 \
&gt; systemd-machined[1383]: Machine qemu-205-severin terminated. 
&gt; Core Dumping is disabled, but nevertheless a core dump has been created ?
&gt; Where could i find it ?
&gt; Would it be useful to provide it ?

So this really hints to qemu crashing. It certainly will be beneficial
to collect the backtrace, but you really should report this (including
the error message from the vm log file) to the qemu team.

They might have even fixed it by now, so a plain update might help.


["signature.asc" (application/pgp-signature)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190531075710</emailId><senderName>Peter Krempa</senderName><senderEmail>pkrempa@redhat.com</senderEmail><timestampReceived>2019-05-31 07:57:10-0400</timestampReceived><subject>Re: [libvirt-users] Using qemu active blockcommit results in 'Permission denied' error</subject><body>

[Attachment #2 (multipart/signed)]


On Thu, May 30, 2019 at 22:12:14 +0200, Marcus Hoffmann wrote:
&gt; Hello all,

Hi,

&gt; 
&gt; I tried following this guide:
&gt; https://wiki.libvirt.org/page/Live-disk-backup-with-active-blockcommit
&gt; 
&gt; Unfortunately when I try to do the final virsh blockcommit step I always
&gt; get the following error:
&gt; 
&gt; error: internal error: unable to execute QEMU command 'block-commit':
&gt; Could not reopen file: Permission denied
&gt; 
&gt; I checked directory und image file permissions, app-armor profiles (set
&gt; to complain mode for now.) and libvirt logs but nothing there gives me
&gt; any hints what might be going wrong.
&gt; 
&gt; This is on a debian buster system, using

I was doing some changes in the blockcommit code recently so I might
have messed something up. Could you please collect debug logs:

https://wiki.libvirt.org/page/DebugLogs

when the problem reproduces and also a directory listing of the path
where the image is stored so I can check if the permission code is
working properly.

["signature.asc" (application/pgp-signature)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190605150205</emailId><senderName>Marcus Hoffmann</senderName><senderEmail>bubu@bubu1.eu</senderEmail><timestampReceived>2019-06-05 15:02:05-0400</timestampReceived><subject>Re: [libvirt-users] Using qemu active blockcommit results in 'Permission denied' error</subject><body>

On May 31, 2019 2:03:40 PM GMT+02:00, Marcus Hoffmann &lt;bubu@bubu1.eu&gt; wrote:
&gt; Hi Peter,
&gt; 
&gt; On 31.05.19 09:57, Peter Krempa wrote:
&gt; &gt; On Thu, May 30, 2019 at 22:12:14 +0200, Marcus Hoffmann wrote:
&gt; &gt; &gt; Hello all,
&gt; &gt; 
&gt; &gt; Hi,
&gt; &gt; 
&gt; &gt; &gt; 
&gt; &gt; &gt; I tried following this guide:
&gt; &gt; &gt; 
&gt; https://wiki.libvirt.org/page/Live-disk-backup-with-active-blockcommit
&gt; &gt; &gt; 
&gt; &gt; &gt; Unfortunately when I try to do the final virsh blockcommit step I
&gt; always
&gt; &gt; &gt; get the following error:
&gt; &gt; &gt; 
&gt; &gt; &gt; error: internal error: unable to execute QEMU command
&gt; 'block-commit':
&gt; &gt; &gt; Could not reopen file: Permission denied
&gt; &gt; &gt; 
&gt; &gt; &gt; I checked directory und image file permissions, app-armor profiles
&gt; (set
&gt; &gt; &gt; to complain mode for now.) and libvirt logs but nothing there gives
&gt; me
&gt; &gt; &gt; any hints what might be going wrong.
&gt; &gt; &gt; 
&gt; &gt; &gt; This is on a debian buster system, using
&gt; &gt; 
&gt; &gt; I was doing some changes in the blockcommit code recently so I might
&gt; &gt; have messed something up. Could you please collect debug logs:
&gt; &gt; 
&gt; &gt; https://wiki.libvirt.org/page/DebugLogs
&gt; &gt; 
&gt; &gt; when the problem reproduces and also a directory listing of the path
&gt; &gt; where the image is stored so I can check if the permission code is
&gt; &gt; working properly.
&gt; &gt; 
&gt; 
&gt; 
&gt; Logfile attached.
&gt; 
&gt; ~ # ls -al /var/lib/libvirt/images/
&gt; total 1271917588
&gt; drwxr-xr-x 2 root         root                 4096 Mai 29 14:47 .
&gt; drwxr-xr-x 7 root         root                 4096 Mai 27 15:55 ..
&gt; -rw-r--r-- 1 libvirt-qemu libvirt-qemu 214821961728 Mai 29 14:47
&gt; drache3.qcow2
&gt; -rw-r--r-- 1 libvirt-qemu libvirt-qemu 395671371776 Mai 29 14:47
&gt; drache_addon.qcow2
&gt; -rw-r--r-- 1 libvirt-qemu libvirt-qemu  90944765952 Mai 31 14:02
&gt; drache_overlaya.qcow2
&gt; -rw-r--r-- 1 libvirt-qemu libvirt-qemu 115860766720 Mai 31 14:02
&gt; drache_overlayb.qcow2
&gt; 
&gt; Marcus

Hi Peter,

did you get the logfile I sent? (Just wanting to make sure the email actually got \
delivered. I get a lot of dmarc failures from the mailing list :-/)

Did you have a chance to take a look?

Best,
Marcus

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20190605151442</emailId><senderName>Peter Krempa</senderName><senderEmail>pkrempa@redhat.com</senderEmail><timestampReceived>2019-06-05 15:14:42-0400</timestampReceived><subject>Re: [libvirt-users] Using qemu active blockcommit results in 'Permission denied' error</subject><body>

[Attachment #2 (multipart/signed)]


On Wed, Jun 05, 2019 at 17:02:05 +0200, Marcus Hoffmann wrote:
&gt; On May 31, 2019 2:03:40 PM GMT+02:00, Marcus Hoffmann &lt;bubu@bubu1.eu&gt; wrote:

[...]

&gt; Hi Peter,

Hi,

&gt; 
&gt; did you get the logfile I sent? (Just wanting to make sure the email actually got \
&gt; delivered. I get a lot of dmarc failures from the mailing list :-/) 
&gt; Did you have a chance to take a look?

I did in fact get it, but I somehow forgot to look at it. I'm marking
this and I'll have a look tomorrow.

Sorry for that.


["signature.asc" (application/pgp-signature)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190611123546</emailId><senderName>Peter Krempa</senderName><senderEmail>pkrempa@redhat.com</senderEmail><timestampReceived>2019-06-11 12:35:46-0400</timestampReceived><subject>Re: [libvirt-users] Using qemu active blockcommit results in 'Permission denied' error</subject><body>

[Attachment #2 (multipart/signed)]


On Fri, May 31, 2019 at 14:03:40 +0200, Marcus Hoffmann wrote:
&gt; Hi Peter,
&gt; 
&gt; On 31.05.19 09:57, Peter Krempa wrote:
&gt; &gt; On Thu, May 30, 2019 at 22:12:14 +0200, Marcus Hoffmann wrote:
&gt; &gt;&gt; Hello all,
&gt; &gt; 
&gt; &gt; Hi,
&gt; &gt; 
&gt; &gt;&gt;
&gt; &gt;&gt; I tried following this guide:
&gt; &gt;&gt; https://wiki.libvirt.org/page/Live-disk-backup-with-active-blockcommit
&gt; &gt;&gt;
&gt; &gt;&gt; Unfortunately when I try to do the final virsh blockcommit step I always
&gt; &gt;&gt; get the following error:
&gt; &gt;&gt;
&gt; &gt;&gt; error: internal error: unable to execute QEMU command 'block-commit':
&gt; &gt;&gt; Could not reopen file: Permission denied

I managed to reproduce this issue but when using selinux. I'll try to
fix it with selinux and will try to assess whether it has the possiblity
to fix apparmor too. I'll cc you on a patch when I'll be able to fix it.

["signature.asc" (application/pgp-signature)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190613080846</emailId><senderName>Peter Krempa</senderName><senderEmail>pkrempa@redhat.com</senderEmail><timestampReceived>2019-06-13 08:08:46-0400</timestampReceived><subject>Re: [libvirt-users] Using qemu active blockcommit results in 'Permission denied' error</subject><body>

[Attachment #2 (multipart/signed)]


On Tue, Jun 11, 2019 at 14:35:46 +0200, Peter Krempa wrote:
&gt; On Fri, May 31, 2019 at 14:03:40 +0200, Marcus Hoffmann wrote:
&gt; &gt; Hi Peter,
&gt; &gt; 
&gt; &gt; On 31.05.19 09:57, Peter Krempa wrote:
&gt; &gt; &gt; On Thu, May 30, 2019 at 22:12:14 +0200, Marcus Hoffmann wrote:
&gt; &gt; &gt;&gt; Hello all,
&gt; &gt; &gt; 
&gt; &gt; &gt; Hi,
&gt; &gt; &gt; 
&gt; &gt; &gt;&gt;
&gt; &gt; &gt;&gt; I tried following this guide:
&gt; &gt; &gt;&gt; https://wiki.libvirt.org/page/Live-disk-backup-with-active-blockcommit
&gt; &gt; &gt;&gt;
&gt; &gt; &gt;&gt; Unfortunately when I try to do the final virsh blockcommit step I always
&gt; &gt; &gt;&gt; get the following error:
&gt; &gt; &gt;&gt;
&gt; &gt; &gt;&gt; error: internal error: unable to execute QEMU command 'block-commit':
&gt; &gt; &gt;&gt; Could not reopen file: Permission denied
&gt; 
&gt; I managed to reproduce this issue but when using selinux. I'll try to
&gt; fix it with selinux and will try to assess whether it has the possiblity
&gt; to fix apparmor too. I'll cc you on a patch when I'll be able to fix it.


Well,

The problem I managed to fix had the same symptoms but probably was not
what you see, as you are using libvirt 5.0.0 and I broke the permissions
code in libvirt 5.4.0.

Unfortunately I can't tell what's wrong from the debug logs you've
provided. Is there a possibility to collect anything from apparmor? In
selinux world we do collect denials of the security model in a log file
which might indicate what's happening.

Also I've pushed a patch which adds more logging to the
permission-changing code executed while doing blockjobs:

commit e6635c626a252669c79a84fe0a2af11a361aa341 (HEAD -&gt; master, origin/master, origin/HEAD)
Author: Peter Krempa &lt;pkrempa@redhat.com&gt;
Date:   Wed Jun 12 13:49:57 2019 +0200

    qemu: domain: Log some useful data in qemuDomainStorageSourceAccessModify
    
    Log the flags passed to the function in a exploded state so that it's
    easily visible what's happening to the image.
    
    Signed-off-by: Peter Krempa &lt;pkrempa@redhat.com&gt;
    Reviewed-by: Ján Tomko &lt;jtomko@redhat.com&gt;

Unfortunately that commit can't be applied to libvirt 5.0 because it
depends on a refactor which I pushed in 5.4 (which also caused the
problem I was fixing recently). If you could test the upstream version
it would be great.

Thanks for reporting the problem and I'd be grateful if you could
collect logs from the apparmor security thing.

["signature.asc" (application/pgp-signature)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190610114645</emailId><senderName>Daniel =?utf-8?B?UC4gQmVycmFuZ8Op?=</senderName><senderEmail>berrange@redhat.com</senderEmail><timestampReceived>2019-06-10 11:46:45-0400</timestampReceived><subject>Re: [libvirt-users] lxc - pass filesystem off host's automounts</subject><body>

On Mon, Jun 10, 2019 at 12:28:02PM +0100, lejeczek wrote:
&gt; hi guys
&gt; 
&gt; in my qutest I have this:
&gt; 
&gt; ...
&gt; 
&gt;     &lt;filesystem type='mount' accessmode='passthrough'&gt;
&gt;       &lt;source dir='/home'/&gt;
&gt;       &lt;target dir='/home'/&gt;
&gt;     &lt;/filesystem&gt;
&gt; 
&gt; ...
&gt; 
&gt; and on the host /home/* are user home dirs which are automounted off a
&gt; glusterfs volume.
&gt; 
&gt; The guest starts okey, I can see dirs under /home but if I go to
&gt; /home/userA I get:
&gt; 
&gt; ls: cannot access /home/userA/: Too many levels of symbolic links
&gt; 
&gt; Do you know if what I'm trying should just work a okey?

Unfortunately I don't believe the setup you describe can work.

When we passthrough /home it will be marked as a private mount
inside the container. This means that any child mounts within
it will *not* propagate into the container.


Regards,
Daniel
-- 
|: https://berrange.com      -o-    https://www.flickr.com/photos/dberrange :|
|: https://libvirt.org         -o-            https://fstop138.berrange.com :|
|: https://entangle-photo.org    -o-    https://www.instagram.com/dberrange :|

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190608200350</emailId><senderName>Vasiliy Tolstov</senderName><senderEmail>v.tolstov@selfip.ru</senderEmail><timestampReceived>2019-06-08 20:03:50-0400</timestampReceived><subject>Re: [libvirt-users] Same host migration</subject><body>

чт, 6 июн. 2019 г. в 14:19, Sukrit Bhatnagar &lt;skrtbhtngr@gmail.com&gt;:
&gt;
&gt; Hi,
&gt;
&gt; I have been selected for GSoC'19 under qemu and was
&gt; trying out migration of the pvrdma device.
&gt; For my current task, I need to perform a "null" migration
&gt; i.e. migrate the VM to the same host for testing purpose.
&gt; I am using libvirt 5.1.0 on Fedora 30.
&gt;
&gt; &gt;From what I know, libvirt does not allow this type of
&gt; migration by default.
&gt; Trying this:
&gt; virsh migrate --unsafe --verbose fedora29 qemu+unix:///system
&gt; results in the following error:
&gt; error: internal error: Attempt to migrate guest to the same host dell
&gt;
&gt; Is there some way I can get this to work? If the solution
&gt; requires changing the source code, then that is
&gt; also fine. Using qemu-system-x86_64 to perform
&gt; migration allows same-host migration. I need the same
&gt; functionality using virsh as libvirt performs some additional
&gt; servicing which is required for the device I am migrating.
&gt;
&gt; Thanks,
&gt; Sukrit
&gt;

Yeah, this feature also will be useful to able to upgrade qemu on the
file (install never package, do all vm same host migration, that
starts never qemu process).

-- 
Vasiliy Tolstov,
e-mail: v.tolstov@selfip.ru

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190607161607</emailId><senderName>Brandon Doyle</senderName><senderEmail>bjd2385@aperiodicity.com</senderEmail><timestampReceived>2019-06-07 16:16:07-0400</timestampReceived><subject>Re: [libvirt-users] Cloud automation</subject><body>

Can you not use virt-manager or ovirt to accomplish this?


Regards,

Brandon Doyle


On 6/6/19 10:25 AM, Adrien Macor wrote:

Hi,

I have a question for you:

Let=92s suppose I have three physical servers; two on the same area, and th=
e last one elsewhere (not on the same network, but all three have connectiv=
ity between each others).

May I use this infrastructure with libvirt? I mean in terms of cloud automa=
tion: is it possible to remotely deploy VMs (with particulary configuration=
s) with libvirt?

For example, is it possible to have one master node controlling the two oth=
ers?

Thanks for the reply



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com&lt;mailto:libvirt-users@redhat.com&gt;
https://www.redhat.com/mailman/listinfo/libvirt-users

[Attachment #3 (text/html)]

&lt;html&gt;
&lt;head&gt;
&lt;meta http-equiv="Content-Type" content="text/html; charset=Windows-1252"&gt;
&lt;/head&gt;
&lt;body bgcolor="#FFFFFF" text="#000000"&gt;
&lt;p&gt;Can you not use virt-manager or ovirt to accomplish this?&lt;/p&gt;
&lt;p&gt;&lt;br&gt;
&lt;/p&gt;
&lt;p&gt;Regards,&lt;/p&gt;
&lt;p&gt;Brandon Doyle&lt;br&gt;
&lt;/p&gt;
&lt;p&gt;&lt;br&gt;
&lt;/p&gt;
&lt;div class="moz-cite-prefix"&gt;On 6/6/19 10:25 AM, Adrien Macor wrote:&lt;br&gt;
&lt;/div&gt;
&lt;blockquote type="cite" \
cite="mid:AM0PR03MB4628EBF2B6FC307A0A6830C086170@AM0PR03MB4628.eurprd03.prod.outlook.com"&gt;
 &lt;style type="text/css" style="display:none;"&gt; P {margin-top:0;margin-bottom:0;} \
&lt;/style&gt; &lt;p dir="ltr" style="margin-top: 0px; color: rgb(34, 34, 34);
        font-family: Helvetica, Arial, sans-serif; font-size: 15px;
        background-color: rgb(255, 255, 255)"&gt;
Hi,&lt;/p&gt;
&lt;p dir="ltr" style="color: rgb(34, 34, 34); font-family:
        Helvetica, Arial, sans-serif; font-size: 15px; background-color:
        rgb(255, 255, 255)"&gt;
I have a question for you:&lt;/p&gt;
&lt;p dir="ltr" style="color: rgb(34, 34, 34); font-family:
        Helvetica, Arial, sans-serif; font-size: 15px; background-color:
        rgb(255, 255, 255)"&gt;
Let’s suppose I have three physical servers; two on the same area, and the last one \
elsewhere (not on the same network, but all three have connectivity between each \
others)&lt;span style="color: rgb(34, 34, 34); font-family: Helvetica, Arial,  \
sans-serif; font-size: 15px;"&gt;. &lt;/span&gt;&lt;/p&gt; &lt;p dir="ltr" style="color: rgb(34, \
34, 34); font-family:  Helvetica, Arial, sans-serif; font-size: 15px; \
background-color:  rgb(255, 255, 255)"&gt;
&lt;span style="color: rgb(34, 34, 34); font-family: Helvetica,
          Arial, sans-serif; font-size: 15px;"&gt;May I use this infrastructure with \
libvirt? I mean in terms of cloud automation: is it possible to remotely deploy VMs \
(with particulary configurations)  with &lt;span style="font-family: Helvetica, Arial, \
sans-serif;  background-color: rgb(255, 255, 255); display: inline
            !important"&gt;
libvirt&lt;/span&gt;?&lt;/span&gt;&lt;/p&gt;
&lt;p dir="ltr" style="color: rgb(34, 34, 34); font-family:
        Helvetica, Arial, sans-serif; font-size: 15px; background-color:
        rgb(255, 255, 255)"&gt;
&lt;span style="color: rgb(34, 34, 34); font-family: Helvetica,
          Arial, sans-serif; font-size: 15px;"&gt;For example, is it possible to have \
one master node controlling the two others?&lt;/span&gt;&lt;/p&gt; &lt;p dir="ltr" style="color: \
rgb(34, 34, 34); font-family:  Helvetica, Arial, sans-serif; font-size: 15px; \
background-color:  rgb(255, 255, 255)"&gt;
Thanks for the reply&lt;/p&gt;
&lt;br&gt;
&lt;fieldset class="mimeAttachmentHeader"&gt;&lt;/fieldset&gt;
&lt;pre class="moz-quote-pre" wrap=""&gt;_______________________________________________
libvirt-users mailing list
&lt;a class="moz-txt-link-abbreviated" \
href="mailto:libvirt-users@redhat.com"&gt;libvirt-users@redhat.com&lt;/a&gt; &lt;a \
class="moz-txt-link-freetext" \
href="https://www.redhat.com/mailman/listinfo/libvirt-users"&gt;https://www.redhat.com/mailman/listinfo/libvirt-users&lt;/a&gt;&lt;/pre&gt;
 &lt;/blockquote&gt;
&lt;/body&gt;
&lt;/html&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
--===============4062811630705765544==--


</body></email><email><emailId>20190620071303</emailId><senderName>Peter Krempa</senderName><senderEmail>pkrempa@redhat.com</senderEmail><timestampReceived>2019-06-20 07:13:03-0400</timestampReceived><subject>Re: [libvirt-users] libvirtd does not update VM .xml configurations on filesystem after virsh snapsh</subject><body>

[Attachment #2 (multipart/signed)]


On Wed, Jun 19, 2019 at 14:23:43 +0200, Saso Tavcar wrote:
&gt; Hi,
&gt; 
&gt; Recently We've upgraded some KVM hosts from Fedora 29 to Fedora 30 and
&gt; now experience broken VM configurations on filesystem after virsh blockcommit.
&gt; 
&gt; Commands "virsh dumpxml ..." and "virsh dumpxml --inactive ..." is showing diffrent \
&gt; configuration than the one on filesystem. In case of restart libvirtd or system \
&gt; reboot, there are broken VM xml configurations on filesystem.

Hi,

this looks like a known problem we dealt with in this thread:

https://www.redhat.com/archives/libvir-list/2019-May/msg00416.html

It took a few backs-and-forths until I understood it so please read the
whole thread.


["signature.asc" (application/pgp-signature)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190621151652</emailId><senderName>Scott Sullivan</senderName><senderEmail>scottgregorysullivan@gmail.com</senderEmail><timestampReceived>2019-06-21 15:16:52-0400</timestampReceived><subject>[libvirt-users] Intermittent live migration hang with ceph RBD attached volume</subject><body>

[Attachment #2 (multipart/alternative)]


Software in use:

*Source hypervisor:* *Qemu:* stable-2.12 branch *Libvirt*: v3.2-maint
branch *OS*: CentOS 6
*Destination hypervisor: **Qemu:* stable-2.12 branch *Libvirt*: v4.9-maint
branch *OS*: CentOS 7

I'm experiencing an intermittent live migration hang of a virtual machine
(KVM) with a ceph RBD volume attached.

At the high level what I see is that when this does happen, the virtual
machine is left in a paused state (per virsh list) on both source and
destination hypervisors indefinitely.

Here's the virsh command I am running on the source (where 10.30.76.66 is
the destination hypervisor):

virsh migrate --live --copy-storage-all --verbose --xml
&gt; /root/live_migration.cfg test_vm qemu+ssh://10.30.76.66/system tcp://
&gt; 10.30.76.66


Here it is in "ps faux" while its in the hung state:

root     10997  0.3  0.0 380632  6156 ?        Sl   12:24   0:26
&gt; \_ virsh migrate --live --copy-storage-all --verbose --xml
&gt; /root/live_migration.cfg test_vm qemu+ssh://10.30.76.66/sys
&gt; root     10999  0.0  0.0  60024  4044 ?        S    12:24   0:00
&gt; \_ ssh 10.30.76.66 sh -c 'if 'nc' -q 2&gt;&amp;1 | grep "requires an argument"
&gt; &gt; /dev/null 2&gt; then ARG=-q0;else ARG=;fi;'nc' $ARG -U


The only reason i'm using the `--xml` arg is so the auth information can be
updated for the new hypervisor (I setup a cephx user for each hypervisor).
Below is a diff between my normal xml config and the one I passed in --xml
arg to illustrate:

60,61c60,61
&gt; &lt;       &lt;auth username="source"&gt;
&gt; &lt;               &lt;secret type="ceph"
&gt; uuid="d4a47178-ab90-404e-8f25-058148da8446"/&gt;
&gt; ---
&gt; &gt; &lt;auth username="destination"&gt;
&gt; &gt; &lt;secret type="ceph"
&gt; uuid="72e9373d-7101-4a93-a7d2-6cce5ec1e6f1"/&gt;


The libvirt secret as shown above is properly setup with good credentials
on both source and destination hypervisors.

When this happens, I don't see anything logged on the destination
hypervisor in the libvirt log. However in the source hypervisors log, I do
see this:

2019-06-21 12:38:21.004+0000: 28400: warning :
&gt; qemuDomainObjEnterMonitorInternal:3764 : This thread seems to be the async
&gt; job owner; entering monitor without asking for a nested job is dangerous


But nothing else logged in the libvirt log on either source or destination.
The actual `virsh migrate --live` command pasted above still runs while
stuck in this state, and it just outputs "Migration: [100 %]" over and
over. If I strace the qemu process on the source, I see this over and over:

ppoll([{fd=9, events=POLLIN}, {fd=8, events=POLLIN}, {fd=4, events=POLLIN},
&gt; {fd=6, events=POLLIN}, {fd=15, events=POLLIN}, {fd=18, events=POLLIN},
&gt; {fd=19, events=POLLIN}, {fd=35, events=0}, {fd=35, events=POLLIN}], 9, {0,
&gt; 14960491}, NULL, 8) = 0 (Timeout)


Here's those fds:

[root@source ~]# ll /proc/31804/fd/{8,4,6,15,18,19,35}
&gt; lrwx------ 1 qemu qemu 64 Jun 21 13:18 /proc/31804/fd/15 -&gt; socket:[931291]
&gt; lrwx------ 1 qemu qemu 64 Jun 21 13:18 /proc/31804/fd/18 -&gt; socket:[931295]
&gt; lrwx------ 1 qemu qemu 64 Jun 21 13:18 /proc/31804/fd/19 -&gt; socket:[931297]
&gt; lrwx------ 1 qemu qemu 64 Jun 21 13:18 /proc/31804/fd/35 -&gt; socket:[931306]
&gt; lrwx------ 1 qemu qemu 64 Jun 21 13:18 /proc/31804/fd/4 -&gt; [signalfd]
&gt; lrwx------ 1 qemu qemu 64 Jun 21 13:18 /proc/31804/fd/6 -&gt; [eventfd]
&gt; lrwx------ 1 qemu qemu 64 Jun 21 13:18 /proc/31804/fd/8 -&gt; [eventfd]
&gt; [root@source ~]#
&gt; 
&gt; [root@source ~]# grep -E '(931291|931295|931297|931306)' /proc/net/tcp
&gt; 3: 00000000:170C 00000000:0000 0A 00000000:00000000 00:00000000
&gt; 00000000   107        0 931295 1 ffff88043a27f840 99 0 0 10 -1
&gt; 
&gt; 4: 00000000:170D 00000000:0000 0A 00000000:00000000 00:00000000
&gt; 00000000   107        0 931297 1 ffff88043a27f140 99 0 0 10 -1
&gt; 
&gt; [root@source ~]#


Further, on the source, if I query the blockjobs status, it says no
blockjob is running:

[root@source ~]# virsh list
&gt; Id    Name                           State
&gt; ----------------------------------------------------
&gt; 11    test_vm                         paused
&gt; [root@source ~]# virsh blockjob 11 vda
&gt; No current block job for vda
&gt; [root@source ~]#


and that nc/ssh connection is still ok in the hung state:

[root@source~]# netstat -tuapn|grep \.66
&gt; tcp        0      0 10.30.76.48:48876           10.30.76.66:22
&gt; ESTABLISHED 10999/ssh
&gt; [root@source ~]#
&gt; root     10999  0.0  0.0  60024  4044 ?        S    12:24   0:00
&gt; \_ ssh 10.30.76.66 sh -c 'if 'nc' -q 2&gt;&amp;1 | grep "requires an argument"
&gt; &gt; /dev/null 2&gt; then ARG=-q0;else ARG=;fi;'nc' $ARG -U
&gt; /var/run/libvirt/libvirt-sock'


Here's the state of the migration on source while its stuck like this:

[root@source ~]# virsh qemu-monitor-command 11 '{"execute":"query-migrate"}'
&gt; 
&gt; {"return":{"status":"completed","setup-time":2,"downtime":2451,"total-time":3753,"ra \
&gt; m":{"total":2114785280,"postcopy-requests":0,"dirty-sync-count":3,"page-size":4096," \
&gt; remaining":0,"mbps":898.199209,"transferred":421345514,"duplicate":414940,"dirty-pag \
&gt; es-rate":0,"skipped":0,"normal-bytes":416796672,"normal":101757}},"id":"libvirt-317"}
&gt;  [root@source ~]#


I'm unable the run the above command on the destination while its in this
state however, and get a lock error (which could be expected perhaps, since
it never cutover to the source yet):

[root@destination ~]# virsh list
&gt; Id   Name     State
&gt; -----------------------
&gt; 4    test_vm   paused
&gt; [root@destination ~]# virsh qemu-monitor-command 4
&gt; '{"execute":"query-migrate"}'
&gt; error: Timed out during operation: cannot acquire state change lock (held
&gt; by monitor=remoteDispatchDomainMigratePrepare3Params)
&gt; [root@destination ~]#



Does anyone have any pointers of other things I should check? Or if this
was/is a known bug in perhaps the old stable-3.2?

I haven't seen this when migrating on a host with libvirt 4.9 on both
source and destinations. However the ones I have with the older 3.2 are
centos 6 based, and aren't as easily upgraded to 4.9. Or, if anyone has
ideas of patches I could potentially look to port to 3.2 to mitigate this,
that would also be welcome. Would also be interested in forcing the cutover
in this state if possible, though I suspect that isn't safe since the
block-job isnt running while in this bad state.

Thanks in advance


[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;&lt;div&gt;Software in use:&lt;br&gt;&lt;br&gt;&lt;i&gt;Source hypervisor:&lt;/i&gt; &lt;b&gt;Qemu:&lt;/b&gt; \
stable-2.12 branch &lt;b&gt;Libvirt&lt;/b&gt;:  v3.2-maint branch &lt;b&gt;OS&lt;/b&gt;: CentOS \
6&lt;/div&gt;&lt;div&gt;&lt;i&gt;Destination hypervisor: &lt;/i&gt;&lt;b&gt;Qemu:&lt;/b&gt;  stable-2.12 branch  \
&lt;b&gt;Libvirt&lt;/b&gt;:  v4.9-maint branch  &lt;b&gt;OS&lt;/b&gt;: CentOS 7&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;I'm \
experiencing an intermittent live migration hang of a virtual machine (KVM) with a \
ceph RBD volume attached.&lt;div&gt;&lt;br&gt;&lt;div&gt;At the high level what I see is that when this \
does happen, the virtual machine is left in a paused state (per virsh list) on both \
source and destination hypervisors indefinitely.&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;Here's the \
virsh command I am running on the source (where 10.30.76.66 is the destination \
hypervisor):&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;blockquote class="gmail_quote" style="margin:0px \
0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"&gt;virsh migrate \
--live --copy-storage-all --verbose --xml /root/live_migration.cfg test_vm \
qemu+ssh://&lt;a href="http://10.30.76.66/system"&gt;10.30.76.66/system&lt;/a&gt; tcp://&lt;a \
href="http://10.30.76.66"&gt;10.30.76.66&lt;/a&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Here it is \
in "ps faux" while its in the hung state:&lt;br&gt;&lt;br&gt;&lt;blockquote \
class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid \
rgb(204,204,204);padding-left:1ex"&gt;root       10997   0.3   0.0 380632   6156 ?       \
Sl    12:24    0:26               \_ virsh migrate --live --copy-storage-all \
--verbose --xml /root/live_migration.cfg test_vm qemu+ssh://&lt;a \
href="http://10.30.76.66/sys"&gt;10.30.76.66/sys&lt;/a&gt;&lt;br&gt;root       10999   0.0   0.0   \
60024   4044 ?            S      12:24    0:00                     \_ ssh 10.30.76.66 \
sh -c 'if 'nc' -q 2&gt;&amp;1 | grep "requires an argument" \
&gt;/dev/null 2&gt;&amp;1; then ARG=-q0;else ARG=;fi;'nc' $ARG \
-U&lt;/blockquote&gt;  &lt;/div&gt;&lt;div&gt;The only reason i'm using the `--xml` arg is so the \
auth information can be updated for the new hypervisor (I setup a cephx user for each \
hypervisor). Below is a diff between my normal xml config and the one I passed in \
--xml arg to illustrate:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;blockquote class="gmail_quote" \
style="margin:0px 0px 0px 0.8ex;border-left:1px solid \
rgb(204,204,204);padding-left:1ex"&gt;60,61c60,61&lt;br&gt;&lt;          &lt;auth \
username="source"&gt;&lt;br&gt;&lt;                      &lt;secret \
type="ceph" \
uuid="d4a47178-ab90-404e-8f25-058148da8446"/&gt;&lt;br&gt;---&lt;br&gt;&gt;          \
&lt;auth username="destination"&gt;&lt;br&gt;&gt;                      &lt;secret \
type="ceph" \
uuid="72e9373d-7101-4a93-a7d2-6cce5ec1e6f1"/&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The \
libvirt secret as shown above is properly setup with good credentials on both source \
and destination hypervisors.  &lt;/div&gt;&lt;div&gt;&lt;br&gt;When this happens, I don't see \
anything logged on the destination hypervisor in the libvirt log. However in the \
source hypervisors log, I do see this:&lt;br&gt;&lt;br&gt;&lt;blockquote class="gmail_quote" \
style="margin:0px 0px 0px 0.8ex;border-left:1px solid \
rgb(204,204,204);padding-left:1ex"&gt;2019-06-21 12:38:21.004+0000: 28400: warning : \
qemuDomainObjEnterMonitorInternal:3764 : This thread seems to be the async job owner; \
entering monitor without asking for a nested job is \
dangerous&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;But nothing else logged in the libvirt log \
on either source or destination. The actual `virsh migrate --live` command pasted \
above still runs while stuck in this state, and it just outputs "Migration: [100 \
%]" over and over. If I strace the qemu process on the source, I see this over \
and over:&lt;br&gt;&lt;br&gt;&lt;blockquote class="gmail_quote" style="margin:0px 0px 0px \
0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"&gt;ppoll([{fd=9, \
events=POLLIN}, {fd=8, events=POLLIN}, {fd=4, events=POLLIN}, {fd=6, events=POLLIN}, \
{fd=15, events=POLLIN}, {fd=18, events=POLLIN}, {fd=19, events=POLLIN}, {fd=35, \
events=0}, {fd=35, events=POLLIN}], 9, {0, 14960491}, NULL, 8) = 0 \
(Timeout)&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Here's those fds:&lt;br&gt;&lt;br&gt;&lt;blockquote \
class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid \
rgb(204,204,204);padding-left:1ex"&gt;[root@source ~]# ll \
/proc/31804/fd/{8,4,6,15,18,19,35}&lt;br&gt;lrwx------ 1 qemu qemu 64 Jun 21 13:18 \
/proc/31804/fd/15 -&gt; socket:[931291]&lt;br&gt;lrwx------ 1 qemu qemu 64 Jun 21 13:18 \
/proc/31804/fd/18 -&gt; socket:[931295]&lt;br&gt;lrwx------ 1 qemu qemu 64 Jun 21 13:18 \
/proc/31804/fd/19 -&gt; socket:[931297]&lt;br&gt;lrwx------ 1 qemu qemu 64 Jun 21 13:18 \
/proc/31804/fd/35 -&gt; socket:[931306]&lt;br&gt;lrwx------ 1 qemu qemu 64 Jun 21 13:18 \
/proc/31804/fd/4 -&gt; [signalfd]&lt;br&gt;lrwx------ 1 qemu qemu 64 Jun 21 13:18 \
/proc/31804/fd/6 -&gt; [eventfd]&lt;br&gt;lrwx------ 1 qemu qemu 64 Jun 21 13:18 \
/proc/31804/fd/8 -&gt; [eventfd]&lt;br&gt;[root@source ~]#    &lt;br&gt;  &lt;br&gt;[root@source ~]# \
grep -E '(931291|931295|931297|931306)' /proc/net/tcp&lt;br&gt;     3: \
00000000:170C 00000000:0000 0A 00000000:00000000 00:00000000 00000000    107          \
0 931295 1 ffff88043a27f840 99 0 0 10 -1                              &lt;br&gt;     4: \
00000000:170D 00000000:0000 0A 00000000:00000000 00:00000000 00000000    107          \
0 931297 1 ffff88043a27f140 99 0 0 10 -1                              \
&lt;br&gt;[root@source ~]#  &lt;/blockquote&gt;&lt;/div&gt;&lt;/div&gt;  &lt;/div&gt;&lt;/div&gt;&lt;div&gt;Further, on the \
source, if I query the blockjobs status, it says no blockjob is \
running:&lt;br&gt;&lt;br&gt;&lt;blockquote class="gmail_quote" style="margin:0px 0px 0px \
0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"&gt;[root@source ~]# virsh \
list&lt;br&gt;  Id      Name                                        \
State&lt;br&gt;----------------------------------------------------&lt;br&gt;  11      test_vm    \
paused&lt;br&gt;[root@source ~]# virsh blockjob 11 vda&lt;br&gt;No current block job for \
vda&lt;br&gt;[root@source ~]#  &lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;and that nc/ssh connection \
is still ok in the hung state:&lt;br&gt;&lt;br&gt;&lt;blockquote class="gmail_quote" \
style="margin:0px 0px 0px 0.8ex;border-left:1px solid \
rgb(204,204,204);padding-left:1ex"&gt;[root@source~]# netstat -tuapn|grep \.66&lt;br&gt;tcp    \
0         0 &lt;a href="http://10.30.76.48:48876"&gt;10.30.76.48:48876&lt;/a&gt;                \
&lt;a href="http://10.30.76.66:22"&gt;10.30.76.66:22&lt;/a&gt;                     ESTABLISHED \
10999/ssh               &lt;br&gt; [root@source ~]#  &lt;br&gt;root       10999   0.0   0.0   \
60024   4044 ?            S      12:24    0:00                     \_ ssh 10.30.76.66 \
sh -c 'if 'nc' -q 2&gt;&amp;1 | grep "requires an argument" \
&gt;/dev/null 2&gt;&amp;1; then ARG=-q0;else ARG=;fi;'nc' $ARG -U \
/var/run/libvirt/libvirt-sock'  &lt;/blockquote&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Here's \
the state of the migration on source while its stuck like this:&lt;br&gt;&lt;br&gt;&lt;blockquote \
class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid \
rgb(204,204,204);padding-left:1ex"&gt;[root@source ~]# virsh qemu-monitor-command 11 \
'{"execute":"query-migrate"}'&lt;br&gt;{"return":{&amp;quo \
t;status":"completed","setup-time":2,"downtime":245 \
1,"total-time":3753,"ram":{"total":2114785280,"post \
copy-requests":0,"dirty-sync-count":3,"page-size":4096," \
remaining":0,"mbps":898.199209,"transferred":421345514," \
duplicate":414940,"dirty-pages-rate":0,"skipped":0,"norm \
al-bytes":416796672,"normal":101757}},"id":"libvirt-317"}&lt;br&gt;[root@source \
~]#  &lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I'm unable the run the above command on the \
destination while its in this state however, and get a lock error (which could be \
expected perhaps, since it never cutover to the source yet):&lt;br&gt;&lt;br&gt;&lt;blockquote \
class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid \
rgb(204,204,204);padding-left:1ex"&gt;[root@destination ~]# virsh list&lt;br&gt;  Id    Name   \
State   &lt;br&gt; -----------------------&lt;br&gt;  4      test_vm     paused   \
&lt;br&gt;[root@destination ~]# virsh qemu-monitor-command 4 \
'{"execute":"query-migrate"}'&lt;br&gt;error: Timed out during \
operation: cannot acquire state change lock (held by \
monitor=remoteDispatchDomainMigratePrepare3Params)&lt;br&gt;[root@destination ~]# \
&lt;/blockquote&gt;  &lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Does anyone have any pointers of other \
things I should check? Or if this was/is a known bug in perhaps the old \
stable-3.2?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I haven't seen this when migrating on a host \
with libvirt 4.9 on both source and destinations. However the ones I have with the \
older 3.2 are centos 6 based, and aren't as easily upgraded to 4.9. Or, if anyone \
has ideas of patches I could potentially look to port to 3.2 to mitigate this, that \
would also be welcome. Would also be interested in forcing the cutover in this state \
if possible, though I suspect that isn't safe since the block-job isnt running \
while in this bad state.&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;Thanks in advance&lt;/div&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190627115624</emailId><senderName>Tanmoy Sinha</senderName><senderEmail>tanmoy.sinha@gmail.com</senderEmail><timestampReceived>2019-06-27 11:56:24-0400</timestampReceived><subject>Re: [libvirt-users] mkfs fails on qemu-nbd device</subject><body>

[Attachment #2 (multipart/alternative)]


Correct no libvirt involved as such, will post this on qemu mailing list.

Regards
Tanmoy Sinha


On Thu, Jun 27, 2019 at 5:09 PM Peter Krempa &lt;pkrempa@redhat.com&gt; wrote:

&gt; On Thu, Jun 27, 2019 at 16:22:27 +0530, Tanmoy Sinha wrote:
&gt; &gt; Hi All,
&gt; &gt;
&gt; &gt; I am unable to figure out the issue here, when I try to create a
&gt; filesystem
&gt; &gt; (ext4) on a virtual disk using qemu-nbd. This happens intermittently.
&gt; &gt;
&gt; &gt; Following is the sequence of commands:-
&gt; &gt;
&gt; &gt; $&gt; qemu-img create -f qcow2 test.qcow2 30G
&gt; &gt;
&gt; &gt;
&gt; &gt; $&gt; qemu-nbd --connect=/dev/nbd0 test.qcow2
&gt;
&gt; I think you forgot to use -f  qcow2 in this command line.
&gt;
&gt; Also the qemu mailing list will probably be better target for this
&gt; question since your examples are not using libvirt.
&gt;

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;Correct no libvirt involved as such, will post this on qemu mailing \
list.  &lt;div&gt;&lt;br clear="all"&gt;&lt;div&gt;&lt;div dir="ltr" class="gmail_signature" \
data-smartmail="gmail_signature"&gt;&lt;div dir="ltr"&gt;&lt;div&gt;Regards&lt;br&gt;Tanmoy \
Sinha&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;div class="gmail_quote"&gt;&lt;div \
dir="ltr" class="gmail_attr"&gt;On Thu, Jun 27, 2019 at 5:09 PM Peter Krempa &lt;&lt;a \
href="mailto:pkrempa@redhat.com"&gt;pkrempa@redhat.com&lt;/a&gt;&gt; \
wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote class="gmail_quote" style="margin:0px 0px 0px \
0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"&gt;On Thu, Jun 27, 2019 \
at 16:22:27 +0530, Tanmoy Sinha wrote:&lt;br&gt; &gt; Hi All,&lt;br&gt;
&gt; &lt;br&gt;
&gt; I am unable to figure out the issue here, when I try to create a filesystem&lt;br&gt;
&gt; (ext4) on a virtual disk using qemu-nbd. This happens intermittently.&lt;br&gt;
&gt; &lt;br&gt;
&gt; Following is the sequence of commands:-&lt;br&gt;
&gt; &lt;br&gt;
&gt; $&gt; qemu-img create -f qcow2 test.qcow2 30G&lt;br&gt;
&gt; &lt;br&gt;
&gt; &lt;br&gt;
&gt; $&gt; qemu-nbd --connect=/dev/nbd0 test.qcow2&lt;br&gt;
&lt;br&gt;
I think you forgot to use -f   qcow2 in this command line.&lt;br&gt;
&lt;br&gt;
Also the qemu mailing list will probably be better target for this&lt;br&gt;
question since your examples are not using libvirt.&lt;br&gt;
&lt;/blockquote&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190628142349</emailId><senderName>Nikolai Zhubr</senderName><senderEmail>n-a-zhubr@yandex.ru</senderEmail><timestampReceived>2019-06-28 14:23:49-0400</timestampReceived><subject>[libvirt-users] UDP broadcasts vs. nat Masquerading issue</subject><body>

Hi all,

I'm observing an issue that as soon as libvirt starts, UPD broadcasts 
going through physical network (and unrelated to any virtualization) get 
broken. Specifically, windows neighbourhood browsing through samba's 
nmbd starts suffering badly (Samba is running on this same box).

At the moment I'm running a quite outdated version 1.2.9 of libvirt, but 
other than this issue, it does its job pretty well, so I'd first 
consider some patching/backporting rather than totally replacing it with 
a new one. Anyway, I first need to better understand what is going on 
and what is wrong with it.
This could also be related somewhat to
https://www.redhat.com/archives/libvir-list/2013-September/msg01311.html
but I suppose it is not exactly that thing.

I've already figured the source of trouble is anyway related to these 
rules added:

-A POSTROUTING -o br0 -j MASQUERADE
-A POSTROUTING -o enp0s25 -j MASQUERADE
-A POSTROUTING -o virbr2_nic -j MASQUERADE
-A POSTROUTING -o vnet0 -j MASQUERADE

Here, virbr2_nic and vnet0 are used by libvirt for arranging network 
configurations for VMs, ok. However, br0 is a main interface of this 
host with primary ip address, with enp0s25 being a physical nic of this 
host, and it is used for all sorts of regular (unrelated to 
virtualization) communications. Also, br0 is used for attaching bridged 
(as opposed to NATed) VMs managed by libvirt.

Clearly, libvirt somehow chooses to set up masquerading for literally 
all existing network interfaces here (except lo), but I can't see a real 
reason for the first two rules in the list above. Furthermore, they 
corrupt UDP broadcats coming from outside and reaching this host 
(through enp0s25/br0) such that source address gets replaced by this 
hosts primary address (as per masquerading). I've verified this by 
arranging a hand-crafted UDP listener and printing the respective source 
addresses as seen by normal userspace.

Now I've discovered that I can "eliminate" the problem by either:

1. Removing "-A POSTROUTING -o br0 -j MASQUERADE" (manually)
2. Inserting "-A POSTROUTING -s 192.168.0.0/24 -d 192.168.0.255/32 -j 
ACCEPT"
(Of course correcting rules by hand is not a solution, just a test)

So question is, how the correct rules should ideally look like? And, is 
this issue known/fixed in most current libvirt?

Thank you,

Regards,
Nikolai

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190629192637</emailId><senderName>Vincent Bernat</senderName><senderEmail>bernat@luffy.cx</senderEmail><timestampReceived>2019-06-29 19:26:37-0400</timestampReceived><subject>Re: [libvirt-users] macvtap vlan and tcp header overhead (and mtu size)</subject><body>

 ❦ 27 juin 2019 19:29 +02, "Marc Roos" &lt;M.Roos@f1-outsourcing.eu&gt;:

&gt; I can do a ping -M do -s 9000 between hosts via the vlan interface 
&gt; eth0.v101. That is as expected.
&gt;
&gt; The ping -M do -s 1500 macvtap0 and another host or macvtap1 fails. The 
&gt; maximum size that does not fragment is 1472.
&gt; That is 28 bytes??? Where have they gone? I am only using macvtap, can 
&gt; this be the combination of the parent interface being a vlan and that 
&gt; macvtap is not properly handling this? Anyone experienced something 
&gt; similar? Or can explain where these 28 bytes go?

The "-s" parameter specifies the size of the ICMP payload. You need to
add 8 bytes for the ICMP header and 20 bytes for the IP header. So, 1472
is expected with a 1500 MTU. What's not expected is 9000 on a 9000 MTU.
-- 
Write clearly - don't be too clever.
            - The Elements of Programming Style (Kernighan &amp; Plauger)

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190502062630</emailId><senderName>Harsh Gondaliya</senderName><senderEmail>harshgondaliya_vinodbhai@srmuniv.edu.in</senderEmail><timestampReceived>2019-05-02 06:26:30-0400</timestampReceived><subject>[libvirt-users] Unable to have TSO GSO feature in VM</subject><body>

[Attachment #2 (multipart/related)]

[Attachment #4 (multipart/alternative)]


I am trying to turn ON TSO in my Ubuntu Virtual machine but it gives me the
following error:
[image: image.png]
Also on doing *ethtool -k ens3* all the features are marked as [fixed].
How to use libvirt to configure VM to have TSO?

[Attachment #7 (text/html)]

&lt;div dir="ltr"&gt;I am trying to turn ON TSO in my Ubuntu Virtual machine but it gives \
me the following error:&lt;div&gt;&lt;div&gt;&lt;img src="cid:ii_jv695jt80" alt="image.png" \
width="452" height="109"&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;Also on doing &lt;i&gt;ethtool -k ens3&lt;/i&gt; \
all the features are marked as [fixed].&lt;/div&gt;&lt;div&gt;How to use libvirt to configure VM \
to have TSO?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;

--0000000000006ac9410587e1893b--


["image.png" (image/png)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190503083122</emailId><senderName>Harsh Gondaliya</senderName><senderEmail>harshgondaliya_vinodbhai@srmuniv.edu.in</senderEmail><timestampReceived>2019-05-03 08:31:22-0400</timestampReceived><subject>[libvirt-users] VM: Unable to enable scatter-gather / tx-checksumming / tcp-segmentation offload</subject><body>

[Attachment #2 (multipart/related)]

[Attachment #4 (multipart/alternative)]


In my Linux VM, I am unable to change scatter-gather / tx-checksumming /
TCP-segmentation offload features by ethtool command. I am using virtio nic
with vhostuser port backend.
It shows me an error:
Cannot change tx-checksumming
Cannot change scatter-gather
Cannot change tcp-segmentation offload
Could not change any device features

Ony running command ethtool -k ens3, I get the following:
[image: image.png]

If there is something that needs to be changed in the domain XML itself
then please guide me what changes to do?

[Attachment #7 (text/html)]

&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;In my Linux VM, I am unable to change  scatter-gather / \
tx-checksumming / TCP-segmentation offload features by ethtool command. I am using \
virtio nic with vhostuser port backend.&lt;/div&gt;&lt;div&gt;It shows me an \
error:&lt;/div&gt;&lt;div&gt;Cannot change tx-checksumming&lt;/div&gt;&lt;div&gt;&lt;div&gt;Cannot change \
scatter-gather&lt;/div&gt;&lt;div&gt;Cannot change tcp-segmentation offload&lt;/div&gt;&lt;div&gt;Could not \
change any device features&lt;/div&gt;&lt;br \
class="gmail-Apple-interchange-newline"&gt;&lt;/div&gt;&lt;div&gt;Ony running command ethtool -k \
ens3, I get the following:&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;img src="cid:ii_jv7t1v1h0" alt="image.png" \
width="452" height="251"&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;If there is something \
that needs to be changed in the domain XML itself then please guide me what changes \
to do?  &lt;/div&gt;&lt;/div&gt;

--000000000000df2f6f0587f765ce--


["image.png" (image/png)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190506134452</emailId><senderName></senderName><senderEmail>nakata</senderEmail><timestampReceived>2019-05-06 13:44:52-0400</timestampReceived><subject>[libvirt-users] disable libvirt-nwfilter</subject><body>

Hi,

i want to disable the nwfilter functionality of libvirt.
It's surely nice for some people, nevertheless i don't want libvirt to 
alter any netfilter rules, neither i want the according functionality 
even available.
I know about nwfilter-undefine, but what i'm looking for is an option to 
globally disable this functionality at all. Some config flag or similar.
How can i achieve that?


greetings

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190509173351</emailId><senderName>"Peter P."</senderName><senderEmail>p.pan48711@gmail.com</senderEmail><timestampReceived>2019-05-09 17:33:51-0400</timestampReceived><subject>[libvirt-users] Running libvirtd out of source directory connection reset error</subject><body>

Hi all,

I'm getting started with hacking around with libvirt  and am trying to
familiarize myself with launching and running an instance of libvirtd
I built from source on Centos 7.6.

Following the instructions from https://libvirt.org/compiling.html to
launch my built versions of libvirtd and virsh, I get the following
error with no other context when trying to start a domain using "virsh
start mydomain":

error: Cannot recv data: Connection reset by peer

Despite this error, I am able to run commands list virsh list.

Are there additional parameters needed to launch libvirtd or
additional services I need to start up alongside it?

Thanks,

Peter

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190510132627</emailId><senderName>lejeczek</senderName><senderEmail>peljasz@yahoo.co.uk</senderEmail><timestampReceived>2019-05-10 13:26:27-0400</timestampReceived><subject>[libvirt-users] Cannot get interface MTU - qemu quest fails to start off OpenVswitch</subject><body>

hi guys

I have a qemu guest and openvswitch bridge and the guest fails to start:

$ virsh start work8
error: Failed to start domain work8-vm-win2016
error: Cannot get interface MTU on 'ovsbr0': No such device

LXC guest which uses the same source network starts just fine.

I'm on Centos 7 with openvswitch-2.9.0-3.el7.x86_64 from
centos-openstack-pike repo and libvirt-4.5.0-10.el7_6.7.x86_64.

Would anybody care to suggest a possible reson(s) causing the failure?

many thanks, L.


["pEpkey.asc" (application/pgp-keys)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190513144055</emailId><senderName>Michel Rozpendowski</senderName><senderEmail>mro@osimis.io</senderEmail><timestampReceived>2019-05-13 14:40:55-0400</timestampReceived><subject>[libvirt-users] VM display is blank when open (but Gnome Boxes thumbnails ok)</subject><body>

[Attachment #2 (multipart/alternative)]


Hi,

I also posted this question on the IRC #virt channel but have not received
any reaction at the moment of posting this message to the mailing list.

Since I last turned off my laptop (Dell XPS-15-9570 running Ubuntu 19.04)
on Friday 10 May (I had to do it by long power press by the way), I am no
longer able to get the display of my VMs: I am getting a black screen, even
though I can see it running in the thumbnail of Gnome Boxes.
You can see the described behaviour on the following video capture:
https://youtu.be/Lv67g0foyzc.
Troubleshooting Log from Gnome Boxes is available here:
https://pastebin.com/9eWGYsJV.
It was working all properly on Friday before I turn off my laptop.

Any clue what could be wrong and how I could solve this issue (I digged the
Internet for 2 hours without success)?

Thanks in advance for your help!

Kind regards,

Michel

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;&lt;div&gt;Hi,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I also posted this \
question on the IRC #virt channel but have not received any reaction at the moment of \
posting this message to the mailing list.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Since I last \
turned off my laptop (Dell XPS-15-9570 running Ubuntu 19.04) on Friday 10 May (I had \
to do it by long power press by the way), I am no longer able to get the display of \
my VMs: I am getting a black screen, even though I can see it running in the \
thumbnail of Gnome Boxes.&lt;/div&gt;&lt;div&gt;You can see the described behaviour on the \
following video capture: &lt;a \
href="https://youtu.be/Lv67g0foyzc"&gt;https://youtu.be/Lv67g0foyzc&lt;/a&gt;.&lt;/div&gt;&lt;div&gt;Troubleshooting \
Log from Gnome Boxes is available here: &lt;a \
href="https://pastebin.com/9eWGYsJV"&gt;https://pastebin.com/9eWGYsJV&lt;/a&gt;.&lt;/div&gt;&lt;div&gt;It \
was working all properly on Friday before I turn off my \
laptop.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Any clue what could be wrong and how I could solve \
this issue (I digged the Internet for 2 hours without \
success)?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks in advance for your \
help!&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Kind \
regards,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Michel&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190513133426</emailId><senderName>"Lentes, Bernd"</senderName><senderEmail>bernd.lentes@helmholtz-muenchen.de</senderEmail><timestampReceived>2019-05-13 13:34:26-0400</timestampReceived><subject>[libvirt-users] domains paused without any obvious reason</subject><body>

Hi,

i have a two node HA-Cluster with several domains as resources.
Currently it's running in test mode.
Some domains (all on the same host) stopped running, virsh list shows them as \
"paused". All stopped at the same time (11th of may, 7:00 am), my monitoring system \
began to yell. I don't have any clue why this happened.
virsh domblkerror says for all the domains (5) "no space". The days before the \
domains were running fine and i know that all disks inside the domain should have \
enough space. Also the host is not running out of space.
The logs don't say anything sensefully, unfortunately i didn't have a log for the \
libvirtd daemon, i just configured that now. The domains are stopped each day by cron \
at 10:30 pm for a short moment, a snapshot is taken, domains are started again, the \
backing file is copied to a CIFS server and if that is finished the snapshot is \
blockcommited into the backing file. That's working fine already for several days. \
This cronjob creates a log and it's looking fine. The domains reside in naked Logical \
Volumes, the respective Volume Group has enough space.


Bernd


-- 

Bernd Lentes 
Systemadministration 
Institut für Entwicklungsgenetik 
Gebäude 35.34 - Raum 208 
HelmholtzZentrum münchen 
bernd.lentes@helmholtz-muenchen.de 
phone: +49 89 3187 1241 
phone: +49 89 3187 3827 
fax: +49 89 3187 2294 
http://www.helmholtz-muenchen.de/idg 

wer Fehler macht kann etwas lernen 
wer nichts macht kann auch nichts lernen
 

Helmholtz Zentrum Muenchen
Deutsches Forschungszentrum fuer Gesundheit und Umwelt (GmbH)
Ingolstaedter Landstr. 1
85764 Neuherberg
www.helmholtz-muenchen.de
Stellv. Aufsichtsratsvorsitzender: MinDirig. Dr. Manfred Wolter
Geschaeftsfuehrung: Prof. Dr. med. Dr. h.c. Matthias Tschoep, Heinrich Bassler, \
                Kerstin Guenther
Registergericht: Amtsgericht Muenchen HRB 6466
USt-IdNr: DE 129521671


_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20190515132246</emailId><senderName>"Lentes, Bernd"</senderName><senderEmail>bernd.lentes@helmholtz-muenchen.de</senderEmail><timestampReceived>2019-05-15 13:22:46-0400</timestampReceived><subject>[libvirt-users] domain still running although snapshot-file is deleted !?!</subject><body>

Hi,

i have a strange situation:
A domain is still running where domblklist points to a snapshot file and also dumpxml \
says the current drive is that snapshot file. But the file has been deleted hours \
ago. And the domain is still running. I can login via ssh, the database and the \
webserver are still running, domain is performant.
How can that be ?
Also lsof shows that the file is deleted:
qemu-syst 27007             qemu   15ur     REG             254,14    335609856     \
183599 /mnt/snap/sim.sn (deleted) qemu-syst 27007             qemu   16ur     REG     \
254,14    335609856     183599 /mnt/snap/sim.sn (deleted) qemu-syst 27007 27288       \
qemu   15ur     REG             254,14    335609856     183599 /mnt/snap/sim.sn \
(deleted) qemu-syst 27007 27288       qemu   16ur     REG             254,14    \
335609856     183599 /mnt/snap/sim.sn (deleted) CPU\x200/ 27007 27308       qemu   \
15ur     REG             254,14    335609856     183599 /mnt/snap/sim.sn (deleted) \
CPU\x200/ 27007 27308       qemu   16ur     REG             254,14    335609856     \
183599 /mnt/snap/sim.sn (deleted) CPU\x201/ 27007 27309       qemu   15ur     REG     \
254,14    335609856     183599 /mnt/snap/sim.sn (deleted) CPU\x201/ 27007 27309       \
qemu   16ur     REG             254,14    335609856     183599 /mnt/snap/sim.sn \
(deleted) vnc_worke 27007 27321       qemu   15ur     REG             254,14    \
335609856     183599 /mnt/snap/sim.sn (deleted) vnc_worke 27007 27321       qemu   \
16ur     REG             254,14    335609856     183599 /mnt/snap/sim.sn (deleted)

Bernd

-- 

Bernd Lentes 
Systemadministration 
Institut für Entwicklungsgenetik 
Gebäude 35.34 - Raum 208 
HelmholtzZentrum münchen 
bernd.lentes@helmholtz-muenchen.de 
phone: +49 89 3187 1241 
phone: +49 89 3187 3827 
fax: +49 89 3187 2294 
http://www.helmholtz-muenchen.de/idg 

wer Fehler macht kann etwas lernen 
wer nichts macht kann auch nichts lernen
 

Helmholtz Zentrum Muenchen
Deutsches Forschungszentrum fuer Gesundheit und Umwelt (GmbH)
Ingolstaedter Landstr. 1
85764 Neuherberg
www.helmholtz-muenchen.de
Stellv. Aufsichtsratsvorsitzender: MinDirig. Dr. Manfred Wolter
Geschaeftsfuehrung: Prof. Dr. med. Dr. h.c. Matthias Tschoep, Heinrich Bassler, \
                Kerstin Guenther
Registergericht: Amtsgericht Muenchen HRB 6466
USt-IdNr: DE 129521671


_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20190516160200</emailId><senderName>Thomas Stein</senderName><senderEmail>hello@himbee.re</senderEmail><timestampReceived>2019-05-16 16:02:00-0400</timestampReceived><subject>[libvirt-users] surprising &lt;backingStore type='file'&gt; setting in domain.xml</subject><body>

Hello all.

My currently used versions: libvirt-5.2.0 and qemu-4.0.0.

Here is my problem. I'm struggeling since a few weeks with a strange 
behaviour by either qemu or libvirt. After a reboot of
the hardware node the $domain.xml contains suddenly a backingStore 
setting which was not there before reboot.
Something like that:

   &lt;devices&gt;
     &lt;emulator&gt;/usr/bin/qemu-system-x86_64&lt;/emulator&gt;
     &lt;disk type='file' device='disk'&gt;
       &lt;driver name='qemu' type='qcow2'/&gt;
       &lt;source 
file='/var/lib/libvirt/shinymail/shinymail_weekly.qcow2-2019-05-15'/&gt;
       &lt;backingStore type='file'&gt;
         &lt;format type='qcow2'/&gt;
         &lt;source file='/var/lib/libvirt/images/shinymail.qcow2'/&gt;
       &lt;/backingStore&gt;
       &lt;target dev='vda' bus='virtio'/&gt;
       &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x07' 
function='0x0'/&gt;
     &lt;/disk&gt;
...

This obviousely happens after a backup has been running. The Backup 
Script looks like this:

&lt;snip&gt;
virsh snapshot-create-as --domain shinymail weekly --diskspec 
vda,file=/var/lib/libvirt/shinymail/shinymail_weekly.qcow2-$(date 
+%Y-%m-%d) --disk-only --atomic --no-metadata

cp ...

virsh blockcommit shinymail vda --active --verbose --pivot
&lt;snip&gt;

So after that "dmblklist shinymail" does show the right source file but 
after a reboot it tries to use the weekly snapshot
again which leads to filesystem errors.

Someone has an idea what could cause such a behaviour?

cheers
t.


--
libvir-list mailing list
libvir-list@redhat.com
https://www.redhat.com/mailman/listinfo/libvir-list

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190519133650</emailId><senderName>Avi Cohen</senderName><senderEmail>acohen@ves.io</senderEmail><timestampReceived>2019-05-19 13:36:50-0400</timestampReceived><subject>[libvirt-users] virtio-user intarfece</subject><body>

[Attachment #2 (multipart/alternative)]


Hello all
i have multiple workload containers connected to my DPDK-app.
I have another special container - which all packets are mirrored to it.
Is it possible for zero-copy reason - that all virtio interfaces shared
memory between my DPDK-app  and workload containers - can be accessed by
this special container ?
it means that for every workload container X this is a shared memory
between the:

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;Hello all&lt;div&gt;i have multiple workload containers connected to my \
DPDK-app.&lt;/div&gt;&lt;div&gt;I have another special container - which all packets are mirrored \
to it.&lt;/div&gt;&lt;div&gt;Is it possible for zero-copy reason - that all virtio interfaces \
shared memory between my DPDK-app   and workload containers - can be accessed by this \
special container ?&lt;/div&gt;&lt;div&gt;it means that for every workload container X this is a \
shared memory between the:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190513161905</emailId><senderName>"Lentes, Bernd"</senderName><senderEmail>bernd.lentes@helmholtz-muenchen.de</senderEmail><timestampReceived>2019-05-13 16:19:05-0400</timestampReceived><subject>Re: [libvirt-users] domains paused without any obvious reason</subject><body>



----- On May 13, 2019, at 3:34 PM, Bernd Lentes bernd.lentes@helmholtz-muenchen.de wrote:

&gt; Hi,
&gt; 
&gt; i have a two node HA-Cluster with several domains as resources.
&gt; Currently it's running in test mode.
&gt; Some domains (all on the same host) stopped running, virsh list shows them as
&gt; "paused".
&gt; All stopped at the same time (11th of may, 7:00 am), my monitoring system began
&gt; to yell.
&gt; I don't have any clue why this happened.
&gt; virsh domblkerror says for all the domains (5) "no space". The days before the
&gt; domains were running fine and i know that all disks inside the domain should
&gt; have enough space.
&gt; Also the host is not running out of space.
&gt; The logs don't say anything sensefully, unfortunately i didn't have a log for
&gt; the libvirtd daemon, i just configured that now.
&gt; The domains are stopped each day by cron at 10:30 pm for a short moment, a
&gt; snapshot is taken, domains are started again, the backing file is copied to a
&gt; CIFS server and if that is finished the snapshot is blockcommited into the
&gt; backing file.
&gt; That's working fine already for several days. This cronjob creates a log and
&gt; it's looking fine.
&gt; The domains reside in naked Logical Volumes, the respective Volume Group has
&gt; enough space.
&gt; 
&gt; 

I resumed one of the guests and it continued without any problem.
The log doesn't indicate any problem, and df -h shows enough space on
all partitions.


Bernd
 

Helmholtz Zentrum Muenchen
Deutsches Forschungszentrum fuer Gesundheit und Umwelt (GmbH)
Ingolstaedter Landstr. 1
85764 Neuherberg
www.helmholtz-muenchen.de
Stellv. Aufsichtsratsvorsitzender: MinDirig. Dr. Manfred Wolter
Geschaeftsfuehrung: Prof. Dr. med. Dr. h.c. Matthias Tschoep, Heinrich Bassler, Kerstin Guenther
Registergericht: Amtsgericht Muenchen HRB 6466
USt-IdNr: DE 129521671

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190508163432</emailId><senderName>Alex Ivanov</senderName><senderEmail>gnidorah@ya.ru</senderEmail><timestampReceived>2019-05-08 16:34:32-0400</timestampReceived><subject>Re: [libvirt-users] [iGVT-g] GVT-g - suboptimal user experience</subject><body>

Hello.

All features are about usability and simple user experience.

1. Its about local display / dmabuf feature. Currently user needs to use virt-viewer \
tool. But virt-manager already incorporates graphical console. It would be nice if it \
could support accelerated gvt-g local display. Preferably with minimum performance \
overhead. Also virt-manager should allow to use mdev videocard alone, without \
requiring to use additional primary virtual adapter like QXL or Cirrus

2. Currently with gvt solution there few mdev devices each with fixed resolution. \
User should be able to configure own resolutions for devices at host without \
additional manipulations in guest. Ideally, resolution should be dynamic and change \
appropriately on resize of virt-manager window

3. This is about windows guest and VM configured with UEFI (OVMF) instead of BIOS. I \
head its about dropping OpRegion dependency in Windows guest driver to support that \
configuration

Thank you.

20.04.2019, 05:14, "Yuan, Hang" &lt;hang.yuan@intel.com&gt;:
&gt; Could you elaborate a bit more about the first two features? On UEFI VMs support \
&gt; (Windows guest), do you mean enabling Windows VM display on UEFI? Thanks. 
&gt; &gt; -----Original Message-----
&gt; &gt; From: iGVT-g [mailto:igvt-g-bounces@lists.01.org] On Behalf Of Alex Ivanov
&gt; &gt; Sent: Friday, April 19, 2019 2:51 AM
&gt; &gt; To: libvirt-users@redhat.com; igvt-g@lists.01.org; virt-tools-list@redhat.com
&gt; &gt; Subject: [iGVT-g] GVT-g - suboptimal user experience
&gt; &gt; 
&gt; &gt; Hi.
&gt; &gt; In the current state of gvt-g the user experience is suboptimal.
&gt; &gt; So my question is what are the ETAs for following features:
&gt; &gt; 1. Accelerated virt-manager console using gvt-g device 2. Custom resolutions
&gt; &gt; or dynamic resolution 3. UEFI VMs support (Windows guest) Thanks.
&gt; &gt; _______________________________________________
&gt; &gt; iGVT-g mailing list
&gt; &gt; iGVT-g@lists.01.org
&gt; &gt; https://lists.01.org/mailman/listinfo/igvt-g

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20190502092239</emailId><senderName>Lothar Schilling</senderName><senderEmail>ls@proasyl.de</senderEmail><timestampReceived>2019-05-02 09:22:39-0400</timestampReceived><subject>[libvirt-users] libvirtd not starting</subject><body>

Hi everybody,

I've set up an new CentOS 7.6.1810 server. Then, via yum I installed
qemu-kvm libvirt libvirt-python libguestfs-tools virt-install. There
were no problems. But when I try to

systemctl start libvirtd

I get the following message:

"libvirtd: process 472: arguments to dbus_message_iter_append_basic()
were incorrect, assertion "_dbus_check_is_valid_utf8 (*string_p)" failed
in file ../../dbus/dbus-message.c line 2754."

Starting libvirtd manually just by issuing the command "libvirtd"
without any further arguments is working, though.

I do not have the slightest idea what is going on, especially as I
didn't change anything about the config files.

Any help would be appreciated, thank you

Lothar Schilling

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190523171956</emailId><senderName>Fuzail Ahmad</senderName><senderEmail>fuzail.nitkkr@gmail.com</senderEmail><timestampReceived>2019-05-23 17:19:56-0400</timestampReceived><subject>[libvirt-users] [Libvirt failed to claim Virtual Functions on hostdev network after VM reboot]</subject><body>

[Attachment #2 (multipart/alternative)]


Problem Statement:

Libvirt failed to claim Virtual Functions  on hostdev network after VM
reboot.

Version-Release number of selected component (if applicable):

libvirtd (libvirt) 2.0.0

kernel-4.1.12-112.16.4.el7uek.x86_64

Reproducible: Not always


Description:

I am doing a reboot of Virtual machines and sometimes one of the VM
does not start and fail with the following error
In total I have spun 3 VMs out of which 2 gets started and 1 of them
fail with the below error.

[root@sriov2 ~]# virsh start VM3
error: Failed to attach interface
error: internal error: network 'hostnet' requires exclusive access to
interfaces, but none are available

[root@sriov2 ~]# virsh net-dumpxml hostnet
&lt;network connections='2'&gt;
  &lt;name&gt;hostnet&lt;/name&gt;
  &lt;uuid&gt;c1fb4ead-21b8-4d69-8ad9-669c55b3dfc7&lt;/uuid&gt;
  &lt;forward mode='hostdev' managed='yes'&gt;
    &lt;address type='pci' domain='0x0000' bus='0x0f' slot='0x10' function='0x0'/&gt;
    &lt;address type='pci' domain='0x0000' bus='0x0f' slot='0x10' function='0x2'/&gt;
  &lt;/forward&gt;
&lt;/network&gt;


However, "ip link show" command shows 8 VFs in total.

# ip link show ens2
 ens2: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 9000 qdisc mq state UP
mode DEFAULT qlen 1000
    link/ether 00:0a:f7:d5:a7:50 brd ff:ff:ff:ff:ff:ff
    vf 0 MAC 52:54:00:6d:7c:a0, spoof checking off, link-state auto
    vf 1 MAC 52:54:00:44:c9:b6, spoof checking off, link-state auto
    vf 2 MAC 52:54:00:30:7a:86, spoof checking off, link-state auto
    vf 3 MAC c6:9a:1b:82:90:ea, spoof checking off, link-state auto
    vf 4 MAC 46:db:e2:33:c7:a4, spoof checking off, link-state auto
    vf 5 MAC 76:65:e1:f7:82:78, spoof checking off, link-state auto
    vf 6 MAC 8e:a0:8b:e5:1a:66, spoof checking off, link-state auto
    vf 7 MAC ba:f4:83:19:80:bf, spoof checking off, link-state auto
#

Please, letme know if I need to attach any additional information.


Regards

Fuzail

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;&lt;div&gt;&lt;pre class="gmail-bz_comment_text"&gt;Problem \
Statement:&lt;/pre&gt;&lt;/div&gt;Libvirt failed to claim Virtual Functions   on hostdev network \
after VM reboot.&lt;div id="gmail-bugzilla-body"&gt;&lt;form name="changeform" \
id="gmail-changeform" action="process_bug.cgi" method="post"&gt;&lt;div \
id="gmail-comments"&gt;&lt;table class="gmail-bz_comment_table"&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;div \
class="gmail-bz_comment gmail-bz_first_comment" id="gmail-c0"&gt;&lt;pre \
class="gmail-bz_comment_text"&gt;Version-Release number of selected component (if \
applicable): &lt;/pre&gt;&lt;pre class="gmail-bz_comment_text"&gt;libvirtd (libvirt) \
2.0.0&lt;br&gt;&lt;/pre&gt;&lt;pre class="gmail-bz_comment_text"&gt;kernel-4.1.12-112.16.4.el7uek.x86_64&lt;/pre&gt;&lt;pre \
class="gmail-bz_comment_text"&gt;Reproducible: Not always&lt;/pre&gt;&lt;pre \
class="gmail-bz_comment_text"&gt;&lt;br&gt;&lt;/pre&gt;&lt;pre \
class="gmail-bz_comment_text"&gt;Description:&lt;/pre&gt;&lt;pre class="gmail-bz_comment_text"&gt;I \
am doing a reboot of Virtual machines and sometimes one of the VM does not start and \
fail with the following error In total I have spun 3 VMs out of which 2 gets started \
and 1 of them fail with the below error.&lt;br&gt;&lt;div id="gmail-bugzilla-body"&gt;&lt;div \
id="gmail-comments"&gt;&lt;table class="gmail-bz_comment_table"&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;div \
class="gmail-bz_comment gmail-bz_first_comment" id="gmail-c0"&gt;&lt;pre \
                class="gmail-bz_comment_text"&gt;[root@sriov2 ~]# virsh start VM3
error: Failed to attach interface
error: internal error: network 'hostnet' requires exclusive access to \
interfaces, but none are available &lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/div&gt;&lt;/div&gt; \
&lt;div id="gmail-bugzilla-body"&gt;&lt;form name="changeform" id="gmail-changeform" \
action="process_bug.cgi" method="post"&gt;&lt;div id="gmail-comments"&gt;&lt;table \
class="gmail-bz_comment_table"&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;div class="gmail-bz_comment \
gmail-bz_first_comment" id="gmail-c0"&gt;&lt;pre class="gmail-bz_comment_text"&gt;[root@sriov2 \
~]# virsh net-dumpxml hostnet &lt;network connections='2'&gt;
  &lt;name&gt;hostnet&lt;/name&gt;
  &lt;uuid&gt;c1fb4ead-21b8-4d69-8ad9-669c55b3dfc7&lt;/uuid&gt;
  &lt;forward mode='hostdev' managed='yes'&gt;
    &lt;address type='pci' domain='0x0000' bus='0x0f' \
slot='0x10' function='0x0'/&gt;  &lt;address type='pci' \
domain='0x0000' bus='0x0f' slot='0x10' \
function='0x2'/&gt;  &lt;/forward&gt;
&lt;/network&gt;

&lt;/pre&gt;&lt;pre class="gmail-bz_comment_text"&gt;However, "ip link show" command \
shows 8 VFs in total.&lt;/pre&gt;&lt;pre class="gmail-bz_comment_text"&gt;# ip link show ens2&lt;br&gt; \
ens2: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 9000 qdisc mq state UP mode DEFAULT \
qlen 1000&lt;br&gt;      link/ether 00:0a:f7:d5:a7:50 brd ff:ff:ff:ff:ff:ff&lt;br&gt;      vf 0 \
MAC 52:54:00:6d:7c:a0, spoof checking off, link-state auto&lt;br&gt;      vf 1 MAC \
52:54:00:44:c9:b6, spoof checking off, link-state auto&lt;br&gt;      vf 2 MAC \
52:54:00:30:7a:86, spoof checking off, link-state auto&lt;br&gt;      vf 3 MAC \
c6:9a:1b:82:90:ea, spoof checking off, link-state auto&lt;br&gt;      vf 4 MAC \
46:db:e2:33:c7:a4, spoof checking off, link-state auto&lt;br&gt;      vf 5 MAC \
76:65:e1:f7:82:78, spoof checking off, link-state auto&lt;br&gt;      vf 6 MAC \
8e:a0:8b:e5:1a:66, spoof checking off, link-state auto&lt;br&gt;      vf 7 MAC \
ba:f4:83:19:80:bf, spoof checking off, link-state auto&lt;br&gt;#&lt;br&gt;&lt;/pre&gt;&lt;pre \
class="gmail-bz_comment_text"&gt;Please, letme know if I need to attach any additional \
information.&lt;/pre&gt;&lt;pre class="gmail-bz_comment_text"&gt;&lt;br&gt;&lt;/pre&gt;&lt;pre \
class="gmail-bz_comment_text"&gt;Regards&lt;/pre&gt;&lt;pre \
class="gmail-bz_comment_text"&gt;Fuzail&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/div&gt;&lt;/form&gt;&lt;/div&gt; \
&lt;/pre&gt;&lt;pre class="gmail-bz_comment_text"&gt;&lt;br&gt;&lt;/pre&gt;&lt;br&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/div&gt;&lt;/form&gt;&lt;/div&gt;&lt;/div&gt;




_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190529073237</emailId><senderName>jarek</senderName><senderEmail>jarek@poczta.srv.pl</senderEmail><timestampReceived>2019-05-29 07:32:37-0400</timestampReceived><subject>[libvirt-users] Snapshot of single block device</subject><body>

Hello!

I have a guest with one qcow2 disk image (vda) and one physical
partition (sda) from host. When I'm trying to get snapshot with:

virsh snapshot-create-as .....

It fails with message: error: unsupported configuration: source for
disk 'sda' is not a regular file; refusing to generate external
snapshot name

I understand, that it is not possible to make a snapshot of physical
device, but it is enough for me to take snapshot of vda. How to force
virsh to ignore sda ?

best regards
Jarek

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190529145923</emailId><senderName>"Lentes, Bernd"</senderName><senderEmail>bernd.lentes@helmholtz-muenchen.de</senderEmail><timestampReceived>2019-05-29 14:59:23-0400</timestampReceived><subject>[libvirt-users] logging of domains</subject><body>

Hi,

recently i had some domains stopped without any obvious reason for me. Unfortunately \
i didn't find the cause. I'd like to log information about the domains that i have \
more information the next time this will happen. In /etc/libvirt/libvirtd.conf i \
have: log_level = 3
log_outputs="3:file:/var/log/libvirt/libvirtd.log"
which creates enormous log files, but with logrotate and xz i can manage that. But i \
think this is just related to libvirtd.
The logs for the domains under /var/log/libvirt/qemu are poor and very small, nearly \
no information. Is there a way to be more verbose with the domains so that i may find \
helpful information in these logs when the domains stop for the next time ?

Thanks.


Bernd
-- 

Bernd Lentes 
Systemadministration 
Institut für Entwicklungsgenetik 
Gebäude 35.34 - Raum 208 
HelmholtzZentrum münchen 
bernd.lentes@helmholtz-muenchen.de 
phone: +49 89 3187 1241 
phone: +49 89 3187 3827 
fax: +49 89 3187 2294 
http://www.helmholtz-muenchen.de/idg 

wer Fehler macht kann etwas lernen 
wer nichts macht kann auch nichts lernen
 

Helmholtz Zentrum Muenchen
Deutsches Forschungszentrum fuer Gesundheit und Umwelt (GmbH)
Ingolstaedter Landstr. 1
85764 Neuherberg
www.helmholtz-muenchen.de
Stellv. Aufsichtsratsvorsitzender: MinDirig. Dr. Manfred Wolter
Geschaeftsfuehrung: Prof. Dr. med. Dr. h.c. Matthias Tschoep, Heinrich Bassler, \
                Kerstin Guenther
Registergericht: Amtsgericht Muenchen HRB 6466
USt-IdNr: DE 129521671


_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20190531014409</emailId><senderName>Joshua Kramer</senderName><senderEmail>joskra42.list@gmail.com</senderEmail><timestampReceived>2019-05-31 01:44:09-0400</timestampReceived><subject>[libvirt-users] Easy solution for custom firewall rules- is it possible?</subject><body>

Hello All-

I've looked in several places and haven't found an answer to this
question: is it possible to have libvirt add custom rules to iptables
for virtual network interfaces?  I took a look at the "Firewall and
Network Filtering in Libvirt" page and it seems overly complicated for
what I want to do.

Given an interface virbr2 and its network 192.168.4.0/24, libvirt
installs the following rules in iptables.  Essentially, these rules
will drop any packets for the interface virbr2 where the source or
destination is not on the 192.168.4.0/24 network.

-P FORWARD ACCEPT
-A FORWARD -d 192.168.4.0/24 -o virbr2 -j ACCEPT
-A FORWARD -s 192.168.4.0/24 -i virbr2 -j ACCEPT
-A FORWARD -i virbr2 -o virbr2 -j ACCEPT
-A FORWARD -o virbr2 -j REJECT --reject-with icmp-port-unreachable
-A FORWARD -i virbr2 -j REJECT --reject-with icmp-port-unreachable

I have a VPN server on the 4/24 network- and it hands out addresses in
the 8/24 network.  So I would like libvirt to also create the
following rules in iptables:

-A FORWARD -d 192.168.8.0/24 -o virbr2 -j ACCEPT
-A FORWARD -s 192.168.8.0/24 -i virbr2 -j ACCEPT

I've tried creating direct rules in firewalld for the FORWARD_direct
chain.  Firewalld happily creates those rules, but they are never
reached, because they fall AFTER the libvirt rules.  I've also tried
creating an IP address on the virbr2 interface in the 8/24 network,
but that doesn't work either.  How can I get this done?

Thanks!!
-JK

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190529075540</emailId><senderName>Peter Krempa</senderName><senderEmail>pkrempa@redhat.com</senderEmail><timestampReceived>2019-05-29 07:55:40-0400</timestampReceived><subject>Re: [libvirt-users] Snapshot of single block device</subject><body>

[Attachment #2 (multipart/signed)]


On Wed, May 29, 2019 at 09:32:37 +0200, jarek wrote:
&gt; Hello!
&gt; 
&gt; I have a guest with one qcow2 disk image (vda) and one physical
&gt; partition (sda) from host. When I'm trying to get snapshot with:
&gt; 
&gt; virsh snapshot-create-as .....
&gt; 
&gt; It fails with message: error: unsupported configuration: source for
&gt; disk 'sda' is not a regular file; refusing to generate external
&gt; snapshot name

According to this error message it looks like you are attempting to do
an external snapshot, e.g. by using --disk-only.

This is fortunate because external snapshots can be selected on a per
disk basis:

&gt; 
&gt; I understand, that it is not possible to make a snapshot of physical
&gt; device, but it is enough for me to take snapshot of vda. How to force
&gt; virsh to ignore sda ?

--diskspec sda,snapshot=no

["signature.asc" (application/pgp-signature)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190529113512</emailId><senderName>jarek</senderName><senderEmail>jarek@poczta.srv.pl</senderEmail><timestampReceived>2019-05-29 11:35:12-0400</timestampReceived><subject>Re: [libvirt-users] Snapshot of single block device</subject><body>

Hi,

W dniu 29.05.2019, śro o godzinie 09∶55 +0200, użytkownik Peter Krempa
napisał:
&gt; I understand, that it is not possible to make a snapshot of
&gt; &gt; physical
&gt; &gt; device, but it is enough for me to take snapshot of vda. How to
&gt; &gt; force
&gt; &gt; virsh to ignore sda ?
&gt; 
&gt; --diskspec sda,snapshot=no

now it works, thanks a lot!

best regards
Jarek

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190524103313</emailId><senderName>Erik Skultety</senderName><senderEmail>eskultet@redhat.com</senderEmail><timestampReceived>2019-05-24 10:33:13-0400</timestampReceived><subject>Re: [libvirt-users] [Libvirt failed to claim Virtual Functions on hostdev network after VM reboot]</subject><body>

On Thu, May 23, 2019 at 10:37:56PM +0530, Fuzail Ahmad wrote:
&gt; Problem Statement:
&gt;
&gt; Libvirt failed to claim Virtual Functions  on hostdev network after VM
&gt; reboot.
&gt;
&gt; Version-Release number of selected component (if applicable):
&gt;
&gt; libvirtd (libvirt) 2.0.0

I'd just like to point out that 2.0.0 is very old libvirt, even debian 9 has
3.0.n, can you verify you're experiencing the same kind of issue with the
current upstream?

Regards,
Erik

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190502094352</emailId><senderName>Martin Kletzander</senderName><senderEmail>mkletzan@redhat.com</senderEmail><timestampReceived>2019-05-02 09:43:52-0400</timestampReceived><subject>Re: [libvirt-users] libvirtd not starting</subject><body>

[Attachment #2 (multipart/signed)]


On Thu, May 02, 2019 at 11:22:39AM +0200, Lothar Schilling wrote:
&gt; Hi everybody,
&gt; 
&gt; I've set up an new CentOS 7.6.1810 server. Then, via yum I installed
&gt; qemu-kvm libvirt libvirt-python libguestfs-tools virt-install. There
&gt; were no problems. But when I try to
&gt; 
&gt; systemctl start libvirtd
&gt; 
&gt; I get the following message:
&gt; 
&gt; "libvirtd: process 472: arguments to dbus_message_iter_append_basic()
&gt; were incorrect, assertion "_dbus_check_is_valid_utf8 (*string_p)" failed
&gt; in file ../../dbus/dbus-message.c line 2754."
&gt; 

Firstly I would make sure that all the packages are up to date.  I'm not sure
what the relevant versions are on CentOS 7.6.1810, so saying what versio you
have installed might help later.

This message actually doesn't look like it comes from libvirt.  Are there few more \
lines in a log somewhere?

&gt; Starting libvirtd manually just by issuing the command "libvirtd"
&gt; without any further arguments is working, though.
&gt; 

As root?  This would also make sense if the communication that fails with the
above error is happening between libvirtd and systemd (when the daemon is
started by systemd).

&gt; I do not have the slightest idea what is going on, especially as I
&gt; didn't change anything about the config files.
&gt; 

I'm not really sure what the daemon is supposed to tell systemd apart
sd_notify() when it is starting.  Maybe it is some value from the environment that \
we're sending and the error originates there, actually.  Like the hostname or \
something similar.  Again, having more logs would help as I too don't really know \
what is going on in there.

&gt; Any help would be appreciated, thank you
&gt; 
&gt; Lothar Schilling
&gt; 
&gt; _______________________________________________
&gt; libvirt-users mailing list
&gt; libvirt-users@redhat.com
&gt; https://www.redhat.com/mailman/listinfo/libvirt-users


["signature.asc" (application/pgp-signature)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190502100805</emailId><senderName>Lothar Schilling</senderName><senderEmail>ls@proasyl.de</senderEmail><timestampReceived>2019-05-02 10:08:05-0400</timestampReceived><subject>Re: [libvirt-users] libvirtd not starting</subject><body>

Am 02.05.2019 um 11:43 schrieb Martin Kletzander:
&gt; On Thu, May 02, 2019 at 11:22:39AM +0200, Lothar Schilling wrote:
&gt; &gt; Hi everybody,
&gt; &gt; 
&gt; &gt; I've set up an new CentOS 7.6.1810 server. Then, via yum I installed
&gt; &gt; qemu-kvm libvirt libvirt-python libguestfs-tools virt-install. There
&gt; &gt; were no problems. But when I try to
&gt; &gt; 
&gt; &gt; systemctl start libvirtd
&gt; &gt; 
&gt; &gt; I get the following message:
&gt; &gt; 
&gt; &gt; "libvirtd: process 472: arguments to dbus_message_iter_append_basic()
&gt; &gt; were incorrect, assertion "_dbus_check_is_valid_utf8 (*string_p)" failed
&gt; &gt; in file ../../dbus/dbus-message.c line 2754."
&gt; &gt; 
&gt; 
&gt; Firstly I would make sure that all the packages are up to date.  I'm
&gt; not sure
&gt; what the relevant versions are on CentOS 7.6.1810, so saying what
&gt; versio you
&gt; have installed might help later.

All installed packages are up to date.

&gt; 
&gt; This message actually doesn't look like it comes from libvirt.  Are
&gt; there few more lines in a log somewhere?
&gt; 
&gt; &gt; Starting libvirtd manually just by issuing the command "libvirtd"
&gt; &gt; without any further arguments is working, though.
&gt; &gt; 
&gt; 
&gt; As root?  This would also make sense if the communication that fails
&gt; with the
&gt; above error is happening between libvirtd and systemd (when the daemon is
&gt; started by systemd).
&gt; 
&gt; &gt; I do not have the slightest idea what is going on, especially as I
&gt; &gt; didn't change anything about the config files.
&gt; &gt; 
&gt; 
&gt; I'm not really sure what the daemon is supposed to tell systemd apart
&gt; sd_notify() when it is starting.  Maybe it is some value from the
&gt; environment that we're sending and the error originates there,
&gt; actually.  Like the hostname or something similar.  Again, having more
&gt; logs would help as I too don't really know what is going on in there.
&gt; 
&gt; &gt; Any help would be appreciated, thank you
&gt; &gt; 
&gt; &gt; Lothar Schilling
&gt; &gt; 
&gt; &gt; _______________________________________________
&gt; &gt; libvirt-users mailing list
&gt; &gt; libvirt-users@redhat.com
&gt; &gt; https://www.redhat.com/mailman/listinfo/libvirt-users

I turned logging up to maximum. That's all I get:

May  2 11:02:06 hl308-3 systemd: Starting Virtualization daemon...
May  2 11:02:06 hl308-3 libvirtd: 472: info : libvirt version: 4.5.0, package: \
10.el7_6.7 (CentOS BuildSystem &lt;http://bugs.centos.org&gt;, 2019-04-24-14:04:12, \
                x86-01.bsys.centos.org)
May  2 11:02:06 hl308-3 libvirtd: 472: info : hostname: my.server.net
May  2 11:02:06 hl308-3 libvirtd: 472: info : virEventPollAddHandle:140 : \
                EVENT_POLL_ADD_HANDLE: watch=1 fd=6 events=1 cb=0x7eff3bbde300 \
                opaque=(nil) ff=(nil)
May  2 11:02:06 hl308-3 libvirtd: 472: info : virEventPollAddHandle:140 : \
EVENT_POLL_ADD_HANDLE: watch=2 fd=8 events=1 cb=0x7eff3bd06760 opaque=0x558f9db485a0 \
                ff=(nil)
May  2 11:02:06 hl308-3 systemd: Started Virtualization daemon.
May  2 11:02:06 hl308-3 libvirtd: 472: info : virEventPollAddHandle:140 : \
EVENT_POLL_ADD_HANDLE: watch=3 fd=11 events=0 cb=0x7eff3bcfb420 opaque=0x558f9db69520 \
                ff=0x7eff3bcfb3d0
May  2 11:02:06 hl308-3 libvirtd: 472: info : virEventPollAddHandle:140 : \
EVENT_POLL_ADD_HANDLE: watch=4 fd=12 events=0 cb=0x7eff3bcfb420 opaque=0x558f9db69700 \
                ff=0x7eff3bcfb3d0
May  2 11:02:06 hl308-3 libvirtd: process 472: arguments to \
dbus_message_iter_append_basic() were incorrect, assertion "_dbus_check_is_valid_utf8 \
                (*string_p)" failed in file ../../dbus/dbus-message.c line 2754.
May  2 11:02:06 hl308-3 libvirtd: This is normally a bug in some application using \
                the D-Bus library.
May  2 11:02:06 hl308-3 libvirtd: D-Bus not built with -rdynamic so unable to print a \
                backtrace
May  2 11:02:06 hl308-3 systemd: libvirtd.service: main process exited, code=killed, \
status=6/ABRT



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20190502110732</emailId><senderName>Michal Privoznik</senderName><senderEmail>mprivozn@redhat.com</senderEmail><timestampReceived>2019-05-02 11:07:32-0400</timestampReceived><subject>Re: [libvirt-users] libvirtd not starting</subject><body>

On 5/2/19 12:08 PM, Lothar Schilling wrote:

&gt; I turned logging up to maximum. That's all I get:
&gt; 
&gt; May  2 11:02:06 hl308-3 systemd: Starting Virtualization daemon...
&gt; May  2 11:02:06 hl308-3 libvirtd: 472: info : libvirt version: 4.5.0, package: \
&gt; 10.el7_6.7 (CentOS BuildSystem &lt;http://bugs.centos.org&gt;, 2019-04-24-14:04:12, \
&gt;                 x86-01.bsys.centos.org)
&gt; May  2 11:02:06 hl308-3 libvirtd: 472: info : hostname: my.server.net
&gt; May  2 11:02:06 hl308-3 libvirtd: 472: info : virEventPollAddHandle:140 : \
&gt; EVENT_POLL_ADD_HANDLE: watch=1 fd=6 events=1 cb=0x7eff3bbde300 opaque=(nil) \
&gt;                 ff=(nil)
&gt; May  2 11:02:06 hl308-3 libvirtd: 472: info : virEventPollAddHandle:140 : \
&gt; EVENT_POLL_ADD_HANDLE: watch=2 fd=8 events=1 cb=0x7eff3bd06760 \
&gt;                 opaque=0x558f9db485a0 ff=(nil)
&gt; May  2 11:02:06 hl308-3 systemd: Started Virtualization daemon.
&gt; May  2 11:02:06 hl308-3 libvirtd: 472: info : virEventPollAddHandle:140 : \
&gt; EVENT_POLL_ADD_HANDLE: watch=3 fd=11 events=0 cb=0x7eff3bcfb420 \
&gt;                 opaque=0x558f9db69520 ff=0x7eff3bcfb3d0
&gt; May  2 11:02:06 hl308-3 libvirtd: 472: info : virEventPollAddHandle:140 : \
&gt; EVENT_POLL_ADD_HANDLE: watch=4 fd=12 events=0 cb=0x7eff3bcfb420 \
&gt;                 opaque=0x558f9db69700 ff=0x7eff3bcfb3d0
&gt; May  2 11:02:06 hl308-3 libvirtd: process 472: arguments to \
&gt; dbus_message_iter_append_basic() were incorrect, assertion \
&gt; "_dbus_check_is_valid_utf8 (*string_p)" failed in file ../../dbus/dbus-message.c \
&gt;                 line 2754.
&gt; May  2 11:02:06 hl308-3 libvirtd: This is normally a bug in some application using \
&gt;                 the D-Bus library.
&gt; May  2 11:02:06 hl308-3 libvirtd: D-Bus not built with -rdynamic so unable to print \
&gt;                 a backtrace
&gt; May  2 11:02:06 hl308-3 systemd: libvirtd.service: main process exited, \
&gt; code=killed, status=6/ABRT

This is not the maximum loggin. We'll need to see debug logs:

https://wiki.libvirt.org/page/DebugLogs

and perhaps running libvirtd under gdb and getting a stack trace (with 
all strings expanded) might help too.

Michal

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20190502122528</emailId><senderName>Martin Kletzander</senderName><senderEmail>mkletzan@redhat.com</senderEmail><timestampReceived>2019-05-02 12:25:28-0400</timestampReceived><subject>Re: [libvirt-users] libvirtd not starting</subject><body>

[Attachment #2 (multipart/signed)]


On Thu, May 02, 2019 at 01:07:32PM +0200, Michal Privoznik wrote:
&gt; On 5/2/19 12:08 PM, Lothar Schilling wrote:
&gt; 
&gt; &gt; I turned logging up to maximum. That's all I get:
&gt; &gt; 
&gt; &gt; May  2 11:02:06 hl308-3 systemd: Starting Virtualization daemon...
&gt; &gt; May  2 11:02:06 hl308-3 libvirtd: 472: info : libvirt version: 4.5.0, package: \
&gt; &gt; 10.el7_6.7 (CentOS BuildSystem &lt;http://bugs.centos.org&gt;, 2019-04-24-14:04:12, \
&gt; &gt;                 x86-01.bsys.centos.org)
&gt; &gt; May  2 11:02:06 hl308-3 libvirtd: 472: info : hostname: my.server.net
&gt; &gt; May  2 11:02:06 hl308-3 libvirtd: 472: info : virEventPollAddHandle:140 : \
&gt; &gt; EVENT_POLL_ADD_HANDLE: watch=1 fd=6 events=1 cb=0x7eff3bbde300 opaque=(nil) \
&gt; &gt;                 ff=(nil)
&gt; &gt; May  2 11:02:06 hl308-3 libvirtd: 472: info : virEventPollAddHandle:140 : \
&gt; &gt; EVENT_POLL_ADD_HANDLE: watch=2 fd=8 events=1 cb=0x7eff3bd06760 \
&gt; &gt;                 opaque=0x558f9db485a0 ff=(nil)
&gt; &gt; May  2 11:02:06 hl308-3 systemd: Started Virtualization daemon.
&gt; &gt; May  2 11:02:06 hl308-3 libvirtd: 472: info : virEventPollAddHandle:140 : \
&gt; &gt; EVENT_POLL_ADD_HANDLE: watch=3 fd=11 events=0 cb=0x7eff3bcfb420 \
&gt; &gt;                 opaque=0x558f9db69520 ff=0x7eff3bcfb3d0
&gt; &gt; May  2 11:02:06 hl308-3 libvirtd: 472: info : virEventPollAddHandle:140 : \
&gt; &gt; EVENT_POLL_ADD_HANDLE: watch=4 fd=12 events=0 cb=0x7eff3bcfb420 \
&gt; &gt;                 opaque=0x558f9db69700 ff=0x7eff3bcfb3d0
&gt; &gt; May  2 11:02:06 hl308-3 libvirtd: process 472: arguments to \
&gt; &gt; dbus_message_iter_append_basic() were incorrect, assertion \
&gt; &gt; "_dbus_check_is_valid_utf8 (*string_p)" failed in file ../../dbus/dbus-message.c \
&gt; &gt;                 line 2754.
&gt; &gt; May  2 11:02:06 hl308-3 libvirtd: This is normally a bug in some application \
&gt; &gt;                 using the D-Bus library.
&gt; &gt; May  2 11:02:06 hl308-3 libvirtd: D-Bus not built with -rdynamic so unable to \
&gt; &gt;                 print a backtrace
&gt; &gt; May  2 11:02:06 hl308-3 systemd: libvirtd.service: main process exited, \
&gt; &gt; code=killed, status=6/ABRT
&gt; 
&gt; This is not the maximum loggin. We'll need to see debug logs:
&gt; 
&gt; https://wiki.libvirt.org/page/DebugLogs
&gt; 
&gt; and perhaps running libvirtd under gdb and getting a stack trace (with
&gt; all strings expanded) might help too.
&gt; 

Actually gdb might be the only help here.  The reason is that that dbus call
just reports the error and then calls abort(), so libvirtd will not even get an
error message (which would help us track down what might've been the case).

If you can do something like:

  $ dnf --enablerepo='*debug*' install libvirt-debuginfo dbus-debuginfo

  $ cat &gt;/var/lib/libvirt/gdbabortscript &lt;&lt;EOF
  start
  break abort
  commands
  t a a bt full
  end
  continue
  EOF

  $ cat &gt;/etc/systemd/system/libvirtd.service.d/override.conf &lt;&lt;EOF
  [Service]
  ExecStart=
  ExecStart=gdb --batch -x /var/lib/libvirt/gdbabortscript /usr/sbin/libvirtd \
$LIBVIRTD_ARGS  EOF

  $ systemctl daemon-reload
  $ restorecon -F /var/lib/libvirt/gdbabortscript \
/etc/systemd/system/libvirtd.service.d/override.conf  $ systemctl restart \
libvirtd.service

You should get the full stacktrace of the issue in the output of:

  journalctl -u libvirtd.service

and you can post it here so we can find out what's happening.

HTH,
Martin


["signature.asc" (application/pgp-signature)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190503144349</emailId><senderName>Martin Kletzander</senderName><senderEmail>mkletzan@redhat.com</senderEmail><timestampReceived>2019-05-03 14:43:49-0400</timestampReceived><subject>Re: [libvirt-users] libvirtd not starting</subject><body>

[Attachment #2 (multipart/signed)]


On Thu, May 02, 2019 at 02:25:28PM +0200, Martin Kletzander wrote:
&gt; On Thu, May 02, 2019 at 01:07:32PM +0200, Michal Privoznik wrote:
&gt; &gt; On 5/2/19 12:08 PM, Lothar Schilling wrote:
&gt; &gt; 
&gt; &gt; &gt; I turned logging up to maximum. That's all I get:
&gt; &gt; &gt; 
&gt; &gt; &gt; May  2 11:02:06 hl308-3 systemd: Starting Virtualization daemon...
&gt; &gt; &gt; May  2 11:02:06 hl308-3 libvirtd: 472: info : libvirt version: 4.5.0, package: \
&gt; &gt; &gt; 10.el7_6.7 (CentOS BuildSystem &lt;http://bugs.centos.org&gt;, 2019-04-24-14:04:12, \
&gt; &gt; &gt;                 x86-01.bsys.centos.org)
&gt; &gt; &gt; May  2 11:02:06 hl308-3 libvirtd: 472: info : hostname: my.server.net
&gt; &gt; &gt; May  2 11:02:06 hl308-3 libvirtd: 472: info : virEventPollAddHandle:140 : \
&gt; &gt; &gt; EVENT_POLL_ADD_HANDLE: watch=1 fd=6 events=1 cb=0x7eff3bbde300 opaque=(nil) \
&gt; &gt; &gt;                 ff=(nil)
&gt; &gt; &gt; May  2 11:02:06 hl308-3 libvirtd: 472: info : virEventPollAddHandle:140 : \
&gt; &gt; &gt; EVENT_POLL_ADD_HANDLE: watch=2 fd=8 events=1 cb=0x7eff3bd06760 \
&gt; &gt; &gt;                 opaque=0x558f9db485a0 ff=(nil)
&gt; &gt; &gt; May  2 11:02:06 hl308-3 systemd: Started Virtualization daemon.
&gt; &gt; &gt; May  2 11:02:06 hl308-3 libvirtd: 472: info : virEventPollAddHandle:140 : \
&gt; &gt; &gt; EVENT_POLL_ADD_HANDLE: watch=3 fd=11 events=0 cb=0x7eff3bcfb420 \
&gt; &gt; &gt;                 opaque=0x558f9db69520 ff=0x7eff3bcfb3d0
&gt; &gt; &gt; May  2 11:02:06 hl308-3 libvirtd: 472: info : virEventPollAddHandle:140 : \
&gt; &gt; &gt; EVENT_POLL_ADD_HANDLE: watch=4 fd=12 events=0 cb=0x7eff3bcfb420 \
&gt; &gt; &gt;                 opaque=0x558f9db69700 ff=0x7eff3bcfb3d0
&gt; &gt; &gt; May  2 11:02:06 hl308-3 libvirtd: process 472: arguments to \
&gt; &gt; &gt; dbus_message_iter_append_basic() were incorrect, assertion \
&gt; &gt; &gt; "_dbus_check_is_valid_utf8 (*string_p)" failed in file \
&gt; &gt; &gt;                 ../../dbus/dbus-message.c line 2754.
&gt; &gt; &gt; May  2 11:02:06 hl308-3 libvirtd: This is normally a bug in some application \
&gt; &gt; &gt;                 using the D-Bus library.
&gt; &gt; &gt; May  2 11:02:06 hl308-3 libvirtd: D-Bus not built with -rdynamic so unable to \
&gt; &gt; &gt;                 print a backtrace
&gt; &gt; &gt; May  2 11:02:06 hl308-3 systemd: libvirtd.service: main process exited, \
&gt; &gt; &gt; code=killed, status=6/ABRT
&gt; &gt; 
&gt; &gt; This is not the maximum loggin. We'll need to see debug logs:
&gt; &gt; 
&gt; &gt; https://wiki.libvirt.org/page/DebugLogs
&gt; &gt; 
&gt; &gt; and perhaps running libvirtd under gdb and getting a stack trace (with
&gt; &gt; all strings expanded) might help too.
&gt; &gt; 
&gt; 
&gt; Actually gdb might be the only help here.  The reason is that that dbus call
&gt; just reports the error and then calls abort(), so libvirtd will not even get an
&gt; error message (which would help us track down what might've been the case).
&gt; 
&gt; If you can do something like:
&gt; 

Even better, there are some ways to get the core dump information which I
completely forgot about:

 - coredumpctl -- IIRC you are running CentOS 7, so this will not be available
                  for you yet.  If it was, coredumpctl show just shows all we
                  need (by default it picks the last core dump and stacktrace is
                  part of the output).

 - abrt-cli -- Similar to the above, it should be available for you, but you
               need to have abrt installed and setup.  Which is not always the
               default.  If you do, or you set it up yourself, however, you
               should be able to get to the core dump as well, but it is not as
               easy as with coredumpctl (i.e. I did not get to it in first 10
               seconds).

 - Setup your own -- either set the ulimit for the service and look for the file
                     that gets created or set kernel.core_pattern using sysctl
                     to a command that gets ran with each core dump (this one
                     does not need any ulimit setting, but you need to know what
                     to specify there.

Please let us know if you got anywhere, I'd like to see what the issue is and
how we can fix it.

&gt; $ dnf --enablerepo='*debug*' install libvirt-debuginfo dbus-debuginfo
&gt; 
&gt; $ cat &gt;/var/lib/libvirt/gdbabortscript &lt;&lt;EOF
&gt; start
&gt; break abort
&gt; commands
&gt; t a a bt full
&gt; end
&gt; continue
&gt; EOF
&gt; 
&gt; $ cat &gt;/etc/systemd/system/libvirtd.service.d/override.conf &lt;&lt;EOF
&gt; [Service]
&gt; ExecStart=
&gt; ExecStart=gdb --batch -x /var/lib/libvirt/gdbabortscript /usr/sbin/libvirtd \
&gt; $LIBVIRTD_ARGS EOF
&gt; 
&gt; $ systemctl daemon-reload
&gt; $ restorecon -F /var/lib/libvirt/gdbabortscript \
&gt; /etc/systemd/system/libvirtd.service.d/override.conf $ systemctl restart \
&gt; libvirtd.service 
&gt; You should get the full stacktrace of the issue in the output of:
&gt; 
&gt; journalctl -u libvirtd.service
&gt; 
&gt; and you can post it here so we can find out what's happening.
&gt; 
&gt; HTH,
&gt; Martin



&gt; _______________________________________________
&gt; libvirt-users mailing list
&gt; libvirt-users@redhat.com
&gt; https://www.redhat.com/mailman/listinfo/libvirt-users


["signature.asc" (application/pgp-signature)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190503145635</emailId><senderName>Lothar Schilling</senderName><senderEmail>ls@proasyl.de</senderEmail><timestampReceived>2019-05-03 14:56:35-0400</timestampReceived><subject>[libvirt-users]  libvirtd not starting</subject><body>

[Attachment #2 (multipart/alternative)]


Am 03.05.2019 um 16:43 schrieb Martin Kletzander:
&gt; On Thu, May 02, 2019 at 02:25:28PM +0200, Martin Kletzander wrote:
&gt;&gt; On Thu, May 02, 2019 at 01:07:32PM +0200, Michal Privoznik wrote:
&gt;&gt;&gt; On 5/2/19 12:08 PM, Lothar Schilling wrote:
&gt;&gt;&gt;
&gt;&gt;&gt;&gt; I turned logging up to maximum. That's all I get:
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; May  2 11:02:06 hl308-3 systemd: Starting Virtualization daemon...
&gt;&gt;&gt;&gt; May  2 11:02:06 hl308-3 libvirtd: 472: info : libvirt version:
&gt;&gt;&gt;&gt; 4.5.0, package: 10.el7_6.7 (CentOS BuildSystem
&gt;&gt;&gt;&gt; &lt;http://bugs.centos.org&gt;, 2019-04-24-14:04:12, x86-01.bsys.centos.org)
&gt;&gt;&gt;&gt; May  2 11:02:06 hl308-3 libvirtd: 472: info : hostname: my.server.net
&gt;&gt;&gt;&gt; May  2 11:02:06 hl308-3 libvirtd: 472: info :
&gt;&gt;&gt;&gt; virEventPollAddHandle:140 : EVENT_POLL_ADD_HANDLE: watch=1 fd=6
&gt;&gt;&gt;&gt; events=1 cb=0x7eff3bbde300 opaque=(nil) ff=(nil)
&gt;&gt;&gt;&gt; May  2 11:02:06 hl308-3 libvirtd: 472: info :
&gt;&gt;&gt;&gt; virEventPollAddHandle:140 : EVENT_POLL_ADD_HANDLE: watch=2 fd=8
&gt;&gt;&gt;&gt; events=1 cb=0x7eff3bd06760 opaque=0x558f9db485a0 ff=(nil)
&gt;&gt;&gt;&gt; May  2 11:02:06 hl308-3 systemd: Started Virtualization daemon.
&gt;&gt;&gt;&gt; May  2 11:02:06 hl308-3 libvirtd: 472: info :
&gt;&gt;&gt;&gt; virEventPollAddHandle:140 : EVENT_POLL_ADD_HANDLE: watch=3 fd=11
&gt;&gt;&gt;&gt; events=0 cb=0x7eff3bcfb420 opaque=0x558f9db69520 ff=0x7eff3bcfb3d0
&gt;&gt;&gt;&gt; May  2 11:02:06 hl308-3 libvirtd: 472: info :
&gt;&gt;&gt;&gt; virEventPollAddHandle:140 : EVENT_POLL_ADD_HANDLE: watch=4 fd=12
&gt;&gt;&gt;&gt; events=0 cb=0x7eff3bcfb420 opaque=0x558f9db69700 ff=0x7eff3bcfb3d0
&gt;&gt;&gt;&gt; May  2 11:02:06 hl308-3 libvirtd: process 472: arguments to
&gt;&gt;&gt;&gt; dbus_message_iter_append_basic() were incorrect, assertion
&gt;&gt;&gt;&gt; "_dbus_check_is_valid_utf8 (*string_p)" failed in file
&gt;&gt;&gt;&gt; ../../dbus/dbus-message.c line 2754.
&gt;&gt;&gt;&gt; May  2 11:02:06 hl308-3 libvirtd: This is normally a bug in some
&gt;&gt;&gt;&gt; application using the D-Bus library.
&gt;&gt;&gt;&gt; May  2 11:02:06 hl308-3 libvirtd: D-Bus not built with -rdynamic so
&gt;&gt;&gt;&gt; unable to print a backtrace
&gt;&gt;&gt;&gt; May  2 11:02:06 hl308-3 systemd: libvirtd.service: main process
&gt;&gt;&gt;&gt; exited, code=killed, status=6/ABRT
&gt;&gt;&gt;
&gt;&gt;&gt; This is not the maximum loggin. We'll need to see debug logs:
&gt;&gt;&gt;
&gt;&gt;&gt; https://wiki.libvirt.org/page/DebugLogs
&gt;&gt;&gt;
&gt;&gt;&gt; and perhaps running libvirtd under gdb and getting a stack trace (with
&gt;&gt;&gt; all strings expanded) might help too.
&gt;&gt;&gt;
&gt;&gt;
&gt;&gt; Actually gdb might be the only help here.  The reason is that that
&gt;&gt; dbus call
&gt;&gt; just reports the error and then calls abort(), so libvirtd will not
&gt;&gt; even get an
&gt;&gt; error message (which would help us track down what might've been the
&gt;&gt; case).
&gt;&gt;
&gt;&gt; If you can do something like:
&gt;&gt;
&gt;
&gt; Even better, there are some ways to get the core dump information which I
&gt; completely forgot about:
&gt;
&gt; - coredumpctl -- IIRC you are running CentOS 7, so this will not be
&gt; available
&gt;                  for you yet.  If it was, coredumpctl show just shows
&gt; all we
&gt;                  need (by default it picks the last core dump and
&gt; stacktrace is
&gt;                  part of the output).
&gt;
&gt; - abrt-cli -- Similar to the above, it should be available for you,
&gt; but you
&gt;               need to have abrt installed and setup.  Which is not
&gt; always the
&gt;               default.  If you do, or you set it up yourself, however,
&gt; you
&gt;               should be able to get to the core dump as well, but it
&gt; is not as
&gt;               easy as with coredumpctl (i.e. I did not get to it in
&gt; first 10
&gt;               seconds).
&gt;
&gt; - Setup your own -- either set the ulimit for the service and look for
&gt; the file
&gt;                     that gets created or set kernel.core_pattern using
&gt; sysctl
&gt;                     to a command that gets ran with each core dump
&gt; (this one
&gt;                     does not need any ulimit setting, but you need to
&gt; know what
&gt;                     to specify there.
&gt;
&gt; Please let us know if you got anywhere, I'd like to see what the issue
&gt; is and
&gt; how we can fix it.
&gt;
&gt;&gt;  $ dnf --enablerepo='*debug*' install libvirt-debuginfo dbus-debuginfo
&gt;&gt;
&gt;&gt;  $ cat &gt;/var/lib/libvirt/gdbabortscript &lt;&lt;EOF
&gt;&gt;  start
&gt;&gt;  break abort
&gt;&gt;  commands
&gt;&gt;  t a a bt full
&gt;&gt;  end
&gt;&gt;  continue
&gt;&gt;  EOF
&gt;&gt;
&gt;&gt;  $ cat &gt;/etc/systemd/system/libvirtd.service.d/override.conf &lt;&lt;EOF
&gt;&gt;  [Service]
&gt;&gt;  ExecStart=
&gt;&gt;  ExecStart=gdb --batch -x /var/lib/libvirt/gdbabortscript
&gt;&gt; /usr/sbin/libvirtd $LIBVIRTD_ARGS
&gt;&gt;  EOF
&gt;&gt;
&gt;&gt;  $ systemctl daemon-reload
&gt;&gt;  $ restorecon -F /var/lib/libvirt/gdbabortscript
&gt;&gt; /etc/systemd/system/libvirtd.service.d/override.conf
&gt;&gt;  $ systemctl restart libvirtd.service
&gt;&gt;
&gt;&gt; You should get the full stacktrace of the issue in the output of:
&gt;&gt;
&gt;&gt;  journalctl -u libvirtd.service
&gt;&gt;
&gt;&gt; and you can post it here so we can find out what's happening.
&gt;&gt;
&gt;&gt; HTH,
&gt;&gt; Martin
&gt;
Thank you, but I decided to reformat the machine and start from scratch.

[Attachment #5 (text/html)]

&lt;html&gt;
  &lt;head&gt;
    &lt;meta http-equiv="Content-Type" content="text/html;
      charset=windows-1252"&gt;
  &lt;/head&gt;
  &lt;body text="#000000" bgcolor="#FFFFFF"&gt;
    Am 03.05.2019 um 16:43 schrieb Martin Kletzander:&lt;br&gt;
    &lt;blockquote type="cite" cite="mid:20190503144349.GB13475@wheatley"&gt;On
      Thu, May 02, 2019 at 02:25:28PM +0200, Martin Kletzander wrote: &lt;br&gt;
      &lt;blockquote type="cite"&gt;On Thu, May 02, 2019 at 01:07:32PM +0200,
        Michal Privoznik wrote: &lt;br&gt;
        &lt;blockquote type="cite"&gt;On 5/2/19 12:08 PM, Lothar Schilling
          wrote: &lt;br&gt;
          &lt;br&gt;
          &lt;blockquote type="cite"&gt;I turned logging up to maximum. That's
            all I get: &lt;br&gt;
            &lt;br&gt;
            May  2 11:02:06 hl308-3 systemd: Starting Virtualization
            daemon... &lt;br&gt;
            May  2 11:02:06 hl308-3 libvirtd: 472: info : libvirt
            version: 4.5.0, package: 10.el7_6.7 (CentOS BuildSystem &lt;a
              class="moz-txt-link-rfc2396E"
              href="http://bugs.centos.org"&gt;&lt;http://bugs.centos.org&gt;&lt;/a&gt;,
            2019-04-24-14:04:12, x86-01.bsys.centos.org) &lt;br&gt;
            May  2 11:02:06 hl308-3 libvirtd: 472: info : hostname:
            my.server.net &lt;br&gt;
            May  2 11:02:06 hl308-3 libvirtd: 472: info :
            virEventPollAddHandle:140 : EVENT_POLL_ADD_HANDLE: watch=1
            fd=6 events=1 cb=0x7eff3bbde300 opaque=(nil) ff=(nil) &lt;br&gt;
            May  2 11:02:06 hl308-3 libvirtd: 472: info :
            virEventPollAddHandle:140 : EVENT_POLL_ADD_HANDLE: watch=2
            fd=8 events=1 cb=0x7eff3bd06760 opaque=0x558f9db485a0
            ff=(nil) &lt;br&gt;
            May  2 11:02:06 hl308-3 systemd: Started Virtualization
            daemon. &lt;br&gt;
            May  2 11:02:06 hl308-3 libvirtd: 472: info :
            virEventPollAddHandle:140 : EVENT_POLL_ADD_HANDLE: watch=3
            fd=11 events=0 cb=0x7eff3bcfb420 opaque=0x558f9db69520
            ff=0x7eff3bcfb3d0 &lt;br&gt;
            May  2 11:02:06 hl308-3 libvirtd: 472: info :
            virEventPollAddHandle:140 : EVENT_POLL_ADD_HANDLE: watch=4
            fd=12 events=0 cb=0x7eff3bcfb420 opaque=0x558f9db69700
            ff=0x7eff3bcfb3d0 &lt;br&gt;
            May  2 11:02:06 hl308-3 libvirtd: process 472: arguments to
            dbus_message_iter_append_basic() were incorrect, assertion
            "_dbus_check_is_valid_utf8 (*string_p)" failed in file
            ../../dbus/dbus-message.c line 2754. &lt;br&gt;
            May  2 11:02:06 hl308-3 libvirtd: This is normally a bug in
            some application using the D-Bus library. &lt;br&gt;
            May  2 11:02:06 hl308-3 libvirtd: D-Bus not built with
            -rdynamic so unable to print a backtrace &lt;br&gt;
            May  2 11:02:06 hl308-3 systemd: libvirtd.service: main
            process exited, code=killed, status=6/ABRT &lt;br&gt;
          &lt;/blockquote&gt;
          &lt;br&gt;
          This is not the maximum loggin. We'll need to see debug logs:
          &lt;br&gt;
          &lt;br&gt;
          &lt;a class="moz-txt-link-freetext"
            href="https://wiki.libvirt.org/page/DebugLogs"&gt;https://wiki.libvirt.org/page/DebugLogs&lt;/a&gt;
          &lt;br&gt;
          &lt;br&gt;
          and perhaps running libvirtd under gdb and getting a stack
          trace (with &lt;br&gt;
          all strings expanded) might help too. &lt;br&gt;
          &lt;br&gt;
        &lt;/blockquote&gt;
        &lt;br&gt;
        Actually gdb might be the only help here.  The reason is that
        that dbus call &lt;br&gt;
        just reports the error and then calls abort(), so libvirtd will
        not even get an &lt;br&gt;
        error message (which would help us track down what might've been
        the case). &lt;br&gt;
        &lt;br&gt;
        If you can do something like: &lt;br&gt;
        &lt;br&gt;
      &lt;/blockquote&gt;
      &lt;br&gt;
      Even better, there are some ways to get the core dump information
      which I &lt;br&gt;
      completely forgot about: &lt;br&gt;
      &lt;br&gt;
      - coredumpctl -- IIRC you are running CentOS 7, so this will not
      be available &lt;br&gt;
                       for you yet.  If it was, coredumpctl show just
      shows all we &lt;br&gt;
                       need (by default it picks the last core dump and
      stacktrace is &lt;br&gt;
                       part of the output). &lt;br&gt;
      &lt;br&gt;
      - abrt-cli -- Similar to the above, it should be available for
      you, but you &lt;br&gt;
                    need to have abrt installed and setup.  Which is not
      always the &lt;br&gt;
                    default.  If you do, or you set it up yourself,
      however, you &lt;br&gt;
                    should be able to get to the core dump as well, but
      it is not as &lt;br&gt;
                    easy as with coredumpctl (i.e. I did not get to it
      in first 10 &lt;br&gt;
                    seconds). &lt;br&gt;
      &lt;br&gt;
      - Setup your own -- either set the ulimit for the service and look
      for the file &lt;br&gt;
                          that gets created or set kernel.core_pattern
      using sysctl &lt;br&gt;
                          to a command that gets ran with each core dump
      (this one &lt;br&gt;
                          does not need any ulimit setting, but you need
      to know what &lt;br&gt;
                          to specify there. &lt;br&gt;
      &lt;br&gt;
      Please let us know if you got anywhere, I'd like to see what the
      issue is and &lt;br&gt;
      how we can fix it. &lt;br&gt;
      &lt;br&gt;
      &lt;blockquote type="cite"&gt; $ dnf --enablerepo='*debug*' install
        libvirt-debuginfo dbus-debuginfo &lt;br&gt;
        &lt;br&gt;
         $ cat &gt;/var/lib/libvirt/gdbabortscript &lt;&lt;EOF &lt;br&gt;
         start &lt;br&gt;
         break abort &lt;br&gt;
         commands &lt;br&gt;
         t a a bt full &lt;br&gt;
         end &lt;br&gt;
         continue &lt;br&gt;
         EOF &lt;br&gt;
        &lt;br&gt;
         $ cat &gt;/etc/systemd/system/libvirtd.service.d/override.conf
        &lt;&lt;EOF &lt;br&gt;
         [Service] &lt;br&gt;
         ExecStart= &lt;br&gt;
         ExecStart=gdb --batch -x /var/lib/libvirt/gdbabortscript
        /usr/sbin/libvirtd $LIBVIRTD_ARGS &lt;br&gt;
         EOF &lt;br&gt;
        &lt;br&gt;
         $ systemctl daemon-reload &lt;br&gt;
         $ restorecon -F /var/lib/libvirt/gdbabortscript
        /etc/systemd/system/libvirtd.service.d/override.conf &lt;br&gt;
         $ systemctl restart libvirtd.service &lt;br&gt;
        &lt;br&gt;
        You should get the full stacktrace of the issue in the output
        of: &lt;br&gt;
        &lt;br&gt;
         journalctl -u libvirtd.service &lt;br&gt;
        &lt;br&gt;
        and you can post it here so we can find out what's happening. &lt;br&gt;
        &lt;br&gt;
        HTH, &lt;br&gt;
        Martin &lt;br&gt;
      &lt;/blockquote&gt;
      &lt;br&gt;
    &lt;/blockquote&gt;
    Thank you, but I decided to reformat the machine and start from
    scratch.&lt;br&gt;
  &lt;/body&gt;
&lt;/html&gt;


_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190522090409</emailId><senderName>Lothar Schilling</senderName><senderEmail>ls@proasyl.de</senderEmail><timestampReceived>2019-05-22 09:04:09-0400</timestampReceived><subject>Re: [libvirt-users] libvirtd not starting</subject><body>

Am 03.05.2019 um 16:43 schrieb Martin Kletzander:
&gt; On Thu, May 02, 2019 at 02:25:28PM +0200, Martin Kletzander wrote:
&gt;&gt; On Thu, May 02, 2019 at 01:07:32PM +0200, Michal Privoznik wrote:
&gt;&gt;&gt; On 5/2/19 12:08 PM, Lothar Schilling wrote:
&gt;&gt;&gt;
&gt;&gt;&gt;&gt; I turned logging up to maximum. That's all I get:
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; May  2 11:02:06 hl308-3 systemd: Starting Virtualization daemon...
&gt;&gt;&gt;&gt; May  2 11:02:06 hl308-3 libvirtd: 472: info : libvirt version:
&gt;&gt;&gt;&gt; 4.5.0, package: 10.el7_6.7 (CentOS BuildSystem
&gt;&gt;&gt;&gt; &lt;http://bugs.centos.org&gt;, 2019-04-24-14:04:12, x86-01.bsys.centos.org)
&gt;&gt;&gt;&gt; May  2 11:02:06 hl308-3 libvirtd: 472: info : hostname: my.server.net
&gt;&gt;&gt;&gt; May  2 11:02:06 hl308-3 libvirtd: 472: info :
&gt;&gt;&gt;&gt; virEventPollAddHandle:140 : EVENT_POLL_ADD_HANDLE: watch=1 fd=6
&gt;&gt;&gt;&gt; events=1 cb=0x7eff3bbde300 opaque=(nil) ff=(nil)
&gt;&gt;&gt;&gt; May  2 11:02:06 hl308-3 libvirtd: 472: info :
&gt;&gt;&gt;&gt; virEventPollAddHandle:140 : EVENT_POLL_ADD_HANDLE: watch=2 fd=8
&gt;&gt;&gt;&gt; events=1 cb=0x7eff3bd06760 opaque=0x558f9db485a0 ff=(nil)
&gt;&gt;&gt;&gt; May  2 11:02:06 hl308-3 systemd: Started Virtualization daemon.
&gt;&gt;&gt;&gt; May  2 11:02:06 hl308-3 libvirtd: 472: info :
&gt;&gt;&gt;&gt; virEventPollAddHandle:140 : EVENT_POLL_ADD_HANDLE: watch=3 fd=11
&gt;&gt;&gt;&gt; events=0 cb=0x7eff3bcfb420 opaque=0x558f9db69520 ff=0x7eff3bcfb3d0
&gt;&gt;&gt;&gt; May  2 11:02:06 hl308-3 libvirtd: 472: info :
&gt;&gt;&gt;&gt; virEventPollAddHandle:140 : EVENT_POLL_ADD_HANDLE: watch=4 fd=12
&gt;&gt;&gt;&gt; events=0 cb=0x7eff3bcfb420 opaque=0x558f9db69700 ff=0x7eff3bcfb3d0
&gt;&gt;&gt;&gt; May  2 11:02:06 hl308-3 libvirtd: process 472: arguments to
&gt;&gt;&gt;&gt; dbus_message_iter_append_basic() were incorrect, assertion
&gt;&gt;&gt;&gt; "_dbus_check_is_valid_utf8 (*string_p)" failed in file
&gt;&gt;&gt;&gt; ../../dbus/dbus-message.c line 2754.
&gt;&gt;&gt;&gt; May  2 11:02:06 hl308-3 libvirtd: This is normally a bug in some
&gt;&gt;&gt;&gt; application using the D-Bus library.
&gt;&gt;&gt;&gt; May  2 11:02:06 hl308-3 libvirtd: D-Bus not built with -rdynamic so
&gt;&gt;&gt;&gt; unable to print a backtrace
&gt;&gt;&gt;&gt; May  2 11:02:06 hl308-3 systemd: libvirtd.service: main process
&gt;&gt;&gt;&gt; exited, code=killed, status=6/ABRT
&gt;&gt;&gt;
&gt;&gt;&gt; This is not the maximum loggin. We'll need to see debug logs:
&gt;&gt;&gt;
&gt;&gt;&gt; https://wiki.libvirt.org/page/DebugLogs
&gt;&gt;&gt;
&gt;&gt;&gt; and perhaps running libvirtd under gdb and getting a stack trace (with
&gt;&gt;&gt; all strings expanded) might help too.
&gt;&gt;&gt;
&gt;&gt;
&gt;&gt; Actually gdb might be the only help here.  The reason is that that
&gt;&gt; dbus call
&gt;&gt; just reports the error and then calls abort(), so libvirtd will not
&gt;&gt; even get an
&gt;&gt; error message (which would help us track down what might've been the
&gt;&gt; case).
&gt;&gt;
&gt;&gt; If you can do something like:
&gt;&gt;
&gt;
&gt; Even better, there are some ways to get the core dump information which I
&gt; completely forgot about:
&gt;
&gt; - coredumpctl -- IIRC you are running CentOS 7, so this will not be
&gt; available
&gt;                  for you yet.  If it was, coredumpctl show just shows
&gt; all we
&gt;                  need (by default it picks the last core dump and
&gt; stacktrace is
&gt;                  part of the output).
&gt;
&gt; - abrt-cli -- Similar to the above, it should be available for you,
&gt; but you
&gt;               need to have abrt installed and setup.  Which is not
&gt; always the
&gt;               default.  If you do, or you set it up yourself, however,
&gt; you
&gt;               should be able to get to the core dump as well, but it
&gt; is not as
&gt;               easy as with coredumpctl (i.e. I did not get to it in
&gt; first 10
&gt;               seconds).
&gt;
&gt; - Setup your own -- either set the ulimit for the service and look for
&gt; the file
&gt;                     that gets created or set kernel.core_pattern using
&gt; sysctl
&gt;                     to a command that gets ran with each core dump
&gt; (this one
&gt;                     does not need any ulimit setting, but you need to
&gt; know what
&gt;                     to specify there.
&gt;
&gt; Please let us know if you got anywhere, I'd like to see what the issue
&gt; is and
&gt; how we can fix it.
&gt;
&gt;&gt;  $ dnf --enablerepo='*debug*' install libvirt-debuginfo dbus-debuginfo
&gt;&gt;
&gt;&gt;  $ cat &gt;/var/lib/libvirt/gdbabortscript &lt;&lt;EOF
&gt;&gt;  start
&gt;&gt;  break abort
&gt;&gt;  commands
&gt;&gt;  t a a bt full
&gt;&gt;  end
&gt;&gt;  continue
&gt;&gt;  EOF
&gt;&gt;
&gt;&gt;  $ cat &gt;/etc/systemd/system/libvirtd.service.d/override.conf &lt;&lt;EOF
&gt;&gt;  [Service]
&gt;&gt;  ExecStart=
&gt;&gt;  ExecStart=gdb --batch -x /var/lib/libvirt/gdbabortscript
&gt;&gt; /usr/sbin/libvirtd $LIBVIRTD_ARGS
&gt;&gt;  EOF
&gt;&gt;
&gt;&gt;  $ systemctl daemon-reload
&gt;&gt;  $ restorecon -F /var/lib/libvirt/gdbabortscript
&gt;&gt; /etc/systemd/system/libvirtd.service.d/override.conf
&gt;&gt;  $ systemctl restart libvirtd.service
&gt;&gt;
&gt;&gt; You should get the full stacktrace of the issue in the output of:
&gt;&gt;
&gt;&gt;  journalctl -u libvirtd.service
&gt;&gt;
&gt;&gt; and you can post it here so we can find out what's happening.
&gt;&gt;
&gt;&gt; HTH,
&gt;&gt; Martin
&gt;
Hi Martin,

I set up the machine from scratch and now I#m back to where I started
from... Following your instructions I ran journalctl -u
libvirtd.service. The output is attached.

Thank you
Lothar

["stacktrace.txt" (text/plain)]

Mai 22 10:48:29 my.server.com systemd[1]: Starting Virtualization daemon...
Mai 22 10:48:29 my.server.com gdb[27625]: Temporary breakpoint 1 at 0x20960: file \
remote/remote_daemon.c, line 1030. Mai 22 10:48:29 my.server.com gdb[27625]: [Thread \
debugging using libthread_db enabled] Mai 22 10:48:29 my.server.com gdb[27625]: Using \
host libthread_db library "/lib64/libthread_db.so.1". Mai 22 10:48:30 my.server.com \
gdb[27625]: Temporary breakpoint 1, main (argc=1, argv=0x7fffffffed98) at \
remote/remote_daemon.c:1030 Mai 22 10:48:30 my.server.com gdb[27625]: 1030        int \
main(int argc, char **argv) { Mai 22 10:48:30 my.server.com gdb[27625]: Breakpoint 2 \
at 0x7ffff45547b0 Mai 22 10:48:30 my.server.com gdb[27625]: [New Thread \
0x7fffe7692700 (LWP 27632)] Mai 22 10:48:30 my.server.com gdb[27625]: [New Thread \
0x7fffe6e91700 (LWP 27633)] Mai 22 10:48:30 my.server.com gdb[27625]: [New Thread \
0x7fffe6690700 (LWP 27634)] Mai 22 10:48:30 my.server.com gdb[27625]: [New Thread \
0x7fffe5e8f700 (LWP 27635)] Mai 22 10:48:30 my.server.com gdb[27625]: [New Thread \
0x7fffe568e700 (LWP 27636)] Mai 22 10:48:30 my.server.com gdb[27625]: [New Thread \
0x7fffe4e8d700 (LWP 27637)] Mai 22 10:48:30 my.server.com gdb[27625]: [New Thread \
0x7fffe468c700 (LWP 27638)] Mai 22 10:48:30 my.server.com gdb[27625]: [New Thread \
0x7fffe3e8b700 (LWP 27639)] Mai 22 10:48:30 my.server.com gdb[27625]: [New Thread \
0x7fffe368a700 (LWP 27640)] Mai 22 10:48:30 my.server.com gdb[27625]: [New Thread \
0x7fffe2e89700 (LWP 27641)] Mai 22 10:48:30 my.server.com gdb[27625]: [New Thread \
0x7fffca8c1700 (LWP 27644)] Mai 22 10:48:30 my.server.com gdb[27625]: [New Thread \
0x7fffca0c0700 (LWP 27645)] Mai 22 10:48:30 my.server.com gdb[27625]: [New Thread \
0x7fffc98bf700 (LWP 27646)] Mai 22 10:48:30 my.server.com gdb[27625]: [New Thread \
0x7fffc90be700 (LWP 27647)] Mai 22 10:48:30 my.server.com gdb[27625]: [New Thread \
0x7fffc88bd700 (LWP 27648)] Mai 22 10:48:30 my.server.com gdb[27625]: [New Thread \
0x7fffc80bc700 (LWP 27649)] Mai 22 10:48:30 my.server.com gdb[27625]: process 27627: \
arguments to dbus_message_iter_append_basic() were incorrect, assertion \
"_dbus_check_is_valid_utf8 (*string_p)" failed in file ../../dbus/dbus-mess Mai 22 \
10:48:30 my.server.com gdb[27625]: This is normally a bug in some application using \
the D-Bus library. Mai 22 10:48:30 my.server.com gdb[27625]: D-Bus not built with \
-rdynamic so unable to print a backtrace Mai 22 10:48:30 my.server.com gdb[27625]: \
[Switching to Thread 0x7fffc80bc700 (LWP 27649)] Mai 22 10:48:30 my.server.com \
gdb[27625]: Breakpoint 2, 0x00007ffff45547b0 in abort () from /lib64/libc.so.6 Mai 22 \
10:48:30 my.server.com gdb[27625]: Thread 17 (Thread 0x7fffc80bc700 (LWP 27649)): Mai \
22 10:48:30 my.server.com gdb[27625]: #0  0x00007ffff45547b0 in abort () from \
/lib64/libc.so.6 Mai 22 10:48:30 my.server.com gdb[27625]: No symbol table info \
available. Mai 22 10:48:30 my.server.com gdb[27625]: #1  0x00007ffff53d3435 in \
_dbus_abort () at ../../dbus/dbus-sysdeps.c:91 Mai 22 10:48:30 my.server.com \
gdb[27625]: s = &lt;optimized out&gt; Mai 22 10:48:30 my.server.com gdb[27625]: #2  \
0x00007ffff53c9eee in _dbus_warn_check_failed (format=0x7ffff53d98d0 "arguments to \
%s() were incorrect, assertion \"%s\" failed in file %s line %d.\nThis is n Mai 22 \
10:48:30 my.server.com gdb[27625]: args = {{gp_offset = 40, fp_offset = 48, \
overflow_arg_area = 0x7fffc80bba90, reg_save_area = 0x7fffc80bb9c0}} Mai 22 10:48:30 \
my.server.com gdb[27625]: #3  0x00007ffff53bbeb6 in dbus_message_iter_append_basic \
(iter=0x7fffc80bbae0, type=115, value=0x7fffc80bbce8) at \
../../dbus/dbus-message.c:2742 Mai 22 10:48:30 my.server.com gdb[27625]: real = \
0x7fffc80bbae0 Mai 22 10:48:30 my.server.com gdb[27625]: #4  0x00007ffff53bc813 in \
dbus_message_append_args_valist (message=message@entry=0x7fffc0018cf0, \
first_arg_type=&lt;optimized out&gt;, var_args=var_args@entry=0x7fffc80 Mai 22 10:48:30 \
my.server.com gdb[27625]: value = &lt;optimized out&gt; Mai 22 10:48:30 my.server.com \
gdb[27625]: type = 115 Mai 22 10:48:30 my.server.com gdb[27625]: iter = {dummy1 = \
0x7fffc0018cf0, dummy2 = 0x6565726600e00000, dummy3 = 131180, dummy4 = 538976256, \
dummy5 = 0, dummy6 = 0, dummy7 = -1, dummy8 = -1, dummy9 = -107 Mai 22 10:48:30 \
my.server.com gdb[27625]: __FUNCTION__ = "dbus_message_append_args_valist" Mai 22 \
10:48:30 my.server.com gdb[27625]: #5  0x00007ffff53bcb79 in dbus_message_append_args \
(message=message@entry=0x7fffc0018cf0, first_arg_type=first_arg_type@entry=115) at \
../../dbus/dbus-message.c:18 Mai 22 10:48:30 my.server.com gdb[27625]: var_args = \
{{gp_offset = 48, fp_offset = 48, overflow_arg_area = 0x7fffc80bbcb8, reg_save_area = \
0x7fffc80bbbf0}} Mai 22 10:48:30 my.server.com gdb[27625]: __FUNCTION__ = \
"dbus_message_append_args" Mai 22 10:48:30 my.server.com gdb[27625]: [255B blob data]
Mai 22 10:48:30 my.server.com gdb[27625]: message = 0x7fffc0018cf0
Mai 22 10:48:30 my.server.com gdb[27625]: pendingReply = 0x0
Mai 22 10:48:30 my.server.com gdb[27625]: systemBus = 0x7fffc0018640
Mai 22 10:48:30 my.server.com gdb[27625]: #7  virNetDaemonAddShutdownInhibition \
(dmn=0x5555557f45a0) at rpc/virnetdaemon.c:563 Mai 22 10:48:30 my.server.com \
gdb[27625]: __func__ = "virNetDaemonAddShutdownInhibition" Mai 22 10:48:30 \
my.server.com gdb[27625]: #8  0x0000555555577601 in daemonInhibitCallback \
(opaque=0x5555557f45a0, inhibit=true) at remote/remote_daemon.c:716 Mai 22 10:48:30 \
my.server.com gdb[27625]: dmn = 0x5555557f45a0 Mai 22 10:48:30 my.server.com \
gdb[27625]: #9  daemonRunStateInit (opaque=0x5555557f45a0) at \
remote/remote_daemon.c:797 Mai 22 10:48:30 my.server.com gdb[27625]: dmn = \
0x5555557f45a0 Mai 22 10:48:30 my.server.com gdb[27625]: sysident = 0x7fffc0000910
Mai 22 10:48:30 my.server.com gdb[27625]: __func__ = "daemonRunStateInit"
Mai 22 10:48:30 my.server.com gdb[27625]: #10 0x00007ffff7504a52 in virThreadHelper \
(data=&lt;optimized out&gt;) at util/virthread.c:206 Mai 22 10:48:30 my.server.com \
gdb[27625]: args = 0x0 Mai 22 10:48:30 my.server.com gdb[27625]: local = {func = \
0x5555555775e0 &lt;daemonRunStateInit&gt;, funcName = 0x5555555ac418 "daemonRunStateInit", \
worker = false, opaque = 0x5555557f45a0} Mai 22 10:48:30 my.server.com gdb[27625]: \
#11 0x00007ffff48f1dd5 in start_thread () from /lib64/libpthread.so.0 Mai 22 10:48:30 \
my.server.com gdb[27625]: No symbol table info available. Mai 22 10:48:30 \
my.server.com gdb[27625]: #12 0x00007ffff461aead in clone () from /lib64/libc.so.6 \
Mai 22 10:48:30 my.server.com gdb[27625]: No symbol table info available. Mai 22 \
10:48:30 my.server.com gdb[27625]: Thread 16 (Thread 0x7fffc88bd700 (LWP 27648)): Mai \
22 10:48:30 my.server.com gdb[27625]: #0  0x00007ffff48f5965 in \
pthread_cond_wait@@GLIBC_2.3.2 () from /lib64/libpthread.so.0 Mai 22 10:48:30 \
my.server.com gdb[27625]: No symbol table info available. Mai 22 10:48:30 \
my.server.com gdb[27625]: #1  0x00007ffff7504c96 in virCondWait \
(c=c@entry=0x555555813a28, m=m@entry=0x555555813a00) at util/virthread.c:154 Mai 22 \
10:48:30 my.server.com gdb[27625]: ret = &lt;optimized out&gt; Mai 22 10:48:30 \
my.server.com gdb[27625]: #2  0x00007ffff7505753 in virThreadPoolWorker \
(opaque=opaque@entry=0x5555557e7840) at util/virthreadpool.c:124 Mai 22 10:48:30 \
my.server.com gdb[27625]: data = 0x0 Mai 22 10:48:30 my.server.com gdb[27625]: pool = \
0x5555558139c0 Mai 22 10:48:30 my.server.com gdb[27625]: cond = 0x555555813a28
Mai 22 10:48:30 my.server.com gdb[27625]: priority = false
Mai 22 10:48:30 my.server.com gdb[27625]: curWorkers = 0x555555813aa0
Mai 22 10:48:30 my.server.com gdb[27625]: maxLimit = 0x555555813a88
Mai 22 10:48:30 my.server.com gdb[27625]: job = 0x0
Mai 22 10:48:30 my.server.com gdb[27625]: #3  0x00007ffff7504a28 in virThreadHelper \
(data=&lt;optimized out&gt;) at util/virthread.c:206 Mai 22 10:48:30 my.server.com \
gdb[27625]: args = 0x0 Mai 22 10:48:30 my.server.com gdb[27625]: local = {func = \
0x7ffff75055c0 &lt;virThreadPoolWorker&gt;, funcName = 0x7ffff771cbeb \
"virNetServerHandleJob", worker = true, opaque = 0x5555557e7840} Mai 22 10:48:30 \
my.server.com gdb[27625]: #4  0x00007ffff48f1dd5 in start_thread () from \
/lib64/libpthread.so.0 Mai 22 10:48:30 my.server.com gdb[27625]: No symbol table info \
available. Mai 22 10:48:30 my.server.com gdb[27625]: #5  0x00007ffff461aead in clone \
() from /lib64/libc.so.6 Mai 22 10:48:30 my.server.com gdb[27625]: No symbol table \
info available. Mai 22 10:48:30 my.server.com gdb[27625]: Thread 15 (Thread \
0x7fffc90be700 (LWP 27647)): Mai 22 10:48:30 my.server.com gdb[27625]: #0  \
0x00007ffff48f5965 in pthread_cond_wait@@GLIBC_2.3.2 () from /lib64/libpthread.so.0 \
Mai 22 10:48:30 my.server.com gdb[27625]: No symbol table info available. Mai 22 \
10:48:30 my.server.com gdb[27625]: #1  0x00007ffff7504c96 in virCondWait \
(c=c@entry=0x555555813a28, m=m@entry=0x555555813a00) at util/virthread.c:154 Mai 22 \
10:48:30 my.server.com gdb[27625]: ret = &lt;optimized out&gt; Mai 22 10:48:30 \
my.server.com gdb[27625]: #2  0x00007ffff7505753 in virThreadPoolWorker \
(opaque=opaque@entry=0x5555557e7780) at util/virthreadpool.c:124 Mai 22 10:48:30 \
my.server.com gdb[27625]: data = 0x0 Mai 22 10:48:30 my.server.com gdb[27625]: pool = \
0x5555558139c0 Mai 22 10:48:30 my.server.com gdb[27625]: cond = 0x555555813a28
Mai 22 10:48:30 my.server.com gdb[27625]: priority = false
Mai 22 10:48:30 my.server.com gdb[27625]: curWorkers = 0x555555813aa0
Mai 22 10:48:30 my.server.com gdb[27625]: maxLimit = 0x555555813a88
Mai 22 10:48:30 my.server.com gdb[27625]: job = 0x0
Mai 22 10:48:30 my.server.com gdb[27625]: #3  0x00007ffff7504a28 in virThreadHelper \
(data=&lt;optimized out&gt;) at util/virthread.c:206 Mai 22 10:48:30 my.server.com \
gdb[27625]: args = 0x0 Mai 22 10:48:30 my.server.com gdb[27625]: local = {func = \
0x7ffff75055c0 &lt;virThreadPoolWorker&gt;, funcName = 0x7ffff771cbeb \
"virNetServerHandleJob", worker = true, opaque = 0x5555557e7780} Mai 22 10:48:30 \
my.server.com gdb[27625]: #4  0x00007ffff48f1dd5 in start_thread () from \
/lib64/libpthread.so.0 Mai 22 10:48:30 my.server.com gdb[27625]: No symbol table info \
available. Mai 22 10:48:30 my.server.com gdb[27625]: #5  0x00007ffff461aead in clone \
() from /lib64/libc.so.6 Mai 22 10:48:30 my.server.com gdb[27625]: No symbol table \
info available. Mai 22 10:48:30 my.server.com gdb[27625]: Thread 14 (Thread \
0x7fffc98bf700 (LWP 27646)): Mai 22 10:48:30 my.server.com gdb[27625]: #0  \
0x00007ffff48f5965 in pthread_cond_wait@@GLIBC_2.3.2 () from /lib64/libpthread.so.0 \
Mai 22 10:48:30 my.server.com gdb[27625]: No symbol table info available. Mai 22 \
10:48:30 my.server.com gdb[27625]: #1  0x00007ffff7504c96 in virCondWait \
(c=c@entry=0x555555813a28, m=m@entry=0x555555813a00) at util/virthread.c:154 Mai 22 \
10:48:30 my.server.com gdb[27625]: ret = &lt;optimized out&gt; Mai 22 10:48:30 \
my.server.com gdb[27625]: #2  0x00007ffff7505753 in virThreadPoolWorker \
(opaque=opaque@entry=0x5555557e7840) at util/virthreadpool.c:124 Mai 22 10:48:30 \
my.server.com gdb[27625]: data = 0x0 Mai 22 10:48:30 my.server.com gdb[27625]: pool = \
0x5555558139c0 Mai 22 10:48:30 my.server.com gdb[27625]: cond = 0x555555813a28
Mai 22 10:48:30 my.server.com gdb[27625]: priority = false
Mai 22 10:48:30 my.server.com gdb[27625]: curWorkers = 0x555555813aa0
Mai 22 10:48:30 my.server.com gdb[27625]: maxLimit = 0x555555813a88
Mai 22 10:48:30 my.server.com gdb[27625]: job = 0x0
Mai 22 10:48:30 my.server.com gdb[27625]: #3  0x00007ffff7504a28 in virThreadHelper \
(data=&lt;optimized out&gt;) at util/virthread.c:206 Mai 22 10:48:30 my.server.com \
gdb[27625]: args = 0x0 Mai 22 10:48:30 my.server.com gdb[27625]: local = {func = \
0x7ffff75055c0 &lt;virThreadPoolWorker&gt;, funcName = 0x7ffff771cbeb \
"virNetServerHandleJob", worker = true, opaque = 0x5555557e7840} Mai 22 10:48:30 \
my.server.com gdb[27625]: #4  0x00007ffff48f1dd5 in start_thread () from \
/lib64/libpthread.so.0 Mai 22 10:48:30 my.server.com gdb[27625]: No symbol table info \
available. Mai 22 10:48:30 my.server.com gdb[27625]: #5  0x00007ffff461aead in clone \
() from /lib64/libc.so.6 Mai 22 10:48:30 my.server.com gdb[27625]: No symbol table \
info available. Mai 22 10:48:30 my.server.com gdb[27625]: Thread 13 (Thread \
0x7fffca0c0700 (LWP 27645)): Mai 22 10:48:30 my.server.com gdb[27625]: #0  \
0x00007ffff48f5965 in pthread_cond_wait@@GLIBC_2.3.2 () from /lib64/libpthread.so.0

Mai 22 10:48:30 my.server.com gdb[27625]: No symbol table info available.
Mai 22 10:48:30 my.server.com gdb[27625]: #1  0x00007ffff7504c96 in virCondWait \
(c=c@entry=0x555555813a28, m=m@entry=0x555555813a00) at util/virthread.c:154 Mai 22 \
10:48:30 my.server.com gdb[27625]: ret = &lt;optimized out&gt; Mai 22 10:48:30 \
my.server.com gdb[27625]: #2  0x00007ffff7505753 in virThreadPoolWorker \
(opaque=opaque@entry=0x5555557e7780) at util/virthreadpool.c:124 Mai 22 10:48:30 \
my.server.com gdb[27625]: data = 0x0 Mai 22 10:48:30 my.server.com gdb[27625]: pool = \
0x5555558139c0 Mai 22 10:48:30 my.server.com gdb[27625]: cond = 0x555555813a28
Mai 22 10:48:30 my.server.com gdb[27625]: priority = false
Mai 22 10:48:30 my.server.com gdb[27625]: curWorkers = 0x555555813aa0
Mai 22 10:48:30 my.server.com gdb[27625]: maxLimit = 0x555555813a88
Mai 22 10:48:30 my.server.com gdb[27625]: job = 0x0
Mai 22 10:48:30 my.server.com gdb[27625]: #3  0x00007ffff7504a28 in virThreadHelper \
(data=&lt;optimized out&gt;) at util/virthread.c:206 Mai 22 10:48:30 my.server.com \
gdb[27625]: args = 0x0 Mai 22 10:48:30 my.server.com gdb[27625]: local = {func = \
0x7ffff75055c0 &lt;virThreadPoolWorker&gt;, funcName = 0x7ffff771cbeb \
"virNetServerHandleJob", worker = true, opaque = 0x5555557e7780} Mai 22 10:48:30 \
my.server.com gdb[27625]: #4  0x00007ffff48f1dd5 in start_thread () from \
/lib64/libpthread.so.0 Mai 22 10:48:30 my.server.com gdb[27625]: No symbol table info \
available. Mai 22 10:48:30 my.server.com gdb[27625]: #5  0x00007ffff461aead in clone \
() from /lib64/libc.so.6 Mai 22 10:48:30 my.server.com gdb[27625]: No symbol table \
info available. Mai 22 10:48:30 my.server.com gdb[27625]: Thread 12 (Thread \
0x7fffca8c1700 (LWP 27644)): Mai 22 10:48:30 my.server.com gdb[27625]: #0  \
0x00007ffff48f5965 in pthread_cond_wait@@GLIBC_2.3.2 () from /lib64/libpthread.so.0 \
Mai 22 10:48:30 my.server.com gdb[27625]: No symbol table info available. Mai 22 \
10:48:30 my.server.com gdb[27625]: #1  0x00007ffff7504c96 in virCondWait \
(c=c@entry=0x555555813a28, m=m@entry=0x555555813a00) at util/virthread.c:154 Mai 22 \
10:48:30 my.server.com gdb[27625]: ret = &lt;optimized out&gt; Mai 22 10:48:30 \
my.server.com gdb[27625]: #2  0x00007ffff7505753 in virThreadPoolWorker \
(opaque=opaque@entry=0x5555557e7840) at util/virthreadpool.c:124 Mai 22 10:48:30 \
my.server.com gdb[27625]: data = 0x0 Mai 22 10:48:30 my.server.com gdb[27625]: pool = \
0x5555558139c0 Mai 22 10:48:30 my.server.com gdb[27625]: cond = 0x555555813a28
Mai 22 10:48:30 my.server.com gdb[27625]: priority = false
Mai 22 10:48:30 my.server.com gdb[27625]: curWorkers = 0x555555813aa0
Mai 22 10:48:30 my.server.com gdb[27625]: maxLimit = 0x555555813a88
Mai 22 10:48:30 my.server.com gdb[27625]: job = 0x0
Mai 22 10:48:30 my.server.com gdb[27625]: #3  0x00007ffff7504a28 in virThreadHelper \
(data=&lt;optimized out&gt;) at util/virthread.c:206 Mai 22 10:48:30 my.server.com \
gdb[27625]: args = 0x0 Mai 22 10:48:30 my.server.com gdb[27625]: local = {func = \
0x7ffff75055c0 &lt;virThreadPoolWorker&gt;, funcName = 0x7ffff771cbeb \
"virNetServerHandleJob", worker = true, opaque = 0x5555557e7840} Mai 22 10:48:30 \
my.server.com gdb[27625]: #4  0x00007ffff48f1dd5 in start_thread () from \
/lib64/libpthread.so.0 Mai 22 10:48:30 my.server.com gdb[27625]: No symbol table info \
available. Mai 22 10:48:30 my.server.com gdb[27625]: #5  0x00007ffff461aead in clone \
() from /lib64/libc.so.6 Mai 22 10:48:30 my.server.com gdb[27625]: No symbol table \
info available. Mai 22 10:48:30 my.server.com gdb[27625]: Thread 11 (Thread \
0x7fffe2e89700 (LWP 27641)): Mai 22 10:48:30 my.server.com gdb[27625]: #0  \
0x00007ffff48f5965 in pthread_cond_wait@@GLIBC_2.3.2 () from /lib64/libpthread.so.0 \
Mai 22 10:48:30 my.server.com gdb[27625]: No symbol table info available. Mai 22 \
10:48:30 my.server.com gdb[27625]: #1  0x00007ffff7504c96 in virCondWait \
(c=c@entry=0x5555557f4a18, m=m@entry=0x5555557f4950) at util/virthread.c:154 Mai 22 \
10:48:30 my.server.com gdb[27625]: ret = &lt;optimized out&gt; Mai 22 10:48:30 \
my.server.com gdb[27625]: #2  0x00007ffff75056eb in virThreadPoolWorker \
(opaque=opaque@entry=0x5555557e8680) at util/virthreadpool.c:124 Mai 22 10:48:30 \
my.server.com gdb[27625]: data = 0x0 Mai 22 10:48:30 my.server.com gdb[27625]: pool = \
0x5555557f4910 Mai 22 10:48:30 my.server.com gdb[27625]: cond = 0x5555557f4a18
Mai 22 10:48:30 my.server.com gdb[27625]: priority = true
Mai 22 10:48:30 my.server.com gdb[27625]: curWorkers = 0x5555557f4a08
Mai 22 10:48:30 my.server.com gdb[27625]: maxLimit = 0x5555557f4a00
Mai 22 10:48:30 my.server.com gdb[27625]: job = 0x0
Mai 22 10:48:30 my.server.com gdb[27625]: #3  0x00007ffff7504a28 in virThreadHelper \
(data=&lt;optimized out&gt;) at util/virthread.c:206 Mai 22 10:48:30 my.server.com \
gdb[27625]: args = 0x0 Mai 22 10:48:30 my.server.com gdb[27625]: local = {func = \
0x7ffff75055c0 &lt;virThreadPoolWorker&gt;, funcName = 0x7ffff771cbeb \
"virNetServerHandleJob", worker = true, opaque = 0x5555557e8680} Mai 22 10:48:30 \
my.server.com gdb[27625]: #4  0x00007ffff48f1dd5 in start_thread () from \
/lib64/libpthread.so.0 Mai 22 10:48:30 my.server.com gdb[27625]: No symbol table info \
available. Mai 22 10:48:30 my.server.com gdb[27625]: #5  0x00007ffff461aead in clone \
() from /lib64/libc.so.6 Mai 22 10:48:30 my.server.com gdb[27625]: No symbol table \
info available. Mai 22 10:48:30 my.server.com gdb[27625]: Thread 10 (Thread \
0x7fffe368a700 (LWP 27640)): Mai 22 10:48:30 my.server.com gdb[27625]: #0  \
0x00007ffff48f5965 in pthread_cond_wait@@GLIBC_2.3.2 () from /lib64/libpthread.so.0 \
Mai 22 10:48:30 my.server.com gdb[27625]: No symbol table info available. Mai 22 \
10:48:30 my.server.com gdb[27625]: #1  0x00007ffff7504c96 in virCondWait \
(c=c@entry=0x5555557f4a18, m=m@entry=0x5555557f4950) at util/virthread.c:154 Mai 22 \
10:48:30 my.server.com gdb[27625]: ret = &lt;optimized out&gt; Mai 22 10:48:30 \
my.server.com gdb[27625]: #2  0x00007ffff75056eb in virThreadPoolWorker \
(opaque=opaque@entry=0x5555557e8740) at util/virthreadpool.c:124 Mai 22 10:48:30 \
my.server.com gdb[27625]: data = 0x0 Mai 22 10:48:30 my.server.com gdb[27625]: pool = \
0x5555557f4910 Mai 22 10:48:30 my.server.com gdb[27625]: cond = 0x5555557f4a18
Mai 22 10:48:30 my.server.com gdb[27625]: priority = true
Mai 22 10:48:30 my.server.com gdb[27625]: curWorkers = 0x5555557f4a08
Mai 22 10:48:30 my.server.com gdb[27625]: maxLimit = 0x5555557f4a00
Mai 22 10:48:30 my.server.com gdb[27625]: job = 0x0
Mai 22 10:48:30 my.server.com gdb[27625]: #3  0x00007ffff7504a28 in virThreadHelper \
(data=&lt;optimized out&gt;) at util/virthread.c:206 Mai 22 10:48:30 my.server.com \
gdb[27625]: args = 0x0 Mai 22 10:48:30 my.server.com gdb[27625]: local = {func = \
0x7ffff75055c0 &lt;virThreadPoolWorker&gt;, funcName = 0x7ffff771cbeb \
"virNetServerHandleJob", worker = true, opaque = 0x5555557e8740} Mai 22 10:48:30 \
my.server.com gdb[27625]: #4  0x00007ffff48f1dd5 in start_thread () from \
/lib64/libpthread.so.0 Mai 22 10:48:30 my.server.com gdb[27625]: No symbol table info \
available. Mai 22 10:48:30 my.server.com gdb[27625]: #5  0x00007ffff461aead in clone \
() from /lib64/libc.so.6 Mai 22 10:48:30 my.server.com gdb[27625]: No symbol table \
info available. Mai 22 10:48:30 my.server.com gdb[27625]: Thread 9 (Thread \
0x7fffe3e8b700 (LWP 27639)): Mai 22 10:48:30 my.server.com gdb[27625]: #0  \
0x00007ffff48f5965 in pthread_cond_wait@@GLIBC_2.3.2 () from /lib64/libpthread.so.0 \
Mai 22 10:48:30 my.server.com gdb[27625]: No symbol table info available. Mai 22 \
10:48:30 my.server.com gdb[27625]: #1  0x00007ffff7504c96 in virCondWait \
(c=c@entry=0x5555557f4a18, m=m@entry=0x5555557f4950) at util/virthread.c:154 Mai 22 \
10:48:30 my.server.com gdb[27625]: ret = &lt;optimized out&gt; Mai 22 10:48:30 \
my.server.com gdb[27625]: #2  0x00007ffff75056eb in virThreadPoolWorker \
(opaque=opaque@entry=0x5555557e8680) at util/virthreadpool.c:124 Mai 22 10:48:30 \
my.server.com gdb[27625]: data = 0x0 Mai 22 10:48:30 my.server.com gdb[27625]: pool = \
0x5555557f4910 Mai 22 10:48:30 my.server.com gdb[27625]: cond = 0x5555557f4a18
Mai 22 10:48:30 my.server.com gdb[27625]: priority = true
Mai 22 10:48:30 my.server.com gdb[27625]: curWorkers = 0x5555557f4a08
Mai 22 10:48:30 my.server.com gdb[27625]: maxLimit = 0x5555557f4a00
Mai 22 10:48:30 my.server.com gdb[27625]: job = 0x0
Mai 22 10:48:30 my.server.com gdb[27625]: #3  0x00007ffff7504a28 in virThreadHelper \
(data=&lt;optimized out&gt;) at util/virthread.c:206 Mai 22 10:48:30 my.server.com \
gdb[27625]: args = 0x0 Mai 22 10:48:30 my.server.com gdb[27625]: local = {func = \
0x7ffff75055c0 &lt;virThreadPoolWorker&gt;, funcName = 0x7ffff771cbeb \
"virNetServerHandleJob", worker = true, opaque = 0x5555557e8680} Mai 22 10:48:30 \
my.server.com gdb[27625]: #4  0x00007ffff48f1dd5 in start_thread () from \
/lib64/libpthread.so.0 Mai 22 10:48:30 my.server.com gdb[27625]: No symbol table info \
available. Mai 22 10:48:30 my.server.com gdb[27625]: #5  0x00007ffff461aead in clone \
() from /lib64/libc.so.6 Mai 22 10:48:30 my.server.com gdb[27625]: No symbol table \
info available. Mai 22 10:48:30 my.server.com gdb[27625]: Thread 8 (Thread \
0x7fffe468c700 (LWP 27638)): Mai 22 10:48:30 my.server.com gdb[27625]: #0  \
0x00007ffff48f5965 in pthread_cond_wait@@GLIBC_2.3.2 () from /lib64/libpthread.so.0 \
Mai 22 10:48:30 my.server.com gdb[27625]: No symbol table info available. Mai 22 \
10:48:30 my.server.com gdb[27625]: #1  0x00007ffff7504c96 in virCondWait \
(c=c@entry=0x5555557f4a18, m=m@entry=0x5555557f4950) at util/virthread.c:154 Mai 22 \
10:48:30 my.server.com gdb[27625]: ret = &lt;optimized out&gt; Mai 22 10:48:30 \
my.server.com gdb[27625]: #2  0x00007ffff75056eb in virThreadPoolWorker \
(opaque=opaque@entry=0x5555557e8740) at util/virthreadpool.c:124 Mai 22 10:48:30 \
my.server.com gdb[27625]: data = 0x0 Mai 22 10:48:30 my.server.com gdb[27625]: pool = \
0x5555557f4910 Mai 22 10:48:30 my.server.com gdb[27625]: cond = 0x5555557f4a18
Mai 22 10:48:30 my.server.com gdb[27625]: priority = true
Mai 22 10:48:30 my.server.com gdb[27625]: curWorkers = 0x5555557f4a08
Mai 22 10:48:30 my.server.com gdb[27625]: maxLimit = 0x5555557f4a00
Mai 22 10:48:30 my.server.com gdb[27625]: job = 0x0
Mai 22 10:48:30 my.server.com gdb[27625]: #3  0x00007ffff7504a28 in virThreadHelper \
(data=&lt;optimized out&gt;) at util/virthread.c:206 Mai 22 10:48:30 my.server.com \
gdb[27625]: args = 0x0 Mai 22 10:48:30 my.server.com gdb[27625]: local = {func = \
0x7ffff75055c0 &lt;virThreadPoolWorker&gt;, funcName = 0x7ffff771cbeb \
"virNetServerHandleJob", worker = true, opaque = 0x5555557e8740} Mai 22 10:48:30 \
my.server.com gdb[27625]: #4  0x00007ffff48f1dd5 in start_thread () from \
/lib64/libpthread.so.0 Mai 22 10:48:30 my.server.com gdb[27625]: No symbol table info \
available. Mai 22 10:48:30 my.server.com gdb[27625]: #5  0x00007ffff461aead in clone \
() from /lib64/libc.so.6 Mai 22 10:48:30 my.server.com gdb[27625]: No symbol table \
info available. Mai 22 10:48:30 my.server.com gdb[27625]: Thread 7 (Thread \
0x7fffe4e8d700 (LWP 27637)): Mai 22 10:48:30 my.server.com gdb[27625]: #0  \
0x00007ffff48f5965 in pthread_cond_wait@@GLIBC_2.3.2 () from /lib64/libpthread.so.0 \
Mai 22 10:48:30 my.server.com gdb[27625]: No symbol table info available. Mai 22 \
10:48:30 my.server.com gdb[27625]: #1  0x00007ffff7504c96 in virCondWait \
(c=c@entry=0x5555557f4a18, m=m@entry=0x5555557f4950) at util/virthread.c:154 Mai 22 \
10:48:30 my.server.com gdb[27625]: ret = &lt;optimized out&gt; Mai 22 10:48:30 \
my.server.com gdb[27625]: #2  0x00007ffff75056eb in virThreadPoolWorker \
(opaque=opaque@entry=0x5555557e8680) at util/virthreadpool.c:124 Mai 22 10:48:30 \
my.server.com gdb[27625]: data = 0x0 Mai 22 10:48:30 my.server.com gdb[27625]: pool = \
0x5555557f4910 Mai 22 10:48:30 my.server.com gdb[27625]: cond = 0x5555557f4a18
Mai 22 10:48:30 my.server.com gdb[27625]: priority = true
Mai 22 10:48:30 my.server.com gdb[27625]: curWorkers = 0x5555557f4a08
Mai 22 10:48:30 my.server.com gdb[27625]: maxLimit = 0x5555557f4a00
Mai 22 10:48:30 my.server.com gdb[27625]: job = 0x0
Mai 22 10:48:30 my.server.com gdb[27625]: #3  0x00007ffff7504a28 in virThreadHelper \
(data=&lt;optimized out&gt;) at util/virthread.c:206 Mai 22 10:48:30 my.server.com \
gdb[27625]: args = 0x0 Mai 22 10:48:30 my.server.com gdb[27625]: local = {func = \
0x7ffff75055c0 &lt;virThreadPoolWorker&gt;, funcName = 0x7ffff771cbeb \
"virNetServerHandleJob", worker = true, opaque = 0x5555557e8680} Mai 22 10:48:30 \
my.server.com gdb[27625]: #4  0x00007ffff48f1dd5 in start_thread () from \
/lib64/libpthread.so.0 Mai 22 10:48:30 my.server.com gdb[27625]: No symbol table info \
available. Mai 22 10:48:30 my.server.com gdb[27625]: #5  0x00007ffff461aead in clone \
() from /lib64/libc.so.6 Mai 22 10:48:30 my.server.com gdb[27625]: No symbol table \
info available. Mai 22 10:48:30 my.server.com gdb[27625]: Thread 6 (Thread \
0x7fffe568e700 (LWP 27636)): Mai 22 10:48:30 my.server.com gdb[27625]: #0  \
0x00007ffff48f5965 in pthread_cond_wait@@GLIBC_2.3.2 () from /lib64/libpthread.so.0 \
Mai 22 10:48:30 my.server.com gdb[27625]: No symbol table info available. Mai 22 \
10:48:30 my.server.com gdb[27625]: #1  0x00007ffff7504c96 in virCondWait \
(c=c@entry=0x5555557f4978, m=m@entry=0x5555557f4950) at util/virthread.c:154 Mai 22 \
10:48:30 my.server.com gdb[27625]: ret = &lt;optimized out&gt; Mai 22 10:48:30 \
my.server.com gdb[27625]: #2  0x00007ffff7505753 in virThreadPoolWorker \
(opaque=opaque@entry=0x5555557e8740) at util/virthreadpool.c:124 Mai 22 10:48:30 \
my.server.com gdb[27625]: data = 0x0 Mai 22 10:48:30 my.server.com gdb[27625]: pool = \
0x5555557f4910 Mai 22 10:48:30 my.server.com gdb[27625]: cond = 0x5555557f4978
Mai 22 10:48:30 my.server.com gdb[27625]: priority = false
Mai 22 10:48:30 my.server.com gdb[27625]: curWorkers = 0x5555557f49f0
Mai 22 10:48:30 my.server.com gdb[27625]: maxLimit = 0x5555557f49d8
Mai 22 10:48:30 my.server.com gdb[27625]: job = 0x0
Mai 22 10:48:30 my.server.com gdb[27625]: #3  0x00007ffff7504a28 in virThreadHelper \
(data=&lt;optimized out&gt;) at util/virthread.c:206 Mai 22 10:48:30 my.server.com \
gdb[27625]: args = 0x0 Mai 22 10:48:30 my.server.com gdb[27625]: local = {func = \
0x7ffff75055c0 &lt;virThreadPoolWorker&gt;, funcName = 0x7ffff771cbeb \
"virNetServerHandleJob", worker = true, opaque = 0x5555557e8740} Mai 22 10:48:30 \
my.server.com gdb[27625]: #4  0x00007ffff48f1dd5 in start_thread () from \
/lib64/libpthread.so.0 Mai 22 10:48:30 my.server.com gdb[27625]: No symbol table info \
available. Mai 22 10:48:30 my.server.com gdb[27625]: #5  0x00007ffff461aead in clone \
() from /lib64/libc.so.6 Mai 22 10:48:30 my.server.com gdb[27625]: No symbol table \
info available. Mai 22 10:48:30 my.server.com gdb[27625]: Thread 5 (Thread \
0x7fffe5e8f700 (LWP 27635)): Mai 22 10:48:30 my.server.com gdb[27625]: #0  \
0x00007ffff48f5965 in pthread_cond_wait@@GLIBC_2.3.2 () from /lib64/libpthread.so.0 \
Mai 22 10:48:30 my.server.com gdb[27625]: No symbol table info available. Mai 22 \
10:48:30 my.server.com gdb[27625]: #1  0x00007ffff7504c96 in virCondWait \
(c=c@entry=0x5555557f4978, m=m@entry=0x5555557f4950) at util/virthread.c:154 Mai 22 \
10:48:30 my.server.com gdb[27625]: ret = &lt;optimized out&gt; Mai 22 10:48:30 \
my.server.com gdb[27625]: #2  0x00007ffff7505753 in virThreadPoolWorker \
(opaque=opaque@entry=0x5555557e8680) at util/virthreadpool.c:124 Mai 22 10:48:30 \
my.server.com gdb[27625]: data = 0x0 Mai 22 10:48:30 my.server.com gdb[27625]: pool = \
0x5555557f4910 Mai 22 10:48:30 my.server.com gdb[27625]: cond = 0x5555557f4978
Mai 22 10:48:30 my.server.com gdb[27625]: priority = false
Mai 22 10:48:30 my.server.com gdb[27625]: curWorkers = 0x5555557f49f0
Mai 22 10:48:30 my.server.com gdb[27625]: maxLimit = 0x5555557f49d8
Mai 22 10:48:30 my.server.com gdb[27625]: job = 0x0
Mai 22 10:48:30 my.server.com gdb[27625]: #3  0x00007ffff7504a28 in virThreadHelper \
(data=&lt;optimized out&gt;) at util/virthread.c:206 Mai 22 10:48:30 my.server.com \
gdb[27625]: args = 0x0 Mai 22 10:48:30 my.server.com gdb[27625]: local = {func = \
0x7ffff75055c0 &lt;virThreadPoolWorker&gt;, funcName = 0x7ffff771cbeb \
"virNetServerHandleJob", worker = true, opaque = 0x5555557e8680} Mai 22 10:48:30 \
my.server.com gdb[27625]: #4  0x00007ffff48f1dd5 in start_thread () from \
/lib64/libpthread.so.0 Mai 22 10:48:30 my.server.com gdb[27625]: No symbol table info \
available. Mai 22 10:48:30 my.server.com gdb[27625]: #5  0x00007ffff461aead in clone \
() from /lib64/libc.so.6 Mai 22 10:48:30 my.server.com gdb[27625]: No symbol table \
info available. Mai 22 10:48:30 my.server.com gdb[27625]: Thread 4 (Thread \
0x7fffe6690700 (LWP 27634)): Mai 22 10:48:30 my.server.com gdb[27625]: #0  \
0x00007ffff48f5965 in pthread_cond_wait@@GLIBC_2.3.2 () from /lib64/libpthread.so.0 \
Mai 22 10:48:30 my.server.com gdb[27625]: No symbol table info available. Mai 22 \
10:48:30 my.server.com gdb[27625]: #1  0x00007ffff7504c96 in virCondWait \
(c=c@entry=0x5555557f4978, m=m@entry=0x5555557f4950) at util/virthread.c:154 Mai 22 \
10:48:30 my.server.com gdb[27625]: ret = &lt;optimized out&gt; Mai 22 10:48:30 \
my.server.com gdb[27625]: #2  0x00007ffff7505753 in virThreadPoolWorker \
(opaque=opaque@entry=0x5555557e8740) at util/virthreadpool.c:124 Mai 22 10:48:30 \
my.server.com gdb[27625]: data = 0x0 Mai 22 10:48:30 my.server.com gdb[27625]: pool = \
0x5555557f4910 Mai 22 10:48:30 my.server.com gdb[27625]: cond = 0x5555557f4978
Mai 22 10:48:30 my.server.com gdb[27625]: priority = false
Mai 22 10:48:30 my.server.com gdb[27625]: curWorkers = 0x5555557f49f0
Mai 22 10:48:30 my.server.com gdb[27625]: maxLimit = 0x5555557f49d8
Mai 22 10:48:30 my.server.com gdb[27625]: job = 0x0
Mai 22 10:48:30 my.server.com gdb[27625]: #3  0x00007ffff7504a28 in virThreadHelper \
(data=&lt;optimized out&gt;) at util/virthread.c:206 Mai 22 10:48:30 my.server.com \
gdb[27625]: args = 0x0 Mai 22 10:48:30 my.server.com gdb[27625]: local = {func = \
0x7ffff75055c0 &lt;virThreadPoolWorker&gt;, funcName = 0x7ffff771cbeb \
"virNetServerHandleJob", worker = true, opaque = 0x5555557e8740} Mai 22 10:48:30 \
my.server.com gdb[27625]: #4  0x00007ffff48f1dd5 in start_thread () from \
/lib64/libpthread.so.0 Mai 22 10:48:30 my.server.com gdb[27625]: No symbol table info \
available. Mai 22 10:48:30 my.server.com gdb[27625]: #5  0x00007ffff461aead in clone \
() from /lib64/libc.so.6 Mai 22 10:48:30 my.server.com gdb[27625]: No symbol table \
info available. Mai 22 10:48:30 my.server.com gdb[27625]: Thread 3 (Thread \
0x7fffe6e91700 (LWP 27633)): Mai 22 10:48:30 my.server.com gdb[27625]: #0  \
0x00007ffff48f5965 in pthread_cond_wait@@GLIBC_2.3.2 () from /lib64/libpthread.so.0 \
Mai 22 10:48:30 my.server.com gdb[27625]: No symbol table info available. Mai 22 \
10:48:30 my.server.com gdb[27625]: #1  0x00007ffff7504c96 in virCondWait \
(c=c@entry=0x5555557f4978, m=m@entry=0x5555557f4950) at util/virthread.c:154 Mai 22 \
10:48:30 my.server.com gdb[27625]: ret = &lt;optimized out&gt; Mai 22 10:48:30 \
my.server.com gdb[27625]: #2  0x00007ffff7505753 in virThreadPoolWorker \
(opaque=opaque@entry=0x5555557e8680) at util/virthreadpool.c:124 Mai 22 10:48:30 \
my.server.com gdb[27625]: data = 0x0 Mai 22 10:48:30 my.server.com gdb[27625]: pool = \
0x5555557f4910 Mai 22 10:48:30 my.server.com gdb[27625]: cond = 0x5555557f4978
Mai 22 10:48:30 my.server.com gdb[27625]: priority = false
Mai 22 10:48:30 my.server.com gdb[27625]: curWorkers = 0x5555557f49f0
Mai 22 10:48:30 my.server.com gdb[27625]: maxLimit = 0x5555557f49d8
Mai 22 10:48:30 my.server.com gdb[27625]: job = 0x0
Mai 22 10:48:30 my.server.com gdb[27625]: #3  0x00007ffff7504a28 in virThreadHelper \
(data=&lt;optimized out&gt;) at util/virthread.c:206 Mai 22 10:48:30 my.server.com \
gdb[27625]: args = 0x0 Mai 22 10:48:30 my.server.com gdb[27625]: local = {func = \
0x7ffff75055c0 &lt;virThreadPoolWorker&gt;, funcName = 0x7ffff771cbeb \
"virNetServerHandleJob", worker = true, opaque = 0x5555557e8680} Mai 22 10:48:30 \
my.server.com gdb[27625]: #4  0x00007ffff48f1dd5 in start_thread () from \
/lib64/libpthread.so.0 Mai 22 10:48:30 my.server.com gdb[27625]: No symbol table info \
available. Mai 22 10:48:30 my.server.com gdb[27625]: #5  0x00007ffff461aead in clone \
() from /lib64/libc.so.6 Mai 22 10:48:30 my.server.com gdb[27625]: No symbol table \
info available. Mai 22 10:48:30 my.server.com gdb[27625]: Thread 2 (Thread \
0x7fffe7692700 (LWP 27632)): Mai 22 10:48:30 my.server.com gdb[27625]: #0  \
0x00007ffff48f5965 in pthread_cond_wait@@GLIBC_2.3.2 () from /lib64/libpthread.so.0 \
Mai 22 10:48:30 my.server.com gdb[27625]: No symbol table info available. Mai 22 \
10:48:30 my.server.com gdb[27625]: #1  0x00007ffff7504c96 in virCondWait \
(c=c@entry=0x5555557f4978, m=m@entry=0x5555557f4950) at util/virthread.c:154 Mai 22 \
10:48:30 my.server.com gdb[27625]: ret = &lt;optimized out&gt; Mai 22 10:48:30 \
my.server.com gdb[27625]: #2  0x00007ffff7505753 in virThreadPoolWorker \
(opaque=opaque@entry=0x5555557e8740) at util/virthreadpool.c:124 Mai 22 10:48:30 \
my.server.com gdb[27625]: data = 0x0 Mai 22 10:48:30 my.server.com gdb[27625]: pool = \
0x5555557f4910 Mai 22 10:48:30 my.server.com gdb[27625]: cond = 0x5555557f4978
Mai 22 10:48:30 my.server.com gdb[27625]: priority = false
Mai 22 10:48:30 my.server.com gdb[27625]: curWorkers = 0x5555557f49f0
Mai 22 10:48:30 my.server.com gdb[27625]: maxLimit = 0x5555557f49d8
Mai 22 10:48:30 my.server.com gdb[27625]: job = 0x0
Mai 22 10:48:30 my.server.com gdb[27625]: #3  0x00007ffff7504a28 in virThreadHelper \
(data=&lt;optimized out&gt;) at util/virthread.c:206 Mai 22 10:48:30 my.server.com \
gdb[27625]: args = 0x0 Mai 22 10:48:30 my.server.com gdb[27625]: local = {func = \
0x7ffff75055c0 &lt;virThreadPoolWorker&gt;, funcName = 0x7ffff771cbeb \
"virNetServerHandleJob", worker = true, opaque = 0x5555557e8740} Mai 22 10:48:30 \
my.server.com gdb[27625]: #4  0x00007ffff48f1dd5 in start_thread () from \
/lib64/libpthread.so.0 Mai 22 10:48:30 my.server.com gdb[27625]: No symbol table info \
available. Mai 22 10:48:30 my.server.com gdb[27625]: #5  0x00007ffff461aead in clone \
() from /lib64/libc.so.6 Mai 22 10:48:30 my.server.com gdb[27625]: No symbol table \
info available. Mai 22 10:48:30 my.server.com gdb[27625]: Thread 1 (Thread \
0x7ffff7fce8c0 (LWP 27627)): Mai 22 10:48:30 my.server.com gdb[27625]: #0  \
0x00007ffff48f84ed in __lll_lock_wait () from /lib64/libpthread.so.0 Mai 22 10:48:30 \
my.server.com gdb[27625]: No symbol table info available. Mai 22 10:48:30 \
my.server.com gdb[27625]: #1  0x00007ffff48f3dcb in _L_lock_883 () from \
/lib64/libpthread.so.0 Mai 22 10:48:30 my.server.com gdb[27625]: No symbol table info \
available. Mai 22 10:48:30 my.server.com gdb[27625]: #2  0x00007ffff48f3c98 in \
pthread_mutex_lock () from /lib64/libpthread.so.0 Mai 22 10:48:30 my.server.com \
gdb[27625]: No symbol table info available. Mai 22 10:48:30 my.server.com gdb[27625]: \
#3  0x00007ffff7504bb5 in virMutexLock (m=&lt;optimized out&gt;) at util/virthread.c:89 Mai \
22 10:48:30 my.server.com gdb[27625]: No locals. Mai 22 10:48:30 my.server.com \
gdb[27625]: #4  0x00007ffff74de8eb in virObjectLock (anyobj=&lt;optimized out&gt;) at \
util/virobject.c:429 Mai 22 10:48:30 my.server.com gdb[27625]: obj = &lt;optimized out&gt;
Mai 22 10:48:30 my.server.com gdb[27625]: #5  0x00007ffff75cd940 in virNetDaemonRun \
(dmn=0x5555557f45a0) at rpc/virnetdaemon.c:800 Mai 22 10:48:30 my.server.com \
gdb[27625]: timerid = -1 Mai 22 10:48:30 my.server.com gdb[27625]: timerActive = \
false Mai 22 10:48:30 my.server.com gdb[27625]: __FUNCTION__ = "virNetDaemonRun"
Mai 22 10:48:30 my.server.com gdb[27625]: __func__ = "virNetDaemonRun"
Mai 22 10:48:30 my.server.com gdb[27625]: #6  0x00005555555768a9 in main \
(argc=&lt;optimized out&gt;, argv=&lt;optimized out&gt;) at remote/remote_daemon.c:1461 Mai 22 \
10:48:30 my.server.com gdb[27625]: dmn = 0x5555557f45a0 Mai 22 10:48:30 my.server.com \
gdb[27625]: srv = 0x5555557f4820 Mai 22 10:48:30 my.server.com gdb[27625]: srvAdm = \
0x5555558138d0 Mai 22 10:48:30 my.server.com gdb[27625]: adminProgram = \
0x555555813b30 Mai 22 10:48:30 my.server.com gdb[27625]: lxcProgram = 0x555555813870
Mai 22 10:48:30 my.server.com gdb[27625]: remote_config_file = 0x5555557f1620 \
"/etc/libvirt/libvirtd.conf" Mai 22 10:48:30 my.server.com gdb[27625]: statuswrite = \
-1 Mai 22 10:48:30 my.server.com gdb[27625]: ret = 1
Mai 22 10:48:30 my.server.com gdb[27625]: pid_file_fd = 8
Mai 22 10:48:30 my.server.com gdb[27625]: pid_file = 0x5555557e8a40 \
"/var/run/libvirtd.pid" Mai 22 10:48:30 my.server.com gdb[27625]: sock_file = \
0x555555802cd0 "/var/run/libvirt/libvirt-sock" Mai 22 10:48:30 my.server.com \
gdb[27625]: sock_file_ro = 0x555555802c50 "/var/run/libvirt/libvirt-sock-ro" Mai 22 \
10:48:30 my.server.com gdb[27625]: sock_file_adm = 0x555555802bd0 \
"/var/run/libvirt/libvirt-admin-sock" Mai 22 10:48:30 my.server.com gdb[27625]: \
timeout = -1 Mai 22 10:48:30 my.server.com gdb[27625]: verbose = 0
Mai 22 10:48:30 my.server.com gdb[27625]: godaemon = 0
Mai 22 10:48:30 my.server.com gdb[27625]: ipsock = 0
Mai 22 10:48:30 my.server.com gdb[27625]: config = 0x5555557f02d0
Mai 22 10:48:30 my.server.com gdb[27625]: privileged = &lt;optimized out&gt;
Mai 22 10:48:30 my.server.com gdb[27625]: implicit_conf = &lt;optimized out&gt;
Mai 22 10:48:30 my.server.com gdb[27625]: run_dir = 0x5555557e8980 "/var/run/libvirt"
Mai 22 10:48:30 my.server.com gdb[27625]: old_umask = &lt;optimized out&gt;
Mai 22 10:48:30 my.server.com gdb[27625]: opts = {{name = 0x5555555ac0b8 "verbose", \
has_arg = 0, flag = 0x7fffffffe6d0, val = 118}, {name = 0x5555555ac0c0 "daemon", \
has_arg = 0, flag = 0x7fffffffe6d4, val Mai 22 10:48:30 my.server.com gdb[27625]: \
__func__ = "main" Mai 22 10:48:30 my.server.com systemd[1]: Started Virtualization \
daemon.



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190509072805</emailId><senderName>Gerd Hoffmann</senderName><senderEmail>gerd@kraxel.org</senderEmail><timestampReceived>2019-05-09 07:28:05-0400</timestampReceived><subject>Re: [libvirt-users] [iGVT-g] GVT-g - suboptimal user experience</subject><body>

  Hi,

&gt; 1. Its about local display / dmabuf feature. Currently user needs to
&gt; use virt-viewer tool. But virt-manager already incorporates graphical
&gt; console. It would be nice if it could support accelerated gvt-g local
&gt; display.

virt-manager and virt-viewer essentially run the same code spice client
code: both are using the spice-gtk widget.  So, if that isn't working
(didn't verify) it should be rather easy to wire up.

&gt; Also virt-manager should allow to use mdev videocard alone, without
&gt; requiring to use additional primary virtual adapter like QXL or Cirrus

That works fine, you can just set the video card model to "none" in
libvirt xml.  Not sure whenever virt-manager allows to do that via GUI,
maybe you have to use "virsh edit" instead.

&gt; 2. Currently with gvt solution there few mdev devices each with fixed
&gt; resolution. User should be able to configure own resolutions for
&gt; devices at host without additional manipulations in guest. Ideally,
&gt; resolution should be dynamic and change appropriately on resize of
&gt; virt-manager window

Works.  Needs cutting edge software versions though (qemu 4.0 and linux
kernel 5.1 on the host).

&gt; 3. This is about windows guest and VM configured with UEFI (OVMF)
&gt; instead of BIOS. I head its about dropping OpRegion dependency in
&gt; Windows guest driver to support that configuration

That one is for intel to answer ...

cheers,
  Gerd

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190509073830</emailId><senderName>"Yuan, Hang"</senderName><senderEmail>hang.yuan@intel.com</senderEmail><timestampReceived>2019-05-09 07:38:30-0400</timestampReceived><subject>Re: [libvirt-users] [iGVT-g] GVT-g - suboptimal user experience</subject><body>

&gt; -----Original Message-----
&gt; From: Gerd Hoffmann [mailto:gerd@kraxel.org]
&gt; Sent: Thursday, May 9, 2019 3:28 PM
&gt; To: Alex Ivanov &lt;gnidorah@ya.ru&gt;
&gt; Cc: Yuan, Hang &lt;hang.yuan@intel.com&gt;; libvirt-users@redhat.com; igvt-
&gt; g@lists.01.org; virt-tools-list@redhat.com
&gt; Subject: Re: [iGVT-g] GVT-g - suboptimal user experience
&gt; 
&gt; Hi,
&gt; 
&gt; &gt; 1. Its about local display / dmabuf feature. Currently user needs to
&gt; &gt; use virt-viewer tool. But virt-manager already incorporates graphical
&gt; &gt; console. It would be nice if it could support accelerated gvt-g local
&gt; &gt; display.
&gt; 
&gt; virt-manager and virt-viewer essentially run the same code spice client
&gt; code: both are using the spice-gtk widget.  So, if that isn't working (didn't
&gt; verify) it should be rather easy to wire up.
&gt; 
&gt; &gt; Also virt-manager should allow to use mdev videocard alone, without
&gt; &gt; requiring to use additional primary virtual adapter like QXL or Cirrus
&gt; 
&gt; That works fine, you can just set the video card model to "none" in libvirt
&gt; xml.  Not sure whenever virt-manager allows to do that via GUI, maybe you
&gt; have to use "virsh edit" instead.
&gt; 
&gt; &gt; 2. Currently with gvt solution there few mdev devices each with fixed
&gt; &gt; resolution. User should be able to configure own resolutions for
&gt; &gt; devices at host without additional manipulations in guest. Ideally,
&gt; &gt; resolution should be dynamic and change appropriately on resize of
&gt; &gt; virt-manager window
&gt; 
&gt; Works.  Needs cutting edge software versions though (qemu 4.0 and linux
&gt; kernel 5.1 on the host).
&gt; 
&gt; &gt; 3. This is about windows guest and VM configured with UEFI (OVMF)
&gt; &gt; instead of BIOS. I head its about dropping OpRegion dependency in
&gt; &gt; Windows guest driver to support that configuration
&gt; 
&gt; That one is for intel to answer ...
[Yuan, Hang] Thanks for your answers, Gerd! On dropping OpRegion dependency, we \
raised the request to Windows gfx driver team but so far not in their plan yet.

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20190519174411</emailId><senderName></senderName><senderEmail>gnidorah</senderEmail><timestampReceived>2019-05-19 17:44:11-0400</timestampReceived><subject>Re: [libvirt-users] [iGVT-g] GVT-g - suboptimal user experience</subject><body>

So it looks like this solution is currently not very user friendly. Perhaps Intel \
could get Red Hat help to make first-class support of gvt feature in virt-manager?

09.05.2019, 10:28, "Gerd Hoffmann" &lt;gerd@kraxel.org&gt;:
&gt; Hi,
&gt; 
&gt; &gt; 1. Its about local display / dmabuf feature. Currently user needs to
&gt; &gt; use virt-viewer tool. But virt-manager already incorporates graphical
&gt; &gt; console. It would be nice if it could support accelerated gvt-g local
&gt; &gt; display.
&gt; 
&gt; virt-manager and virt-viewer essentially run the same code spice client
&gt; code: both are using the spice-gtk widget. So, if that isn't working
&gt; (didn't verify) it should be rather easy to wire up.

Currently it doesn't work. Only following methods do work: \
https://blog.bepbep.co/posts/gvt/

&gt; 
&gt; &gt; Also virt-manager should allow to use mdev videocard alone, without
&gt; &gt; requiring to use additional primary virtual adapter like QXL or Cirrus
&gt; 
&gt; That works fine, you can just set the video card model to "none" in
&gt; libvirt xml. Not sure whenever virt-manager allows to do that via GUI,
&gt; maybe you have to use "virsh edit" instead.

It doesn't allow it via GUI.

&gt; 
&gt; &gt; 2. Currently with gvt solution there few mdev devices each with fixed
&gt; &gt; resolution. User should be able to configure own resolutions for
&gt; &gt; devices at host without additional manipulations in guest. Ideally,
&gt; &gt; resolution should be dynamic and change appropriately on resize of
&gt; &gt; virt-manager window
&gt; 
&gt; Works. Needs cutting edge software versions though (qemu 4.0 and linux
&gt; kernel 5.1 on the host).

Ok, I will test it with later versions someday. However I assume dynamic resolution \
(on window resize) is not supported?

&gt; 
&gt; &gt; 3. This is about windows guest and VM configured with UEFI (OVMF)
&gt; &gt; instead of BIOS. I head its about dropping OpRegion dependency in
&gt; &gt; Windows guest driver to support that configuration
&gt; 
&gt; That one is for intel to answer ...
&gt; 
&gt; cheers,
&gt; Gerd

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20190514090802</emailId><senderName>Daniel =?utf-8?B?UC4gQmVycmFuZ8Op?=</senderName><senderEmail>berrange@redhat.com</senderEmail><timestampReceived>2019-05-14 09:08:02-0400</timestampReceived><subject>Re: [libvirt-users] domains paused without any obvious reason</subject><body>

On Mon, May 13, 2019 at 06:19:05PM +0200, Lentes, Bernd wrote:
&gt; 
&gt; 
&gt; ----- On May 13, 2019, at 3:34 PM, Bernd Lentes bernd.lentes@helmholtz-muenchen.de wrote:
&gt; 
&gt; &gt; Hi,
&gt; &gt; 
&gt; &gt; i have a two node HA-Cluster with several domains as resources.
&gt; &gt; Currently it's running in test mode.
&gt; &gt; Some domains (all on the same host) stopped running, virsh list shows them as
&gt; &gt; "paused".
&gt; &gt; All stopped at the same time (11th of may, 7:00 am), my monitoring system began
&gt; &gt; to yell.
&gt; &gt; I don't have any clue why this happened.
&gt; &gt; virsh domblkerror says for all the domains (5) "no space". The days before the
&gt; &gt; domains were running fine and i know that all disks inside the domain should
&gt; &gt; have enough space.
&gt; &gt; Also the host is not running out of space.
&gt; &gt; The logs don't say anything sensefully, unfortunately i didn't have a log for
&gt; &gt; the libvirtd daemon, i just configured that now.
&gt; &gt; The domains are stopped each day by cron at 10:30 pm for a short moment, a
&gt; &gt; snapshot is taken, domains are started again, the backing file is copied to a
&gt; &gt; CIFS server and if that is finished the snapshot is blockcommited into the
&gt; &gt; backing file.
&gt; &gt; That's working fine already for several days. This cronjob creates a log and
&gt; &gt; it's looking fine.
&gt; &gt; The domains reside in naked Logical Volumes, the respective Volume Group has
&gt; &gt; enough space.
&gt; &gt; 
&gt; &gt; 
&gt; 
&gt; I resumed one of the guests and it continued without any problem.
&gt; The log doesn't indicate any problem, and df -h shows enough space on
&gt; all partitions.

'virsh domstate --reason $GUEST'

will tell you what event caused the guest to pause in the first place.

If you can resume successfully, this indicates the event was a transient
problem.   Given the domblkerror message 'no space' I'm it looks that
you had a problem running out of disk space temporarily which then
resolved itself.

Regards,
Daniel
-- 
|: https://berrange.com      -o-    https://www.flickr.com/photos/dberrange :|
|: https://libvirt.org         -o-            https://fstop138.berrange.com :|
|: https://entangle-photo.org    -o-    https://www.instagram.com/dberrange :|

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190513152556</emailId><senderName>Martin Kletzander</senderName><senderEmail>mkletzan@redhat.com</senderEmail><timestampReceived>2019-05-13 15:25:56-0400</timestampReceived><subject>Re: [libvirt-users] VM display is blank when open (but Gnome Boxes thumbnails ok)</subject><body>

[Attachment #2 (multipart/signed)]


On Mon, May 13, 2019 at 04:40:55PM +0200, Michel Rozpendowski wrote:
&gt;Hi,
&gt;
&gt;I also posted this question on the IRC #virt channel but have not received
&gt;any reaction at the moment of posting this message to the mailing list.
&gt;
&gt;Since I last turned off my laptop (Dell XPS-15-9570 running Ubuntu 19.04)
&gt;on Friday 10 May (I had to do it by long power press by the way), I am no
&gt;longer able to get the display of my VMs: I am getting a black screen, even
&gt;though I can see it running in the thumbnail of Gnome Boxes.
&gt;You can see the described behaviour on the following video capture:
&gt;https://youtu.be/Lv67g0foyzc.
&gt;Troubleshooting Log from Gnome Boxes is available here:
&gt;https://pastebin.com/9eWGYsJV.
&gt;It was working all properly on Friday before I turn off my laptop.
&gt;
&gt;Any clue what could be wrong and how I could solve this issue (I digged the
&gt;Internet for 2 hours without success)?
&gt;
&gt;Thanks in advance for your help!
&gt;

Well, sorry, I don't really know what might've caused it, but it looks all kind
of OK from a libvirt standpoint, so my best guess would be something related to
the virtio graphics.  But the I saw you are turning off that VM, so I'm guessing
it happens even after starting the VM back, right?  Still, might be worth asking
on qemu mailing lists if nobody on this list will know.

&gt;Kind regards,
&gt;
&gt;Michel

&gt;_______________________________________________
&gt;libvirt-users mailing list
&gt;libvirt-users@redhat.com
&gt;https://www.redhat.com/mailman/listinfo/libvirt-users


["signature.asc" (application/pgp-signature)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190510134446</emailId><senderName>Michal Privoznik</senderName><senderEmail>mprivozn@redhat.com</senderEmail><timestampReceived>2019-05-10 13:44:46-0400</timestampReceived><subject>Re: [libvirt-users] Cannot get interface MTU - qemu quest fails to start off OpenVswitch</subject><body>

On 5/10/19 3:26 PM, lejeczek wrote:
&gt; hi guys
&gt; 
&gt; I have a qemu guest and openvswitch bridge and the guest fails to start:
&gt; 
&gt; $ virsh start work8
&gt; error: Failed to start domain work8-vm-win2016
&gt; error: Cannot get interface MTU on 'ovsbr0': No such device

Well, this means that 'ovsbr0' doesn't exist. Is that so? Can you share 
your &lt;interface/&gt; configuration and the network XML?

Michal

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190510135859</emailId><senderName>lejeczek</senderName><senderEmail>peljasz@yahoo.co.uk</senderEmail><timestampReceived>2019-05-10 13:58:59-0400</timestampReceived><subject>Re: [libvirt-users] Cannot get interface MTU - qemu quest fails to start off OpenVswitch</subject><body>

On 10/05/2019 14:44, Michal Privoznik wrote:
&gt; On 5/10/19 3:26 PM, lejeczek wrote:
&gt;&gt; hi guys
&gt;&gt;
&gt;&gt; I have a qemu guest and openvswitch bridge and the guest fails to start:
&gt;&gt;
&gt;&gt; $ virsh start work8
&gt;&gt; error: Failed to start domain work8-vm-win2016
&gt;&gt; error: Cannot get interface MTU on 'ovsbr0': No such device
&gt;
&gt; Well, this means that 'ovsbr0' doesn't exist. Is that so? Can you
&gt; share your &lt;interface/&gt; configuration and the network XML?
&gt;
&gt; Michal

qemu's: (fails to start)

       &lt;interface type='network'&gt;
           &lt;mac address='52:54:00:20:e1:47'/&gt;
           &lt;source network='ovs-br0' portgroup='vlan-54'/&gt;
           &lt;model type='virtio'/&gt;
           &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x09'
function='0x0'/&gt;
       &lt;/interface&gt;

LXC's: (starts)

       &lt;interface type='network'&gt;
           &lt;mac address='52:54:00:53:ac:e5'/&gt;
           &lt;source network='ovs-br0' portgroup='vlan-55'/&gt;
           &lt;model type='virtio'/&gt;
       &lt;/interface&gt;

This is Openvswitch' bridge thus does not exits as "iface" per say, but
this is how it should be used in libvirt, I think, no? LXC works okey.
How is it different for Qemu?

thanks, L



["pEpkey.asc" (application/pgp-keys)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190510140046</emailId><senderName>lejeczek</senderName><senderEmail>peljasz@yahoo.co.uk</senderEmail><timestampReceived>2019-05-10 14:00:46-0400</timestampReceived><subject>Re: [libvirt-users] Cannot get interface MTU - qemu quest fails to start off OpenVswitch</subject><body>

On 10/05/2019 14:44, Michal Privoznik wrote:
&gt; On 5/10/19 3:26 PM, lejeczek wrote:
&gt;&gt; hi guys
&gt;&gt;
&gt;&gt; I have a qemu guest and openvswitch bridge and the guest fails to start:
&gt;&gt;
&gt;&gt; $ virsh start work8
&gt;&gt; error: Failed to start domain work8-vm-win2016
&gt;&gt; error: Cannot get interface MTU on 'ovsbr0': No such device
&gt;
&gt; Well, this means that 'ovsbr0' doesn't exist. Is that so? Can you
&gt; share your &lt;interface/&gt; configuration and the network XML?
&gt;
&gt; Michal

network:

&lt;network&gt;
   &lt;name&gt;ovs-br0&lt;/name&gt;
   &lt;uuid&gt;e5129e76-1576-4866-97e1-42f14263cfc2&lt;/uuid&gt;
   &lt;forward mode='bridge'/&gt;
   &lt;bridge name='ovsbr0'/&gt;
   &lt;virtualport type='openvswitch'/&gt;
   &lt;portgroup name='vlan-54'&gt;
       &lt;vlan&gt;
           &lt;tag id='54'/&gt;
       &lt;/vlan&gt;
   &lt;/portgroup&gt;
   &lt;portgroup name='vlan-55' default='yes'&gt;
       &lt;vlan&gt;
           &lt;tag id='55'/&gt;
       &lt;/vlan&gt;
   &lt;/portgroup&gt;
&lt;/network&gt;


["pEpkey.asc" (application/pgp-keys)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190510140441</emailId><senderName>lejeczek</senderName><senderEmail>peljasz@yahoo.co.uk</senderEmail><timestampReceived>2019-05-10 14:04:41-0400</timestampReceived><subject>Re: [libvirt-users] Cannot get interface MTU - qemu quest fails to start off OpenVswitch</subject><body>

[Attachment #2 (text/plain)]

On 10/05/2019 14:44, Michal Privoznik wrote:
&gt; On 5/10/19 3:26 PM, lejeczek wrote:
&gt;&gt; hi guys
&gt;&gt;
&gt;&gt; I have a qemu guest and openvswitch bridge and the guest fails to start:
&gt;&gt;
&gt;&gt; $ virsh start work8
&gt;&gt; error: Failed to start domain work8-vm-win2016
&gt;&gt; error: Cannot get interface MTU on 'ovsbr0': No such device
&gt;
&gt; Well, this means that 'ovsbr0' doesn't exist. Is that so? Can you
&gt; share your &lt;interface/&gt; configuration and the network XML?
&gt;
&gt; Michal

and OVS' bits:

$ ovs-vsctl show
79bc7faa-a7cd-482c-95ad-8b0e8f89a6f1
    Bridge "ovsbr0"
        Port "ovsbr0-port0"
            tag: 55
            Interface "ovsbr0-int0"
                type: internal
        Port "vnet16"
            tag: 55
            Interface "vnet16"
        Port "ovsbr0-p3p1"
            Interface "p3p1"
                type: system
        Port "vnet18"
            tag: 54
            Interface "vnet18"
    ovs_version: "2.9.0"

created with/by NM.



["pEpkey.asc" (application/pgp-keys)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190510162359</emailId><senderName>lejeczek</senderName><senderEmail>peljasz@yahoo.co.uk</senderEmail><timestampReceived>2019-05-10 16:23:59-0400</timestampReceived><subject>Re: [libvirt-users] Cannot get interface MTU - qemu quest fails to start off OpenVswitch</subject><body>

On 10/05/2019 14:44, Michal Privoznik wrote:
&gt; On 5/10/19 3:26 PM, lejeczek wrote:
&gt;&gt; hi guys
&gt;&gt;
&gt;&gt; I have a qemu guest and openvswitch bridge and the guest fails to start:
&gt;&gt;
&gt;&gt; $ virsh start work8
&gt;&gt; error: Failed to start domain work8-vm-win2016
&gt;&gt; error: Cannot get interface MTU on 'ovsbr0': No such device
&gt;
&gt; Well, this means that 'ovsbr0' doesn't exist. Is that so? Can you
&gt; share your &lt;interface/&gt; configuration and the network XML?
&gt;
&gt; Michal

so if your libvirt's net is like this:

&lt;network&gt;
   &lt;name&gt;ovs-br0&lt;/name&gt;
   &lt;uuid&gt;e5129e76-1576-4866-97e1-42f14263cfc2&lt;/uuid&gt;
   &lt;forward mode='bridge'/&gt;
   &lt;bridge name='ovsbr0'/&gt;
   &lt;virtualport type='openvswitch'/&gt;
....

then you need extra(extra for ovs tools create both for us at bridge
creation time and nmcli(you) need to create those explicitly) port+iface
so this:

$ ovs-vsctl show

output will contain this:

...

Port "ovsbr0"
                       Interface "ovsbr0"
                               type: internal

...



["pEpkey.asc" (application/pgp-keys)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190510084206</emailId><senderName>Daniel =?utf-8?B?UC4gQmVycmFuZ8Op?=</senderName><senderEmail>berrange@redhat.com</senderEmail><timestampReceived>2019-05-10 08:42:06-0400</timestampReceived><subject>Re: [libvirt-users] Running libvirtd out of source directory connection reset error</subject><body>

On Thu, May 09, 2019 at 01:33:51PM -0400, Peter P. wrote:
&gt; Hi all,
&gt; 
&gt; I'm getting started with hacking around with libvirt  and am trying to
&gt; familiarize myself with launching and running an instance of libvirtd
&gt; I built from source on Centos 7.6.
&gt; 
&gt; Following the instructions from https://libvirt.org/compiling.html to
&gt; launch my built versions of libvirtd and virsh, I get the following
&gt; error with no other context when trying to start a domain using "virsh
&gt; start mydomain":
&gt; 
&gt; error: Cannot recv data: Connection reset by peer
&gt; 
&gt; Despite this error, I am able to run commands list virsh list.
&gt; 
&gt; Are there additional parameters needed to launch libvirtd or
&gt; additional services I need to start up alongside it?

If you have libvirt installed from the distro packages, then a plain
"virsh" will find the virsh binary from /usr/bin. This is built to
expect an installation config

   --prefix=/usr --sysconfdir=/etc --localstatedir=/var


If you build your own using "configure" with no args, or with args
that don't match the above, then  your libvirtd binary will be
listening on a different socket, so virsh won't connect successfully.
You should use the "virsh" binary that you just built instead.

Regards,
Daniel
-- 
|: https://berrange.com      -o-    https://www.flickr.com/photos/dberrange :|
|: https://libvirt.org         -o-            https://fstop138.berrange.com :|
|: https://entangle-photo.org    -o-    https://www.instagram.com/dberrange :|

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190506142623</emailId><senderName>Michal Privoznik</senderName><senderEmail>mprivozn@redhat.com</senderEmail><timestampReceived>2019-05-06 14:26:23-0400</timestampReceived><subject>Re: [libvirt-users] disable libvirt-nwfilter</subject><body>

On 5/6/19 3:44 PM, nakata@geekpit.org wrote:
&gt; Hi,
&gt; 
&gt; i want to disable the nwfilter functionality of libvirt.
&gt; It's surely nice for some people, nevertheless i don't want libvirt to 
&gt; alter any netfilter rules, neither i want the according functionality 
&gt; even available.

It's not only NWFilter that will inject firewall rules. Depending on 
configuration it might also be the default network.

&gt; I know about nwfilter-undefine, but what i'm looking for is an option to 
&gt; globally disable this functionality at all. Some config flag or similar.
&gt; How can i achieve that?

Unless you have a domain &lt;interface/&gt; defined so that it uses a nwfilter 
then no firwall rules are added by nwfilter code.

If you still want to remove nwfilter module then just uninstall it, e.g. 
via:

dnf remove libvirt-daemon-driver-nwfilter libvirt-daemon-config-nwfilter

Michal

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190503125855</emailId><senderName>Michal Privoznik</senderName><senderEmail>mprivozn@redhat.com</senderEmail><timestampReceived>2019-05-03 12:58:55-0400</timestampReceived><subject>Re: [libvirt-users] VM: Unable to enable scatter-gather / tx-checksumming / tcp-segmentation offload</subject><body>

On 5/3/19 10:19 AM, Harsh Gondaliya wrote:
&gt; In my Linux VM, I am unable to change scatter-gather / tx-checksumming /
&gt; TCP-segmentation offload features by ethtool command. I am using virtio nic
&gt; with vhostuser port backend.
&gt; It shows me an error:
&gt; Cannot change tx-checksumming
&gt; Cannot change scatter-gather
&gt; Cannot change tcp-segmentation offload
&gt; Could not change any device features

You need to enable those in domain XML:

https://libvirt.org/formatdomain.html#elementsDriverBackendOptions

&gt; 
&gt; Ony running command ethtool -k ens3, I get the following:
&gt; [image: image.png]

Oh ¸ it's way better to post this as a text rather than image. Some of us 
use text clients to read e-mails.

Michal

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190502102041</emailId><senderName>Patrick Meyer</senderName><senderEmail>libvirt@the-space.agency</senderEmail><timestampReceived>2019-05-02 10:20:41-0400</timestampReceived><subject>[libvirt-users] NUMA revisited</subject><body>

Moin libvirters,

I'm looking into the current numa settings for a large-ish libvirt/qemu 
based setup and I ended up having a couple of questions:

1) Has kernel.numa_balancing completely replaced numad or is there still 
a time and place for numad when we have a modern kernel?

2) Should I pin vCPUs to numa nodes and/or use numatune at all, when 
using kernel.numa_balancing?

3) The libvirt domain xml elements for vcpu and numatune.memory have 
placement options. According to the docs setting them to auto will query 
numad for a good placements. Should I keep numad running just for this?

4) Should I still expose the numa topology via cpu.numa.cell if I use 
the auto placement for vcpu and numatune?

5) Does the cpus attribute in the cpu.numa.cell elements reference vCPU 
cores or the real physical CPU cores? Most examples reference them as 
ranges, which confuses me as on my numa hosts node0 has cores 0,2,4.. 
and node1 the others.

I'd like to benchmark a couple of different options using our production 
workloads once I actually have grasp what combinations could make any 
sense. Maybe somebody would like to share the cpu/memory/numa settings 
they ended up with and why?

Thanks a lot,
Patrick Meyer

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190502114806</emailId><senderName>Martin Kletzander</senderName><senderEmail>mkletzan@redhat.com</senderEmail><timestampReceived>2019-05-02 11:48:06-0400</timestampReceived><subject>Re: [libvirt-users] Running all my virtual machines with a low priority</subject><body>

[Attachment #2 (multipart/signed)]


On Thu, May 02, 2019 at 12:10:54PM +0200, R. Diez wrote:
&gt; 
&gt; &gt; You could perhaps set  'cpu.shares' cgroup setting on /machine.slice.
&gt; &gt; This isn't really a nice level in the traditional sense, rather it is
&gt; &gt; a relative weighting evaluated against other cgroups at the same level.
&gt; &gt; So if you change it from 1024 to 512, then processes under /machine.slice
&gt; &gt; will get 1/2 the CPU time vs stuff under /system.slice or /user.slice,
&gt; &gt; when there is contention for CPU time.
&gt; 
&gt; Thanks for your help.
&gt; 
&gt; There is no "machine.slice" on my system. This is an excerpt from "systemd-cgls".
&gt; 
&gt; 
&gt; ??? ??????system.slice
&gt; ???   ??????irqbalance.service
&gt; ???   ??? ??????865 /usr/sbin/irqbalance --foreground
&gt; [... blah blah ...]
&gt; ???   ??????wpa_supplicant.service
&gt; ???   ??? ??????878 /sbin/wpa_supplicant -u -s -O /run/wpa_supplicant
&gt; ???   ??????libvirtd.service
&gt; ???   ??? ??????  987 /usr/sbin/libvirtd
&gt; ???   ??? ?????? 1395 /usr/sbin/dnsmasq \
&gt;                 --conf-file=/var/lib/libvirt/dnsmasq/default.conf --leasefile-ro
&gt; --dhcp-script=/usr/lib/libvirt/libvirt_leaseshelper
&gt; ???   ??? ?????? 1396 /usr/sbin/dnsmasq \
&gt;                 --conf-file=/var/lib/libvirt/dnsmasq/default.conf --leasefile-ro
&gt; --dhcp-script=/usr/lib/libvirt/libvirt_leaseshelper
&gt; ???   ??? ??????12285 /usr/bin/qemu-system-x86_64 -name \
&gt; guest=UbuntuMATE1804,debug-threads=on -S -object \
&gt; secret,id=masterKey0,format=raw,file=/var/lib/libvirt/qemu/domain-1-UbuntuMATE1804/master-key.aes \
&gt; -machine... 

Runing:

  $ systemctl set-property machine.slice CPUShares=512

works for me on some random machine I tried.  As far as I understand, Nice= was
supported (for backward compatibility) but it is not now, or at least not for
slices.

Feel free to set other things with similar commands or just use systemctl edit
machine.slice and configure that however you want.  Looking for the proper
documentation is left as an exercise for the reader.

&gt; 
&gt; But I guess there are differences depending on the libvirt version.
&gt; 
&gt; I thought of 'nice' because it is an easy way to lower the priority for everything \
&gt; (CPU and disk) at once. 
&gt; This is actually getting too complicated. I am a lone developer and sysadmin in a \
&gt; small company. I would need to learn too many things about control groups etc. One \
&gt; of the reasons I am trying libvirt is because of the "Virtual Machine Manager" GUI. \
&gt; 

I believe such basic settings should *not* be complicated, and I hope the above
got you closer to the goal.

&gt; Is there not an easier way? I realised there is a "libvirtd.service" on my system. \
&gt; Is there a simple way in systemd to just lower the priority of everything under \
&gt; that service? I am assuming that this service is starting all the virtual machines. \
&gt; 

We are also counting with the use case where you want the machine to take full
advantage of the system and its resources, but you want to restrict the
management of such virtual machines (libvirt in this case), so libvirt has to
explicitly override any possibly inherited configuration for virtual machines it
is starting.  That's why setting anything on the libvirtd.service will not work.

&gt; Best regards,
&gt; rdiez


["signature.asc" (application/pgp-signature)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190506115118</emailId><senderName>Harsh Gondaliya</senderName><senderEmail>harshgondaliya_vinodbhai@srmuniv.edu.in</senderEmail><timestampReceived>2019-05-06 11:51:18-0400</timestampReceived><subject>Re: [libvirt-users] VM: Unable to enable scatter-gather / tx-checksumming / tcp-segmentation offload</subject><body>

[Attachment #2 (multipart/alternative)]


This is what I was trying to show in that image.
root@vm2-Standard-PC-i440FX-PIIX-1996:/home/vm2# ethtool -k ens3
Features for ens3:
rx-checksumming: on [fixed]
tx-checksumming: off
    tx-checksum-ipv4: off [fixed]
    tx-checksum-ip-generic: off [fixed]
    tx-checksum-ipv6: off [fixed]
    tx-checksum-fcoe-crc: off [fixed]
    tx-checksum-sctp: off [fixed]
scatter-gather: off
    tx-scatter-gather: off [fixed]
    tx-scatter-gather-fraglist: off [fixed]
tcp-segmentation-offload: off
    tx-tcp-segmentation: off [fixed]
    tx-tcp-ecn-segmentation: off [fixed]
    tx-tcp6-segmentation: off [fixed]
udp-fragmentation-offload: off [fixed]
generic-segmentation-offload: off [requested on]
generic-receive-offload: on
large-receive-offload: off [fixed]
rx-vlan-offload: off [fixed]
tx-vlan-offload: off [fixed]
ntuple-filters: off [fixed]
receive-hashing: off [fixed]
highdma: on [fixed]
rx-vlan-filter: on [fixed]
vlan-challenged: off [fixed]
tx-lockless: off [fixed]
netns-local: off [fixed]
tx-gso-robust: off [fixed]
tx-fcoe-segmentation: off [fixed]
tx-gre-segmentation: off [fixed]
tx-ipip-segmentation: off [fixed]
tx-sit-segmentation: off [fixed]
tx-udp_tnl-segmentation: off [fixed]
fcoe-mtu: off [fixed]
tx-nocache-copy: off
loopback: off [fixed]
rx-fcs: off [fixed]
rx-all: off [fixed]
tx-vlan-stag-hw-insert: off [fixed]
rx-vlan-stag-hw-parse: off [fixed]
rx-vlan-stag-filter: off [fixed]
l2-fwd-offload: off [fixed]
busy-poll: on [fixed]
hw-tc-offload: off [fixed]
root@vm2-Standard-PC-i440FX-PIIX-1996:/home/vm2# ethtool -K ens3 sg on tx
on tso on gso on
Cannot change tx-checksumming
Cannot change scatter-gather
Cannot change tcp-segmentation-offload
Could not change any device features
root@vm2-Standard-PC-i440FX-PIIX-1996:/home/vm2#

 I have changed my VM domain XML file to:
&lt;interface type='vhostuser'&gt;
      &lt;mac address='52:54:00:e0:07:94'/&gt;
      &lt;source type='unix' path='/usr/local/var/run/openvswitch/vhost-user2'
mode='client'/&gt;
      &lt;model type='virtio'/&gt;
      &lt;driver name='vhost' queues='6'&gt;
        &lt;host csum='on' gso='on' tso4='on' tso6='on' ecn='on' ufo='on'
mrg_rxbuf='on'/&gt;
        &lt;guest csum='on' tso4='on' tso6='on' ecn='on' ufo='on'/&gt;
      &lt;/driver&gt;
      &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x03'
function='0x0'/&gt;
    &lt;/interface&gt;

Still, I get the same error. I want to get TSO feature in this DPDK vhost
user port. Unable to enable it.

On Fri, May 3, 2019 at 6:29 PM Michal Privoznik &lt;mprivozn@redhat.com&gt; wrote:

&gt; On 5/3/19 10:19 AM, Harsh Gondaliya wrote:
&gt; &gt; In my Linux VM, I am unable to change scatter-gather / tx-checksumming /
&gt; &gt; TCP-segmentation offload features by ethtool command. I am using virtio
&gt; nic
&gt; &gt; with vhostuser port backend.
&gt; &gt; It shows me an error:
&gt; &gt; Cannot change tx-checksumming
&gt; &gt; Cannot change scatter-gather
&gt; &gt; Cannot change tcp-segmentation offload
&gt; &gt; Could not change any device features
&gt;
&gt; You need to enable those in domain XML:
&gt;
&gt; https://libvirt.org/formatdomain.html#elementsDriverBackendOptions
&gt;
&gt; &gt;
&gt; &gt; Ony running command ethtool -k ens3, I get the following:
&gt; &gt; [image: image.png]
&gt;
&gt; Oh ¸ it's way better to post this as a text rather than image. Some of us
&gt; use text clients to read e-mails.
&gt;
&gt; Michal
&gt;

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;This is what I was trying \
to show in that image.&lt;br&gt;&lt;/div&gt;&lt;div \
dir="ltr"&gt;root@vm2-Standard-PC-i440FX-PIIX-1996:/home/vm2# ethtool -k \
ens3&lt;br&gt;Features for ens3:&lt;br&gt;rx-checksumming: on [fixed]&lt;br&gt;tx-checksumming: off&lt;br&gt; \
tx-checksum-ipv4: off [fixed]&lt;br&gt;       tx-checksum-ip-generic: off [fixed]&lt;br&gt;       \
tx-checksum-ipv6: off [fixed]&lt;br&gt;       tx-checksum-fcoe-crc: off [fixed]&lt;br&gt;       \
tx-checksum-sctp: off [fixed]&lt;br&gt;scatter-gather: off&lt;br&gt;       tx-scatter-gather: off \
[fixed]&lt;br&gt;       tx-scatter-gather-fraglist: off \
[fixed]&lt;br&gt;tcp-segmentation-offload: off&lt;br&gt;       tx-tcp-segmentation: off \
[fixed]&lt;br&gt;       tx-tcp-ecn-segmentation: off [fixed]&lt;br&gt;       \
tx-tcp6-segmentation: off [fixed]&lt;br&gt;udp-fragmentation-offload: off \
[fixed]&lt;br&gt;generic-segmentation-offload: off [requested \
on]&lt;br&gt;generic-receive-offload: on&lt;br&gt;large-receive-offload: off \
[fixed]&lt;br&gt;rx-vlan-offload: off [fixed]&lt;br&gt;tx-vlan-offload: off \
[fixed]&lt;br&gt;ntuple-filters: off [fixed]&lt;br&gt;receive-hashing: off [fixed]&lt;br&gt;highdma: on \
[fixed]&lt;br&gt;rx-vlan-filter: on [fixed]&lt;br&gt;vlan-challenged: off [fixed]&lt;br&gt;tx-lockless: \
off [fixed]&lt;br&gt;netns-local: off [fixed]&lt;br&gt;tx-gso-robust: off \
[fixed]&lt;br&gt;tx-fcoe-segmentation: off [fixed]&lt;br&gt;tx-gre-segmentation: off \
[fixed]&lt;br&gt;tx-ipip-segmentation: off [fixed]&lt;br&gt;tx-sit-segmentation: off \
[fixed]&lt;br&gt;tx-udp_tnl-segmentation: off [fixed]&lt;br&gt;fcoe-mtu: off \
[fixed]&lt;br&gt;tx-nocache-copy: off&lt;br&gt;loopback: off [fixed]&lt;br&gt;rx-fcs: off \
[fixed]&lt;br&gt;rx-all: off [fixed]&lt;br&gt;tx-vlan-stag-hw-insert: off \
[fixed]&lt;br&gt;rx-vlan-stag-hw-parse: off [fixed]&lt;br&gt;rx-vlan-stag-filter: off \
[fixed]&lt;br&gt;l2-fwd-offload: off [fixed]&lt;br&gt;busy-poll: on [fixed]&lt;br&gt;hw-tc-offload: off \
[fixed]&lt;br&gt;root@vm2-Standard-PC-i440FX-PIIX-1996:/home/vm2# ethtool -K ens3 sg on tx \
on tso on gso on&lt;br&gt;Cannot change tx-checksumming&lt;br&gt;Cannot change \
scatter-gather&lt;br&gt;Cannot change tcp-segmentation-offload&lt;br&gt;Could not change any \
device features&lt;br&gt;root@vm2-Standard-PC-i440FX-PIIX-1996:/home/vm2#&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; \
I have changed my VM domain XML file to:&lt;br&gt;&lt;div&gt;&lt;interface \
type='vhostuser'&gt;&lt;/div&gt;&lt;div&gt;         &lt;mac \
address='52:54:00:e0:07:94'/&gt;&lt;/div&gt;&lt;div&gt;         &lt;source \
type='unix' path='/usr/local/var/run/openvswitch/vhost-user2' \
mode='client'/&gt;&lt;/div&gt;&lt;div&gt;         &lt;model \
type='virtio'/&gt;&lt;/div&gt;&lt;div&gt;         &lt;driver name='vhost' \
queues='6'&gt;&lt;/div&gt;&lt;div&gt;            &lt;host csum='on' \
gso='on' tso4='on' tso6='on' ecn='on' \
ufo='on' mrg_rxbuf='on'/&gt;&lt;/div&gt;&lt;div&gt;            &lt;guest \
csum='on' tso4='on' tso6='on' ecn='on' \
ufo='on'/&gt;&lt;/div&gt;&lt;div&gt;         &lt;/driver&gt;&lt;/div&gt;&lt;div&gt;         \
&lt;address type='pci' domain='0x0000' bus='0x00' \
slot='0x03' function='0x0'/&gt;&lt;/div&gt;&lt;div&gt;      \
&lt;/interface&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Still, I get the same error. I want \
to get TSO feature in this DPDK vhost user port. Unable to enable \
it.&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;div class="gmail_quote"&gt;&lt;div class="gmail_attr" \
dir="ltr"&gt;On Fri, May 3, 2019 at 6:29 PM Michal Privoznik &lt;&lt;a \
href="mailto:mprivozn@redhat.com" target="_blank"&gt;mprivozn@redhat.com&lt;/a&gt;&gt; \
wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote style="margin:0px 0px 0px 0.8ex;border-left:1px solid \
rgb(204,204,204);padding-left:1ex" class="gmail_quote"&gt;On 5/3/19 10:19 AM, Harsh \
Gondaliya wrote:&lt;br&gt; &gt; In my Linux VM, I am unable to change scatter-gather / \
tx-checksumming /&lt;br&gt; &gt; TCP-segmentation offload features by ethtool command. I am \
using virtio nic&lt;br&gt; &gt; with vhostuser port backend.&lt;br&gt;
&gt; It shows me an error:&lt;br&gt;
&gt; Cannot change tx-checksumming&lt;br&gt;
&gt; Cannot change scatter-gather&lt;br&gt;
&gt; Cannot change tcp-segmentation offload&lt;br&gt;
&gt; Could not change any device features&lt;br&gt;
&lt;br&gt;
You need to enable those in domain XML:&lt;br&gt;
&lt;br&gt;
&lt;a rel="noreferrer" href="https://libvirt.org/formatdomain.html#elementsDriverBackendOptions" \
target="_blank"&gt;https://libvirt.org/formatdomain.html#elementsDriverBackendOptions&lt;/a&gt;&lt;br&gt;
 &lt;br&gt;
&gt; &lt;br&gt;
&gt; Ony running command ethtool -k ens3, I get the following:&lt;br&gt;
&gt; [image: image.png]&lt;br&gt;
&lt;br&gt;
Oh ¸ it's way better to post this as a text rather than image. Some of us &lt;br&gt;
use text clients to read e-mails.&lt;br&gt;
&lt;br&gt;
Michal&lt;br&gt;
&lt;/blockquote&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190506212849</emailId><senderName>Gionatan Danti</senderName><senderEmail>g.danti@assyoma.it</senderEmail><timestampReceived>2019-05-06 21:28:49-0400</timestampReceived><subject>Re: [libvirt-users] Autodetecting backing file properties when using vol-create-as</subject><body>

Il 24-04-2019 00:13 Gionatan Danti ha scritto:
&gt; Hi all,
&gt; experimenting with vol-create-as, I think it should autodetect some
&gt; data - filesize and backing file format, specifically. However, the
&gt; current implementation require us to specify both filesize and backing
&gt; file format.
&gt; 
&gt; Considering that qemu-img already autodetects these data, there are
&gt; any reason for the lack of autodetect by libvirt? Should I open a
&gt; bugzilla issue?
&gt; 
&gt; Below you can find a practical example of what I mean. System is
&gt; CentOS Linux release 7.6.1810 (Core) with
&gt; libvirt-4.5.0-10.el7_6.4.x86_64
&gt; 
&gt; Please let me know if I am missing something.
&gt; Thanks.
&gt; 
&gt; # create base file
&gt; [root@singularity images]# qemu-img create base.qcow2 8G -f qcow2
&gt; Formatting 'base.qcow2', fmt=qcow2 size=8589934592 cluster_size=65536
&gt; lazy_refcounts=off refcount_bits=16
&gt; [root@singularity images]# qemu-img info base.qcow2
&gt; image: base.qcow2
&gt; file format: qcow2
&gt; virtual size: 8.0G (8589934592 bytes)
&gt; disk size: 17K
&gt; cluster_size: 65536
&gt; Format specific information:
&gt;     compat: 1.1
&gt;     lazy refcounts: false
&gt;     refcount bits: 16
&gt;     corrupt: false
&gt; 
&gt; # create overlay1.qcow2 via qemu-img; note how backing file format is
&gt; autodetected ("-f qcow2" regards the overlay file itself)
&gt; [root@singularity images]# qemu-img create -b
&gt; /var/lib/libvirt/images/base.qcow2 overlay1.qcow2 -f qcow2
&gt; Formatting 'overlay1.qcow2', fmt=qcow2 size=8589934592
&gt; backing_file=/var/lib/libvirt/images/base.qcow2 cluster_size=65536
&gt; lazy_refcounts=off refcount_bits=16
&gt; [root@singularity images]# qemu-img info overlay1.qcow2
&gt; image: overlay1.qcow2
&gt; file format: qcow2
&gt; virtual size: 8.0G (8589934592 bytes)
&gt; disk size: 17K
&gt; cluster_size: 65536
&gt; backing file: /var/lib/libvirt/images/base.qcow2
&gt; Format specific information:
&gt;     compat: 1.1
&gt;     lazy refcounts: false
&gt;     refcount bits: 16
&gt;     corrupt: false
&gt; 
&gt; # try the same with virsh vol-create-as; note how you must specify
&gt; filesize and the backing file format is *wrong* (leading to an
&gt; unusable overlay disk)
&gt; [root@singularity images]# virsh vol-create-as default overlay2.qcow2
&gt; 8G --format qcow2 --backing-vol /var/lib/libvirt/images/base.qcow2
&gt; Vol overlay2.qcow2 created
&gt; [root@singularity images]# qemu-img info overlay2.qcow2
&gt; image: overlay2.qcow2
&gt; file format: qcow2
&gt; virtual size: 8.0G (8589934592 bytes)
&gt; disk size: 17K
&gt; cluster_size: 65536
&gt; backing file: /var/lib/libvirt/images/base.qcow2
&gt; backing file format: raw
&gt; Format specific information:
&gt;     compat: 0.10
&gt;     refcount bits: 16

Dear all,
any thoughts on the matter?

Thanks.

-- 
Danti Gionatan
Supporto Tecnico
Assyoma S.r.l. - www.assyoma.it
email: g.danti@assyoma.it - info@assyoma.it
GPG public key ID: FF5F32A8

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190507072602</emailId><senderName>Michal Privoznik</senderName><senderEmail>mprivozn@redhat.com</senderEmail><timestampReceived>2019-05-07 07:26:02-0400</timestampReceived><subject>Re: [libvirt-users] disable libvirt-nwfilter</subject><body>

[Please keep the list CC-ed as it may help somebody from future when 
searching for solution to the same problem]
On 5/6/19 6:08 PM, nakata@geekpit.org wrote:
&gt; Am 2019-05-06 16:26, schrieb Michal Privoznik:
&gt;&gt; On 5/6/19 3:44 PM, nakata@geekpit.org wrote:
&gt;&gt;&gt; Hi,
&gt;&gt;&gt;
&gt;&gt;&gt; i want to disable the nwfilter functionality of libvirt.
&gt;&gt;&gt; It's surely nice for some people, nevertheless i don't want libvirt 
&gt;&gt;&gt; to alter any netfilter rules, neither i want the according 
&gt;&gt;&gt; functionality even available.
&gt;&gt;
&gt;&gt; It's not only NWFilter that will inject firewall rules. Depending on
&gt;&gt; configuration it might also be the default network.
&gt;&gt;
&gt;&gt;&gt; I know about nwfilter-undefine, but what i'm looking for is an option 
&gt;&gt;&gt; to globally disable this functionality at all. Some config flag or 
&gt;&gt;&gt; similar.
&gt;&gt;&gt; How can i achieve that?
&gt;&gt;
&gt;&gt; Unless you have a domain &lt;interface/&gt; defined so that it uses a
&gt;&gt; nwfilter then no firwall rules are added by nwfilter code.
&gt;&gt;
&gt;&gt; If you still want to remove nwfilter module then just uninstall it, 
&gt;&gt; e.g. via:
&gt;&gt;
&gt;&gt; dnf remove libvirt-daemon-driver-nwfilter libvirt-daemon-config-nwfilter
&gt;&gt;
&gt;&gt; Michal
&gt; 
&gt; Hi,
&gt; 
&gt; me again.
&gt; Another question libvirt is adding chains. Where do i disable these:
&gt; 
&gt; chains are LIBVIRT-{FWO,FWX,FWI, INP, OUT}
&gt; 
&gt; These are absolutely and explicit unwanted.
&gt; Adding new rich features for folks is a fine thing, but i need an opt out.
&gt; Please, how do i get rid of it?

As I've said, there are two sources which cause libvirt to insert FW 
rules. By uninstalling nwfilter module you've eliminated one. But since 
you're still able to run the domain this step was useless because your 
domain doesn't have nwfilter configured for any of its &lt;interface/&gt;-s 
and thus nwfilter module did nothing but sit there.

The other module that is inserting FW rules is network module.
Currently, when libvirtd is starting it reads all the configs of defined 
networks. If a NATed network is found then it creates those LIBVIRT-* 
chains and when the network is started then all the rules will be placed 
into those chains to not contaminate config set by sysadmin.
There is patch to postpone creating the chains unitl network actually is 
starting:

https://www.redhat.com/archives/libvir-list/2019-April/msg01547.html

So your options here are:

a) undefine all NATed networks (typically there's 'default' network)
b) uninstall network module (but this will render all domains using 
&lt;interface type='network'/&gt; unable to start).

As an extension to a) you can have a network with &lt;forward mode='open'/&gt; 
which preserves all the advantages of having a libvirt network but does 
not install any FW rules.

Of course, any comments to aforementioned patch are welcome too.

Michal

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190510130158</emailId><senderName>"Peter P."</senderName><senderEmail>p.pan48711@gmail.com</senderEmail><timestampReceived>2019-05-10 13:01:58-0400</timestampReceived><subject>Re: [libvirt-users] Running libvirtd out of source directory connection reset error</subject><body>

Thank you Daniel for the reply, my issue was caused by the libvirtd
binary not having the proper SELinux labels so I'll play around with
it with SELinux in permissive mode for now.

-Peter

On Fri, May 10, 2019 at 4:42 AM Daniel P. Berrangé &lt;berrange@redhat.com&gt; wrote:
&gt;
&gt; On Thu, May 09, 2019 at 01:33:51PM -0400, Peter P. wrote:
&gt; &gt; Hi all,
&gt; &gt;
&gt; &gt; I'm getting started with hacking around with libvirt  and am trying to
&gt; &gt; familiarize myself with launching and running an instance of libvirtd
&gt; &gt; I built from source on Centos 7.6.
&gt; &gt;
&gt; &gt; Following the instructions from https://libvirt.org/compiling.html to
&gt; &gt; launch my built versions of libvirtd and virsh, I get the following
&gt; &gt; error with no other context when trying to start a domain using "virsh
&gt; &gt; start mydomain":
&gt; &gt;
&gt; &gt; error: Cannot recv data: Connection reset by peer
&gt; &gt;
&gt; &gt; Despite this error, I am able to run commands list virsh list.
&gt; &gt;
&gt; &gt; Are there additional parameters needed to launch libvirtd or
&gt; &gt; additional services I need to start up alongside it?
&gt;
&gt; If you have libvirt installed from the distro packages, then a plain
&gt; "virsh" will find the virsh binary from /usr/bin. This is built to
&gt; expect an installation config
&gt;
&gt;    --prefix=/usr --sysconfdir=/etc --localstatedir=/var
&gt;
&gt;
&gt; If you build your own using "configure" with no args, or with args
&gt; that don't match the above, then  your libvirtd binary will be
&gt; listening on a different socket, so virsh won't connect successfully.
&gt; You should use the "virsh" binary that you just built instead.
&gt;
&gt; Regards,
&gt; Daniel
&gt; --
&gt; |: https://berrange.com      -o-    https://www.flickr.com/photos/dberrange :|
&gt; |: https://libvirt.org         -o-            https://fstop138.berrange.com :|
&gt; |: https://entangle-photo.org    -o-    https://www.instagram.com/dberrange :|

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190513114410</emailId><senderName>Michal Privoznik</senderName><senderEmail>mprivozn@redhat.com</senderEmail><timestampReceived>2019-05-13 11:44:10-0400</timestampReceived><subject>Re: [libvirt-users] Cannot get interface MTU - qemu quest fails to start off OpenVswitch</subject><body>

On 5/10/19 6:23 PM, lejeczek wrote:
&gt; On 10/05/2019 14:44, Michal Privoznik wrote:
&gt;&gt; On 5/10/19 3:26 PM, lejeczek wrote:
&gt;&gt;&gt; hi guys
&gt;&gt;&gt;
&gt;&gt;&gt; I have a qemu guest and openvswitch bridge and the guest fails to start:
&gt;&gt;&gt;
&gt;&gt;&gt; $ virsh start work8
&gt;&gt;&gt; error: Failed to start domain work8-vm-win2016
&gt;&gt;&gt; error: Cannot get interface MTU on 'ovsbr0': No such device
&gt;&gt;
&gt;&gt; Well, this means that 'ovsbr0' doesn't exist. Is that so? Can you
&gt;&gt; share your &lt;interface/&gt; configuration and the network XML?
&gt;&gt;
&gt;&gt; Michal
&gt; 
&gt; so if your libvirt's net is like this:
&gt; 
&gt; &lt;network&gt;
&gt;    &lt;name&gt;ovs-br0&lt;/name&gt;
&gt;    &lt;uuid&gt;e5129e76-1576-4866-97e1-42f14263cfc2&lt;/uuid&gt;
&gt;    &lt;forward mode='bridge'/&gt;
&gt;    &lt;bridge name='ovsbr0'/&gt;
&gt;    &lt;virtualport type='openvswitch'/&gt;
&gt; ....
&gt; 
&gt; then you need extra(extra for ovs tools create both for us at bridge
&gt; creation time and nmcli(you) need to create those explicitly) port+iface
&gt; so this:
&gt; 
&gt; $ ovs-vsctl show
&gt; 
&gt; output will contain this:
&gt; 
&gt; ...
&gt; 
&gt; Port "ovsbr0"
&gt;              Interface "ovsbr0"
&gt;                  type: internal

That is expected. &lt;forward mode='bridge'/&gt; is document like so:

https://libvirt.org/formatnetwork.html#elementsConnect

Michal

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190513173339</emailId><senderName>Michel Rozpendowski</senderName><senderEmail>mro@osimis.io</senderEmail><timestampReceived>2019-05-13 17:33:39-0400</timestampReceived><subject>Re: [libvirt-users] VM display is blank when open (but Gnome Boxes thumbnails ok)</subject><body>

[Attachment #2 (multipart/alternative)]


On Mon, May 13, 2019 at 5:26 PM Martin Kletzander &lt;mkletzan@redhat.com&gt;
wrote:

&gt; On Mon, May 13, 2019 at 04:40:55PM +0200, Michel Rozpendowski wrote:
&gt; &gt;Hi,
&gt; &gt;
&gt; &gt;I also posted this question on the IRC #virt channel but have not received
&gt; &gt;any reaction at the moment of posting this message to the mailing list.
&gt; &gt;
&gt; &gt;Since I last turned off my laptop (Dell XPS-15-9570 running Ubuntu 19.04)
&gt; &gt;on Friday 10 May (I had to do it by long power press by the way), I am no
&gt; &gt;longer able to get the display of my VMs: I am getting a black screen,
&gt; even
&gt; &gt;though I can see it running in the thumbnail of Gnome Boxes.
&gt; &gt;You can see the described behaviour on the following video capture:
&gt; &gt;https://youtu.be/Lv67g0foyzc.
&gt; &gt;Troubleshooting Log from Gnome Boxes is available here:
&gt; &gt;https://pastebin.com/9eWGYsJV.
&gt; &gt;It was working all properly on Friday before I turn off my laptop.
&gt; &gt;
&gt; &gt;Any clue what could be wrong and how I could solve this issue (I digged
&gt; the
&gt; &gt;Internet for 2 hours without success)?
&gt; &gt;
&gt; &gt;Thanks in advance for your help!
&gt; &gt;
&gt;
&gt; Well, sorry, I don't really know what might've caused it, but it looks all
&gt; kind
&gt; of OK from a libvirt standpoint, so my best guess would be something
&gt; related to
&gt; the virtio graphics.  But the I saw you are turning off that VM, so I'm
&gt; guessing
&gt; it happens even after starting the VM back, right?  Still, might be worth
&gt; asking
&gt; on qemu mailing lists if nobody on this list will know.
&gt;

Thanks! Great advice about qemu. I digged into that direction and found
following post (
https://www.linuxquestions.org/questions/slackware-14/black-screen-with-virt-manager-4175486301/)
where setting the the video model to QLX and the display type to SPICE
fixed the issue.
It worked for me!

SOLVED

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;&lt;br&gt;&lt;/div&gt;&lt;br&gt;&lt;div \
class="gmail_quote"&gt;&lt;div dir="ltr" class="gmail_attr"&gt;On Mon, May 13, 2019 at 5:26 PM \
Martin Kletzander &lt;&lt;a \
href="mailto:mkletzan@redhat.com"&gt;mkletzan@redhat.com&lt;/a&gt;&gt; \
wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote class="gmail_quote" style="margin:0px 0px 0px \
0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"&gt;On Mon, May 13, 2019 \
at 04:40:55PM +0200, Michel Rozpendowski wrote:&lt;br&gt; &gt;Hi,&lt;br&gt;
&gt;&lt;br&gt;
&gt;I also posted this question on the IRC #virt channel but have not received&lt;br&gt;
&gt;any reaction at the moment of posting this message to the mailing list.&lt;br&gt;
&gt;&lt;br&gt;
&gt;Since I last turned off my laptop (Dell XPS-15-9570 running Ubuntu 19.04)&lt;br&gt;
&gt;on Friday 10 May (I had to do it by long power press by the way), I am no&lt;br&gt;
&gt;longer able to get the display of my VMs: I am getting a black screen, even&lt;br&gt;
&gt;though I can see it running in the thumbnail of Gnome Boxes.&lt;br&gt;
&gt;You can see the described behaviour on the following video capture:&lt;br&gt;
&gt;&lt;a href="https://youtu.be/Lv67g0foyzc" rel="noreferrer" \
target="_blank"&gt;https://youtu.be/Lv67g0foyzc&lt;/a&gt;.&lt;br&gt; &gt;Troubleshooting Log from \
Gnome Boxes is available here:&lt;br&gt; &gt;&lt;a href="https://pastebin.com/9eWGYsJV" \
rel="noreferrer" target="_blank"&gt;https://pastebin.com/9eWGYsJV&lt;/a&gt;.&lt;br&gt; &gt;It was \
working all properly on Friday before I turn off my laptop.&lt;br&gt; &gt;&lt;br&gt;
&gt;Any clue what could be wrong and how I could solve this issue (I digged the&lt;br&gt;
&gt;Internet for 2 hours without success)?&lt;br&gt;
&gt;&lt;br&gt;
&gt;Thanks in advance for your help!&lt;br&gt;
&gt;&lt;br&gt;
&lt;br&gt;
Well, sorry, I don't really know what might've caused it, but it looks all \
kind&lt;br&gt; of OK from a libvirt standpoint, so my best guess would be something related \
to&lt;br&gt; the virtio graphics.   But the I saw you are turning off that VM, so I'm \
guessing&lt;br&gt; it happens even after starting the VM back, right?   Still, might be \
worth asking&lt;br&gt; on qemu mailing lists if nobody on this list will \
know.&lt;br&gt;&lt;/blockquote&gt;&lt;div&gt;  &lt;/div&gt;&lt;div&gt;Thanks! Great advice about qemu. I digged \
into that direction and found following post (&lt;a \
href="https://www.linuxquestions.org/questions/slackware-14/black-screen-with-virt-man \
ager-4175486301/"&gt;https://www.linuxquestions.org/questions/slackware-14/black-screen-with-virt-manager-4175486301/&lt;/a&gt;) \
where setting the  the video model to QLX and the display type to SPICE fixed the \
issue.&lt;/div&gt;&lt;div&gt;It worked for \
me!&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;SOLVED&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190514185113</emailId><senderName>"Lentes, Bernd"</senderName><senderEmail>bernd.lentes@helmholtz-muenchen.de</senderEmail><timestampReceived>2019-05-14 18:51:13-0400</timestampReceived><subject>Re: [libvirt-users] domains paused without any obvious reason</subject><body>



----- Am 14. Mai 2019 um 11:08 schrieb Daniel P. Berrangé berrange@redhat.com:

&gt; 
&gt; 'virsh domstate --reason $GUEST'
&gt; 
&gt; will tell you what event caused the guest to pause in the first place.
&gt; 
&gt; If you can resume successfully, this indicates the event was a transient
&gt; problem.   Given the domblkerror message 'no space' I'm it looks that
&gt; you had a problem running out of disk space temporarily which then
&gt; resolved itself.
&gt; 
&gt; Regards,
&gt; Daniel


Hi,

i have a clue what happened.
The script shuts down the domains, snapshots them, restarts them and then copy the \
backing files to a CIFS server. After the copy is done (which lasts several hours), \
the domains are blockcommitted. Finally the script deletes the local snap files. I \
think the snap files got too big, because the logical volume for them has just 20GB \
and i'm snapshotting currently 8 domains. Limit of the LV was reached. And because i \
finally deleted the snapshot files i didn't see that. I will monitor now the LV for \
the snap files in my script to see how big they are growing.

Bernd
 

Helmholtz Zentrum Muenchen
Deutsches Forschungszentrum fuer Gesundheit und Umwelt (GmbH)
Ingolstaedter Landstr. 1
85764 Neuherberg
www.helmholtz-muenchen.de
Stellv. Aufsichtsratsvorsitzender: MinDirig. Dr. Manfred Wolter
Geschaeftsfuehrung: Prof. Dr. med. Dr. h.c. Matthias Tschoep, Heinrich Bassler, \
                Kerstin Guenther
Registergericht: Amtsgericht Muenchen HRB 6466
USt-IdNr: DE 129521671


_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20190515135227</emailId><senderName>Peter Crowther</senderName><senderEmail>peter.crowther@melandra.com</senderEmail><timestampReceived>2019-05-15 13:52:27-0400</timestampReceived><subject>Re: [libvirt-users] domain still running although snapshot-file is deleted !?!</subject><body>

[Attachment #2 (multipart/alternative)]


The file may have been unlinked (name to inode mapping removed from the
filesystem), but the inode and therefore the data will stay until no
process references the inode. I *think* this may be what's happening in
your case?

Peter

On Wed, 15 May 2019, 14:25 Lentes, Bernd, &lt;
bernd.lentes@helmholtz-muenchen.de&gt; wrote:

&gt; Hi,
&gt;
&gt; i have a strange situation:
&gt; A domain is still running where domblklist points to a snapshot file and
&gt; also dumpxml says the current drive is that snapshot file.
&gt; But the file has been deleted hours ago. And the domain is still running.
&gt; I can login via ssh, the database and the webserver are still running,
&gt; domain is performant.
&gt; How can that be ?
&gt; Also lsof shows that the file is deleted:
&gt; qemu-syst 27007             qemu   15ur     REG             254,14
&gt; 335609856     183599 /mnt/snap/sim.sn (deleted)
&gt; qemu-syst 27007             qemu   16ur     REG             254,14
&gt; 335609856     183599 /mnt/snap/sim.sn (deleted)
&gt; qemu-syst 27007 27288       qemu   15ur     REG             254,14
&gt; 335609856     183599 /mnt/snap/sim.sn (deleted)
&gt; qemu-syst 27007 27288       qemu   16ur     REG             254,14
&gt; 335609856     183599 /mnt/snap/sim.sn (deleted)
&gt; CPU\x200/ 27007 27308       qemu   15ur     REG             254,14
&gt; 335609856     183599 /mnt/snap/sim.sn (deleted)
&gt; CPU\x200/ 27007 27308       qemu   16ur     REG             254,14
&gt; 335609856     183599 /mnt/snap/sim.sn (deleted)
&gt; CPU\x201/ 27007 27309       qemu   15ur     REG             254,14
&gt; 335609856     183599 /mnt/snap/sim.sn (deleted)
&gt; CPU\x201/ 27007 27309       qemu   16ur     REG             254,14
&gt; 335609856     183599 /mnt/snap/sim.sn (deleted)
&gt; vnc_worke 27007 27321       qemu   15ur     REG             254,14
&gt; 335609856     183599 /mnt/snap/sim.sn (deleted)
&gt; vnc_worke 27007 27321       qemu   16ur     REG             254,14
&gt; 335609856     183599 /mnt/snap/sim.sn (deleted)
&gt;
&gt; Bernd
&gt;
&gt; --
&gt;
&gt; Bernd Lentes
&gt; Systemadministration
&gt; Institut f=C3=BCr Entwicklungsgenetik
&gt; Geb=C3=A4ude 35.34 - Raum 208
&gt; HelmholtzZentrum m=C3=BCnchen
&gt; bernd.lentes@helmholtz-muenchen.de
&gt; phone: +49 89 3187 1241
&gt; phone: +49 89 3187 3827
&gt; fax: +49 89 3187 2294
&gt; http://www.helmholtz-muenchen.de/idg
&gt;
&gt; wer Fehler macht kann etwas lernen
&gt; wer nichts macht kann auch nichts lernen
&gt;
&gt;
&gt; Helmholtz Zentrum Muenchen
&gt; Deutsches Forschungszentrum fuer Gesundheit und Umwelt (GmbH)
&gt; Ingolstaedter Landstr. 1
&gt; 85764 Neuherberg
&gt; www.helmholtz-muenchen.de
&gt; Stellv. Aufsichtsratsvorsitzender: MinDirig. Dr. Manfred Wolter
&gt; Geschaeftsfuehrung: Prof. Dr. med. Dr. h.c. Matthias Tschoep, Heinrich
&gt; Bassler, Kerstin Guenther
&gt; Registergericht: Amtsgericht Muenchen HRB 6466
&gt; USt-IdNr: DE 129521671
&gt;
&gt;
&gt; _______________________________________________
&gt; libvirt-users mailing list
&gt; libvirt-users@redhat.com
&gt; https://www.redhat.com/mailman/listinfo/libvirt-users

[Attachment #5 (text/html)]

&lt;div dir="auto"&gt;The file may have been unlinked (name to inode mapping removed from \
the filesystem), but the inode and therefore the data will stay until no process \
references the inode. I *think* this may be what's happening in your case?&lt;div \
dir="auto"&gt;&lt;br&gt;&lt;/div&gt;&lt;div dir="auto"&gt;Peter  &lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;div \
class="gmail_quote"&gt;&lt;div dir="ltr" class="gmail_attr"&gt;On Wed, 15 May 2019, 14:25 \
Lentes, Bernd, &lt;&lt;a \
href="mailto:bernd.lentes@helmholtz-muenchen.de"&gt;bernd.lentes@helmholtz-muenchen.de&lt;/a&gt;&gt; \
wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote class="gmail_quote" style="margin:0 0 0 \
.8ex;border-left:1px #ccc solid;padding-left:1ex"&gt;Hi,&lt;br&gt; &lt;br&gt;
i have a strange situation:&lt;br&gt;
A domain is still running where domblklist points to a snapshot file and also dumpxml \
says the current drive is that snapshot file.&lt;br&gt; But the file has been deleted hours \
ago. And the domain is still running. I can login via ssh, the database and the \
webserver are still running,&lt;br&gt; domain is performant.&lt;br&gt;
How can that be ?&lt;br&gt;
Also lsof shows that the file is deleted:&lt;br&gt;
qemu-syst 27007                    qemu     15ur        REG                    254,14 \
335609856        183599 /mnt/snap/&lt;a href="http://sim.sn" rel="noreferrer noreferrer" \
target="_blank"&gt;sim.sn&lt;/a&gt; (deleted)&lt;br&gt; qemu-syst 27007                    qemu     \
16ur        REG                    254,14      335609856        183599 /mnt/snap/&lt;a \
href="http://sim.sn" rel="noreferrer noreferrer" target="_blank"&gt;sim.sn&lt;/a&gt; \
(deleted)&lt;br&gt; qemu-syst 27007 27288           qemu     15ur        REG                \
254,14      335609856        183599 /mnt/snap/&lt;a href="http://sim.sn" rel="noreferrer \
noreferrer" target="_blank"&gt;sim.sn&lt;/a&gt; (deleted)&lt;br&gt; qemu-syst 27007 27288           \
qemu     16ur        REG                    254,14      335609856        183599 \
/mnt/snap/&lt;a href="http://sim.sn" rel="noreferrer noreferrer" \
target="_blank"&gt;sim.sn&lt;/a&gt; (deleted)&lt;br&gt; CPU\x200/ 27007 27308           qemu     \
15ur        REG                    254,14      335609856        183599 /mnt/snap/&lt;a \
href="http://sim.sn" rel="noreferrer noreferrer" target="_blank"&gt;sim.sn&lt;/a&gt; \
(deleted)&lt;br&gt; CPU\x200/ 27007 27308           qemu     16ur        REG                \
254,14      335609856        183599 /mnt/snap/&lt;a href="http://sim.sn" rel="noreferrer \
noreferrer" target="_blank"&gt;sim.sn&lt;/a&gt; (deleted)&lt;br&gt; CPU\x201/ 27007 27309           \
qemu     15ur        REG                    254,14      335609856        183599 \
/mnt/snap/&lt;a href="http://sim.sn" rel="noreferrer noreferrer" \
target="_blank"&gt;sim.sn&lt;/a&gt; (deleted)&lt;br&gt; CPU\x201/ 27007 27309           qemu     \
16ur        REG                    254,14      335609856        183599 /mnt/snap/&lt;a \
href="http://sim.sn" rel="noreferrer noreferrer" target="_blank"&gt;sim.sn&lt;/a&gt; \
(deleted)&lt;br&gt; vnc_worke 27007 27321           qemu     15ur        REG                \
254,14      335609856        183599 /mnt/snap/&lt;a href="http://sim.sn" rel="noreferrer \
noreferrer" target="_blank"&gt;sim.sn&lt;/a&gt; (deleted)&lt;br&gt; vnc_worke 27007 27321           \
qemu     16ur        REG                    254,14      335609856        183599 \
/mnt/snap/&lt;a href="http://sim.sn" rel="noreferrer noreferrer" \
target="_blank"&gt;sim.sn&lt;/a&gt; (deleted)&lt;br&gt; &lt;br&gt;
Bernd&lt;br&gt;
&lt;br&gt;
-- &lt;br&gt;
&lt;br&gt;
Bernd Lentes &lt;br&gt;
Systemadministration &lt;br&gt;
Institut für Entwicklungsgenetik &lt;br&gt;
Gebäude 35.34 - Raum 208 &lt;br&gt;
HelmholtzZentrum münchen &lt;br&gt;
&lt;a href="mailto:bernd.lentes@helmholtz-muenchen.de" target="_blank" \
                rel="noreferrer"&gt;bernd.lentes@helmholtz-muenchen.de&lt;/a&gt; &lt;br&gt;
phone: +49 89 3187 1241 &lt;br&gt;
phone: +49 89 3187 3827 &lt;br&gt;
fax: +49 89 3187 2294 &lt;br&gt;
&lt;a href="http://www.helmholtz-muenchen.de/idg" rel="noreferrer noreferrer" \
target="_blank"&gt;http://www.helmholtz-muenchen.de/idg&lt;/a&gt; &lt;br&gt; &lt;br&gt;
wer Fehler macht kann etwas lernen &lt;br&gt;
wer nichts macht kann auch nichts lernen&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
Helmholtz Zentrum Muenchen&lt;br&gt;
Deutsches Forschungszentrum fuer Gesundheit und Umwelt (GmbH)&lt;br&gt;
Ingolstaedter Landstr. 1&lt;br&gt;
85764 Neuherberg&lt;br&gt;
&lt;a href="http://www.helmholtz-muenchen.de" rel="noreferrer noreferrer" \
target="_blank"&gt;www.helmholtz-muenchen.de&lt;/a&gt;&lt;br&gt; Stellv. Aufsichtsratsvorsitzender: \
                MinDirig. Dr. Manfred Wolter&lt;br&gt;
Geschaeftsfuehrung: Prof. Dr. med. Dr. h.c. Matthias Tschoep, Heinrich Bassler, \
                Kerstin Guenther&lt;br&gt;
Registergericht: Amtsgericht Muenchen HRB 6466&lt;br&gt;
USt-IdNr: DE 129521671&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
_______________________________________________&lt;br&gt;
libvirt-users mailing list&lt;br&gt;
&lt;a href="mailto:libvirt-users@redhat.com" target="_blank" \
rel="noreferrer"&gt;libvirt-users@redhat.com&lt;/a&gt;&lt;br&gt; &lt;a \
href="https://www.redhat.com/mailman/listinfo/libvirt-users" rel="noreferrer \
noreferrer" target="_blank"&gt;https://www.redhat.com/mailman/listinfo/libvirt-users&lt;/a&gt;&lt;/blockquote&gt;&lt;/div&gt;




_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190517061243</emailId><senderName>Thomas Stein</senderName><senderEmail>hello@himbee.re</senderEmail><timestampReceived>2019-05-17 06:12:43-0400</timestampReceived><subject>Re: [libvirt-users] [libvirt] surprising &lt;backingStore type='file'&gt; setting in domain.xml</subject><body>

(switched to libvirt-users as it seems to be more appropriate)

On 2019-05-16 23:02, Eric Blake wrote:
&gt; On 5/16/19 10:20 AM, Thomas Stein wrote:
&gt;&gt; Hello all.
&gt;&gt; 
&gt;&gt; My currently used versions: libvirt-5.2.0 and qemu-4.0.0.
&gt;&gt; 
&gt;&gt; Here is my problem. I'm struggeling since a few weeks with a strange
&gt;&gt; behaviour by either qemu or libvirt. After a reboot of
&gt;&gt; the hardware node the $domain.xml contains suddenly a backingStore
&gt;&gt; setting which was not there before reboot.
&gt;&gt; Something like that:
&gt;&gt; 
&gt;&gt;   &lt;devices&gt;
&gt;&gt;     &lt;emulator&gt;/usr/bin/qemu-system-x86_64&lt;/emulator&gt;
&gt;&gt;     &lt;disk type='file' device='disk'&gt;
&gt;&gt;       &lt;driver name='qemu' type='qcow2'/&gt;
&gt;&gt;       &lt;source
&gt;&gt; file='/var/lib/libvirt/shinymail/shinymail_weekly.qcow2-2019-05-15'/&gt;
&gt;&gt;       &lt;backingStore type='file'&gt;
&gt;&gt;         &lt;format type='qcow2'/&gt;
&gt;&gt;         &lt;source file='/var/lib/libvirt/images/shinymail.qcow2'/&gt;
&gt; 
&gt; Yes, this matches:
&gt; 
&gt;&gt;       &lt;/backingStore&gt;
&gt;&gt;       &lt;target dev='vda' bus='virtio'/&gt;
&gt;&gt;       &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x07'
&gt;&gt; function='0x0'/&gt;
&gt;&gt;     &lt;/disk&gt;
&gt;&gt; ...
&gt;&gt; 
&gt;&gt; This obviousely happens after a backup has been running. The Backup
&gt;&gt; Script looks like this:
&gt;&gt; 
&gt;&gt; &lt;snip&gt;
&gt;&gt; virsh snapshot-create-as --domain shinymail weekly --diskspec
&gt;&gt; vda,file=/var/lib/libvirt/shinymail/shinymail_weekly.qcow2-$(date
&gt;&gt; +%Y-%m-%d) --disk-only --atomic --no-metadata
&gt; 
&gt; the effects of this command.
&gt; 
&gt; Ultimately, I'm TRYING to get my new 'virsh domain-backup' command
&gt; integrated into the next libvirt release, which has the advantage of
&gt; performing a backup WITHOUT having to modify the &lt;domain&gt; XML. But 
&gt; until
&gt; that happens, any time you use 'virsh snapshot-create-as' as part of a
&gt; sequence for performing backups, you ARE modifying the &lt;domain&gt; XML, 
&gt; and
&gt; if you want to revert to the external backup, or if...

Cool. Will it be in 5.4.0 already?

&gt;&gt; 
&gt;&gt; cp ...
&gt;&gt; 
&gt;&gt; virsh blockcommit shinymail vda --active --verbose --pivot
&gt;&gt; &lt;snip&gt;
&gt; 
&gt; ...blockcommit fails for whatever reason to undo the effects of
&gt; 'snapshot-create-as' in creating a temporary overlay, then yes, you do
&gt; have to worry about the temporary overlay being in the way, where 
&gt; you'll
&gt; have to manually edit the &lt;domain&gt; definition to match the actual disk
&gt; layouts you really want.

So you're saying blockcommit fails me somehow? What i'm asking myself 
is, why does
this problem suddenly appear. It worked literally for years this way.

thanks for your answer Eric.

cheers
t.

&gt;&gt; 
&gt;&gt; So after that "dmblklist shinymail" does show the right source file 
&gt;&gt; but
&gt;&gt; after a reboot it tries to use the weekly snapshot
&gt;&gt; again which leads to filesystem errors.
&gt;&gt; 
&gt;&gt; Someone has an idea what could cause such a behaviour?
&gt;&gt; 

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190519133826</emailId><senderName>Avi Cohen</senderName><senderEmail>acohen@ves.io</senderEmail><timestampReceived>2019-05-19 13:38:26-0400</timestampReceived><subject>Re: [libvirt-users] virtio-user intarfece</subject><body>

[Attachment #2 (multipart/alternative)]


Hello all (my prev msg was broken)
i have multiple workload containers connected to my DPDK-app.
I have another special container - which all packets are mirrored to it.
Is it possible for zero-copy reason - that all virtio interfaces shared
memory between my DPDK-app  and workload containers - can be accessed by
this special container ?
it means that for every workload container X this is a shared memory
between the: host , the workload X and the special mirroring container
Thank you
Avi

On Sun, May 19, 2019 at 4:36 PM Avi Cohen &lt;acohen@ves.io&gt; wrote:

&gt; Hello all
&gt; i have multiple workload containers connected to my DPDK-app.
&gt; I have another special container - which all packets are mirrored to it.
&gt; Is it possible for zero-copy reason - that all virtio interfaces shared
&gt; memory between my DPDK-app  and workload containers - can be accessed by
&gt; this special container ?
&gt; it means that for every workload container X this is a shared memory
&gt; between the:
&gt;
&gt;

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;Hello all (my prev msg was broken)&lt;div&gt;i have multiple workload \
containers connected to my DPDK-app.&lt;/div&gt;&lt;div&gt;I have another special container - \
which all packets are mirrored to it.&lt;/div&gt;&lt;div&gt;Is it possible for zero-copy reason - \
that all virtio interfaces shared memory between my DPDK-app   and workload \
containers - can be accessed by this special container ?&lt;/div&gt;&lt;div&gt;it means that for \
every workload container X this is a shared memory between the: host , the workload X \
and the special mirroring container&lt;/div&gt;&lt;div&gt;Thank you&lt;/div&gt;&lt;div&gt;Avi  \
&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;div class="gmail_quote"&gt;&lt;div dir="ltr" class="gmail_attr"&gt;On Sun, \
May 19, 2019 at 4:36 PM Avi Cohen &lt;&lt;a \
href="mailto:acohen@ves.io"&gt;acohen@ves.io&lt;/a&gt;&gt; wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote \
class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid \
rgb(204,204,204);padding-left:1ex"&gt;&lt;div dir="ltr"&gt;Hello all&lt;div&gt;i have multiple \
workload containers connected to my DPDK-app.&lt;/div&gt;&lt;div&gt;I have another special \
container - which all packets are mirrored to it.&lt;/div&gt;&lt;div&gt;Is it possible for \
zero-copy reason - that all virtio interfaces shared memory between my DPDK-app   and \
workload containers - can be accessed by this special container ?&lt;/div&gt;&lt;div&gt;it means \
that for every workload container X this is a shared memory between \
the:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt; &lt;/blockquote&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190520055224</emailId><senderName>Gerd Hoffmann</senderName><senderEmail>gerd@kraxel.org</senderEmail><timestampReceived>2019-05-20 05:52:24-0400</timestampReceived><subject>Re: [libvirt-users] [iGVT-g] GVT-g - suboptimal user experience</subject><body>

  Hi,

&gt; &gt;&gt; =A02. Currently with gvt solution there few mdev devices each with fix=
ed
&gt; &gt;&gt; =A0resolution. User should be able to configure own resolutions for
&gt; &gt;&gt; =A0devices at host without additional manipulations in guest. Ideally,
&gt; &gt;&gt; =A0resolution should be dynamic and change appropriately on resize of
&gt; &gt;&gt; =A0virt-manager window
&gt; &gt;
&gt; &gt; Works. Needs cutting edge software versions though (qemu 4.0 and linux
&gt; &gt; kernel 5.1 on the host).
&gt; =

&gt; Ok, I will test it with later versions someday. However I assume dynamic =
resolution (on window resize) is not supported?

It is dynamic.

cheers,
  Gerd

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190522064126</emailId><senderName>PRIYANKA M A</senderName><senderEmail>priyanka.ma@vvdntech.in</senderEmail><timestampReceived>2019-05-22 06:41:26-0400</timestampReceived><subject>[libvirt-users] VM bootup got failed with systemd/dbus error messages</subject><body>

[Attachment #2 (multipart/alternative)]


We are having one server machine (ubuntu 16.04 OS) with 10 VMs.

When the server is rebooted, some VMs got failed to boot with systemd/dbus
error messages.
Rebooting the affected VMs resolves this issue.

Jan 30 20:40:02 VM systemd[1]: Failed to subscribe to NameOwnerChanged
signal for 'org.freedesktop.DisplayManager': Connection timed out
Jan 30 20:40:02 VM systemd[1]: Failed to subscribe to NameOwnerChanged
signal for 'org.freedesktop.NetworkManager': Connection timed out
Jan 30 20:40:02 VM systemd[1]: Failed to subscribe to NameOwnerChanged
signal for 'org.freedesktop.login1': Connection timed out
Jan 30 20:40:02 VM systemd[1]: Failed to subscribe to NameOwnerChanged
signal for 'org.freedesktop.Accounts': Connection timed out
Jan 30 20:40:02 VM systemd[1]: Failed to subscribe to NameOwnerChanged
signal for 'org.freedesktop.Avahi': Connection timed out
Jan 30 20:40:02 VM systemd[1]: Failed to subscribe to NameOwnerChanged
signal for 'org.freedesktop.ModemManager1': Connection timed out
Jan 30 20:40:02 VM systemd[1]: Failed to subscribe to activation signal:
Connection timed out
Jan 30 20:40:02 VM systemd[1]: Failed to register name: Connection timed out
Jan 30 20:40:02 VM systemd[1]: Failed to set up API bus: Connection timed
out

an 30 20:40:32 VM dbus[1009]: [system] Failed to activate service
'org.freedesktop.systemd1': timed out
Jan 30 20:40:32 VM systemd-logind[998]: Failed to enable subscription:
Failed to activate service 'org.freedesktop.systemd1': timed out
Jan 30 20:40:32 VM systemd-logind[998]: Failed to fully start up daemon:
Connection timed out

Host machine specifications:-
OS        : Ubuntu 16.04
Kernel  : 4.15.0-47-generic
CPUs   : 48 ( 2*12*2)
RAM    : 64G

VM specifications:-
OS        : Ubuntu 16.04
Kernel  : 4.13.16
CPUs   : 8
RAM    : 4G

Attached the full log file.
Kindly help us to resolve this issue with a permanent fix.

*With Best Regards,*

M A PRIYANKA

VVDN Technologies Pvt Ltd

*Cell : * +91 8489574081 | *Skype :* priyankamathavan27

-- 
_Disclaimer:  _ © 2019 VVDN Technologies Pvt. Ltd. This e-mail contains 
PRIVILEGED AND CONFIDENTIAL INFORMATION intended solely for the use of the 
addressee(s). If you are not the intended recipient, please notify the 
sender by e-mail and delete the original message. Further, you are not to 
copy, disclose, or distribute this e-mail or its contents to any other 
person and any such actions are unlawful.__

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;We are having one server machine (ubuntu 16.04 OS) with 10 \
VMs.&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;When the server is rebooted, some VMs got failed to boot with \
systemd/dbus error messages.  &lt;/div&gt;&lt;div&gt;Rebooting the affected VMs resolves this \
issue.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Jan 30 20:40:02 VM systemd[1]: Failed to subscribe to \
NameOwnerChanged signal for 'org.freedesktop.DisplayManager': Connection \
timed out&lt;br&gt;Jan 30 20:40:02 VM systemd[1]: Failed to subscribe to NameOwnerChanged \
signal for 'org.freedesktop.NetworkManager': Connection timed out&lt;br&gt;Jan 30 \
20:40:02 VM systemd[1]: Failed to subscribe to NameOwnerChanged signal for \
'org.freedesktop.login1': Connection timed out&lt;br&gt;Jan 30 20:40:02 VM \
systemd[1]: Failed to subscribe to NameOwnerChanged signal for \
'org.freedesktop.Accounts': Connection timed out&lt;br&gt;Jan 30 20:40:02 VM \
systemd[1]: Failed to subscribe to NameOwnerChanged signal for \
'org.freedesktop.Avahi': Connection timed out&lt;br&gt;Jan 30 20:40:02 VM \
systemd[1]: Failed to subscribe to NameOwnerChanged signal for \
'org.freedesktop.ModemManager1': Connection timed out&lt;br&gt;Jan 30 20:40:02 VM \
systemd[1]: Failed to subscribe to activation signal: Connection timed out&lt;br&gt;Jan 30 \
20:40:02 VM systemd[1]: Failed to register name: Connection timed out&lt;br&gt;Jan 30 \
20:40:02 VM systemd[1]: Failed to set up API bus: Connection timed \
out&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;an 30 20:40:32 VM dbus[1009]: [system] Failed to \
activate service 'org.freedesktop.systemd1': timed out&lt;br&gt;Jan 30 20:40:32 VM \
systemd-logind[998]: Failed to enable subscription: Failed to activate service \
'org.freedesktop.systemd1': timed out&lt;br&gt;Jan 30 20:40:32 VM \
systemd-logind[998]: Failed to fully start up daemon: Connection timed \
out&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Host machine specifications:-&lt;/div&gt;&lt;div&gt;OS           \
: Ubuntu 16.04&lt;/div&gt;&lt;div&gt;Kernel   : 4.15.0-47-generic  &lt;/div&gt;&lt;div&gt;CPUs     : 48 ( \
2*12*2)&lt;/div&gt;&lt;div&gt;RAM      : 64G&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;VM \
specifications:-&lt;/div&gt;&lt;div&gt;&lt;div&gt;OS            : Ubuntu 16.04&lt;/div&gt;&lt;/div&gt;&lt;div&gt;Kernel   \
: 4.13.16&lt;/div&gt;&lt;div&gt;CPUs     : 8&lt;/div&gt;&lt;div&gt;RAM      : \
4G&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Attached the full log file.&lt;br&gt;&lt;/div&gt;&lt;div&gt;Kindly help us \
to resolve this issue with a permanent fix.&lt;/div&gt;&lt;div&gt;&lt;br clear="all"&gt;&lt;div&gt;&lt;div \
dir="ltr" class="gmail_signature" data-smartmail="gmail_signature"&gt;&lt;div dir="ltr"&gt;&lt;p \
style="color:rgb(136,136,136);margin:0in 0in \
0.0001pt;font-size:11pt;font-family:Calibri,sans-serif"&gt;&lt;span \
style="color:rgb(153,153,153)"&gt;&lt;b&gt;With Best Regards,&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;&lt;p \
style="margin:0in 0in 0.0001pt;font-size:11pt;font-family:Calibri,sans-serif"&gt;&lt;font \
color="#999999"&gt;M A PRIYANKA&lt;/font&gt;&lt;/p&gt;&lt;p style="color:rgb(136,136,136);margin:0in \
0in 0.0001pt;font-size:11pt;font-family:Calibri,sans-serif"&gt;&lt;span \
style="color:rgb(153,153,153)"&gt;VVDN Technologies Pvt Ltd&lt;/span&gt;&lt;/p&gt;&lt;p \
style="color:rgb(136,136,136);margin:0in 0in \
0.0001pt;font-size:11pt;font-family:Calibri,sans-serif"&gt;&lt;span \
style="color:rgb(153,153,153)"&gt;&lt;b&gt;Cell :  &lt;/b&gt;&lt;span dir="ltr"&gt;  &lt;span dir="ltr"&gt;+91 \
8489574081&lt;/span&gt;&lt;/span&gt;  |  &lt;b&gt;Skype :&lt;/b&gt;  \
priyankamathavan27&lt;/span&gt;&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;

&lt;br&gt;
&lt;i style="font-family:georgia,serif;font-size:small;background-color:rgb(255,255,255);color:rgb(80,0,80)"&gt;&lt;span&gt;Disclaimer&lt;/span&gt;: \
&lt;/i&gt;&lt;i style="font-family:georgia,serif;background-color:rgb(255,255,255);color:rgb(80,0,80);font-size:12px;text-align:justify"&gt; \
© 2019 VVDN Technologies Pvt. Ltd. This e-mail contains PRIVILEGED AND CONFIDENTIAL \
INFORMATION intended solely for the use of the addressee(s). If you are not the \
intended recipient, please notify the sender by e-mail and delete the original \
message. Further, you are not to copy, disclose, or distribute this e-mail or its \
                contents to any other person and any such actions are unlawful.&lt;/i&gt;
--0000000000006961040589741848--


["systemd_issue_journal.log" (text/x-log)]

-- Logs begin at Wed 2019-01-30 20:38:29 IST, end at Wed 2019-01-30 20:55:40 IST. --
Jan 30 20:38:29 VM systemd-journald[442]: Runtime journal (/run/log/journal/) is \
                7.4M, max 59.5M, 52.1M free.
Jan 30 20:38:29 VM kernel: random: get_random_bytes called from \
                start_kernel+0x42/0x509 with crng_init=0
Jan 30 20:38:29 VM kernel: Linux version 4.13.16 (root@vvdn-HP-Laptop-15-bs1xx) (gcc \
version 5.4.0 20160609 (Ubuntu 5.4.0-6ubuntu1~16.04.10)) #1 SMP Thu Aug 23 12:25:32 \
                IST 2018 (Ubuntu 4.13.0-45.50~16.04.1-generic 4.13.16)
Jan 30 20:38:29 VM kernel: Command line: BOOT_IMAGE=/boot/vmlinuz-4.13.16 \
                root=UUID=3f198ee9-95f7-41fb-a42a-b6c9e258b2ce ro quiet splash \
                vt.handoff=7
Jan 30 20:38:29 VM kernel: KERNEL supported cpus:
Jan 30 20:38:29 VM kernel:   Intel GenuineIntel
Jan 30 20:38:29 VM kernel:   AMD AuthenticAMD
Jan 30 20:38:29 VM kernel:   Centaur CentaurHauls
Jan 30 20:38:29 VM kernel: x86/fpu: Supporting XSAVE feature 0x001: 'x87 floating \
                point registers'
Jan 30 20:38:29 VM kernel: x86/fpu: Supporting XSAVE feature 0x002: 'SSE registers'
Jan 30 20:38:29 VM kernel: x86/fpu: Supporting XSAVE feature 0x004: 'AVX registers'
Jan 30 20:38:29 VM kernel: x86/fpu: xstate_offset[2]:  576, xstate_sizes[2]:  256
Jan 30 20:38:29 VM kernel: x86/fpu: Enabled xstate features 0x7, context size is 832 \
                bytes, using 'standard' format.
Jan 30 20:38:29 VM kernel: e820: BIOS-provided physical RAM map:
Jan 30 20:38:29 VM kernel: BIOS-e820: [mem 0x0000000000000000-0x000000000009fbff] \
                usable
Jan 30 20:38:29 VM kernel: BIOS-e820: [mem 0x000000000009fc00-0x000000000009ffff] \
                reserved
Jan 30 20:38:29 VM kernel: BIOS-e820: [mem 0x00000000000f0000-0x00000000000fffff] \
                reserved
Jan 30 20:38:29 VM kernel: BIOS-e820: [mem 0x0000000000100000-0x00000000bffdefff] \
                usable
Jan 30 20:38:29 VM kernel: BIOS-e820: [mem 0x00000000bffdf000-0x00000000bfffffff] \
                reserved
Jan 30 20:38:29 VM kernel: BIOS-e820: [mem 0x00000000feffc000-0x00000000feffffff] \
                reserved
Jan 30 20:38:29 VM kernel: BIOS-e820: [mem 0x00000000fffc0000-0x00000000ffffffff] \
                reserved
Jan 30 20:38:29 VM kernel: BIOS-e820: [mem 0x0000000100000000-0x00000001bfffffff] \
                usable
Jan 30 20:38:29 VM kernel: NX (Execute Disable) protection: active
Jan 30 20:38:29 VM kernel: random: fast init done
Jan 30 20:38:29 VM kernel: SMBIOS 2.8 present.
Jan 30 20:38:29 VM kernel: DMI: QEMU Standard PC (i440FX + PIIX, 1996), BIOS \
                Ubuntu-1.8.2-1ubuntu1 04/01/2014
Jan 30 20:38:29 VM kernel: Hypervisor detected: KVM
Jan 30 20:38:29 VM kernel: tsc: Fast TSC calibration using PIT
Jan 30 20:38:29 VM kernel: e820: update [mem 0x00000000-0x00000fff] usable ==&gt; \
                reserved
Jan 30 20:38:29 VM kernel: e820: remove [mem 0x000a0000-0x000fffff] usable
Jan 30 20:38:29 VM kernel: e820: last_pfn = 0x1c0000 max_arch_pfn = 0x400000000
Jan 30 20:38:29 VM kernel: MTRR default type: write-back
Jan 30 20:38:29 VM kernel: MTRR fixed ranges enabled:
Jan 30 20:38:29 VM kernel:   00000-9FFFF write-back
Jan 30 20:38:29 VM kernel:   A0000-BFFFF uncachable
Jan 30 20:38:29 VM kernel:   C0000-FFFFF write-protect
Jan 30 20:38:29 VM kernel: MTRR variable ranges enabled:
Jan 30 20:38:29 VM kernel:   0 base 00C0000000 mask FFC0000000 uncachable
Jan 30 20:38:29 VM kernel:   1 disabled
Jan 30 20:38:29 VM kernel:   2 disabled
Jan 30 20:38:29 VM kernel:   3 disabled
Jan 30 20:38:29 VM kernel:   4 disabled
Jan 30 20:38:29 VM kernel:   5 disabled
Jan 30 20:38:29 VM kernel:   6 disabled
Jan 30 20:38:29 VM kernel:   7 disabled
Jan 30 20:38:29 VM kernel: x86/PAT: Configuration [0-7]: WB  WC  UC- UC  WB  WC  UC- \
                WT  
Jan 30 20:38:29 VM kernel: e820: last_pfn = 0xbffdf max_arch_pfn = 0x400000000
Jan 30 20:38:29 VM kernel: found SMP MP-table at [mem 0x000f6410-0x000f641f] mapped \
                at [ffff9960800f6410]
Jan 30 20:38:29 VM kernel: Scanning 1 areas for low memory corruption
Jan 30 20:38:29 VM kernel: Base memory trampoline at [ffff996080099000] 99000 size \
                24576
Jan 30 20:38:29 VM kernel: BRK [0x16772b000, 0x16772bfff] PGTABLE
Jan 30 20:38:29 VM kernel: BRK [0x16772c000, 0x16772cfff] PGTABLE
Jan 30 20:38:29 VM kernel: BRK [0x16772d000, 0x16772dfff] PGTABLE
Jan 30 20:38:29 VM kernel: BRK [0x16772e000, 0x16772efff] PGTABLE
Jan 30 20:38:29 VM kernel: BRK [0x16772f000, 0x16772ffff] PGTABLE
Jan 30 20:38:29 VM kernel: BRK [0x167730000, 0x167730fff] PGTABLE
Jan 30 20:38:29 VM kernel: BRK [0x167731000, 0x167731fff] PGTABLE
Jan 30 20:38:29 VM kernel: BRK [0x167732000, 0x167732fff] PGTABLE
Jan 30 20:38:29 VM kernel: RAMDISK: [mem 0x32106000-0x3507afff]
Jan 30 20:38:29 VM kernel: ACPI: Early table checksum verification disabled
Jan 30 20:38:29 VM kernel: ACPI: RSDP 0x00000000000F63C0 000014 (v00 BOCHS )
Jan 30 20:38:29 VM kernel: ACPI: RSDT 0x00000000BFFE151D 000030 (v01 BOCHS  BXPCRSDT \
                00000001 BXPC 00000001)
Jan 30 20:38:29 VM kernel: ACPI: FACP 0x00000000BFFE03D4 000074 (v01 BOCHS  BXPCFACP \
                00000001 BXPC 00000001)
Jan 30 20:38:29 VM kernel: ACPI: DSDT 0x00000000BFFDF800 000BD4 (v01 BOCHS  BXPCDSDT \
                00000001 BXPC 00000001)
Jan 30 20:38:29 VM kernel: ACPI: FACS 0x00000000BFFDF7C0 000040
Jan 30 20:38:29 VM kernel: ACPI: SSDT 0x00000000BFFE0448 000FA5 (v01 BOCHS  BXPCSSDT \
                00000001 BXPC 00000001)
Jan 30 20:38:29 VM kernel: ACPI: APIC 0x00000000BFFE13ED 000130 (v01 BOCHS  BXPCAPIC \
                00000001 BXPC 00000001)
Jan 30 20:38:29 VM kernel: ACPI: Local APIC address 0xfee00000
Jan 30 20:38:29 VM kernel: No NUMA configuration found
Jan 30 20:38:29 VM kernel: Faking a node at [mem \
                0x0000000000000000-0x00000001bfffffff]
Jan 30 20:38:29 VM kernel: NODE_DATA(0) allocated [mem 0x1bffd3000-0x1bfffdfff]
Jan 30 20:38:29 VM kernel: kvm-clock: Using msrs 4b564d01 and 4b564d00
Jan 30 20:38:29 VM kernel: kvm-clock: cpu 0, msr 1:bff53001, primary cpu clock
Jan 30 20:38:29 VM kernel: kvm-clock: using sched offset of 21496169263 cycles
Jan 30 20:38:29 VM kernel: clocksource: kvm-clock: mask: 0xffffffffffffffff \
                max_cycles: 0x1cd42e4dffb, max_idle_ns: 881590591483 ns
Jan 30 20:38:29 VM kernel: Zone ranges:
Jan 30 20:38:29 VM kernel:   DMA      [mem 0x0000000000001000-0x0000000000ffffff]
Jan 30 20:38:29 VM kernel:   DMA32    [mem 0x0000000001000000-0x00000000ffffffff]
Jan 30 20:38:29 VM kernel:   Normal   [mem 0x0000000100000000-0x00000001bfffffff]
Jan 30 20:38:29 VM kernel:   Device   empty
Jan 30 20:38:29 VM kernel: Movable zone start for each node
Jan 30 20:38:29 VM kernel: Early memory node ranges
Jan 30 20:38:29 VM kernel:   node   0: [mem 0x0000000000001000-0x000000000009efff]
Jan 30 20:38:29 VM kernel:   node   0: [mem 0x0000000000100000-0x00000000bffdefff]
Jan 30 20:38:29 VM kernel:   node   0: [mem 0x0000000100000000-0x00000001bfffffff]
Jan 30 20:38:29 VM kernel: Initmem setup node 0 [mem \
                0x0000000000001000-0x00000001bfffffff]
Jan 30 20:38:29 VM kernel: On node 0 totalpages: 1572733
Jan 30 20:38:29 VM kernel:   DMA zone: 64 pages used for memmap
Jan 30 20:38:29 VM kernel:   DMA zone: 21 pages reserved
Jan 30 20:38:29 VM kernel:   DMA zone: 3998 pages, LIFO batch:0
Jan 30 20:38:29 VM kernel:   DMA32 zone: 12224 pages used for memmap
Jan 30 20:38:29 VM kernel:   DMA32 zone: 782303 pages, LIFO batch:31
Jan 30 20:38:29 VM kernel:   Normal zone: 12288 pages used for memmap
Jan 30 20:38:29 VM kernel:   Normal zone: 786432 pages, LIFO batch:31
Jan 30 20:38:29 VM kernel: ACPI: PM-Timer IO Port: 0x608
Jan 30 20:38:29 VM kernel: ACPI: Local APIC address 0xfee00000
Jan 30 20:38:29 VM kernel: ACPI: LAPIC_NMI (acpi_id[0xff] dfl dfl lint[0x1])
Jan 30 20:38:29 VM kernel: IOAPIC[0]: apic_id 0, version 17, address 0xfec00000, GSI \
                0-23
Jan 30 20:38:29 VM kernel: ACPI: INT_SRC_OVR (bus 0 bus_irq 0 global_irq 2 dfl dfl)
Jan 30 20:38:29 VM kernel: ACPI: INT_SRC_OVR (bus 0 bus_irq 5 global_irq 5 high \
                level)
Jan 30 20:38:29 VM kernel: ACPI: INT_SRC_OVR (bus 0 bus_irq 9 global_irq 9 high \
                level)
Jan 30 20:38:29 VM kernel: ACPI: INT_SRC_OVR (bus 0 bus_irq 10 global_irq 10 high \
                level)
Jan 30 20:38:29 VM kernel: ACPI: INT_SRC_OVR (bus 0 bus_irq 11 global_irq 11 high \
                level)
Jan 30 20:38:29 VM kernel: ACPI: IRQ0 used by override.
Jan 30 20:38:29 VM kernel: ACPI: IRQ5 used by override.
Jan 30 20:38:29 VM kernel: ACPI: IRQ9 used by override.
Jan 30 20:38:29 VM kernel: ACPI: IRQ10 used by override.
Jan 30 20:38:29 VM kernel: ACPI: IRQ11 used by override.
Jan 30 20:38:29 VM kernel: Using ACPI (MADT) for SMP configuration information
Jan 30 20:38:29 VM kernel: smpboot: Allowing 24 CPUs, 0 hotplug CPUs
Jan 30 20:38:29 VM kernel: PM: Registered nosave memory: [mem 0x00000000-0x00000fff]
Jan 30 20:38:29 VM kernel: PM: Registered nosave memory: [mem 0x0009f000-0x0009ffff]
Jan 30 20:38:29 VM kernel: PM: Registered nosave memory: [mem 0x000a0000-0x000effff]
Jan 30 20:38:29 VM kernel: PM: Registered nosave memory: [mem 0x000f0000-0x000fffff]
Jan 30 20:38:29 VM kernel: PM: Registered nosave memory: [mem 0xbffdf000-0xbfffffff]
Jan 30 20:38:29 VM kernel: PM: Registered nosave memory: [mem 0xc0000000-0xfeffbfff]
Jan 30 20:38:29 VM kernel: PM: Registered nosave memory: [mem 0xfeffc000-0xfeffffff]
Jan 30 20:38:29 VM kernel: PM: Registered nosave memory: [mem 0xff000000-0xfffbffff]
Jan 30 20:38:29 VM kernel: PM: Registered nosave memory: [mem 0xfffc0000-0xffffffff]
Jan 30 20:38:29 VM kernel: e820: [mem 0xc0000000-0xfeffbfff] available for PCI \
                devices
Jan 30 20:38:29 VM kernel: Booting paravirtualized kernel on KVM
Jan 30 20:38:29 VM kernel: clocksource: refined-jiffies: mask: 0xffffffff max_cycles: \
                0xffffffff, max_idle_ns: 7645519600211568 ns
Jan 30 20:38:29 VM kernel: setup_percpu: NR_CPUS:8192 nr_cpumask_bits:24 \
                nr_cpu_ids:24 nr_node_ids:1
Jan 30 20:38:29 VM kernel: percpu: Embedded 45 pages/cpu @ffff996239000000 s146584 \
                r8192 d29544 u262144
Jan 30 20:38:29 VM kernel: pcpu-alloc: s146584 r8192 d29544 u262144 alloc=1*2097152
Jan 30 20:38:29 VM kernel: pcpu-alloc: [0] 00 01 02 03 04 05 06 07 [0] 08 09 10 11 12 \
                13 14 15 
Jan 30 20:38:29 VM kernel: pcpu-alloc: [0] 16 17 18 19 20 21 22 23 
Jan 30 20:38:29 VM kernel: KVM setup async PF for cpu 0
Jan 30 20:38:29 VM kernel: kvm-stealtime: cpu 0, msr 1b90161c0
Jan 30 20:38:29 VM kernel: Built 1 zonelists in Node order, mobility grouping on.  \
                Total pages: 1548136
Jan 30 20:38:29 VM kernel: Policy zone: Normal
Jan 30 20:38:29 VM kernel: Kernel command line: BOOT_IMAGE=/boot/vmlinuz-4.13.16 \
                root=UUID=3f198ee9-95f7-41fb-a42a-b6c9e258b2ce ro quiet splash \
                vt.handoff=7
Jan 30 20:38:29 VM kernel: PID hash table entries: 4096 (order: 3, 32768 bytes)
Jan 30 20:38:29 VM kernel: Calgary: detecting Calgary via BIOS EBDA area
Jan 30 20:38:29 VM kernel: Calgary: Unable to locate Rio Grande table in EBDA - \
                bailing!
Jan 30 20:38:29 VM kernel: Memory: 6047052K/6290932K available (12300K kernel code, \
                2480K rwdata, 3952K rodata, 2364K init, 2372K bss, 243880K reserved, \
                0K cma-reserved)
Jan 30 20:38:29 VM kernel: SLUB: HWalign=64, Order=0-3, MinObjects=0, CPUs=24, \
                Nodes=1
Jan 30 20:38:29 VM kernel: Kernel/User page tables isolation: enabled
Jan 30 20:38:29 VM kernel: ftrace: allocating 37708 entries in 148 pages
Jan 30 20:38:29 VM kernel: Hierarchical RCU implementation.
Jan 30 20:38:29 VM kernel:         RCU restricting CPUs from NR_CPUS=8192 to \
                nr_cpu_ids=24.
Jan 30 20:38:29 VM kernel:         Tasks RCU enabled.
Jan 30 20:38:29 VM kernel: RCU: Adjusting geometry for rcu_fanout_leaf=16, \
                nr_cpu_ids=24
Jan 30 20:38:29 VM kernel: NR_IRQS: 524544, nr_irqs: 616, preallocated irqs: 16
Jan 30 20:38:29 VM kernel: vt handoff: transparent VT on vt#7
Jan 30 20:38:29 VM kernel: Console: colour VGA+ 80x25
Jan 30 20:38:29 VM kernel: console [tty0] enabled
Jan 30 20:38:29 VM kernel: tsc: Detected 2095.076 MHz processor
Jan 30 20:38:29 VM kernel: Calibrating delay loop (skipped) preset value.. 4190.15 \
                BogoMIPS (lpj=8380304)
Jan 30 20:38:29 VM kernel: pid_max: default: 32768 minimum: 301
Jan 30 20:38:29 VM kernel: ACPI: Core revision 20170531
Jan 30 20:38:29 VM kernel: ACPI: 2 ACPI AML tables successfully acquired and loaded
Jan 30 20:38:29 VM kernel: Security Framework initialized
Jan 30 20:38:29 VM kernel: Yama: becoming mindful.
Jan 30 20:38:29 VM kernel: AppArmor: AppArmor initialized
Jan 30 20:38:29 VM kernel: Dentry cache hash table entries: 1048576 (order: 11, \
                8388608 bytes)
Jan 30 20:38:29 VM kernel: Inode-cache hash table entries: 524288 (order: 10, 4194304 \
                bytes)
Jan 30 20:38:29 VM kernel: Mount-cache hash table entries: 16384 (order: 5, 131072 \
                bytes)
Jan 30 20:38:29 VM kernel: Mountpoint-cache hash table entries: 16384 (order: 5, \
                131072 bytes)
Jan 30 20:38:29 VM kernel: FEATURE SPEC_CTRL Present
Jan 30 20:38:29 VM kernel: mce: CPU supports 10 MCE banks
Jan 30 20:38:29 VM kernel: Last level iTLB entries: 4KB 0, 2MB 0, 4MB 0
Jan 30 20:38:29 VM kernel: Last level dTLB entries: 4KB 0, 2MB 0, 4MB 0, 1GB 0
Jan 30 20:38:29 VM kernel: Spectre V2 mitigation: Mitigation: Full generic retpoline
Jan 30 20:38:29 VM kernel: Spectre V2 mitigation: Speculation control IBPB supported \
                IBRS supported
Jan 30 20:38:29 VM kernel: Spectre V2 mitigation: Retpoline compiled kernel.  \
                Defaulting IBRS to disabled
Jan 30 20:38:29 VM kernel: Speculative Store Bypass: Vulnerable
Jan 30 20:38:29 VM kernel: Freeing SMP alternatives memory: 36K
Jan 30 20:38:29 VM kernel: smpboot: Max logical packages: 24
Jan 30 20:38:29 VM kernel: x2apic enabled
Jan 30 20:38:29 VM kernel: Switched APIC routing to physical x2apic.
Jan 30 20:38:29 VM kernel: ..TIMER: vector=0x30 apic1=0 pin1=2 apic2=-1 pin2=-1
Jan 30 20:38:29 VM kernel: TSC deadline timer enabled
Jan 30 20:38:29 VM kernel: smpboot: CPU0: Intel Core Processor (Broadwell, IBRS) \
                (family: 0x6, model: 0x3d, stepping: 0x2)
Jan 30 20:38:29 VM kernel: Performance Events: unsupported p6 CPU model 61 no PMU \
                driver, software events only.
Jan 30 20:38:29 VM kernel: Hierarchical SRCU implementation.
Jan 30 20:38:29 VM kernel: smp: Bringing up secondary CPUs ...
Jan 30 20:38:29 VM kernel: x86: Booting SMP configuration:
Jan 30 20:38:29 VM kernel: .... node  #0, CPUs:        #1
Jan 30 20:38:29 VM kernel: kvm-clock: cpu 1, msr 1:bff53041, secondary cpu clock
Jan 30 20:38:29 VM kernel: KVM setup async PF for cpu 1
Jan 30 20:38:29 VM kernel: kvm-stealtime: cpu 1, msr 1b90561c0
Jan 30 20:38:29 VM kernel:   #2
Jan 30 20:38:29 VM kernel: kvm-clock: cpu 2, msr 1:bff53081, secondary cpu clock
Jan 30 20:38:29 VM kernel: KVM setup async PF for cpu 2
Jan 30 20:38:29 VM kernel: kvm-stealtime: cpu 2, msr 1b90961c0
Jan 30 20:38:29 VM kernel:   #3
Jan 30 20:38:29 VM kernel: kvm-clock: cpu 3, msr 1:bff530c1, secondary cpu clock
Jan 30 20:38:29 VM kernel: KVM setup async PF for cpu 3
Jan 30 20:38:29 VM kernel: kvm-stealtime: cpu 3, msr 1b90d61c0
Jan 30 20:38:29 VM kernel:   #4
Jan 30 20:38:29 VM kernel: kvm-clock: cpu 4, msr 1:bff53101, secondary cpu clock
Jan 30 20:38:29 VM kernel: KVM setup async PF for cpu 4
Jan 30 20:38:29 VM kernel: kvm-stealtime: cpu 4, msr 1b91161c0
Jan 30 20:38:29 VM kernel:   #5
Jan 30 20:38:29 VM kernel: kvm-clock: cpu 5, msr 1:bff53141, secondary cpu clock
Jan 30 20:38:29 VM kernel: KVM setup async PF for cpu 5
Jan 30 20:38:29 VM kernel: kvm-stealtime: cpu 5, msr 1b91561c0
Jan 30 20:38:29 VM kernel:   #6
Jan 30 20:38:29 VM kernel: kvm-clock: cpu 6, msr 1:bff53181, secondary cpu clock
Jan 30 20:38:29 VM kernel: KVM setup async PF for cpu 6
Jan 30 20:38:29 VM kernel: kvm-stealtime: cpu 6, msr 1b91961c0
Jan 30 20:38:29 VM kernel:   #7
Jan 30 20:38:29 VM kernel: kvm-clock: cpu 7, msr 1:bff531c1, secondary cpu clock
Jan 30 20:38:29 VM kernel: KVM setup async PF for cpu 7
Jan 30 20:38:29 VM kernel: kvm-stealtime: cpu 7, msr 1b91d61c0
Jan 30 20:38:29 VM kernel:   #8
Jan 30 20:38:29 VM kernel: kvm-clock: cpu 8, msr 1:bff53201, secondary cpu clock
Jan 30 20:38:29 VM kernel: KVM setup async PF for cpu 8
Jan 30 20:38:29 VM kernel: kvm-stealtime: cpu 8, msr 1b92161c0
Jan 30 20:38:29 VM kernel:   #9
Jan 30 20:38:29 VM kernel: kvm-clock: cpu 9, msr 1:bff53241, secondary cpu clock
Jan 30 20:38:29 VM kernel: KVM setup async PF for cpu 9
Jan 30 20:38:29 VM kernel: kvm-stealtime: cpu 9, msr 1b92561c0
Jan 30 20:38:29 VM kernel:  #10
Jan 30 20:38:29 VM kernel: kvm-clock: cpu 10, msr 1:bff53281, secondary cpu clock
Jan 30 20:38:29 VM kernel: KVM setup async PF for cpu 10
Jan 30 20:38:29 VM kernel: kvm-stealtime: cpu 10, msr 1b92961c0
Jan 30 20:38:29 VM kernel:  #11
Jan 30 20:38:29 VM kernel: kvm-clock: cpu 11, msr 1:bff532c1, secondary cpu clock
Jan 30 20:38:29 VM kernel: KVM setup async PF for cpu 11
Jan 30 20:38:29 VM kernel: kvm-stealtime: cpu 11, msr 1b92d61c0
Jan 30 20:38:29 VM kernel:  #12
Jan 30 20:38:29 VM kernel: kvm-clock: cpu 12, msr 1:bff53301, secondary cpu clock
Jan 30 20:38:29 VM kernel: KVM setup async PF for cpu 12
Jan 30 20:38:29 VM kernel: kvm-stealtime: cpu 12, msr 1b93161c0
Jan 30 20:38:29 VM kernel:  #13
Jan 30 20:38:29 VM kernel: kvm-clock: cpu 13, msr 1:bff53341, secondary cpu clock
Jan 30 20:38:29 VM kernel: KVM setup async PF for cpu 13
Jan 30 20:38:29 VM kernel: kvm-stealtime: cpu 13, msr 1b93561c0
Jan 30 20:38:29 VM kernel:  #14
Jan 30 20:38:29 VM kernel: kvm-clock: cpu 14, msr 1:bff53381, secondary cpu clock
Jan 30 20:38:29 VM kernel: KVM setup async PF for cpu 14
Jan 30 20:38:29 VM kernel: kvm-stealtime: cpu 14, msr 1b93961c0
Jan 30 20:38:29 VM kernel:  #15
Jan 30 20:38:29 VM kernel: kvm-clock: cpu 15, msr 1:bff533c1, secondary cpu clock
Jan 30 20:38:29 VM kernel: KVM setup async PF for cpu 15
Jan 30 20:38:29 VM kernel: kvm-stealtime: cpu 15, msr 1b93d61c0
Jan 30 20:38:29 VM kernel:  #16
Jan 30 20:38:29 VM kernel: kvm-clock: cpu 16, msr 1:bff53401, secondary cpu clock
Jan 30 20:38:29 VM kernel: KVM setup async PF for cpu 16
Jan 30 20:38:29 VM kernel: kvm-stealtime: cpu 16, msr 1b94161c0
Jan 30 20:38:29 VM kernel:  #17
Jan 30 20:38:29 VM kernel: kvm-clock: cpu 17, msr 1:bff53441, secondary cpu clock
Jan 30 20:38:29 VM kernel: KVM setup async PF for cpu 17
Jan 30 20:38:29 VM kernel: kvm-stealtime: cpu 17, msr 1b94561c0
Jan 30 20:38:29 VM kernel:  #18
Jan 30 20:38:29 VM kernel: kvm-clock: cpu 18, msr 1:bff53481, secondary cpu clock
Jan 30 20:38:29 VM kernel: KVM setup async PF for cpu 18
Jan 30 20:38:29 VM kernel: kvm-stealtime: cpu 18, msr 1b94961c0
Jan 30 20:38:29 VM kernel:  #19
Jan 30 20:38:29 VM kernel: kvm-clock: cpu 19, msr 1:bff534c1, secondary cpu clock
Jan 30 20:38:29 VM kernel: KVM setup async PF for cpu 19
Jan 30 20:38:29 VM kernel: kvm-stealtime: cpu 19, msr 1b94d61c0
Jan 30 20:38:29 VM kernel:  #20
Jan 30 20:38:29 VM kernel: kvm-clock: cpu 20, msr 1:bff53501, secondary cpu clock
Jan 30 20:38:29 VM kernel: KVM setup async PF for cpu 20
Jan 30 20:38:29 VM kernel: kvm-stealtime: cpu 20, msr 1b95161c0
Jan 30 20:38:29 VM kernel:  #21
Jan 30 20:38:29 VM kernel: kvm-clock: cpu 21, msr 1:bff53541, secondary cpu clock
Jan 30 20:38:29 VM kernel: KVM setup async PF for cpu 21
Jan 30 20:38:29 VM kernel: kvm-stealtime: cpu 21, msr 1b95561c0
Jan 30 20:38:29 VM kernel:  #22
Jan 30 20:38:29 VM kernel: kvm-clock: cpu 22, msr 1:bff53581, secondary cpu clock
Jan 30 20:38:29 VM kernel: KVM setup async PF for cpu 22
Jan 30 20:38:29 VM kernel: kvm-stealtime: cpu 22, msr 1b95961c0
Jan 30 20:38:29 VM kernel:  #23
Jan 30 20:38:29 VM kernel: kvm-clock: cpu 23, msr 1:bff535c1, secondary cpu clock
Jan 30 20:38:29 VM kernel: KVM setup async PF for cpu 23
Jan 30 20:38:29 VM kernel: kvm-stealtime: cpu 23, msr 1b95d61c0
Jan 30 20:38:29 VM kernel: smp: Brought up 1 node, 24 CPUs
Jan 30 20:38:29 VM kernel: smpboot: Total of 24 processors activated (100563.64 \
                BogoMIPS)
Jan 30 20:38:29 VM kernel: devtmpfs: initialized
Jan 30 20:38:29 VM kernel: x86/mm: Memory block size: 128MB
Jan 30 20:38:29 VM kernel: evm: security.selinux
Jan 30 20:38:29 VM kernel: evm: security.SMACK64
Jan 30 20:38:29 VM kernel: evm: security.SMACK64EXEC
Jan 30 20:38:29 VM kernel: evm: security.SMACK64TRANSMUTE
Jan 30 20:38:29 VM kernel: evm: security.SMACK64MMAP
Jan 30 20:38:29 VM kernel: evm: security.ima
Jan 30 20:38:29 VM kernel: evm: security.capability
Jan 30 20:38:29 VM kernel: clocksource: jiffies: mask: 0xffffffff max_cycles: \
                0xffffffff, max_idle_ns: 7645041785100000 ns
Jan 30 20:38:29 VM kernel: futex hash table entries: 8192 (order: 7, 524288 bytes)
Jan 30 20:38:29 VM kernel: pinctrl core: initialized pinctrl subsystem
Jan 30 20:38:29 VM kernel: RTC time: 15:07:53, date: 01/30/19
Jan 30 20:38:29 VM kernel: NET: Registered protocol family 16
Jan 30 20:38:29 VM kernel: cpuidle: using governor ladder
Jan 30 20:38:29 VM kernel: cpuidle: using governor menu
Jan 30 20:38:29 VM kernel: PCCT header not found.
Jan 30 20:38:29 VM kernel: ACPI: bus type PCI registered
Jan 30 20:38:29 VM kernel: acpiphp: ACPI Hot Plug PCI Controller Driver version: 0.5
Jan 30 20:38:29 VM kernel: PCI: Using configuration type 1 for base access
Jan 30 20:38:29 VM kernel: HugeTLB registered 2.00 MiB page size, pre-allocated 0 \
                pages
Jan 30 20:38:29 VM kernel: ACPI: Added _OSI(Module Device)
Jan 30 20:38:29 VM kernel: ACPI: Added _OSI(Processor Device)
Jan 30 20:38:29 VM kernel: ACPI: Added _OSI(3.0 _SCP Extensions)
Jan 30 20:38:29 VM kernel: ACPI: Added _OSI(Processor Aggregator Device)
Jan 30 20:38:29 VM kernel: ACPI: Interpreter enabled
Jan 30 20:38:29 VM kernel: ACPI: (supports S0 S5)
Jan 30 20:38:29 VM kernel: ACPI: Using IOAPIC for interrupt routing
Jan 30 20:38:29 VM kernel: PCI: Using host bridge windows from ACPI; if necessary, \
                use "pci=nocrs" and report a bug
Jan 30 20:38:29 VM kernel: ACPI: Enabled 16 GPEs in block 00 to 0F
Jan 30 20:38:29 VM kernel: ACPI: PCI Root Bridge [PCI0] (domain 0000 [bus 00-ff])
Jan 30 20:38:29 VM kernel: acpi PNP0A03:00: _OSC: OS supports [ASPM ClockPM Segments \
                MSI]
Jan 30 20:38:29 VM kernel: acpi PNP0A03:00: _OSC failed (AE_NOT_FOUND); disabling \
                ASPM
Jan 30 20:38:29 VM kernel: acpi PNP0A03:00: fail to add MMCONFIG information, can't \
                access extended PCI configuration space under this bridge.
Jan 30 20:38:29 VM kernel: acpiphp: Slot [3] registered
Jan 30 20:38:29 VM kernel: acpiphp: Slot [4] registered
Jan 30 20:38:29 VM kernel: acpiphp: Slot [5] registered
Jan 30 20:38:29 VM kernel: acpiphp: Slot [6] registered
Jan 30 20:38:29 VM kernel: acpiphp: Slot [7] registered
Jan 30 20:38:29 VM kernel: acpiphp: Slot [8] registered
Jan 30 20:38:29 VM kernel: acpiphp: Slot [10] registered
Jan 30 20:38:29 VM kernel: acpiphp: Slot [11] registered
Jan 30 20:38:29 VM kernel: acpiphp: Slot [12] registered
Jan 30 20:38:29 VM kernel: acpiphp: Slot [13] registered
Jan 30 20:38:29 VM kernel: acpiphp: Slot [14] registered
Jan 30 20:38:29 VM kernel: acpiphp: Slot [15] registered
Jan 30 20:38:29 VM kernel: acpiphp: Slot [16] registered
Jan 30 20:38:29 VM kernel: acpiphp: Slot [17] registered
Jan 30 20:38:29 VM kernel: acpiphp: Slot [18] registered
Jan 30 20:38:29 VM kernel: acpiphp: Slot [19] registered
Jan 30 20:38:29 VM kernel: acpiphp: Slot [20] registered
Jan 30 20:38:29 VM kernel: acpiphp: Slot [21] registered
Jan 30 20:38:29 VM kernel: acpiphp: Slot [22] registered
Jan 30 20:38:29 VM kernel: acpiphp: Slot [23] registered
Jan 30 20:38:29 VM kernel: acpiphp: Slot [24] registered
Jan 30 20:38:29 VM kernel: acpiphp: Slot [25] registered
Jan 30 20:38:29 VM kernel: acpiphp: Slot [26] registered
Jan 30 20:38:29 VM kernel: acpiphp: Slot [27] registered
Jan 30 20:38:29 VM kernel: acpiphp: Slot [28] registered
Jan 30 20:38:29 VM kernel: acpiphp: Slot [29] registered
Jan 30 20:38:29 VM kernel: acpiphp: Slot [30] registered
Jan 30 20:38:29 VM kernel: acpiphp: Slot [31] registered
Jan 30 20:38:29 VM kernel: PCI host bridge to bus 0000:00
Jan 30 20:38:29 VM kernel: pci_bus 0000:00: root bus resource [io  0x0000-0x0cf7 \
                window]
Jan 30 20:38:29 VM kernel: pci_bus 0000:00: root bus resource [io  0x0d00-0xffff \
                window]
Jan 30 20:38:29 VM kernel: pci_bus 0000:00: root bus resource [mem \
                0x000a0000-0x000bffff window]
Jan 30 20:38:29 VM kernel: pci_bus 0000:00: root bus resource [mem \
                0xc0000000-0xfebfffff window]
Jan 30 20:38:29 VM kernel: pci_bus 0000:00: root bus resource [bus 00-ff]
Jan 30 20:38:29 VM kernel: pci 0000:00:00.0: [8086:1237] type 00 class 0x060000
Jan 30 20:38:29 VM kernel: pci 0000:00:01.0: [8086:7000] type 00 class 0x060100
Jan 30 20:38:29 VM kernel: pci 0000:00:01.1: [8086:7010] type 00 class 0x010180
Jan 30 20:38:29 VM kernel: pci 0000:00:01.1: reg 0x20: [io  0xc180-0xc18f]
Jan 30 20:38:29 VM kernel: pci 0000:00:01.1: legacy IDE quirk: reg 0x10: [io  \
                0x01f0-0x01f7]
Jan 30 20:38:29 VM kernel: pci 0000:00:01.1: legacy IDE quirk: reg 0x14: [io  0x03f6]
Jan 30 20:38:29 VM kernel: pci 0000:00:01.1: legacy IDE quirk: reg 0x18: [io  \
                0x0170-0x0177]
Jan 30 20:38:29 VM kernel: pci 0000:00:01.1: legacy IDE quirk: reg 0x1c: [io  0x0376]
Jan 30 20:38:29 VM kernel: pci 0000:00:01.3: [8086:7113] type 00 class 0x068000
Jan 30 20:38:29 VM kernel: pci 0000:00:01.3: quirk: [io  0x0600-0x063f] claimed by \
                PIIX4 ACPI
Jan 30 20:38:29 VM kernel: pci 0000:00:01.3: quirk: [io  0x0700-0x070f] claimed by \
                PIIX4 SMB
Jan 30 20:38:29 VM kernel: pci 0000:00:02.0: [1b36:0100] type 00 class 0x030000
Jan 30 20:38:29 VM kernel: pci 0000:00:02.0: reg 0x10: [mem 0xf4000000-0xf7ffffff]
Jan 30 20:38:29 VM kernel: pci 0000:00:02.0: reg 0x14: [mem 0xf8000000-0xfbffffff]
Jan 30 20:38:29 VM kernel: pci 0000:00:02.0: reg 0x18: [mem 0xfc094000-0xfc095fff]
Jan 30 20:38:29 VM kernel: pci 0000:00:02.0: reg 0x1c: [io  0xc080-0xc09f]
Jan 30 20:38:29 VM kernel: pci 0000:00:02.0: reg 0x30: [mem 0xfc080000-0xfc08ffff \
                pref]
Jan 30 20:38:29 VM kernel: pci 0000:00:03.0: [1af4:1009] type 00 class 0x000200
Jan 30 20:38:29 VM kernel: pci 0000:00:03.0: reg 0x10: [io  0xc000-0xc03f]
Jan 30 20:38:29 VM kernel: pci 0000:00:03.0: reg 0x14: [mem 0xfc096000-0xfc096fff]
Jan 30 20:38:29 VM kernel: pci 0000:00:04.0: [1af4:1009] type 00 class 0x000200
Jan 30 20:38:29 VM kernel: pci 0000:00:04.0: reg 0x10: [io  0xc040-0xc07f]
Jan 30 20:38:29 VM kernel: pci 0000:00:04.0: reg 0x14: [mem 0xfc097000-0xfc097fff]
Jan 30 20:38:29 VM kernel: pci 0000:00:05.0: [1af4:1000] type 00 class 0x020000
Jan 30 20:38:29 VM kernel: pci 0000:00:05.0: reg 0x10: [io  0xc0a0-0xc0bf]
Jan 30 20:38:29 VM kernel: pci 0000:00:05.0: reg 0x14: [mem 0xfc098000-0xfc098fff]
Jan 30 20:38:29 VM kernel: pci 0000:00:05.0: reg 0x30: [mem 0xfc000000-0xfc03ffff \
                pref]
Jan 30 20:38:29 VM kernel: pci 0000:00:06.0: [1af4:1000] type 00 class 0x020000
Jan 30 20:38:29 VM kernel: pci 0000:00:06.0: reg 0x10: [io  0xc0c0-0xc0df]
Jan 30 20:38:29 VM kernel: pci 0000:00:06.0: reg 0x14: [mem 0xfc099000-0xfc099fff]
Jan 30 20:38:29 VM kernel: pci 0000:00:06.0: reg 0x30: [mem 0xfc040000-0xfc07ffff \
                pref]
Jan 30 20:38:29 VM kernel: pci 0000:00:07.0: [8086:2668] type 00 class 0x040300
Jan 30 20:38:29 VM kernel: pci 0000:00:07.0: reg 0x10: [mem 0xfc090000-0xfc093fff]
Jan 30 20:38:29 VM kernel: pci 0000:00:08.0: [1af4:1003] type 00 class 0x078000
Jan 30 20:38:29 VM kernel: pci 0000:00:08.0: reg 0x10: [io  0xc0e0-0xc0ff]
Jan 30 20:38:29 VM kernel: pci 0000:00:08.0: reg 0x14: [mem 0xfc09a000-0xfc09afff]
Jan 30 20:38:29 VM kernel: pci 0000:00:09.0: [8086:2934] type 00 class 0x0c0300
Jan 30 20:38:29 VM kernel: pci 0000:00:09.0: reg 0x20: [io  0xc100-0xc11f]
Jan 30 20:38:29 VM kernel: pci 0000:00:09.1: [8086:2935] type 00 class 0x0c0300
Jan 30 20:38:29 VM kernel: pci 0000:00:09.1: reg 0x20: [io  0xc120-0xc13f]
Jan 30 20:38:29 VM kernel: pci 0000:00:09.2: [8086:2936] type 00 class 0x0c0300
Jan 30 20:38:29 VM kernel: pci 0000:00:09.2: reg 0x20: [io  0xc140-0xc15f]
Jan 30 20:38:29 VM kernel: pci 0000:00:09.7: [8086:293a] type 00 class 0x0c0320
Jan 30 20:38:29 VM kernel: pci 0000:00:09.7: reg 0x10: [mem 0xfc09b000-0xfc09bfff]
Jan 30 20:38:29 VM kernel: pci 0000:00:0a.0: [1af4:1002] type 00 class 0x00ff00
Jan 30 20:38:29 VM kernel: pci 0000:00:0a.0: reg 0x10: [io  0xc160-0xc17f]
Jan 30 20:38:29 VM kernel: pci 0000:00:0b.0: [1af4:1001] type 00 class 0x010000
Jan 30 20:38:29 VM kernel: pci 0000:00:0b.0: reg 0x10: [io  0x0000-0x003f]
Jan 30 20:38:29 VM kernel: pci 0000:00:0b.0: reg 0x14: [mem 0x00000000-0x00000fff]
Jan 30 20:38:29 VM kernel: ACPI: PCI Interrupt Link [LNKA] (IRQs 5 *10 11)
Jan 30 20:38:29 VM kernel: ACPI: PCI Interrupt Link [LNKB] (IRQs 5 *10 11)
Jan 30 20:38:29 VM kernel: ACPI: PCI Interrupt Link [LNKC] (IRQs 5 10 *11)
Jan 30 20:38:29 VM kernel: ACPI: PCI Interrupt Link [LNKD] (IRQs 5 10 *11)
Jan 30 20:38:29 VM kernel: ACPI: PCI Interrupt Link [LNKS] (IRQs *9)
Jan 30 20:38:29 VM kernel: SCSI subsystem initialized
Jan 30 20:38:29 VM kernel: libata version 3.00 loaded.
Jan 30 20:38:29 VM kernel: pci 0000:00:02.0: vgaarb: setting as boot VGA device
Jan 30 20:38:29 VM kernel: pci 0000:00:02.0: vgaarb: VGA device added: \
                decodes=io+mem,owns=io+mem,locks=none
Jan 30 20:38:29 VM kernel: pci 0000:00:02.0: vgaarb: bridge control possible
Jan 30 20:38:29 VM kernel: vgaarb: loaded
Jan 30 20:38:29 VM kernel: ACPI: bus type USB registered
Jan 30 20:38:29 VM kernel: usbcore: registered new interface driver usbfs
Jan 30 20:38:29 VM kernel: usbcore: registered new interface driver hub
Jan 30 20:38:29 VM kernel: usbcore: registered new device driver usb
Jan 30 20:38:29 VM kernel: EDAC MC: Ver: 3.0.0
Jan 30 20:38:29 VM kernel: PCI: Using ACPI for IRQ routing
Jan 30 20:38:29 VM kernel: PCI: pci_cache_line_size set to 64 bytes
Jan 30 20:38:29 VM kernel: e820: reserve RAM buffer [mem 0x0009fc00-0x0009ffff]
Jan 30 20:38:29 VM kernel: e820: reserve RAM buffer [mem 0xbffdf000-0xbfffffff]
Jan 30 20:38:29 VM kernel: NetLabel: Initializing
Jan 30 20:38:29 VM kernel: NetLabel:  domain hash size = 128
Jan 30 20:38:29 VM kernel: NetLabel:  protocols = UNLABELED CIPSOv4 CALIPSO
Jan 30 20:38:29 VM kernel: NetLabel:  unlabeled traffic allowed by default
Jan 30 20:38:29 VM kernel: clocksource: Switched to clocksource kvm-clock
Jan 30 20:38:29 VM kernel: VFS: Disk quotas dquot_6.6.0
Jan 30 20:38:29 VM kernel: VFS: Dquot-cache hash table entries: 512 (order 0, 4096 \
                bytes)
Jan 30 20:38:29 VM kernel: AppArmor: AppArmor Filesystem Enabled
Jan 30 20:38:29 VM kernel: pnp: PnP ACPI init
Jan 30 20:38:29 VM kernel: pnp 00:00: Plug and Play ACPI device, IDs PNP0b00 (active)
Jan 30 20:38:29 VM kernel: pnp 00:01: Plug and Play ACPI device, IDs PNP0303 (active)
Jan 30 20:38:29 VM kernel: pnp 00:02: Plug and Play ACPI device, IDs PNP0f13 (active)
Jan 30 20:38:29 VM kernel: pnp 00:03: [dma 2]
Jan 30 20:38:29 VM kernel: pnp 00:03: Plug and Play ACPI device, IDs PNP0700 (active)
Jan 30 20:38:29 VM kernel: pnp 00:04: Plug and Play ACPI device, IDs PNP0501 (active)
Jan 30 20:38:29 VM kernel: pnp: PnP ACPI: found 5 devices
Jan 30 20:38:29 VM kernel: clocksource: acpi_pm: mask: 0xffffff max_cycles: 0xffffff, \
                max_idle_ns: 2085701024 ns
Jan 30 20:38:29 VM kernel: pci 0000:00:0b.0: BAR 1: assigned [mem \
                0xc0000000-0xc0000fff]
Jan 30 20:38:29 VM kernel: pci 0000:00:0b.0: BAR 0: assigned [io  0x1000-0x103f]
Jan 30 20:38:29 VM kernel: pci_bus 0000:00: resource 4 [io  0x0000-0x0cf7 window]
Jan 30 20:38:29 VM kernel: pci_bus 0000:00: resource 5 [io  0x0d00-0xffff window]
Jan 30 20:38:29 VM kernel: pci_bus 0000:00: resource 6 [mem 0x000a0000-0x000bffff \
                window]
Jan 30 20:38:29 VM kernel: pci_bus 0000:00: resource 7 [mem 0xc0000000-0xfebfffff \
                window]
Jan 30 20:38:29 VM kernel: NET: Registered protocol family 2
Jan 30 20:38:29 VM kernel: TCP established hash table entries: 65536 (order: 7, \
                524288 bytes)
Jan 30 20:38:29 VM kernel: TCP bind hash table entries: 65536 (order: 8, 1048576 \
                bytes)
Jan 30 20:38:29 VM kernel: TCP: Hash tables configured (established 65536 bind 65536)
Jan 30 20:38:29 VM kernel: UDP hash table entries: 4096 (order: 5, 131072 bytes)
Jan 30 20:38:29 VM kernel: UDP-Lite hash table entries: 4096 (order: 5, 131072 bytes)
Jan 30 20:38:29 VM kernel: NET: Registered protocol family 1
Jan 30 20:38:29 VM kernel: pci 0000:00:00.0: Limiting direct PCI/PCI transfers
Jan 30 20:38:29 VM kernel: pci 0000:00:01.0: PIIX3: Enabling Passive Release
Jan 30 20:38:29 VM kernel: pci 0000:00:01.0: Activating ISA DMA hang workarounds
Jan 30 20:38:29 VM kernel: pci 0000:00:02.0: Video device with shadowed ROM at [mem \
                0x000c0000-0x000dffff]
Jan 30 20:38:29 VM kernel: ACPI: PCI Interrupt Link [LNKA] enabled at IRQ 10
Jan 30 20:38:29 VM kernel: ACPI: PCI Interrupt Link [LNKB] enabled at IRQ 11
Jan 30 20:38:29 VM kernel: ACPI: PCI Interrupt Link [LNKC] enabled at IRQ 11
Jan 30 20:38:29 VM kernel: ACPI: PCI Interrupt Link [LNKD] enabled at IRQ 10
Jan 30 20:38:29 VM kernel: PCI: CLS 0 bytes, default 64
Jan 30 20:38:29 VM kernel: Unpacking initramfs...
Jan 30 20:38:29 VM kernel: Freeing initrd memory: 48596K
Jan 30 20:38:29 VM kernel: PCI-DMA: Using software bounce buffering for IO (SWIOTLB)
Jan 30 20:38:29 VM kernel: software IO TLB [mem 0xbbfdf000-0xbffdf000] (64MB) mapped \
                at [ffff99613bfdf000-ffff99613ffdefff]
Jan 30 20:38:29 VM kernel: Scanning for low memory corruption every 60 seconds
Jan 30 20:38:29 VM kernel: audit: initializing netlink subsys (disabled)
Jan 30 20:38:29 VM kernel: audit: type=2000 audit(1548860874.518:1): \
                state=initialized audit_enabled=0 res=1
Jan 30 20:38:29 VM kernel: Initialise system trusted keyrings
Jan 30 20:38:29 VM kernel: Key type blacklist registered
Jan 30 20:38:29 VM kernel: workingset: timestamp_bits=36 max_order=21 bucket_order=0
Jan 30 20:38:29 VM kernel: zbud: loaded
Jan 30 20:38:29 VM kernel: squashfs: version 4.0 (2009/01/31) Phillip Lougher
Jan 30 20:38:29 VM kernel: fuse init (API version 7.26)
Jan 30 20:38:29 VM kernel: Key type asymmetric registered
Jan 30 20:38:29 VM kernel: Asymmetric key parser 'x509' registered
Jan 30 20:38:29 VM kernel: Block layer SCSI generic (bsg) driver version 0.4 loaded \
                (major 247)
Jan 30 20:38:29 VM kernel: io scheduler noop registered
Jan 30 20:38:29 VM kernel: io scheduler deadline registered
Jan 30 20:38:29 VM kernel: io scheduler cfq registered (default)
Jan 30 20:38:29 VM kernel: intel_idle: does not run on family 6 model 61
Jan 30 20:38:29 VM kernel: input: Power Button as \
                /devices/LNXSYSTM:00/LNXPWRBN:00/input/input0
Jan 30 20:38:29 VM kernel: ACPI: Power Button [PWRF]
Jan 30 20:38:29 VM kernel: GHES: HEST is not enabled!
Jan 30 20:38:29 VM kernel: virtio-pci 0000:00:03.0: virtio_pci: leaving for legacy \
                driver
Jan 30 20:38:29 VM kernel: virtio-pci 0000:00:04.0: virtio_pci: leaving for legacy \
                driver
Jan 30 20:38:29 VM kernel: virtio-pci 0000:00:05.0: virtio_pci: leaving for legacy \
                driver
Jan 30 20:38:29 VM kernel: virtio-pci 0000:00:06.0: virtio_pci: leaving for legacy \
                driver
Jan 30 20:38:29 VM kernel: virtio-pci 0000:00:08.0: virtio_pci: leaving for legacy \
                driver
Jan 30 20:38:29 VM kernel: virtio-pci 0000:00:0a.0: virtio_pci: leaving for legacy \
                driver
Jan 30 20:38:29 VM kernel: virtio-pci 0000:00:0b.0: enabling device (0000 -&gt; 0003)
Jan 30 20:38:29 VM kernel: virtio-pci 0000:00:0b.0: virtio_pci: leaving for legacy \
                driver
Jan 30 20:38:29 VM kernel: Serial: 8250/16550 driver, 32 ports, IRQ sharing enabled
Jan 30 20:38:29 VM kernel: 00:04: ttyS0 at I/O 0x3f8 (irq = 4, base_baud = 115200) is \
                a 16550A
Jan 30 20:38:29 VM kernel: Linux agpgart interface v0.103
Jan 30 20:38:29 VM kernel: loop: module loaded
Jan 30 20:38:29 VM kernel: ata_piix 0000:00:01.1: version 2.13
Jan 30 20:38:29 VM kernel: scsi host0: ata_piix
Jan 30 20:38:29 VM kernel: scsi host1: ata_piix
Jan 30 20:38:29 VM kernel: ata1: PATA max MWDMA2 cmd 0x1f0 ctl 0x3f6 bmdma 0xc180 irq \
                14
Jan 30 20:38:29 VM kernel: ata2: PATA max MWDMA2 cmd 0x170 ctl 0x376 bmdma 0xc188 irq \
                15
Jan 30 20:38:29 VM kernel: libphy: Fixed MDIO Bus: probed
Jan 30 20:38:29 VM kernel: PPP generic driver version 2.4.2
Jan 30 20:38:29 VM kernel: ehci_hcd: USB 2.0 'Enhanced' Host Controller (EHCI) Driver
Jan 30 20:38:29 VM kernel: ehci-pci: EHCI PCI platform driver
Jan 30 20:38:29 VM kernel: ehci-pci 0000:00:09.7: EHCI Host Controller
Jan 30 20:38:29 VM kernel: ehci-pci 0000:00:09.7: new USB bus registered, assigned \
                bus number 1
Jan 30 20:38:29 VM kernel: ehci-pci 0000:00:09.7: irq 10, io mem 0xfc09b000
Jan 30 20:38:29 VM kernel: ehci-pci 0000:00:09.7: USB 2.0 started, EHCI 1.00
Jan 30 20:38:29 VM kernel: usb usb1: New USB device found, idVendor=1d6b, \
                idProduct=0002
Jan 30 20:38:29 VM kernel: usb usb1: New USB device strings: Mfr=3, Product=2, \
                SerialNumber=1
Jan 30 20:38:29 VM kernel: usb usb1: Product: EHCI Host Controller
Jan 30 20:38:29 VM kernel: usb usb1: Manufacturer: Linux 4.13.16 ehci_hcd
Jan 30 20:38:29 VM kernel: usb usb1: SerialNumber: 0000:00:09.7
Jan 30 20:38:29 VM kernel: hub 1-0:1.0: USB hub found
Jan 30 20:38:29 VM kernel: hub 1-0:1.0: 6 ports detected
Jan 30 20:38:29 VM kernel: ehci-platform: EHCI generic platform driver
Jan 30 20:38:29 VM kernel: ohci_hcd: USB 1.1 'Open' Host Controller (OHCI) Driver
Jan 30 20:38:29 VM kernel: ohci-pci: OHCI PCI platform driver
Jan 30 20:38:29 VM kernel: ohci-platform: OHCI generic platform driver
Jan 30 20:38:29 VM kernel: uhci_hcd: USB Universal Host Controller Interface driver
Jan 30 20:38:29 VM kernel: uhci_hcd 0000:00:09.0: UHCI Host Controller
Jan 30 20:38:29 VM kernel: uhci_hcd 0000:00:09.0: new USB bus registered, assigned \
                bus number 2
Jan 30 20:38:29 VM kernel: uhci_hcd 0000:00:09.0: detected 2 ports
Jan 30 20:38:29 VM kernel: uhci_hcd 0000:00:09.0: irq 10, io base 0x0000c100
Jan 30 20:38:29 VM kernel: usb usb2: New USB device found, idVendor=1d6b, \
                idProduct=0001
Jan 30 20:38:29 VM kernel: usb usb2: New USB device strings: Mfr=3, Product=2, \
                SerialNumber=1
Jan 30 20:38:29 VM kernel: usb usb2: Product: UHCI Host Controller
Jan 30 20:38:29 VM kernel: usb usb2: Manufacturer: Linux 4.13.16 uhci_hcd
Jan 30 20:38:29 VM kernel: usb usb2: SerialNumber: 0000:00:09.0
Jan 30 20:38:29 VM kernel: hub 2-0:1.0: USB hub found
Jan 30 20:38:29 VM kernel: hub 2-0:1.0: 2 ports detected
Jan 30 20:38:29 VM kernel: uhci_hcd 0000:00:09.1: UHCI Host Controller
Jan 30 20:38:29 VM kernel: uhci_hcd 0000:00:09.1: new USB bus registered, assigned \
                bus number 3
Jan 30 20:38:29 VM kernel: uhci_hcd 0000:00:09.1: detected 2 ports
Jan 30 20:38:29 VM kernel: uhci_hcd 0000:00:09.1: irq 11, io base 0x0000c120
Jan 30 20:38:29 VM kernel: usb usb3: New USB device found, idVendor=1d6b, \
                idProduct=0001
Jan 30 20:38:29 VM kernel: usb usb3: New USB device strings: Mfr=3, Product=2, \
                SerialNumber=1
Jan 30 20:38:29 VM kernel: usb usb3: Product: UHCI Host Controller
Jan 30 20:38:29 VM kernel: usb usb3: Manufacturer: Linux 4.13.16 uhci_hcd
Jan 30 20:38:29 VM kernel: usb usb3: SerialNumber: 0000:00:09.1
Jan 30 20:38:29 VM kernel: hub 3-0:1.0: USB hub found
Jan 30 20:38:29 VM kernel: hub 3-0:1.0: 2 ports detected
Jan 30 20:38:29 VM kernel: uhci_hcd 0000:00:09.2: UHCI Host Controller
Jan 30 20:38:29 VM kernel: uhci_hcd 0000:00:09.2: new USB bus registered, assigned \
                bus number 4
Jan 30 20:38:29 VM kernel: uhci_hcd 0000:00:09.2: detected 2 ports
Jan 30 20:38:29 VM kernel: uhci_hcd 0000:00:09.2: irq 11, io base 0x0000c140
Jan 30 20:38:29 VM kernel: usb usb4: New USB device found, idVendor=1d6b, \
                idProduct=0001
Jan 30 20:38:29 VM kernel: usb usb4: New USB device strings: Mfr=3, Product=2, \
                SerialNumber=1
Jan 30 20:38:29 VM kernel: usb usb4: Product: UHCI Host Controller
Jan 30 20:38:29 VM kernel: usb usb4: Manufacturer: Linux 4.13.16 uhci_hcd
Jan 30 20:38:29 VM kernel: usb usb4: SerialNumber: 0000:00:09.2
Jan 30 20:38:29 VM kernel: hub 4-0:1.0: USB hub found
Jan 30 20:38:29 VM kernel: hub 4-0:1.0: 2 ports detected
Jan 30 20:38:29 VM kernel: i8042: PNP: PS/2 Controller [PNP0303:KBD,PNP0f13:MOU] at \
                0x60,0x64 irq 1,12
Jan 30 20:38:29 VM kernel: serio: i8042 KBD port at 0x60,0x64 irq 1
Jan 30 20:38:29 VM kernel: serio: i8042 AUX port at 0x60,0x64 irq 12
Jan 30 20:38:29 VM kernel: mousedev: PS/2 mouse device common for all mice
Jan 30 20:38:29 VM kernel: rtc_cmos 00:00: RTC can wake from S4
Jan 30 20:38:29 VM kernel: rtc_cmos 00:00: rtc core: registered rtc_cmos as rtc0
Jan 30 20:38:29 VM kernel: rtc_cmos 00:00: alarms up to one day, 114 bytes nvram
Jan 30 20:38:29 VM kernel: input: AT Translated Set 2 keyboard as \
                /devices/platform/i8042/serio0/input/input1
Jan 30 20:38:29 VM kernel: i2c /dev entries driver
Jan 30 20:38:29 VM kernel: device-mapper: uevent: version 1.0.3
Jan 30 20:38:29 VM kernel: device-mapper: ioctl: 4.37.0-ioctl (2017-09-20) \
                initialised: dm-devel@redhat.com
Jan 30 20:38:29 VM kernel: ledtrig-cpu: registered to indicate activity on CPUs
Jan 30 20:38:29 VM kernel: NET: Registered protocol family 10
Jan 30 20:38:29 VM kernel: ata1.01: NODEV after polling detection
Jan 30 20:38:29 VM kernel: ata1.00: ATA-7: QEMU HARDDISK, 2.5+, max UDMA/100
Jan 30 20:38:29 VM kernel: ata1.00: 41943040 sectors, multi 16: LBA48 
Jan 30 20:38:29 VM kernel: ata1.00: configured for MWDMA2
Jan 30 20:38:29 VM kernel: scsi 0:0:0:0: Direct-Access     ATA      QEMU HARDDISK    \
                2.5+ PQ: 0 ANSI: 5
Jan 30 20:38:29 VM kernel: sd 0:0:0:0: [sda] 41943040 512-byte logical blocks: (21.5 \
                GB/20.0 GiB)
Jan 30 20:38:29 VM kernel: sd 0:0:0:0: Attached scsi generic sg0 type 0
Jan 30 20:38:29 VM kernel: sd 0:0:0:0: [sda] Write Protect is off
Jan 30 20:38:29 VM kernel: sd 0:0:0:0: [sda] Mode Sense: 00 3a 00 00
Jan 30 20:38:29 VM kernel: sd 0:0:0:0: [sda] Write cache: enabled, read cache: \
                enabled, doesn't support DPO or FUA
Jan 30 20:38:29 VM kernel: Segment Routing with IPv6
Jan 30 20:38:29 VM kernel: NET: Registered protocol family 17
Jan 30 20:38:29 VM kernel: Key type dns_resolver registered
Jan 30 20:38:29 VM kernel:  sda: sda1 sda2 &lt; sda5 sda6 &gt;
Jan 30 20:38:29 VM kernel: sd 0:0:0:0: [sda] Attached SCSI disk
Jan 30 20:38:29 VM kernel: RAS: Correctable Errors collector initialized.
Jan 30 20:38:29 VM kernel: sched_clock: Marking stable (2305343433, 0)-&gt;(3132052187, \
                -826708754)
Jan 30 20:38:29 VM kernel: registered taskstats version 1
Jan 30 20:38:29 VM kernel: Loading compiled-in X.509 certificates
Jan 30 20:38:29 VM kernel: Loaded X.509 cert 'Build time autogenerated kernel key: \
                4727b567f18436aaabb1bdc7ca170a2c416c4d67'
Jan 30 20:38:29 VM kernel: zswap: loaded using pool lzo/zbud
Jan 30 20:38:29 VM kernel: Key type big_key registered
Jan 30 20:38:29 VM kernel: Key type trusted registered
Jan 30 20:38:29 VM kernel: Key type encrypted registered
Jan 30 20:38:29 VM kernel: AppArmor: AppArmor sha1 policy hashing enabled
Jan 30 20:38:29 VM kernel: ima: No TPM chip found, activating TPM-bypass! (rc=-19)
Jan 30 20:38:29 VM kernel: evm: HMAC attrs: 0x1
Jan 30 20:38:29 VM kernel:   Magic number: 3:878:134
Jan 30 20:38:29 VM kernel: virtio-pci 0000:00:03.0: hash matches
Jan 30 20:38:29 VM kernel: acpi device:09: hash matches
Jan 30 20:38:29 VM kernel: rtc_cmos 00:00: setting system clock to 2019-01-30 \
                15:07:55 UTC (1548860875)
Jan 30 20:38:29 VM kernel: BIOS EDD facility v0.16 2004-Jun-25, 0 devices found
Jan 30 20:38:29 VM kernel: EDD information not available.
Jan 30 20:38:29 VM kernel: PM: Hibernation image not present or could not be loaded.
Jan 30 20:38:29 VM kernel: Freeing unused kernel memory: 2364K
Jan 30 20:38:29 VM kernel: Write protecting the kernel read-only data: 18432k
Jan 30 20:38:29 VM kernel: Freeing unused kernel memory: 2024K
Jan 30 20:38:29 VM kernel: Freeing unused kernel memory: 144K
Jan 30 20:38:29 VM kernel: x86/mm: Checked W+X mappings: passed, no W+X pages found.
Jan 30 20:38:29 VM kernel: x86/mm: Checking user space page tables
Jan 30 20:38:29 VM kernel: x86/mm: Checked W+X mappings: passed, no W+X pages found.
Jan 30 20:38:29 VM kernel: FDC 0 is a S82078B
Jan 30 20:38:29 VM kernel: input: VirtualPS/2 VMware VMMouse as \
                /devices/platform/i8042/serio1/input/input4
Jan 30 20:38:29 VM kernel: input: VirtualPS/2 VMware VMMouse as \
                /devices/platform/i8042/serio1/input/input3
Jan 30 20:38:29 VM kernel: virtio_net virtio3 ens6: renamed from eth1
Jan 30 20:38:29 VM kernel: virtio_net virtio2 ens5: renamed from eth0
Jan 30 20:38:29 VM kernel: [drm] Device Version 0.0
Jan 30 20:38:29 VM kernel: [drm] Compression level 0 log level 0
Jan 30 20:38:29 VM kernel: [drm] 12286 io pages at offset 0x1000000
Jan 30 20:38:29 VM kernel: [drm] 16777216 byte draw area at offset 0x0
Jan 30 20:38:29 VM kernel: [drm] RAM header offset: 0x3ffe000
Jan 30 20:38:29 VM kernel: [TTM] Zone  kernel: Available graphics memory: 3050108 kiB
Jan 30 20:38:29 VM kernel: [TTM] Zone   dma32: Available graphics memory: 2097152 kiB
Jan 30 20:38:29 VM kernel: [TTM] Initializing pool allocator
Jan 30 20:38:29 VM kernel: [TTM] Initializing DMA pool allocator
Jan 30 20:38:29 VM kernel: [drm] qxl: 16M of VRAM memory size
Jan 30 20:38:29 VM kernel: [drm] qxl: 63M of IO pages memory ready (VRAM domain)
Jan 30 20:38:29 VM kernel: [drm] qxl: 64M of Surface memory size
Jan 30 20:38:29 VM kernel: [drm] main mem slot 1 [f4000000,3ffe000]
Jan 30 20:38:29 VM kernel: [drm] surface mem slot 2 [f8000000,4000000]
Jan 30 20:38:29 VM kernel: [drm] fb mappable at 0xF4000000, size 3145728
Jan 30 20:38:29 VM kernel: [drm] fb: depth 24, pitch 4096, width 1024, height 768
Jan 30 20:38:29 VM kernel: fbcon: qxldrmfb (fb0) is primary device
Jan 30 20:38:29 VM kernel: Console: switching to colour frame buffer device 128x48
Jan 30 20:38:29 VM kernel: qxl 0000:00:02.0: fb0: qxldrmfb frame buffer device
Jan 30 20:38:29 VM kernel: [drm] Initialized qxl 0.1.0 20120117 for 0000:00:02.0 on \
                minor 0
Jan 30 20:38:29 VM kernel: clocksource: tsc: mask: 0xffffffffffffffff max_cycles: \
                0x1e33052aadd, max_idle_ns: 440795310221 ns
Jan 30 20:38:29 VM kernel: EXT4-fs (sda6): mounted filesystem with ordered data mode. \
                Opts: (null)
Jan 30 20:38:29 VM kernel: random: crng init done
Jan 30 20:38:29 VM systemd[1]: systemd 229 running in system mode. (+PAM +AUDIT \
+SELINUX +IMA +APPARMOR +SMACK +SYSVINIT +UTMP +LIBCRYPTSETUP +GCRYPT +GNUTLS +ACL \
                +XZ -LZ4 +SECCOMP +BLKID +ELFUTILS +KMOD -IDN)
Jan 30 20:38:29 VM systemd[1]: Detected virtualization qemu.
Jan 30 20:38:29 VM systemd[1]: Detected architecture x86-64.
Jan 30 20:38:29 VM systemd[1]: Set hostname to &lt;VM&gt;.
Jan 30 20:38:29 VM systemd[1]: Listening on /dev/initctl Compatibility Named Pipe.
Jan 30 20:38:29 VM systemd[1]: Reached target User and Group Name Lookups.
Jan 30 20:38:29 VM systemd[1]: Listening on Journal Socket.
Jan 30 20:38:29 VM systemd[1]: Listening on Journal Socket (/dev/log).
Jan 30 20:38:29 VM systemd[1]: Listening on Journal Audit Socket.
Jan 30 20:38:29 VM systemd[1]: Listening on fsck to fsckd communication Socket.
Jan 30 20:38:29 VM systemd[1]: Started Forward Password Requests to Wall Directory \
                Watch.
Jan 30 20:38:29 VM systemd[1]: Set up automount Arbitrary Executable File Formats \
                File System Automount Point.
Jan 30 20:38:29 VM systemd[1]: Listening on Syslog Socket.
Jan 30 20:38:29 VM systemd[1]: Listening on udev Kernel Socket.
Jan 30 20:38:29 VM kernel: lp: driver loaded but no devices found
Jan 30 20:38:29 VM systemd[1]: Mounted POSIX Message Queue File System.
Jan 30 20:38:29 VM systemd[1]: Mounted Huge Pages File System.
Jan 30 20:38:29 VM systemd[1]: Mounted Debug File System.
Jan 30 20:38:29 VM kernel: ppdev: user-space parallel port driver
Jan 30 20:38:29 VM systemd[1]: Started Load Kernel Modules.
Jan 30 20:38:29 VM systemd[1]: Mounting FUSE Control File System...
Jan 30 20:38:29 VM systemd[1]: Mounting Configuration File System...
Jan 30 20:38:29 VM systemd[1]: Starting Apply Kernel Variables...
Jan 30 20:38:29 VM systemd[1]: Mounted Configuration File System.
Jan 30 20:38:29 VM systemd[1]: Mounted FUSE Control File System.
Jan 30 20:38:29 VM systemd-journald[442]: Journal started
Jan 30 20:38:29 VM systemd-modules-load[439]: Inserted module 'lp'
Jan 30 20:38:29 VM systemd[1]: Started Journal Service.
Jan 30 20:38:29 VM systemd-modules-load[439]: Inserted module 'ppdev'
Jan 30 20:38:29 VM systemd-modules-load[439]: Inserted module 'parport_pc'
Jan 30 20:38:29 VM loadkeys[441]: Loading /etc/console-setup/cached.kmap.gz
Jan 30 20:38:29 VM systemd[1]: Started Set console keymap.
Jan 30 20:38:30 VM systemd[1]: Started Apply Kernel Variables.
Jan 30 20:38:30 VM systemd[1]: Started Create Static Device Nodes in /dev.
Jan 30 20:38:30 VM systemd[1]: Starting udev Kernel Device Manager...
Jan 30 20:38:33 VM systemd[1]: Started udev Kernel Device Manager.
Jan 30 20:38:33 VM systemd[1]: Starting Remount Root and Kernel File Systems...
Jan 30 20:38:33 VM kernel: EXT4-fs (sda6): re-mounted. Opts: errors=remount-ro
Jan 30 20:38:33 VM systemd[1]: Started Remount Root and Kernel File Systems.
Jan 30 20:38:33 VM systemd[1]: Reached target Local File Systems (Pre).
Jan 30 20:38:33 VM systemd[1]: tmp.mount: Directory /tmp to mount over is not empty, \
                mounting anyway.
Jan 30 20:38:33 VM systemd[1]: Mounting /tmp...
Jan 30 20:38:33 VM systemd[1]: Starting Flush Journal to Persistent Storage...
Jan 30 20:38:33 VM systemd[1]: Starting udev Coldplug all Devices...
Jan 30 20:38:33 VM systemd[1]: Starting Load/Save Random Seed...
Jan 30 20:38:34 VM systemd[1]: Started Flush Journal to Persistent Storage.
Jan 30 20:38:34 VM systemd[1]: Started udev Coldplug all Devices.
Jan 30 20:38:34 VM systemd[1]: Starting Show Plymouth Boot Screen...
Jan 30 20:38:34 VM systemd[1]: Found device /dev/ttyS0.
Jan 30 20:38:36 VM systemd[1]: Listening on Load/Save RF Kill Switch Status \
                /dev/rfkill Watch.
Jan 30 20:38:36 VM systemd[1]: Started Load/Save Random Seed.
Jan 30 20:38:38 VM kernel: EXT4-fs (loop0): mounted filesystem with ordered data \
                mode. Opts: (null)
Jan 30 20:38:38 VM systemd[1]: Mounted /tmp.
Jan 30 20:38:38 VM systemd[1]: Reached target Local File Systems.
Jan 30 20:38:38 VM systemd[1]: Starting Tell Plymouth To Write Out Runtime Data...
Jan 30 20:38:38 VM systemd[1]: Starting Create Volatile Files and Directories...
Jan 30 20:38:38 VM systemd[1]: Starting LSB: ebtables ruleset management...
Jan 30 20:38:38 VM systemd-tmpfiles[595]: [/usr/lib/tmpfiles.d/var.conf:14] Duplicate \
                line for path "/var/log", ignoring.
Jan 30 20:38:39 VM systemd[1]: Starting Clean up any mess left by 0dns-up...
Jan 30 20:38:39 VM systemd[1]: Starting Set console font and keymap...
Jan 30 20:38:39 VM systemd[1]: Starting LSB: AppArmor initialization...
Jan 30 20:38:39 VM systemd[1]: Starting Enable support for additional executable \
                binary formats...
Jan 30 20:38:40 VM kernel: piix4_smbus 0000:00:01.3: SMBus Host Controller at 0x700, \
                revision 0
Jan 30 20:38:41 VM kernel: 9pnet: Installing 9P2000 support
Jan 30 20:38:42 VM systemd[1]: Started Tell Plymouth To Write Out Runtime Data.
Jan 30 20:38:43 VM systemd[1]: proc-sys-fs-binfmt_misc.automount: Got automount \
                request for /proc/sys/fs/binfmt_misc, triggered by 600 \
                (update-binfmts)
Jan 30 20:38:43 VM systemd[1]: Mounting Arbitrary Executable File Formats File \
                System...
Jan 30 20:38:44 VM systemd[1]: Started Show Plymouth Boot Screen.
Jan 30 20:38:44 VM systemd[1]: Started Forward Password Requests to Plymouth \
                Directory Watch.
Jan 30 20:38:45 VM systemd[1]: Mounted Arbitrary Executable File Formats File System.
Jan 30 20:38:46 VM kernel: AVX2 version of gcm_enc/dec engaged.
Jan 30 20:38:46 VM kernel: AES CTR mode by8 optimization enabled
Jan 30 20:38:46 VM systemd[1]: Started Clean up any mess left by 0dns-up.
Jan 30 20:38:46 VM systemd[1]: Starting Nameserver information manager...
Jan 30 20:38:47 VM systemd[1]: Started Nameserver information manager.
Jan 30 20:38:47 VM systemd[1]: Reached target Network (Pre).
Jan 30 20:38:51 VM systemd[1]: Started Enable support for additional executable \
                binary formats.
Jan 30 20:38:51 VM systemd[1]: Started Create Volatile Files and Directories.
Jan 30 20:38:51 VM systemd[1]: Starting Update UTMP about System Boot/Shutdown...
Jan 30 20:38:52 VM systemd[1]: Starting Network Time Synchronization...
Jan 30 20:38:54 VM kernel: snd_hda_codec_generic hdaudioC0D0: autoconfig for Generic: \
                line_outs=1 (0x3/0x0/0x0/0x0/0x0) type:line
Jan 30 20:38:54 VM kernel: snd_hda_codec_generic hdaudioC0D0:    speaker_outs=0 \
                (0x0/0x0/0x0/0x0/0x0)
Jan 30 20:38:54 VM kernel: snd_hda_codec_generic hdaudioC0D0:    hp_outs=0 \
                (0x0/0x0/0x0/0x0/0x0)
Jan 30 20:38:54 VM kernel: snd_hda_codec_generic hdaudioC0D0:    mono: mono_out=0x0
Jan 30 20:38:54 VM kernel: snd_hda_codec_generic hdaudioC0D0:    inputs:
Jan 30 20:38:54 VM kernel: snd_hda_codec_generic hdaudioC0D0:      Line=0x5
Jan 30 20:38:56 VM systemd[1]: Started Network Time Synchronization.
Jan 30 20:38:56 VM systemd[1]: Reached target System Time Synchronized.
Jan 30 20:38:56 VM systemd[1]: Reached target Sound Card.
Jan 30 20:39:01 VM systemd[1]: Started Update UTMP about System Boot/Shutdown.
Jan 30 20:39:03 VM systemd[1]: Started Set console font and keymap.
Jan 30 20:39:03 VM systemd[1]: Created slice system-getty.slice.
Jan 30 20:39:04 VM systemd[1]: Started LSB: ebtables ruleset management.
Jan 30 20:39:06 VM apparmor[599]:  * Starting AppArmor profiles
Jan 30 20:39:20 VM systemd[1]: Found device QEMU_HARDDISK 5.
Jan 30 20:39:20 VM systemd[1]: Activating swap \
                /dev/disk/by-uuid/521fd4c1-8d9c-45d0-b46b-cfebac3420ce...
Jan 30 20:39:21 VM kernel: Adding 1998844k swap on /dev/sda5.  Priority:-1 extents:1 \
                across:1998844k FS
Jan 30 20:39:21 VM systemd[1]: Activated swap \
                /dev/disk/by-uuid/521fd4c1-8d9c-45d0-b46b-cfebac3420ce.
Jan 30 20:39:21 VM systemd[1]: Reached target Swap.
Jan 30 20:39:22 VM apparmor[599]: Skipping profile in /etc/apparmor.d/disable: \
                usr.sbin.rsyslogd
Jan 30 20:39:27 VM audit[949]: AVC apparmor="STATUS" operation="profile_load" \
profile="unconfined" name="/usr/lib/snapd/snap-confine" pid=949 \
                comm="apparmor_parser"
Jan 30 20:39:27 VM audit[949]: AVC apparmor="STATUS" operation="profile_load" \
profile="unconfined" \
name="/usr/lib/snapd/snap-confine//mount-namespace-capture-helper" pid=949 \
                comm="apparmor_parser"
Jan 30 20:39:27 VM kernel: audit: type=1400 audit(1548860967.297:2): \
apparmor="STATUS" operation="profile_load" profile="unconfined" \
                name="/usr/lib/snapd/snap-confine" pid=949 comm="apparmor_parser"
Jan 30 20:39:27 VM kernel: audit: type=1400 audit(1548860967.297:3): \
apparmor="STATUS" operation="profile_load" profile="unconfined" \
name="/usr/lib/snapd/snap-confine//mount-namespace-capture-helper" pid=949 \
                comm="apparmor_parser"
Jan 30 20:39:27 VM audit[953]: AVC apparmor="STATUS" operation="profile_load" \
                profile="unconfined" name="/usr/sbin/ippusbxd" pid=953 \
                comm="apparmor_parser"
Jan 30 20:39:27 VM kernel: audit: type=1400 audit(1548860967.817:4): \
apparmor="STATUS" operation="profile_load" profile="unconfined" \
                name="/usr/sbin/ippusbxd" pid=953 comm="apparmor_parser"
Jan 30 20:39:28 VM audit[950]: AVC apparmor="STATUS" operation="profile_load" \
                profile="unconfined" name="/usr/sbin/cups-browsed" pid=950 \
                comm="apparmor_parser"
Jan 30 20:39:28 VM kernel: audit: type=1400 audit(1548860968.113:5): \
apparmor="STATUS" operation="profile_load" profile="unconfined" \
                name="/usr/sbin/cups-browsed" pid=950 comm="apparmor_parser"
Jan 30 20:39:28 VM audit[945]: AVC apparmor="STATUS" operation="profile_load" \
profile="unconfined" name="/usr/lib/lightdm/lightdm-guest-session" pid=945 \
                comm="apparmor_parser"
Jan 30 20:39:28 VM audit[945]: AVC apparmor="STATUS" operation="profile_load" \
profile="unconfined" name="/usr/lib/lightdm/lightdm-guest-session//chromium" pid=945 \
                comm="apparmor_parser"
Jan 30 20:39:28 VM kernel: audit: type=1400 audit(1548860968.128:6): \
apparmor="STATUS" operation="profile_load" profile="unconfined" \
                name="/usr/lib/lightdm/lightdm-guest-session" pid=945 \
                comm="apparmor_parser"
Jan 30 20:39:28 VM kernel: audit: type=1400 audit(1548860968.128:7): \
apparmor="STATUS" operation="profile_load" profile="unconfined" \
name="/usr/lib/lightdm/lightdm-guest-session//chromium" pid=945 \
                comm="apparmor_parser"
Jan 30 20:39:28 VM audit[955]: AVC apparmor="STATUS" operation="profile_load" \
                profile="unconfined" name="/usr/sbin/tcpdump" pid=955 \
                comm="apparmor_parser"
Jan 30 20:39:28 VM kernel: audit: type=1400 audit(1548860968.907:8): \
apparmor="STATUS" operation="profile_load" profile="unconfined" \
                name="/usr/sbin/tcpdump" pid=955 comm="apparmor_parser"
Jan 30 20:39:29 VM audit[951]: AVC apparmor="STATUS" operation="profile_load" \
profile="unconfined" name="/usr/lib/cups/backend/cups-pdf" pid=951 \
                comm="apparmor_parser"
Jan 30 20:39:29 VM audit[951]: AVC apparmor="STATUS" operation="profile_load" \
                profile="unconfined" name="/usr/sbin/cupsd" pid=951 \
                comm="apparmor_parser"
Jan 30 20:39:29 VM audit[951]: AVC apparmor="STATUS" operation="profile_load" \
profile="unconfined" name="/usr/sbin/cupsd//third_party" pid=951 \
                comm="apparmor_parser"
Jan 30 20:39:29 VM kernel: audit: type=1400 audit(1548860969.116:9): \
apparmor="STATUS" operation="profile_load" profile="unconfined" \
                name="/usr/lib/cups/backend/cups-pdf" pid=951 comm="apparmor_parser"
Jan 30 20:39:29 VM kernel: audit: type=1400 audit(1548860969.116:10): \
apparmor="STATUS" operation="profile_load" profile="unconfined" \
                name="/usr/sbin/cupsd" pid=951 comm="apparmor_parser"
Jan 30 20:39:29 VM kernel: audit: type=1400 audit(1548860969.116:11): \
apparmor="STATUS" operation="profile_load" profile="unconfined" \
                name="/usr/sbin/cupsd//third_party" pid=951 comm="apparmor_parser"
Jan 30 20:39:29 VM audit[946]: AVC apparmor="STATUS" operation="profile_load" \
                profile="unconfined" name="/sbin/dhclient" pid=946 \
                comm="apparmor_parser"
Jan 30 20:39:29 VM audit[946]: AVC apparmor="STATUS" operation="profile_load" \
profile="unconfined" name="/usr/lib/NetworkManager/nm-dhcp-client.action" pid=946 \
                comm="apparmor_parser"
Jan 30 20:39:29 VM audit[946]: AVC apparmor="STATUS" operation="profile_load" \
profile="unconfined" name="/usr/lib/NetworkManager/nm-dhcp-helper" pid=946 \
                comm="apparmor_parser"
Jan 30 20:39:29 VM audit[946]: AVC apparmor="STATUS" operation="profile_load" \
profile="unconfined" name="/usr/lib/connman/scripts/dhclient-script" pid=946 \
                comm="apparmor_parser"
Jan 30 20:39:29 VM audit[952]: AVC apparmor="STATUS" operation="profile_load" \
                profile="unconfined" name="/usr/sbin/dhcpd" pid=952 \
                comm="apparmor_parser"
Jan 30 20:39:30 VM audit[947]: AVC apparmor="STATUS" operation="profile_load" \
                profile="unconfined" name="/usr/bin/evince" pid=947 \
                comm="apparmor_parser"
Jan 30 20:39:30 VM audit[947]: AVC apparmor="STATUS" operation="profile_load" \
profile="unconfined" name="/usr/bin/evince//sanitized_helper" pid=947 \
                comm="apparmor_parser"
Jan 30 20:39:30 VM audit[947]: AVC apparmor="STATUS" operation="profile_load" \
                profile="unconfined" name="/usr/bin/evince-previewer" pid=947 \
                comm="apparmor_parser"
Jan 30 20:39:30 VM audit[947]: AVC apparmor="STATUS" operation="profile_load" \
profile="unconfined" name="/usr/bin/evince-previewer//sanitized_helper" pid=947 \
                comm="apparmor_parser"
Jan 30 20:39:30 VM audit[947]: AVC apparmor="STATUS" operation="profile_load" \
profile="unconfined" name="/usr/bin/evince-thumbnailer" pid=947 \
                comm="apparmor_parser"
Jan 30 20:39:30 VM audit[947]: AVC apparmor="STATUS" operation="profile_load" \
profile="unconfined" name="/usr/bin/evince-thumbnailer//sanitized_helper" pid=947 \
                comm="apparmor_parser"
Jan 30 20:39:31 VM audit[948]: AVC apparmor="STATUS" operation="profile_load" \
                profile="unconfined" name="webbrowser-app" pid=948 \
                comm="apparmor_parser"
Jan 30 20:39:31 VM audit[948]: AVC apparmor="STATUS" operation="profile_load" \
profile="unconfined" name="webbrowser-app//oxide_helper" pid=948 \
                comm="apparmor_parser"
Jan 30 20:39:34 VM apparmor[599]:    ...done.
Jan 30 20:39:34 VM systemd[1]: Started LSB: AppArmor initialization.
Jan 30 20:39:34 VM systemd[1]: Starting Raise network interfaces...
Jan 30 20:39:34 VM systemd[1]: Reached target System Initialization.
Jan 30 20:39:35 VM systemd[1]: Started Timer to automatically refresh installed \
                snaps.
Jan 30 20:39:35 VM systemd[1]: Starting Socket activation for snappy daemon.
Jan 30 20:39:35 VM systemd[1]: Listening on ACPID Listen Socket.
Jan 30 20:39:35 VM systemd[1]: Started ACPI Events Check.
Jan 30 20:39:35 VM systemd[1]: Started CUPS Scheduler.
Jan 30 20:39:35 VM systemd[1]: Reached target Paths.
Jan 30 20:39:35 VM systemd[1]: Listening on CUPS Scheduler.
Jan 30 20:39:35 VM systemd[1]: Listening on Avahi mDNS/DNS-SD Stack Activation \
                Socket.
Jan 30 20:39:35 VM systemd[1]: Listening on D-Bus System Message Bus Socket.
Jan 30 20:39:35 VM systemd[1]: Listening on UUID daemon activation socket.
Jan 30 20:39:35 VM systemd[1]: Started Daily Cleanup of Temporary Directories.
Jan 30 20:39:35 VM systemd[1]: Listening on Socket activation for snappy daemon.
Jan 30 20:39:35 VM systemd[1]: Reached target Sockets.
Jan 30 20:39:35 VM systemd[1]: Reached target Basic System.
Jan 30 20:39:35 VM systemd[1]: Starting LSB: automatic crash report generation...
Jan 30 20:39:35 VM systemd[1]: Starting Detect the available GPUs and deal with any \
                system changes...
Jan 30 20:39:35 VM systemd[1]: Starting System Logging Service...
Jan 30 20:39:35 VM systemd[1]: Starting Modem Manager...
Jan 30 20:39:35 VM systemd[1]: Starting Avahi mDNS/DNS-SD Stack...
Jan 30 20:39:37 VM gpu-manager[977]: /etc/modprobe.d is not a file
Jan 30 20:39:37 VM systemd[1]: Started ACPI event daemon.
Jan 30 20:39:37 VM systemd[1]: Started CUPS Scheduler.
Jan 30 20:39:37 VM gpu-manager[977]: /etc/modprobe.d is not a file
Jan 30 20:39:37 VM gpu-manager[977]: /etc/modprobe.d is not a file
Jan 30 20:39:37 VM gpu-manager[977]: /etc/modprobe.d is not a file
Jan 30 20:39:37 VM gpu-manager[977]: /etc/modprobe.d is not a file
Jan 30 20:39:37 VM gpu-manager[977]: Error: can't open \
                /lib/modules/4.13.16/updates/dkms
Jan 30 20:39:37 VM gpu-manager[977]: Error: can't open \
                /lib/modules/4.13.16/updates/dkms
Jan 30 20:39:37 VM systemd[1]: Started Regular background program processing daemon.
Jan 30 20:39:37 VM systemd[1]: Starting LSB: Record successful boot for GRUB...
Jan 30 20:39:37 VM systemd[1]: Starting Restore /etc/resolv.conf if the system \
                crashed before the ppp link was shut down...
Jan 30 20:39:37 VM systemd[1]: Starting Login Service...
Jan 30 20:39:37 VM systemd[1]: Starting Permit User Sessions...
Jan 30 20:39:37 VM systemd[1]: Starting LSB: daemon to balance interrupts for SMP \
                systems...
Jan 30 20:39:37 VM systemd[1]: Started Deferred execution scheduler.
Jan 30 20:39:37 VM systemd[1]: Starting Save/Restore Sound Card State...
Jan 30 20:39:37 VM systemd[1]: Starting LSB: Speech Dispatcher...
Jan 30 20:39:37 VM systemd[1]: Started Run anacron jobs.
Jan 30 20:39:37 VM systemd[1]: Starting Accounts Service...
Jan 30 20:39:37 VM systemd[1]: Starting LSB: Set the CPU Frequency Scaling governor \
                to "ondemand"...
Jan 30 20:39:37 VM systemd[1]: Started D-Bus System Message Bus.
Jan 30 20:39:39 VM acpid[983]: starting up with netlink and the input layer
Jan 30 20:39:43 VM cron[994]: (CRON) INFO (pidfile fd = 3)
Jan 30 20:39:45 VM anacron[1005]: Anacron 2.3 started on 2019-01-30
Jan 30 20:39:51 VM cron[994]: (CRON) INFO (Running @reboot jobs)
Jan 30 20:39:53 VM anacron[1005]: Will run job `cron.daily' in 5 min.
Jan 30 20:39:53 VM anacron[1005]: Will run job `cron.weekly' in 10 min.
Jan 30 20:39:53 VM anacron[1005]: Will run job `cron.monthly' in 15 min.
Jan 30 20:39:53 VM anacron[1005]: Jobs will be executed sequentially
Jan 30 20:39:53 VM avahi-daemon[980]: Found user 'avahi' (UID 111) and group 'avahi' \
                (GID 120).
Jan 30 20:39:53 VM avahi-daemon[980]: Successfully dropped root privileges.
Jan 30 20:39:53 VM avahi-daemon[980]: avahi-daemon 0.6.32-rc starting up.
Jan 30 20:39:55 VM acpid[983]: 9 rules loaded
Jan 30 20:39:55 VM acpid[983]: waiting for events: event logging is off
Jan 30 20:39:58 VM ModemManager[979]: &lt;info&gt;  ModemManager (version 1.4.12) starting \
                in system bus...
Jan 30 20:40:02 VM gpu-manager[977]: update-alternatives: error: no alternatives for \
                x86_64-linux-gnu_gfxcore_conf
Jan 30 20:40:02 VM systemd[1]: Failed to subscribe to NameOwnerChanged signal for \
                'org.freedesktop.DisplayManager': Connection timed out
Jan 30 20:40:02 VM systemd[1]: Failed to subscribe to NameOwnerChanged signal for \
                'org.freedesktop.NetworkManager': Connection timed out
Jan 30 20:40:02 VM systemd[1]: Failed to subscribe to NameOwnerChanged signal for \
                'org.freedesktop.login1': Connection timed out
Jan 30 20:40:02 VM systemd[1]: Failed to subscribe to NameOwnerChanged signal for \
                'org.freedesktop.Accounts': Connection timed out
Jan 30 20:40:02 VM systemd[1]: Failed to subscribe to NameOwnerChanged signal for \
                'org.freedesktop.Avahi': Connection timed out
Jan 30 20:40:02 VM systemd[1]: Failed to subscribe to NameOwnerChanged signal for \
                'org.freedesktop.ModemManager1': Connection timed out
Jan 30 20:40:02 VM systemd[1]: Failed to subscribe to activation signal: Connection \
                timed out
Jan 30 20:40:02 VM systemd[1]: Failed to register name: Connection timed out
Jan 30 20:40:02 VM systemd[1]: Failed to set up API bus: Connection timed out
Jan 30 20:40:02 VM systemd[1]: Network Manager is not active.
Jan 30 20:40:02 VM systemd[1]: Dependency failed for Network Manager Wait Online.
Jan 30 20:40:02 VM systemd[1]: NetworkManager-wait-online.service: Job \
                NetworkManager-wait-online.service/start failed with result \
                'dependency'.
Jan 30 20:40:02 VM systemd[1]: Started Snappy daemon.
Jan 30 20:40:02 VM systemd[1]: Starting Auto import assertions from block devices...
Jan 30 20:40:02 VM systemd[1]: Started Restore /etc/resolv.conf if the system crashed \
                before the ppp link was shut down.
Jan 30 20:40:02 VM systemd[1]: Started Permit User Sessions.
Jan 30 20:40:02 VM systemd[1]: Started Save/Restore Sound Card State.
Jan 30 20:40:03 VM snap[1063]: auto-import is disabled on classic
Jan 30 20:40:03 VM systemd[1]: Started Auto import assertions from block devices.
Jan 30 20:40:03 VM systemd[1]: Started Detect the available GPUs and deal with any \
                system changes.
Jan 30 20:40:03 VM systemd[1]: Looping too fast. Throttling execution a little.
Jan 30 20:40:04 VM systemd[1]: Started System Logging Service.
Jan 30 20:40:04 VM systemd[1]: Looping too fast. Throttling execution a little.
Jan 30 20:40:05 VM systemd[1]: Looping too fast. Throttling execution a little.
Jan 30 20:40:07 VM systemd[1]: Looping too fast. Throttling execution a little.
Jan 30 20:40:07 VM dbus[1009]: [system] AppArmor D-Bus mediation is enabled
Jan 30 20:40:07 VM avahi-daemon[980]: Successfully called chroot().
Jan 30 20:40:07 VM avahi-daemon[980]: Successfully dropped remaining capabilities.
Jan 30 20:40:07 VM avahi-daemon[980]: No service file found in /etc/avahi/services.
Jan 30 20:40:07 VM avahi-daemon[980]: Network interface enumeration completed.
Jan 30 20:40:07 VM avahi-daemon[980]: Server startup complete. Host name is VM.local. \
                Local service cookie is 2371528958.
Jan 30 20:40:08 VM dbus[1009]: [system] Activating systemd to hand-off: service \
                name='org.freedesktop.PolicyKit1' unit='polkitd.service'
Jan 30 20:40:08 VM systemd[1]: Starting Light Display Manager...
Jan 30 20:40:11 VM dbus[1009]: [system] Activating systemd to hand-off: service \
                name='org.freedesktop.login1' \
                unit='dbus-org.freedesktop.login1.service'
Jan 30 20:40:16 VM /usr/lib/snapd/snapd[1062]: daemon.go:250: DEBUG: init done in \
                964.62 µs
Jan 30 20:40:16 VM /usr/lib/snapd/snapd[1062]: daemon.go:251: started snapd/2.25 \
                (series 16; classic) ubuntu/16.04 (amd64) linux/4.13.16.
Jan 30 20:40:16 VM snapd[1062]: 2019/01/30 20:40:16.699898 daemon.go:251: started \
                snapd/2.25 (series 16; classic) ubuntu/16.04 (amd64) linux/4.13.16.
Jan 30 20:40:16 VM systemd[1]: Received SIGRTMIN+20 from PID 663 (plymouthd).
Jan 30 20:40:16 VM /usr/lib/snapd/snapd[1062]: snapmgr.go:496: DEBUG: Next refresh \
                scheduled for 2019-01-30 20:40:16.971548129 +0530 IST.
Jan 30 20:40:16 VM systemd[1]: Started LSB: automatic crash report generation.
Jan 30 20:40:17 VM irqbalance[1000]:  * Starting SMP IRQ Balancer: irqbalance
Jan 30 20:40:17 VM /usr/lib/snapd/snapd[1062]: snapmgr.go:411: Cannot prepare \
auto-refresh change: Post https://search.apps.ubuntu.com/api/v1/snaps/metadata: dial \
tcp: lookup search.apps.ubuntu.com on [::1]:53: read udp [::1]:42272-&gt;[::1]:53: read: \
                connection refused
Jan 30 20:40:17 VM snapd[1062]: 2019/01/30 20:40:17.176060 snapmgr.go:411: Cannot \
prepare auto-refresh change: Post \
https://search.apps.ubuntu.com/api/v1/snaps/metadata: dial tcp: lookup \
search.apps.ubuntu.com on [::1]:53: read udp [::1]:42272-&gt;[::1]:53: read: connection \
                refused
Jan 30 20:40:17 VM snapd[1062]: 2019/01/30 20:40:17.176241 stateengine.go:98: state \
ensure error: Post https://search.apps.ubuntu.com/api/v1/snaps/metadata: dial tcp: \
lookup search.apps.ubuntu.com on [::1]:53: read udp [::1]:42272-&gt;[::1]:53: read: \
                connection refused
Jan 30 20:40:17 VM /usr/lib/snapd/snapd[1062]: stateengine.go:98: state ensure error: \
Post https://search.apps.ubuntu.com/api/v1/snaps/metadata: dial tcp: lookup \
search.apps.ubuntu.com on [::1]:53: read udp [::1]:42272-&gt;[::1]:53: read: connection \
                refused
Jan 30 20:40:17 VM speech-dispatcher[1003]:  * speech-dispatcher disabled; edit \
                /etc/default/speech-dispatcher
Jan 30 20:40:17 VM systemd[1]: Started LSB: Speech Dispatcher.
Jan 30 20:40:17 VM systemd[1]: Started LSB: Set the CPU Frequency Scaling governor to \
                "ondemand".
Jan 30 20:40:17 VM irqbalance[1000]:    ...done.
Jan 30 20:40:17 VM systemd[1]: Started LSB: daemon to balance interrupts for SMP \
                systems.
Jan 30 20:40:17 VM ifup[972]: ifquery: recursion detected for interface lo in post-up \
                phase
Jan 30 20:40:17 VM systemd[1]: Started Raise network interfaces.
Jan 30 20:40:17 VM systemd[1]: Reached target Network.
Jan 30 20:40:17 VM systemd[1]: Reached target Network is Online.
Jan 30 20:40:17 VM systemd[1]: Started Daily apt download activities.
Jan 30 20:40:17 VM systemd[1]: Started Daily apt upgrade and clean activities.
Jan 30 20:40:17 VM systemd[1]: Reached target Timers.
Jan 30 20:40:17 VM systemd[1]: Starting LSB: Router Advertising Daemon...
Jan 30 20:40:17 VM systemd[1]: Starting LSB: ipvsadm daemon...
Jan 30 20:40:17 VM kernel: FS-Cache: Loaded
Jan 30 20:40:17 VM kernel: 9p: Installing v9fs 9p2000 file system support
Jan 30 20:40:17 VM kernel: FS-Cache: Netfs '9p' registered for caching
Jan 30 20:40:17 VM systemd[1]: Started ISC DHCP IPv6 relay.
Jan 30 20:40:17 VM sh[1206]: No interface defined in /etc/default/isc-dhcp-relay6! - \
                Aborting...
Jan 30 20:40:17 VM systemd[1]: Started crash report submission daemon.
Jan 30 20:40:17 VM systemd[1]: Starting OpenBSD Secure Shell server...
Jan 30 20:40:17 VM systemd[1]: Starting /etc/rc.local Compatibility...
Jan 30 20:40:17 VM systemd[1]: Started Unattended Upgrades Shutdown.
Jan 30 20:40:17 VM systemd[1]: Starting Daily apt download activities...
Jan 30 20:40:17 VM radvd[1190]: Starting radvd:
Jan 30 20:40:17 VM radvd[1190]: * /etc/radvd.conf does not exist or is empty.
Jan 30 20:40:17 VM radvd[1190]: * See /usr/share/doc/radvd/README.Debian
Jan 30 20:40:17 VM radvd[1190]: * radvd will *not* be started.
Jan 30 20:40:17 VM systemd[1]: Started LSB: Router Advertising Daemon.
Jan 30 20:40:18 VM systemd[1]: Started /etc/rc.local Compatibility.
Jan 30 20:40:18 VM systemd[1]: Starting Hold until boot process finishes up...
Jan 30 20:40:18 VM ipvsadm[1191]:  * ipvsadm is not configured to run. Please edit \
                /etc/default/ipvsadm
Jan 30 20:40:18 VM systemd[1]: Started LSB: ipvsadm daemon.
Jan 30 20:40:18 VM systemd[1]: Started LSB: Record successful boot for GRUB.
Jan 30 20:40:19 VM sshd[1244]: Server listening on 0.0.0.0 port 22.
Jan 30 20:40:19 VM sshd[1244]: Server listening on :: port 22.
Jan 30 20:40:19 VM systemd[1]: Started OpenBSD Secure Shell server.
Jan 30 20:40:23 VM dhclient[1265]: Internet Systems Consortium DHCP Client 4.3.3
Jan 30 20:40:23 VM dhclient[1265]: Copyright 2004-2015 Internet Systems Consortium.
Jan 30 20:40:23 VM dhclient[1265]: All rights reserved.
Jan 30 20:40:23 VM dhclient[1265]: For info, please visit \
                https://www.isc.org/software/dhcp/
Jan 30 20:40:23 VM dhclient[1265]: 
Jan 30 20:40:23 VM whoopsie[1209]: [20:40:23] Using lock path: \
                /var/lock/whoopsie/lock
Jan 30 20:40:23 VM whoopsie[1209]: [20:40:23] Could not get the Network Manager \
                state:
Jan 30 20:40:23 VM whoopsie[1209]: [20:40:23] \
GDBus.Error:org.freedesktop.DBus.Error.ServiceUnknown: The name \
                org.freedesktop.NetworkManager was not provided by any .service files
Jan 30 20:40:24 VM root[1277]: /etc/dhcp/dhclient-enter-hooks.d/avahi-autoipd \
                returned non-zero exit status 1
Jan 30 20:40:25 VM dhclient[1265]: Listening on LPF/ens5/52:54:00:cc:00:02
Jan 30 20:40:25 VM dhclient[1265]: Sending on   LPF/ens5/52:54:00:cc:00:02
Jan 30 20:40:25 VM dhclient[1265]: Sending on   Socket/fallback
Jan 30 20:40:25 VM dhclient[1265]: DHCPDISCOVER on ens5 to 255.255.255.255 port 67 \
                interval 3 (xid=0x7a9be132)
Jan 30 20:40:25 VM dhclient[1265]: DHCPREQUEST of 192.168.123.12 on ens5 to \
                255.255.255.255 port 67 (xid=0x32e19b7a)
Jan 30 20:40:25 VM dhclient[1265]: DHCPOFFER of 192.168.123.12 from 192.168.123.1
Jan 30 20:40:25 VM dhclient[1265]: DHCPACK of 192.168.123.12 from 192.168.123.1
Jan 30 20:40:25 VM root[1305]: /etc/dhcp/dhclient-enter-hooks.d/avahi-autoipd \
                returned non-zero exit status 1
Jan 30 20:40:25 VM avahi-daemon[980]: Joining mDNS multicast group on interface \
                ens5.IPv4 with address 192.168.123.12.
Jan 30 20:40:25 VM avahi-daemon[980]: New relevant interface ens5.IPv4 for mDNS.
Jan 30 20:40:25 VM avahi-daemon[980]: Registering new address record for \
                192.168.123.12 on ens5.IPv4.
Jan 30 20:40:25 VM avahi-daemon[980]: Host name conflict, retrying with VM-2
Jan 30 20:40:25 VM avahi-daemon[980]: Registering new address record for \
                192.168.123.12 on ens5.IPv4.
Jan 30 20:40:25 VM avahi-daemon[980]: Joining mDNS multicast group on interface \
                ens5.IPv6 with address fe80::5054:ff:fecc:2.
Jan 30 20:40:25 VM avahi-daemon[980]: New relevant interface ens5.IPv6 for mDNS.
Jan 30 20:40:25 VM avahi-daemon[980]: Registering new address record for \
                fe80::5054:ff:fecc:2 on ens5.*.
Jan 30 20:40:25 VM dhclient[1265]: bound to 192.168.123.12 -- renewal in 1355 \
                seconds.
Jan 30 20:40:26 VM avahi-daemon[980]: Withdrawing address record for 192.168.123.12 \
                on ens5.
Jan 30 20:40:26 VM avahi-daemon[980]: Host name conflict, retrying with VM-3
Jan 30 20:40:26 VM avahi-daemon[980]: Registering new address record for \
                fe80::5054:ff:fecc:2 on ens5.*.
Jan 30 20:40:26 VM avahi-daemon[980]: Registering new address record for \
                192.168.123.12 on ens5.IPv4.
Jan 30 20:40:26 VM systemd[1]: Reloading OpenBSD Secure Shell server.
Jan 30 20:40:26 VM sshd[1244]: Received SIGHUP; restarting.
Jan 30 20:40:26 VM systemd[1]: Reloaded OpenBSD Secure Shell server.
Jan 30 20:40:26 VM sshd[1244]: Server listening on 0.0.0.0 port 22.
Jan 30 20:40:26 VM sshd[1244]: Server listening on :: port 22.
Jan 30 20:40:26 VM dhclient[1444]: Internet Systems Consortium DHCP Client 4.3.3
Jan 30 20:40:26 VM dhclient[1444]: Copyright 2004-2015 Internet Systems Consortium.
Jan 30 20:40:26 VM dhclient[1444]: All rights reserved.
Jan 30 20:40:26 VM dhclient[1444]: For info, please visit \
                https://www.isc.org/software/dhcp/
Jan 30 20:40:26 VM dhclient[1444]: 
Jan 30 20:40:26 VM root[1450]: /etc/dhcp/dhclient-enter-hooks.d/avahi-autoipd \
                returned non-zero exit status 1
Jan 30 20:40:26 VM dhclient[1444]: Listening on LPF/ens6/52:54:00:11:06:03
Jan 30 20:40:26 VM dhclient[1444]: Sending on   LPF/ens6/52:54:00:11:06:03
Jan 30 20:40:26 VM dhclient[1444]: Sending on   Socket/fallback
Jan 30 20:40:26 VM dhclient[1444]: DHCPDISCOVER on ens6 to 255.255.255.255 port 67 \
                interval 3 (xid=0xd143103)
Jan 30 20:40:26 VM dhclient[1444]: DHCPREQUEST of 192.168.240.210 on ens6 to \
                255.255.255.255 port 67 (xid=0x331140d)
Jan 30 20:40:26 VM dhclient[1444]: DHCPOFFER of 192.168.240.210 from 192.168.240.1
Jan 30 20:40:26 VM dhclient[1444]: DHCPACK of 192.168.240.210 from 192.168.240.1
Jan 30 20:40:26 VM root[1469]: /etc/dhcp/dhclient-enter-hooks.d/avahi-autoipd \
                returned non-zero exit status 1
Jan 30 20:40:26 VM avahi-daemon[980]: Joining mDNS multicast group on interface \
                ens6.IPv4 with address 192.168.240.210.
Jan 30 20:40:26 VM avahi-daemon[980]: New relevant interface ens6.IPv4 for mDNS.
Jan 30 20:40:26 VM avahi-daemon[980]: Registering new address record for \
                192.168.240.210 on ens6.IPv4.
Jan 30 20:40:27 VM avahi-daemon[980]: Withdrawing address record for 192.168.240.210 \
                on ens6.
Jan 30 20:40:27 VM avahi-daemon[980]: Withdrawing address record for 192.168.123.12 \
                on ens5.
Jan 30 20:40:27 VM avahi-daemon[980]: Host name conflict, retrying with VM-4
Jan 30 20:40:27 VM avahi-daemon[980]: Registering new address record for \
                192.168.240.210 on ens6.IPv4.
Jan 30 20:40:27 VM avahi-daemon[980]: Registering new address record for \
                fe80::5054:ff:fecc:2 on ens5.*.
Jan 30 20:40:27 VM avahi-daemon[980]: Registering new address record for \
                192.168.123.12 on ens5.IPv4.
Jan 30 20:40:28 VM avahi-daemon[980]: Withdrawing address record for 192.168.240.210 \
                on ens6.
Jan 30 20:40:28 VM avahi-daemon[980]: Withdrawing address record for \
                fe80::5054:ff:fecc:2 on ens5.
Jan 30 20:40:28 VM avahi-daemon[980]: Host name conflict, retrying with VM-5
Jan 30 20:40:28 VM avahi-daemon[980]: Registering new address record for \
                192.168.240.210 on ens6.IPv4.
Jan 30 20:40:28 VM avahi-daemon[980]: Registering new address record for \
                fe80::5054:ff:fecc:2 on ens5.*.
Jan 30 20:40:28 VM avahi-daemon[980]: Registering new address record for \
                192.168.123.12 on ens5.IPv4.
Jan 30 20:40:28 VM whoopsie[1209]: [20:40:28] Cannot reach: https://daisy.ubuntu.com
Jan 30 20:40:28 VM whoopsie[1209]: [20:40:28] offline
Jan 30 20:40:28 VM avahi-daemon[980]: Joining mDNS multicast group on interface \
                ens6.IPv6 with address fe80::5054:ff:fe11:603.
Jan 30 20:40:28 VM avahi-daemon[980]: New relevant interface ens6.IPv6 for mDNS.
Jan 30 20:40:28 VM avahi-daemon[980]: Registering new address record for \
                fe80::5054:ff:fe11:603 on ens6.*.
Jan 30 20:40:29 VM avahi-daemon[980]: Withdrawing address record for 192.168.240.210 \
                on ens6.
Jan 30 20:40:29 VM avahi-daemon[980]: Withdrawing address record for \
                fe80::5054:ff:fecc:2 on ens5.
Jan 30 20:40:29 VM avahi-daemon[980]: Withdrawing address record for 192.168.123.12 \
                on ens5.
Jan 30 20:40:29 VM avahi-daemon[980]: Host name conflict, retrying with VM-6
Jan 30 20:40:29 VM avahi-daemon[980]: Registering new address record for \
                fe80::5054:ff:fe11:603 on ens6.*.
Jan 30 20:40:29 VM avahi-daemon[980]: Registering new address record for \
                192.168.240.210 on ens6.IPv4.
Jan 30 20:40:29 VM avahi-daemon[980]: Registering new address record for \
                fe80::5054:ff:fecc:2 on ens5.*.
Jan 30 20:40:29 VM avahi-daemon[980]: Registering new address record for \
                192.168.123.12 on ens5.IPv4.
Jan 30 20:40:29 VM avahi-daemon[980]: Withdrawing address record for \
                fe80::5054:ff:fe11:603 on ens6.
Jan 30 20:40:29 VM avahi-daemon[980]: Withdrawing address record for 192.168.240.210 \
                on ens6.
Jan 30 20:40:29 VM avahi-daemon[980]: Withdrawing address record for 192.168.123.12 \
                on ens5.
Jan 30 20:40:29 VM avahi-daemon[980]: Host name conflict, retrying with VM-7
Jan 30 20:40:29 VM avahi-daemon[980]: Registering new address record for \
                fe80::5054:ff:fe11:603 on ens6.*.
Jan 30 20:40:29 VM avahi-daemon[980]: Registering new address record for \
                192.168.240.210 on ens6.IPv4.
Jan 30 20:40:29 VM avahi-daemon[980]: Registering new address record for \
                fe80::5054:ff:fecc:2 on ens5.*.
Jan 30 20:40:29 VM avahi-daemon[980]: Registering new address record for \
                192.168.123.12 on ens5.IPv4.
Jan 30 20:40:30 VM avahi-daemon[980]: Leaving mDNS multicast group on interface \
                ens6.IPv6 with address fe80::5054:ff:fe11:603.
Jan 30 20:40:30 VM avahi-daemon[980]: Joining mDNS multicast group on interface \
                ens6.IPv6 with address fd17:5821:95c0:0:5054:ff:fe11:603.
Jan 30 20:40:30 VM avahi-daemon[980]: Registering new address record for \
                fd17:5821:95c0:0:5054:ff:fe11:603 on ens6.*.
Jan 30 20:40:30 VM avahi-daemon[980]: Withdrawing address record for \
                fe80::5054:ff:fe11:603 on ens6.
Jan 30 20:40:30 VM systemd-timesyncd[776]: Synchronized to time server \
                212.26.18.43:123 (asia.pool.ntp.org).
Jan 30 20:40:31 VM avahi-daemon[980]: Withdrawing address record for 192.168.240.210 \
                on ens6.
Jan 30 20:40:31 VM avahi-daemon[980]: Withdrawing address record for \
                fe80::5054:ff:fecc:2 on ens5.
Jan 30 20:40:31 VM avahi-daemon[980]: Withdrawing address record for 192.168.123.12 \
                on ens5.
Jan 30 20:40:31 VM avahi-daemon[980]: Host name conflict, retrying with VM-8
Jan 30 20:40:31 VM avahi-daemon[980]: Registering new address record for \
                fd17:5821:95c0:0:5054:ff:fe11:603 on ens6.*.
Jan 30 20:40:31 VM avahi-daemon[980]: Registering new address record for \
                192.168.240.210 on ens6.IPv4.
Jan 30 20:40:31 VM avahi-daemon[980]: Registering new address record for \
                fe80::5054:ff:fecc:2 on ens5.*.
Jan 30 20:40:31 VM avahi-daemon[980]: Registering new address record for \
                192.168.123.12 on ens5.IPv4.
Jan 30 20:40:31 VM dhclient[1444]: bound to 192.168.240.210 -- renewal in 16723 \
                seconds.
Jan 30 20:40:31 VM systemd[1]: Reloading OpenBSD Secure Shell server.
Jan 30 20:40:31 VM sshd[1244]: Received SIGHUP; restarting.
Jan 30 20:40:31 VM systemd[1]: Reloaded OpenBSD Secure Shell server.
Jan 30 20:40:31 VM sshd[1244]: Server listening on 0.0.0.0 port 22.
Jan 30 20:40:31 VM sshd[1244]: Server listening on :: port 22.
Jan 30 20:40:32 VM avahi-daemon[980]: Withdrawing address record for \
                fd17:5821:95c0:0:5054:ff:fe11:603 on ens6.
Jan 30 20:40:32 VM avahi-daemon[980]: Withdrawing address record for 192.168.240.210 \
                on ens6.
Jan 30 20:40:32 VM avahi-daemon[980]: Withdrawing address record for 192.168.123.12 \
                on ens5.
Jan 30 20:40:32 VM avahi-daemon[980]: Host name conflict, retrying with VM-9
Jan 30 20:40:32 VM avahi-daemon[980]: Registering new address record for \
                fd17:5821:95c0:0:5054:ff:fe11:603 on ens6.*.
Jan 30 20:40:32 VM avahi-daemon[980]: Registering new address record for \
                192.168.240.210 on ens6.IPv4.
Jan 30 20:40:32 VM avahi-daemon[980]: Registering new address record for \
                fe80::5054:ff:fecc:2 on ens5.*.
Jan 30 20:40:32 VM avahi-daemon[980]: Registering new address record for \
                192.168.123.12 on ens5.IPv4.
Jan 30 20:40:32 VM dhclient[1619]: Created duid \
                \000\001\000\001#\344z\350RT\000\021\006\003.
Jan 30 20:40:32 VM dhclient[1619]: XMT: Solicit on ens6, interval 1030ms.
Jan 30 20:40:32 VM dhclient[1619]: RCV: Advertise message on ens6 from \
                fe80::5054:ff:fe11:c02.
Jan 30 20:40:32 VM dhclient[1619]: IA_NA status code NoAddrsAvail: "No addresses \
                available for this interface."
Jan 30 20:40:32 VM dhclient[1619]: RCV: Advertise message on ens6 from \
                fe80::c66e:1fff:fef4:c6e4.
Jan 30 20:40:32 VM dbus[1009]: [system] Failed to activate service \
                'org.freedesktop.systemd1': timed out
Jan 30 20:40:32 VM systemd-logind[998]: Failed to enable subscription: Failed to \
                activate service 'org.freedesktop.systemd1': timed out
Jan 30 20:40:32 VM systemd-logind[998]: Failed to fully start up daemon: Connection \
                timed out
Jan 30 20:40:32 VM systemd[1]: systemd-logind.service: Main process exited, \
                code=exited, status=1/FAILURE
Jan 30 20:40:32 VM systemd[1]: Failed to start Login Service.
Jan 30 20:40:32 VM systemd[1]: systemd-logind.service: Unit entered failed state.
Jan 30 20:40:32 VM systemd[1]: systemd-logind.service: Failed with result \
                'exit-code'.
Jan 30 20:40:32 VM systemd[1]: systemd-logind.service: Service has no hold-off time, \
                scheduling restart.
Jan 30 20:40:32 VM systemd[1]: Stopped Login Service.
Jan 30 20:40:32 VM systemd[1]: Starting Login Service...
Jan 30 20:40:33 VM dbus[1009]: [system] Failed to activate service \
                'org.freedesktop.PolicyKit1': timed out
Jan 30 20:40:33 VM accounts-daemon[1006]: ** (accounts-daemon:1006): CRITICAL **: \
error getting polkit authority: Error initializing authority: Error calling \
StartServiceByName for org.freedesktop.PolicyKit1: \
GDBus.Error:org.freedesktop.DBus.Error.TimedOut: Failed to activate service \
                'org.freedesktop.PolicyKit1': timed out
Jan 30 20:40:33 VM accounts-daemon[1006]: Failed to initialize daemon
Jan 30 20:40:33 VM ModemManager[979]: &lt;warn&gt;  failed to create PolicyKit authority: \
'Error initializing authority: Error calling StartServiceByName for \
org.freedesktop.PolicyKit1: GDBus.Error:org.freedesktop.DBus.Error.TimedOut: Failed \
                to activate service 'org.freedesktop.PolicyKit1': timed out'
Jan 30 20:40:33 VM systemd[1]: Started Accounts Service.
Jan 30 20:40:33 VM dhclient[1619]: XMT: Request on ens6, interval 940ms.
Jan 30 20:40:33 VM dhclient[1619]: RCV: Reply message on ens6 from \
                fe80::c66e:1fff:fef4:c6e4.
Jan 30 20:40:34 VM systemd[1]: Reloading OpenBSD Secure Shell server.
Jan 30 20:40:34 VM sshd[1244]: Received SIGHUP; restarting.
Jan 30 20:40:34 VM systemd[1]: Reloaded OpenBSD Secure Shell server.
Jan 30 20:40:34 VM sshd[1244]: Server listening on 0.0.0.0 port 22.
Jan 30 20:40:34 VM sshd[1244]: Server listening on :: port 22.
Jan 30 20:40:34 VM systemd[1]: Stopping Nameserver information manager...
Jan 30 20:40:34 VM systemd[1]: Stopped Nameserver information manager.
Jan 30 20:40:34 VM systemd[1]: Starting Nameserver information manager...
Jan 30 20:40:34 VM systemd[1]: Started Nameserver information manager.
Jan 30 20:40:34 VM avahi-daemon[980]: Server startup complete. Host name is \
                VM-9.local. Local service cookie is 2371528958.
Jan 30 20:40:34 VM kernel: EXT4-fs (vda): mounted filesystem with ordered data mode. \
                Opts: (null)
Jan 30 20:40:35 VM avahi-daemon[980]: Registering new address record for \
                fd17:5821:95c0::1ce on ens6.*.
Jan 30 20:40:36 VM ModemManager[979]: &lt;info&gt;  Couldn't find support for device at \
                '/sys/devices/pci0000:00/0000:00:05.0': not supported by any plugin
Jan 30 20:40:36 VM ModemManager[979]: &lt;info&gt;  Couldn't find support for device at \
                '/sys/devices/pci0000:00/0000:00:06.0': not supported by any plugin
Jan 30 20:40:36 VM dbus[1009]: [system] Activating systemd to hand-off: service \
                name='org.freedesktop.timedate1' \
                unit='dbus-org.freedesktop.timedate1.service'
Jan 30 20:40:36 VM dbus[1009]: [system] Failed to activate service \
                'org.freedesktop.login1': timed out
Jan 30 20:40:36 VM lightdm[1109]: ** (lightdm:1109): WARNING **: Failed to get list \
of logind seats: GDBus.Error:org.freedesktop.DBus.Error.TimedOut: Failed to activate \
                service 'org.freedesktop.login1': timed out
Jan 30 20:40:37 VM systemd[1]: Received SIGRTMIN+21 from PID 663 (plymouthd).
Jan 30 20:40:37 VM systemd[1]: Started Hold until boot process finishes up.
Jan 30 20:40:37 VM systemd[1]: Started Getty on tty1.
Jan 30 20:40:37 VM systemd[1]: Starting Set console scheme...
Jan 30 20:40:37 VM systemd[1]: Started Serial Getty on ttyS0.
Jan 30 20:40:37 VM systemd[1]: Reached target Login Prompts.
Jan 30 20:40:37 VM dbus[1009]: [system] Connection has not authenticated soon enough, \
                closing it (auth_timeout=30000ms, elapsed: 30000ms)
Jan 30 20:40:37 VM dbus[1009]: [system] Activating systemd to hand-off: service \
                name='org.freedesktop.Accounts' unit='accounts-daemon.service'
Jan 30 20:40:37 VM systemd[1]: Started Set console scheme.
Jan 30 20:40:57 VM dbus[1009]: [system] Failed to activate service \
                'org.freedesktop.systemd1': timed out
Jan 30 20:40:57 VM systemd-logind[1640]: Failed to enable subscription: Failed to \
                activate service 'org.freedesktop.systemd1': timed out
Jan 30 20:40:57 VM systemd-logind[1640]: Failed to fully start up daemon: Connection \
                timed out
Jan 30 20:40:57 VM systemd[1]: systemd-logind.service: Main process exited, \
                code=exited, status=1/FAILURE
Jan 30 20:40:57 VM systemd[1]: Failed to start Login Service.
Jan 30 20:40:57 VM systemd[1]: systemd-logind.service: Unit entered failed state.
Jan 30 20:40:57 VM systemd[1]: systemd-logind.service: Failed with result \
                'exit-code'.
Jan 30 20:40:57 VM systemd[1]: systemd-logind.service: Service has no hold-off time, \
                scheduling restart.
Jan 30 20:40:57 VM systemd[1]: Stopped Login Service.
Jan 30 20:40:57 VM systemd[1]: Starting Login Service...
Jan 30 20:41:01 VM dbus[1009]: [system] Failed to activate service \
                'org.freedesktop.timedate1': timed out
Jan 30 20:41:02 VM dbus[1009]: [system] Failed to activate service \
                'org.freedesktop.Accounts': timed out
Jan 30 20:41:02 VM lightdm[1109]: ** (lightdm:1109): WARNING **: Error getting user \
list from org.freedesktop.Accounts: GDBus.Error:org.freedesktop.DBus.Error.TimedOut: \
                Failed to activate service 'org.freedesktop.Accounts': timed out
Jan 30 20:41:22 VM dbus[1009]: [system] Failed to activate service \
                'org.freedesktop.systemd1': timed out
Jan 30 20:41:22 VM systemd-logind[1845]: Failed to enable subscription: Failed to \
                activate service 'org.freedesktop.systemd1': timed out
Jan 30 20:41:22 VM systemd-logind[1845]: Failed to fully start up daemon: Connection \
                timed out
Jan 30 20:41:22 VM systemd[1]: systemd-logind.service: Main process exited, \
                code=exited, status=1/FAILURE
Jan 30 20:41:22 VM systemd[1]: Failed to start Login Service.
Jan 30 20:41:22 VM systemd[1]: systemd-logind.service: Unit entered failed state.
Jan 30 20:41:22 VM systemd[1]: systemd-logind.service: Failed with result \
                'exit-code'.
Jan 30 20:41:22 VM systemd[1]: systemd-logind.service: Service has no hold-off time, \
                scheduling restart.
Jan 30 20:41:22 VM systemd[1]: Stopped Login Service.
Jan 30 20:41:22 VM systemd[1]: Starting Login Service...
Jan 30 20:41:29 VM lightdm[1884]: PAM unable to dlopen(pam_kwallet.so): \
/lib/security/pam_kwallet.so: cannot open shared object file: No such file or \
                directory
Jan 30 20:41:29 VM lightdm[1884]: PAM adding faulty module: pam_kwallet.so
Jan 30 20:41:29 VM lightdm[1884]: PAM unable to dlopen(pam_kwallet5.so): \
/lib/security/pam_kwallet5.so: cannot open shared object file: No such file or \
                directory
Jan 30 20:41:29 VM lightdm[1884]: PAM adding faulty module: pam_kwallet5.so
Jan 30 20:41:29 VM dbus[1009]: [system] Activating systemd to hand-off: service \
                name='org.freedesktop.Accounts' unit='accounts-daemon.service'
Jan 30 20:41:45 VM login[1839]: pam_unix(login:session): session opened for user root \
                by LOGIN(uid=0)
Jan 30 20:41:45 VM dbus[1009]: [system] Activating systemd to hand-off: service \
                name='org.freedesktop.login1' \
                unit='dbus-org.freedesktop.login1.service'
Jan 30 20:41:47 VM dbus[1009]: [system] Failed to activate service \
                'org.freedesktop.systemd1': timed out
Jan 30 20:41:47 VM systemd-logind[1878]: Failed to enable subscription: Failed to \
                activate service 'org.freedesktop.systemd1': timed out
Jan 30 20:41:47 VM systemd-logind[1878]: Failed to fully start up daemon: Connection \
                timed out
Jan 30 20:41:47 VM systemd[1]: systemd-logind.service: Main process exited, \
                code=exited, status=1/FAILURE
Jan 30 20:41:47 VM systemd[1]: Failed to start Login Service.
Jan 30 20:41:47 VM systemd[1]: systemd-logind.service: Unit entered failed state.
Jan 30 20:41:47 VM systemd[1]: systemd-logind.service: Failed with result \
                'exit-code'.
Jan 30 20:41:47 VM systemd[1]: systemd-logind.service: Service has no hold-off time, \
                scheduling restart.
Jan 30 20:41:47 VM systemd[1]: Stopped Login Service.
Jan 30 20:41:47 VM systemd[1]: Starting Login Service...
Jan 30 20:41:54 VM dbus[1009]: [system] Failed to activate service \
                'org.freedesktop.Accounts': timed out
Jan 30 20:41:54 VM lightdm[1109]: ** (process:1884): WARNING **: Error getting user \
list from org.freedesktop.Accounts: GDBus.Error:org.freedesktop.DBus.Error.TimedOut: \
                Failed to activate service 'org.freedesktop.Accounts': timed out
Jan 30 20:41:54 VM lightdm[1884]: pam_unix(lightdm-greeter:session): session opened \
                for user lightdm by (uid=0)
Jan 30 20:42:10 VM dbus[1009]: [system] Failed to activate service \
                'org.freedesktop.login1': timed out
Jan 30 20:42:10 VM lightdm[1884]: pam_systemd(lightdm-greeter:session): Failed to \
                create session: Failed to activate service 'org.freedesktop.login1': \
                timed out
Jan 30 20:42:10 VM login[1839]: pam_systemd(login:session): Failed to create session: \
                Failed to activate service 'org.freedesktop.login1': timed out
Jan 30 20:42:10 VM login[2380]: ROOT LOGIN  on '/dev/ttyS0'
Jan 30 20:42:12 VM org.a11y.atspi.Registry[2409]: SpiRegistry daemon is running with \
                well-known name - org.a11y.atspi.Registry
Jan 30 20:42:12 VM dbus[1009]: [system] Failed to activate service \
                'org.freedesktop.systemd1': timed out
Jan 30 20:42:12 VM systemd-logind[2021]: Failed to enable subscription: Failed to \
                activate service 'org.freedesktop.systemd1': timed out
Jan 30 20:42:12 VM systemd-logind[2021]: Failed to fully start up daemon: Connection \
                timed out
Jan 30 20:42:12 VM systemd[1]: systemd-logind.service: Main process exited, \
                code=exited, status=1/FAILURE
Jan 30 20:42:12 VM systemd[1]: Failed to start Login Service.
Jan 30 20:42:12 VM systemd[1]: systemd-logind.service: Unit entered failed state.
Jan 30 20:42:12 VM systemd[1]: systemd-logind.service: Failed with result \
                'exit-code'.
Jan 30 20:42:12 VM systemd[1]: systemd-logind.service: Service has no hold-off time, \
                scheduling restart.
Jan 30 20:42:12 VM systemd[1]: Stopped Login Service.
Jan 30 20:42:12 VM systemd[1]: Starting Login Service...
Jan 30 20:42:12 VM dbus[1009]: [system] Activating systemd to hand-off: service \
                name='org.freedesktop.login1' \
                unit='dbus-org.freedesktop.login1.service'
Jan 30 20:42:14 VM sudo[2454]:     root : TTY=ttyS0 ; PWD=/root ; USER=root ; \
                COMMAND=/usr/bin/vim /etc/passwd
Jan 30 20:42:14 VM sudo[2454]: pam_unix(sudo:session): session opened for user root \
                by root(uid=0)
Jan 30 20:42:17 VM sudo[2454]: pam_unix(sudo:session): session closed for user root
Jan 30 20:42:22 VM kernel: serial8250: too much work for irq4
Jan 30 20:42:22 VM kernel: serial8250: too much work for irq4
Jan 30 20:42:25 VM kernel: serial8250: too much work for irq4
Jan 30 20:42:25 VM kernel: serial8250: too much work for irq4
Jan 30 20:42:27 VM kernel: serial8250: too much work for irq4
Jan 30 20:42:27 VM kernel: serial8250: too much work for irq4
Jan 30 20:42:37 VM kernel: serial8250: too much work for irq4
Jan 30 20:42:37 VM kernel: serial8250: too much work for irq4
Jan 30 20:42:37 VM systemd-logind[2447]: Failed to enable subscription: Connection \
                timed out
Jan 30 20:42:37 VM systemd-logind[2447]: Failed to fully start up daemon: Connection \
                timed out
Jan 30 20:42:37 VM dbus[1009]: [system] Failed to activate service \
                'org.freedesktop.systemd1': timed out
Jan 30 20:42:37 VM systemd[1]: systemd-logind.service: Main process exited, \
                code=exited, status=1/FAILURE
Jan 30 20:42:37 VM systemd[1]: Failed to start Login Service.
Jan 30 20:42:37 VM systemd[1]: systemd-logind.service: Unit entered failed state.
Jan 30 20:42:37 VM systemd[1]: systemd-logind.service: Failed with result \
                'exit-code'.
Jan 30 20:42:37 VM systemd[1]: systemd-logind.service: Service has no hold-off time, \
                scheduling restart.
Jan 30 20:42:37 VM systemd[1]: Stopped Login Service.
Jan 30 20:42:37 VM systemd[1]: Starting Login Service...
Jan 30 20:42:37 VM dbus[1009]: [system] Failed to activate service \
                'org.freedesktop.login1': timed out
Jan 30 20:42:38 VM dbus[1009]: [system] Activating systemd to hand-off: service \
                name='org.freedesktop.Accounts' unit='accounts-daemon.service'
Jan 30 20:42:38 VM kernel: serial8250: too much work for irq4
Jan 30 20:42:38 VM kernel: serial8250: too much work for irq4
Jan 30 20:42:50 VM kernel: serial8250: too much work for irq4
Jan 30 20:42:50 VM kernel: serial8250: too much work for irq4
Jan 30 20:43:02 VM dbus[1009]: [system] Failed to activate service \
                'org.freedesktop.systemd1': timed out
Jan 30 20:43:02 VM systemd-logind[2464]: Failed to enable subscription: Failed to \
                activate service 'org.freedesktop.systemd1': timed out
Jan 30 20:43:02 VM systemd-logind[2464]: Failed to fully start up daemon: Connection \
                timed out
Jan 30 20:43:02 VM systemd[1]: systemd-logind.service: Main process exited, \
                code=exited, status=1/FAILURE
Jan 30 20:43:02 VM systemd[1]: Failed to start Login Service.
Jan 30 20:43:02 VM systemd[1]: systemd-logind.service: Unit entered failed state.
Jan 30 20:43:02 VM systemd[1]: systemd-logind.service: Failed with result \
                'exit-code'.
Jan 30 20:43:02 VM systemd[1]: systemd-logind.service: Service has no hold-off time, \
                scheduling restart.
Jan 30 20:43:02 VM systemd[1]: Stopped Login Service.
Jan 30 20:43:02 VM systemd[1]: Starting Login Service...
Jan 30 20:43:03 VM dbus[1009]: [system] Failed to activate service \
                'org.freedesktop.Accounts': timed out
Jan 30 20:43:03 VM lightdm[2476]: PAM unable to dlopen(pam_kwallet.so): \
/lib/security/pam_kwallet.so: cannot open shared object file: No such file or \
                directory
Jan 30 20:43:03 VM lightdm[2476]: PAM adding faulty module: pam_kwallet.so
Jan 30 20:43:03 VM lightdm[2476]: PAM unable to dlopen(pam_kwallet5.so): \
/lib/security/pam_kwallet5.so: cannot open shared object file: No such file or \
                directory
Jan 30 20:43:03 VM lightdm[2476]: PAM adding faulty module: pam_kwallet5.so
Jan 30 20:43:04 VM dbus[1009]: [system] Activating systemd to hand-off: service \
                name='org.freedesktop.login1' \
                unit='dbus-org.freedesktop.login1.service'
Jan 30 20:43:04 VM dbus[1009]: [system] Activating systemd to hand-off: service \
                name='org.freedesktop.Accounts' unit='accounts-daemon.service'
Jan 30 20:43:04 VM dbus[1009]: [system] Activating systemd to hand-off: service \
                name='org.bluez' unit='dbus-org.bluez.service'
Jan 30 20:43:05 VM dbus[1009]: [system] Activating systemd to hand-off: service \
                name='org.freedesktop.RealtimeKit1' unit='rtkit-daemon.service'
Jan 30 20:43:06 VM kernel: serial8250: too much work for irq4
Jan 30 20:43:06 VM kernel: serial8250: too much work for irq4
Jan 30 20:43:18 VM systemd[1]: Started Daily apt download activities.
Jan 30 20:43:18 VM systemd[1]: Starting Daily apt upgrade and clean activities...
Jan 30 20:43:27 VM dbus[1009]: [system] Failed to activate service \
                'org.freedesktop.systemd1': timed out
Jan 30 20:43:27 VM systemd-logind[2474]: Failed to enable subscription: Failed to \
                activate service 'org.freedesktop.systemd1': timed out
Jan 30 20:43:27 VM systemd-logind[2474]: Failed to fully start up daemon: Connection \
                timed out
Jan 30 20:43:27 VM systemd[1]: systemd-logind.service: Main process exited, \
                code=exited, status=1/FAILURE
Jan 30 20:43:27 VM systemd[1]: Failed to start Login Service.
Jan 30 20:43:27 VM systemd[1]: systemd-logind.service: Unit entered failed state.
Jan 30 20:43:27 VM systemd[1]: systemd-logind.service: Failed with result \
                'exit-code'.
Jan 30 20:43:27 VM systemd[1]: systemd-logind.service: Service has no hold-off time, \
                scheduling restart.
Jan 30 20:43:27 VM systemd[1]: Stopped Login Service.
Jan 30 20:43:27 VM systemd[1]: Starting Login Service...
Jan 30 20:43:29 VM dbus[1009]: [system] Failed to activate service \
                'org.freedesktop.login1': timed out
Jan 30 20:43:29 VM dbus[1009]: [system] Failed to activate service \
                'org.freedesktop.Accounts': timed out
Jan 30 20:43:29 VM dbus[1009]: [system] Activating systemd to hand-off: service \
                name='org.freedesktop.Accounts' unit='accounts-daemon.service'
Jan 30 20:43:29 VM dbus[1009]: [system] Activating systemd to hand-off: service \
                name='org.freedesktop.UPower' unit='upower.service'
Jan 30 20:43:29 VM dbus[1009]: [system] Failed to activate service 'org.bluez': timed \
                out
Jan 30 20:43:30 VM dbus[1009]: [system] Failed to activate service \
                'org.freedesktop.RealtimeKit1': timed out
Jan 30 20:43:30 VM dbus[1009]: [system] Activating systemd to hand-off: service \
                name='org.freedesktop.RealtimeKit1' unit='rtkit-daemon.service'
Jan 30 20:43:44 VM kernel: serial8250: too much work for irq4
Jan 30 20:43:44 VM kernel: serial8250: too much work for irq4
Jan 30 20:43:45 VM kernel: serial8250: too much work for irq4
Jan 30 20:43:45 VM kernel: serial8250: too much work for irq4
Jan 30 20:43:52 VM dbus[1009]: [system] Failed to activate service \
                'org.freedesktop.systemd1': timed out
Jan 30 20:43:52 VM systemd-logind[2598]: Failed to enable subscription: Failed to \
                activate service 'org.freedesktop.systemd1': timed out
Jan 30 20:43:52 VM systemd-logind[2598]: Failed to fully start up daemon: Connection \
                timed out
Jan 30 20:43:52 VM systemd[1]: systemd-logind.service: Main process exited, \
                code=exited, status=1/FAILURE
Jan 30 20:43:52 VM systemd[1]: Failed to start Login Service.
Jan 30 20:43:52 VM systemd[1]: systemd-logind.service: Unit entered failed state.
Jan 30 20:43:52 VM systemd[1]: systemd-logind.service: Failed with result \
                'exit-code'.
Jan 30 20:43:52 VM systemd[1]: systemd-logind.service: Service has no hold-off time, \
                scheduling restart.
Jan 30 20:43:52 VM systemd[1]: Stopped Login Service.
Jan 30 20:43:52 VM systemd[1]: Starting Login Service...
Jan 30 20:43:54 VM dbus[1009]: [system] Failed to activate service \
                'org.freedesktop.Accounts': timed out
Jan 30 20:43:54 VM dbus[1009]: [system] Failed to activate service \
                'org.freedesktop.UPower': timed out
Jan 30 20:43:54 VM dbus[1009]: [system] Activating systemd to hand-off: service \
                name='org.freedesktop.ColorManager' unit='colord.service'
Jan 30 20:43:54 VM dbus[1009]: [system] Activating systemd to hand-off: service \
                name='org.freedesktop.Accounts' unit='accounts-daemon.service'
Jan 30 20:43:55 VM dbus[1009]: [system] Failed to activate service \
                'org.freedesktop.RealtimeKit1': timed out
Jan 30 20:43:55 VM dbus[1009]: [system] Activating systemd to hand-off: service \
                name='org.freedesktop.RealtimeKit1' unit='rtkit-daemon.service'
Jan 30 20:44:17 VM kernel: serial8250: too much work for irq4
Jan 30 20:44:17 VM systemd-logind[2617]: Failed to enable subscription: Connection \
                timed out
Jan 30 20:44:17 VM systemd-logind[2617]: Failed to fully start up daemon: Connection \
                timed out
Jan 30 20:44:18 VM dbus[1009]: [system] Failed to activate service \
                'org.freedesktop.systemd1': timed out
Jan 30 20:44:18 VM kernel: serial8250: too much work for irq4
Jan 30 20:44:18 VM systemd[1]: systemd-logind.service: Main process exited, \
                code=exited, status=1/FAILURE
Jan 30 20:44:18 VM systemd[1]: Failed to start Login Service.
Jan 30 20:44:18 VM systemd[1]: systemd-logind.service: Unit entered failed state.
Jan 30 20:44:18 VM systemd[1]: systemd-logind.service: Failed with result \
                'exit-code'.
Jan 30 20:44:18 VM systemd[1]: systemd-logind.service: Service has no hold-off time, \
                scheduling restart.
Jan 30 20:44:18 VM systemd[1]: Stopped Login Service.
Jan 30 20:44:18 VM systemd[1]: Starting Login Service...
Jan 30 20:44:19 VM dbus[1009]: [system] Failed to activate service \
                'org.freedesktop.ColorManager': timed out
Jan 30 20:44:19 VM dbus[1009]: [system] Failed to activate service \
                'org.freedesktop.Accounts': timed out
Jan 30 20:44:19 VM dbus[1009]: [system] Activating systemd to hand-off: service \
                name='org.freedesktop.Accounts' unit='accounts-daemon.service'
Jan 30 20:44:20 VM dbus[1009]: [system] Failed to activate service \
                'org.freedesktop.RealtimeKit1': timed out
Jan 30 20:44:20 VM dbus[1009]: [system] Activating systemd to hand-off: service \
                name='org.freedesktop.RealtimeKit1' unit='rtkit-daemon.service'
Jan 30 20:44:43 VM dbus[1009]: [system] Failed to activate service \
                'org.freedesktop.systemd1': timed out
Jan 30 20:44:43 VM systemd-logind[2650]: Failed to enable subscription: Failed to \
                activate service 'org.freedesktop.systemd1': timed out
Jan 30 20:44:43 VM systemd-logind[2650]: Failed to fully start up daemon: Connection \
                timed out
Jan 30 20:44:43 VM systemd[1]: systemd-logind.service: Main process exited, \
                code=exited, status=1/FAILURE
Jan 30 20:44:43 VM systemd[1]: Failed to start Login Service.
Jan 30 20:44:43 VM systemd[1]: systemd-logind.service: Unit entered failed state.
Jan 30 20:44:43 VM systemd[1]: systemd-logind.service: Failed with result \
                'exit-code'.
Jan 30 20:44:43 VM systemd[1]: systemd-logind.service: Service has no hold-off time, \
                scheduling restart.
Jan 30 20:44:43 VM systemd[1]: Stopped Login Service.
Jan 30 20:44:43 VM systemd[1]: Starting Login Service...
Jan 30 20:44:44 VM dbus[1009]: [system] Failed to activate service \
                'org.freedesktop.Accounts': timed out
Jan 30 20:44:44 VM dbus[1009]: [system] Activating systemd to hand-off: service \
                name='org.freedesktop.Accounts' unit='accounts-daemon.service'
Jan 30 20:44:45 VM dbus[1009]: [system] Failed to activate service \
                'org.freedesktop.RealtimeKit1': timed out
Jan 30 20:44:45 VM dbus[1009]: [system] Activating systemd to hand-off: service \
                name='org.freedesktop.RealtimeKit1' unit='rtkit-daemon.service'
Jan 30 20:44:45 VM anacron[1005]: Job `cron.daily' started
Jan 30 20:44:45 VM anacron[2714]: Updated timestamp for job `cron.daily' to \
                2019-01-30
Jan 30 20:44:51 VM cracklib[2740]: no dictionary update necessary.
Jan 30 20:45:03 VM kernel: serial8250: too much work for irq4
Jan 30 20:45:03 VM kernel: serial8250: too much work for irq4
Jan 30 20:45:04 VM kernel: serial8250: too much work for irq4
Jan 30 20:45:04 VM kernel: serial8250: too much work for irq4
Jan 30 20:45:06 VM systemd[1]: Stopping CUPS Scheduler...
Jan 30 20:45:07 VM systemd[1]: Stopped CUPS Scheduler.
Jan 30 20:45:07 VM systemd[1]: Started CUPS Scheduler.
Jan 30 20:45:08 VM dbus[1009]: [system] Failed to activate service \
                'org.freedesktop.systemd1': timed out
Jan 30 20:45:08 VM systemd-logind[2698]: Failed to enable subscription: Failed to \
                activate service 'org.freedesktop.systemd1': timed out
Jan 30 20:45:08 VM systemd-logind[2698]: Failed to fully start up daemon: Connection \
                timed out
Jan 30 20:45:08 VM systemd[1]: systemd-logind.service: Main process exited, \
                code=exited, status=1/FAILURE
Jan 30 20:45:08 VM systemd[1]: Failed to start Login Service.
Jan 30 20:45:08 VM systemd[1]: systemd-logind.service: Unit entered failed state.
Jan 30 20:45:08 VM systemd[1]: systemd-logind.service: Failed with result \
                'exit-code'.
Jan 30 20:45:08 VM systemd[1]: systemd-logind.service: Service has no hold-off time, \
                scheduling restart.
Jan 30 20:45:08 VM systemd[1]: Stopped Login Service.
Jan 30 20:45:08 VM systemd[1]: Starting Login Service...
Jan 30 20:45:09 VM dbus[1009]: [system] Failed to activate service \
                'org.freedesktop.Accounts': timed out
Jan 30 20:45:09 VM dbus[1009]: [system] Activating systemd to hand-off: service \
                name='org.freedesktop.Accounts' unit='accounts-daemon.service'
Jan 30 20:45:10 VM dbus[1009]: [system] Failed to activate service \
                'org.freedesktop.RealtimeKit1': timed out
Jan 30 20:45:10 VM dbus[1009]: [system] Activating systemd to hand-off: service \
                name='org.freedesktop.RealtimeKit1' unit='rtkit-daemon.service'
Jan 30 20:45:24 VM kernel: serial8250: too much work for irq4
Jan 30 20:45:24 VM kernel: serial8250: too much work for irq4
Jan 30 20:45:33 VM dbus[1009]: [system] Failed to activate service \
                'org.freedesktop.systemd1': timed out
Jan 30 20:45:33 VM systemd-logind[2785]: Failed to enable subscription: Failed to \
                activate service 'org.freedesktop.systemd1': timed out
Jan 30 20:45:33 VM systemd-logind[2785]: Failed to fully start up daemon: Connection \
                timed out
Jan 30 20:45:33 VM systemd[1]: systemd-logind.service: Main process exited, \
                code=exited, status=1/FAILURE
Jan 30 20:45:33 VM systemd[1]: Failed to start Login Service.
Jan 30 20:45:33 VM systemd[1]: systemd-logind.service: Unit entered failed state.
Jan 30 20:45:33 VM systemd[1]: systemd-logind.service: Failed with result \
                'exit-code'.
Jan 30 20:45:33 VM systemd[1]: systemd-logind.service: Service has no hold-off time, \
                scheduling restart.
Jan 30 20:45:33 VM systemd[1]: Stopped Login Service.
Jan 30 20:45:33 VM systemd[1]: Starting Login Service...
Jan 30 20:45:34 VM dbus[1009]: [system] Failed to activate service \
                'org.freedesktop.Accounts': timed out
Jan 30 20:45:35 VM dbus[1009]: [system] Failed to activate service \
                'org.freedesktop.RealtimeKit1': timed out
Jan 30 20:45:35 VM dbus[1009]: [system] Activating systemd to hand-off: service \
                name='org.freedesktop.RealtimeKit1' unit='rtkit-daemon.service'
Jan 30 20:45:35 VM dbus[1009]: [system] Activating systemd to hand-off: service \
                name='org.freedesktop.Accounts' unit='accounts-daemon.service'
Jan 30 20:45:35 VM kernel: serial8250: too much work for irq4
Jan 30 20:45:35 VM kernel: serial8250: too much work for irq4
Jan 30 20:45:37 VM kernel: serial8250: too much work for irq4
Jan 30 20:45:37 VM kernel: serial8250: too much work for irq4
Jan 30 20:45:48 VM kernel: serial8250: too much work for irq4
Jan 30 20:45:48 VM kernel: serial8250: too much work for irq4
Jan 30 20:45:50 VM kernel: serial8250: too much work for irq4
Jan 30 20:45:50 VM kernel: serial8250: too much work for irq4
Jan 30 20:45:58 VM dbus[1009]: [system] Failed to activate service \
                'org.freedesktop.systemd1': timed out
Jan 30 20:45:58 VM systemd-logind[2808]: Failed to enable subscription: Failed to \
                activate service 'org.freedesktop.systemd1': timed out
Jan 30 20:45:58 VM systemd-logind[2808]: Failed to fully start up daemon: Connection \
                timed out
Jan 30 20:45:58 VM systemd[1]: systemd-logind.service: Main process exited, \
                code=exited, status=1/FAILURE
Jan 30 20:45:58 VM systemd[1]: Failed to start Login Service.
Jan 30 20:45:58 VM systemd[1]: systemd-logind.service: Unit entered failed state.
Jan 30 20:45:58 VM systemd[1]: systemd-logind.service: Failed with result \
                'exit-code'.
Jan 30 20:45:58 VM systemd[1]: systemd-logind.service: Service has no hold-off time, \
                scheduling restart.
Jan 30 20:45:58 VM systemd[1]: Stopped Login Service.
Jan 30 20:45:58 VM systemd[1]: Starting Login Service...
Jan 30 20:46:00 VM dbus[1009]: [system] Failed to activate service \
                'org.freedesktop.RealtimeKit1': timed out
Jan 30 20:46:00 VM dbus[1009]: [system] Activating systemd to hand-off: service \
                name='org.freedesktop.RealtimeKit1' unit='rtkit-daemon.service'
Jan 30 20:46:00 VM dbus[1009]: [system] Failed to activate service \
                'org.freedesktop.Accounts': timed out
Jan 30 20:46:00 VM dbus[1009]: [system] Activating systemd to hand-off: service \
                name='org.freedesktop.Accounts' unit='accounts-daemon.service'
Jan 30 20:46:11 VM systemd[1]: Stopped Daily apt upgrade and clean activities.
Jan 30 20:46:11 VM systemd[1]: Stopped Daily apt download activities.
Jan 30 20:46:12 VM kernel: serial8250: too much work for irq4
Jan 30 20:46:12 VM kernel: serial8250: too much work for irq4
Jan 30 20:46:14 VM kernel: serial8250: too much work for irq4
Jan 30 20:46:14 VM kernel: serial8250: too much work for irq4
Jan 30 20:46:14 VM systemd[1]: Reloading.
Jan 30 20:46:15 VM systemd[1]: Failed to register Manager vtable: File exists
Jan 30 20:46:15 VM systemd[1]: Failed to set up API bus: File exists
Jan 30 20:46:15 VM systemd[1]: Started CUPS Scheduler.
Jan 30 20:46:15 VM systemd[1]: Started ACPI event daemon.
Jan 30 20:46:18 VM kernel: serial8250: too much work for irq4
Jan 30 20:46:18 VM kernel: serial8250: too much work for irq4
Jan 30 20:46:23 VM dbus[1009]: [system] Failed to activate service \
                'org.freedesktop.systemd1': timed out
Jan 30 20:46:23 VM systemd-logind[2843]: Failed to enable subscription: Failed to \
                activate service 'org.freedesktop.systemd1': timed out
Jan 30 20:46:23 VM systemd-logind[2843]: Failed to fully start up daemon: Connection \
                timed out
Jan 30 20:46:23 VM systemd[1]: systemd-logind.service: Main process exited, \
                code=exited, status=1/FAILURE
Jan 30 20:46:23 VM systemd[1]: Failed to start Login Service.
Jan 30 20:46:23 VM systemd[1]: systemd-logind.service: Unit entered failed state.
Jan 30 20:46:23 VM systemd[1]: systemd-logind.service: Failed with result \
                'exit-code'.
Jan 30 20:46:23 VM systemd[1]: systemd-logind.service: Service has no hold-off time, \
                scheduling restart.
Jan 30 20:46:23 VM systemd[1]: Stopped Login Service.
Jan 30 20:46:23 VM systemd[1]: Starting Login Service...
Jan 30 20:46:25 VM dbus[1009]: [system] Failed to activate service \
                'org.freedesktop.RealtimeKit1': timed out
Jan 30 20:46:25 VM dbus[1009]: [system] Activating systemd to hand-off: service \
                name='org.freedesktop.RealtimeKit1' unit='rtkit-daemon.service'
Jan 30 20:46:25 VM kernel: serial8250: too much work for irq4
Jan 30 20:46:25 VM dbus[1009]: [system] Failed to activate service \
                'org.freedesktop.Accounts': timed out
Jan 30 20:46:25 VM kernel: serial8250: too much work for irq4
Jan 30 20:46:25 VM dbus[1009]: [system] Activating systemd to hand-off: service \
                name='org.freedesktop.Accounts' unit='accounts-daemon.service'
Jan 30 20:46:39 VM systemd[1]: Reloading.
Jan 30 20:46:39 VM systemd[1]: Failed to register Manager vtable: File exists
Jan 30 20:46:39 VM systemd[1]: Failed to set up API bus: File exists
Jan 30 20:46:39 VM systemd[1]: Started CUPS Scheduler.
Jan 30 20:46:39 VM systemd[1]: Started ACPI event daemon.
Jan 30 20:46:39 VM systemd[1]: Started Daily apt upgrade and clean activities.
Jan 30 20:46:39 VM systemd[1]: Started Daily apt download activities.
Jan 30 20:46:45 VM sudo[3783]:     root : TTY=ttyS0 ; PWD=/root ; USER=root ; \
                COMMAND=/usr/bin/vim /etc/passwd
Jan 30 20:46:45 VM sudo[3783]: pam_unix(sudo:session): session opened for user root \
                by root(uid=0)
Jan 30 20:46:48 VM dbus[1009]: [system] Failed to activate service \
                'org.freedesktop.systemd1': timed out
Jan 30 20:46:48 VM systemd-logind[3133]: Failed to enable subscription: Failed to \
                activate service 'org.freedesktop.systemd1': timed out
Jan 30 20:46:48 VM systemd-logind[3133]: Failed to fully start up daemon: Connection \
                timed out
Jan 30 20:46:48 VM systemd[1]: systemd-logind.service: Main process exited, \
                code=exited, status=1/FAILURE
Jan 30 20:46:48 VM systemd[1]: Failed to start Login Service.
Jan 30 20:46:48 VM systemd[1]: systemd-logind.service: Unit entered failed state.
Jan 30 20:46:48 VM systemd[1]: systemd-logind.service: Failed with result \
                'exit-code'.
Jan 30 20:46:48 VM systemd[1]: systemd-logind.service: Service has no hold-off time, \
                scheduling restart.
Jan 30 20:46:48 VM systemd[1]: Stopped Login Service.
Jan 30 20:46:48 VM systemd[1]: Starting Login Service...
Jan 30 20:46:49 VM sudo[3783]: pam_unix(sudo:session): session closed for user root
Jan 30 20:46:50 VM dbus[1009]: [system] Failed to activate service \
                'org.freedesktop.RealtimeKit1': timed out
Jan 30 20:46:50 VM dbus[1009]: [system] Activating systemd to hand-off: service \
                name='org.freedesktop.RealtimeKit1' unit='rtkit-daemon.service'
Jan 30 20:46:50 VM dbus[1009]: [system] Failed to activate service \
                'org.freedesktop.Accounts': timed out
Jan 30 20:46:50 VM dbus[1009]: [system] Activating systemd to hand-off: service \
                name='org.freedesktop.Accounts' unit='accounts-daemon.service'
Jan 30 20:47:00 VM dbus[1009]: [system] Reloaded configuration
Jan 30 20:47:00 VM dbus[1009]: [system] Reloaded configuration
Jan 30 20:47:01 VM dbus[1009]: [system] Reloaded configuration
Jan 30 20:47:01 VM dbus[1009]: [system] Reloaded configuration
Jan 30 20:47:01 VM dbus[1009]: [system] Reloaded configuration
Jan 30 20:47:01 VM dbus[1009]: [system] Reloaded configuration
Jan 30 20:47:04 VM dbus[1009]: [system] Reloaded configuration
Jan 30 20:47:04 VM dbus[1009]: [system] Reloaded configuration
Jan 30 20:47:05 VM dbus[1009]: [system] Reloaded configuration
Jan 30 20:47:08 VM kernel: serial8250: too much work for irq4
Jan 30 20:47:08 VM kernel: serial8250: too much work for irq4
Jan 30 20:47:09 VM dbus[1009]: [system] Reloaded configuration
Jan 30 20:47:09 VM dbus[1009]: [system] Reloaded configuration
Jan 30 20:47:09 VM dbus[1009]: [system] Reloaded configuration
Jan 30 20:47:10 VM dbus[1009]: [system] Reloaded configuration
Jan 30 20:47:10 VM dbus[1009]: [system] Reloaded configuration
Jan 30 20:47:10 VM dbus[1009]: [system] Reloaded configuration
Jan 30 20:47:10 VM dbus[1009]: [system] Reloaded configuration
Jan 30 20:47:10 VM dbus[1009]: [system] Reloaded configuration
Jan 30 20:47:11 VM systemd[1]: Reloading.
Jan 30 20:47:11 VM systemd[1]: Failed to register Manager vtable: File exists
Jan 30 20:47:11 VM systemd[1]: Failed to set up API bus: File exists
Jan 30 20:47:11 VM systemd[1]: Started CUPS Scheduler.
Jan 30 20:47:11 VM systemd[1]: Started ACPI event daemon.
Jan 30 20:47:11 VM systemd[1]: Reloading.
Jan 30 20:47:11 VM systemd[1]: Failed to register Manager vtable: File exists
Jan 30 20:47:11 VM systemd[1]: Failed to set up API bus: File exists
Jan 30 20:47:11 VM systemd[1]: Started CUPS Scheduler.
Jan 30 20:47:11 VM systemd[1]: Started ACPI event daemon.
Jan 30 20:47:11 VM kernel: serial8250: too much work for irq4
Jan 30 20:47:11 VM kernel: serial8250: too much work for irq4
Jan 30 20:47:11 VM systemd[1]: Reloading.
Jan 30 20:47:11 VM systemd[1]: Failed to register Manager vtable: File exists
Jan 30 20:47:11 VM systemd[1]: Failed to set up API bus: File exists
Jan 30 20:47:11 VM systemd[1]: Started CUPS Scheduler.
Jan 30 20:47:11 VM systemd[1]: Started ACPI event daemon.
Jan 30 20:47:11 VM systemd[1]: Reexecuting.
Jan 30 20:47:12 VM kernel: systemd: 21 output lines suppressed due to ratelimiting
Jan 30 20:47:12 VM systemd[1]: systemd 229 running in system mode. (+PAM +AUDIT \
+SELINUX +IMA +APPARMOR +SMACK +SYSVINIT +UTMP +LIBCRYPTSETUP +GCRYPT +GNUTLS +ACL \
                +XZ -LZ4 +SECCOMP +BLKID +ELFUTILS +KMOD -IDN)
Jan 30 20:47:12 VM systemd[1]: Detected virtualization qemu.
Jan 30 20:47:12 VM systemd[1]: Detected architecture x86-64.
Jan 30 20:47:12 VM dbus[1009]: [system] Successfully activated service \
                'org.freedesktop.systemd1'
Jan 30 20:47:12 VM systemd-logind[3919]: New seat seat0.
Jan 30 20:47:12 VM systemd-logind[3919]: Watching system buttons on /dev/input/event0 \
                (Power Button)
Jan 30 20:47:12 VM systemd[1]: Started Login Service.
Jan 30 20:47:12 VM systemd[1]: Starting Accounts Service...
Jan 30 20:47:12 VM systemd[1]: Starting RealtimeKit Scheduling Policy Service...
Jan 30 20:47:12 VM systemd[1]: Started ACPI event daemon.
Jan 30 20:47:12 VM systemd[1]: Started CUPS Scheduler.
Jan 30 20:47:12 VM dbus[1009]: [system] Activating via systemd: service \
                name='org.freedesktop.PolicyKit1' unit='polkitd.service'
Jan 30 20:47:12 VM systemd[1]: Starting Authenticate and Authorize Users to Run \
                Privileged Tasks...
Jan 30 20:47:12 VM systemd[1]: Stopping Network Time Synchronization...
Jan 30 20:47:12 VM systemd[1]: Stopped Network Time Synchronization.
Jan 30 20:47:12 VM systemd[1]: Starting Network Time Synchronization...
Jan 30 20:47:12 VM systemd[1]: Started Network Time Synchronization.
Jan 30 20:47:12 VM dbus[1009]: [system] Successfully activated service \
                'org.freedesktop.RealtimeKit1'
Jan 30 20:47:12 VM systemd[1]: Started RealtimeKit Scheduling Policy Service.
Jan 30 20:47:12 VM rtkit-daemon[5461]: Successfully called chroot.
Jan 30 20:47:12 VM rtkit-daemon[5461]: Successfully dropped privileges.
Jan 30 20:47:12 VM rtkit-daemon[5461]: Successfully limited resources.
Jan 30 20:47:12 VM rtkit-daemon[5461]: Running.
Jan 30 20:47:12 VM rtkit-daemon[5461]: Canary thread running.
Jan 30 20:47:12 VM rtkit-daemon[5461]: Watchdog thread running.
Jan 30 20:47:12 VM systemd[1]: Started Trigger resolvconf update for networkd DNS.
Jan 30 20:47:12 VM systemd-timesyncd[5471]: Synchronized to time server \
                139.59.50.38:123 (in.pool.ntp.org).
Jan 30 20:47:12 VM polkitd[5465]: started daemon version 0.105 using authority \
                implementation `local' version `0.105'
Jan 30 20:47:12 VM dbus[1009]: [system] Successfully activated service \
                'org.freedesktop.PolicyKit1'
Jan 30 20:47:12 VM systemd[1]: Started Authenticate and Authorize Users to Run \
                Privileged Tasks.
Jan 30 20:47:12 VM accounts-daemon[5460]: started daemon version 0.6.40
Jan 30 20:47:12 VM dbus[1009]: [system] Successfully activated service \
                'org.freedesktop.Accounts'
Jan 30 20:47:12 VM systemd[1]: Started Accounts Service.
Jan 30 20:47:12 VM kernel: serial8250: too much work for irq4
Jan 30 20:47:12 VM kernel: serial8250: too much work for irq4
Jan 30 20:47:13 VM dbus[1009]: [system] Activating via systemd: service \
                name='org.bluez' unit='dbus-org.bluez.service'
Jan 30 20:47:13 VM pulseaudio[5540]: [pulseaudio] pid.c: Daemon already running.
Jan 30 20:47:13 VM kernel: serial8250: too much work for irq4
Jan 30 20:47:13 VM kernel: serial8250: too much work for irq4
Jan 30 20:47:14 VM kernel: serial8250: too much work for irq4
Jan 30 20:47:14 VM kernel: serial8250: too much work for irq4
Jan 30 20:47:16 VM systemd[1]: Reloading.
Jan 30 20:47:16 VM systemd[1]: Started ACPI event daemon.
Jan 30 20:47:16 VM systemd[1]: Started CUPS Scheduler.
Jan 30 20:47:17 VM systemd[1]: Reloading.
Jan 30 20:47:18 VM systemd[1]: Started ACPI event daemon.
Jan 30 20:47:18 VM systemd[1]: Started CUPS Scheduler.
Jan 30 20:47:20 VM kernel: serial8250: too much work for irq4
Jan 30 20:47:20 VM kernel: serial8250: too much work for irq4
Jan 30 20:47:21 VM kernel: serial8250: too much work for irq4
Jan 30 20:47:21 VM kernel: serial8250: too much work for irq4
Jan 30 20:47:24 VM anacron[1005]: Job `cron.daily' terminated
Jan 30 20:47:35 VM kernel: serial8250: too much work for irq4
Jan 30 20:47:35 VM kernel: serial8250: too much work for irq4
Jan 30 20:47:37 VM kernel: serial8250: too much work for irq4
Jan 30 20:47:37 VM kernel: serial8250: too much work for irq4
Jan 30 20:47:38 VM pulseaudio[2548]: [pulseaudio] bluez5-util.c: GetManagedObjects() \
failed: org.freedesktop.DBus.Error.NoReply: Did not receive a reply. Possible causes \
include: the remote application did not send a reply, the message bus security policy \
                blocked the reply, the reply timeout expired, or the network \
                connection was broken.
Jan 30 20:47:38 VM dbus[1009]: [system] Failed to activate service 'org.bluez': timed \
                out
Jan 30 20:47:39 VM kernel: serial8250: too much work for irq4
Jan 30 20:47:39 VM kernel: serial8250: too much work for irq4
Jan 30 20:47:42 VM systemd[1]: Reloading.
Jan 30 20:47:42 VM systemd[1]: Started ACPI event daemon.
Jan 30 20:47:42 VM systemd[1]: Started CUPS Scheduler.
Jan 30 20:47:42 VM dbus[1009]: [system] Reloaded configuration
Jan 30 20:47:42 VM dbus[1009]: [system] Reloaded configuration
Jan 30 20:47:42 VM dbus[1009]: [system] Reloaded configuration
Jan 30 20:47:42 VM dbus[1009]: [system] Reloaded configuration
Jan 30 20:47:42 VM dbus[1009]: [system] Reloaded configuration
Jan 30 20:47:48 VM systemd[1]: Reloading.
Jan 30 20:47:49 VM systemd[1]: Started ACPI event daemon.
Jan 30 20:47:49 VM systemd[1]: Started CUPS Scheduler.
Jan 30 20:47:49 VM systemd[1]: Stopping Unattended Upgrades Shutdown...
Jan 30 20:48:27 VM kernel: serial8250: too much work for irq4
Jan 30 20:48:27 VM kernel: serial8250: too much work for irq4
Jan 30 20:48:28 VM kernel: serial8250: too much work for irq4
Jan 30 20:48:28 VM kernel: serial8250: too much work for irq4
Jan 30 20:48:43 VM kernel: serial8250: too much work for irq4
Jan 30 20:48:43 VM kernel: serial8250: too much work for irq4
Jan 30 20:49:45 VM anacron[1005]: Job `cron.weekly' started
Jan 30 20:49:45 VM anacron[7237]: Updated timestamp for job `cron.weekly' to \
                2019-01-30
Jan 30 20:49:45 VM kernel: serial8250: too much work for irq4
Jan 30 20:49:45 VM kernel: serial8250: too much work for irq4
Jan 30 20:49:50 VM anacron[1005]: Job `cron.weekly' terminated (mailing output)
Jan 30 20:49:50 VM anacron[1005]: Can't find sendmail at /usr/sbin/sendmail, not \
                mailing output
Jan 30 20:49:50 VM anacron[1005]: anacron: Can't find sendmail at /usr/sbin/sendmail, \
                not mailing output
Jan 30 20:50:03 VM systemd-timesyncd[5471]: Timed out waiting for reply from \
                139.59.50.38:123 (in.pool.ntp.org).
Jan 30 20:50:03 VM systemd-timesyncd[5471]: Synchronized to time server \
                183.177.72.201:123 (asia.pool.ntp.org).
Jan 30 20:50:24 VM kernel: serial8250: too much work for irq4
Jan 30 20:50:24 VM kernel: serial8250: too much work for irq4
Jan 30 20:50:41 VM kernel: serial8250: too much work for irq4
Jan 30 20:50:41 VM kernel: serial8250: too much work for irq4
Jan 30 20:50:42 VM kernel: serial8250: too much work for irq4
Jan 30 20:50:42 VM kernel: serial8250: too much work for irq4
Jan 30 20:51:33 VM kernel: serial8250: too much work for irq4
Jan 30 20:51:33 VM kernel: serial8250: too much work for irq4
Jan 30 20:52:15 VM kernel: serial8250: too much work for irq4
Jan 30 20:52:15 VM kernel: serial8250: too much work for irq4
Jan 30 20:52:16 VM kernel: serial8250: too much work for irq4
Jan 30 20:52:16 VM kernel: serial8250: too much work for irq4
Jan 30 20:52:36 VM kernel: serial8250: too much work for irq4
Jan 30 20:52:36 VM kernel: serial8250: too much work for irq4
Jan 30 20:52:43 VM kernel: serial8250: too much work for irq4
Jan 30 20:52:43 VM kernel: serial8250: too much work for irq4
Jan 30 20:52:49 VM kernel: serial8250: too much work for irq4
Jan 30 20:52:49 VM kernel: serial8250: too much work for irq4
Jan 30 20:52:53 VM systemd[1]: Starting Cleanup of Temporary Directories...
Jan 30 20:52:53 VM systemd-tmpfiles[8049]: [/usr/lib/tmpfiles.d/var.conf:14] \
                Duplicate line for path "/var/log", ignoring.
Jan 30 20:52:53 VM systemd[1]: Started Cleanup of Temporary Directories.
Jan 30 20:53:46 VM kernel: serial8250: too much work for irq4
Jan 30 20:53:46 VM kernel: serial8250: too much work for irq4
Jan 30 20:53:47 VM kernel: serial8250: too much work for irq4
Jan 30 20:53:47 VM kernel: serial8250: too much work for irq4
Jan 30 20:54:28 VM kernel: serial8250: too much work for irq4
Jan 30 20:54:28 VM kernel: serial8250: too much work for irq4
Jan 30 20:54:29 VM kernel: serial8250: too much work for irq4
Jan 30 20:54:29 VM kernel: serial8250: too much work for irq4
Jan 30 20:54:35 VM systemd[1]: ModemManager.service: Start operation timed out. \
                Terminating.
Jan 30 20:54:35 VM ModemManager[979]: &lt;info&gt;  Caught signal, shutting down...
Jan 30 20:54:35 VM systemd[1]: avahi-daemon.service: Start operation timed out. \
                Terminating.
Jan 30 20:54:35 VM avahi-daemon[980]: Got SIGTERM, quitting.
Jan 30 20:54:35 VM avahi-daemon[980]: Leaving mDNS multicast group on interface \
                ens6.IPv6 with address fd17:5821:95c0:0:5054:ff:fe11:603.
Jan 30 20:54:35 VM avahi-daemon[980]: Leaving mDNS multicast group on interface \
                ens6.IPv4 with address 192.168.240.210.
Jan 30 20:54:35 VM avahi-daemon[980]: Leaving mDNS multicast group on interface \
                ens5.IPv6 with address fe80::5054:ff:fecc:2.
Jan 30 20:54:35 VM avahi-daemon[980]: Leaving mDNS multicast group on interface \
                ens5.IPv4 with address 192.168.123.12.
Jan 30 20:54:35 VM avahi-daemon[980]: avahi-daemon 0.6.32-rc exiting.
Jan 30 20:54:35 VM systemd[1]: Failed to start Avahi mDNS/DNS-SD Stack.
Jan 30 20:54:35 VM systemd[1]: avahi-daemon.service: Unit entered failed state.
Jan 30 20:54:35 VM systemd[1]: avahi-daemon.service: Failed with result 'timeout'.
Jan 30 20:54:35 VM ModemManager[979]: &lt;info&gt;  ModemManager is shut down
Jan 30 20:54:35 VM systemd[1]: Started Make remote CUPS printers available locally.
Jan 30 20:54:35 VM systemd[1]: Failed to start Modem Manager.
Jan 30 20:54:35 VM systemd[1]: ModemManager.service: Unit entered failed state.
Jan 30 20:54:35 VM systemd[1]: ModemManager.service: Failed with result 'timeout'.
Jan 30 20:54:35 VM dbus[1009]: [system] Activating via systemd: service \
                name='org.freedesktop.Avahi' \
                unit='dbus-org.freedesktop.Avahi.service'
Jan 30 20:54:35 VM systemd[1]: Starting Avahi mDNS/DNS-SD Stack...
Jan 30 20:54:35 VM avahi-daemon[8089]: Process 980 died: No such process; trying to \
                remove PID file. (/var/run/avahi-daemon//pid)
Jan 30 20:54:35 VM avahi-daemon[8089]: Found user 'avahi' (UID 111) and group 'avahi' \
                (GID 120).
Jan 30 20:54:35 VM avahi-daemon[8089]: Successfully dropped root privileges.
Jan 30 20:54:35 VM avahi-daemon[8089]: avahi-daemon 0.6.32-rc starting up.
Jan 30 20:54:35 VM dbus[1009]: [system] Successfully activated service \
                'org.freedesktop.Avahi'
Jan 30 20:54:35 VM systemd[1]: Started Avahi mDNS/DNS-SD Stack.
Jan 30 20:54:35 VM avahi-daemon[8089]: Successfully called chroot().
Jan 30 20:54:35 VM avahi-daemon[8089]: Successfully dropped remaining capabilities.
Jan 30 20:54:35 VM avahi-daemon[8089]: No service file found in /etc/avahi/services.
Jan 30 20:54:35 VM avahi-daemon[8089]: Joining mDNS multicast group on interface \
                ens6.IPv6 with address fd17:5821:95c0:0:5054:ff:fe11:603.
Jan 30 20:54:35 VM avahi-daemon[8089]: New relevant interface ens6.IPv6 for mDNS.
Jan 30 20:54:35 VM avahi-daemon[8089]: Joining mDNS multicast group on interface \
                ens6.IPv4 with address 192.168.240.210.
Jan 30 20:54:35 VM avahi-daemon[8089]: New relevant interface ens6.IPv4 for mDNS.
Jan 30 20:54:35 VM avahi-daemon[8089]: Joining mDNS multicast group on interface \
                ens5.IPv6 with address fe80::5054:ff:fecc:2.
Jan 30 20:54:35 VM avahi-daemon[8089]: New relevant interface ens5.IPv6 for mDNS.
Jan 30 20:54:35 VM avahi-daemon[8089]: Joining mDNS multicast group on interface \
                ens5.IPv4 with address 192.168.123.12.
Jan 30 20:54:35 VM avahi-daemon[8089]: New relevant interface ens5.IPv4 for mDNS.
Jan 30 20:54:35 VM avahi-daemon[8089]: Network interface enumeration completed.
Jan 30 20:54:35 VM avahi-daemon[8089]: Registering new address record for \
                fd17:5821:95c0:0:5054:ff:fe11:603 on ens6.*.
Jan 30 20:54:35 VM avahi-daemon[8089]: Registering new address record for \
                fd17:5821:95c0::1ce on ens6.*.
Jan 30 20:54:35 VM avahi-daemon[8089]: Registering new address record for \
                192.168.240.210 on ens6.IPv4.
Jan 30 20:54:35 VM avahi-daemon[8089]: Registering new address record for \
                fe80::5054:ff:fecc:2 on ens5.*.
Jan 30 20:54:35 VM avahi-daemon[8089]: Registering new address record for \
                192.168.123.12 on ens5.IPv4.
Jan 30 20:54:36 VM avahi-daemon[8089]: Withdrawing address record for \
                fd17:5821:95c0:0:5054:ff:fe11:603 on ens6.
Jan 30 20:54:36 VM avahi-daemon[8089]: Withdrawing address record for \
                fd17:5821:95c0::1ce on ens6.
Jan 30 20:54:36 VM avahi-daemon[8089]: Withdrawing address record for 192.168.240.210 \
                on ens6.
Jan 30 20:54:36 VM avahi-daemon[8089]: Withdrawing address record for 192.168.123.12 \
                on ens5.
Jan 30 20:54:36 VM avahi-daemon[8089]: Host name conflict, retrying with VM-2
Jan 30 20:54:36 VM avahi-daemon[8089]: Registering new address record for \
                fd17:5821:95c0:0:5054:ff:fe11:603 on ens6.*.
Jan 30 20:54:36 VM avahi-daemon[8089]: Registering new address record for \
                fd17:5821:95c0::1ce on ens6.*.
Jan 30 20:54:36 VM avahi-daemon[8089]: Registering new address record for \
                192.168.240.210 on ens6.IPv4.
Jan 30 20:54:36 VM avahi-daemon[8089]: Registering new address record for \
                fe80::5054:ff:fecc:2 on ens5.*.
Jan 30 20:54:36 VM avahi-daemon[8089]: Registering new address record for \
                192.168.123.12 on ens5.IPv4.
Jan 30 20:54:37 VM avahi-daemon[8089]: Withdrawing address record for \
                fd17:5821:95c0:0:5054:ff:fe11:603 on ens6.
Jan 30 20:54:37 VM avahi-daemon[8089]: Withdrawing address record for \
                fd17:5821:95c0::1ce on ens6.
Jan 30 20:54:37 VM avahi-daemon[8089]: Withdrawing address record for 192.168.240.210 \
                on ens6.
Jan 30 20:54:37 VM avahi-daemon[8089]: Withdrawing address record for 192.168.123.12 \
                on ens5.
Jan 30 20:54:37 VM avahi-daemon[8089]: Host name conflict, retrying with VM-3
Jan 30 20:54:37 VM avahi-daemon[8089]: Registering new address record for \
                fd17:5821:95c0:0:5054:ff:fe11:603 on ens6.*.
Jan 30 20:54:37 VM avahi-daemon[8089]: Registering new address record for \
                fd17:5821:95c0::1ce on ens6.*.
Jan 30 20:54:37 VM avahi-daemon[8089]: Registering new address record for \
                192.168.240.210 on ens6.IPv4.
Jan 30 20:54:37 VM avahi-daemon[8089]: Registering new address record for \
                fe80::5054:ff:fecc:2 on ens5.*.
Jan 30 20:54:37 VM avahi-daemon[8089]: Registering new address record for \
                192.168.123.12 on ens5.IPv4.
Jan 30 20:54:38 VM avahi-daemon[8089]: Withdrawing address record for \
                fd17:5821:95c0:0:5054:ff:fe11:603 on ens6.
Jan 30 20:54:38 VM avahi-daemon[8089]: Withdrawing address record for \
                fd17:5821:95c0::1ce on ens6.
Jan 30 20:54:38 VM avahi-daemon[8089]: Withdrawing address record for 192.168.240.210 \
                on ens6.
Jan 30 20:54:38 VM avahi-daemon[8089]: Withdrawing address record for 192.168.123.12 \
                on ens5.
Jan 30 20:54:38 VM avahi-daemon[8089]: Host name conflict, retrying with VM-4
Jan 30 20:54:38 VM avahi-daemon[8089]: Registering new address record for \
                fd17:5821:95c0:0:5054:ff:fe11:603 on ens6.*.
Jan 30 20:54:38 VM avahi-daemon[8089]: Registering new address record for \
                fd17:5821:95c0::1ce on ens6.*.
Jan 30 20:54:38 VM avahi-daemon[8089]: Registering new address record for \
                192.168.240.210 on ens6.IPv4.
Jan 30 20:54:38 VM avahi-daemon[8089]: Registering new address record for \
                fe80::5054:ff:fecc:2 on ens5.*.
Jan 30 20:54:38 VM avahi-daemon[8089]: Registering new address record for \
                192.168.123.12 on ens5.IPv4.
Jan 30 20:54:39 VM avahi-daemon[8089]: Withdrawing address record for \
                fd17:5821:95c0:0:5054:ff:fe11:603 on ens6.
Jan 30 20:54:39 VM avahi-daemon[8089]: Withdrawing address record for \
                fd17:5821:95c0::1ce on ens6.
Jan 30 20:54:39 VM avahi-daemon[8089]: Withdrawing address record for 192.168.240.210 \
                on ens6.
Jan 30 20:54:39 VM avahi-daemon[8089]: Withdrawing address record for 192.168.123.12 \
                on ens5.
Jan 30 20:54:39 VM avahi-daemon[8089]: Host name conflict, retrying with VM-5
Jan 30 20:54:39 VM avahi-daemon[8089]: Registering new address record for \
                fd17:5821:95c0:0:5054:ff:fe11:603 on ens6.*.
Jan 30 20:54:39 VM avahi-daemon[8089]: Registering new address record for \
                fd17:5821:95c0::1ce on ens6.*.
Jan 30 20:54:39 VM avahi-daemon[8089]: Registering new address record for \
                192.168.240.210 on ens6.IPv4.
Jan 30 20:54:39 VM avahi-daemon[8089]: Registering new address record for \
                fe80::5054:ff:fecc:2 on ens5.*.
Jan 30 20:54:39 VM avahi-daemon[8089]: Registering new address record for \
                192.168.123.12 on ens5.IPv4.
Jan 30 20:54:40 VM avahi-daemon[8089]: Withdrawing address record for \
                fd17:5821:95c0:0:5054:ff:fe11:603 on ens6.
Jan 30 20:54:40 VM avahi-daemon[8089]: Withdrawing address record for \
                fd17:5821:95c0::1ce on ens6.
Jan 30 20:54:40 VM avahi-daemon[8089]: Withdrawing address record for 192.168.240.210 \
                on ens6.
Jan 30 20:54:40 VM avahi-daemon[8089]: Withdrawing address record for 192.168.123.12 \
                on ens5.
Jan 30 20:54:40 VM avahi-daemon[8089]: Host name conflict, retrying with VM-6
Jan 30 20:54:40 VM avahi-daemon[8089]: Registering new address record for \
                fd17:5821:95c0:0:5054:ff:fe11:603 on ens6.*.
Jan 30 20:54:40 VM avahi-daemon[8089]: Registering new address record for \
                fd17:5821:95c0::1ce on ens6.*.
Jan 30 20:54:40 VM avahi-daemon[8089]: Registering new address record for \
                192.168.240.210 on ens6.IPv4.
Jan 30 20:54:40 VM avahi-daemon[8089]: Registering new address record for \
                fe80::5054:ff:fecc:2 on ens5.*.
Jan 30 20:54:40 VM avahi-daemon[8089]: Registering new address record for \
                192.168.123.12 on ens5.IPv4.
Jan 30 20:54:41 VM avahi-daemon[8089]: Withdrawing address record for \
                fd17:5821:95c0:0:5054:ff:fe11:603 on ens6.
Jan 30 20:54:41 VM avahi-daemon[8089]: Withdrawing address record for \
                fd17:5821:95c0::1ce on ens6.
Jan 30 20:54:41 VM avahi-daemon[8089]: Withdrawing address record for 192.168.240.210 \
                on ens6.
Jan 30 20:54:41 VM avahi-daemon[8089]: Withdrawing address record for 192.168.123.12 \
                on ens5.
Jan 30 20:54:41 VM avahi-daemon[8089]: Host name conflict, retrying with VM-7
Jan 30 20:54:41 VM avahi-daemon[8089]: Registering new address record for \
                fd17:5821:95c0:0:5054:ff:fe11:603 on ens6.*.
Jan 30 20:54:41 VM avahi-daemon[8089]: Registering new address record for \
                fd17:5821:95c0::1ce on ens6.*.
Jan 30 20:54:41 VM avahi-daemon[8089]: Registering new address record for \
                192.168.240.210 on ens6.IPv4.
Jan 30 20:54:41 VM avahi-daemon[8089]: Registering new address record for \
                fe80::5054:ff:fecc:2 on ens5.*.
Jan 30 20:54:41 VM avahi-daemon[8089]: Registering new address record for \
                192.168.123.12 on ens5.IPv4.
Jan 30 20:54:42 VM avahi-daemon[8089]: Withdrawing address record for \
                fd17:5821:95c0:0:5054:ff:fe11:603 on ens6.
Jan 30 20:54:42 VM avahi-daemon[8089]: Withdrawing address record for \
                fd17:5821:95c0::1ce on ens6.
Jan 30 20:54:42 VM avahi-daemon[8089]: Withdrawing address record for 192.168.240.210 \
                on ens6.
Jan 30 20:54:42 VM avahi-daemon[8089]: Withdrawing address record for 192.168.123.12 \
                on ens5.
Jan 30 20:54:42 VM avahi-daemon[8089]: Host name conflict, retrying with VM-8
Jan 30 20:54:42 VM avahi-daemon[8089]: Registering new address record for \
                fd17:5821:95c0:0:5054:ff:fe11:603 on ens6.*.
Jan 30 20:54:42 VM avahi-daemon[8089]: Registering new address record for \
                fd17:5821:95c0::1ce on ens6.*.
Jan 30 20:54:42 VM avahi-daemon[8089]: Registering new address record for \
                192.168.240.210 on ens6.IPv4.
Jan 30 20:54:42 VM avahi-daemon[8089]: Registering new address record for \
                fe80::5054:ff:fecc:2 on ens5.*.
Jan 30 20:54:42 VM avahi-daemon[8089]: Registering new address record for \
                192.168.123.12 on ens5.IPv4.
Jan 30 20:54:43 VM avahi-daemon[8089]: Withdrawing address record for \
                fd17:5821:95c0:0:5054:ff:fe11:603 on ens6.
Jan 30 20:54:43 VM avahi-daemon[8089]: Withdrawing address record for \
                fd17:5821:95c0::1ce on ens6.
Jan 30 20:54:43 VM avahi-daemon[8089]: Withdrawing address record for 192.168.240.210 \
                on ens6.
Jan 30 20:54:43 VM avahi-daemon[8089]: Withdrawing address record for 192.168.123.12 \
                on ens5.
Jan 30 20:54:43 VM avahi-daemon[8089]: Host name conflict, retrying with VM-9
Jan 30 20:54:43 VM avahi-daemon[8089]: Registering new address record for \
                fd17:5821:95c0:0:5054:ff:fe11:603 on ens6.*.
Jan 30 20:54:43 VM avahi-daemon[8089]: Registering new address record for \
                fd17:5821:95c0::1ce on ens6.*.
Jan 30 20:54:43 VM avahi-daemon[8089]: Registering new address record for \
                192.168.240.210 on ens6.IPv4.
Jan 30 20:54:43 VM avahi-daemon[8089]: Registering new address record for \
                fe80::5054:ff:fecc:2 on ens5.*.
Jan 30 20:54:43 VM avahi-daemon[8089]: Registering new address record for \
                192.168.123.12 on ens5.IPv4.
Jan 30 20:54:44 VM avahi-daemon[8089]: Server startup complete. Host name is \
                VM-9.local. Local service cookie is 1667207648.
Jan 30 20:54:45 VM anacron[1005]: Job `cron.monthly' started
Jan 30 20:54:45 VM anacron[1005]: Job `cron.monthly' terminated
Jan 30 20:54:45 VM anacron[1005]: Normal exit (3 jobs run)
Jan 30 20:55:10 VM systemd[1]: lightdm.service: Start operation timed out. \
                Terminating.
Jan 30 20:55:10 VM org.a11y.atspi.Registry[2409]: XIO:  fatal IO error 11 (Resource \
                temporarily unavailable) on X server ":0"
Jan 30 20:55:10 VM org.gtk.vfs.Daemon[2401]: A connection to the bus can't be made
Jan 30 20:55:10 VM lightdm[1884]: pam_unix(lightdm-greeter:session): session closed \
                for user lightdm
Jan 30 20:55:10 VM systemd[1]: Failed to start Light Display Manager.
Jan 30 20:55:10 VM systemd[1]: lightdm.service: Unit entered failed state.
Jan 30 20:55:10 VM systemd[1]: lightdm.service: Triggering OnFailure= dependencies.
Jan 30 20:55:10 VM systemd[1]: lightdm.service: Failed with result 'timeout'.
Jan 30 20:55:10 VM systemd[1]: Starting Auto import assertions from block devices...
Jan 30 20:55:10 VM systemd[1]: Starting Modem Manager...
Jan 30 20:55:10 VM systemd[1]: Started Run anacron jobs.
Jan 30 20:55:10 VM systemd[1]: Starting Clean up any mess left by 0dns-up...
Jan 30 20:55:10 VM anacron[8115]: Anacron 2.3 started on 2019-01-30
Jan 30 20:55:10 VM systemd[1]: Starting Restore /etc/resolv.conf if the system \
                crashed before the ppp link was shut down...
Jan 30 20:55:10 VM anacron[8115]: Normal exit (0 jobs run)
Jan 30 20:55:10 VM systemd[1]: Starting Terminate Plymouth Boot Screen...
Jan 30 20:55:10 VM mkdir[8118]: /bin/mkdir: cannot create directory \
                â€˜/var/run/pppconfig': File exists
Jan 30 20:55:10 VM ModemManager[8114]: &lt;info&gt;  ModemManager (version 1.4.12) starting \
                in system bus...
Jan 30 20:55:10 VM systemd[1]: Stopped target Graphical Interface.
Jan 30 20:55:10 VM systemd[1]: Starting Hold until boot process finishes up...
Jan 30 20:55:10 VM systemd[1]: Started ISC DHCP IPv6 relay.
Jan 30 20:55:10 VM systemd[1]: dns-clean.service: Control process exited, code=exited \
                status=1
Jan 30 20:55:10 VM systemd[1]: Failed to start Clean up any mess left by 0dns-up.
Jan 30 20:55:10 VM systemd[1]: dns-clean.service: Unit entered failed state.
Jan 30 20:55:10 VM systemd[1]: dns-clean.service: Failed with result 'exit-code'.
Jan 30 20:55:10 VM sh[8125]: No interface defined in /etc/default/isc-dhcp-relay6! - \
                Aborting...
Jan 30 20:55:10 VM systemd[1]: Started Restore /etc/resolv.conf if the system crashed \
                before the ppp link was shut down.
Jan 30 20:55:10 VM systemd[1]: Started Hold until boot process finishes up.
Jan 30 20:55:10 VM snap[8112]: auto-import is disabled on classic
Jan 30 20:55:10 VM systemd[1]: Started Terminate Plymouth Boot Screen.
Jan 30 20:55:10 VM systemd[1]: Started Auto import assertions from block devices.
Jan 30 20:55:10 VM systemd[1]: Started Modem Manager.
Jan 30 20:55:10 VM systemd[1]: Started X.org diagnosis failsafe.
Jan 30 20:55:10 VM systemd[1]: Reloading.
Jan 30 20:55:10 VM systemd[1]: lightdm.service: Service hold-off time over, \
                scheduling restart.
Jan 30 20:55:10 VM systemd[1]: Stopped Light Display Manager.
Jan 30 20:55:10 VM systemd[1]: Starting Detect the available GPUs and deal with any \
                system changes...
Jan 30 20:55:10 VM systemd[1]: Started ACPI event daemon.
Jan 30 20:55:10 VM systemd[1]: Started CUPS Scheduler.
Jan 30 20:55:10 VM gpu-manager[8175]: /etc/modprobe.d is not a file
Jan 30 20:55:10 VM gpu-manager[8175]: /etc/modprobe.d is not a file
Jan 30 20:55:10 VM gpu-manager[8175]: /etc/modprobe.d is not a file
Jan 30 20:55:10 VM gpu-manager[8175]: /etc/modprobe.d is not a file
Jan 30 20:55:10 VM gpu-manager[8175]: /etc/modprobe.d is not a file
Jan 30 20:55:10 VM gpu-manager[8175]: Error: can't open \
                /lib/modules/4.13.16/updates/dkms
Jan 30 20:55:10 VM gpu-manager[8175]: Error: can't open \
                /lib/modules/4.13.16/updates/dkms
Jan 30 20:55:10 VM gpu-manager[8175]: update-alternatives: error: no alternatives for \
                x86_64-linux-gnu_gfxcore_conf
Jan 30 20:55:10 VM systemd[1]: Started Detect the available GPUs and deal with any \
                system changes.
Jan 30 20:55:10 VM systemd[1]: Starting Light Display Manager...
Jan 30 20:55:10 VM systemd[1]: Started Light Display Manager.
Jan 30 20:55:11 VM lightdm[8234]: PAM unable to dlopen(pam_kwallet.so): \
/lib/security/pam_kwallet.so: cannot open shared object file: No such file or \
                directory
Jan 30 20:55:11 VM lightdm[8234]: PAM adding faulty module: pam_kwallet.so
Jan 30 20:55:11 VM lightdm[8234]: PAM unable to dlopen(pam_kwallet5.so): \
/lib/security/pam_kwallet5.so: cannot open shared object file: No such file or \
                directory
Jan 30 20:55:11 VM lightdm[8234]: PAM adding faulty module: pam_kwallet5.so
Jan 30 20:55:11 VM lightdm[8234]: pam_unix(lightdm-greeter:session): session opened \
                for user lightdm by (uid=0)
Jan 30 20:55:11 VM systemd[1]: Created slice User Slice of lightdm.
Jan 30 20:55:11 VM systemd[1]: Starting User Manager for UID 108...
Jan 30 20:55:11 VM systemd-logind[3919]: New session c1 of user lightdm.
Jan 30 20:55:11 VM systemd[1]: Started Session c1 of user lightdm.
Jan 30 20:55:11 VM systemd[8237]: pam_unix(systemd-user:session): session opened for \
                user lightdm by (uid=0)
Jan 30 20:55:11 VM systemd[8237]: Reached target Paths.
Jan 30 20:55:11 VM systemd[8237]: Reached target Timers.
Jan 30 20:55:11 VM systemd[8237]: Reached target Sockets.
Jan 30 20:55:11 VM systemd[8237]: Reached target Basic System.
Jan 30 20:55:11 VM systemd[8237]: Reached target Default.
Jan 30 20:55:11 VM systemd[8237]: Startup finished in 25ms.
Jan 30 20:55:11 VM systemd[1]: Started User Manager for UID 108.
Jan 30 20:55:11 VM org.a11y.atspi.Registry[8259]: SpiRegistry daemon is running with \
                well-known name - org.a11y.atspi.Registry
Jan 30 20:55:11 VM lightdm[8302]: PAM unable to dlopen(pam_kwallet.so): \
/lib/security/pam_kwallet.so: cannot open shared object file: No such file or \
                directory
Jan 30 20:55:11 VM lightdm[8302]: PAM adding faulty module: pam_kwallet.so
Jan 30 20:55:11 VM lightdm[8302]: PAM unable to dlopen(pam_kwallet5.so): \
/lib/security/pam_kwallet5.so: cannot open shared object file: No such file or \
                directory
Jan 30 20:55:11 VM lightdm[8302]: PAM adding faulty module: pam_kwallet5.so
Jan 30 20:55:11 VM dbus[1009]: [system] Activating via systemd: service \
                name='org.bluez' unit='dbus-org.bluez.service'
Jan 30 20:55:11 VM rtkit-daemon[5461]: Successfully made thread 8364 of process 8364 \
                (n/a) owned by '108' high priority at nice level -11.
Jan 30 20:55:11 VM rtkit-daemon[5461]: Supervising 1 threads of 1 processes of 1 \
                users.
Jan 30 20:55:11 VM pulseaudio[8364]: [pulseaudio] alsa-util.c: Disabling timer-based \
                scheduling because running inside a VM.
Jan 30 20:55:11 VM rtkit-daemon[5461]: Supervising 1 threads of 1 processes of 1 \
                users.
Jan 30 20:55:11 VM rtkit-daemon[5461]: Successfully made thread 8380 of process 8364 \
                (n/a) owned by '108' RT at priority 5.
Jan 30 20:55:11 VM rtkit-daemon[5461]: Supervising 2 threads of 1 processes of 1 \
                users.
Jan 30 20:55:11 VM pulseaudio[8364]: [pulseaudio] alsa-util.c: Disabling timer-based \
                scheduling because running inside a VM.
Jan 30 20:55:11 VM rtkit-daemon[5461]: Supervising 2 threads of 1 processes of 1 \
                users.
Jan 30 20:55:11 VM rtkit-daemon[5461]: Successfully made thread 8381 of process 8364 \
                (n/a) owned by '108' RT at priority 5.
Jan 30 20:55:11 VM rtkit-daemon[5461]: Supervising 3 threads of 1 processes of 1 \
                users.
Jan 30 20:55:11 VM rtkit-daemon[5461]: Successfully made thread 8383 of process 8383 \
                (n/a) owned by '108' high priority at nice level -11.
Jan 30 20:55:11 VM rtkit-daemon[5461]: Supervising 4 threads of 2 processes of 1 \
                users.
Jan 30 20:55:11 VM pulseaudio[8383]: [pulseaudio] pid.c: Daemon already running.
Jan 30 20:55:11 VM dbus[1009]: [system] Activating via systemd: service \
                name='org.freedesktop.UPower' unit='upower.service'
Jan 30 20:55:11 VM systemd[1]: Starting Daemon for power management...
Jan 30 20:55:11 VM dbus[1009]: [system] Successfully activated service \
                'org.freedesktop.UPower'
Jan 30 20:55:11 VM systemd[1]: Started Daemon for power management.
Jan 30 20:55:11 VM dbus[1009]: [system] Activating via systemd: service \
                name='org.freedesktop.ColorManager' unit='colord.service'
Jan 30 20:55:11 VM systemd[1]: Starting Manage, Install and Generate Color \
                Profiles...
Jan 30 20:55:12 VM colord[8401]: (colord:8401): Cd-WARNING **: failed to get edid \
                data: EDID length is too small
Jan 30 20:55:12 VM dbus[1009]: [system] Successfully activated service \
                'org.freedesktop.ColorManager'
Jan 30 20:55:12 VM systemd[1]: Started Manage, Install and Generate Color Profiles.
Jan 30 20:55:13 VM ModemManager[8114]: &lt;info&gt;  Couldn't find support for device at \
                '/sys/devices/pci0000:00/0000:00:05.0': not supported by any plugin
Jan 30 20:55:13 VM ModemManager[8114]: &lt;info&gt;  Couldn't find support for device at \
                '/sys/devices/pci0000:00/0000:00:06.0': not supported by any plugin
Jan 30 20:55:15 VM failsafeXServer[8149]: expr: non-integer argument
Jan 30 20:55:15 VM failsafeXServer[8149]: /usr/share/xdiagnose/failsafeXServer: line \
                87: [: -lt: unary operator expected
Jan 30 20:55:15 VM failsafeXServer[8149]: xinit /usr/share/xdiagnose/failsafeXinit \
/etc/X11/xorg.conf.failsafe  -- /usr/bin/X  -br -once -config \
                /etc/X11/xorg.conf.failsafe -logfile /var/log/Xorg.failsafe.log
Jan 30 20:55:16 VM failsafeXServer[8149]: (EE)
Jan 30 20:55:16 VM failsafeXServer[8149]: Fatal server error:
Jan 30 20:55:16 VM failsafeXServer[8149]: (EE) Server is already active for display 0
Jan 30 20:55:16 VM failsafeXServer[8149]:         If this server is no longer \
                running, remove /tmp/.X0-lock
Jan 30 20:55:16 VM failsafeXServer[8149]:         and start again.
Jan 30 20:55:16 VM failsafeXServer[8149]: (EE)
Jan 30 20:55:16 VM failsafeXServer[8149]: (EE)
Jan 30 20:55:16 VM failsafeXServer[8149]: Please consult the The X.Org Foundation \
                support
Jan 30 20:55:16 VM failsafeXServer[8149]:          at http://wiki.x.org
Jan 30 20:55:16 VM failsafeXServer[8149]:  for help.
Jan 30 20:55:16 VM failsafeXServer[8149]: (EE)
Jan 30 20:55:17 VM /usr/lib/snapd/snapd[1062]: snapmgr.go:422: No snaps to \
                auto-refresh found
Jan 30 20:55:17 VM snapd[1062]: 2019/01/30 20:55:17.410764 snapmgr.go:422: No snaps \
                to auto-refresh found
Jan 30 20:55:31 VM failsafeXServer[8149]: No protocol specified
Jan 30 20:55:31 VM failsafeXServer[8149]: xinit: giving up
Jan 30 20:55:31 VM failsafeXServer[8149]: xinit: unable to connect to X server: \
                Resource temporarily unavailable
Jan 30 20:55:31 VM failsafeXServer[8149]: xinit: server error
Jan 30 20:55:34 VM kernel: serial8250: too much work for irq4
Jan 30 20:55:34 VM kernel: serial8250: too much work for irq4
Jan 30 20:55:36 VM dbus[1009]: [system] Failed to activate service 'org.bluez': timed \
                out
Jan 30 20:55:36 VM pulseaudio[8364]: [pulseaudio] bluez5-util.c: GetManagedObjects() \
failed: org.freedesktop.DBus.Error.TimedOut: Failed to activate service 'org.bluez': \
                timed out
Jan 30 20:55:40 VM kernel: serial8250: too much work for irq4
Jan 30 20:55:40 VM kernel: serial8250: too much work for irq4



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190522090700</emailId><senderName>Lothar Schilling</senderName><senderEmail>ls@proasyl.de</senderEmail><timestampReceived>2019-05-22 09:07:00-0400</timestampReceived><subject>Re: [libvirt-users] libvirtd not starting</subject><body>

Am 22.05.2019 um 11:04 schrieb Lothar Schilling:
&gt; Am 03.05.2019 um 16:43 schrieb Martin Kletzander:
&gt;&gt; On Thu, May 02, 2019 at 02:25:28PM +0200, Martin Kletzander wrote:
&gt;&gt;&gt; On Thu, May 02, 2019 at 01:07:32PM +0200, Michal Privoznik wrote:
&gt;&gt;&gt;&gt; On 5/2/19 12:08 PM, Lothar Schilling wrote:
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; I turned logging up to maximum. That's all I get:
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; May  2 11:02:06 hl308-3 systemd: Starting Virtualization daemon...
&gt;&gt;&gt;&gt;&gt; May  2 11:02:06 hl308-3 libvirtd: 472: info : libvirt version:
&gt;&gt;&gt;&gt;&gt; 4.5.0, package: 10.el7_6.7 (CentOS BuildSystem
&gt;&gt;&gt;&gt;&gt; &lt;http://bugs.centos.org&gt;, 2019-04-24-14:04:12, x86-01.bsys.centos.org)
&gt;&gt;&gt;&gt;&gt; May  2 11:02:06 hl308-3 libvirtd: 472: info : hostname: my.server.net
&gt;&gt;&gt;&gt;&gt; May  2 11:02:06 hl308-3 libvirtd: 472: info :
&gt;&gt;&gt;&gt;&gt; virEventPollAddHandle:140 : EVENT_POLL_ADD_HANDLE: watch=1 fd=6
&gt;&gt;&gt;&gt;&gt; events=1 cb=0x7eff3bbde300 opaque=(nil) ff=(nil)
&gt;&gt;&gt;&gt;&gt; May  2 11:02:06 hl308-3 libvirtd: 472: info :
&gt;&gt;&gt;&gt;&gt; virEventPollAddHandle:140 : EVENT_POLL_ADD_HANDLE: watch=2 fd=8
&gt;&gt;&gt;&gt;&gt; events=1 cb=0x7eff3bd06760 opaque=0x558f9db485a0 ff=(nil)
&gt;&gt;&gt;&gt;&gt; May  2 11:02:06 hl308-3 systemd: Started Virtualization daemon.
&gt;&gt;&gt;&gt;&gt; May  2 11:02:06 hl308-3 libvirtd: 472: info :
&gt;&gt;&gt;&gt;&gt; virEventPollAddHandle:140 : EVENT_POLL_ADD_HANDLE: watch=3 fd=11
&gt;&gt;&gt;&gt;&gt; events=0 cb=0x7eff3bcfb420 opaque=0x558f9db69520 ff=0x7eff3bcfb3d0
&gt;&gt;&gt;&gt;&gt; May  2 11:02:06 hl308-3 libvirtd: 472: info :
&gt;&gt;&gt;&gt;&gt; virEventPollAddHandle:140 : EVENT_POLL_ADD_HANDLE: watch=4 fd=12
&gt;&gt;&gt;&gt;&gt; events=0 cb=0x7eff3bcfb420 opaque=0x558f9db69700 ff=0x7eff3bcfb3d0
&gt;&gt;&gt;&gt;&gt; May  2 11:02:06 hl308-3 libvirtd: process 472: arguments to
&gt;&gt;&gt;&gt;&gt; dbus_message_iter_append_basic() were incorrect, assertion
&gt;&gt;&gt;&gt;&gt; "_dbus_check_is_valid_utf8 (*string_p)" failed in file
&gt;&gt;&gt;&gt;&gt; ../../dbus/dbus-message.c line 2754.
&gt;&gt;&gt;&gt;&gt; May  2 11:02:06 hl308-3 libvirtd: This is normally a bug in some
&gt;&gt;&gt;&gt;&gt; application using the D-Bus library.
&gt;&gt;&gt;&gt;&gt; May  2 11:02:06 hl308-3 libvirtd: D-Bus not built with -rdynamic so
&gt;&gt;&gt;&gt;&gt; unable to print a backtrace
&gt;&gt;&gt;&gt;&gt; May  2 11:02:06 hl308-3 systemd: libvirtd.service: main process
&gt;&gt;&gt;&gt;&gt; exited, code=killed, status=6/ABRT
&gt;&gt;&gt;&gt; This is not the maximum loggin. We'll need to see debug logs:
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; https://wiki.libvirt.org/page/DebugLogs
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; and perhaps running libvirtd under gdb and getting a stack trace (with
&gt;&gt;&gt;&gt; all strings expanded) might help too.
&gt;&gt;&gt;&gt;
&gt;&gt;&gt; Actually gdb might be the only help here.  The reason is that that
&gt;&gt;&gt; dbus call
&gt;&gt;&gt; just reports the error and then calls abort(), so libvirtd will not
&gt;&gt;&gt; even get an
&gt;&gt;&gt; error message (which would help us track down what might've been the
&gt;&gt;&gt; case).
&gt;&gt;&gt;
&gt;&gt;&gt; If you can do something like:
&gt;&gt;&gt;
&gt;&gt; Even better, there are some ways to get the core dump information which I
&gt;&gt; completely forgot about:
&gt;&gt;
&gt;&gt; - coredumpctl -- IIRC you are running CentOS 7, so this will not be
&gt;&gt; available
&gt;&gt;                  for you yet.  If it was, coredumpctl show just shows
&gt;&gt; all we
&gt;&gt;                  need (by default it picks the last core dump and
&gt;&gt; stacktrace is
&gt;&gt;                  part of the output).
&gt;&gt;
&gt;&gt; - abrt-cli -- Similar to the above, it should be available for you,
&gt;&gt; but you
&gt;&gt;               need to have abrt installed and setup.  Which is not
&gt;&gt; always the
&gt;&gt;               default.  If you do, or you set it up yourself, however,
&gt;&gt; you
&gt;&gt;               should be able to get to the core dump as well, but it
&gt;&gt; is not as
&gt;&gt;               easy as with coredumpctl (i.e. I did not get to it in
&gt;&gt; first 10
&gt;&gt;               seconds).
&gt;&gt;
&gt;&gt; - Setup your own -- either set the ulimit for the service and look for
&gt;&gt; the file
&gt;&gt;                     that gets created or set kernel.core_pattern using
&gt;&gt; sysctl
&gt;&gt;                     to a command that gets ran with each core dump
&gt;&gt; (this one
&gt;&gt;                     does not need any ulimit setting, but you need to
&gt;&gt; know what
&gt;&gt;                     to specify there.
&gt;&gt;
&gt;&gt; Please let us know if you got anywhere, I'd like to see what the issue
&gt;&gt; is and
&gt;&gt; how we can fix it.
&gt;&gt;
&gt;&gt;&gt;  $ dnf --enablerepo='*debug*' install libvirt-debuginfo dbus-debuginfo
&gt;&gt;&gt;
&gt;&gt;&gt;  $ cat &gt;/var/lib/libvirt/gdbabortscript &lt;&lt;EOF
&gt;&gt;&gt;  start
&gt;&gt;&gt;  break abort
&gt;&gt;&gt;  commands
&gt;&gt;&gt;  t a a bt full
&gt;&gt;&gt;  end
&gt;&gt;&gt;  continue
&gt;&gt;&gt;  EOF
&gt;&gt;&gt;
&gt;&gt;&gt;  $ cat &gt;/etc/systemd/system/libvirtd.service.d/override.conf &lt;&lt;EOF
&gt;&gt;&gt;  [Service]
&gt;&gt;&gt;  ExecStart=
&gt;&gt;&gt;  ExecStart=gdb --batch -x /var/lib/libvirt/gdbabortscript
&gt;&gt;&gt; /usr/sbin/libvirtd $LIBVIRTD_ARGS
&gt;&gt;&gt;  EOF
&gt;&gt;&gt;
&gt;&gt;&gt;  $ systemctl daemon-reload
&gt;&gt;&gt;  $ restorecon -F /var/lib/libvirt/gdbabortscript
&gt;&gt;&gt; /etc/systemd/system/libvirtd.service.d/override.conf
&gt;&gt;&gt;  $ systemctl restart libvirtd.service
&gt;&gt;&gt;
&gt;&gt;&gt; You should get the full stacktrace of the issue in the output of:
&gt;&gt;&gt;
&gt;&gt;&gt;  journalctl -u libvirtd.service
&gt;&gt;&gt;
&gt;&gt;&gt; and you can post it here so we can find out what's happening.
&gt;&gt;&gt;
&gt;&gt;&gt; HTH,
&gt;&gt;&gt; Martin
&gt; Hi Martin,
&gt;
&gt; I set up the machine from scratch and now I#m back to where I started
&gt; from... Following your instructions I ran journalctl -u
&gt; libvirtd.service. The output is attached.
&gt;
&gt; Thank you
&gt; Lothar
By the way, though I turned on logging in libvirtd.conf there is no
output of any kind in /var/log/libvirtd/*...

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190529053352</emailId><senderName>Yalan Zhang</senderName><senderEmail>yalzhang@redhat.com</senderEmail><timestampReceived>2019-05-29 05:33:52-0400</timestampReceived><subject>Re: [libvirt-users] [Libvirt failed to claim Virtual Functions on hostdev network after VM reboot]</subject><body>

[Attachment #2 (multipart/alternative)]


Hi Fuzail,

Even there are  8 VFs in total, you only specified 2 in the hostnet
network.
And connections='2' means the hostnet networks is connected 2 times, so
both of the 2 VFs in hostnet are occupied.
Please try to define network like this:
&lt;network&gt;
  &lt;name&gt;hostnet&lt;/name&gt;
  &lt;forward mode='passthrough'  managed='yes'&gt;
&lt;pf dev='ens2'/&gt;
&lt;/forward&gt;
&lt;/network&gt;
It will include all the 8 VFs from PF ens2.

-------
Best Regards,
Yalan Zhang
IRC: yalzhang


On Fri, May 24, 2019 at 6:34 PM Erik Skultety &lt;eskultet@redhat.com&gt; wrote:

&gt; On Thu, May 23, 2019 at 10:37:56PM +0530, Fuzail Ahmad wrote:
&gt; &gt; Problem Statement:
&gt; &gt;
&gt; &gt; Libvirt failed to claim Virtual Functions  on hostdev network after VM
&gt; &gt; reboot.
&gt; &gt;
&gt; &gt; Version-Release number of selected component (if applicable):
&gt; &gt;
&gt; &gt; libvirtd (libvirt) 2.0.0
&gt;
&gt; I'd just like to point out that 2.0.0 is very old libvirt, even debian 9
&gt; has
&gt; 3.0.n, can you verify you're experiencing the same kind of issue with the
&gt; current upstream?
&gt;
&gt; Regards,
&gt; Erik
&gt;
&gt; _______________________________________________
&gt; libvirt-users mailing list
&gt; libvirt-users@redhat.com
&gt; https://www.redhat.com/mailman/listinfo/libvirt-users
&gt;

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;Hi  &lt;span style="white-space:pre-wrap"&gt;Fuzail&lt;/span&gt;,  \
&lt;div&gt;&lt;br&gt;&lt;div&gt;Even there are   8 VFs in total, you only specified 2 in the hostnet \
network.  &lt;/div&gt;&lt;div&gt;And  &lt;span style="white-space:pre-wrap"&gt;connections='2' \
means the hostnet networks is connected 2 times, so both of the 2 VFs in hostnet  are \
occupied.&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div dir="ltr" class="gmail_signature" \
data-smartmail="gmail_signature"&gt;&lt;div dir="ltr"&gt;&lt;div&gt;Please try to define network \
like this:&lt;/div&gt;&lt;div&gt;&lt;network&gt;&lt;br&gt;   &lt;name&gt;hostnet&lt;/name&gt;&lt;br&gt;   \
&lt;forward mode='passthrough'   managed='yes'&gt;&lt;br&gt;&lt;pf \
dev='ens2'/&gt; &lt;br&gt;&lt;/forward&gt;&lt;br&gt;&lt;/network&gt;&lt;/div&gt;&lt;div&gt;It will \
include all the 8 VFs from PF ens2.  &lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;-------&lt;br&gt;Best \
Regards,&lt;br&gt;Yalan Zhang&lt;br&gt;IRC: \
yalzhang&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;div \
class="gmail_quote"&gt;&lt;div dir="ltr" class="gmail_attr"&gt;On Fri, May 24, 2019 at 6:34 PM \
Erik Skultety &lt;&lt;a href="mailto:eskultet@redhat.com"&gt;eskultet@redhat.com&lt;/a&gt;&gt; \
wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote class="gmail_quote" style="margin:0px 0px 0px \
0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"&gt;On Thu, May 23, 2019 \
at 10:37:56PM +0530, Fuzail Ahmad wrote:&lt;br&gt; &gt; Problem Statement:&lt;br&gt;
&gt;&lt;br&gt;
&gt; Libvirt failed to claim Virtual Functions   on hostdev network after VM&lt;br&gt;
&gt; reboot.&lt;br&gt;
&gt;&lt;br&gt;
&gt; Version-Release number of selected component (if applicable):&lt;br&gt;
&gt;&lt;br&gt;
&gt; libvirtd (libvirt) 2.0.0&lt;br&gt;
&lt;br&gt;
I'd just like to point out that 2.0.0 is very old libvirt, even debian 9 has&lt;br&gt;
3.0.n, can you verify you're experiencing the same kind of issue with the&lt;br&gt;
current upstream?&lt;br&gt;
&lt;br&gt;
Regards,&lt;br&gt;
Erik&lt;br&gt;
&lt;br&gt;
_______________________________________________&lt;br&gt;
libvirt-users mailing list&lt;br&gt;
&lt;a href="mailto:libvirt-users@redhat.com" \
target="_blank"&gt;libvirt-users@redhat.com&lt;/a&gt;&lt;br&gt; &lt;a \
href="https://www.redhat.com/mailman/listinfo/libvirt-users" rel="noreferrer" \
target="_blank"&gt;https://www.redhat.com/mailman/listinfo/libvirt-users&lt;/a&gt;&lt;br&gt; \
&lt;/blockquote&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190529121251</emailId><senderName>Peter Krempa</senderName><senderEmail>pkrempa@redhat.com</senderEmail><timestampReceived>2019-05-29 12:12:51-0400</timestampReceived><subject>Re: [libvirt-users] Snapshot of single block device</subject><body>

[Attachment #2 (multipart/signed)]


On Wed, May 29, 2019 at 13:35:12 +0200, jarek wrote:
&gt; Hi,
&gt; 
&gt; W  dniu 29.05.2019, śro o  godzinie 09∶55 +0200, użytkownik Peter Krempa
&gt; napisał:
&gt; &gt; I understand, that it is not possible to make a snapshot of
&gt; &gt; &gt; physical
&gt; &gt; &gt; device, but it is enough for me to take snapshot of vda. How to
&gt; &gt; &gt; force
&gt; &gt; &gt; virsh to ignore sda ?
&gt; &gt; 
&gt; &gt; --diskspec sda,snapshot=no
&gt; 
&gt; now it works, thanks a lot!

By the way. You can also create a snapshot of sda, but you need to
specify the destination of the overlay manually e.g.:

--diskspec sda,file=/path/to/sda.snap.qcow2

Libvirt just does not want to generate the filename for block devices
since we can't know where to put the snapshot.

["signature.asc" (application/pgp-signature)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190530094946</emailId><senderName>Maksym Isaiev</senderName><senderEmail>m.isaiev@kwebbl.com</senderEmail><timestampReceived>2019-05-30 09:49:46-0400</timestampReceived><subject>[libvirt-users] libvirt blkiotune mechanism</subject><body>

Hello!

We are using oVirt in our infrastructure, which uses libvirt as backend. Last time we \
needed to activate storage QoS aka  libvirt blkiotune parameters. So some questions \
appeared about how libvirt limitation mechanism works:

1. What happened to overlimit storage traffic in small time period after we apply \
blkiotune parameters on high loaded virtual machine on fly: a) All over-limit traffic \
pulled into some queue, where all disk transactions can be successfully finished with \
QoS throughput? b) All over-limitation data dropped and opened transactions state \
became failed? c) All active transactions finishes on speed beyond blkiotune \
parameters limit, but all new transactions immediately are limited based on \
configured limits?


Thanks in advance!

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20190530131716</emailId><senderName>Michal Privoznik</senderName><senderEmail>mprivozn@redhat.com</senderEmail><timestampReceived>2019-05-30 13:17:16-0400</timestampReceived><subject>Re: [libvirt-users] logging of domains</subject><body>

On 5/29/19 4:59 PM, Lentes, Bernd wrote:
&gt; Hi,
&gt; 
&gt; recently i had some domains stopped without any obvious reason for me. \
&gt; Unfortunately i didn't find the cause. I'd like to log information about the \
&gt; domains that i have more information the next time this will happen. In \
&gt; /etc/libvirt/libvirtd.conf i have: log_level = 3
&gt; log_outputs="3:file:/var/log/libvirt/libvirtd.log"
&gt; which creates enormous log files, but with logrotate and xz i can manage that. But \
&gt; i think this is just related to libvirtd.
&gt; The logs for the domains under /var/log/libvirt/qemu are poor and very small, \
&gt; nearly no information. Is there a way to be more verbose with the domains so that i \
&gt; may find helpful information in these logs when the domains stop for the next time \
&gt; ?

Domain logs usually contain only command line and a very few info. It's 
the daemon logs where all the interesting bits are logged. This is 
almost by design because qemu's stdout/stderr is logged in domain log 
file and daemon logs go then into that enormous file.

Anyway, what's the issue you're trying to debug?

If your machine stops for no obvious reason try 'virsh domstate 
--reason'. It might give you an idea.

Michal

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20190531120340</emailId><senderName>Marcus Hoffmann</senderName><senderEmail>bubu@bubu1.eu</senderEmail><timestampReceived>2019-05-31 12:03:40-0400</timestampReceived><subject>Re: [libvirt-users] Using qemu active blockcommit results in 'Permission denied' error</subject><body>

[Attachment #2 (multipart/signed)]

[Attachment #4 (multipart/mixed)]

[Attachment #6 (multipart/mixed)]


Hi Peter,

On 31.05.19 09:57, Peter Krempa wrote:
&gt; On Thu, May 30, 2019 at 22:12:14 +0200, Marcus Hoffmann wrote:
&gt;&gt; Hello all,
&gt; 
&gt; Hi,
&gt; 
&gt;&gt;
&gt;&gt; I tried following this guide:
&gt;&gt; https://wiki.libvirt.org/page/Live-disk-backup-with-active-blockcommit
&gt;&gt;
&gt;&gt; Unfortunately when I try to do the final virsh blockcommit step I always
&gt;&gt; get the following error:
&gt;&gt;
&gt;&gt; error: internal error: unable to execute QEMU command 'block-commit':
&gt;&gt; Could not reopen file: Permission denied
&gt;&gt;
&gt;&gt; I checked directory und image file permissions, app-armor profiles (set
&gt;&gt; to complain mode for now.) and libvirt logs but nothing there gives me
&gt;&gt; any hints what might be going wrong.
&gt;&gt;
&gt;&gt; This is on a debian buster system, using
&gt; 
&gt; I was doing some changes in the blockcommit code recently so I might
&gt; have messed something up. Could you please collect debug logs:
&gt; 
&gt; https://wiki.libvirt.org/page/DebugLogs
&gt; 
&gt; when the problem reproduces and also a directory listing of the path
&gt; where the image is stored so I can check if the permission code is
&gt; working properly.
&gt; 


Logfile attached.

~ # ls -al /var/lib/libvirt/images/
total 1271917588
drwxr-xr-x 2 root         root                 4096 Mai 29 14:47 .
drwxr-xr-x 7 root         root                 4096 Mai 27 15:55 ..
-rw-r--r-- 1 libvirt-qemu libvirt-qemu 214821961728 Mai 29 14:47
drache3.qcow2
-rw-r--r-- 1 libvirt-qemu libvirt-qemu 395671371776 Mai 29 14:47
drache_addon.qcow2
-rw-r--r-- 1 libvirt-qemu libvirt-qemu  90944765952 Mai 31 14:02
drache_overlaya.qcow2
-rw-r--r-- 1 libvirt-qemu libvirt-qemu 115860766720 Mai 31 14:02
drache_overlayb.qcow2

Marcus

["libvirtd_debug.log" (text/x-log)]

~ # tail -f /var/log/libvirt/libvirtd.log 
2019-05-31 11:58:55.655+0000: 30902: info : virObjectNew:248 : OBJECT_NEW: \
obj=0x5574565c8d10 classname=virNetSocket 2019-05-31 11:58:55.655+0000: 30902: info : \
virObjectNew:248 : OBJECT_NEW: obj=0x5574565b8380 classname=virNetServerClient \
2019-05-31 11:58:55.655+0000: 30902: info : virObjectRef:382 : OBJECT_REF: \
obj=0x5574565c8d10 2019-05-31 11:58:55.655+0000: 30902: info : virObjectRef:382 : \
OBJECT_REF: obj=0x5574565b8380 2019-05-31 11:58:55.655+0000: 30902: info : \
virObjectRef:382 : OBJECT_REF: obj=0x5574565c8d10 2019-05-31 11:58:55.655+0000: \
30902: info : virObjectRef:382 : OBJECT_REF: obj=0x5574565b8380 2019-05-31 \
11:58:55.655+0000: 30902: info : virObjectNew:248 : OBJECT_NEW: obj=0x5574565b2310 \
classname=virKeepAlive 2019-05-31 11:58:55.655+0000: 30902: info : virObjectRef:382 : \
OBJECT_REF: obj=0x5574565b8380 2019-05-31 11:58:55.655+0000: 30902: info : \
virObjectUnref:344 : OBJECT_UNREF: obj=0x5574565b8380 2019-05-31 11:58:55.655+0000: \
30902: info : virObjectUnref:344 : OBJECT_UNREF: obj=0x5574565c8d10 2019-05-31 \
11:58:55.655+0000: 30902: info : virObjectRef:382 : OBJECT_REF: obj=0x557456599160 \
2019-05-31 11:58:55.655+0000: 30902: info : virObjectRef:382 : OBJECT_REF: \
obj=0x5574565ade60 2019-05-31 11:58:55.655+0000: 30902: info : virObjectRef:382 : \
OBJECT_REF: obj=0x5574565b8380 2019-05-31 11:58:55.655+0000: 30902: info : \
virObjectUnref:344 : OBJECT_UNREF: obj=0x557456599160 2019-05-31 11:58:55.656+0000: \
30903: info : virObjectNew:248 : OBJECT_NEW: obj=0x7f3b08000e80 classname=virIdentity \
2019-05-31 11:58:55.656+0000: 30903: debug : virFileClose:113 : Closed fd 27 \
2019-05-31 11:58:55.656+0000: 30903: debug : virIdentitySetAttr:241 : \
ident=0x7f3b08000e80 attribute=0 value=root 2019-05-31 11:58:55.656+0000: 30903: \
debug : virIdentitySetAttr:241 : ident=0x7f3b08000e80 attribute=1 value=0 2019-05-31 \
11:58:55.656+0000: 30903: debug : virIdentitySetAttr:241 : ident=0x7f3b08000e80 \
attribute=2 value=root 2019-05-31 11:58:55.656+0000: 30903: debug : \
virIdentitySetAttr:241 : ident=0x7f3b08000e80 attribute=3 value=0 2019-05-31 \
11:58:55.656+0000: 30903: debug : virIdentitySetAttr:241 : ident=0x7f3b08000e80 \
attribute=4 value=31950 2019-05-31 11:58:55.656+0000: 30903: debug : \
virIdentitySetAttr:241 : ident=0x7f3b08000e80 attribute=5 value=33496032 2019-05-31 \
11:58:55.656+0000: 30903: info : virObjectRef:382 : OBJECT_REF: obj=0x7f3b08000e80 \
2019-05-31 11:58:55.656+0000: 30903: info : virObjectRef:382 : OBJECT_REF: \
obj=0x7f3b08000e80 2019-05-31 11:58:55.656+0000: 30903: debug : virThreadJobSet:94 : \
Thread 30903 (virNetServerHandleJob) is now running job remoteDispatchAuthList \
2019-05-31 11:58:55.656+0000: 30903: debug : virFileClose:113 : Closed fd 27 \
2019-05-31 11:58:55.656+0000: 30903: debug : virThreadJobClear:119 : Thread 30903 \
(virNetServerHandleJob) finished job remoteDispatchAuthList with ret=0 2019-05-31 \
11:58:55.656+0000: 30903: info : virObjectUnref:344 : OBJECT_UNREF: \
obj=0x7f3b08000e80 2019-05-31 11:58:55.656+0000: 30903: info : virObjectUnref:344 : \
OBJECT_UNREF: obj=0x7f3b08000e80 2019-05-31 11:58:55.656+0000: 30903: info : \
virObjectUnref:344 : OBJECT_UNREF: obj=0x5574565ade60 2019-05-31 11:58:55.656+0000: \
30903: info : virObjectUnref:344 : OBJECT_UNREF: obj=0x5574565b8380 2019-05-31 \
11:58:55.656+0000: 30902: info : virObjectRef:382 : OBJECT_REF: obj=0x557456599160 \
2019-05-31 11:58:55.656+0000: 30902: info : virObjectRef:382 : OBJECT_REF: \
obj=0x5574565ade60 2019-05-31 11:58:55.656+0000: 30902: info : virObjectRef:382 : \
OBJECT_REF: obj=0x5574565b8380 2019-05-31 11:58:55.656+0000: 30902: info : \
virObjectUnref:344 : OBJECT_UNREF: obj=0x557456599160 2019-05-31 11:58:55.656+0000: \
30905: info : virObjectRef:382 : OBJECT_REF: obj=0x7f3b08000e80 2019-05-31 \
11:58:55.656+0000: 30905: info : virObjectRef:382 : OBJECT_REF: obj=0x7f3b08000e80 \
2019-05-31 11:58:55.656+0000: 30905: debug : virThreadJobSet:94 : Thread 30905 \
(virNetServerHandleJob) is now running job remoteDispatchConnectSupportsFeature \
2019-05-31 11:58:55.657+0000: 30905: info : virObjectRef:382 : OBJECT_REF: \
obj=0x5574565b2310 2019-05-31 11:58:55.657+0000: 30905: debug : virThreadJobClear:119 \
: Thread 30905 (virNetServerHandleJob) finished job \
remoteDispatchConnectSupportsFeature with ret=0 2019-05-31 11:58:55.657+0000: 30905: \
info : virObjectUnref:344 : OBJECT_UNREF: obj=0x7f3b08000e80 2019-05-31 \
11:58:55.657+0000: 30905: info : virObjectUnref:344 : OBJECT_UNREF: \
obj=0x7f3b08000e80 2019-05-31 11:58:55.657+0000: 30905: info : virObjectUnref:344 : \
OBJECT_UNREF: obj=0x5574565ade60 2019-05-31 11:58:55.657+0000: 30905: info : \
virObjectUnref:344 : OBJECT_UNREF: obj=0x5574565b8380 2019-05-31 11:58:55.657+0000: \
30902: info : virObjectRef:382 : OBJECT_REF: obj=0x557456599160 2019-05-31 \
11:58:55.657+0000: 30902: info : virObjectRef:382 : OBJECT_REF: obj=0x5574565ade60 \
2019-05-31 11:58:55.657+0000: 30902: info : virObjectRef:382 : OBJECT_REF: \
obj=0x5574565b8380 2019-05-31 11:58:55.657+0000: 30902: info : virObjectUnref:344 : \
OBJECT_UNREF: obj=0x557456599160 2019-05-31 11:58:55.657+0000: 30904: info : \
virObjectRef:382 : OBJECT_REF: obj=0x7f3b08000e80 2019-05-31 11:58:55.657+0000: \
30904: info : virObjectRef:382 : OBJECT_REF: obj=0x7f3b08000e80 2019-05-31 \
11:58:55.657+0000: 30904: debug : virThreadJobSet:94 : Thread 30904 \
(virNetServerHandleJob) is now running job remoteDispatchConnectOpen 2019-05-31 \
11:58:55.657+0000: 30904: debug : virConnectOpen:1118 : name= 2019-05-31 \
11:58:55.657+0000: 30904: info : virObjectNew:248 : OBJECT_NEW: obj=0x7f3b00001100 \
classname=virConnect 2019-05-31 11:58:55.657+0000: 30904: debug : \
virConfLoadConfig:1572 : Loading config file '/etc/libvirt/libvirt.conf' 2019-05-31 \
11:58:55.657+0000: 30904: debug : virConfReadFile:748 : \
filename=/etc/libvirt/libvirt.conf 2019-05-31 11:58:55.657+0000: 30904: debug : \
virFileClose:113 : Closed fd 27 2019-05-31 11:58:55.657+0000: 30904: debug : \
virConfGetValueString:893 : Get value string (nil) 0 2019-05-31 11:58:55.657+0000: \
30904: debug : virConnectOpenInternal:894 : Trying to probe for default URI \
2019-05-31 11:58:55.657+0000: 30904: debug : virConnectOpenInternal:901 : OPENVZ \
driver URI probe returned '' 2019-05-31 11:58:55.657+0000: 30904: debug : \
virConnectOpenInternal:901 : xenlight driver URI probe returned '' 2019-05-31 \
11:58:55.657+0000: 30904: info : virObjectRef:382 : OBJECT_REF: obj=0x7f3ac8114c20 \
2019-05-31 11:58:55.657+0000: 30904: info : virObjectUnref:344 : OBJECT_UNREF: \
obj=0x7f3ac8114c20 2019-05-31 11:58:55.657+0000: 30904: debug : \
virConnectOpenInternal:901 : QEMU driver URI probe returned 'qemu:///system' \
2019-05-31 11:58:55.657+0000: 30904: debug : virConfGetValueStringList:942 : Get \
value string list (nil) 0 2019-05-31 11:58:55.657+0000: 30904: debug : \
virConnectOpenInternal:939 : Split "qemu:///system" to URI components:  scheme qemu
  server &lt;null&gt;
  user &lt;null&gt;
  port 0
  path /system
2019-05-31 11:58:55.657+0000: 30904: debug : virConnectOpenInternal:996 : trying \
driver 0 (Test) ... 2019-05-31 11:58:55.657+0000: 30904: debug : \
virConnectOpenInternal:1011 : Checking for supported URI schemes 2019-05-31 \
11:58:55.657+0000: 30904: debug : virConnectOpenInternal:1020 : No matching URI \
scheme 2019-05-31 11:58:55.657+0000: 30904: debug : virConnectOpenInternal:996 : \
trying driver 1 (OPENVZ) ... 2019-05-31 11:58:55.657+0000: 30904: debug : \
virConnectOpenInternal:1011 : Checking for supported URI schemes 2019-05-31 \
11:58:55.657+0000: 30904: debug : virConnectOpenInternal:1020 : No matching URI \
scheme 2019-05-31 11:58:55.657+0000: 30904: debug : virConnectOpenInternal:996 : \
trying driver 2 (VMWARE) ... 2019-05-31 11:58:55.657+0000: 30904: debug : \
virConnectOpenInternal:1011 : Checking for supported URI schemes 2019-05-31 \
11:58:55.657+0000: 30904: debug : virConnectOpenInternal:1020 : No matching URI \
scheme 2019-05-31 11:58:55.657+0000: 30904: debug : virConnectOpenInternal:996 : \
trying driver 3 (ESX) ... 2019-05-31 11:58:55.657+0000: 30904: debug : \
virConnectOpenInternal:1011 : Checking for supported URI schemes 2019-05-31 \
11:58:55.657+0000: 30904: debug : virConnectOpenInternal:1020 : No matching URI \
scheme 2019-05-31 11:58:55.657+0000: 30904: debug : virConnectOpenInternal:996 : \
trying driver 4 (remote) ... 2019-05-31 11:58:55.657+0000: 30904: debug : \
virConnectOpenInternal:1024 : Matching any URI scheme for 'qemu' 2019-05-31 \
11:58:55.657+0000: 30904: debug : virConnectOpenInternal:1047 : driver 4 remote \
returned DECLINED 2019-05-31 11:58:55.657+0000: 30904: debug : \
virConnectOpenInternal:996 : trying driver 5 (network) ... 2019-05-31 \
11:58:55.657+0000: 30904: debug : virConnectOpenInternal:1011 : Checking for \
supported URI schemes 2019-05-31 11:58:55.657+0000: 30904: debug : \
virConnectOpenInternal:1020 : No matching URI scheme 2019-05-31 11:58:55.657+0000: \
30904: debug : virConnectOpenInternal:996 : trying driver 6 (interface) ... \
2019-05-31 11:58:55.657+0000: 30904: debug : virConnectOpenInternal:1011 : Checking \
for supported URI schemes 2019-05-31 11:58:55.657+0000: 30904: debug : \
virConnectOpenInternal:1020 : No matching URI scheme 2019-05-31 11:58:55.657+0000: \
30904: debug : virConnectOpenInternal:996 : trying driver 7 (storage) ... 2019-05-31 \
11:58:55.657+0000: 30904: debug : virConnectOpenInternal:1011 : Checking for \
supported URI schemes 2019-05-31 11:58:55.657+0000: 30904: debug : \
virConnectOpenInternal:1020 : No matching URI scheme 2019-05-31 11:58:55.657+0000: \
30904: debug : virConnectOpenInternal:996 : trying driver 8 (nodedev) ... 2019-05-31 \
11:58:55.657+0000: 30904: debug : virConnectOpenInternal:1011 : Checking for \
supported URI schemes 2019-05-31 11:58:55.657+0000: 30904: debug : \
virConnectOpenInternal:1020 : No matching URI scheme 2019-05-31 11:58:55.657+0000: \
30904: debug : virConnectOpenInternal:996 : trying driver 9 (secret) ... 2019-05-31 \
11:58:55.657+0000: 30904: debug : virConnectOpenInternal:1011 : Checking for \
supported URI schemes 2019-05-31 11:58:55.657+0000: 30904: debug : \
virConnectOpenInternal:1020 : No matching URI scheme 2019-05-31 11:58:55.657+0000: \
30904: debug : virConnectOpenInternal:996 : trying driver 10 (nwfilter) ... \
2019-05-31 11:58:55.657+0000: 30904: debug : virConnectOpenInternal:1011 : Checking \
for supported URI schemes 2019-05-31 11:58:55.657+0000: 30904: debug : \
virConnectOpenInternal:1020 : No matching URI scheme 2019-05-31 11:58:55.657+0000: \
30904: debug : virConnectOpenInternal:996 : trying driver 11 (xenlight) ... \
2019-05-31 11:58:55.657+0000: 30904: debug : virConnectOpenInternal:1011 : Checking \
for supported URI schemes 2019-05-31 11:58:55.657+0000: 30904: debug : \
virConnectOpenInternal:1020 : No matching URI scheme 2019-05-31 11:58:55.657+0000: \
30904: debug : virConnectOpenInternal:996 : trying driver 12 (QEMU) ... 2019-05-31 \
11:58:55.657+0000: 30904: debug : virConnectOpenInternal:1011 : Checking for \
supported URI schemes 2019-05-31 11:58:55.657+0000: 30904: debug : \
virConnectOpenInternal:1014 : Matched URI scheme 'qemu' 2019-05-31 11:58:55.657+0000: \
30904: info : virObjectRef:382 : OBJECT_REF: obj=0x7f3ac8114c20 2019-05-31 \
11:58:55.657+0000: 30904: info : virObjectRef:382 : OBJECT_REF: obj=0x5574565983e0 \
2019-05-31 11:58:55.657+0000: 30904: debug : virAccessManagerCheckConnect:217 : \
manager=0x5574565983e0(name=stack) driver=QEMU perm=0 2019-05-31 11:58:55.657+0000: \
30904: debug : virAccessManagerCheckConnect:217 : manager=0x557456598630(name=none) \
driver=QEMU perm=0 2019-05-31 11:58:55.657+0000: 30904: info : virObjectUnref:344 : \
OBJECT_UNREF: obj=0x5574565983e0 2019-05-31 11:58:55.657+0000: 30904: info : \
virObjectUnref:344 : OBJECT_UNREF: obj=0x7f3ac8114c20 2019-05-31 11:58:55.657+0000: \
30904: debug : virConnectOpenInternal:1047 : driver 12 QEMU returned SUCCESS \
2019-05-31 11:58:55.657+0000: 30904: info : virObjectRef:382 : OBJECT_REF: \
obj=0x7f3b00001100 2019-05-31 11:58:55.657+0000: 30904: info : virObjectRef:382 : \
OBJECT_REF: obj=0x7f3b00001100 2019-05-31 11:58:55.657+0000: 30904: info : \
virObjectRef:382 : OBJECT_REF: obj=0x7f3b00001100 2019-05-31 11:58:55.657+0000: \
30904: info : virObjectRef:382 : OBJECT_REF: obj=0x7f3b00001100 2019-05-31 \
11:58:55.657+0000: 30904: info : virObjectRef:382 : OBJECT_REF: obj=0x7f3b00001100 \
2019-05-31 11:58:55.657+0000: 30904: info : virObjectRef:382 : OBJECT_REF: \
obj=0x7f3b00001100 2019-05-31 11:58:55.657+0000: 30904: debug : virThreadJobClear:119 \
: Thread 30904 (virNetServerHandleJob) finished job remoteDispatchConnectOpen with \
ret=0 2019-05-31 11:58:55.657+0000: 30904: info : virObjectUnref:344 : OBJECT_UNREF: \
obj=0x7f3b08000e80 2019-05-31 11:58:55.657+0000: 30904: info : virObjectUnref:344 : \
OBJECT_UNREF: obj=0x7f3b08000e80 2019-05-31 11:58:55.657+0000: 30904: info : \
virObjectUnref:344 : OBJECT_UNREF: obj=0x5574565ade60 2019-05-31 11:58:55.657+0000: \
30904: info : virObjectUnref:344 : OBJECT_UNREF: obj=0x5574565b8380 2019-05-31 \
11:58:55.658+0000: 30902: info : virObjectRef:382 : OBJECT_REF: obj=0x557456599160 \
2019-05-31 11:58:55.658+0000: 30902: info : virObjectRef:382 : OBJECT_REF: \
obj=0x5574565ade60 2019-05-31 11:58:55.658+0000: 30902: info : virObjectRef:382 : \
OBJECT_REF: obj=0x5574565b8380 2019-05-31 11:58:55.658+0000: 30902: info : \
virObjectUnref:344 : OBJECT_UNREF: obj=0x557456599160 2019-05-31 11:58:55.658+0000: \
30906: info : virObjectRef:382 : OBJECT_REF: obj=0x7f3b08000e80 2019-05-31 \
11:58:55.658+0000: 30906: info : virObjectRef:382 : OBJECT_REF: obj=0x7f3b08000e80 \
2019-05-31 11:58:55.658+0000: 30906: debug : virThreadJobSet:94 : Thread 30906 \
(virNetServerHandleJob) is now running job remoteDispatchConnectGetURI 2019-05-31 \
11:58:55.658+0000: 30906: debug : virConnectGetURI:255 : conn=0x7f3b00001100 \
2019-05-31 11:58:55.658+0000: 30906: debug : virThreadJobClear:119 : Thread 30906 \
(virNetServerHandleJob) finished job remoteDispatchConnectGetURI with ret=0 \
2019-05-31 11:58:55.658+0000: 30906: info : virObjectUnref:344 : OBJECT_UNREF: \
obj=0x7f3b08000e80 2019-05-31 11:58:55.658+0000: 30906: info : virObjectUnref:344 : \
OBJECT_UNREF: obj=0x7f3b08000e80 2019-05-31 11:58:55.658+0000: 30906: info : \
virObjectUnref:344 : OBJECT_UNREF: obj=0x5574565ade60 2019-05-31 11:58:55.658+0000: \
30906: info : virObjectUnref:344 : OBJECT_UNREF: obj=0x5574565b8380 2019-05-31 \
11:58:55.658+0000: 30902: info : virObjectRef:382 : OBJECT_REF: obj=0x557456599160 \
2019-05-31 11:58:55.658+0000: 30902: info : virObjectRef:382 : OBJECT_REF: \
obj=0x5574565ade60 2019-05-31 11:58:55.658+0000: 30902: info : virObjectRef:382 : \
OBJECT_REF: obj=0x5574565b8380 2019-05-31 11:58:55.658+0000: 30902: info : \
virObjectUnref:344 : OBJECT_UNREF: obj=0x557456599160 2019-05-31 11:58:55.658+0000: \
30907: info : virObjectRef:382 : OBJECT_REF: obj=0x7f3b08000e80 2019-05-31 \
11:58:55.658+0000: 30907: info : virObjectRef:382 : OBJECT_REF: obj=0x7f3b08000e80 \
2019-05-31 11:58:55.658+0000: 30907: debug : virThreadJobSet:94 : Thread 30907 \
(virNetServerHandleJob) is now running job remoteDispatchConnectSupportsFeature \
2019-05-31 11:58:55.658+0000: 30907: debug : virThreadJobClear:119 : Thread 30907 \
(virNetServerHandleJob) finished job remoteDispatchConnectSupportsFeature with ret=0 \
2019-05-31 11:58:55.658+0000: 30907: info : virObjectUnref:344 : OBJECT_UNREF: \
obj=0x7f3b08000e80 2019-05-31 11:58:55.658+0000: 30907: info : virObjectUnref:344 : \
OBJECT_UNREF: obj=0x7f3b08000e80 2019-05-31 11:58:55.658+0000: 30907: info : \
virObjectUnref:344 : OBJECT_UNREF: obj=0x5574565ade60 2019-05-31 11:58:55.658+0000: \
30907: info : virObjectUnref:344 : OBJECT_UNREF: obj=0x5574565b8380 2019-05-31 \
11:58:55.658+0000: 30902: info : virObjectRef:382 : OBJECT_REF: obj=0x557456599160 \
2019-05-31 11:58:55.658+0000: 30902: info : virObjectRef:382 : OBJECT_REF: \
obj=0x5574565ade60 2019-05-31 11:58:55.658+0000: 30902: info : virObjectRef:382 : \
OBJECT_REF: obj=0x5574565b8380 2019-05-31 11:58:55.658+0000: 30902: info : \
virObjectUnref:344 : OBJECT_UNREF: obj=0x557456599160 2019-05-31 11:58:55.658+0000: \
30908: info : virObjectRef:382 : OBJECT_REF: obj=0x7f3b08000e80 2019-05-31 \
11:58:55.658+0000: 30908: info : virObjectRef:382 : OBJECT_REF: obj=0x7f3b08000e80 \
2019-05-31 11:58:55.658+0000: 30908: debug : virThreadJobSet:94 : Thread 30908 \
(virNetServerHandleJob) is now running job remoteDispatchConnectSupportsFeature \
2019-05-31 11:58:55.658+0000: 30908: debug : virThreadJobClear:119 : Thread 30908 \
(virNetServerHandleJob) finished job remoteDispatchConnectSupportsFeature with ret=0 \
2019-05-31 11:58:55.658+0000: 30908: info : virObjectUnref:344 : OBJECT_UNREF: \
obj=0x7f3b08000e80 2019-05-31 11:58:55.658+0000: 30908: info : virObjectUnref:344 : \
OBJECT_UNREF: obj=0x7f3b08000e80 2019-05-31 11:58:55.658+0000: 30908: info : \
virObjectUnref:344 : OBJECT_UNREF: obj=0x5574565ade60 2019-05-31 11:58:55.658+0000: \
30908: info : virObjectUnref:344 : OBJECT_UNREF: obj=0x5574565b8380 2019-05-31 \
11:58:55.658+0000: 30902: info : virObjectRef:382 : OBJECT_REF: obj=0x557456599160 \
2019-05-31 11:58:55.658+0000: 30902: info : virObjectRef:382 : OBJECT_REF: \
obj=0x5574565ade60 2019-05-31 11:58:55.658+0000: 30902: info : virObjectRef:382 : \
OBJECT_REF: obj=0x5574565b8380 2019-05-31 11:58:55.658+0000: 30902: info : \
virObjectUnref:344 : OBJECT_UNREF: obj=0x557456599160 2019-05-31 11:58:55.658+0000: \
30905: info : virObjectRef:382 : OBJECT_REF: obj=0x7f3b08000e80 2019-05-31 \
11:58:55.658+0000: 30905: info : virObjectRef:382 : OBJECT_REF: obj=0x7f3b08000e80 \
2019-05-31 11:58:55.658+0000: 30905: debug : virThreadJobSet:94 : Thread 30905 \
(virNetServerHandleJob) is now running job remoteDispatchConnectRegisterCloseCallback \
2019-05-31 11:58:55.658+0000: 30905: debug : virConnectRegisterCloseCallback:1375 : \
conn=0x7f3b00001100 2019-05-31 11:58:55.658+0000: 30905: debug : \
virThreadJobClear:119 : Thread 30905 (virNetServerHandleJob) finished job \
remoteDispatchConnectRegisterCloseCallback with ret=0 2019-05-31 11:58:55.658+0000: \
30905: info : virObjectUnref:344 : OBJECT_UNREF: obj=0x7f3b08000e80 2019-05-31 \
11:58:55.658+0000: 30905: info : virObjectUnref:344 : OBJECT_UNREF: \
obj=0x7f3b08000e80 2019-05-31 11:58:55.658+0000: 30905: info : virObjectUnref:344 : \
OBJECT_UNREF: obj=0x5574565ade60 2019-05-31 11:58:55.658+0000: 30905: info : \
virObjectUnref:344 : OBJECT_UNREF: obj=0x5574565b8380 2019-05-31 11:58:55.659+0000: \
30902: info : virObjectRef:382 : OBJECT_REF: obj=0x557456599160 2019-05-31 \
11:58:55.659+0000: 30902: info : virObjectRef:382 : OBJECT_REF: obj=0x5574565ade60 \
2019-05-31 11:58:55.659+0000: 30902: info : virObjectRef:382 : OBJECT_REF: \
obj=0x5574565b8380 2019-05-31 11:58:55.659+0000: 30902: info : virObjectUnref:344 : \
OBJECT_UNREF: obj=0x557456599160 2019-05-31 11:58:55.659+0000: 30909: info : \
virObjectRef:382 : OBJECT_REF: obj=0x7f3b08000e80 2019-05-31 11:58:55.659+0000: \
30909: info : virObjectRef:382 : OBJECT_REF: obj=0x7f3b08000e80 2019-05-31 \
11:58:55.659+0000: 30909: debug : virThreadJobSet:94 : Thread 30909 \
(virNetServerHandleJob) is now running job remoteDispatchDomainLookupByName \
2019-05-31 11:58:55.659+0000: 30909: debug : virDomainLookupByName:412 : \
conn=0x7f3b00001100, name=drache 2019-05-31 11:58:55.659+0000: 30909: info : \
virObjectRef:382 : OBJECT_REF: obj=0x7f3ac816de60 2019-05-31 11:58:55.659+0000: \
30909: info : virObjectRef:382 : OBJECT_REF: obj=0x5574565983e0 2019-05-31 \
11:58:55.659+0000: 30909: debug : virAccessManagerCheckDomain:233 : \
manager=0x5574565983e0(name=stack) driver=QEMU domain=0x7f3ac816e560 perm=0 \
2019-05-31 11:58:55.659+0000: 30909: debug : virAccessManagerCheckDomain:233 : \
manager=0x557456598630(name=none) driver=QEMU domain=0x7f3ac816e560 perm=0 2019-05-31 \
11:58:55.659+0000: 30909: info : virObjectUnref:344 : OBJECT_UNREF: \
obj=0x5574565983e0 2019-05-31 11:58:55.659+0000: 30909: info : virObjectNew:248 : \
OBJECT_NEW: obj=0x7f3aec0013b0 classname=virDomain 2019-05-31 11:58:55.659+0000: \
30909: info : virObjectRef:382 : OBJECT_REF: obj=0x7f3b00001100 2019-05-31 \
11:58:55.659+0000: 30909: info : virObjectUnref:344 : OBJECT_UNREF: \
obj=0x7f3ac816de60 2019-05-31 11:58:55.659+0000: 30909: info : virObjectUnref:344 : \
OBJECT_UNREF: obj=0x7f3aec0013b0 2019-05-31 11:58:55.659+0000: 30909: info : \
virObjectUnref:346 : OBJECT_DISPOSE: obj=0x7f3aec0013b0 2019-05-31 11:58:55.659+0000: \
30909: debug : virDomainDispose:318 : release domain 0x7f3aec0013b0 drache \
db4e9ace-f27e-3981-1d57-a560bc6c132c 2019-05-31 11:58:55.659+0000: 30909: info : \
virObjectUnref:344 : OBJECT_UNREF: obj=0x7f3b00001100 2019-05-31 11:58:55.659+0000: \
30909: debug : virThreadJobClear:119 : Thread 30909 (virNetServerHandleJob) finished \
job remoteDispatchDomainLookupByName with ret=0 2019-05-31 11:58:55.659+0000: 30909: \
info : virObjectUnref:344 : OBJECT_UNREF: obj=0x7f3b08000e80 2019-05-31 \
11:58:55.659+0000: 30909: info : virObjectUnref:344 : OBJECT_UNREF: \
obj=0x7f3b08000e80 2019-05-31 11:58:55.659+0000: 30909: info : virObjectUnref:344 : \
OBJECT_UNREF: obj=0x5574565ade60 2019-05-31 11:58:55.659+0000: 30909: info : \
virObjectUnref:344 : OBJECT_UNREF: obj=0x5574565b8380 2019-05-31 11:58:55.659+0000: \
30902: info : virObjectRef:382 : OBJECT_REF: obj=0x557456599160 2019-05-31 \
11:58:55.659+0000: 30902: info : virObjectRef:382 : OBJECT_REF: obj=0x5574565ade60 \
2019-05-31 11:58:55.659+0000: 30902: info : virObjectRef:382 : OBJECT_REF: \
obj=0x5574565b8380 2019-05-31 11:58:55.659+0000: 30902: info : virObjectUnref:344 : \
OBJECT_UNREF: obj=0x557456599160 2019-05-31 11:58:55.659+0000: 30906: info : \
virObjectRef:382 : OBJECT_REF: obj=0x7f3b08000e80 2019-05-31 11:58:55.659+0000: \
30906: info : virObjectRef:382 : OBJECT_REF: obj=0x7f3b08000e80 2019-05-31 \
11:58:55.659+0000: 30906: debug : virThreadJobSet:94 : Thread 30906 \
(virNetServerHandleJob) is now running job \
remoteDispatchConnectDomainEventCallbackRegisterAny 2019-05-31 11:58:55.659+0000: \
30906: info : virObjectNew:248 : OBJECT_NEW: obj=0x7f3afc0015f0 classname=virDomain \
2019-05-31 11:58:55.659+0000: 30906: info : virObjectRef:382 : OBJECT_REF: \
obj=0x7f3b00001100 2019-05-31 11:58:55.659+0000: 30906: info : virObjectRef:382 : \
OBJECT_REF: obj=0x5574565b8380 2019-05-31 11:58:55.659+0000: 30906: debug : \
virConnectDomainEventRegisterAny:9266 : dom=0x7f3afc0015f0, (VM: name=drache, \
uuid=db4e9ace-f27e-3981-1d57-a560bc6c132c), conn=0x7f3b00001100, eventID=8, \
cb=0x5574560ef7f0, opaque=0x7f3afc0013a0, freecb=0x5574560ea780 2019-05-31 \
11:58:55.659+0000: 30906: info : virObjectRef:382 : OBJECT_REF: obj=0x5574565983e0 \
2019-05-31 11:58:55.659+0000: 30906: debug : virAccessManagerCheckConnect:217 : \
manager=0x5574565983e0(name=stack) driver=QEMU perm=3 2019-05-31 11:58:55.659+0000: \
30906: debug : virAccessManagerCheckConnect:217 : manager=0x557456598630(name=none) \
driver=QEMU perm=3 2019-05-31 11:58:55.659+0000: 30906: info : virObjectUnref:344 : \
OBJECT_UNREF: obj=0x5574565983e0 2019-05-31 11:58:55.659+0000: 30906: info : \
virObjectRef:382 : OBJECT_REF: obj=0x7f3ac8110390 2019-05-31 11:58:55.659+0000: \
2019-05-31 11:58:55.659+0000: 30906: info : virObjectUnref:346 : OBJECT_DISPOSE: \
obj=0x7f3afc0015f0 2019-05-31 11:58:55.659+0000: 30906: debug : virDomainDispose:318 \
: release domain 0x7f3afc0015f0 drache db4e9ace-f27e-3981-1d57-a560bc6c132c \
2019-05-31 11:58:55.659+0000: 30906: info : virObjectUnref:344 : OBJECT_UNREF: \
obj=0x7f3b00001100 2019-05-31 11:58:55.659+0000: 30906: debug : virThreadJobClear:119 \
: Thread 30906 (virNetServerHandleJob) finished job \
remoteDispatchConnectDomainEventCallbackRegisterAny with ret=0 2019-05-31 \
11:58:55.659+0000: 30906: info : virObjectUnref:344 : OBJECT_UNREF: \
obj=0x7f3b08000e80 2019-05-31 11:58:55.659+0000: 30906: info : virObjectUnref:344 : \
OBJECT_UNREF: obj=0x7f3b08000e80 2019-05-31 11:58:55.659+0000: 30906: info : \
virObjectUnref:344 : OBJECT_UNREF: obj=0x5574565ade60 2019-05-31 11:58:55.659+0000: \
30906: info : virObjectUnref:344 : OBJECT_UNREF: obj=0x5574565b8380 2019-05-31 \
11:58:55.659+0000: 30902: info : virObjectRef:382 : OBJECT_REF: obj=0x557456599160 \
2019-05-31 11:58:55.659+0000: 30902: info : virObjectRef:382 : OBJECT_REF: \
obj=0x5574565ade60 2019-05-31 11:58:55.659+0000: 30902: info : virObjectRef:382 : \
OBJECT_REF: obj=0x5574565b8380 2019-05-31 11:58:55.659+0000: 30902: info : \
virObjectUnref:344 : OBJECT_UNREF: obj=0x557456599160 2019-05-31 11:58:55.659+0000: \
30907: info : virObjectRef:382 : OBJECT_REF: obj=0x7f3b08000e80 2019-05-31 \
11:58:55.659+0000: 30907: info : virObjectRef:382 : OBJECT_REF: obj=0x7f3b08000e80 \
2019-05-31 11:58:55.659+0000: 30907: debug : virThreadJobSet:94 : Thread 30907 \
(virNetServerHandleJob) is now running job \
remoteDispatchConnectDomainEventCallbackRegisterAny 2019-05-31 11:58:55.659+0000: \
30907: info : virObjectNew:248 : OBJECT_NEW: obj=0x7f3ae8001560 classname=virDomain \
2019-05-31 11:58:55.659+0000: 30907: info : virObjectRef:382 : OBJECT_REF: \
obj=0x7f3b00001100 2019-05-31 11:58:55.659+0000: 30907: info : virObjectRef:382 : \
OBJECT_REF: obj=0x5574565b8380 2019-05-31 11:58:55.659+0000: 30907: debug : \
virConnectDomainEventRegisterAny:9266 : dom=0x7f3ae8001560, (VM: name=drache, \
uuid=db4e9ace-f27e-3981-1d57-a560bc6c132c), conn=0x7f3b00001100, eventID=16, \
cb=0x5574560eeb10, opaque=0x7f3ae8001310, freecb=0x5574560ea780 2019-05-31 \
11:58:55.659+0000: 30907: info : virObjectRef:382 : OBJECT_REF: obj=0x5574565983e0 \
2019-05-31 11:58:55.659+0000: 30907: debug : virAccessManagerCheckConnect:217 : \
manager=0x5574565983e0(name=stack) driver=QEMU perm=3 2019-05-31 11:58:55.659+0000: \
30907: debug : virAccessManagerCheckConnect:217 : manager=0x557456598630(name=none) \
driver=QEMU perm=3 2019-05-31 11:58:55.659+0000: 30907: info : virObjectUnref:344 : \
OBJECT_UNREF: obj=0x5574565983e0 2019-05-31 11:58:55.659+0000: 30907: info : \
virObjectRef:382 : OBJECT_REF: obj=0x7f3ac8110390 2019-05-31 11:58:55.659+0000: \
30907: info : virObjectRef:382 : OBJECT_REF: obj=0x7f3b00001100 2019-05-31 \
11:58:55.659+0000: 30907: info : virObjectUnref:344 : OBJECT_UNREF: \
obj=0x7f3ae8001560 2019-05-31 11:58:55.659+0000: 30907: info : virObjectUnref:346 : \
OBJECT_DISPOSE: obj=0x7f3ae8001560 2019-05-31 11:58:55.659+0000: 30907: debug : \
virDomainDispose:318 : release domain 0x7f3ae8001560 drache \
db4e9ace-f27e-3981-1d57-a560bc6c132c 2019-05-31 11:58:55.659+0000: 30907: info : \
virObjectUnref:344 : OBJECT_UNREF: obj=0x7f3b00001100 2019-05-31 11:58:55.659+0000: \
30907: debug : virThreadJobClear:119 : Thread 30907 (virNetServerHandleJob) finished \
job remoteDispatchConnectDomainEventCallbackRegisterAny with ret=0 2019-05-31 \
11:58:55.659+0000: 30907: info : virObjectUnref:344 : OBJECT_UNREF: \
obj=0x7f3b08000e80 2019-05-31 11:58:55.659+0000: 30907: info : virObjectUnref:344 : \
OBJECT_UNREF: obj=0x7f3b08000e80 2019-05-31 11:58:55.659+0000: 30907: info : \
virObjectUnref:344 : OBJECT_UNREF: obj=0x5574565ade60 2019-05-31 11:58:55.659+0000: \
30907: info : virObjectUnref:344 : OBJECT_UNREF: obj=0x5574565b8380 2019-05-31 \
11:58:55.659+0000: 30902: info : virObjectRef:382 : OBJECT_REF: obj=0x557456599160 \
2019-05-31 11:58:55.659+0000: 30902: info : virObjectRef:382 : OBJECT_REF: \
obj=0x5574565ade60 2019-05-31 11:58:55.659+0000: 30902: info : virObjectRef:382 : \
OBJECT_REF: obj=0x5574565b8380 2019-05-31 11:58:55.659+0000: 30902: info : \
virObjectUnref:344 : OBJECT_UNREF: obj=0x557456599160 2019-05-31 11:58:55.659+0000: \
30903: info : virObjectRef:382 : OBJECT_REF: obj=0x7f3b08000e80 2019-05-31 \
11:58:55.659+0000: 30903: info : virObjectRef:382 : OBJECT_REF: obj=0x7f3b08000e80 \
2019-05-31 11:58:55.659+0000: 30903: debug : virThreadJobSet:94 : Thread 30903 \
(virNetServerHandleJob) is now running job remoteDispatchDomainBlockCommit 2019-05-31 \
11:58:55.659+0000: 30903: info : virObjectNew:248 : OBJECT_NEW: obj=0x7f3b080037b0 \
classname=virDomain 2019-05-31 11:58:55.659+0000: 30903: info : virObjectRef:382 : \
OBJECT_REF: obj=0x7f3b00001100 2019-05-31 11:58:55.659+0000: 30903: debug : \
virDomainBlockCommit:10495 : dom=0x7f3b080037b0, (VM: name=drache, \
uuid=db4e9ace-f27e-3981-1d57-a560bc6c132c), disk=vda, base=&lt;null&gt;, top=&lt;null&gt;, \
bandwidth=0, flags=0x4 2019-05-31 11:58:55.659+0000: 30903: info : virObjectRef:382 : \
OBJECT_REF: obj=0x7f3ac816de60 2019-05-31 11:58:55.659+0000: 30903: info : \
virObjectRef:382 : OBJECT_REF: obj=0x7f3ac8114c20 2019-05-31 11:58:55.659+0000: \
30903: info : virObjectRef:382 : OBJECT_REF: obj=0x5574565983e0 2019-05-31 \
11:58:55.659+0000: 30903: debug : virAccessManagerCheckDomain:233 : \
manager=0x5574565983e0(name=stack) driver=QEMU domain=0x7f3ac816e560 perm=22 \
2019-05-31 11:58:55.659+0000: 30903: debug : virAccessManagerCheckDomain:233 : \
manager=0x557456598630(name=none) driver=QEMU domain=0x7f3ac816e560 perm=22 \
2019-05-31 11:58:55.659+0000: 30903: info : virObjectUnref:344 : OBJECT_UNREF: \
obj=0x5574565983e0 2019-05-31 11:58:55.659+0000: 30903: info : virObjectRef:382 : \
OBJECT_REF: obj=0x7f3ac8114c20 2019-05-31 11:58:55.659+0000: 30903: debug : \
qemuDomainObjBeginJobInternal:6930 : Starting job: job=modify agentJob=none \
asyncJob=none (vm=0x7f3ac816de60 name=drache, current job=none agentJob=none \
async=none) 2019-05-31 11:58:55.659+0000: 30903: debug : \
qemuDomainObjBeginJobInternal:6979 : Started job: modify (async=none \
vm=0x7f3ac816de60 name=drache) 2019-05-31 11:58:55.659+0000: 30903: info : \
virObjectUnref:344 : OBJECT_UNREF: obj=0x7f3ac8114c20 2019-05-31 11:58:55.659+0000: \
30903: info : virObjectRef:382 : OBJECT_REF: obj=0x7f3ac8114c20 2019-05-31 \
11:58:55.659+0000: 30903: debug : virDomainLockImageAttach:263 : \
plugin=0x7f3ac812ec30 dom=0x7f3ac816de60 src=0x7f3ac816f7c0 2019-05-31 \
11:58:55.659+0000: 30903: debug : virDomainLockManagerNew:134 : plugin=0x7f3ac812ec30 \
dom=0x7f3ac816de60 withResources=0 2019-05-31 11:58:55.659+0000: 30903: debug : \
virLockManagerPluginGetDriver:280 : plugin=0x7f3ac812ec30 2019-05-31 \
11:58:55.659+0000: 30903: debug : virLockManagerNew:304 : driver=0x7f3b14fae220 \
type=0 nparams=5 params=0x7f3b108835e0 flags=0x0 2019-05-31 11:58:55.659+0000: 30903: \
debug : virLockManagerLogParams:97 :   key=uuid type=uuid \
value=db4e9ace-f27e-3981-1d57-a560bc6c132c 2019-05-31 11:58:55.659+0000: 30903: debug \
: virLockManagerLogParams:90 :   key=name type=string value=drache 2019-05-31 \
11:58:55.659+0000: 30903: debug : virLockManagerLogParams:78 :   key=id type=uint \
value=5 2019-05-31 11:58:55.659+0000: 30903: debug : virLockManagerLogParams:78 :   \
key=pid type=uint value=23158 2019-05-31 11:58:55.659+0000: 30903: debug : \
virLockManagerLogParams:93 :   key=uri type=cstring value=qemu:///system 2019-05-31 \
11:58:55.659+0000: 30903: debug : virDomainLockManagerAddImage:90 : Add disk \
/var/lib/libvirt/images/drache3.qcow2 2019-05-31 11:58:55.659+0000: 30903: debug : \
virLockManagerAddResource:331 : lock=0x7f3b08003ef0 type=0 \
name=/var/lib/libvirt/images/drache3.qcow2 nparams=0 params=(nil) flags=0x0 \
2019-05-31 11:58:55.659+0000: 30903: debug : virLockManagerAcquire:349 : \
lock=0x7f3b08003ef0 state='&lt;null&gt;' flags=0x0 action=0 fd=(nil) 2019-05-31 \
11:58:55.659+0000: 30903: debug : virLockManagerFree:386 : lock=0x7f3b08003ef0 \
2019-05-31 11:58:55.659+0000: 30903: debug : qemuSetupImagePathCgroup:75 : Allow path \
/var/lib/libvirt/images/drache3.qcow2, perms: rw 2019-05-31 11:58:55.659+0000: 30903: \
info : virObjectRef:382 : OBJECT_REF: obj=0x7f3ac813da60 2019-05-31 \
11:58:55.659+0000: 30903: debug : virFileClose:113 : Closed fd 27 2019-05-31 \
11:58:55.660+0000: 30903: debug : virFileClose:113 : Closed fd 27 2019-05-31 \
11:58:55.660+0000: 30903: debug : virCommandRunAsync:2488 : About to run \
LIBVIRT_LOG_OUTPUTS=3:stderr /usr/lib/libvirt/virt-aa-helper -r -u \
libvirt-db4e9ace-f27e-3981-1d57-a560bc6c132c -f /var/lib/libvirt/images/drache3.qcow2 \
2019-05-31 11:58:55.660+0000: 30903: debug : virFileClose:113 : Closed fd 30 \
2019-05-31 11:58:55.660+0000: 30903: debug : virFileClose:113 : Closed fd 32 \
2019-05-31 11:58:55.660+0000: 30903: debug : virCommandRunAsync:2491 : Command result \
0, with PID 31952 2019-05-31 11:58:55.660+0000: 30903: debug : virFileClose:113 : \
Closed fd 27 2019-05-31 11:58:55.660+0000: 30903: debug : virFileClose:113 : Closed \
fd 28 2019-05-31 11:58:55.799+0000: 30903: debug : virCommandRun:2339 : Result status \
0, stdout: '' stderr: '' 2019-05-31 11:58:55.799+0000: 30903: debug : \
virFileClose:113 : Closed fd 29 2019-05-31 11:58:55.799+0000: 30903: debug : \
virFileClose:113 : Closed fd 31 2019-05-31 11:58:55.800+0000: 30903: debug : \
virFileClose:113 : Closed fd 28 2019-05-31 11:58:55.801+0000: 30903: debug : \
virFileClose:113 : Closed fd 27 2019-05-31 11:58:55.801+0000: 30903: info : \
virObjectUnref:344 : OBJECT_UNREF: obj=0x7f3ac813da60 2019-05-31 11:58:55.801+0000: \
30903: info : virObjectUnref:344 : OBJECT_UNREF: obj=0x7f3ac8114c20 2019-05-31 \
11:58:55.801+0000: 30903: debug : qemuDomainObjEnterMonitorInternal:7371 : Entering \
monitor (mon=0x7f3ac0104150 vm=0x7f3ac816de60 name=drache) 2019-05-31 \
11:58:55.801+0000: 30903: info : virObjectRef:382 : OBJECT_REF: obj=0x7f3ac0104150 \
2019-05-31 11:58:55.801+0000: 30903: debug : qemuMonitorDiskNameLookup:3333 : \
mon:0x7f3ac0104150 vm:0x7f3ac816de60 json:1 fd:22 2019-05-31 11:58:55.802+0000: \
30903: debug : qemuMonitorJSONCommandWithFd:304 : Send command \
'{"execute":"query-block","id":"libvirt-14"}' for write with FD -1 2019-05-31 \
11:58:55.802+0000: 30903: info : qemuMonitorSend:1081 : QEMU_MONITOR_SEND_MSG: \
mon=0x7f3ac0104150 msg={"execute":"query-block","id":"libvirt-14"}  fd=-1
2019-05-31 11:58:55.802+0000: 30902: info : virObjectRef:382 : OBJECT_REF: \
obj=0x7f3ac0104150 2019-05-31 11:58:55.802+0000: 30902: info : qemuMonitorIOWrite:549 \
: QEMU_MONITOR_IO_WRITE: mon=0x7f3ac0104150 \
buf={"execute":"query-block","id":"libvirt-14"}  len=45 ret=45 errno=0
2019-05-31 11:58:55.802+0000: 30902: info : virObjectUnref:344 : OBJECT_UNREF: \
obj=0x7f3ac0104150 2019-05-31 11:58:55.803+0000: 30902: info : virObjectRef:382 : \
OBJECT_REF: obj=0x7f3ac0104150 2019-05-31 11:58:55.803+0000: 30902: info : \
virObjectUnref:344 : OBJECT_UNREF: obj=0x7f3ac0104150 2019-05-31 11:58:55.803+0000: \
30902: info : virObjectRef:382 : OBJECT_REF: obj=0x7f3ac0104150 2019-05-31 \
11:58:55.803+0000: 30902: info : virObjectUnref:344 : OBJECT_UNREF: \
obj=0x7f3ac0104150 2019-05-31 11:58:55.803+0000: 30902: info : virObjectRef:382 : \
OBJECT_REF: obj=0x7f3ac0104150 2019-05-31 11:58:55.803+0000: 30902: debug : \
qemuMonitorJSONIOProcessLine:196 : Line [{"return": [{"io-status": "ok", "device": \
"drive-virtio-disk0", "locked": false, "removable": false, "inserted": {"iops_rd": 0, \
"detect_zeroes": "off", "image": {"backing-image": {"virtual-size": 214748364800, \
"filename": "/var/lib/libvirt/images/drache3.qcow2", "cluster-size": 65536, "format": \
"qcow2", "actual-size": 210893295616, "format-specific": {"type": "qcow2", "data": \
{"compat": "1.1", "lazy-refcounts": false, "refcount-bits": 16, "corrupt": false}}, \
"dirty-flag": false}, "backing-filename-format": "qcow2", "virtual-size": \
214748364800, "filename": "/var/lib/libvirt/images/drache_overlaya.qcow2", \
"cluster-size": 65536, "format": "qcow2", "actual-size": 90944700416, \
"format-specific": {"type": "qcow2", "data": {"compat": "1.1", "lazy-refcounts": \
false, "refcount-bits": 16, "corrupt": false}}, "full-backing-filename": \
"/var/lib/libvirt/images/drache3.qcow2", "backing-filename": \
"/var/lib/libvirt/images/drache3.qcow2", "dirty-flag": false}, "iops_wr": 0, "ro": \
false, "node-name": "#block179", "backing_file_depth": 1, "drv": "qcow2", "iops": 0, \
"bps_wr": 0, "write_threshold": 0, "backing_file": \
"/var/lib/libvirt/images/drache3.qcow2", "encrypted": false, "bps": 0, "bps_rd": 0, \
"cache": {"no-flush": false, "direct": true, "writeback": true}, "file": \
"/var/lib/libvirt/images/drache_overlaya.qcow2", "encryption_key_missing": false}, \
"qdev": "/machine/peripheral/virtio-disk0/virtio-backend", "type": "unknown"}, \
{"io-status": "ok", "device": "drive-virtio-disk1", "locked": false, "removable": \
false, "inserted": {"iops_rd": 0, "detect_zeroes": "off", "image": {"backing-image": \
{"virtual-size": 429496729600, "filename": \
"/var/lib/libvirt/images/drache_addon.qcow2", "cluster-size": 65536, "format": \
"qcow2", "actual-size": 395671379968, "format-specific": {"type": "qcow2", "data": \
{"compat": "1.1", "lazy-refcounts": false, "refcount-bits": 16, "corrupt": false}}, \
"dirty-flag": false}, "backing-filename-format": "qcow2", "virtual-size": \
429496729600, "filename": "/var/lib/libvirt/images/drache_overlayb.qcow2", \
"cluster-size": 65536, "format": "qcow2", "actual-size": 115860705280, \
"format-specific": {"type": "qcow2", "data": {"compat": "1.1", "lazy-refcounts": \
false, "refcount-bits": 16, "corrupt": false}}, "full-backing-filename": \
"/var/lib/libvirt/images/drache_addon.qcow2", "backing-filename": \
"/var/lib/libvirt/images/drache_addon.qcow2", "dirty-flag": false}, "iops_wr": 0, \
"ro": false, "node-name": "#block567", "backing_file_depth": 1, "drv": "qcow2", \
"iops": 0, "bps_wr": 0, "write_threshold": 0, "backing_file": \
"/var/lib/libvirt/images/drache_addon.qcow2", "encrypted": false, "bps": 0, "bps_rd": \
0, "cache": {"no-flush": false, "direct": true, "writeback": true}, "file": \
"/var/lib/libvirt/images/drache_overlayb.qcow2", "encryption_key_missing": false}, \
"qdev": "/machine/peripheral/virtio-disk1/virtio-backend", "type": "unknown"}], "id": \
"libvirt-14"}] 2019-05-31 11:58:55.803+0000: 30902: info : \
qemuMonitorJSONIOProcessLine:216 : QEMU_MONITOR_RECV_REPLY: mon=0x7f3ac0104150 \
reply={"return": [{"io-status": "ok", "device": "drive-virtio-disk0", "locked": \
false, "removable": false, "inserted": {"iops_rd": 0, "detect_zeroes": "off", \
"image": {"backing-image": {"virtual-size": 214748364800, "filename": \
"/var/lib/libvirt/images/drache3.qcow2", "cluster-size": 65536, "format": "qcow2", \
"actual-size": 210893295616, "format-specific": {"type": "qcow2", "data": {"compat": \
"1.1", "lazy-refcounts": false, "refcount-bits": 16, "corrupt": false}}, \
"dirty-flag": false}, "backing-filename-format": "qcow2", "virtual-size": \
214748364800, "filename": "/var/lib/libvirt/images/drache_overlaya.qcow2", \
"cluster-size": 65536, "format": "qcow2", "actual-size": 90944700416, \
"format-specific": {"type": "qcow2", "data": {"compat": "1.1", "lazy-refcounts": \
false, "refcount-bits": 16, "corrupt": false}}, "full-backing-filename": \
"/var/lib/libvirt/images/drache3.qcow2", "backing-filename": \
"/var/lib/libvirt/images/drache3.qcow2", "dirty-flag": false}, "iops_wr": 0, "ro": \
false, "node-name": "#block179", "backing_file_depth": 1, "drv": "qcow2", "iops": 0, \
"bps_wr": 0, "write_threshold": 0, "backing_file": \
"/var/lib/libvirt/images/drache3.qcow2", "encrypted": false, "bps": 0, "bps_rd": 0, \
"cache": {"no-flush": false, "direct": true, "writeback": true}, "file": \
"/var/lib/libvirt/images/drache_overlaya.qcow2", "encryption_key_missing": false}, \
"qdev": "/machine/peripheral/virtio-disk0/virtio-backend", "type": "unknown"}, \
{"io-status": "ok", "device": "drive-virtio-disk1", "locked": false, "removable": \
false, "inserted": {"iops_rd": 0, "detect_zeroes": "off", "image": {"backing-image": \
{"virtual-size": 429496729600, "filename": \
"/var/lib/libvirt/images/drache_addon.qcow2", "cluster-size": 65536, "format": \
"qcow2", "actual-size": 395671379968, "format-specific": {"type": "qcow2", "data": \
{"compat": "1.1", "lazy-refcounts": false, "refcount-bits": 16, "corrupt": false}}, \
"dirty-flag": false}, "backing-filename-format": "qcow2", "virtual-size": \
429496729600, "filename": "/var/lib/libvirt/images/drache_overlayb.qcow2", \
"cluster-size": 65536, "format": "qcow2", "actual-size": 115860705280, \
"format-specific": {"type": "qcow2", "data": {"compat": "1.1", "lazy-refcounts": \
false, "refcount-bits": 16, "corrupt": false}}, "full-backing-filename": \
"/var/lib/libvirt/images/drache_addon.qcow2", "backing-filename": \
"/var/lib/libvirt/images/drache_addon.qcow2", "dirty-flag": false}, "iops_wr": 0, \
"ro": false, "node-name": "#block567", "backing_file_depth": 1, "drv": "qcow2", \
"iops": 0, "bps_wr": 0, "write_threshold": 0, "backing_file": \
"/var/lib/libvirt/images/drache_addon.qcow2", "encrypted": false, "bps": 0, "bps_rd": \
0, "cache": {"no-flush": false, "direct": true, "writeback": true}, "file": \
"/var/lib/libvirt/images/drache_overlayb.qcow2", "encryption_key_missing": false}, \
"qdev": "/machine/peripheral/virtio-disk1/virtio-backend", "type": "unknown"}], "id": \
"libvirt-14"} 2019-05-31 11:58:55.803+0000: 30902: info : virObjectUnref:344 : \
OBJECT_UNREF: obj=0x7f3ac0104150 2019-05-31 11:58:55.803+0000: 30903: debug : \
qemuMonitorJSONCommandWithFd:309 : Receive command reply ret=0 \
rxObject=0x557456587d10 2019-05-31 11:58:55.803+0000: 30903: debug : \
qemuMonitorDiskNameLookup:3333 : mon:0x7f3ac0104150 vm:0x7f3ac816de60 json:1 fd:22 \
2019-05-31 11:58:55.803+0000: 30903: debug : qemuMonitorJSONCommandWithFd:304 : Send \
command '{"execute":"query-block","id":"libvirt-15"}' for write with FD -1 2019-05-31 \
11:58:55.803+0000: 30903: info : qemuMonitorSend:1081 : QEMU_MONITOR_SEND_MSG: \
mon=0x7f3ac0104150 msg={"execute":"query-block","id":"libvirt-15"}  fd=-1
2019-05-31 11:58:55.803+0000: 30902: info : virObjectRef:382 : OBJECT_REF: \
obj=0x7f3ac0104150 2019-05-31 11:58:55.803+0000: 30902: info : qemuMonitorIOWrite:549 \
: QEMU_MONITOR_IO_WRITE: mon=0x7f3ac0104150 \
buf={"execute":"query-block","id":"libvirt-15"}  len=45 ret=45 errno=0
2019-05-31 11:58:55.803+0000: 30902: info : virObjectUnref:344 : OBJECT_UNREF: \
obj=0x7f3ac0104150 2019-05-31 11:58:55.804+0000: 30902: info : virObjectRef:382 : \
OBJECT_REF: obj=0x7f3ac0104150 2019-05-31 11:58:55.804+0000: 30902: info : \
virObjectUnref:344 : OBJECT_UNREF: obj=0x7f3ac0104150 2019-05-31 11:58:55.804+0000: \
30902: info : virObjectRef:382 : OBJECT_REF: obj=0x7f3ac0104150 2019-05-31 \
11:58:55.804+0000: 30902: info : virObjectUnref:344 : OBJECT_UNREF: \
obj=0x7f3ac0104150 2019-05-31 11:58:55.804+0000: 30902: info : virObjectRef:382 : \
OBJECT_REF: obj=0x7f3ac0104150 2019-05-31 11:58:55.804+0000: 30902: debug : \
qemuMonitorJSONIOProcessLine:196 : Line [{"return": [{"io-status": "ok", "device": \
"drive-virtio-disk0", "locked": false, "removable": false, "inserted": {"iops_rd": 0, \
"detect_zeroes": "off", "image": {"backing-image": {"virtual-size": 214748364800, \
"filename": "/var/lib/libvirt/images/drache3.qcow2", "cluster-size": 65536, "format": \
"qcow2", "actual-size": 210893295616, "format-specific": {"type": "qcow2", "data": \
{"compat": "1.1", "lazy-refcounts": false, "refcount-bits": 16, "corrupt": false}}, \
"dirty-flag": false}, "backing-filename-format": "qcow2", "virtual-size": \
214748364800, "filename": "/var/lib/libvirt/images/drache_overlaya.qcow2", \
"cluster-size": 65536, "format": "qcow2", "actual-size": 90944700416, \
"format-specific": {"type": "qcow2", "data": {"compat": "1.1", "lazy-refcounts": \
false, "refcount-bits": 16, "corrupt": false}}, "full-backing-filename": \
"/var/lib/libvirt/images/drache3.qcow2", "backing-filename": \
"/var/lib/libvirt/images/drache3.qcow2", "dirty-flag": false}, "iops_wr": 0, "ro": \
false, "node-name": "#block179", "backing_file_depth": 1, "drv": "qcow2", "iops": 0, \
"bps_wr": 0, "write_threshold": 0, "backing_file": \
"/var/lib/libvirt/images/drache3.qcow2", "encrypted": false, "bps": 0, "bps_rd": 0, \
"cache": {"no-flush": false, "direct": true, "writeback": true}, "file": \
"/var/lib/libvirt/images/drache_overlaya.qcow2", "encryption_key_missing": false}, \
"qdev": "/machine/peripheral/virtio-disk0/virtio-backend", "type": "unknown"}, \
{"io-status": "ok", "device": "drive-virtio-disk1", "locked": false, "removable": \
false, "inserted": {"iops_rd": 0, "detect_zeroes": "off", "image": {"backing-image": \
{"virtual-size": 429496729600, "filename": \
"/var/lib/libvirt/images/drache_addon.qcow2", "cluster-size": 65536, "format": \
"qcow2", "actual-size": 395671379968, "format-specific": {"type": "qcow2", "data": \
{"compat": "1.1", "lazy-refcounts": false, "refcount-bits": 16, "corrupt": false}}, \
"dirty-flag": false}, "backing-filename-format": "qcow2", "virtual-size": \
429496729600, "filename": "/var/lib/libvirt/images/drache_overlayb.qcow2", \
"cluster-size": 65536, "format": "qcow2", "actual-size": 115860705280, \
"format-specific": {"type": "qcow2", "data": {"compat": "1.1", "lazy-refcounts": \
false, "refcount-bits": 16, "corrupt": false}}, "full-backing-filename": \
"/var/lib/libvirt/images/drache_addon.qcow2", "backing-filename": \
"/var/lib/libvirt/images/drache_addon.qcow2", "dirty-flag": false}, "iops_wr": 0, \
"ro": false, "node-name": "#block567", "backing_file_depth": 1, "drv": "qcow2", \
"iops": 0, "bps_wr": 0, "write_threshold": 0, "backing_file": \
"/var/lib/libvirt/images/drache_addon.qcow2", "encrypted": false, "bps": 0, "bps_rd": \
0, "cache": {"no-flush": false, "direct": true, "writeback": true}, "file": \
"/var/lib/libvirt/images/drache_overlayb.qcow2", "encryption_key_missing": false}, \
"qdev": "/machine/peripheral/virtio-disk1/virtio-backend", "type": "unknown"}], "id": \
"libvirt-15"}] 2019-05-31 11:58:55.804+0000: 30902: info : \
qemuMonitorJSONIOProcessLine:216 : QEMU_MONITOR_RECV_REPLY: mon=0x7f3ac0104150 \
reply={"return": [{"io-status": "ok", "device": "drive-virtio-disk0", "locked": \
false, "removable": false, "inserted": {"iops_rd": 0, "detect_zeroes": "off", \
"image": {"backing-image": {"virtual-size": 214748364800, "filename": \
"/var/lib/libvirt/images/drache3.qcow2", "cluster-size": 65536, "format": "qcow2", \
"actual-size": 210893295616, "format-specific": {"type": "qcow2", "data": {"compat": \
"1.1", "lazy-refcounts": false, "refcount-bits": 16, "corrupt": false}}, \
"dirty-flag": false}, "backing-filename-format": "qcow2", "virtual-size": \
214748364800, "filename": "/var/lib/libvirt/images/drache_overlaya.qcow2", \
"cluster-size": 65536, "format": "qcow2", "actual-size": 90944700416, \
"format-specific": {"type": "qcow2", "data": {"compat": "1.1", "lazy-refcounts": \
false, "refcount-bits": 16, "corrupt": false}}, "full-backing-filename": \
"/var/lib/libvirt/images/drache3.qcow2", "backing-filename": \
"/var/lib/libvirt/images/drache3.qcow2", "dirty-flag": false}, "iops_wr": 0, "ro": \
false, "node-name": "#block179", "backing_file_depth": 1, "drv": "qcow2", "iops": 0, \
"bps_wr": 0, "write_threshold": 0, "backing_file": \
"/var/lib/libvirt/images/drache3.qcow2", "encrypted": false, "bps": 0, "bps_rd": 0, \
"cache": {"no-flush": false, "direct": true, "writeback": true}, "file": \
"/var/lib/libvirt/images/drache_overlaya.qcow2", "encryption_key_missing": false}, \
"qdev": "/machine/peripheral/virtio-disk0/virtio-backend", "type": "unknown"}, \
{"io-status": "ok", "device": "drive-virtio-disk1", "locked": false, "removable": \
false, "inserted": {"iops_rd": 0, "detect_zeroes": "off", "image": {"backing-image": \
{"virtual-size": 429496729600, "filename": \
"/var/lib/libvirt/images/drache_addon.qcow2", "cluster-size": 65536, "format": \
"qcow2", "actual-size": 395671379968, "format-specific": {"type": "qcow2", "data": \
{"compat": "1.1", "lazy-refcounts": false, "refcount-bits": 16, "corrupt": false}}, \
"dirty-flag": false}, "backing-filename-format": "qcow2", "virtual-size": \
429496729600, "filename": "/var/lib/libvirt/images/drache_overlayb.qcow2", \
"cluster-size": 65536, "format": "qcow2", "actual-size": 115860705280, \
"format-specific": {"type": "qcow2", "data": {"compat": "1.1", "lazy-refcounts": \
false, "refcount-bits": 16, "corrupt": false}}, "full-backing-filename": \
"/var/lib/libvirt/images/drache_addon.qcow2", "backing-filename": \
"/var/lib/libvirt/images/drache_addon.qcow2", "dirty-flag": false}, "iops_wr": 0, \
"ro": false, "node-name": "#block567", "backing_file_depth": 1, "drv": "qcow2", \
"iops": 0, "bps_wr": 0, "write_threshold": 0, "backing_file": \
"/var/lib/libvirt/images/drache_addon.qcow2", "encrypted": false, "bps": 0, "bps_rd": \
0, "cache": {"no-flush": false, "direct": true, "writeback": true}, "file": \
"/var/lib/libvirt/images/drache_overlayb.qcow2", "encryption_key_missing": false}, \
"qdev": "/machine/peripheral/virtio-disk1/virtio-backend", "type": "unknown"}], "id": \
"libvirt-15"} 2019-05-31 11:58:55.804+0000: 30902: info : virObjectUnref:344 : \
OBJECT_UNREF: obj=0x7f3ac0104150 2019-05-31 11:58:55.804+0000: 30903: debug : \
qemuMonitorJSONCommandWithFd:309 : Receive command reply ret=0 \
rxObject=0x5574565884b0 2019-05-31 11:58:55.804+0000: 30903: debug : \
qemuMonitorBlockCommit:3305 : device=drive-virtio-disk0, \
top=/var/lib/libvirt/images/drache_overlaya.qcow2, \
base=/var/lib/libvirt/images/drache3.qcow2, backingName=&lt;null&gt;, bandwidth=0 \
2019-05-31 11:58:55.804+0000: 30903: debug : qemuMonitorBlockCommit:3307 : \
mon:0x7f3ac0104150 vm:0x7f3ac816de60 json:1 fd:22 2019-05-31 11:58:55.804+0000: \
30903: debug : qemuMonitorJSONCommandWithFd:304 : Send command \
'{"execute":"block-commit","arguments":{"device":"drive-virtio-disk0","top":"/var/lib/ \
libvirt/images/drache_overlaya.qcow2","base":"/var/lib/libvirt/images/drache3.qcow2"},"id":"libvirt-16"}' \
for write with FD -1 2019-05-31 11:58:55.804+0000: 30903: info : qemuMonitorSend:1081 \
: QEMU_MONITOR_SEND_MSG: mon=0x7f3ac0104150 \
msg={"execute":"block-commit","arguments":{"device":"drive-virtio-disk0","top":"/var/l \
ib/libvirt/images/drache_overlaya.qcow2","base":"/var/lib/libvirt/images/drache3.qcow2"},"id":"libvirt-16"}
  fd=-1
2019-05-31 11:58:55.804+0000: 30902: info : virObjectRef:382 : OBJECT_REF: \
obj=0x7f3ac0104150 2019-05-31 11:58:55.804+0000: 30902: info : qemuMonitorIOWrite:549 \
: QEMU_MONITOR_IO_WRITE: mon=0x7f3ac0104150 \
buf={"execute":"block-commit","arguments":{"device":"drive-virtio-disk0","top":"/var/l \
ib/libvirt/images/drache_overlaya.qcow2","base":"/var/lib/libvirt/images/drache3.qcow2"},"id":"libvirt-16"}
  len=191 ret=191 errno=0
2019-05-31 11:58:55.804+0000: 30902: info : virObjectUnref:344 : OBJECT_UNREF: \
obj=0x7f3ac0104150 2019-05-31 11:58:55.809+0000: 30902: info : virObjectRef:382 : \
OBJECT_REF: obj=0x7f3ac0104150 2019-05-31 11:58:55.809+0000: 30902: debug : \
qemuMonitorJSONIOProcessLine:196 : Line [{"id": "libvirt-16", "error": {"class": \
"GenericError", "desc": "Could not reopen file: Permission denied"}}] 2019-05-31 \
11:58:55.809+0000: 30902: info : qemuMonitorJSONIOProcessLine:216 : \
QEMU_MONITOR_RECV_REPLY: mon=0x7f3ac0104150 reply={"id": "libvirt-16", "error": \
{"class": "GenericError", "desc": "Could not reopen file: Permission denied"}} \
2019-05-31 11:58:55.809+0000: 30902: info : virObjectUnref:344 : OBJECT_UNREF: \
obj=0x7f3ac0104150 2019-05-31 11:58:55.809+0000: 30903: debug : \
qemuMonitorJSONCommandWithFd:309 : Receive command reply ret=0 \
rxObject=0x5574565b15a0 2019-05-31 11:58:55.809+0000: 30903: debug : \
qemuMonitorJSONCheckError:384 : unable to execute QEMU command \
{"execute":"block-commit","arguments":{"device":"drive-virtio-disk0","top":"/var/lib/l \
ibvirt/images/drache_overlaya.qcow2","base":"/var/lib/libvirt/images/drache3.qcow2"},"id":"libvirt-16"}: \
{"id":"libvirt-16","error":{"class":"GenericError","desc":"Could not reopen file: \
Permission denied"}} 2019-05-31 11:58:55.809+0000: 30903: error : \
qemuMonitorJSONCheckError:395 : internal error: unable to execute QEMU command \
'block-commit': Could not reopen file: Permission denied 2019-05-31 \
11:58:55.809+0000: 30903: info : virObjectUnref:344 : OBJECT_UNREF: \
obj=0x7f3ac0104150 2019-05-31 11:58:55.809+0000: 30903: debug : \
qemuDomainObjExitMonitorInternal:7394 : Exited monitor (mon=0x7f3ac0104150 \
vm=0x7f3ac816de60 name=drache) 2019-05-31 11:58:55.809+0000: 30903: debug : \
virFileMakePathHelper:3038 : path=/var/run/libvirt/qemu mode=0777 2019-05-31 \
11:58:55.809+0000: 30903: debug : virFileClose:113 : Closed fd 27 2019-05-31 \
11:58:55.809+0000: 30903: info : virObjectRef:382 : OBJECT_REF: obj=0x7f3ac8114c20 \
2019-05-31 11:58:55.809+0000: 30903: debug : virDomainLockImageAttach:263 : \
plugin=0x7f3ac812ec30 dom=0x7f3ac816de60 src=0x7f3ac816f7c0 2019-05-31 \
11:58:55.809+0000: 30903: debug : virDomainLockManagerNew:134 : plugin=0x7f3ac812ec30 \
dom=0x7f3ac816de60 withResources=0 2019-05-31 11:58:55.809+0000: 30903: debug : \
virLockManagerPluginGetDriver:280 : plugin=0x7f3ac812ec30 2019-05-31 \
11:58:55.809+0000: 30903: debug : virLockManagerNew:304 : driver=0x7f3b14fae220 \
type=0 nparams=5 params=0x7f3b108835e0 flags=0x0 2019-05-31 11:58:55.809+0000: 30903: \
debug : virLockManagerLogParams:97 :   key=uuid type=uuid \
value=db4e9ace-f27e-3981-1d57-a560bc6c132c 2019-05-31 11:58:55.809+0000: 30903: debug \
: virLockManagerLogParams:90 :   key=name type=string value=drache 2019-05-31 \
11:58:55.809+0000: 30903: debug : virLockManagerLogParams:78 :   key=id type=uint \
value=5 2019-05-31 11:58:55.809+0000: 30903: debug : virLockManagerLogParams:78 :   \
key=pid type=uint value=23158 2019-05-31 11:58:55.809+0000: 30903: debug : \
virLockManagerLogParams:93 :   key=uri type=cstring value=qemu:///system 2019-05-31 \
11:58:55.809+0000: 30903: debug : virDomainLockManagerAddImage:90 : Add disk \
/var/lib/libvirt/images/drache3.qcow2 2019-05-31 11:58:55.809+0000: 30903: debug : \
virLockManagerAddResource:331 : lock=0x7f3b08005e10 type=0 \
name=/var/lib/libvirt/images/drache3.qcow2 nparams=0 params=(nil) flags=0x1 \
2019-05-31 11:58:55.809+0000: 30903: debug : virLockManagerAcquire:349 : \
lock=0x7f3b08005e10 state='&lt;null&gt;' flags=0x0 action=0 fd=(nil) 2019-05-31 \
11:58:55.809+0000: 30903: debug : virLockManagerFree:386 : lock=0x7f3b08005e10 \
2019-05-31 11:58:55.809+0000: 30903: debug : qemuSetupImagePathCgroup:75 : Allow path \
/var/lib/libvirt/images/drache3.qcow2, perms: r 2019-05-31 11:58:55.809+0000: 30903: \
info : virObjectRef:382 : OBJECT_REF: obj=0x7f3ac813da60 2019-05-31 \
11:58:55.809+0000: 30903: debug : virFileClose:113 : Closed fd 27 2019-05-31 \
11:58:55.809+0000: 30903: debug : virFileClose:113 : Closed fd 27 2019-05-31 \
11:58:55.810+0000: 30903: debug : virCommandRunAsync:2488 : About to run \
LIBVIRT_LOG_OUTPUTS=3:stderr /usr/lib/libvirt/virt-aa-helper -r -u \
libvirt-db4e9ace-f27e-3981-1d57-a560bc6c132c -f /var/lib/libvirt/images/drache3.qcow2 \
2019-05-31 11:58:55.810+0000: 30903: debug : virFileClose:113 : Closed fd 30 \
2019-05-31 11:58:55.810+0000: 30903: debug : virFileClose:113 : Closed fd 32 \
2019-05-31 11:58:55.810+0000: 30903: debug : virCommandRunAsync:2491 : Command result \
0, with PID 31956 2019-05-31 11:58:55.810+0000: 30903: debug : virFileClose:113 : \
Closed fd 27 2019-05-31 11:58:55.810+0000: 30903: debug : virFileClose:113 : Closed \
fd 28 2019-05-31 11:58:55.948+0000: 30903: debug : virCommandRun:2339 : Result status \
0, stdout: '' stderr: '' 2019-05-31 11:58:55.948+0000: 30903: debug : \
virFileClose:113 : Closed fd 29 2019-05-31 11:58:55.948+0000: 30903: debug : \
virFileClose:113 : Closed fd 31 2019-05-31 11:58:55.949+0000: 30903: debug : \
virFileClose:113 : Closed fd 28 2019-05-31 11:58:55.951+0000: 30903: debug : \
virFileClose:113 : Closed fd 27 2019-05-31 11:58:55.951+0000: 30903: info : \
virObjectUnref:344 : OBJECT_UNREF: obj=0x7f3ac813da60 2019-05-31 11:58:55.951+0000: \
30903: info : virObjectUnref:344 : OBJECT_UNREF: obj=0x7f3ac8114c20 2019-05-31 \
11:58:55.951+0000: 30903: debug : qemuDomainObjEndJob:7255 : Stopping job: modify \
(async=none vm=0x7f3ac816de60 name=drache) 2019-05-31 11:58:55.951+0000: 30903: info \
: virObjectUnref:344 : OBJECT_UNREF: obj=0x7f3ac8114c20 2019-05-31 11:58:55.951+0000: \
30903: info : virObjectUnref:344 : OBJECT_UNREF: obj=0x7f3ac816de60 2019-05-31 \
11:58:55.951+0000: 30903: info : virObjectUnref:344 : OBJECT_UNREF: \
obj=0x7f3b080037b0 2019-05-31 11:58:55.951+0000: 30903: info : virObjectUnref:346 : \
OBJECT_DISPOSE: obj=0x7f3b080037b0 2019-05-31 11:58:55.951+0000: 30903: debug : \
virDomainDispose:318 : release domain 0x7f3b080037b0 drache \
db4e9ace-f27e-3981-1d57-a560bc6c132c 2019-05-31 11:58:55.951+0000: 30903: info : \
virObjectUnref:344 : OBJECT_UNREF: obj=0x7f3b00001100 2019-05-31 11:58:55.951+0000: \
30903: debug : virThreadJobClear:119 : Thread 30903 (virNetServerHandleJob) finished \
job remoteDispatchDomainBlockCommit with ret=-1 2019-05-31 11:58:55.951+0000: 30903: \
info : virObjectUnref:344 : OBJECT_UNREF: obj=0x7f3b08000e80 2019-05-31 \
11:58:55.951+0000: 30903: info : virObjectUnref:344 : OBJECT_UNREF: \
obj=0x7f3b08000e80 2019-05-31 11:58:55.951+0000: 30903: info : virObjectUnref:344 : \
OBJECT_UNREF: obj=0x5574565ade60 2019-05-31 11:58:55.951+0000: 30903: info : \
virObjectUnref:344 : OBJECT_UNREF: obj=0x5574565b8380 2019-05-31 11:58:55.951+0000: \
30902: info : virObjectRef:382 : OBJECT_REF: obj=0x557456599160 2019-05-31 \
11:58:55.951+0000: 30902: info : virObjectRef:382 : OBJECT_REF: obj=0x5574565ade60 \
2019-05-31 11:58:55.951+0000: 30902: info : virObjectRef:382 : OBJECT_REF: \
obj=0x5574565b8380 2019-05-31 11:58:55.951+0000: 30902: info : virObjectUnref:344 : \
OBJECT_UNREF: obj=0x557456599160 2019-05-31 11:58:55.952+0000: 30912: info : \
virObjectRef:382 : OBJECT_REF: obj=0x7f3b08000e80 2019-05-31 11:58:55.952+0000: \
30912: info : virObjectRef:382 : OBJECT_REF: obj=0x7f3b08000e80 2019-05-31 \
11:58:55.952+0000: 30912: debug : virThreadJobSet:94 : Thread 30912 \
(virNetServerHandleJob) is now running job \
remoteDispatchConnectDomainEventCallbackDeregisterAny 2019-05-31 11:58:55.952+0000: \
30912: debug : virConnectDomainEventDeregisterAny:9319 : conn=0x7f3b00001100, \
callbackID=0 2019-05-31 11:58:55.952+0000: 30912: info : virObjectRef:382 : \
OBJECT_REF: obj=0x5574565983e0 2019-05-31 11:58:55.952+0000: 30912: debug : \
virAccessManagerCheckConnect:217 : manager=0x5574565983e0(name=stack) driver=QEMU \
perm=1 2019-05-31 11:58:55.952+0000: 30912: debug : virAccessManagerCheckConnect:217 \
: manager=0x557456598630(name=none) driver=QEMU perm=1 2019-05-31 11:58:55.952+0000: \
30912: info : virObjectUnref:344 : OBJECT_UNREF: obj=0x5574565983e0 2019-05-31 \
11:58:55.952+0000: 30912: info : virObjectUnref:344 : OBJECT_UNREF: \
obj=0x5574565b8380 2019-05-31 11:58:55.952+0000: 30912: info : virObjectUnref:344 : \
OBJECT_UNREF: obj=0x7f3b00001100 2019-05-31 11:58:55.952+0000: 30912: debug : \
virThreadJobClear:119 : Thread 30912 (virNetServerHandleJob) finished job \
remoteDispatchConnectDomainEventCallbackDeregisterAny with ret=0 2019-05-31 \
11:58:55.952+0000: 30912: info : virObjectUnref:344 : OBJECT_UNREF: \
obj=0x7f3b08000e80 2019-05-31 11:58:55.952+0000: 30912: info : virObjectUnref:344 : \
OBJECT_UNREF: obj=0x7f3b08000e80 2019-05-31 11:58:55.952+0000: 30912: info : \
virObjectUnref:344 : OBJECT_UNREF: obj=0x5574565ade60 2019-05-31 11:58:55.952+0000: \
30912: info : virObjectUnref:344 : OBJECT_UNREF: obj=0x5574565b8380 2019-05-31 \
11:58:55.952+0000: 30902: info : virObjectRef:382 : OBJECT_REF: obj=0x557456599160 \
2019-05-31 11:58:55.952+0000: 30902: info : virObjectRef:382 : OBJECT_REF: \
obj=0x5574565ade60 2019-05-31 11:58:55.952+0000: 30902: info : virObjectRef:382 : \
OBJECT_REF: obj=0x5574565b8380 2019-05-31 11:58:55.952+0000: 30902: info : \
virObjectUnref:344 : OBJECT_UNREF: obj=0x557456599160 2019-05-31 11:58:55.952+0000: \
30904: info : virObjectRef:382 : OBJECT_REF: obj=0x7f3b08000e80 2019-05-31 \
11:58:55.952+0000: 30904: info : virObjectRef:382 : OBJECT_REF: obj=0x7f3b08000e80 \
2019-05-31 11:58:55.952+0000: 30904: debug : virThreadJobSet:94 : Thread 30904 \
(virNetServerHandleJob) is now running job \
remoteDispatchConnectDomainEventCallbackDeregisterAny 2019-05-31 11:58:55.952+0000: \
30904: debug : virConnectDomainEventDeregisterAny:9319 : conn=0x7f3b00001100, \
callbackID=1 2019-05-31 11:58:55.952+0000: 30904: info : virObjectRef:382 : \
OBJECT_REF: obj=0x5574565983e0 2019-05-31 11:58:55.952+0000: 30904: debug : \
virAccessManagerCheckConnect:217 : manager=0x5574565983e0(name=stack) driver=QEMU \
perm=1 2019-05-31 11:58:55.952+0000: 30904: debug : virAccessManagerCheckConnect:217 \
: manager=0x557456598630(name=none) driver=QEMU perm=1 2019-05-31 11:58:55.952+0000: \
30904: info : virObjectUnref:344 : OBJECT_UNREF: obj=0x5574565983e0 2019-05-31 \
11:58:55.952+0000: 30904: info : virObjectUnref:344 : OBJECT_UNREF: \
obj=0x5574565b8380 2019-05-31 11:58:55.952+0000: 30904: info : virObjectUnref:344 : \
OBJECT_UNREF: obj=0x7f3b00001100 2019-05-31 11:58:55.952+0000: 30904: debug : \
virThreadJobClear:119 : Thread 30904 (virNetServerHandleJob) finished job \
remoteDispatchConnectDomainEventCallbackDeregisterAny with ret=0 2019-05-31 \
11:58:55.952+0000: 30904: info : virObjectUnref:344 : OBJECT_UNREF: \
obj=0x7f3b08000e80 2019-05-31 11:58:55.952+0000: 30904: info : virObjectUnref:344 : \
OBJECT_UNREF: obj=0x7f3b08000e80 2019-05-31 11:58:55.952+0000: 30904: info : \
virObjectUnref:344 : OBJECT_UNREF: obj=0x5574565ade60 2019-05-31 11:58:55.952+0000: \
30902: info : virObjectUnref:344 : OBJECT_UNREF: obj=0x7f3ac8110390 2019-05-31 \
11:58:55.952+0000: 30904: info : virObjectUnref:344 : OBJECT_UNREF: \
obj=0x5574565b8380 2019-05-31 11:58:55.952+0000: 30902: info : virObjectRef:382 : \
OBJECT_REF: obj=0x557456599160 2019-05-31 11:58:55.952+0000: 30902: info : \
virObjectRef:382 : OBJECT_REF: obj=0x5574565ade60 2019-05-31 11:58:55.952+0000: \
30902: info : virObjectRef:382 : OBJECT_REF: obj=0x5574565b8380 2019-05-31 \
11:58:55.952+0000: 30902: info : virObjectUnref:344 : OBJECT_UNREF: \
obj=0x557456599160 2019-05-31 11:58:55.952+0000: 30906: info : virObjectRef:382 : \
OBJECT_REF: obj=0x7f3b08000e80 2019-05-31 11:58:55.952+0000: 30906: info : \
virObjectRef:382 : OBJECT_REF: obj=0x7f3b08000e80 2019-05-31 11:58:55.952+0000: \
30906: debug : virThreadJobSet:94 : Thread 30906 (virNetServerHandleJob) is now \
running job remoteDispatchConnectUnregisterCloseCallback 2019-05-31 \
11:58:55.952+0000: 30906: debug : virConnectUnregisterCloseCallback:1410 : \
conn=0x7f3b00001100 2019-05-31 11:58:55.952+0000: 30906: debug : \
virThreadJobClear:119 : Thread 30906 (virNetServerHandleJob) finished job \
remoteDispatchConnectUnregisterCloseCallback with ret=0 2019-05-31 11:58:55.952+0000: \
30906: info : virObjectUnref:344 : OBJECT_UNREF: obj=0x7f3b08000e80 2019-05-31 \
11:58:55.952+0000: 30906: info : virObjectUnref:344 : OBJECT_UNREF: \
obj=0x7f3b08000e80 2019-05-31 11:58:55.952+0000: 30906: info : virObjectUnref:344 : \
OBJECT_UNREF: obj=0x5574565ade60 2019-05-31 11:58:55.952+0000: 30906: info : \
virObjectUnref:344 : OBJECT_UNREF: obj=0x5574565b8380 2019-05-31 11:58:55.953+0000: \
30902: info : virObjectRef:382 : OBJECT_REF: obj=0x557456599160 2019-05-31 \
11:58:55.953+0000: 30902: info : virObjectRef:382 : OBJECT_REF: obj=0x5574565ade60 \
2019-05-31 11:58:55.953+0000: 30902: info : virObjectRef:382 : OBJECT_REF: \
obj=0x5574565b8380 2019-05-31 11:58:55.953+0000: 30902: info : virObjectUnref:344 : \
OBJECT_UNREF: obj=0x557456599160 2019-05-31 11:58:55.953+0000: 30907: info : \
virObjectRef:382 : OBJECT_REF: obj=0x7f3b08000e80 2019-05-31 11:58:55.953+0000: \
30907: info : virObjectRef:382 : OBJECT_REF: obj=0x7f3b08000e80 2019-05-31 \
11:58:55.953+0000: 30907: debug : virThreadJobSet:94 : Thread 30907 \
(virNetServerHandleJob) is now running job remoteDispatchConnectClose 2019-05-31 \
11:58:55.953+0000: 30907: debug : virThreadJobClear:119 : Thread 30907 \
(virNetServerHandleJob) finished job remoteDispatchConnectClose with ret=0 2019-05-31 \
11:58:55.953+0000: 30907: info : virObjectUnref:344 : OBJECT_UNREF: \
obj=0x7f3b08000e80 2019-05-31 11:58:55.953+0000: 30907: info : virObjectUnref:344 : \
OBJECT_UNREF: obj=0x7f3b08000e80 2019-05-31 11:58:55.953+0000: 30907: info : \
virObjectUnref:344 : OBJECT_UNREF: obj=0x5574565ade60 2019-05-31 11:58:55.953+0000: \
30907: info : virObjectUnref:344 : OBJECT_UNREF: obj=0x5574565b8380 2019-05-31 \
11:58:55.953+0000: 30902: info : virObjectRef:382 : OBJECT_REF: obj=0x5574565b8380 \
2019-05-31 11:58:55.953+0000: 30902: info : virObjectUnref:344 : OBJECT_UNREF: \
obj=0x5574565b2310 2019-05-31 11:58:55.953+0000: 30902: info : virObjectUnref:344 : \
OBJECT_UNREF: obj=0x5574565b8380 2019-05-31 11:58:55.953+0000: 30902: info : \
virObjectRef:382 : OBJECT_REF: obj=0x5574565b8380 2019-05-31 11:58:55.953+0000: \
30902: debug : daemonRemoveAllClientStreams:502 : stream=(nil) 2019-05-31 \
11:58:55.953+0000: 30902: info : virObjectNew:248 : OBJECT_NEW: obj=0x5574565c09b0 \
classname=virIdentity 2019-05-31 11:58:55.953+0000: 30902: debug : \
virIdentitySetAttr:241 : ident=0x5574565c09b0 attribute=4 value=30902 2019-05-31 \
11:58:55.953+0000: 30902: debug : virFileClose:113 : Closed fd 27 2019-05-31 \
11:58:55.953+0000: 30902: debug : virIdentitySetAttr:241 : ident=0x5574565c09b0 \
attribute=5 value=32893009 2019-05-31 11:58:55.953+0000: 30902: debug : \
virIdentitySetAttr:241 : ident=0x5574565c09b0 attribute=0 value=root 2019-05-31 \
11:58:55.953+0000: 30902: debug : virIdentitySetAttr:241 : ident=0x5574565c09b0 \
attribute=1 value=0 2019-05-31 11:58:55.953+0000: 30902: debug : \
virIdentitySetAttr:241 : ident=0x5574565c09b0 attribute=2 value=root 2019-05-31 \
11:58:55.953+0000: 30902: debug : virIdentitySetAttr:241 : ident=0x5574565c09b0 \
attribute=3 value=0 2019-05-31 11:58:55.953+0000: 30902: info : virObjectRef:382 : \
OBJECT_REF: obj=0x5574565c09b0 2019-05-31 11:58:55.953+0000: 30902: info : \
virObjectUnref:344 : OBJECT_UNREF: obj=0x5574565c09b0 2019-05-31 11:58:55.953+0000: \
30902: info : virObjectUnref:344 : OBJECT_UNREF: obj=0x5574565c09b0 2019-05-31 \
11:58:55.953+0000: 30902: info : virObjectUnref:346 : OBJECT_DISPOSE: \
obj=0x5574565c09b0 2019-05-31 11:58:55.953+0000: 30902: info : virObjectUnref:344 : \
OBJECT_UNREF: obj=0x5574565b8380 2019-05-31 11:58:55.953+0000: 30902: info : \
virObjectUnref:344 : OBJECT_UNREF: obj=0x5574565c8d10 2019-05-31 11:58:55.953+0000: \
30902: info : virObjectUnref:344 : OBJECT_UNREF: obj=0x5574565b8380 2019-05-31 \
11:58:55.953+0000: 30902: info : virObjectUnref:344 : OBJECT_UNREF: \
2019-05-31 11:58:55.953+0000: 30902: info : virObjectUnref:344 : OBJECT_UNREF: \
obj=0x5574565b8380 2019-05-31 11:58:55.953+0000: 30902: info : virObjectUnref:344 : \
OBJECT_UNREF: obj=0x5574565b8380 2019-05-31 11:58:55.953+0000: 30902: info : \
virObjectUnref:346 : OBJECT_DISPOSE: obj=0x5574565b8380 2019-05-31 11:58:55.953+0000: \
30902: debug : virConnectClose:1239 : conn=0x7f3b00001100 2019-05-31 \
11:58:55.953+0000: 30902: info : virObjectUnref:344 : OBJECT_UNREF: \
obj=0x7f3b00001100 2019-05-31 11:58:55.953+0000: 30902: debug : virConnectClose:1239 \
: conn=0x7f3b00001100 2019-05-31 11:58:55.953+0000: 30902: info : virObjectUnref:344 \
: OBJECT_UNREF: obj=0x7f3b00001100 2019-05-31 11:58:55.953+0000: 30902: debug : \
virConnectClose:1239 : conn=0x7f3b00001100 2019-05-31 11:58:55.953+0000: 30902: info \
: virObjectUnref:344 : OBJECT_UNREF: obj=0x7f3b00001100 2019-05-31 11:58:55.953+0000: \
30902: debug : virConnectClose:1239 : conn=0x7f3b00001100 2019-05-31 \
11:58:55.953+0000: 30902: info : virObjectUnref:344 : OBJECT_UNREF: \
obj=0x7f3b00001100 2019-05-31 11:58:55.953+0000: 30902: debug : virConnectClose:1239 \
: conn=0x7f3b00001100 2019-05-31 11:58:55.953+0000: 30902: info : virObjectUnref:344 \
: OBJECT_UNREF: obj=0x7f3b00001100 2019-05-31 11:58:55.953+0000: 30902: debug : \
virConnectClose:1239 : conn=0x7f3b00001100 2019-05-31 11:58:55.953+0000: 30902: info \
: virObjectUnref:344 : OBJECT_UNREF: obj=0x7f3b00001100 2019-05-31 11:58:55.953+0000: \
30902: debug : virConnectClose:1239 : conn=0x7f3b00001100 2019-05-31 \
11:58:55.953+0000: 30902: info : virObjectUnref:344 : OBJECT_UNREF: \
obj=0x7f3b00001100 2019-05-31 11:58:55.953+0000: 30902: info : virObjectUnref:346 : \
OBJECT_DISPOSE: obj=0x7f3b00001100 2019-05-31 11:58:55.953+0000: 30902: debug : \
virCloseCallbacksRun:316 : conn=0x7f3b00001100 2019-05-31 11:58:55.953+0000: 30902: \
info : virObjectUnref:344 : OBJECT_UNREF: obj=0x7f3b08000e80 2019-05-31 \
11:58:55.953+0000: 30902: info : virObjectUnref:346 : OBJECT_DISPOSE: \
obj=0x7f3b08000e80 2019-05-31 11:58:55.953+0000: 30902: info : virObjectUnref:344 : \
OBJECT_UNREF: obj=0x5574565c8d10 2019-05-31 11:58:55.953+0000: 30902: info : \
virObjectUnref:346 : OBJECT_DISPOSE: obj=0x5574565c8d10 2019-05-31 11:58:55.953+0000: \
30902: debug : virFileClose:113 : Closed fd 26


["signature.asc" (application/pgp-signature)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190531144253</emailId><senderName>nakata</senderName><senderEmail>nakata@geekpit.org</senderEmail><timestampReceived>2019-05-31 14:42:53-0400</timestampReceived><subject>Re: [libvirt-users] Easy solution for custom firewall rules- is it possible?</subject><body>

Hi,

libvirts nwfilter module can achieve that.
I'm currently working on opt-out patches to disable that functionality
if wished. I also don't use firewalld.

It's both paternalizing and annoying and takes away user flexilibity in
exchange for nothing.    

anyways
Check the nwfilter page to write own filters for the beginning:
https://libvirt.org/formatnwfilter.html#nwfwrite

some more info:
https://www.redhat.com/archives/libvir-list/2010-June/msg00762.html

https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/virtuali \
zation_deployment_and_administration_guide/sect-virtual_networking-applying_network_filtering





regards



Am Donnerstag, den 30.05.2019, 21:44 -0400 schrieb Joshua Kramer:
&gt; Hello All-
&gt; 
&gt; I've looked in several places and haven't found an answer to this
&gt; question: is it possible to have libvirt add custom rules to iptables
&gt; for virtual network interfaces?  I took a look at the "Firewall and
&gt; Network Filtering in Libvirt" page and it seems overly complicated
&gt; for
&gt; what I want to do.
&gt; 
&gt; Given an interface virbr2 and its network 192.168.4.0/24, libvirt
&gt; installs the following rules in iptables.  Essentially, these rules
&gt; will drop any packets for the interface virbr2 where the source or
&gt; destination is not on the 192.168.4.0/24 network.
&gt; 
&gt; -P FORWARD ACCEPT
&gt; -A FORWARD -d 192.168.4.0/24 -o virbr2 -j ACCEPT
&gt; -A FORWARD -s 192.168.4.0/24 -i virbr2 -j ACCEPT
&gt; -A FORWARD -i virbr2 -o virbr2 -j ACCEPT
&gt; -A FORWARD -o virbr2 -j REJECT --reject-with icmp-port-unreachable
&gt; -A FORWARD -i virbr2 -j REJECT --reject-with icmp-port-unreachable
&gt; 
&gt; I have a VPN server on the 4/24 network- and it hands out addresses
&gt; in
&gt; the 8/24 network.  So I would like libvirt to also create the
&gt; following rules in iptables:
&gt; 
&gt; -A FORWARD -d 192.168.8.0/24 -o virbr2 -j ACCEPT
&gt; -A FORWARD -s 192.168.8.0/24 -i virbr2 -j ACCEPT
&gt; 
&gt; I've tried creating direct rules in firewalld for the FORWARD_direct
&gt; chain.  Firewalld happily creates those rules, but they are never
&gt; reached, because they fall AFTER the libvirt rules.  I've also tried
&gt; creating an IP address on the virbr2 interface in the 8/24 network,
&gt; but that doesn't work either.  How can I get this done?
&gt; 
&gt; Thanks!!
&gt; -JK
&gt; 
&gt; _______________________________________________
&gt; libvirt-users mailing list
&gt; libvirt-users@redhat.com
&gt; https://www.redhat.com/mailman/listinfo/libvirt-users

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20190401164316</emailId><senderName>Alex</senderName><senderEmail>mysqlstudent@gmail.com</senderEmail><timestampReceived>2019-04-01 16:43:16-0400</timestampReceived><subject>Re: [libvirt-users] Clock skew on Win10</subject><body>

Hi, I haven't received any replies to this, but I'm still having a
problem with clock skew on Win10.

How can I troubleshoot this? I'm pretty sure the clock settings are
correct from within Windows, but when the VM resumes from the host
sleeping, the clock is off by some seemingly random number of hours.

Any ideas greatly appreciated.

On Tue, Mar 12, 2019 at 9:17 AM Alex &lt;mysqlstudent@gmail.com&gt; wrote:
&gt;
&gt; Hi,
&gt;
&gt; I'm having a problem with significant clock skew on fedora29 with
&gt; qemu-system-x86-3.0.0 and ibvirt-daemon-kvm-4.7.0. This is on my
&gt; desktop and appears to happen between suspends of the host each night.
&gt; It appears like the time just stops while the guest is suspended, of
&gt; course, but then doesn't update once the guest is resumed.
&gt;
&gt; I'm pretty sure time is configured correctly on the Win10 guest. It's
&gt; configured to be set according to Internet time and syncs with
&gt; time.windows.com.
&gt;
&gt; How do I troubleshoot this further?

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190403175913</emailId><senderName>Boris Bobrov</senderName><senderEmail>bbobrov@suse.com</senderEmail><timestampReceived>2019-04-03 17:59:13-0400</timestampReceived><subject>[libvirt-users] SEV machines and memory pinning</subject><body>

Hello,

I am working on implementing SEV support in OpenStack. There are some 
questions that came up in the discussion of the spec [0]

[0] https://review.openstack.org/#/c/641994/

As far as i understand, the memory for SEV machines need to be pinned so 
that it doesn't migrate to swap and page migration. ROMS, UEFI pflash 
and video RAM should be pinned too.

Initially we planned to use hard_limit of &lt;memtune&gt; element to pin the 
memory. However, from the discussion in the spec it seems that there is 
no way to determine a good enough value and that hard_limit should not 
be used at all.

What should be used then?

There is a suggestion to use something like this:

   &lt;memoryBacking&gt;
     &lt;hugepages&gt;
       &lt;page size="2" unit="M" nodeset="1"/&gt;
     &lt;/hugepages&gt;
     &lt;nosharepages/&gt;
     &lt;locked/&gt;
     &lt;source type="file"/&gt;
     &lt;access mode="shared"/&gt;
     &lt;allocation mode="immediate"/&gt;
   &lt;/memoryBacking&gt;

Will it work? Are there any caveats we should remember about with this 
config? If we can use it, is there anything that would be redundant or 
not necessary for our case?

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190403144427</emailId><senderName>"Lentes, Bernd"</senderName><senderEmail>bernd.lentes@helmholtz-muenchen.de</senderEmail><timestampReceived>2019-04-03 14:44:27-0400</timestampReceived><subject>[libvirt-users] is it possible to create a snapshot from a guest residing in a plain partition ?</subject><body>

Hi,

i can store the disk of a guest in a plain partition which isn't formatted.
That's no problem, i did it already several times, although the promised speed increase didn't appear.

But is it possible to create from such a guest a snapshot in a .sn file using virsh ?

Regards,


Bernd

-- 

Bernd Lentes 
Systemadministration 
Institut für Entwicklungsgenetik 
Gebäude 35.34 - Raum 208 
HelmholtzZentrum münchen 
bernd.lentes@helmholtz-muenchen.de 
phone: +49 89 3187 1241 
phone: +49 89 3187 3827 
fax: +49 89 3187 2294 
http://www.helmholtz-muenchen.de/idg 

wer Fehler macht kann etwas lernen 
wer nichts macht kann auch nichts lernen
 

Helmholtz Zentrum Muenchen
Deutsches Forschungszentrum fuer Gesundheit und Umwelt (GmbH)
Ingolstaedter Landstr. 1
85764 Neuherberg
www.helmholtz-muenchen.de
Aufsichtsratsvorsitzende: MinDirig'in Petra Steiner-Hoffmann
Stellv.Aufsichtsratsvorsitzender: MinDirig. Dr. Manfred Wolter
Geschaeftsfuehrung: Prof. Dr. med. Dr. h.c. Matthias Tschoep, Heinrich Bassler, Kerstin Guenther
Registergericht: Amtsgericht Muenchen HRB 6466
USt-IdNr: DE 129521671


_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190405111530</emailId><senderName>Maximilian Schieder</senderName><senderEmail>maxi@zeug.co</senderEmail><timestampReceived>2019-04-05 11:15:30-0400</timestampReceived><subject>[libvirt-users] Schema</subject><body>

Hey,
Is there a Schema of creating a VM (Domain)?

Something like:
Create Storagepool
Init Storagepool

Maxi

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190404162232</emailId><senderName>Nicolás_Iglesias</senderName><senderEmail>nfiglesias@gmail.com</senderEmail><timestampReceived>2019-04-04 16:22:32-0400</timestampReceived><subject>[libvirt-users] Cannot create PID file</subject><body>

[Attachment #2 (multipart/alternative)]


Hi Fellow users

I've just compiled latest libvirt and qemu, both from their respective official \
repositories. Libvirtd starts perfect, but when I try to start a domain using the \
virsh console, I get the following:

virsh # start --domain win8.1
error: Failed to start domain win8.1
error: internal error: Failed to start QEMU binary /usr/bin/qemu-system-x86_64 for \
probing: qemu-system-x86_64: cannot create PID file: Cannot open pid file: Permission \
denied

I'm not sure where to look at. Any hint would be much appreciated.
Regards,
Nicolas Iglesias


[Attachment #5 (text/html)]

&lt;div&gt;Hi Fellow users&lt;/div&gt;&lt;br&gt;&lt;div&gt;I've just compiled latest libvirt and qemu, both \
from their respective official repositories.&lt;/div&gt;&lt;div&gt;Libvirtd starts perfect, but \
when I try to start a domain using the virsh console, I get the \
following:&lt;/div&gt;&lt;br&gt;&lt;div&gt;virsh # start --domain win8.1 &lt;/div&gt;&lt;div&gt;error: Failed to \
start domain win8.1&lt;/div&gt;&lt;div&gt;error: internal error: Failed to start QEMU binary \
/usr/bin/qemu-system-x86_64 for probing: qemu-system-x86_64: cannot create PID file: \
Cannot open pid file: Permission denied&lt;/div&gt;&lt;br&gt;&lt;div&gt;I'm not sure where to look at. \
Any hint would be much appreciated.&lt;/div&gt;&lt;br&gt;&lt;div&gt;Regards,&lt;/div&gt;&lt;div&gt;Nicolas \
Iglesias&lt;/div&gt;&lt;img class="mailspring-open" alt="Sent from Mailspring" width="0" \
height="0" style="border:0; width:0; height:0;" \
src="https://link.getmailspring.com/open/136F09AA-A1E1-4131-B776-ACCC1CCA3CB9@getmailspring.com?recipient=bGlidmlydC11c2Vyc0ByZWRoYXQuY29t"&gt;




_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190404180203</emailId><senderName>PR PR</senderName><senderEmail>prprpr7819@gmail.com</senderEmail><timestampReceived>2019-04-04 18:02:03-0400</timestampReceived><subject>[libvirt-users] Guest interface names not same as configured name</subject><body>

[Attachment #2 (multipart/alternative)]


Hi,

I am creating a guest with following description for interfaces in the xml
using virsh create xml command. For some reason, the guest interface names
in the VM dont match the names specified in the xml. Is there a way to make
guest interface names predictable?

Following is the qemu version on host

dpkg --list | grep -i qemu
ii  qemu-kvm                              1:2.11+dfsg-1ubuntu7.10
      amd64        QEMU Full virtualization on x86 hardware

    &lt;interface type='user'&gt;
      &lt;mac address='52:54:00:17:0b:e7'/&gt;
      &lt;guest dev='eth0'/&gt;
      &lt;model type='e1000'/&gt;
      &lt;alias name='net0'/&gt;
      &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x03'
function='0x0'/&gt;
    &lt;/interface&gt;
    &lt;interface type='ethernet'&gt;
      &lt;mac address='52:54:00:ee:70:34'/&gt;
      &lt;target dev='net0'/&gt;
      &lt;guest dev='Ethernet0'/&gt;
      &lt;model type='rtl8139'/&gt;
      &lt;alias name='net1'/&gt;
      &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x05'
function='0x0'/&gt;
    &lt;/interface&gt;

Thanks

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;Hi,  \
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I am creating a guest with following description for interfaces \
in the xml using virsh create xml command. For some reason, the guest interface names \
in the VM dont match the names specified in the xml. Is there a way to make guest \
interface names predictable?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Following is the qemu version \
on host&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;dpkg --list | grep -i qemu&lt;/div&gt;&lt;div&gt;ii   \
qemu-kvm                                             1:2.11+dfsg-1ubuntu7.10          \
amd64            QEMU Full virtualization on x86 \
hardware&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;      &lt;interface \
type='user'&gt;&lt;/div&gt;&lt;div&gt;         &lt;mac \
address='52:54:00:17:0b:e7'/&gt;&lt;/div&gt;&lt;div&gt;         &lt;guest \
dev='eth0'/&gt;&lt;/div&gt;&lt;div&gt;         &lt;model \
type='e1000'/&gt;&lt;/div&gt;&lt;div&gt;         &lt;alias \
name='net0'/&gt;&lt;/div&gt;&lt;div&gt;         &lt;address type='pci' \
domain='0x0000' bus='0x00' slot='0x03' \
function='0x0'/&gt;&lt;/div&gt;&lt;div&gt;      &lt;/interface&gt;&lt;/div&gt;&lt;div&gt;      \
&lt;interface type='ethernet'&gt;&lt;/div&gt;&lt;div&gt;         &lt;mac \
address='52:54:00:ee:70:34'/&gt;&lt;/div&gt;&lt;div&gt;         &lt;target \
dev='net0'/&gt;&lt;/div&gt;&lt;div&gt;         &lt;guest \
dev='Ethernet0'/&gt;&lt;/div&gt;&lt;div&gt;         &lt;model \
type='rtl8139'/&gt;&lt;/div&gt;&lt;div&gt;         &lt;alias \
name='net1'/&gt;&lt;/div&gt;&lt;div&gt;         &lt;address type='pci' \
domain='0x0000' bus='0x00' slot='0x05' \
function='0x0'/&gt;&lt;/div&gt;&lt;div&gt;      \
&lt;/interface&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;




_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190407094619</emailId><senderName>ITeng A</senderName><senderEmail>asraaiteng@gmail.com</senderEmail><timestampReceived>2019-04-07 09:46:19-0400</timestampReceived><subject>[libvirt-users] CGroup V2 Support</subject><body>

[Attachment #2 (multipart/alternative)]


Dear all

Does the current version of libvirt support the new cgroup v2 ?
 I am running KVM qemu VMs on Ubuntu with linux Kernel 4.18 with cgroup v1
and I would like to use Cgroup v2  but we I mount cgroup v2  the  libvirt
virtualization daemon  fail to start with error message that it cant create
cgroup  /system.slice/libvirtd.service  no such file or directory.

kind regards,
Asraa Ali

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;Dear all&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Does the current version of libvirt \
support the new cgroup v2 ?&lt;/div&gt;&lt;div&gt;  I am running KVM qemu VMs on Ubuntu with \
linux Kernel 4.18 with cgroup v1 and I would like to use Cgroup v2   but we I mount \
cgroup v2   the   libvirt   virtualization daemon   fail to start with error message \
that it cant create cgroup   /system.slice/libvirtd.service   no such file or \
directory.  &lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;kind regards,  &lt;/div&gt;&lt;div&gt;Asraa Ali  \
&lt;/div&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190409143808</emailId><senderName>Ruben Kerkhof</senderName><senderEmail>ruben@rubenkerkhof.com</senderEmail><timestampReceived>2019-04-09 14:38:08-0400</timestampReceived><subject>[libvirt-users] Network hooks for ethernet interfaces</subject><body>

Hi all,

I have a hook script, /etc/libvirt/hooks/network, that doesn't seem to
be called when I attach an interface with type 'ethernet' with this
xml snippet:

&lt;interface type='ethernet'&gt;
    &lt;model type="virtio"/&gt;
    &lt;source&gt;
        &lt;ip address="10.100.0.1" prefix="24" peer="10.100.0.10"/&gt;
    &lt;/source&gt;
&lt;/interface&gt;

https://www.libvirt.org/hooks.html#intro says
"A network is started or stopped or an interface is plugged/unplugged
to/from the network (since 1.2.2)".

While I don't have a network defined in xml, I'd expect this to work
just as well for 'ethernet' type interfaces. Am I wrong?

Kind regards,

Ruben Kerkhof

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190411162057</emailId><senderName>Vladik Romanovsky</senderName><senderEmail>vromanso@redhat.com</senderEmail><timestampReceived>2019-04-11 16:20:57-0400</timestampReceived><subject>[libvirt-users] Failed to probe capabilities on libvirt v5.1.0</subject><body>

Hi everyone,

Unfortunately, I'm facing an issue with libvirt 5.1.0 when probing capabilities.

Failed to probe capabilities for /usr/bin/qemu-system-x86_64: internal
error: Failed to start QEMU binary /usr/bin/qemu-system-x86_64 for
probing: qemu-system-x86_64: cannot create PID file: Cannot open pid
file: Permission denied

I see that the qmp directory is being created, however, it belongs to
root instead of qemu:

/var/lib/libvirt/qemu/qmp-U1w6o6:
0 drwx------. 2 root root   6 Apr 11 14:46 qmp-U1w6o6

The user and group are set to "qemu" in /etc/libvirt/qemu.conf

I would appreciate any pointers.
Thank you!

Vladik

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190418142305</emailId><senderName>Andrea Bolognani</senderName><senderEmail>abologna@redhat.com</senderEmail><timestampReceived>2019-04-18 14:23:05-0400</timestampReceived><subject>Re: [libvirt-users] [libvirt] Why virsh domxml-to-native qemu-argv changes PCI slot number</subject><body>

Moving to libvirt-users where it belongs.

On Thu, 2019-04-18 at 06:47 +0000, Tal Attaly wrote:
&gt; Hi,
&gt; I have bridge type interface defined with slot 3 -
&gt; &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/&gt;
&gt; but after running virsh domxml-to-native qemu-argv I get slot 2-
&gt; -netdev tap,fd=21,id=hostnet0 -device \
&gt; e1000,netdev=hostnet0,id=net0,mac=f2:ff:ff:ff:ff:07,bus=pci.0,addr=0x2 Any idea why \
&gt; it's happen and how to keep the slot number?  Libvirt version is 4.5.0

I can reproduce this, and also confirm that it shouldn't happen :)

qemuDomainAssignAddresses() is supposed to make sure that any address
configured explicitly by the user (or previously by libvirt) is
preserved, and it's doing that correctly when it's called from inside
qemuDomainDefAssignAddresses(); however, for some reason, by the time
we call it again in qemuProcessPrepareDomain() the PCI address for
the network interface is no longer set, and so a fresh one gets
assigned instead.

I'll investigate further and get back to you.

&gt; here is the full domain XML -
&gt; 
&gt; &lt;domain type='kvm' xmlns:qemu='http://libvirt.org/schemas/domain/qemu/1.0'&gt;
&gt; &lt;name&gt;vm1&lt;/name&gt;
&gt; &lt;uuid&gt;dbad303e-fc1b-454e-8861-712bf1766a64&lt;/uuid&gt;
&gt; &lt;memory unit='KiB'&gt;4194304&lt;/memory&gt;
&gt; &lt;currentMemory unit='KiB'&gt;4194304&lt;/currentMemory&gt;
&gt; &lt;vcpu placement='static'&gt;1&lt;/vcpu&gt;
&gt; &lt;os&gt;
&gt; &lt;type arch='x86_64' machine='pc-i440fx-2.12'&gt;hvm&lt;/type&gt;
&gt; &lt;boot dev='hd'/&gt;
&gt; &lt;/os&gt;
&gt; &lt;features&gt;
&gt; &lt;acpi/&gt;
&gt; &lt;apic/&gt;
&gt; &lt;/features&gt;
&gt; &lt;cpu mode='custom' match='exact' check='partial'&gt;
&gt; &lt;model fallback='allow'&gt;SandyBridge-IBRS&lt;/model&gt;
&gt; &lt;/cpu&gt;
&gt; &lt;clock offset='utc'&gt;
&gt; &lt;timer name='rtc' tickpolicy='catchup'/&gt;
&gt; &lt;timer name='pit' tickpolicy='delay'/&gt;
&gt; &lt;timer name='hpet' present='no'/&gt;
&gt; &lt;/clock&gt;
&gt; &lt;on_poweroff&gt;destroy&lt;/on_poweroff&gt;
&gt; &lt;on_reboot&gt;restart&lt;/on_reboot&gt;
&gt; &lt;on_crash&gt;destroy&lt;/on_crash&gt;
&gt; &lt;pm&gt;
&gt; &lt;suspend-to-mem enabled='no'/&gt;
&gt; &lt;suspend-to-disk enabled='no'/&gt;
&gt; &lt;/pm&gt;
&gt; &lt;devices&gt;
&gt; &lt;emulator&gt;/qemu/x86_64-softmmu/qemu-system-x86_64&lt;/emulator&gt;
&gt; &lt;disk type='file' device='disk'&gt;
&gt; &lt;driver name='qemu' type='qcow2'/&gt;
&gt; &lt;source file='/var/lib/libvirt/images/vm.img'/&gt;
&gt; &lt;target dev='hda' bus='ide'/&gt;
&gt; &lt;address type='drive' controller='0' bus='0' target='0' unit='0'/&gt;
&gt; &lt;/disk&gt;
&gt; &lt;controller type='usb' index='0' model='ich9-ehci1'&gt;
&gt; &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x04' function='0x7'/&gt;
&gt; &lt;/controller&gt;
&gt; &lt;controller type='usb' index='0' model='ich9-uhci1'&gt;
&gt; &lt;master startport='0'/&gt;
&gt; &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x04' function='0x0' \
&gt; multifunction='on'/&gt; &lt;/controller&gt;
&gt; &lt;controller type='usb' index='0' model='ich9-uhci2'&gt;
&gt; &lt;master startport='2'/&gt;
&gt; &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x04' function='0x1'/&gt;
&gt; &lt;/controller&gt;
&gt; &lt;controller type='usb' index='0' model='ich9-uhci3'&gt;
&gt; &lt;master startport='4'/&gt;
&gt; &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x04' function='0x2'/&gt;
&gt; &lt;/controller&gt;
&gt; &lt;controller type='ide' index='0'&gt;
&gt; &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x01' function='0x1'/&gt;
&gt; &lt;/controller&gt;
&gt; &lt;controller type='pci' index='0' model='pci-root'/&gt;
&gt; &lt;interface type='bridge'&gt;
&gt; &lt;mac address='f2:ff:ff:ff:ff:07'/&gt;
&gt; &lt;source bridge='br0:'/&gt;
&gt; &lt;model type='e1000'/&gt;
&gt; &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/&gt;
&gt; &lt;/interface&gt;
&gt; &lt;serial type='tcp'&gt;
&gt; &lt;source mode='bind' host='10.210.27.119' service='9999'/&gt;
&gt; &lt;protocol type='telnet'/&gt;
&gt; &lt;target type='isa-serial' port='0'&gt;
&gt; &lt;model name='isa-serial'/&gt;
&gt; &lt;/target&gt;
&gt; &lt;/serial&gt;
&gt; &lt;console type='tcp'&gt;
&gt; &lt;source mode='bind' host='10.210.27.119' service='9999'/&gt;
&gt; &lt;protocol type='telnet'/&gt;
&gt; &lt;target type='serial' port='0'/&gt;
&gt; &lt;/console&gt;
&gt; &lt;input type='mouse' bus='ps2'/&gt;
&gt; &lt;input type='keyboard' bus='ps2'/&gt;
&gt; &lt;memballoon model='virtio'&gt;
&gt; &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x05' function='0x0'/&gt;
&gt; &lt;/memballoon&gt;
&gt; &lt;/devices&gt;
&gt; &lt;qemu:commandline&gt;
&gt; &lt;qemu:env name='CONFIG_FILE' value='/opt/cfg/qemu.cfg'/&gt;
&gt; &lt;/qemu:commandline&gt;
&gt; &lt;/domain&gt;

-- 
Andrea Bolognani / Red Hat / Virtualization

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20190423135945</emailId><senderName>llilulu</senderName><senderEmail>llilulu@yeah.net</senderEmail><timestampReceived>2019-04-23 13:59:45-0400</timestampReceived><subject>[libvirt-users] how to use Libvirt create bridge for vm on Mac OS</subject><body>

[Attachment #2 (multipart/alternative)]

[Attachment #4 (text/plain)]

Hi
   Recently, I install Libvirt and Qemu in my Mac book, I find I can't create a \
bridge like linux bridge use for my vm, I want to know how to create a bridge on Mac \
for vm. 


Thanks.

 


[Attachment #5 (text/html)]

&lt;div style="line-height:1.7;color:#000000;font-size:14px;font-family:Arial"&gt;&lt;div \
style="line-height:1.7;color:#000000;font-size:14px;font-family:Arial"&gt;&lt;div&gt;Hi&lt;br&gt;  \
 Recently, I install Libvirt and Qemu in my Mac book, I find I can't create a \
bridge like linux bridge use for my vm, I want to know how to create a bridge on Mac \
for vm. &lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks.&lt;/div&gt;&lt;/div&gt;&lt;span \
title="neteasefooter"&gt;&lt;p&gt; &lt;/p&gt;&lt;/span&gt;&lt;/div&gt;&lt;br&gt;&lt;br&gt;&lt;span \
title="neteasefooter"&gt;&lt;p&gt; &lt;/p&gt;&lt;/span&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190417083611</emailId><senderName>Sachin Soman</senderName><senderEmail>sachonline.soman@gmail.com</senderEmail><timestampReceived>2019-04-17 08:36:11-0400</timestampReceived><subject>[libvirt-users] JVM crashes during GC</subject><body>

[Attachment #2 (multipart/alternative)]


Hi,

Could you tell me if the following is some known issue?

While performing the following simple test, I see my JVM crashing
(consistently):
1. Open a connection to an ESXi driver/host (passing ConnectAuthDefault
instance).
2. Close the connection.
3. Invoke GC

When GC is triggered, at some point, some unallocated native memory is
being tried to release. That's failing.

The error thrown is:

java(78745,0x70000241e000) malloc: *** error for object 0x7fd5df561390:
pointer being freed was not allocated

*** set a breakpoint in malloc_error_break to debug


Frames from core dump:

    frame #0: 0x00007fff5b274b66 libsystem_kernel.dylib`__pthread_kill + 10

    frame #1: 0x00007fff5b43f080 libsystem_pthread.dylib`pthread_kill + 333

    frame #2: 0x00007fff5b1d01ae libsystem_c.dylib`abort + 127

    frame #3: 0x00007fff5b2ce8a6 libsystem_malloc.dylib`free + 521

    frame #4: 0x00000001127f43a7

    frame #5: 0x00000001127e3ffd

    frame #6: 0x00000001127e3ffd

    frame #7: 0x00000001127e3ffd

    frame #8: 0x00000001127e3ffd

    frame #9: 0x00000001127e4042

    frame #10: 0x00000001127e3ffd

    frame #11: 0x00000001127e3ffd

    frame #12: 0x00000001127dc4e7

    frame #13: 0x000000010c0e235e
libjvm.dylib`JavaCalls::call_helper(JavaValue*, methodHandle*,
JavaCallArguments*, Thread*) + 1710

    frame #14: 0x000000010c0e2b02
libjvm.dylib`JavaCalls::call_virtual(JavaValue*, KlassHandle, Symbol*,
Symbol*, JavaCallArguments*, Thread*) + 356

    frame #15: 0x000000010c0e2cae
libjvm.dylib`JavaCalls::call_virtual(JavaValue*, Handle, KlassHandle,
Symbol*, Symbol*, Thread*) + 74

    frame #16: 0x000000010c1208ee libjvm.dylib`thread_entry(JavaThread*,
Thread*) + 124

    frame #17: 0x000000010c33e84d
libjvm.dylib`JavaThread::thread_main_inner() + 155

    frame #18: 0x000000010c33ff12 libjvm.dylib`JavaThread::run() + 448

    frame #19: 0x000000010c26058a libjvm.dylib`java_start(Thread*) + 246

    frame #20: 0x00007fff5b43c661 libsystem_pthread.dylib`_pthread_body +
340

    frame #21: 0x00007fff5b43c50d libsystem_pthread.dylib`_pthread_start +
377

    frame #22: 0x00007fff5b43bbf9 libsystem_pthread.dylib`thread_start + 13


I have installed Libvirt 5.2.0.
Java bindings libvirt-java 0.5.1
JNA 4.0.0
Tested Java environments: Oracle Java 8 and OpenJDK 8 on MAC, OpenJDK 11 on
Ubuntu 16

Thanks &amp; Regards
Sachin Soman

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;Hi,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Could you tell me if the following is some \
known issue?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;While performing the following simple test, I \
see my JVM crashing (consistently):&lt;/div&gt;&lt;div&gt;1. Open a connection to an ESXi \
driver/host (passing ConnectAuthDefault instance).&lt;/div&gt;&lt;div&gt;2. Close the \
connection.&lt;/div&gt;&lt;div&gt;3. Invoke GC&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;When GC is triggered, at \
some point, some unallocated native memory is being tried to release. That's \
failing.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The error thrown is:&lt;/div&gt;&lt;div&gt;





&lt;p class="gmail-p1" style="margin:0px;font-variant-numeric:normal;font-variant-east-as \
ian:normal;font-stretch:normal;font-size:11px;line-height:normal;font-family:Menlo;color:rgb(0,0,0)"&gt;&lt;span \
class="gmail-s1" style="font-variant-ligatures:no-common-ligatures"&gt;java(78745,0x70000241e000) \
malloc: *** error for object 0x7fd5df561390: pointer being freed was not \
allocated&lt;/span&gt;&lt;/p&gt; &lt;p class="gmail-p1" \
style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stre \
tch:normal;font-size:11px;line-height:normal;font-family:Menlo;color:rgb(0,0,0)"&gt;&lt;span \
class="gmail-s1" style="font-variant-ligatures:no-common-ligatures"&gt;*** set a \
breakpoint in malloc_error_break to \
debug&lt;/span&gt;&lt;/p&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Frames from core \
dump:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;





&lt;p class="gmail-p1" style="margin:0px;font-variant-numeric:normal;font-variant-east-as \
ian:normal;font-stretch:normal;font-size:11px;line-height:normal;font-family:Menlo;color:rgb(0,0,0)"&gt;&lt;span \
class="gmail-s1" style="font-variant-ligatures:no-common-ligatures"&gt;&lt;span \
class="gmail-Apple-converted-space"&gt;       &lt;/span&gt;frame #0: 0x00007fff5b274b66 \
libsystem_kernel.dylib`__pthread_kill + 10&lt;/span&gt;&lt;/p&gt; &lt;p class="gmail-p1" \
style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stre \
tch:normal;font-size:11px;line-height:normal;font-family:Menlo;color:rgb(0,0,0)"&gt;&lt;span \
class="gmail-s1" style="font-variant-ligatures:no-common-ligatures"&gt;&lt;span \
class="gmail-Apple-converted-space"&gt;      &lt;/span&gt;frame #1: 0x00007fff5b43f080 \
libsystem_pthread.dylib`pthread_kill + 333&lt;/span&gt;&lt;/p&gt; &lt;p class="gmail-p1" \
style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stre \
tch:normal;font-size:11px;line-height:normal;font-family:Menlo;color:rgb(0,0,0)"&gt;&lt;span \
class="gmail-s1" style="font-variant-ligatures:no-common-ligatures"&gt;&lt;span \
class="gmail-Apple-converted-space"&gt;      &lt;/span&gt;frame #2: 0x00007fff5b1d01ae \
libsystem_c.dylib`abort + 127&lt;/span&gt;&lt;/p&gt; &lt;p class="gmail-p1" \
style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stre \
tch:normal;font-size:11px;line-height:normal;font-family:Menlo;color:rgb(0,0,0)"&gt;&lt;span \
class="gmail-s1" style="font-variant-ligatures:no-common-ligatures"&gt;&lt;span \
class="gmail-Apple-converted-space"&gt;      &lt;/span&gt;frame #3: 0x00007fff5b2ce8a6 \
libsystem_malloc.dylib`free + 521&lt;/span&gt;&lt;/p&gt; &lt;p class="gmail-p1" \
style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stre \
tch:normal;font-size:11px;line-height:normal;font-family:Menlo;color:rgb(0,0,0)"&gt;&lt;span \
class="gmail-s1" style="font-variant-ligatures:no-common-ligatures"&gt;&lt;span \
class="gmail-Apple-converted-space"&gt;      &lt;/span&gt;frame #4: \
0x00000001127f43a7&lt;/span&gt;&lt;/p&gt; &lt;p class="gmail-p1" \
style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stre \
tch:normal;font-size:11px;line-height:normal;font-family:Menlo;color:rgb(0,0,0)"&gt;&lt;span \
class="gmail-s1" style="font-variant-ligatures:no-common-ligatures"&gt;&lt;span \
class="gmail-Apple-converted-space"&gt;      &lt;/span&gt;frame #5: \
0x00000001127e3ffd&lt;/span&gt;&lt;/p&gt; &lt;p class="gmail-p1" \
style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stre \
tch:normal;font-size:11px;line-height:normal;font-family:Menlo;color:rgb(0,0,0)"&gt;&lt;span \
class="gmail-s1" style="font-variant-ligatures:no-common-ligatures"&gt;&lt;span \
class="gmail-Apple-converted-space"&gt;      &lt;/span&gt;frame #6: \
0x00000001127e3ffd&lt;/span&gt;&lt;/p&gt; &lt;p class="gmail-p1" \
style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stre \
tch:normal;font-size:11px;line-height:normal;font-family:Menlo;color:rgb(0,0,0)"&gt;&lt;span \
class="gmail-s1" style="font-variant-ligatures:no-common-ligatures"&gt;&lt;span \
class="gmail-Apple-converted-space"&gt;      &lt;/span&gt;frame #7: \
0x00000001127e3ffd&lt;/span&gt;&lt;/p&gt; &lt;p class="gmail-p1" \
style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stre \
tch:normal;font-size:11px;line-height:normal;font-family:Menlo;color:rgb(0,0,0)"&gt;&lt;span \
class="gmail-s1" style="font-variant-ligatures:no-common-ligatures"&gt;&lt;span \
class="gmail-Apple-converted-space"&gt;      &lt;/span&gt;frame #8: \
0x00000001127e3ffd&lt;/span&gt;&lt;/p&gt; &lt;p class="gmail-p1" \
style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stre \
tch:normal;font-size:11px;line-height:normal;font-family:Menlo;color:rgb(0,0,0)"&gt;&lt;span \
class="gmail-s1" style="font-variant-ligatures:no-common-ligatures"&gt;&lt;span \
class="gmail-Apple-converted-space"&gt;      &lt;/span&gt;frame #9: \
0x00000001127e4042&lt;/span&gt;&lt;/p&gt; &lt;p class="gmail-p1" \
style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stre \
tch:normal;font-size:11px;line-height:normal;font-family:Menlo;color:rgb(0,0,0)"&gt;&lt;span \
class="gmail-s1" style="font-variant-ligatures:no-common-ligatures"&gt;&lt;span \
class="gmail-Apple-converted-space"&gt;      &lt;/span&gt;frame #10: \
0x00000001127e3ffd&lt;/span&gt;&lt;/p&gt; &lt;p class="gmail-p1" \
style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stre \
tch:normal;font-size:11px;line-height:normal;font-family:Menlo;color:rgb(0,0,0)"&gt;&lt;span \
class="gmail-s1" style="font-variant-ligatures:no-common-ligatures"&gt;&lt;span \
class="gmail-Apple-converted-space"&gt;      &lt;/span&gt;frame #11: \
0x00000001127e3ffd&lt;/span&gt;&lt;/p&gt; &lt;p class="gmail-p1" \
style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stre \
tch:normal;font-size:11px;line-height:normal;font-family:Menlo;color:rgb(0,0,0)"&gt;&lt;span \
class="gmail-s1" style="font-variant-ligatures:no-common-ligatures"&gt;&lt;span \
class="gmail-Apple-converted-space"&gt;      &lt;/span&gt;frame #12: \
0x00000001127dc4e7&lt;/span&gt;&lt;/p&gt; &lt;p class="gmail-p1" \
style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stre \
tch:normal;font-size:11px;line-height:normal;font-family:Menlo;color:rgb(0,0,0)"&gt;&lt;span \
class="gmail-s1" style="font-variant-ligatures:no-common-ligatures"&gt;&lt;span \
class="gmail-Apple-converted-space"&gt;      &lt;/span&gt;frame #13: 0x000000010c0e235e \
libjvm.dylib`JavaCalls::call_helper(JavaValue*, methodHandle*, JavaCallArguments*, \
Thread*) + 1710&lt;/span&gt;&lt;/p&gt; &lt;p class="gmail-p1" \
style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stre \
tch:normal;font-size:11px;line-height:normal;font-family:Menlo;color:rgb(0,0,0)"&gt;&lt;span \
class="gmail-s1" style="font-variant-ligatures:no-common-ligatures"&gt;&lt;span \
class="gmail-Apple-converted-space"&gt;      &lt;/span&gt;frame #14: 0x000000010c0e2b02 \
libjvm.dylib`JavaCalls::call_virtual(JavaValue*, KlassHandle, Symbol*, Symbol*, \
JavaCallArguments*, Thread*) + 356&lt;/span&gt;&lt;/p&gt; &lt;p class="gmail-p1" \
style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stre \
tch:normal;font-size:11px;line-height:normal;font-family:Menlo;color:rgb(0,0,0)"&gt;&lt;span \
class="gmail-s1" style="font-variant-ligatures:no-common-ligatures"&gt;&lt;span \
class="gmail-Apple-converted-space"&gt;      &lt;/span&gt;frame #15: 0x000000010c0e2cae \
libjvm.dylib`JavaCalls::call_virtual(JavaValue*, Handle, KlassHandle, Symbol*, \
Symbol*, Thread*) + 74&lt;/span&gt;&lt;/p&gt; &lt;p class="gmail-p1" \
style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stre \
tch:normal;font-size:11px;line-height:normal;font-family:Menlo;color:rgb(0,0,0)"&gt;&lt;span \
class="gmail-s1" style="font-variant-ligatures:no-common-ligatures"&gt;&lt;span \
class="gmail-Apple-converted-space"&gt;      &lt;/span&gt;frame #16: 0x000000010c1208ee \
libjvm.dylib`thread_entry(JavaThread*, Thread*) + 124&lt;/span&gt;&lt;/p&gt; &lt;p class="gmail-p1" \
style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stre \
tch:normal;font-size:11px;line-height:normal;font-family:Menlo;color:rgb(0,0,0)"&gt;&lt;span \
class="gmail-s1" style="font-variant-ligatures:no-common-ligatures"&gt;&lt;span \
class="gmail-Apple-converted-space"&gt;      &lt;/span&gt;frame #17: 0x000000010c33e84d \
libjvm.dylib`JavaThread::thread_main_inner() + 155&lt;/span&gt;&lt;/p&gt; &lt;p class="gmail-p1" \
style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stre \
tch:normal;font-size:11px;line-height:normal;font-family:Menlo;color:rgb(0,0,0)"&gt;&lt;span \
class="gmail-s1" style="font-variant-ligatures:no-common-ligatures"&gt;&lt;span \
class="gmail-Apple-converted-space"&gt;      &lt;/span&gt;frame #18: 0x000000010c33ff12 \
libjvm.dylib`JavaThread::run() + 448&lt;/span&gt;&lt;/p&gt; &lt;p class="gmail-p1" \
style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stre \
tch:normal;font-size:11px;line-height:normal;font-family:Menlo;color:rgb(0,0,0)"&gt;&lt;span \
class="gmail-s1" style="font-variant-ligatures:no-common-ligatures"&gt;&lt;span \
class="gmail-Apple-converted-space"&gt;      &lt;/span&gt;frame #19: 0x000000010c26058a \
libjvm.dylib`java_start(Thread*) + 246&lt;/span&gt;&lt;/p&gt; &lt;p class="gmail-p1" \
style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stre \
tch:normal;font-size:11px;line-height:normal;font-family:Menlo;color:rgb(0,0,0)"&gt;&lt;span \
class="gmail-s1" style="font-variant-ligatures:no-common-ligatures"&gt;&lt;span \
class="gmail-Apple-converted-space"&gt;      &lt;/span&gt;frame #20: 0x00007fff5b43c661 \
libsystem_pthread.dylib`_pthread_body + 340&lt;/span&gt;&lt;/p&gt; &lt;p class="gmail-p1" \
style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stre \
tch:normal;font-size:11px;line-height:normal;font-family:Menlo;color:rgb(0,0,0)"&gt;&lt;span \
class="gmail-s1" style="font-variant-ligatures:no-common-ligatures"&gt;&lt;span \
class="gmail-Apple-converted-space"&gt;      &lt;/span&gt;frame #21: 0x00007fff5b43c50d \
libsystem_pthread.dylib`_pthread_start + 377&lt;/span&gt;&lt;/p&gt; &lt;p class="gmail-p1" \
style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stre \
tch:normal;font-size:11px;line-height:normal;font-family:Menlo;color:rgb(0,0,0)"&gt;&lt;span \
class="gmail-s1" style="font-variant-ligatures:no-common-ligatures"&gt;&lt;span \
class="gmail-Apple-converted-space"&gt;      &lt;/span&gt;frame #22: 0x00007fff5b43bbf9 \
libsystem_pthread.dylib`thread_start + \
13&lt;/span&gt;&lt;/p&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I have installed Libvirt \
5.2.0.&lt;/div&gt;&lt;div&gt;Java bindings libvirt-java 0.5.1&lt;/div&gt;&lt;div&gt;JNA \
4.0.0&lt;/div&gt;&lt;div&gt;Tested Java environments: Oracle Java 8 and OpenJDK 8 on MAC, OpenJDK \
11 on Ubuntu 16&lt;/div&gt;&lt;div&gt;&lt;br clear="all"&gt;&lt;div&gt;&lt;div dir="ltr" class="gmail_signature" \
data-smartmail="gmail_signature"&gt;&lt;div dir="ltr"&gt;&lt;div&gt;&lt;div&gt;Thanks &amp; \
Regards&lt;br&gt;Sachin Soman&lt;br&gt;&lt;br&gt;&lt;/div&gt; &lt;div&gt;  \
&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190425135903</emailId><senderName>Wolf</senderName><senderEmail>ort_libvirt@bergersen.no</senderEmail><timestampReceived>2019-04-25 13:59:03-0400</timestampReceived><subject>[libvirt-users] Live Disk Backup with Active Blockcommit</subject><body>

Hi!

I was reading the Wiki about 'Live Disk Backup with Active Blockcommit, \
https://wiki.libvirt.org/page/Live-disk-backup-with-active-blockcommit and see that \
example shown seems to be using two different names for the same file.

First showing the current block device in use:
$ virsh domblklist vm1
Target     Source
------------------------------------------------
vda        /export/images/base.qcow2 

Then copying the same file for backup:
$ cp /export/images/base.img /export/images/copy.img

=&gt; Is there are reason why the block device first is called 'base.qcow2' and then \
'base.img'?


I also saw another name that seems to be wrong based on the context.
It doesn't have the same implication as my earlier example, as the name of the \
                overlay file is not written in the command itself, but still:
------
$ virsh snapshot-create-as --domain vm1 guest-state1 \
    --diskspec vda,file=/export/images/overlay1.qcow2 \
    --disk-only --atomic

Then:
$ virsh domblklist vm1
Target     Source
------------------------------------------------
vda        /export/images/overlay.qcow2

Now that the backup is finished, perform active blockcommit by live mergning contents \
                of 'overlay1' into base . . . ."
------

=&gt; Here it seems like the overlay file first is called ''overlay1.qcow2" and the ' \
virsh domblklist vm1' command shows that it is actually called: 'overlay.qcow2' And \
then back to ''overlay1 in the following text: 'mergning contents of 'overlay1' into \
base' (Where 'mergning' is spelled wrong, but that doesn't affect the logic).


=&gt; Do I understand all this correctly?

I came to this article based on this answer on Serverfault: \
https://serverfault.com/a/921966 Since I didn't understand the logic of the file \
changing names, I visited the file linked to in the answer on wiki.libvirt.org and \
saw that the same was written there. So maybe change these errors in the Wiki if I \
understand all this correctly?


Thanks for input!

Best regards,
Wolf

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20190424171322</emailId><senderName>Mauricio Tavares</senderName><senderEmail>raubvogel@gmail.com</senderEmail><timestampReceived>2019-04-24 17:13:22-0400</timestampReceived><subject>[libvirt-users] PCI passthrough and abstraction</subject><body>

When you pass a device in the pci chain (after virsh
nodedev-dettach'ing it from host) to the guest, how much is passed
without being emulated/abstracted?

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190426092513</emailId><senderName>Christoph</senderName><senderEmail>mangel@gmx.de</senderEmail><timestampReceived>2019-04-26 09:25:13-0400</timestampReceived><subject>[libvirt-users] 5.2.0 xen and maxGrantFrames</subject><body>


Hi

libvirt 5.2.0 should support maxGrantFrames setting for xen (changelog).
I get ever an error if I use it in the config:

&lt;domain type='xen'&gt;
   &lt;name&gt;satan.chao5.int&lt;/name&gt;
   &lt;uuid&gt;f1f96b1c-fb75-4707-afb7-604d696d29cc&lt;/uuid&gt;
   &lt;memory unit='KiB'&gt;3145728&lt;/memory&gt;
   &lt;currentMemory unit='KiB'&gt;3145728&lt;/currentMemory&gt;
   &lt;vcpu placement='static'&gt;4&lt;/vcpu&gt;
   &lt;bootloader&gt;pygrub&lt;/bootloader&gt;
   &lt;os&gt;
     &lt;type arch='x86_64' machine='xenpvh'&gt;xenpvh&lt;/type&gt;
   &lt;/os&gt;
   &lt;clock offset='utc' adjustment='reset'/&gt;
   &lt;on_poweroff&gt;destroy&lt;/on_poweroff&gt;
   &lt;on_reboot&gt;restart&lt;/on_reboot&gt;
   &lt;on_crash&gt;restart&lt;/on_crash&gt;
   &lt;devices&gt;
     &lt;disk type='block' device='disk'&gt;
       &lt;driver name='phy' type='raw'/&gt;
       &lt;source dev='/dev/vg_lilith/lv_satan_root'/&gt;
       &lt;target dev='xvda' bus='xen'/&gt;
     &lt;/disk&gt;
     &lt;disk type='block' device='disk'&gt;
       &lt;driver name='phy' type='raw'/&gt;
       &lt;source dev='/dev/vg_lilith/lv_satan_home'/&gt;
       &lt;target dev='xvdb' bus='xen'/&gt;
     &lt;/disk&gt;
     &lt;disk type='block' device='disk'&gt;
       &lt;driver name='phy' type='raw'/&gt;
       &lt;source dev='/dev/vg_lilith/lv_satan_swap'/&gt;
       &lt;target dev='xvdc' bus='xen'/&gt;
     &lt;/disk&gt;
     &lt;disk type='block' device='disk'&gt;
       &lt;driver name='phy' type='raw'/&gt;
       &lt;source dev='/dev/md10'/&gt;
       &lt;target dev='xvdd' bus='xen'/&gt;
     &lt;/disk&gt;
     &lt;disk type='block' device='disk'&gt;
       &lt;driver name='phy' type='raw'/&gt;
       &lt;source
dev='/dev/disk/by-uuid/6beff9f2-a88c-4d21-86c6-ff90439b4ca3'/&gt;
       &lt;target dev='xvde' bus='xen'/&gt;
     &lt;/disk&gt;
     &lt;disk type='block' device='disk'&gt;
       &lt;driver name='phy' type='raw'/&gt;
       &lt;source
dev='/dev/disk/by-uuid/e19e6e23-b35c-4fae-b34a-0e2835bde74d'/&gt;
       &lt;target dev='xvdf' bus='xen'/&gt;
     &lt;/disk&gt;
     &lt;disk type='block' device='disk'&gt;
       &lt;driver name='phy' type='raw'/&gt;
       &lt;source
dev='/dev/disk/by-uuid/3d50dfab-5ffe-4558-9ab3-36fd504607be'/&gt;
       &lt;target dev='xvdg' bus='xen'/&gt;
     &lt;/disk&gt;
     &lt;disk type='block' device='disk'&gt;
       &lt;driver name='phy' type='raw'/&gt;
       &lt;source
dev='/dev/disk/by-uuid/c4593072-0161-4bdc-b8b6-317fdd23f8ed'/&gt;
       &lt;target dev='xvdh' bus='xen'/&gt;
     &lt;/disk&gt;
     &lt;disk type='block' device='disk'&gt;
       &lt;driver name='phy' type='raw'/&gt;
       &lt;source
dev='/dev/disk/by-uuid/372167e4-c1ea-4ce6-813b-9c57dd4e67a6'/&gt;
       &lt;target dev='xvdi' bus='xen'/&gt;
     &lt;/disk&gt;
     &lt;disk type='block' device='disk'&gt;
       &lt;driver name='phy' type='raw'/&gt;
       &lt;source dev='/dev/mapper/keys'/&gt;
       &lt;target dev='xvdz' bus='xen'/&gt;
       &lt;readonly/&gt;
     &lt;/disk&gt;
     &lt;controller type='xenbus' index='0' maxGrantFrames='128'/&gt;
     &lt;interface type='bridge'&gt;
       &lt;mac address='00:16:3e:05:31:50'/&gt;
       &lt;source bridge='xenbr5'/&gt;
       &lt;script path='vif-bridge'/&gt;
     &lt;/interface&gt;
     &lt;interface type='bridge'&gt;
       &lt;mac address='00:16:3e:15:31:50'/&gt;
       &lt;source bridge='xenbr15'/&gt;
       &lt;script path='vif-bridge'/&gt;
     &lt;/interface&gt;
     &lt;console type='pty'&gt;
       &lt;target type='xen' port='0'/&gt;
     &lt;/console&gt;
     &lt;input type='mouse' bus='xen'/&gt;
     &lt;input type='keyboard' bus='xen'/&gt;
     &lt;memballoon model='xen'/&gt;
   &lt;/devices&gt;
&lt;/domain&gt;


What Im doing wrong?

--
------
Greetz

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190426095353</emailId><senderName>"Weller, Lennart"</senderName><senderEmail>lennart.weller@hansemerkur.de</senderEmail><timestampReceived>2019-04-26 09:53:53-0400</timestampReceived><subject>[libvirt-users] Libvirt pool cannot see or create rbd clones</subject><body>

Hello everyone,

To increase my odds of finding an answer I also wanted to ask here.
This is my post from serverfault[1] in verbatim:

While trying to get a cloned disk running from my OS snapshot I run
into the problem that Libvirt cannot see existing images cloned from a
snapshot. Created via:

# rbd -p vmdisks clone vmdisks/coreos_2023@base vmdisks/coreos00.disk

The base image has the one snapshot 'base' and is protected. The cloned
disk is created just fine:

# rbd -p vmdisks info coreos00.disk
rbd image 'coreos00.disk':
        size 8.49GiB in 2174 objects
        order 22 (4MiB objects)
        block_name_prefix: rbd_data.48a99c6b8b4567
        format: 2
        features: layering
        flags: 
        create_timestamp: Thu Apr 25 14:46:52 2019
        parent: vmdisks/coreos_2023@base
        overlap: 8.49GiB

I temporarily have Libvirt configured with a rbd pool that uses the
ceph admin user. But I cannot see the cloned disk. Just the parent:

virsh # vol-list --pool rbd_image_root
 Name                 Path                                    
---------------------------------------------------------------------
---------
 coreos_2023 vmdisks/coreos_2023     

If I try to create the cloned image from within virsh I run into the
following issue:

virsh # vol-clone --pool rbd_image_root coreos_2023 coreos00.disk
error: Failed to clone vol from coreos_2023
error: failed to iterate RBD snapshot coreos_2023@base: Operation not
permitted

Note that this pool uses the Ceph admin user which makes the Operation
not permitted a tad odd.

Am I missing a configuration option here that would allow for the pool
to use clones? I can't find any information on this in the
documentation so far. And the source code of libvirt looks like it
should support both features.

Versions:

Libvirt Machine: Ubuntu 18.04
Compiled against library: libvirt 4.0.0
Using library: libvirt 4.0.0
Using API: QEMU 4.0.0
Running hypervisor: QEMU 2.11.1

Ceph Machine: openSUSE Leap 42.3
Ceph 12.2.5


[1] 
https://serverfault.com/questions/964586/libvirt-pool-cannot-see-or-create-rbd-clones

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190426102057</emailId><senderName>"Weller, Lennart"</senderName><senderEmail>lennart.weller@hansemerkur.de</senderEmail><timestampReceived>2019-04-26 10:20:57-0400</timestampReceived><subject>Re: [libvirt-users] Libvirt pool cannot see or create rbd clones</subject><body>

Some additional information that I have found since yesterday:

When I create a volume like this:

&lt;volume&gt;
   &lt;name&gt;coreos00.disk&lt;/name&gt;
   &lt;capacity unit="bytes"&gt;9116319744&lt;/capacity&gt;
   &lt;target&gt;
       &lt;format type="raw"&gt;&lt;/format&gt;
       &lt;permissions&gt;
           &lt;mode&gt;644&lt;/mode&gt;
       &lt;/permissions&gt;
   &lt;/target&gt;
   &lt;backingStore&gt;
       &lt;path&gt;vmdisks/coreos_2023&lt;/path&gt;
       &lt;format type="raw"&gt;&lt;/format&gt;
   &lt;/backingStore&gt;
&lt;/volume&gt;

Which does not seem to work with the backing store either as it creates
an empty volume without the underlying parent. But when I now delete
the volume via rbd and create a new clone it shows up in libvirt and
can be used by the machine.

# rbd -p vmdisks rm coreos00.disk
# rbd clone vmdisks/coreos_2023@basis vmdisks/coreos00.disk

Sadly this is not a very efficient way to create the clones I would
say.

Anyone got any, like literally any, ideas what might be wrong in this
setup?

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190426094735</emailId><senderName>Pavel Hrdina</senderName><senderEmail>phrdina@redhat.com</senderEmail><timestampReceived>2019-04-26 09:47:35-0400</timestampReceived><subject>Re: [libvirt-users] 5.2.0 xen and maxGrantFrames</subject><body>

[Attachment #2 (multipart/signed)]


On Fri, Apr 26, 2019 at 11:25:13AM +0200, Christoph wrote:
&gt; 
&gt; Hi
&gt; 
&gt; libvirt 5.2.0 should support maxGrantFrames setting for xen (changelog).
&gt; I get ever an error if I use it in the config:

Hi

&gt; &lt;domain type='xen'&gt;
&gt;   &lt;name&gt;satan.chao5.int&lt;/name&gt;
&gt;   &lt;uuid&gt;f1f96b1c-fb75-4707-afb7-604d696d29cc&lt;/uuid&gt;
&gt;   &lt;memory unit='KiB'&gt;3145728&lt;/memory&gt;
&gt;   &lt;currentMemory unit='KiB'&gt;3145728&lt;/currentMemory&gt;
&gt;   &lt;vcpu placement='static'&gt;4&lt;/vcpu&gt;
&gt;   &lt;bootloader&gt;pygrub&lt;/bootloader&gt;
&gt;   &lt;os&gt;
&gt;     &lt;type arch='x86_64' machine='xenpvh'&gt;xenpvh&lt;/type&gt;
&gt;   &lt;/os&gt;
&gt;   &lt;clock offset='utc' adjustment='reset'/&gt;
&gt;   &lt;on_poweroff&gt;destroy&lt;/on_poweroff&gt;
&gt;   &lt;on_reboot&gt;restart&lt;/on_reboot&gt;
&gt;   &lt;on_crash&gt;restart&lt;/on_crash&gt;
&gt;   &lt;devices&gt;
&gt;     &lt;disk type='block' device='disk'&gt;
&gt;       &lt;driver name='phy' type='raw'/&gt;
&gt;       &lt;source dev='/dev/vg_lilith/lv_satan_root'/&gt;
&gt;       &lt;target dev='xvda' bus='xen'/&gt;
&gt;     &lt;/disk&gt;
&gt;     &lt;disk type='block' device='disk'&gt;
&gt;       &lt;driver name='phy' type='raw'/&gt;
&gt;       &lt;source dev='/dev/vg_lilith/lv_satan_home'/&gt;
&gt;       &lt;target dev='xvdb' bus='xen'/&gt;
&gt;     &lt;/disk&gt;
&gt;     &lt;disk type='block' device='disk'&gt;
&gt;       &lt;driver name='phy' type='raw'/&gt;
&gt;       &lt;source dev='/dev/vg_lilith/lv_satan_swap'/&gt;
&gt;       &lt;target dev='xvdc' bus='xen'/&gt;
&gt;     &lt;/disk&gt;
&gt;     &lt;disk type='block' device='disk'&gt;
&gt;       &lt;driver name='phy' type='raw'/&gt;
&gt;       &lt;source dev='/dev/md10'/&gt;
&gt;       &lt;target dev='xvdd' bus='xen'/&gt;
&gt;     &lt;/disk&gt;
&gt;     &lt;disk type='block' device='disk'&gt;
&gt;       &lt;driver name='phy' type='raw'/&gt;
&gt;       &lt;source
&gt; dev='/dev/disk/by-uuid/6beff9f2-a88c-4d21-86c6-ff90439b4ca3'/&gt;
&gt;       &lt;target dev='xvde' bus='xen'/&gt;
&gt;     &lt;/disk&gt;
&gt;     &lt;disk type='block' device='disk'&gt;
&gt;       &lt;driver name='phy' type='raw'/&gt;
&gt;       &lt;source
&gt; dev='/dev/disk/by-uuid/e19e6e23-b35c-4fae-b34a-0e2835bde74d'/&gt;
&gt;       &lt;target dev='xvdf' bus='xen'/&gt;
&gt;     &lt;/disk&gt;
&gt;     &lt;disk type='block' device='disk'&gt;
&gt;       &lt;driver name='phy' type='raw'/&gt;
&gt;       &lt;source
&gt; dev='/dev/disk/by-uuid/3d50dfab-5ffe-4558-9ab3-36fd504607be'/&gt;
&gt;       &lt;target dev='xvdg' bus='xen'/&gt;
&gt;     &lt;/disk&gt;
&gt;     &lt;disk type='block' device='disk'&gt;
&gt;       &lt;driver name='phy' type='raw'/&gt;
&gt;       &lt;source
&gt; dev='/dev/disk/by-uuid/c4593072-0161-4bdc-b8b6-317fdd23f8ed'/&gt;
&gt;       &lt;target dev='xvdh' bus='xen'/&gt;
&gt;     &lt;/disk&gt;
&gt;     &lt;disk type='block' device='disk'&gt;
&gt;       &lt;driver name='phy' type='raw'/&gt;
&gt;       &lt;source
&gt; dev='/dev/disk/by-uuid/372167e4-c1ea-4ce6-813b-9c57dd4e67a6'/&gt;
&gt;       &lt;target dev='xvdi' bus='xen'/&gt;
&gt;     &lt;/disk&gt;
&gt;     &lt;disk type='block' device='disk'&gt;
&gt;       &lt;driver name='phy' type='raw'/&gt;
&gt;       &lt;source dev='/dev/mapper/keys'/&gt;
&gt;       &lt;target dev='xvdz' bus='xen'/&gt;
&gt;       &lt;readonly/&gt;
&gt;     &lt;/disk&gt;
&gt;     &lt;controller type='xenbus' index='0' maxGrantFrames='128'/&gt;
&gt;     &lt;interface type='bridge'&gt;
&gt;       &lt;mac address='00:16:3e:05:31:50'/&gt;
&gt;       &lt;source bridge='xenbr5'/&gt;
&gt;       &lt;script path='vif-bridge'/&gt;
&gt;     &lt;/interface&gt;
&gt;     &lt;interface type='bridge'&gt;
&gt;       &lt;mac address='00:16:3e:15:31:50'/&gt;
&gt;       &lt;source bridge='xenbr15'/&gt;
&gt;       &lt;script path='vif-bridge'/&gt;
&gt;     &lt;/interface&gt;
&gt;     &lt;console type='pty'&gt;
&gt;       &lt;target type='xen' port='0'/&gt;
&gt;     &lt;/console&gt;
&gt;     &lt;input type='mouse' bus='xen'/&gt;
&gt;     &lt;input type='keyboard' bus='xen'/&gt;
&gt;     &lt;memballoon model='xen'/&gt;
&gt;   &lt;/devices&gt;
&gt; &lt;/domain&gt;
&gt; 
&gt; 
&gt; What Im doing wrong?

What is the error message that you get?

Pavel

["signature.asc" (application/pgp-signature)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190423215751</emailId><senderName>Sukrit Bhatnagar</senderName><senderEmail>skrtbhtngr@gmail.com</senderEmail><timestampReceived>2019-04-23 21:57:51-0400</timestampReceived><subject>[libvirt-users] Error connecting to hypervisor</subject><body>

Hi,

I have compiled and installed libvirt from git checkout
and started libvirtd service. The version is 5.3.0 and
I have done system-wide installation.

When I do a `virsh list`, I get the following error:
error: failed to connect to the hypervisor
error: Unable to encode message header

Similarly, the libvirtd instance shows the following error:
2019-04-23 21:36:57.777+0000: 1807: info : libvirt version: 5.3.0
2019-04-23 21:36:57.777+0000: 1807: info : hostname: dell
2019-04-23 21:36:57.777+0000: 1807: error : virNetSocketReadWire:1803
: End of file while reading data: Input/output error

Furthermore, virnetmessagetest show the following error:
$ VIR_TEST_DEBUG=1 ./virnetmessagetest
TEST: virnetmessagetest
 1) Message Header Encode
... libvirt: XML-RPC error : Unable to encode message header
FAILED
 2) Message Header Decode
... libvirt: XML-RPC error : Unable to decode message length
FAILED
 3) Message Payload Encode
... libvirt: XML-RPC error : Unable to encode message header
FAILED
 4) Message Payload Decode
... libvirt: XML-RPC error : Unable to decode message length
FAILED
 5) Message Payload Stream Encode
... libvirt: XML-RPC error : Unable to encode message header
FAILED

I am also compiling qemu from source and
the virsh commands ran fine when I was using
libvirt 4.7.0 from Fedora repository.

Any ideas how I can solve this issue?

Thanks,
Sukrit

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190427072323</emailId><senderName>Michal Prívozník</senderName><senderEmail>mprivozn@redhat.com</senderEmail><timestampReceived>2019-04-27 07:23:23-0400</timestampReceived><subject>Re: [libvirt-users] Error connecting to hypervisor</subject><body>

On 4/23/19 11:56 PM, Sukrit Bhatnagar wrote:
&gt; Hi,
&gt; 
&gt; I have compiled and installed libvirt from git checkout
&gt; and started libvirtd service. The version is 5.3.0 and
&gt; I have done system-wide installation.
&gt; 
&gt; When I do a `virsh list`, I get the following error:
&gt; error: failed to connect to the hypervisor
&gt; error: Unable to encode message header

This is very suspicious. The error is reported because the function that
is generated by rpcgen and supposed to encode messages failed. Looks
like rpcgen generated some unusable code? What's your rpcgen? I have

glibc-rpcgen-2.26.9000-41.fc28.x86_64

and everything's working for me. BTW if you try compiling from 5.2.0
tarball the error should go away because we ship generated sources in there.

Michal

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190429125228</emailId><senderName>Sukrit Bhatnagar</senderName><senderEmail>skrtbhtngr@gmail.com</senderEmail><timestampReceived>2019-04-29 12:52:28-0400</timestampReceived><subject>Re: [libvirt-users] Error connecting to hypervisor</subject><body>

On Sat, 27 Apr 2019 at 12:53, Michal Prívozník &lt;mprivozn@redhat.com&gt; wrote:
&gt;
&gt; On 4/23/19 11:56 PM, Sukrit Bhatnagar wrote:
&gt; &gt; Hi,
&gt; &gt;
&gt; &gt; I have compiled and installed libvirt from git checkout
&gt; &gt; and started libvirtd service. The version is 5.3.0 and
&gt; &gt; I have done system-wide installation.
&gt; &gt;
&gt; &gt; When I do a `virsh list`, I get the following error:
&gt; &gt; error: failed to connect to the hypervisor
&gt; &gt; error: Unable to encode message header
&gt;
&gt; This is very suspicious. The error is reported because the function that
&gt; is generated by rpcgen and supposed to encode messages failed. Looks
&gt; like rpcgen generated some unusable code? What's your rpcgen? I have
&gt;
&gt; glibc-rpcgen-2.26.9000-41.fc28.x86_64
&gt;
&gt; and everything's working for me. BTW if you try compiling from 5.2.0
&gt; tarball the error should go away because we ship generated sources in there.

I am using Fedora 29 and glibc-rpcgen is not available.
I have these packages installed for rpc:
rpcgen-1.4-1.fc29.x86_64 (rpcsvc-proto)
libtirpc-1.1.4-2.rc2.fc29.x86_64
libtirpc-devel-1.1.4-2.rc2.fc29.x86_64

I have tried using libvirt 5.2.0 form tarball but the same error is there.

&gt; Michal

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190426102017</emailId><senderName>Christoph</senderName><senderEmail>mangel@gmx.de</senderEmail><timestampReceived>2019-04-26 10:20:17-0400</timestampReceived><subject>Re: [libvirt-users] 5.2.0 xen and maxGrantFrames</subject><body>

error: Failed to create domain from /etc/libvirt/libxl/satan_pvh.xml
error: internal error: libxenlight failed to create new domain
'satan.chao5.int'

and with an other domU with this config:


&lt;domain type='xen'&gt;
   &lt;name&gt;abaddon.chao5.int&lt;/name&gt;
   &lt;uuid&gt;2ebe8981-b443-4052-a996-22f377c19cc6&lt;/uuid&gt;
   &lt;memory unit='KiB'&gt;2097152&lt;/memory&gt;
   &lt;currentMemory unit='KiB'&gt;2097152&lt;/currentMemory&gt;
   &lt;vcpu placement='static'&gt;4&lt;/vcpu&gt;
   &lt;bootloader&gt;pygrub&lt;/bootloader&gt;
   &lt;os&gt;
     &lt;type arch='x86_64' machine='xenpvh'&gt;xenpvh&lt;/type&gt;
   &lt;/os&gt;
   &lt;clock offset='utc' adjustment='reset'/&gt;
   &lt;on_poweroff&gt;destroy&lt;/on_poweroff&gt;
   &lt;on_reboot&gt;restart&lt;/on_reboot&gt;
   &lt;on_crash&gt;restart&lt;/on_crash&gt;
   &lt;devices&gt;
     &lt;disk type='block' device='disk'&gt;
       &lt;driver name='phy' type='raw'/&gt;
       &lt;source dev='/dev/vg_lilith/lv_abaddon_root'/&gt;
       &lt;target dev='xvda' bus='xen'/&gt;
     &lt;/disk&gt;
     &lt;disk type='block' device='disk'&gt;
       &lt;driver name='phy' type='raw'/&gt;
       &lt;source dev='/dev/vg_lilith/lv_abaddon_swap'/&gt;
       &lt;target dev='xvdb' bus='xen'/&gt;
     &lt;/disk&gt;
     &lt;interface type='bridge'&gt;
       &lt;mac address='00:16:3e:05:31:30'/&gt;
       &lt;source bridge='xenbr5'/&gt;
       &lt;script path='vif-bridge'/&gt;
     &lt;/interface&gt;
     &lt;console type='pty'&gt;
       &lt;target type='xen' port='0'/&gt;
     &lt;/console&gt;
     &lt;input type='mouse' bus='xen'/&gt;
     &lt;input type='keyboard' bus='xen'/&gt;
     &lt;memballoon model='xen'/&gt;
   &lt;/devices&gt;
   &lt;controller type='xenbus' index='0' maxGrantFrames='128'/&gt;
&lt;/domain&gt;

I dont get an error but:

xen-diag gnttab_query_size 20
domid=20: nr_frames=8, max_nr_frames=32

thats wrong max_nr_frames should be 128

Am 2019-04-26 11:47, schrieb Pavel Hrdina:
&gt; On Fri, Apr 26, 2019 at 11:25:13AM +0200, Christoph wrote:

&gt;
&gt; What is the error message that you get?
&gt;
&gt; Pavel

--
------
Greetz

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190425141439</emailId><senderName>Mauricio Tavares</senderName><senderEmail>raubvogel@gmail.com</senderEmail><timestampReceived>2019-04-25 14:14:39-0400</timestampReceived><subject>Re: [libvirt-users] PCI passthrough and abstraction</subject><body>

So I am reading through , and am wondering what is the difference between

&lt;hostdev mode='subsystem' type='pci' managed='yes'&gt;
&lt;hostdev&gt;

and

&lt;interface type='hostdev' managed='yes'&gt;
&lt;/interface&gt;

if I am trying to give full access to a NIC? Which one exposes more of the card?

On Wed, Apr 24, 2019 at 1:13 PM Mauricio Tavares &lt;raubvogel@gmail.com&gt; wrote:
&gt;
&gt; When you pass a device in the pci chain (after virsh
&gt; nodedev-dettach'ing it from host) to the guest, how much is passed
&gt; without being emulated/abstracted?

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190418155106</emailId><senderName>Michal Prívozník</senderName><senderEmail>mprivozn@redhat.com</senderEmail><timestampReceived>2019-04-18 15:51:06-0400</timestampReceived><subject>Re: [libvirt-users] JVM crashes during GC</subject><body>

On 4/17/19 10:24 AM, Sachin Soman wrote:
&gt; Hi,
&gt; 
&gt; Could you tell me if the following is some known issue?
&gt; 
&gt; While performing the following simple test, I see my JVM crashing
&gt; (consistently):
&gt; 1. Open a connection to an ESXi driver/host (passing ConnectAuthDefault
&gt; instance).
&gt; 2. Close the connection.
&gt; 3. Invoke GC
&gt; 
&gt; When GC is triggered, at some point, some unallocated native memory is
&gt; being tried to release. That's failing.
&gt; 
&gt; The error thrown is:
&gt; 
&gt; java(78745,0x70000241e000) malloc: *** error for object 0x7fd5df561390:
&gt; pointer being freed was not allocated
&gt; 
&gt; *** set a breakpoint in malloc_error_break to debug
&gt; 
&gt; 
&gt; Frames from core dump:
&gt; 
&gt;     frame #0: 0x00007fff5b274b66 libsystem_kernel.dylib`__pthread_kill + 10
&gt; 
&gt;     frame #1: 0x00007fff5b43f080 libsystem_pthread.dylib`pthread_kill + 333
&gt; 
&gt;     frame #2: 0x00007fff5b1d01ae libsystem_c.dylib`abort + 127
&gt; 
&gt;     frame #3: 0x00007fff5b2ce8a6 libsystem_malloc.dylib`free + 521
&gt; 
&gt;     frame #4: 0x00000001127f43a7
&gt; 
&gt;     frame #5: 0x00000001127e3ffd
&gt; 
&gt;     frame #6: 0x00000001127e3ffd
&gt; 
&gt;     frame #7: 0x00000001127e3ffd
&gt; 
&gt;     frame #8: 0x00000001127e3ffd
&gt; 
&gt;     frame #9: 0x00000001127e4042
&gt; 
&gt;     frame #10: 0x00000001127e3ffd
&gt; 
&gt;     frame #11: 0x00000001127e3ffd
&gt; 
&gt;     frame #12: 0x00000001127dc4e7
&gt; 
&gt;     frame #13: 0x000000010c0e235e
&gt; libjvm.dylib`JavaCalls::call_helper(JavaValue*, methodHandle*,
&gt; JavaCallArguments*, Thread*) + 1710
&gt; 
&gt;     frame #14: 0x000000010c0e2b02
&gt; libjvm.dylib`JavaCalls::call_virtual(JavaValue*, KlassHandle, Symbol*,
&gt; Symbol*, JavaCallArguments*, Thread*) + 356
&gt; 
&gt;     frame #15: 0x000000010c0e2cae
&gt; libjvm.dylib`JavaCalls::call_virtual(JavaValue*, Handle, KlassHandle,
&gt; Symbol*, Symbol*, Thread*) + 74
&gt; 
&gt;     frame #16: 0x000000010c1208ee libjvm.dylib`thread_entry(JavaThread*,
&gt; Thread*) + 124
&gt; 
&gt;     frame #17: 0x000000010c33e84d
&gt; libjvm.dylib`JavaThread::thread_main_inner() + 155
&gt; 
&gt;     frame #18: 0x000000010c33ff12 libjvm.dylib`JavaThread::run() + 448
&gt; 
&gt;     frame #19: 0x000000010c26058a libjvm.dylib`java_start(Thread*) + 246
&gt; 
&gt;     frame #20: 0x00007fff5b43c661 libsystem_pthread.dylib`_pthread_body +
&gt; 340
&gt; 
&gt;     frame #21: 0x00007fff5b43c50d libsystem_pthread.dylib`_pthread_start +
&gt; 377
&gt; 
&gt;     frame #22: 0x00007fff5b43bbf9 libsystem_pthread.dylib`thread_start + 13
&gt; 
&gt; 
&gt; I have installed Libvirt 5.2.0.
&gt; Java bindings libvirt-java 0.5.1
&gt; JNA 4.0.0
&gt; Tested Java environments: Oracle Java 8 and OpenJDK 8 on MAC, OpenJDK 11 on
&gt; Ubuntu 16

The backtrace does not suggest it's libvirt related, but I wouldn't be
surprised if our Java bindings mangled memory somewhere. They are
heavily unmaintained.

Regrets,
Michal

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190418155540</emailId><senderName>Daniel =?utf-8?B?UC4gQmVycmFuZ8Op?=</senderName><senderEmail>berrange@redhat.com</senderEmail><timestampReceived>2019-04-18 15:55:40-0400</timestampReceived><subject>Re: [libvirt-users] [libvirt]  JVM crashes during GC</subject><body>

On Thu, Apr 18, 2019 at 05:51:06PM +0200, Michal Prívozník wrote:
&gt; On 4/17/19 10:24 AM, Sachin Soman wrote:
&gt; &gt; Hi,
&gt; &gt; 
&gt; &gt; Could you tell me if the following is some known issue?
&gt; &gt; 
&gt; &gt; While performing the following simple test, I see my JVM crashing
&gt; &gt; (consistently):
&gt; &gt; 1. Open a connection to an ESXi driver/host (passing ConnectAuthDefault
&gt; &gt; instance).
&gt; &gt; 2. Close the connection.
&gt; &gt; 3. Invoke GC
&gt; &gt; 
&gt; &gt; When GC is triggered, at some point, some unallocated native memory is
&gt; &gt; being tried to release. That's failing.
&gt; &gt; 
&gt; &gt; The error thrown is:
&gt; &gt; 
&gt; &gt; java(78745,0x70000241e000) malloc: *** error for object 0x7fd5df561390:
&gt; &gt; pointer being freed was not allocated
&gt; &gt; 
&gt; &gt; *** set a breakpoint in malloc_error_break to debug
&gt; &gt; 
&gt; &gt; 
&gt; &gt; Frames from core dump:
&gt; &gt; 
&gt; &gt;     frame #0: 0x00007fff5b274b66 libsystem_kernel.dylib`__pthread_kill + 10
&gt; &gt; 
&gt; &gt;     frame #1: 0x00007fff5b43f080 libsystem_pthread.dylib`pthread_kill + 333
&gt; &gt; 
&gt; &gt;     frame #2: 0x00007fff5b1d01ae libsystem_c.dylib`abort + 127
&gt; &gt; 
&gt; &gt;     frame #3: 0x00007fff5b2ce8a6 libsystem_malloc.dylib`free + 521
&gt; &gt; 
&gt; &gt;     frame #4: 0x00000001127f43a7
&gt; &gt; 
&gt; &gt;     frame #5: 0x00000001127e3ffd
&gt; &gt; 
&gt; &gt;     frame #6: 0x00000001127e3ffd
&gt; &gt; 
&gt; &gt;     frame #7: 0x00000001127e3ffd
&gt; &gt; 
&gt; &gt;     frame #8: 0x00000001127e3ffd
&gt; &gt; 
&gt; &gt;     frame #9: 0x00000001127e4042
&gt; &gt; 
&gt; &gt;     frame #10: 0x00000001127e3ffd
&gt; &gt; 
&gt; &gt;     frame #11: 0x00000001127e3ffd
&gt; &gt; 
&gt; &gt;     frame #12: 0x00000001127dc4e7
&gt; &gt; 
&gt; &gt;     frame #13: 0x000000010c0e235e
&gt; &gt; libjvm.dylib`JavaCalls::call_helper(JavaValue*, methodHandle*,
&gt; &gt; JavaCallArguments*, Thread*) + 1710
&gt; &gt; 
&gt; &gt;     frame #14: 0x000000010c0e2b02
&gt; &gt; libjvm.dylib`JavaCalls::call_virtual(JavaValue*, KlassHandle, Symbol*,
&gt; &gt; Symbol*, JavaCallArguments*, Thread*) + 356
&gt; &gt; 
&gt; &gt;     frame #15: 0x000000010c0e2cae
&gt; &gt; libjvm.dylib`JavaCalls::call_virtual(JavaValue*, Handle, KlassHandle,
&gt; &gt; Symbol*, Symbol*, Thread*) + 74
&gt; &gt; 
&gt; &gt;     frame #16: 0x000000010c1208ee libjvm.dylib`thread_entry(JavaThread*,
&gt; &gt; Thread*) + 124
&gt; &gt; 
&gt; &gt;     frame #17: 0x000000010c33e84d
&gt; &gt; libjvm.dylib`JavaThread::thread_main_inner() + 155
&gt; &gt; 
&gt; &gt;     frame #18: 0x000000010c33ff12 libjvm.dylib`JavaThread::run() + 448
&gt; &gt; 
&gt; &gt;     frame #19: 0x000000010c26058a libjvm.dylib`java_start(Thread*) + 246
&gt; &gt; 
&gt; &gt;     frame #20: 0x00007fff5b43c661 libsystem_pthread.dylib`_pthread_body +
&gt; &gt; 340
&gt; &gt; 
&gt; &gt;     frame #21: 0x00007fff5b43c50d libsystem_pthread.dylib`_pthread_start +
&gt; &gt; 377
&gt; &gt; 
&gt; &gt;     frame #22: 0x00007fff5b43bbf9 libsystem_pthread.dylib`thread_start + 13
&gt; &gt; 
&gt; &gt; 
&gt; &gt; I have installed Libvirt 5.2.0.
&gt; &gt; Java bindings libvirt-java 0.5.1
&gt; &gt; JNA 4.0.0
&gt; &gt; Tested Java environments: Oracle Java 8 and OpenJDK 8 on MAC, OpenJDK 11 on
&gt; &gt; Ubuntu 16
&gt; 
&gt; The backtrace does not suggest it's libvirt related, but I wouldn't be
&gt; surprised if our Java bindings mangled memory somewhere. They are
&gt; heavily unmaintained.

It could just as easily be a memory corruption bug in the ESX libvirt
driver, since that runs directly in the applicatin process as it is a
stateless client side driver.

We would probably need to have an small demo program that can reproduce
the problem in an isolated fashion, in order to try to debug it, along
with full libvirt debug logs.


Regards,
Daniel
-- 
|: https://berrange.com      -o-    https://www.flickr.com/photos/dberrange :|
|: https://libvirt.org         -o-            https://fstop138.berrange.com :|
|: https://entangle-photo.org    -o-    https://www.instagram.com/dberrange :|

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190418172819</emailId><senderName>Sachin Soman</senderName><senderEmail>sachonline.soman@gmail.com</senderEmail><timestampReceived>2019-04-18 17:28:19-0400</timestampReceived><subject>Re: [libvirt-users] [libvirt]  JVM crashes during GC</subject><body>

[Attachment #2 (multipart/alternative)]


I am attaching the execution results. At the top of each file I have
mentioned the environment details.

Following is the test program I have used:

==================================================

*package* org.libvirt;


*import* org.libvirt.jna.Libvirt;


*public* *class* LibvirtCrashTest {

*void* createAndDestroyDefaultAuthConnection() {

ConnectAuth ca = *new* ConnectAuthDefault();

*try* {

System.*out*.println("Starting new connection with default auth");

Connect connect = *new* Connect("esx://x.x.x.x/?no_verify=1", ca, 0);

Thread.*sleep*(1000);

System.*out*.println("Explicit connection closure");

connect.close();

Thread.*sleep*(5000);

} *catch* (Exception e) {

e.printStackTrace();

}

}


*public* *static* *void* main(String[] args) *throws* Exception {

LibvirtCrashTest testInstance = *new* LibvirtCrashTest();


*for*(*int* counter = 0; counter &lt; 3; counter++) {

testInstance.createAndDestroyDefaultAuthConnection();

System.*out*.println("gc'ing");

System.*gc*();

System.*out*.println("gc'd");

*int* tCounter = 0;

*while*(tCounter++ &lt; 20) {

System.*out*.println("waiting.. " + tCounter);

Thread.*sleep*(1000);

}

}

System.*out*.println("Going down...");

}


}
==================================================


Thanks &amp; Regards
Sachin Soman




On Thu, Apr 18, 2019 at 9:25 PM Daniel P. Berrangé &lt;berrange@redhat.com&gt;
wrote:

&gt; On Thu, Apr 18, 2019 at 05:51:06PM +0200, Michal Prívozník wrote:
&gt; &gt; On 4/17/19 10:24 AM, Sachin Soman wrote:
&gt; &gt; &gt; Hi,
&gt; &gt; &gt;
&gt; &gt; &gt; Could you tell me if the following is some known issue?
&gt; &gt; &gt;
&gt; &gt; &gt; While performing the following simple test, I see my JVM crashing
&gt; &gt; &gt; (consistently):
&gt; &gt; &gt; 1. Open a connection to an ESXi driver/host (passing ConnectAuthDefault
&gt; &gt; &gt; instance).
&gt; &gt; &gt; 2. Close the connection.
&gt; &gt; &gt; 3. Invoke GC
&gt; &gt; &gt;
&gt; &gt; &gt; When GC is triggered, at some point, some unallocated native memory is
&gt; &gt; &gt; being tried to release. That's failing.
&gt; &gt; &gt;
&gt; &gt; &gt; The error thrown is:
&gt; &gt; &gt;
&gt; &gt; &gt; java(78745,0x70000241e000) malloc: *** error for object 0x7fd5df561390:
&gt; &gt; &gt; pointer being freed was not allocated
&gt; &gt; &gt;
&gt; &gt; &gt; *** set a breakpoint in malloc_error_break to debug
&gt; &gt; &gt;
&gt; &gt; &gt;
&gt; &gt; &gt; Frames from core dump:
&gt; &gt; &gt;
&gt; &gt; &gt;     frame #0: 0x00007fff5b274b66 libsystem_kernel.dylib`__pthread_kill
&gt; + 10
&gt; &gt; &gt;
&gt; &gt; &gt;     frame #1: 0x00007fff5b43f080 libsystem_pthread.dylib`pthread_kill
&gt; + 333
&gt; &gt; &gt;
&gt; &gt; &gt;     frame #2: 0x00007fff5b1d01ae libsystem_c.dylib`abort + 127
&gt; &gt; &gt;
&gt; &gt; &gt;     frame #3: 0x00007fff5b2ce8a6 libsystem_malloc.dylib`free + 521
&gt; &gt; &gt;
&gt; &gt; &gt;     frame #4: 0x00000001127f43a7
&gt; &gt; &gt;
&gt; &gt; &gt;     frame #5: 0x00000001127e3ffd
&gt; &gt; &gt;
&gt; &gt; &gt;     frame #6: 0x00000001127e3ffd
&gt; &gt; &gt;
&gt; &gt; &gt;     frame #7: 0x00000001127e3ffd
&gt; &gt; &gt;
&gt; &gt; &gt;     frame #8: 0x00000001127e3ffd
&gt; &gt; &gt;
&gt; &gt; &gt;     frame #9: 0x00000001127e4042
&gt; &gt; &gt;
&gt; &gt; &gt;     frame #10: 0x00000001127e3ffd
&gt; &gt; &gt;
&gt; &gt; &gt;     frame #11: 0x00000001127e3ffd
&gt; &gt; &gt;
&gt; &gt; &gt;     frame #12: 0x00000001127dc4e7
&gt; &gt; &gt;
&gt; &gt; &gt;     frame #13: 0x000000010c0e235e
&gt; &gt; &gt; libjvm.dylib`JavaCalls::call_helper(JavaValue*, methodHandle*,
&gt; &gt; &gt; JavaCallArguments*, Thread*) + 1710
&gt; &gt; &gt;
&gt; &gt; &gt;     frame #14: 0x000000010c0e2b02
&gt; &gt; &gt; libjvm.dylib`JavaCalls::call_virtual(JavaValue*, KlassHandle, Symbol*,
&gt; &gt; &gt; Symbol*, JavaCallArguments*, Thread*) + 356
&gt; &gt; &gt;
&gt; &gt; &gt;     frame #15: 0x000000010c0e2cae
&gt; &gt; &gt; libjvm.dylib`JavaCalls::call_virtual(JavaValue*, Handle, KlassHandle,
&gt; &gt; &gt; Symbol*, Symbol*, Thread*) + 74
&gt; &gt; &gt;
&gt; &gt; &gt;     frame #16: 0x000000010c1208ee
&gt; libjvm.dylib`thread_entry(JavaThread*,
&gt; &gt; &gt; Thread*) + 124
&gt; &gt; &gt;
&gt; &gt; &gt;     frame #17: 0x000000010c33e84d
&gt; &gt; &gt; libjvm.dylib`JavaThread::thread_main_inner() + 155
&gt; &gt; &gt;
&gt; &gt; &gt;     frame #18: 0x000000010c33ff12 libjvm.dylib`JavaThread::run() + 448
&gt; &gt; &gt;
&gt; &gt; &gt;     frame #19: 0x000000010c26058a libjvm.dylib`java_start(Thread*) +
&gt; 246
&gt; &gt; &gt;
&gt; &gt; &gt;     frame #20: 0x00007fff5b43c661
&gt; libsystem_pthread.dylib`_pthread_body +
&gt; &gt; &gt; 340
&gt; &gt; &gt;
&gt; &gt; &gt;     frame #21: 0x00007fff5b43c50d
&gt; libsystem_pthread.dylib`_pthread_start +
&gt; &gt; &gt; 377
&gt; &gt; &gt;
&gt; &gt; &gt;     frame #22: 0x00007fff5b43bbf9 libsystem_pthread.dylib`thread_start
&gt; + 13
&gt; &gt; &gt;
&gt; &gt; &gt;
&gt; &gt; &gt; I have installed Libvirt 5.2.0.
&gt; &gt; &gt; Java bindings libvirt-java 0.5.1
&gt; &gt; &gt; JNA 4.0.0
&gt; &gt; &gt; Tested Java environments: Oracle Java 8 and OpenJDK 8 on MAC, OpenJDK
&gt; 11 on
&gt; &gt; &gt; Ubuntu 16
&gt; &gt;
&gt; &gt; The backtrace does not suggest it's libvirt related, but I wouldn't be
&gt; &gt; surprised if our Java bindings mangled memory somewhere. They are
&gt; &gt; heavily unmaintained.
&gt;
&gt; It could just as easily be a memory corruption bug in the ESX libvirt
&gt; driver, since that runs directly in the applicatin process as it is a
&gt; stateless client side driver.
&gt;
&gt; We would probably need to have an small demo program that can reproduce
&gt; the problem in an isolated fashion, in order to try to debug it, along
&gt; with full libvirt debug logs.
&gt;
&gt;
&gt; Regards,
&gt; Daniel
&gt; --
&gt; |: https://berrange.com      -o-
&gt; https://www.flickr.com/photos/dberrange :|
&gt; |: https://libvirt.org         -o-
&gt; https://fstop138.berrange.com :|
&gt; |: https://entangle-photo.org    -o-
&gt; https://www.instagram.com/dberrange :|
&gt;

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;I am attaching the execution results. At the top of each file I have \
mentioned the environment details.&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Following is the test program I \
have used:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;==================================================&lt;br&gt;&lt;/div&gt;&lt;div&gt;






&lt;p class="gmail-p1" style="margin:0px;font-variant-numeric:normal;font-variant-east-as \
ian:normal;font-stretch:normal;font-size:12px;line-height:normal;font-family:Menlo"&gt;&lt;span \
class="gmail-s1" style="color:rgb(147,26,104)"&gt;&lt;b&gt;package&lt;/b&gt;&lt;/span&gt; org.libvirt;&lt;/p&gt; \
&lt;p class="gmail-p2" style="margin:0px;font-variant-numeric:normal;font-variant-east-as \
ian:normal;font-stretch:normal;font-size:12px;line-height:normal;font-family:Menlo;min-height:14px"&gt;&lt;br&gt;&lt;/p&gt;
 &lt;p class="gmail-p2" \
style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stre \
tch:normal;font-size:12px;line-height:normal;font-family:Menlo;min-height:14px"&gt;&lt;span \
class="gmail-s1" style="color:rgb(147,26,104)"&gt;&lt;b&gt;import&lt;/b&gt;&lt;/span&gt; \
org.libvirt.jna.Libvirt;&lt;br&gt;&lt;/p&gt;&lt;p class="gmail-p2" \
style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stre \
tch:normal;font-size:12px;line-height:normal;font-family:Menlo;min-height:14px"&gt;&lt;br&gt;&lt;/p&gt;&lt;p \
class="gmail-p1" style="margin:0px;font:12px Menlo"&gt;&lt;span class="gmail-s1" \
style="color:rgb(147,26,104)"&gt;&lt;b&gt;public&lt;/b&gt;&lt;/span&gt; &lt;span class="gmail-s1" \
style="color:rgb(147,26,104)"&gt;&lt;b&gt;class&lt;/b&gt;&lt;/span&gt; LibvirtCrashTest {&lt;/p&gt;&lt;p \
class="gmail-p1" style="margin:0px;font:12px Menlo"&gt;&lt;span \
class="gmail-Apple-tab-span" style="white-space:pre"&gt;	&lt;/span&gt;&lt;/p&gt;&lt;p class="gmail-p1" \
style="margin:0px;font:12px Menlo"&gt;&lt;span class="gmail-Apple-tab-span" \
style="white-space:pre"&gt;	&lt;/span&gt;&lt;span class="gmail-s1" \
style="color:rgb(147,26,104)"&gt;&lt;b&gt;void&lt;/b&gt;&lt;/span&gt; \
createAndDestroyDefaultAuthConnection() {&lt;/p&gt;&lt;p class="gmail-p1" \
style="margin:0px;font:12px Menlo"&gt;&lt;span class="gmail-Apple-tab-span" \
style="white-space:pre"&gt;	&lt;/span&gt;&lt;span class="gmail-Apple-tab-span" \
style="white-space:pre"&gt;	&lt;/span&gt;ConnectAuth &lt;span class="gmail-s2" \
style="color:rgb(126,80,79)"&gt;ca&lt;/span&gt; = &lt;span class="gmail-s1" \
style="color:rgb(147,26,104)"&gt;&lt;b&gt;new&lt;/b&gt;&lt;/span&gt; ConnectAuthDefault();&lt;/p&gt;&lt;p \
class="gmail-p1" style="margin:0px;font:12px Menlo"&gt;&lt;span \
class="gmail-Apple-tab-span" style="white-space:pre"&gt;	&lt;/span&gt;&lt;span \
class="gmail-Apple-tab-span" style="white-space:pre"&gt;	&lt;/span&gt;&lt;span class="gmail-s1" \
style="color:rgb(147,26,104)"&gt;&lt;b&gt;try&lt;/b&gt;&lt;/span&gt; {&lt;/p&gt;&lt;p class="gmail-p3" \
style="margin:0px;font:12px Menlo;color:rgb(57,51,255)"&gt;&lt;span class="gmail-s4" \
style="color:rgb(0,0,0)"&gt;&lt;span class="gmail-Apple-tab-span" \
style="white-space:pre"&gt;	&lt;/span&gt;&lt;span class="gmail-Apple-tab-span" \
style="white-space:pre"&gt;	&lt;/span&gt;&lt;span class="gmail-Apple-tab-span" \
style="white-space:pre"&gt;	&lt;/span&gt;System.&lt;/span&gt;&lt;span class="gmail-s5" \
style="color:rgb(3,38,204)"&gt;&lt;b&gt;&lt;i&gt;out&lt;/i&gt;&lt;/b&gt;&lt;/span&gt;&lt;span class="gmail-s4" \
style="color:rgb(0,0,0)"&gt;.println(&lt;/span&gt;"Starting new connection with default \
auth"&lt;span class="gmail-s4" style="color:rgb(0,0,0)"&gt;);&lt;/span&gt;&lt;/p&gt;&lt;p \
class="gmail-p2" style="margin:0px;font:12px Menlo;min-height:14px"&gt;&lt;span \
class="gmail-Apple-tab-span" style="white-space:pre"&gt;	&lt;/span&gt;&lt;span \
class="gmail-Apple-tab-span" style="white-space:pre"&gt;	&lt;/span&gt;&lt;span \
class="gmail-Apple-tab-span" style="white-space:pre"&gt;	&lt;/span&gt;&lt;/p&gt;&lt;p class="gmail-p3" \
style="margin:0px;font:12px Menlo;color:rgb(57,51,255)"&gt;&lt;span class="gmail-s4" \
style="color:rgb(0,0,0)"&gt;&lt;span class="gmail-Apple-tab-span" \
style="white-space:pre"&gt;	&lt;/span&gt;&lt;span class="gmail-Apple-tab-span" \
style="white-space:pre"&gt;	&lt;/span&gt;&lt;span class="gmail-Apple-tab-span" \
style="white-space:pre"&gt;	&lt;/span&gt;Connect &lt;/span&gt;&lt;span class="gmail-s2" \
style="color:rgb(126,80,79)"&gt;connect&lt;/span&gt;&lt;span class="gmail-s4" \
style="color:rgb(0,0,0)"&gt; = &lt;/span&gt;&lt;span class="gmail-s1" \
style="color:rgb(147,26,104)"&gt;&lt;b&gt;new&lt;/b&gt;&lt;/span&gt;&lt;span class="gmail-s4" \
style="color:rgb(0,0,0)"&gt; Connect(&lt;/span&gt;"esx://x.x.x.x/?no_verify=1"&lt;span \
class="gmail-s4" style="color:rgb(0,0,0)"&gt;, &lt;/span&gt;&lt;span class="gmail-s2" \
style="color:rgb(126,80,79)"&gt;ca&lt;/span&gt;&lt;span class="gmail-s4" \
style="color:rgb(0,0,0)"&gt;, 0);&lt;/span&gt;&lt;/p&gt;&lt;p class="gmail-p2" \
style="margin:0px;font:12px Menlo;min-height:14px"&gt;&lt;span class="gmail-Apple-tab-span" \
style="white-space:pre"&gt;	&lt;/span&gt;&lt;span class="gmail-Apple-tab-span" \
style="white-space:pre"&gt;	&lt;/span&gt;&lt;span class="gmail-Apple-tab-span" \
style="white-space:pre"&gt;	&lt;/span&gt;&lt;/p&gt;&lt;p class="gmail-p1" style="margin:0px;font:12px \
Menlo"&gt;&lt;span class="gmail-Apple-tab-span" style="white-space:pre"&gt;	&lt;/span&gt;&lt;span \
class="gmail-Apple-tab-span" style="white-space:pre"&gt;	&lt;/span&gt;&lt;span \
class="gmail-Apple-tab-span" \
style="white-space:pre"&gt;	&lt;/span&gt;Thread.&lt;i&gt;sleep&lt;/i&gt;(1000);&lt;/p&gt;&lt;p class="gmail-p2" \
style="margin:0px;font:12px Menlo;min-height:14px"&gt;&lt;span class="gmail-Apple-tab-span" \
style="white-space:pre"&gt;	&lt;/span&gt;&lt;span class="gmail-Apple-tab-span" \
style="white-space:pre"&gt;	&lt;/span&gt;&lt;span class="gmail-Apple-tab-span" \
style="white-space:pre"&gt;	&lt;/span&gt;&lt;/p&gt;&lt;p class="gmail-p3" style="margin:0px;font:12px \
Menlo;color:rgb(57,51,255)"&gt;&lt;span class="gmail-s4" style="color:rgb(0,0,0)"&gt;&lt;span \
class="gmail-Apple-tab-span" style="white-space:pre"&gt;	&lt;/span&gt;&lt;span \
class="gmail-Apple-tab-span" style="white-space:pre"&gt;	&lt;/span&gt;&lt;span \
class="gmail-Apple-tab-span" style="white-space:pre"&gt;	&lt;/span&gt;System.&lt;/span&gt;&lt;span \
class="gmail-s5" style="color:rgb(3,38,204)"&gt;&lt;b&gt;&lt;i&gt;out&lt;/i&gt;&lt;/b&gt;&lt;/span&gt;&lt;span \
class="gmail-s4" style="color:rgb(0,0,0)"&gt;.println(&lt;/span&gt;"Explicit connection \
closure"&lt;span class="gmail-s4" style="color:rgb(0,0,0)"&gt;);&lt;/span&gt;&lt;/p&gt;&lt;p \
class="gmail-p1" style="margin:0px;font:12px Menlo"&gt;&lt;span \
class="gmail-Apple-tab-span" style="white-space:pre"&gt;	&lt;/span&gt;&lt;span \
class="gmail-Apple-tab-span" style="white-space:pre"&gt;	&lt;/span&gt;&lt;span \
class="gmail-Apple-tab-span" style="white-space:pre"&gt;	&lt;/span&gt;&lt;span class="gmail-s2" \
style="color:rgb(126,80,79)"&gt;connect&lt;/span&gt;.close();&lt;/p&gt;&lt;p class="gmail-p2" \
style="margin:0px;font:12px Menlo;min-height:14px"&gt;&lt;span class="gmail-Apple-tab-span" \
style="white-space:pre"&gt;	&lt;/span&gt;&lt;span class="gmail-Apple-tab-span" \
style="white-space:pre"&gt;	&lt;/span&gt;&lt;span class="gmail-Apple-tab-span" \
style="white-space:pre"&gt;	&lt;/span&gt;&lt;/p&gt;&lt;p class="gmail-p1" style="margin:0px;font:12px \
Menlo"&gt;&lt;span class="gmail-Apple-tab-span" style="white-space:pre"&gt;	&lt;/span&gt;&lt;span \
class="gmail-Apple-tab-span" style="white-space:pre"&gt;	&lt;/span&gt;&lt;span \
class="gmail-Apple-tab-span" \
style="white-space:pre"&gt;	&lt;/span&gt;Thread.&lt;i&gt;sleep&lt;/i&gt;(5000);&lt;/p&gt;&lt;p class="gmail-p1" \
style="margin:0px;font:12px Menlo"&gt;&lt;span class="gmail-Apple-tab-span" \
style="white-space:pre"&gt;	&lt;/span&gt;&lt;span class="gmail-Apple-tab-span" \
style="white-space:pre"&gt;	&lt;/span&gt;} &lt;span class="gmail-s1" \
style="color:rgb(147,26,104)"&gt;&lt;b&gt;catch&lt;/b&gt;&lt;/span&gt; (Exception &lt;span class="gmail-s2" \
style="color:rgb(126,80,79)"&gt;e&lt;/span&gt;) {&lt;/p&gt;&lt;p class="gmail-p1" \
style="margin:0px;font:12px Menlo"&gt;&lt;span class="gmail-Apple-tab-span" \
style="white-space:pre"&gt;	&lt;/span&gt;&lt;span class="gmail-Apple-tab-span" \
style="white-space:pre"&gt;	&lt;/span&gt;&lt;span class="gmail-Apple-tab-span" \
style="white-space:pre"&gt;	&lt;/span&gt;&lt;span class="gmail-s2" \
style="color:rgb(126,80,79)"&gt;e&lt;/span&gt;.printStackTrace();&lt;/p&gt;&lt;p class="gmail-p1" \
style="margin:0px;font:12px Menlo"&gt;&lt;span class="gmail-Apple-tab-span" \
style="white-space:pre"&gt;	&lt;/span&gt;&lt;span class="gmail-Apple-tab-span" \
style="white-space:pre"&gt;	&lt;/span&gt;}&lt;span class="gmail-Apple-converted-space"&gt;  \
&lt;/span&gt;&lt;/p&gt;&lt;p class="gmail-p1" style="margin:0px;font:12px Menlo"&gt;&lt;span \
class="gmail-Apple-tab-span" style="white-space:pre"&gt;	&lt;/span&gt;}&lt;span \
class="gmail-Apple-tab-span" style="white-space:pre"&gt;	&lt;/span&gt;&lt;/p&gt;&lt;p class="gmail-p2" \
style="margin:0px;font:12px Menlo;min-height:14px"&gt;&lt;br&gt;&lt;/p&gt;&lt;p class="gmail-p1" \
style="margin:0px;font:12px Menlo"&gt;&lt;span class="gmail-Apple-tab-span" \
style="white-space:pre"&gt;	&lt;/span&gt;&lt;span class="gmail-s1" \
style="color:rgb(147,26,104)"&gt;&lt;b&gt;public&lt;/b&gt;&lt;/span&gt; &lt;span class="gmail-s1" \
style="color:rgb(147,26,104)"&gt;&lt;b&gt;static&lt;/b&gt;&lt;/span&gt; &lt;span class="gmail-s1" \
style="color:rgb(147,26,104)"&gt;&lt;b&gt;void&lt;/b&gt;&lt;/span&gt; main(String[] &lt;span class="gmail-s2" \
style="color:rgb(126,80,79)"&gt;args&lt;/span&gt;) &lt;span class="gmail-s1" \
style="color:rgb(147,26,104)"&gt;&lt;b&gt;throws&lt;/b&gt;&lt;/span&gt; Exception {&lt;/p&gt;&lt;p class="gmail-p1" \
style="margin:0px;font:12px Menlo"&gt;&lt;span class="gmail-Apple-tab-span" \
style="white-space:pre"&gt;	&lt;/span&gt;&lt;span class="gmail-Apple-tab-span" \
style="white-space:pre"&gt;	&lt;/span&gt;LibvirtCrashTest &lt;span class="gmail-s2" \
style="color:rgb(126,80,79)"&gt;testInstance&lt;/span&gt; = &lt;span class="gmail-s1" \
style="color:rgb(147,26,104)"&gt;&lt;b&gt;new&lt;/b&gt;&lt;/span&gt; LibvirtCrashTest();&lt;/p&gt;&lt;p \
class="gmail-p2" style="margin:0px;font:12px Menlo;min-height:14px"&gt;&lt;br&gt;&lt;/p&gt;&lt;p \
class="gmail-p1" style="margin:0px;font:12px Menlo"&gt;&lt;span \
class="gmail-Apple-tab-span" style="white-space:pre"&gt;	&lt;/span&gt;&lt;span \
class="gmail-Apple-tab-span" style="white-space:pre"&gt;	&lt;/span&gt;&lt;span class="gmail-s1" \
style="color:rgb(147,26,104)"&gt;&lt;b&gt;for&lt;/b&gt;&lt;/span&gt;(&lt;span class="gmail-s1" \
style="color:rgb(147,26,104)"&gt;&lt;b&gt;int&lt;/b&gt;&lt;/span&gt; &lt;span class="gmail-s2" \
style="color:rgb(126,80,79)"&gt;counter&lt;/span&gt; = 0; &lt;span class="gmail-s2" \
style="color:rgb(126,80,79)"&gt;counter&lt;/span&gt; &lt; 3; &lt;span class="gmail-s2" \
style="color:rgb(126,80,79)"&gt;counter&lt;/span&gt;++) {&lt;/p&gt;&lt;p class="gmail-p4" \
style="margin:0px;font:12px Menlo;color:rgb(78,144,114)"&gt;&lt;span class="gmail-s4" \
style="color:rgb(0,0,0)"&gt;&lt;span class="gmail-Apple-tab-span" \
style="white-space:pre"&gt;	&lt;/span&gt;&lt;span class="gmail-Apple-tab-span" \
style="white-space:pre"&gt;	&lt;/span&gt;&lt;span class="gmail-Apple-tab-span" \
style="white-space:pre"&gt;	&lt;/span&gt;&lt;/span&gt;&lt;span class="gmail-s2" \
style="color:rgb(126,80,79)"&gt;testInstance&lt;/span&gt;&lt;span \
style="color:rgb(34,34,34)"&gt;.createAndDestroyDefaultAuthConnection();&lt;/span&gt;&lt;/p&gt;&lt;p \
class="gmail-p4" style="margin:0px;font:12px Menlo;color:rgb(78,144,114)"&gt;&lt;span \
class="gmail-s4" style="color:rgb(0,0,0)"&gt;&lt;span class="gmail-Apple-tab-span" \
style="white-space:pre"&gt;	&lt;/span&gt;&lt;span class="gmail-Apple-tab-span" \
style="white-space:pre"&gt;	&lt;/span&gt;&lt;span class="gmail-Apple-tab-span" \
style="white-space:pre"&gt;	&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p class="gmail-p1" \
style="margin:0px;font:12px Menlo"&gt;&lt;span class="gmail-Apple-tab-span" \
style="white-space:pre"&gt;	&lt;/span&gt;&lt;span class="gmail-Apple-tab-span" \
style="white-space:pre"&gt;	&lt;/span&gt;&lt;span class="gmail-Apple-tab-span" \
style="white-space:pre"&gt;	&lt;/span&gt;System.&lt;span class="gmail-s5" \
style="color:rgb(3,38,204)"&gt;&lt;b&gt;&lt;i&gt;out&lt;/i&gt;&lt;/b&gt;&lt;/span&gt;.println(&lt;span class="gmail-s3" \
style="color:rgb(57,51,255)"&gt;"gc'ing"&lt;/span&gt;);&lt;/p&gt;&lt;p class="gmail-p1" \
style="margin:0px;font:12px Menlo"&gt;&lt;span class="gmail-Apple-tab-span" \
style="white-space:pre"&gt;	&lt;/span&gt;&lt;span class="gmail-Apple-tab-span" \
style="white-space:pre"&gt;	&lt;/span&gt;&lt;span class="gmail-Apple-tab-span" \
style="white-space:pre"&gt;	&lt;/span&gt;System.&lt;i&gt;gc&lt;/i&gt;();&lt;span \
class="gmail-Apple-converted-space"&gt;  &lt;/span&gt;&lt;/p&gt;&lt;p class="gmail-p1" \
style="margin:0px;font:12px Menlo"&gt;&lt;span class="gmail-Apple-tab-span" \
style="white-space:pre"&gt;	&lt;/span&gt;&lt;span class="gmail-Apple-tab-span" \
style="white-space:pre"&gt;	&lt;/span&gt;&lt;span class="gmail-Apple-tab-span" \
style="white-space:pre"&gt;	&lt;/span&gt;System.&lt;span class="gmail-s5" \
style="color:rgb(3,38,204)"&gt;&lt;b&gt;&lt;i&gt;out&lt;/i&gt;&lt;/b&gt;&lt;/span&gt;.println(&lt;span class="gmail-s3" \
style="color:rgb(57,51,255)"&gt;"gc'd"&lt;/span&gt;);&lt;/p&gt;&lt;p class="gmail-p2" \
style="margin:0px;font:12px Menlo;min-height:14px"&gt;&lt;span class="gmail-Apple-tab-span" \
style="white-space:pre"&gt;	&lt;/span&gt;&lt;span class="gmail-Apple-tab-span" \
style="white-space:pre"&gt;	&lt;/span&gt;&lt;span class="gmail-Apple-tab-span" \
style="white-space:pre"&gt;	&lt;/span&gt;&lt;/p&gt;&lt;p class="gmail-p1" style="margin:0px;font:12px \
Menlo"&gt;&lt;span class="gmail-Apple-tab-span" style="white-space:pre"&gt;	&lt;/span&gt;&lt;span \
class="gmail-Apple-tab-span" style="white-space:pre"&gt;	&lt;/span&gt;&lt;span \
class="gmail-Apple-tab-span" style="white-space:pre"&gt;	&lt;/span&gt;&lt;span class="gmail-s1" \
style="color:rgb(147,26,104)"&gt;&lt;b&gt;int&lt;/b&gt;&lt;/span&gt; &lt;span class="gmail-s2" \
style="color:rgb(126,80,79)"&gt;tCounter&lt;/span&gt; = 0;&lt;/p&gt;&lt;p class="gmail-p1" \
style="margin:0px;font:12px Menlo"&gt;&lt;span class="gmail-Apple-tab-span" \
style="white-space:pre"&gt;	&lt;/span&gt;&lt;span class="gmail-Apple-tab-span" \
style="white-space:pre"&gt;	&lt;/span&gt;&lt;span class="gmail-Apple-tab-span" \
style="white-space:pre"&gt;	&lt;/span&gt;&lt;span class="gmail-s1" \
style="color:rgb(147,26,104)"&gt;&lt;b&gt;while&lt;/b&gt;&lt;/span&gt;(&lt;span class="gmail-s2" \
style="color:rgb(126,80,79)"&gt;tCounter&lt;/span&gt;++ &lt; 20) {&lt;/p&gt;&lt;p class="gmail-p1" \
style="margin:0px;font:12px Menlo"&gt;&lt;span class="gmail-Apple-tab-span" \
style="white-space:pre"&gt;	&lt;/span&gt;&lt;span class="gmail-Apple-tab-span" \
style="white-space:pre"&gt;	&lt;/span&gt;&lt;span class="gmail-Apple-tab-span" \
style="white-space:pre"&gt;	&lt;/span&gt;&lt;span class="gmail-Apple-tab-span" \
style="white-space:pre"&gt;	&lt;/span&gt;System.&lt;span class="gmail-s5" \
style="color:rgb(3,38,204)"&gt;&lt;b&gt;&lt;i&gt;out&lt;/i&gt;&lt;/b&gt;&lt;/span&gt;.println(&lt;span class="gmail-s3" \
style="color:rgb(57,51,255)"&gt;"waiting.. "&lt;/span&gt; + &lt;span class="gmail-s2" \
style="color:rgb(126,80,79)"&gt;tCounter&lt;/span&gt;);&lt;span \
class="gmail-Apple-converted-space"&gt;  &lt;/span&gt;&lt;/p&gt;&lt;p class="gmail-p1" \
style="margin:0px;font:12px Menlo"&gt;&lt;span class="gmail-Apple-tab-span" \
style="white-space:pre"&gt;	&lt;/span&gt;&lt;span class="gmail-Apple-tab-span" \
style="white-space:pre"&gt;	&lt;/span&gt;&lt;span class="gmail-Apple-tab-span" \
style="white-space:pre"&gt;	&lt;/span&gt;&lt;span class="gmail-Apple-tab-span" \
style="white-space:pre"&gt;	&lt;/span&gt;Thread.&lt;i&gt;sleep&lt;/i&gt;(1000);&lt;/p&gt;&lt;p class="gmail-p1" \
style="margin:0px;font:12px Menlo"&gt;&lt;span class="gmail-Apple-tab-span" \
style="white-space:pre"&gt;	&lt;/span&gt;&lt;span class="gmail-Apple-tab-span" \
style="white-space:pre"&gt;	&lt;/span&gt;&lt;span class="gmail-Apple-tab-span" \
style="white-space:pre"&gt;	&lt;/span&gt;}&lt;/p&gt;&lt;p class="gmail-p1" style="margin:0px;font:12px \
Menlo"&gt;&lt;span class="gmail-Apple-tab-span" style="white-space:pre"&gt;	&lt;/span&gt;&lt;span \
class="gmail-Apple-tab-span" style="white-space:pre"&gt;	&lt;/span&gt;}&lt;/p&gt;&lt;p class="gmail-p2" \
style="margin:0px;font:12px Menlo;min-height:14px"&gt;&lt;span class="gmail-Apple-tab-span" \
style="white-space:pre"&gt;	&lt;/span&gt;&lt;span class="gmail-Apple-tab-span" \
style="white-space:pre"&gt;	&lt;/span&gt;&lt;/p&gt;&lt;p class="gmail-p1" style="margin:0px;font:12px \
Menlo"&gt;&lt;span class="gmail-Apple-tab-span" style="white-space:pre"&gt;	&lt;/span&gt;&lt;span \
class="gmail-Apple-tab-span" style="white-space:pre"&gt;	&lt;/span&gt;System.&lt;span \
class="gmail-s5" style="color:rgb(3,38,204)"&gt;&lt;b&gt;&lt;i&gt;out&lt;/i&gt;&lt;/b&gt;&lt;/span&gt;.println(&lt;span \
class="gmail-s3" style="color:rgb(57,51,255)"&gt;"Going \
down..."&lt;/span&gt;);&lt;/p&gt;&lt;p class="gmail-p1" style="margin:0px;font:12px \
Menlo"&gt;&lt;span class="gmail-Apple-tab-span" style="white-space:pre"&gt;	&lt;/span&gt;}&lt;/p&gt;&lt;p \
class="gmail-p2" style="margin:0px;font:12px Menlo;min-height:14px"&gt;&lt;br&gt;&lt;/p&gt;&lt;p \
class="gmail-p1" style="margin:0px;font:12px Menlo"&gt;


























































































&lt;/p&gt;&lt;p class="gmail-p1" \
style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stre \
tch:normal;font-size:12px;line-height:normal;font-family:Menlo"&gt;}&lt;/p&gt;&lt;/div&gt;&lt;div&gt;==================================================&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br \
clear="all"&gt;&lt;div&gt;&lt;div dir="ltr" class="gmail_signature" \
data-smartmail="gmail_signature"&gt;&lt;div dir="ltr"&gt;&lt;div&gt;&lt;div&gt;Thanks &amp; \
Regards&lt;br&gt;Sachin Soman&lt;br&gt;&lt;br&gt;&lt;/div&gt; &lt;div&gt;  \
&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;div class="gmail_quote"&gt;&lt;div \
dir="ltr" class="gmail_attr"&gt;On Thu, Apr 18, 2019 at 9:25 PM Daniel P. Berrangé \
&lt;&lt;a href="mailto:berrange@redhat.com"&gt;berrange@redhat.com&lt;/a&gt;&gt; \
wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote class="gmail_quote" style="margin:0px 0px 0px \
0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"&gt;On Thu, Apr 18, 2019 \
at 05:51:06PM +0200, Michal Prívozník wrote:&lt;br&gt; &gt; On 4/17/19 10:24 AM, Sachin \
Soman wrote:&lt;br&gt; &gt; &gt; Hi,&lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt; Could you tell me if the following is some known issue?&lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt; While performing the following simple test, I see my JVM crashing&lt;br&gt;
&gt; &gt; (consistently):&lt;br&gt;
&gt; &gt; 1. Open a connection to an ESXi driver/host (passing ConnectAuthDefault&lt;br&gt;
&gt; &gt; instance).&lt;br&gt;
&gt; &gt; 2. Close the connection.&lt;br&gt;
&gt; &gt; 3. Invoke GC&lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt; When GC is triggered, at some point, some unallocated native memory is&lt;br&gt;
&gt; &gt; being tried to release. That's failing.&lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt; The error thrown is:&lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt; java(78745,0x70000241e000) malloc: *** error for object 0x7fd5df561390:&lt;br&gt;
&gt; &gt; pointer being freed was not allocated&lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt; *** set a breakpoint in malloc_error_break to debug&lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt; Frames from core dump:&lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt;        frame #0: 0x00007fff5b274b66 libsystem_kernel.dylib`__pthread_kill + \
10&lt;br&gt; &gt; &gt; &lt;br&gt;
&gt; &gt;        frame #1: 0x00007fff5b43f080 libsystem_pthread.dylib`pthread_kill + \
333&lt;br&gt; &gt; &gt; &lt;br&gt;
&gt; &gt;        frame #2: 0x00007fff5b1d01ae libsystem_c.dylib`abort + 127&lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt;        frame #3: 0x00007fff5b2ce8a6 libsystem_malloc.dylib`free + 521&lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt;        frame #4: 0x00000001127f43a7&lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt;        frame #5: 0x00000001127e3ffd&lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt;        frame #6: 0x00000001127e3ffd&lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt;        frame #7: 0x00000001127e3ffd&lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt;        frame #8: 0x00000001127e3ffd&lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt;        frame #9: 0x00000001127e4042&lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt;        frame #10: 0x00000001127e3ffd&lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt;        frame #11: 0x00000001127e3ffd&lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt;        frame #12: 0x00000001127dc4e7&lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt;        frame #13: 0x000000010c0e235e&lt;br&gt;
&gt; &gt; libjvm.dylib`JavaCalls::call_helper(JavaValue*, methodHandle*,&lt;br&gt;
&gt; &gt; JavaCallArguments*, Thread*) + 1710&lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt;        frame #14: 0x000000010c0e2b02&lt;br&gt;
&gt; &gt; libjvm.dylib`JavaCalls::call_virtual(JavaValue*, KlassHandle, Symbol*,&lt;br&gt;
&gt; &gt; Symbol*, JavaCallArguments*, Thread*) + 356&lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt;        frame #15: 0x000000010c0e2cae&lt;br&gt;
&gt; &gt; libjvm.dylib`JavaCalls::call_virtual(JavaValue*, Handle, KlassHandle,&lt;br&gt;
&gt; &gt; Symbol*, Symbol*, Thread*) + 74&lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt;        frame #16: 0x000000010c1208ee \
libjvm.dylib`thread_entry(JavaThread*,&lt;br&gt; &gt; &gt; Thread*) + 124&lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt;        frame #17: 0x000000010c33e84d&lt;br&gt;
&gt; &gt; libjvm.dylib`JavaThread::thread_main_inner() + 155&lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt;        frame #18: 0x000000010c33ff12 libjvm.dylib`JavaThread::run() + \
448&lt;br&gt; &gt; &gt; &lt;br&gt;
&gt; &gt;        frame #19: 0x000000010c26058a libjvm.dylib`java_start(Thread*) + \
246&lt;br&gt; &gt; &gt; &lt;br&gt;
&gt; &gt;        frame #20: 0x00007fff5b43c661 libsystem_pthread.dylib`_pthread_body \
+&lt;br&gt; &gt; &gt; 340&lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt;        frame #21: 0x00007fff5b43c50d libsystem_pthread.dylib`_pthread_start \
+&lt;br&gt; &gt; &gt; 377&lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt;        frame #22: 0x00007fff5b43bbf9 libsystem_pthread.dylib`thread_start + \
13&lt;br&gt; &gt; &gt; &lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt; I have installed Libvirt 5.2.0.&lt;br&gt;
&gt; &gt; Java bindings libvirt-java 0.5.1&lt;br&gt;
&gt; &gt; JNA 4.0.0&lt;br&gt;
&gt; &gt; Tested Java environments: Oracle Java 8 and OpenJDK 8 on MAC, OpenJDK 11 \
on&lt;br&gt; &gt; &gt; Ubuntu 16&lt;br&gt;
&gt; &lt;br&gt;
&gt; The backtrace does not suggest it's libvirt related, but I wouldn't \
be&lt;br&gt; &gt; surprised if our Java bindings mangled memory somewhere. They are&lt;br&gt;
&gt; heavily unmaintained.&lt;br&gt;
&lt;br&gt;
It could just as easily be a memory corruption bug in the ESX libvirt&lt;br&gt;
driver, since that runs directly in the applicatin process as it is a&lt;br&gt;
stateless client side driver.&lt;br&gt;
&lt;br&gt;
We would probably need to have an small demo program that can reproduce&lt;br&gt;
the problem in an isolated fashion, in order to try to debug it, along&lt;br&gt;
with full libvirt debug logs.&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
Regards,&lt;br&gt;
Daniel&lt;br&gt;
-- &lt;br&gt;
&gt; &gt; &lt;a href="https://berrange.com" rel="noreferrer" \
&gt; &gt; target="_blank"&gt;https://berrange.com&lt;/a&gt;         -o-      &lt;a \
&gt; &gt; href="https://www.flickr.com/photos/dberrange" rel="noreferrer" \
&gt; &gt; target="_blank"&gt;https://www.flickr.com/photos/dberrange&lt;/a&gt; :|&lt;br&gt;
&gt; &gt; &lt;a href="https://libvirt.org" rel="noreferrer" \
&gt; &gt; target="_blank"&gt;https://libvirt.org&lt;/a&gt;              -o-                  &lt;a \
&gt; &gt; href="https://fstop138.berrange.com" rel="noreferrer" \
&gt; &gt; target="_blank"&gt;https://fstop138.berrange.com&lt;/a&gt; :|&lt;br&gt;
&gt; &gt; &lt;a href="https://entangle-photo.org" rel="noreferrer" \
&gt; &gt; target="_blank"&gt;https://entangle-photo.org&lt;/a&gt;      -o-      &lt;a \
&gt; &gt; href="https://www.instagram.com/dberrange" rel="noreferrer" \
&gt; &gt; target="_blank"&gt;https://www.instagram.com/dberrange&lt;/a&gt; :|&lt;br&gt;
&lt;/blockquote&gt;&lt;/div&gt;

--000000000000cbbe700586d1291f--


["execution6" (application/octet-stream)]
["execution5" (application/octet-stream)]
["execution2" (application/octet-stream)]
["execution4" (application/octet-stream)]
["execution3" (application/octet-stream)]
["execution1" (application/octet-stream)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190418173331</emailId><senderName>Daniel =?utf-8?B?UC4gQmVycmFuZ8Op?=</senderName><senderEmail>berrange@redhat.com</senderEmail><timestampReceived>2019-04-18 17:33:31-0400</timestampReceived><subject>Re: [libvirt-users] [libvirt]  JVM crashes during GC</subject><body>

On Thu, Apr 18, 2019 at 10:46:19PM +0530, Sachin Soman wrote:
&gt; I am attaching the execution results. At the top of each file I have
&gt; mentioned the environment details.
&gt; 
&gt; Following is the test program I have used:
&gt; 
&gt; ==================================================
&gt; 
&gt; *package* org.libvirt;
&gt; 
&gt; 
&gt; *import* org.libvirt.jna.Libvirt;
&gt; 
&gt; 
&gt; *public* *class* LibvirtCrashTest {
&gt; 
&gt; *void* createAndDestroyDefaultAuthConnection() {
&gt; 
&gt; ConnectAuth ca = *new* ConnectAuthDefault();
&gt; 
&gt; *try* {
&gt; 
&gt; System.*out*.println("Starting new connection with default auth");
&gt; 
&gt; Connect connect = *new* Connect("esx://x.x.x.x/?no_verify=1", ca, 0);

It could be interesting to try different libvirt drivers.

eg "test:///default"

this could help identify if its a bug in libvirt common code
vs a bug in only the ESX driver code.

&gt; 
&gt; Thread.*sleep*(1000);
&gt; 
&gt; System.*out*.println("Explicit connection closure");
&gt; 
&gt; connect.close();
&gt; 
&gt; Thread.*sleep*(5000);
&gt; 
&gt; } *catch* (Exception e) {
&gt; 
&gt; e.printStackTrace();
&gt; 
&gt; }
&gt; 
&gt; }
&gt; 
&gt; 
&gt; *public* *static* *void* main(String[] args) *throws* Exception {
&gt; 
&gt; LibvirtCrashTest testInstance = *new* LibvirtCrashTest();
&gt; 
&gt; 
&gt; *for*(*int* counter = 0; counter &lt; 3; counter++) {
&gt; 
&gt; testInstance.createAndDestroyDefaultAuthConnection();
&gt; 
&gt; System.*out*.println("gc'ing");
&gt; 
&gt; System.*gc*();
&gt; 
&gt; System.*out*.println("gc'd");
&gt; 
&gt; *int* tCounter = 0;
&gt; 
&gt; *while*(tCounter++ &lt; 20) {
&gt; 
&gt; System.*out*.println("waiting.. " + tCounter);
&gt; 
&gt; Thread.*sleep*(1000);
&gt; 
&gt; }
&gt; 
&gt; }
&gt; 
&gt; System.*out*.println("Going down...");
&gt; 
&gt; }
&gt; 
&gt; 
&gt; }
&gt; ==================================================
&gt; 
&gt; 
&gt; Thanks &amp; Regards
&gt; Sachin Soman
&gt; 
&gt; 
&gt; 
&gt; 
&gt; On Thu, Apr 18, 2019 at 9:25 PM Daniel P. Berrangé &lt;berrange@redhat.com&gt;
&gt; wrote:
&gt; 
&gt; &gt; On Thu, Apr 18, 2019 at 05:51:06PM +0200, Michal Prívozník wrote:
&gt; &gt; &gt; On 4/17/19 10:24 AM, Sachin Soman wrote:
&gt; &gt; &gt; &gt; Hi,
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; Could you tell me if the following is some known issue?
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; While performing the following simple test, I see my JVM crashing
&gt; &gt; &gt; &gt; (consistently):
&gt; &gt; &gt; &gt; 1. Open a connection to an ESXi driver/host (passing ConnectAuthDefault
&gt; &gt; &gt; &gt; instance).
&gt; &gt; &gt; &gt; 2. Close the connection.
&gt; &gt; &gt; &gt; 3. Invoke GC
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; When GC is triggered, at some point, some unallocated native memory is
&gt; &gt; &gt; &gt; being tried to release. That's failing.
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; The error thrown is:
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; java(78745,0x70000241e000) malloc: *** error for object 0x7fd5df561390:
&gt; &gt; &gt; &gt; pointer being freed was not allocated
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; *** set a breakpoint in malloc_error_break to debug
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; Frames from core dump:
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt;     frame #0: 0x00007fff5b274b66 libsystem_kernel.dylib`__pthread_kill
&gt; &gt; + 10
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt;     frame #1: 0x00007fff5b43f080 libsystem_pthread.dylib`pthread_kill
&gt; &gt; + 333
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt;     frame #2: 0x00007fff5b1d01ae libsystem_c.dylib`abort + 127
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt;     frame #3: 0x00007fff5b2ce8a6 libsystem_malloc.dylib`free + 521
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt;     frame #4: 0x00000001127f43a7
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt;     frame #5: 0x00000001127e3ffd
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt;     frame #6: 0x00000001127e3ffd
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt;     frame #7: 0x00000001127e3ffd
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt;     frame #8: 0x00000001127e3ffd
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt;     frame #9: 0x00000001127e4042
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt;     frame #10: 0x00000001127e3ffd
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt;     frame #11: 0x00000001127e3ffd
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt;     frame #12: 0x00000001127dc4e7
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt;     frame #13: 0x000000010c0e235e
&gt; &gt; &gt; &gt; libjvm.dylib`JavaCalls::call_helper(JavaValue*, methodHandle*,
&gt; &gt; &gt; &gt; JavaCallArguments*, Thread*) + 1710
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt;     frame #14: 0x000000010c0e2b02
&gt; &gt; &gt; &gt; libjvm.dylib`JavaCalls::call_virtual(JavaValue*, KlassHandle, Symbol*,
&gt; &gt; &gt; &gt; Symbol*, JavaCallArguments*, Thread*) + 356
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt;     frame #15: 0x000000010c0e2cae
&gt; &gt; &gt; &gt; libjvm.dylib`JavaCalls::call_virtual(JavaValue*, Handle, KlassHandle,
&gt; &gt; &gt; &gt; Symbol*, Symbol*, Thread*) + 74
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt;     frame #16: 0x000000010c1208ee
&gt; &gt; libjvm.dylib`thread_entry(JavaThread*,
&gt; &gt; &gt; &gt; Thread*) + 124
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt;     frame #17: 0x000000010c33e84d
&gt; &gt; &gt; &gt; libjvm.dylib`JavaThread::thread_main_inner() + 155
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt;     frame #18: 0x000000010c33ff12 libjvm.dylib`JavaThread::run() + 448
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt;     frame #19: 0x000000010c26058a libjvm.dylib`java_start(Thread*) +
&gt; &gt; 246
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt;     frame #20: 0x00007fff5b43c661
&gt; &gt; libsystem_pthread.dylib`_pthread_body +
&gt; &gt; &gt; &gt; 340
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt;     frame #21: 0x00007fff5b43c50d
&gt; &gt; libsystem_pthread.dylib`_pthread_start +
&gt; &gt; &gt; &gt; 377
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt;     frame #22: 0x00007fff5b43bbf9 libsystem_pthread.dylib`thread_start
&gt; &gt; + 13
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; I have installed Libvirt 5.2.0.
&gt; &gt; &gt; &gt; Java bindings libvirt-java 0.5.1
&gt; &gt; &gt; &gt; JNA 4.0.0
&gt; &gt; &gt; &gt; Tested Java environments: Oracle Java 8 and OpenJDK 8 on MAC, OpenJDK
&gt; &gt; 11 on
&gt; &gt; &gt; &gt; Ubuntu 16
&gt; &gt; &gt;
&gt; &gt; &gt; The backtrace does not suggest it's libvirt related, but I wouldn't be
&gt; &gt; &gt; surprised if our Java bindings mangled memory somewhere. They are
&gt; &gt; &gt; heavily unmaintained.
&gt; &gt;
&gt; &gt; It could just as easily be a memory corruption bug in the ESX libvirt
&gt; &gt; driver, since that runs directly in the applicatin process as it is a
&gt; &gt; stateless client side driver.
&gt; &gt;
&gt; &gt; We would probably need to have an small demo program that can reproduce
&gt; &gt; the problem in an isolated fashion, in order to try to debug it, along
&gt; &gt; with full libvirt debug logs.
&gt; &gt;
&gt; &gt;
&gt; &gt; Regards,
&gt; &gt; Daniel
&gt; &gt; --
&gt; &gt; |: https://berrange.com      -o-
&gt; &gt; https://www.flickr.com/photos/dberrange :|
&gt; &gt; |: https://libvirt.org         -o-
&gt; &gt; https://fstop138.berrange.com :|
&gt; &gt; |: https://entangle-photo.org    -o-
&gt; &gt; https://www.instagram.com/dberrange :|
&gt; &gt;








Regards,
Daniel
-- 
|: https://berrange.com      -o-    https://www.flickr.com/photos/dberrange :|
|: https://libvirt.org         -o-            https://fstop138.berrange.com :|
|: https://entangle-photo.org    -o-    https://www.instagram.com/dberrange :|

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190418174230</emailId><senderName>Sachin Soman</senderName><senderEmail>sachonline.soman@gmail.com</senderEmail><timestampReceived>2019-04-18 17:42:30-0400</timestampReceived><subject>Re: [libvirt-users] [libvirt]  JVM crashes during GC</subject><body>

[Attachment #2 (multipart/alternative)]


Note: A couple of times I have seen errors while closing the connection
(the trace ending with virFree). Also, a few times I have seen backtraces
which show the flow going via esx driver and finally failing to close
connection. Unfortunately I dont have those logs anymore.

The execution results I have shared have been obtained using Libvirt built
from source using the following config parameters:
# configure --prefix=/usr --localstatedir=/var --sysconfdir=/etc
--with-esx=yes

The libvirt java bindings I have taken from :
https://github.com/libvirt/libvirt-java
I have added a sysout in the "finalize" method of Connect class in there,
thats why the "Connect finalizing.." messages in execution results.

Thanks &amp; Regards
Sachin Soman




On Thu, Apr 18, 2019 at 10:46 PM Sachin Soman &lt;sachonline.soman@gmail.com&gt;
wrote:

&gt; I am attaching the execution results. At the top of each file I have
&gt; mentioned the environment details.
&gt;
&gt; Following is the test program I have used:
&gt;
&gt; ==================================================
&gt;
&gt; *package* org.libvirt;
&gt;
&gt;
&gt; *import* org.libvirt.jna.Libvirt;
&gt;
&gt;
&gt; *public* *class* LibvirtCrashTest {
&gt;
&gt; *void* createAndDestroyDefaultAuthConnection() {
&gt;
&gt; ConnectAuth ca = *new* ConnectAuthDefault();
&gt;
&gt; *try* {
&gt;
&gt; System.*out*.println("Starting new connection with default auth");
&gt;
&gt; Connect connect = *new* Connect("esx://x.x.x.x/?no_verify=1", ca, 0);
&gt;
&gt; Thread.*sleep*(1000);
&gt;
&gt; System.*out*.println("Explicit connection closure");
&gt;
&gt; connect.close();
&gt;
&gt; Thread.*sleep*(5000);
&gt;
&gt; } *catch* (Exception e) {
&gt;
&gt; e.printStackTrace();
&gt;
&gt; }
&gt;
&gt; }
&gt;
&gt;
&gt; *public* *static* *void* main(String[] args) *throws* Exception {
&gt;
&gt; LibvirtCrashTest testInstance = *new* LibvirtCrashTest();
&gt;
&gt;
&gt; *for*(*int* counter = 0; counter &lt; 3; counter++) {
&gt;
&gt; testInstance.createAndDestroyDefaultAuthConnection();
&gt;
&gt; System.*out*.println("gc'ing");
&gt;
&gt; System.*gc*();
&gt;
&gt; System.*out*.println("gc'd");
&gt;
&gt; *int* tCounter = 0;
&gt;
&gt; *while*(tCounter++ &lt; 20) {
&gt;
&gt; System.*out*.println("waiting.. " + tCounter);
&gt;
&gt; Thread.*sleep*(1000);
&gt;
&gt; }
&gt;
&gt; }
&gt;
&gt; System.*out*.println("Going down...");
&gt;
&gt; }
&gt;
&gt;
&gt; }
&gt; ==================================================
&gt;
&gt;
&gt; Thanks &amp; Regards
&gt; Sachin Soman
&gt;
&gt;
&gt;
&gt;
&gt; On Thu, Apr 18, 2019 at 9:25 PM Daniel P. Berrangé &lt;berrange@redhat.com&gt;
&gt; wrote:
&gt;
&gt;&gt; On Thu, Apr 18, 2019 at 05:51:06PM +0200, Michal Prívozník wrote:
&gt;&gt; &gt; On 4/17/19 10:24 AM, Sachin Soman wrote:
&gt;&gt; &gt; &gt; Hi,
&gt;&gt; &gt; &gt;
&gt;&gt; &gt; &gt; Could you tell me if the following is some known issue?
&gt;&gt; &gt; &gt;
&gt;&gt; &gt; &gt; While performing the following simple test, I see my JVM crashing
&gt;&gt; &gt; &gt; (consistently):
&gt;&gt; &gt; &gt; 1. Open a connection to an ESXi driver/host (passing
&gt;&gt; ConnectAuthDefault
&gt;&gt; &gt; &gt; instance).
&gt;&gt; &gt; &gt; 2. Close the connection.
&gt;&gt; &gt; &gt; 3. Invoke GC
&gt;&gt; &gt; &gt;
&gt;&gt; &gt; &gt; When GC is triggered, at some point, some unallocated native memory is
&gt;&gt; &gt; &gt; being tried to release. That's failing.
&gt;&gt; &gt; &gt;
&gt;&gt; &gt; &gt; The error thrown is:
&gt;&gt; &gt; &gt;
&gt;&gt; &gt; &gt; java(78745,0x70000241e000) malloc: *** error for object
&gt;&gt; 0x7fd5df561390:
&gt;&gt; &gt; &gt; pointer being freed was not allocated
&gt;&gt; &gt; &gt;
&gt;&gt; &gt; &gt; *** set a breakpoint in malloc_error_break to debug
&gt;&gt; &gt; &gt;
&gt;&gt; &gt; &gt;
&gt;&gt; &gt; &gt; Frames from core dump:
&gt;&gt; &gt; &gt;
&gt;&gt; &gt; &gt;     frame #0: 0x00007fff5b274b66
&gt;&gt; libsystem_kernel.dylib`__pthread_kill + 10
&gt;&gt; &gt; &gt;
&gt;&gt; &gt; &gt;     frame #1: 0x00007fff5b43f080 libsystem_pthread.dylib`pthread_kill
&gt;&gt; + 333
&gt;&gt; &gt; &gt;
&gt;&gt; &gt; &gt;     frame #2: 0x00007fff5b1d01ae libsystem_c.dylib`abort + 127
&gt;&gt; &gt; &gt;
&gt;&gt; &gt; &gt;     frame #3: 0x00007fff5b2ce8a6 libsystem_malloc.dylib`free + 521
&gt;&gt; &gt; &gt;
&gt;&gt; &gt; &gt;     frame #4: 0x00000001127f43a7
&gt;&gt; &gt; &gt;
&gt;&gt; &gt; &gt;     frame #5: 0x00000001127e3ffd
&gt;&gt; &gt; &gt;
&gt;&gt; &gt; &gt;     frame #6: 0x00000001127e3ffd
&gt;&gt; &gt; &gt;
&gt;&gt; &gt; &gt;     frame #7: 0x00000001127e3ffd
&gt;&gt; &gt; &gt;
&gt;&gt; &gt; &gt;     frame #8: 0x00000001127e3ffd
&gt;&gt; &gt; &gt;
&gt;&gt; &gt; &gt;     frame #9: 0x00000001127e4042
&gt;&gt; &gt; &gt;
&gt;&gt; &gt; &gt;     frame #10: 0x00000001127e3ffd
&gt;&gt; &gt; &gt;
&gt;&gt; &gt; &gt;     frame #11: 0x00000001127e3ffd
&gt;&gt; &gt; &gt;
&gt;&gt; &gt; &gt;     frame #12: 0x00000001127dc4e7
&gt;&gt; &gt; &gt;
&gt;&gt; &gt; &gt;     frame #13: 0x000000010c0e235e
&gt;&gt; &gt; &gt; libjvm.dylib`JavaCalls::call_helper(JavaValue*, methodHandle*,
&gt;&gt; &gt; &gt; JavaCallArguments*, Thread*) + 1710
&gt;&gt; &gt; &gt;
&gt;&gt; &gt; &gt;     frame #14: 0x000000010c0e2b02
&gt;&gt; &gt; &gt; libjvm.dylib`JavaCalls::call_virtual(JavaValue*, KlassHandle, Symbol*,
&gt;&gt; &gt; &gt; Symbol*, JavaCallArguments*, Thread*) + 356
&gt;&gt; &gt; &gt;
&gt;&gt; &gt; &gt;     frame #15: 0x000000010c0e2cae
&gt;&gt; &gt; &gt; libjvm.dylib`JavaCalls::call_virtual(JavaValue*, Handle, KlassHandle,
&gt;&gt; &gt; &gt; Symbol*, Symbol*, Thread*) + 74
&gt;&gt; &gt; &gt;
&gt;&gt; &gt; &gt;     frame #16: 0x000000010c1208ee
&gt;&gt; libjvm.dylib`thread_entry(JavaThread*,
&gt;&gt; &gt; &gt; Thread*) + 124
&gt;&gt; &gt; &gt;
&gt;&gt; &gt; &gt;     frame #17: 0x000000010c33e84d
&gt;&gt; &gt; &gt; libjvm.dylib`JavaThread::thread_main_inner() + 155
&gt;&gt; &gt; &gt;
&gt;&gt; &gt; &gt;     frame #18: 0x000000010c33ff12 libjvm.dylib`JavaThread::run() + 448
&gt;&gt; &gt; &gt;
&gt;&gt; &gt; &gt;     frame #19: 0x000000010c26058a libjvm.dylib`java_start(Thread*) +
&gt;&gt; 246
&gt;&gt; &gt; &gt;
&gt;&gt; &gt; &gt;     frame #20: 0x00007fff5b43c661
&gt;&gt; libsystem_pthread.dylib`_pthread_body +
&gt;&gt; &gt; &gt; 340
&gt;&gt; &gt; &gt;
&gt;&gt; &gt; &gt;     frame #21: 0x00007fff5b43c50d
&gt;&gt; libsystem_pthread.dylib`_pthread_start +
&gt;&gt; &gt; &gt; 377
&gt;&gt; &gt; &gt;
&gt;&gt; &gt; &gt;     frame #22: 0x00007fff5b43bbf9
&gt;&gt; libsystem_pthread.dylib`thread_start + 13
&gt;&gt; &gt; &gt;
&gt;&gt; &gt; &gt;
&gt;&gt; &gt; &gt; I have installed Libvirt 5.2.0.
&gt;&gt; &gt; &gt; Java bindings libvirt-java 0.5.1
&gt;&gt; &gt; &gt; JNA 4.0.0
&gt;&gt; &gt; &gt; Tested Java environments: Oracle Java 8 and OpenJDK 8 on MAC, OpenJDK
&gt;&gt; 11 on
&gt;&gt; &gt; &gt; Ubuntu 16
&gt;&gt; &gt;
&gt;&gt; &gt; The backtrace does not suggest it's libvirt related, but I wouldn't be
&gt;&gt; &gt; surprised if our Java bindings mangled memory somewhere. They are
&gt;&gt; &gt; heavily unmaintained.
&gt;&gt;
&gt;&gt; It could just as easily be a memory corruption bug in the ESX libvirt
&gt;&gt; driver, since that runs directly in the applicatin process as it is a
&gt;&gt; stateless client side driver.
&gt;&gt;
&gt;&gt; We would probably need to have an small demo program that can reproduce
&gt;&gt; the problem in an isolated fashion, in order to try to debug it, along
&gt;&gt; with full libvirt debug logs.
&gt;&gt;
&gt;&gt;
&gt;&gt; Regards,
&gt;&gt; Daniel
&gt;&gt; --
&gt;&gt; |: https://berrange.com      -o-
&gt;&gt; https://www.flickr.com/photos/dberrange :|
&gt;&gt; |: https://libvirt.org         -o-
&gt;&gt; https://fstop138.berrange.com :|
&gt;&gt; |: https://entangle-photo.org    -o-
&gt;&gt; https://www.instagram.com/dberrange :|
&gt;&gt;
&gt;

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;Note: A couple of times I have seen errors while closing the \
connection (the trace ending with virFree). Also, a few times I have seen backtraces \
which show the flow going via esx driver and finally failing to close connection. \
Unfortunately I dont have those logs anymore.&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The execution \
results I have shared have been obtained using Libvirt built from source using the \
following config parameters:&lt;/div&gt;&lt;div&gt;&lt;span \
style="color:rgb(0,0,255);font-family:Arial,Tahoma,Helvetica,FreeSans,sans-serif;font-size:13.2px"&gt;# \
configure --prefix=/usr --localstatedir=/var --sysconfdir=/etc --with-esx=yes&lt;/span&gt;  \
&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The libvirt java bindings I have taken from :  &lt;a \
href="https://github.com/libvirt/libvirt-java"&gt;https://github.com/libvirt/libvirt-java&lt;/a&gt;&lt;/div&gt;&lt;div&gt;I \
have added a sysout in the "finalize" method of Connect class in there, \
thats why the "&lt;span \
style="font-variant-ligatures:no-common-ligatures;color:rgb(0,0,0);font-family:Menlo;font-size:11px"&gt;Connect \
finalizing..&lt;/span&gt;" messages in execution results.&lt;/div&gt;





&lt;div&gt;&lt;br clear="all"&gt;&lt;div&gt;&lt;div dir="ltr" class="gmail_signature" \
data-smartmail="gmail_signature"&gt;&lt;div dir="ltr"&gt;&lt;div&gt;&lt;div&gt;Thanks &amp; \
Regards&lt;br&gt;Sachin Soman&lt;br&gt;&lt;br&gt;&lt;/div&gt; &lt;div&gt;  \
&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;div class="gmail_quote"&gt;&lt;div \
dir="ltr" class="gmail_attr"&gt;On Thu, Apr 18, 2019 at 10:46 PM Sachin Soman &lt;&lt;a \
href="mailto:sachonline.soman@gmail.com"&gt;sachonline.soman@gmail.com&lt;/a&gt;&gt; \
wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote class="gmail_quote" style="margin:0px 0px 0px \
0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"&gt;&lt;div dir="ltr"&gt;I am \
attaching the execution results. At the top of each file I have mentioned the \
environment details.&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Following is the test program I have \
used:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;==================================================&lt;br&gt;&lt;/div&gt;&lt;div&gt;






&lt;p class="gmail-m_7655888442696803295gmail-p1" \
style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stretch:normal;font-size:12px;line-height:normal;font-family:Menlo"&gt;&lt;span \
class="gmail-m_7655888442696803295gmail-s1" \
style="color:rgb(147,26,104)"&gt;&lt;b&gt;package&lt;/b&gt;&lt;/span&gt; org.libvirt;&lt;/p&gt; &lt;p \
class="gmail-m_7655888442696803295gmail-p2" \
style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stre \
tch:normal;font-size:12px;line-height:normal;font-family:Menlo;min-height:14px"&gt;&lt;br&gt;&lt;/p&gt;
 &lt;p class="gmail-m_7655888442696803295gmail-p2" \
style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stre \
tch:normal;font-size:12px;line-height:normal;font-family:Menlo;min-height:14px"&gt;&lt;span \
class="gmail-m_7655888442696803295gmail-s1" \
style="color:rgb(147,26,104)"&gt;&lt;b&gt;import&lt;/b&gt;&lt;/span&gt; org.libvirt.jna.Libvirt;&lt;br&gt;&lt;/p&gt;&lt;p \
class="gmail-m_7655888442696803295gmail-p2" \
style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stre \
tch:normal;font-size:12px;line-height:normal;font-family:Menlo;min-height:14px"&gt;&lt;br&gt;&lt;/p&gt;&lt;p \
class="gmail-m_7655888442696803295gmail-p1" style="margin:0px;font:12px Menlo"&gt;&lt;span \
class="gmail-m_7655888442696803295gmail-s1" \
style="color:rgb(147,26,104)"&gt;&lt;b&gt;public&lt;/b&gt;&lt;/span&gt; &lt;span \
class="gmail-m_7655888442696803295gmail-s1" \
style="color:rgb(147,26,104)"&gt;&lt;b&gt;class&lt;/b&gt;&lt;/span&gt; LibvirtCrashTest {&lt;/p&gt;&lt;p \
class="gmail-m_7655888442696803295gmail-p1" style="margin:0px;font:12px Menlo"&gt;&lt;span \
class="gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;&lt;/p&gt;&lt;p \
class="gmail-m_7655888442696803295gmail-p1" style="margin:0px;font:12px Menlo"&gt;&lt;span \
class="gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;&lt;span \
class="gmail-m_7655888442696803295gmail-s1" \
style="color:rgb(147,26,104)"&gt;&lt;b&gt;void&lt;/b&gt;&lt;/span&gt; \
createAndDestroyDefaultAuthConnection() {&lt;/p&gt;&lt;p \
class="gmail-m_7655888442696803295gmail-p1" style="margin:0px;font:12px Menlo"&gt;&lt;span \
class="gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;&lt;span \
class="gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;ConnectAuth &lt;span \
class="gmail-m_7655888442696803295gmail-s2" style="color:rgb(126,80,79)"&gt;ca&lt;/span&gt; = \
&lt;span class="gmail-m_7655888442696803295gmail-s1" \
style="color:rgb(147,26,104)"&gt;&lt;b&gt;new&lt;/b&gt;&lt;/span&gt; ConnectAuthDefault();&lt;/p&gt;&lt;p \
class="gmail-m_7655888442696803295gmail-p1" style="margin:0px;font:12px Menlo"&gt;&lt;span \
class="gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;&lt;span \
class="gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;&lt;span \
class="gmail-m_7655888442696803295gmail-s1" \
style="color:rgb(147,26,104)"&gt;&lt;b&gt;try&lt;/b&gt;&lt;/span&gt; {&lt;/p&gt;&lt;p \
class="gmail-m_7655888442696803295gmail-p3" style="margin:0px;font:12px \
Menlo;color:rgb(57,51,255)"&gt;&lt;span class="gmail-m_7655888442696803295gmail-s4" \
style="color:rgb(0,0,0)"&gt;&lt;span \
class="gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;&lt;span \
class="gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;&lt;span \
class="gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;System.&lt;/span&gt;&lt;span \
class="gmail-m_7655888442696803295gmail-s5" \
style="color:rgb(3,38,204)"&gt;&lt;b&gt;&lt;i&gt;out&lt;/i&gt;&lt;/b&gt;&lt;/span&gt;&lt;span \
class="gmail-m_7655888442696803295gmail-s4" \
style="color:rgb(0,0,0)"&gt;.println(&lt;/span&gt;"Starting new connection with default \
auth"&lt;span class="gmail-m_7655888442696803295gmail-s4" \
style="color:rgb(0,0,0)"&gt;);&lt;/span&gt;&lt;/p&gt;&lt;p class="gmail-m_7655888442696803295gmail-p2" \
style="margin:0px;font:12px Menlo;min-height:14px"&gt;&lt;span \
class="gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;&lt;span \
class="gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;&lt;span \
class="gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;&lt;/p&gt;&lt;p \
class="gmail-m_7655888442696803295gmail-p3" style="margin:0px;font:12px \
Menlo;color:rgb(57,51,255)"&gt;&lt;span class="gmail-m_7655888442696803295gmail-s4" \
style="color:rgb(0,0,0)"&gt;&lt;span \
class="gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;&lt;span \
class="gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;&lt;span \
class="gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;Connect &lt;/span&gt;&lt;span \
class="gmail-m_7655888442696803295gmail-s2" \
style="color:rgb(126,80,79)"&gt;connect&lt;/span&gt;&lt;span \
class="gmail-m_7655888442696803295gmail-s4" style="color:rgb(0,0,0)"&gt; = &lt;/span&gt;&lt;span \
class="gmail-m_7655888442696803295gmail-s1" \
style="color:rgb(147,26,104)"&gt;&lt;b&gt;new&lt;/b&gt;&lt;/span&gt;&lt;span \
class="gmail-m_7655888442696803295gmail-s4" style="color:rgb(0,0,0)"&gt; \
Connect(&lt;/span&gt;"esx://x.x.x.x/?no_verify=1"&lt;span \
class="gmail-m_7655888442696803295gmail-s4" style="color:rgb(0,0,0)"&gt;, &lt;/span&gt;&lt;span \
class="gmail-m_7655888442696803295gmail-s2" \
style="color:rgb(126,80,79)"&gt;ca&lt;/span&gt;&lt;span \
class="gmail-m_7655888442696803295gmail-s4" style="color:rgb(0,0,0)"&gt;, \
0);&lt;/span&gt;&lt;/p&gt;&lt;p class="gmail-m_7655888442696803295gmail-p2" \
style="margin:0px;font:12px Menlo;min-height:14px"&gt;&lt;span \
class="gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;&lt;span \
class="gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;&lt;span \
class="gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;&lt;/p&gt;&lt;p \
class="gmail-m_7655888442696803295gmail-p1" style="margin:0px;font:12px Menlo"&gt;&lt;span \
class="gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;&lt;span \
class="gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;&lt;span \
class="gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;Thread.&lt;i&gt;sleep&lt;/i&gt;(1000);&lt;/p&gt;&lt;p \
class="gmail-m_7655888442696803295gmail-p2" style="margin:0px;font:12px \
Menlo;min-height:14px"&gt;&lt;span class="gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;&lt;span \
class="gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;&lt;span \
class="gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;&lt;/p&gt;&lt;p \
class="gmail-m_7655888442696803295gmail-p3" style="margin:0px;font:12px \
Menlo;color:rgb(57,51,255)"&gt;&lt;span class="gmail-m_7655888442696803295gmail-s4" \
style="color:rgb(0,0,0)"&gt;&lt;span \
class="gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;&lt;span \
class="gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;&lt;span \
class="gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;System.&lt;/span&gt;&lt;span \
class="gmail-m_7655888442696803295gmail-s5" \
style="color:rgb(3,38,204)"&gt;&lt;b&gt;&lt;i&gt;out&lt;/i&gt;&lt;/b&gt;&lt;/span&gt;&lt;span \
class="gmail-m_7655888442696803295gmail-s4" \
style="color:rgb(0,0,0)"&gt;.println(&lt;/span&gt;"Explicit connection closure"&lt;span \
class="gmail-m_7655888442696803295gmail-s4" style="color:rgb(0,0,0)"&gt;);&lt;/span&gt;&lt;/p&gt;&lt;p \
class="gmail-m_7655888442696803295gmail-p1" style="margin:0px;font:12px Menlo"&gt;&lt;span \
class="gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;&lt;span \
class="gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;&lt;span \
class="gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;&lt;span \
class="gmail-m_7655888442696803295gmail-s2" \
style="color:rgb(126,80,79)"&gt;connect&lt;/span&gt;.close();&lt;/p&gt;&lt;p \
class="gmail-m_7655888442696803295gmail-p2" style="margin:0px;font:12px \
Menlo;min-height:14px"&gt;&lt;span class="gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;&lt;span \
class="gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;&lt;span \
class="gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;&lt;/p&gt;&lt;p \
class="gmail-m_7655888442696803295gmail-p1" style="margin:0px;font:12px Menlo"&gt;&lt;span \
class="gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;&lt;span \
class="gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;&lt;span \
class="gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;Thread.&lt;i&gt;sleep&lt;/i&gt;(5000);&lt;/p&gt;&lt;p \
class="gmail-m_7655888442696803295gmail-p1" style="margin:0px;font:12px Menlo"&gt;&lt;span \
class="gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;&lt;span \
class="gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;} &lt;span \
class="gmail-m_7655888442696803295gmail-s1" \
style="color:rgb(147,26,104)"&gt;&lt;b&gt;catch&lt;/b&gt;&lt;/span&gt; (Exception &lt;span \
class="gmail-m_7655888442696803295gmail-s2" style="color:rgb(126,80,79)"&gt;e&lt;/span&gt;) \
{&lt;/p&gt;&lt;p class="gmail-m_7655888442696803295gmail-p1" style="margin:0px;font:12px \
Menlo"&gt;&lt;span class="gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;&lt;span \
class="gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;&lt;span \
class="gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;&lt;span \
class="gmail-m_7655888442696803295gmail-s2" \
style="color:rgb(126,80,79)"&gt;e&lt;/span&gt;.printStackTrace();&lt;/p&gt;&lt;p \
class="gmail-m_7655888442696803295gmail-p1" style="margin:0px;font:12px Menlo"&gt;&lt;span \
class="gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;&lt;span \
class="gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;}&lt;span \
class="gmail-m_7655888442696803295gmail-Apple-converted-space"&gt;  &lt;/span&gt;&lt;/p&gt;&lt;p \
class="gmail-m_7655888442696803295gmail-p1" style="margin:0px;font:12px Menlo"&gt;&lt;span \
class="gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;}&lt;span \
class="gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;&lt;/p&gt;&lt;p \
class="gmail-m_7655888442696803295gmail-p2" style="margin:0px;font:12px \
Menlo;min-height:14px"&gt;&lt;br&gt;&lt;/p&gt;&lt;p class="gmail-m_7655888442696803295gmail-p1" \
style="margin:0px;font:12px Menlo"&gt;&lt;span \
class="gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;&lt;span \
class="gmail-m_7655888442696803295gmail-s1" \
style="color:rgb(147,26,104)"&gt;&lt;b&gt;public&lt;/b&gt;&lt;/span&gt; &lt;span \
class="gmail-m_7655888442696803295gmail-s1" \
style="color:rgb(147,26,104)"&gt;&lt;b&gt;static&lt;/b&gt;&lt;/span&gt; &lt;span \
class="gmail-m_7655888442696803295gmail-s1" \
style="color:rgb(147,26,104)"&gt;&lt;b&gt;void&lt;/b&gt;&lt;/span&gt; main(String[] &lt;span \
class="gmail-m_7655888442696803295gmail-s2" style="color:rgb(126,80,79)"&gt;args&lt;/span&gt;) \
&lt;span class="gmail-m_7655888442696803295gmail-s1" \
style="color:rgb(147,26,104)"&gt;&lt;b&gt;throws&lt;/b&gt;&lt;/span&gt; Exception {&lt;/p&gt;&lt;p \
class="gmail-m_7655888442696803295gmail-p1" style="margin:0px;font:12px Menlo"&gt;&lt;span \
class="gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;&lt;span \
class="gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;LibvirtCrashTest &lt;span \
class="gmail-m_7655888442696803295gmail-s2" \
style="color:rgb(126,80,79)"&gt;testInstance&lt;/span&gt; = &lt;span \
class="gmail-m_7655888442696803295gmail-s1" \
style="color:rgb(147,26,104)"&gt;&lt;b&gt;new&lt;/b&gt;&lt;/span&gt; LibvirtCrashTest();&lt;/p&gt;&lt;p \
class="gmail-m_7655888442696803295gmail-p2" style="margin:0px;font:12px \
Menlo;min-height:14px"&gt;&lt;br&gt;&lt;/p&gt;&lt;p class="gmail-m_7655888442696803295gmail-p1" \
style="margin:0px;font:12px Menlo"&gt;&lt;span \
class="gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;&lt;span \
class="gmail-m_7655888442696803295gmail-Apple-tab-span" \


























































































&lt;/p&gt;&lt;p class="gmail-m_7655888442696803295gmail-p1" \
style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stre \
tch:normal;font-size:12px;line-height:normal;font-family:Menlo"&gt;}&lt;/p&gt;&lt;/div&gt;&lt;div&gt;==================================================&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br \
clear="all"&gt;&lt;div&gt;&lt;div dir="ltr" \
class="gmail-m_7655888442696803295gmail_signature"&gt;&lt;div dir="ltr"&gt;&lt;div&gt;&lt;div&gt;Thanks \
&amp; Regards&lt;br&gt;Sachin Soman&lt;br&gt;&lt;br&gt;&lt;/div&gt; &lt;div&gt;  \
&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;div class="gmail_quote"&gt;&lt;div \
dir="ltr" class="gmail_attr"&gt;On Thu, Apr 18, 2019 at 9:25 PM Daniel P. Berrangé \
&lt;&lt;a href="mailto:berrange@redhat.com" target="_blank"&gt;berrange@redhat.com&lt;/a&gt;&gt; \
wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote class="gmail_quote" style="margin:0px 0px 0px \
0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"&gt;On Thu, Apr 18, 2019 \
at 05:51:06PM +0200, Michal Prívozník wrote:&lt;br&gt; &gt; On 4/17/19 10:24 AM, Sachin \
Soman wrote:&lt;br&gt; &gt; &gt; Hi,&lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt; Could you tell me if the following is some known issue?&lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt; While performing the following simple test, I see my JVM crashing&lt;br&gt;
&gt; &gt; (consistently):&lt;br&gt;
&gt; &gt; 1. Open a connection to an ESXi driver/host (passing ConnectAuthDefault&lt;br&gt;
&gt; &gt; instance).&lt;br&gt;
&gt; &gt; 2. Close the connection.&lt;br&gt;
&gt; &gt; 3. Invoke GC&lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt; When GC is triggered, at some point, some unallocated native memory is&lt;br&gt;
&gt; &gt; being tried to release. That's failing.&lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt; The error thrown is:&lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt; java(78745,0x70000241e000) malloc: *** error for object 0x7fd5df561390:&lt;br&gt;
&gt; &gt; pointer being freed was not allocated&lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt; *** set a breakpoint in malloc_error_break to debug&lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt; Frames from core dump:&lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt;        frame #0: 0x00007fff5b274b66 libsystem_kernel.dylib`__pthread_kill + \
10&lt;br&gt; &gt; &gt; &lt;br&gt;
&gt; &gt;        frame #1: 0x00007fff5b43f080 libsystem_pthread.dylib`pthread_kill + \
333&lt;br&gt; &gt; &gt; &lt;br&gt;
&gt; &gt;        frame #2: 0x00007fff5b1d01ae libsystem_c.dylib`abort + 127&lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt;        frame #3: 0x00007fff5b2ce8a6 libsystem_malloc.dylib`free + 521&lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt;        frame #4: 0x00000001127f43a7&lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt;        frame #5: 0x00000001127e3ffd&lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt;        frame #6: 0x00000001127e3ffd&lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt;        frame #7: 0x00000001127e3ffd&lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt;        frame #8: 0x00000001127e3ffd&lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt;        frame #9: 0x00000001127e4042&lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt;        frame #10: 0x00000001127e3ffd&lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt;        frame #11: 0x00000001127e3ffd&lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt;        frame #12: 0x00000001127dc4e7&lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt;        frame #13: 0x000000010c0e235e&lt;br&gt;
&gt; &gt; libjvm.dylib`JavaCalls::call_helper(JavaValue*, methodHandle*,&lt;br&gt;
&gt; &gt; JavaCallArguments*, Thread*) + 1710&lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt;        frame #14: 0x000000010c0e2b02&lt;br&gt;
&gt; &gt; libjvm.dylib`JavaCalls::call_virtual(JavaValue*, KlassHandle, Symbol*,&lt;br&gt;
&gt; &gt; Symbol*, JavaCallArguments*, Thread*) + 356&lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt;        frame #15: 0x000000010c0e2cae&lt;br&gt;
&gt; &gt; libjvm.dylib`JavaCalls::call_virtual(JavaValue*, Handle, KlassHandle,&lt;br&gt;
&gt; &gt; Symbol*, Symbol*, Thread*) + 74&lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt;        frame #16: 0x000000010c1208ee \
libjvm.dylib`thread_entry(JavaThread*,&lt;br&gt; &gt; &gt; Thread*) + 124&lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt;        frame #17: 0x000000010c33e84d&lt;br&gt;
&gt; &gt; libjvm.dylib`JavaThread::thread_main_inner() + 155&lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt;        frame #18: 0x000000010c33ff12 libjvm.dylib`JavaThread::run() + \
448&lt;br&gt; &gt; &gt; &lt;br&gt;
&gt; &gt;        frame #19: 0x000000010c26058a libjvm.dylib`java_start(Thread*) + \
246&lt;br&gt; &gt; &gt; &lt;br&gt;
&gt; &gt;        frame #20: 0x00007fff5b43c661 libsystem_pthread.dylib`_pthread_body \
+&lt;br&gt; &gt; &gt; 340&lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt;        frame #21: 0x00007fff5b43c50d libsystem_pthread.dylib`_pthread_start \
+&lt;br&gt; &gt; &gt; 377&lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt;        frame #22: 0x00007fff5b43bbf9 libsystem_pthread.dylib`thread_start + \
13&lt;br&gt; &gt; &gt; &lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt; I have installed Libvirt 5.2.0.&lt;br&gt;
&gt; &gt; Java bindings libvirt-java 0.5.1&lt;br&gt;
&gt; &gt; JNA 4.0.0&lt;br&gt;
&gt; &gt; Tested Java environments: Oracle Java 8 and OpenJDK 8 on MAC, OpenJDK 11 \
on&lt;br&gt; &gt; &gt; Ubuntu 16&lt;br&gt;
&gt; &lt;br&gt;
&gt; The backtrace does not suggest it's libvirt related, but I wouldn't \
be&lt;br&gt; &gt; surprised if our Java bindings mangled memory somewhere. They are&lt;br&gt;
&gt; heavily unmaintained.&lt;br&gt;
&lt;br&gt;
It could just as easily be a memory corruption bug in the ESX libvirt&lt;br&gt;
driver, since that runs directly in the applicatin process as it is a&lt;br&gt;
stateless client side driver.&lt;br&gt;
&lt;br&gt;
We would probably need to have an small demo program that can reproduce&lt;br&gt;
the problem in an isolated fashion, in order to try to debug it, along&lt;br&gt;
with full libvirt debug logs.&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
Regards,&lt;br&gt;
Daniel&lt;br&gt;
-- &lt;br&gt;
&gt; &gt; &lt;a href="https://berrange.com" rel="noreferrer" \
&gt; &gt; target="_blank"&gt;https://berrange.com&lt;/a&gt;         -o-      &lt;a \
&gt; &gt; href="https://www.flickr.com/photos/dberrange" rel="noreferrer" \
&gt; &gt; target="_blank"&gt;https://www.flickr.com/photos/dberrange&lt;/a&gt; :|&lt;br&gt;
&gt; &gt; &lt;a href="https://libvirt.org" rel="noreferrer" \
&gt; &gt; target="_blank"&gt;https://libvirt.org&lt;/a&gt;              -o-                  &lt;a \
&gt; &gt; href="https://fstop138.berrange.com" rel="noreferrer" \
&gt; &gt; target="_blank"&gt;https://fstop138.berrange.com&lt;/a&gt; :|&lt;br&gt;
&gt; &gt; &lt;a href="https://entangle-photo.org" rel="noreferrer" \
&gt; &gt; target="_blank"&gt;https://entangle-photo.org&lt;/a&gt;      -o-      &lt;a \
&gt; &gt; href="https://www.instagram.com/dberrange" rel="noreferrer" \
&gt; &gt; target="_blank"&gt;https://www.instagram.com/dberrange&lt;/a&gt; :|&lt;br&gt;
&lt;/blockquote&gt;&lt;/div&gt;
&lt;/blockquote&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190418174646</emailId><senderName>Sachin Soman</senderName><senderEmail>sachonline.soman@gmail.com</senderEmail><timestampReceived>2019-04-18 17:46:46-0400</timestampReceived><subject>Re: [libvirt-users] [libvirt]  JVM crashes during GC</subject><body>

[Attachment #2 (multipart/alternative)]


The same program when I execute locally (MAC 10.13.6; OpenJDK 8; Libvirt
5.2.0), mostly I end up with:

================
Starting new connection with default auth
Enter username for x.x.x.x [root]
abc
Enter abc's password for x.x.x.x
WARNING: THE ENTERED PASSWORD WILL NOT BE MASKED!
xyz
Explicit connection closure
gc'ing
gc'd
waiting.. 1
Connect finalizing..
java(95459,0x70000a270000) malloc: *** error for object 0x7facd57134b0:
pointer being freed was not allocated
*** set a breakpoint in malloc_error_break to debug
=================

Thanks &amp; Regards
Sachin Soman




On Thu, Apr 18, 2019 at 11:00 PM Sachin Soman &lt;sachonline.soman@gmail.com&gt;
wrote:

&gt; Note: A couple of times I have seen errors while closing the connection
&gt; (the trace ending with virFree). Also, a few times I have seen backtraces
&gt; which show the flow going via esx driver and finally failing to close
&gt; connection. Unfortunately I dont have those logs anymore.
&gt;
&gt; The execution results I have shared have been obtained using Libvirt built
&gt; from source using the following config parameters:
&gt; # configure --prefix=/usr --localstatedir=/var --sysconfdir=/etc
&gt; --with-esx=yes
&gt;
&gt; The libvirt java bindings I have taken from :
&gt; https://github.com/libvirt/libvirt-java
&gt; I have added a sysout in the "finalize" method of Connect class in there,
&gt; thats why the "Connect finalizing.." messages in execution results.
&gt;
&gt; Thanks &amp; Regards
&gt; Sachin Soman
&gt;
&gt;
&gt;
&gt;
&gt; On Thu, Apr 18, 2019 at 10:46 PM Sachin Soman &lt;sachonline.soman@gmail.com&gt;
&gt; wrote:
&gt;
&gt;&gt; I am attaching the execution results. At the top of each file I have
&gt;&gt; mentioned the environment details.
&gt;&gt;
&gt;&gt; Following is the test program I have used:
&gt;&gt;
&gt;&gt; ==================================================
&gt;&gt;
&gt;&gt; *package* org.libvirt;
&gt;&gt;
&gt;&gt;
&gt;&gt; *import* org.libvirt.jna.Libvirt;
&gt;&gt;
&gt;&gt;
&gt;&gt; *public* *class* LibvirtCrashTest {
&gt;&gt;
&gt;&gt; *void* createAndDestroyDefaultAuthConnection() {
&gt;&gt;
&gt;&gt; ConnectAuth ca = *new* ConnectAuthDefault();
&gt;&gt;
&gt;&gt; *try* {
&gt;&gt;
&gt;&gt; System.*out*.println("Starting new connection with default auth");
&gt;&gt;
&gt;&gt; Connect connect = *new* Connect("esx://x.x.x.x/?no_verify=1", ca, 0);
&gt;&gt;
&gt;&gt; Thread.*sleep*(1000);
&gt;&gt;
&gt;&gt; System.*out*.println("Explicit connection closure");
&gt;&gt;
&gt;&gt; connect.close();
&gt;&gt;
&gt;&gt; Thread.*sleep*(5000);
&gt;&gt;
&gt;&gt; } *catch* (Exception e) {
&gt;&gt;
&gt;&gt; e.printStackTrace();
&gt;&gt;
&gt;&gt; }
&gt;&gt;
&gt;&gt; }
&gt;&gt;
&gt;&gt;
&gt;&gt; *public* *static* *void* main(String[] args) *throws* Exception {
&gt;&gt;
&gt;&gt; LibvirtCrashTest testInstance = *new* LibvirtCrashTest();
&gt;&gt;
&gt;&gt;
&gt;&gt; *for*(*int* counter = 0; counter &lt; 3; counter++) {
&gt;&gt;
&gt;&gt; testInstance.createAndDestroyDefaultAuthConnection();
&gt;&gt;
&gt;&gt; System.*out*.println("gc'ing");
&gt;&gt;
&gt;&gt; System.*gc*();
&gt;&gt;
&gt;&gt; System.*out*.println("gc'd");
&gt;&gt;
&gt;&gt; *int* tCounter = 0;
&gt;&gt;
&gt;&gt; *while*(tCounter++ &lt; 20) {
&gt;&gt;
&gt;&gt; System.*out*.println("waiting.. " + tCounter);
&gt;&gt;
&gt;&gt; Thread.*sleep*(1000);
&gt;&gt;
&gt;&gt; }
&gt;&gt;
&gt;&gt; }
&gt;&gt;
&gt;&gt; System.*out*.println("Going down...");
&gt;&gt;
&gt;&gt; }
&gt;&gt;
&gt;&gt;
&gt;&gt; }
&gt;&gt; ==================================================
&gt;&gt;
&gt;&gt;
&gt;&gt; Thanks &amp; Regards
&gt;&gt; Sachin Soman
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; On Thu, Apr 18, 2019 at 9:25 PM Daniel P. Berrangé &lt;berrange@redhat.com&gt;
&gt;&gt; wrote:
&gt;&gt;
&gt;&gt;&gt; On Thu, Apr 18, 2019 at 05:51:06PM +0200, Michal Prívozník wrote:
&gt;&gt;&gt; &gt; On 4/17/19 10:24 AM, Sachin Soman wrote:
&gt;&gt;&gt; &gt; &gt; Hi,
&gt;&gt;&gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; Could you tell me if the following is some known issue?
&gt;&gt;&gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; While performing the following simple test, I see my JVM crashing
&gt;&gt;&gt; &gt; &gt; (consistently):
&gt;&gt;&gt; &gt; &gt; 1. Open a connection to an ESXi driver/host (passing
&gt;&gt;&gt; ConnectAuthDefault
&gt;&gt;&gt; &gt; &gt; instance).
&gt;&gt;&gt; &gt; &gt; 2. Close the connection.
&gt;&gt;&gt; &gt; &gt; 3. Invoke GC
&gt;&gt;&gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; When GC is triggered, at some point, some unallocated native memory
&gt;&gt;&gt; is
&gt;&gt;&gt; &gt; &gt; being tried to release. That's failing.
&gt;&gt;&gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; The error thrown is:
&gt;&gt;&gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; java(78745,0x70000241e000) malloc: *** error for object
&gt;&gt;&gt; 0x7fd5df561390:
&gt;&gt;&gt; &gt; &gt; pointer being freed was not allocated
&gt;&gt;&gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; *** set a breakpoint in malloc_error_break to debug
&gt;&gt;&gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; Frames from core dump:
&gt;&gt;&gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt;     frame #0: 0x00007fff5b274b66
&gt;&gt;&gt; libsystem_kernel.dylib`__pthread_kill + 10
&gt;&gt;&gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt;     frame #1: 0x00007fff5b43f080
&gt;&gt;&gt; libsystem_pthread.dylib`pthread_kill + 333
&gt;&gt;&gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt;     frame #2: 0x00007fff5b1d01ae libsystem_c.dylib`abort + 127
&gt;&gt;&gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt;     frame #3: 0x00007fff5b2ce8a6 libsystem_malloc.dylib`free + 521
&gt;&gt;&gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt;     frame #4: 0x00000001127f43a7
&gt;&gt;&gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt;     frame #5: 0x00000001127e3ffd
&gt;&gt;&gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt;     frame #6: 0x00000001127e3ffd
&gt;&gt;&gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt;     frame #7: 0x00000001127e3ffd
&gt;&gt;&gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt;     frame #8: 0x00000001127e3ffd
&gt;&gt;&gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt;     frame #9: 0x00000001127e4042
&gt;&gt;&gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt;     frame #10: 0x00000001127e3ffd
&gt;&gt;&gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt;     frame #11: 0x00000001127e3ffd
&gt;&gt;&gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt;     frame #12: 0x00000001127dc4e7
&gt;&gt;&gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt;     frame #13: 0x000000010c0e235e
&gt;&gt;&gt; &gt; &gt; libjvm.dylib`JavaCalls::call_helper(JavaValue*, methodHandle*,
&gt;&gt;&gt; &gt; &gt; JavaCallArguments*, Thread*) + 1710
&gt;&gt;&gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt;     frame #14: 0x000000010c0e2b02
&gt;&gt;&gt; &gt; &gt; libjvm.dylib`JavaCalls::call_virtual(JavaValue*, KlassHandle,
&gt;&gt;&gt; Symbol*,
&gt;&gt;&gt; &gt; &gt; Symbol*, JavaCallArguments*, Thread*) + 356
&gt;&gt;&gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt;     frame #15: 0x000000010c0e2cae
&gt;&gt;&gt; &gt; &gt; libjvm.dylib`JavaCalls::call_virtual(JavaValue*, Handle, KlassHandle,
&gt;&gt;&gt; &gt; &gt; Symbol*, Symbol*, Thread*) + 74
&gt;&gt;&gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt;     frame #16: 0x000000010c1208ee
&gt;&gt;&gt; libjvm.dylib`thread_entry(JavaThread*,
&gt;&gt;&gt; &gt; &gt; Thread*) + 124
&gt;&gt;&gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt;     frame #17: 0x000000010c33e84d
&gt;&gt;&gt; &gt; &gt; libjvm.dylib`JavaThread::thread_main_inner() + 155
&gt;&gt;&gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt;     frame #18: 0x000000010c33ff12 libjvm.dylib`JavaThread::run() +
&gt;&gt;&gt; 448
&gt;&gt;&gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt;     frame #19: 0x000000010c26058a libjvm.dylib`java_start(Thread*) +
&gt;&gt;&gt; 246
&gt;&gt;&gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt;     frame #20: 0x00007fff5b43c661
&gt;&gt;&gt; libsystem_pthread.dylib`_pthread_body +
&gt;&gt;&gt; &gt; &gt; 340
&gt;&gt;&gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt;     frame #21: 0x00007fff5b43c50d
&gt;&gt;&gt; libsystem_pthread.dylib`_pthread_start +
&gt;&gt;&gt; &gt; &gt; 377
&gt;&gt;&gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt;     frame #22: 0x00007fff5b43bbf9
&gt;&gt;&gt; libsystem_pthread.dylib`thread_start + 13
&gt;&gt;&gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; I have installed Libvirt 5.2.0.
&gt;&gt;&gt; &gt; &gt; Java bindings libvirt-java 0.5.1
&gt;&gt;&gt; &gt; &gt; JNA 4.0.0
&gt;&gt;&gt; &gt; &gt; Tested Java environments: Oracle Java 8 and OpenJDK 8 on MAC,
&gt;&gt;&gt; OpenJDK 11 on
&gt;&gt;&gt; &gt; &gt; Ubuntu 16
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; The backtrace does not suggest it's libvirt related, but I wouldn't be
&gt;&gt;&gt; &gt; surprised if our Java bindings mangled memory somewhere. They are
&gt;&gt;&gt; &gt; heavily unmaintained.
&gt;&gt;&gt;
&gt;&gt;&gt; It could just as easily be a memory corruption bug in the ESX libvirt
&gt;&gt;&gt; driver, since that runs directly in the applicatin process as it is a
&gt;&gt;&gt; stateless client side driver.
&gt;&gt;&gt;
&gt;&gt;&gt; We would probably need to have an small demo program that can reproduce
&gt;&gt;&gt; the problem in an isolated fashion, in order to try to debug it, along
&gt;&gt;&gt; with full libvirt debug logs.
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; Regards,
&gt;&gt;&gt; Daniel
&gt;&gt;&gt; --
&gt;&gt;&gt; |: https://berrange.com      -o-
&gt;&gt;&gt; https://www.flickr.com/photos/dberrange :|
&gt;&gt;&gt; |: https://libvirt.org         -o-
&gt;&gt;&gt; https://fstop138.berrange.com :|
&gt;&gt;&gt; |: https://entangle-photo.org    -o-
&gt;&gt;&gt; https://www.instagram.com/dberrange :|
&gt;&gt;&gt;
&gt;&gt;

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;The same program when I execute locally (MAC 10.13.6; \
OpenJDK 8; Libvirt 5.2.0), mostly I end up with:&lt;/div&gt;&lt;div \
dir="ltr"&gt;&lt;br&gt;&lt;div&gt;================&lt;/div&gt;&lt;div&gt;&lt;div&gt;Starting new connection with \
default auth&lt;/div&gt;&lt;div&gt;Enter username for x.x.x.x \
[root]&lt;/div&gt;&lt;div&gt;abc&lt;/div&gt;&lt;div&gt;Enter abc's password for \
x.x.x.x&lt;/div&gt;&lt;div&gt;WARNING: THE ENTERED PASSWORD WILL NOT BE \
MASKED!&lt;/div&gt;&lt;div&gt;xyz&lt;/div&gt;&lt;div&gt;Explicit connection \
closure&lt;/div&gt;&lt;div&gt;gc'ing&lt;/div&gt;&lt;div&gt;gc'd&lt;/div&gt;&lt;div&gt;waiting.. \
1&lt;/div&gt;&lt;div&gt;Connect finalizing..&lt;/div&gt;&lt;div&gt;java(95459,0x70000a270000) malloc: *** \
error for object 0x7facd57134b0: pointer being freed was not allocated&lt;/div&gt;&lt;div&gt;*** \
set a breakpoint in malloc_error_break to \
debug&lt;/div&gt;&lt;/div&gt;&lt;div&gt;=================&lt;/div&gt;&lt;div&gt;&lt;br clear="all"&gt;&lt;div&gt;&lt;div dir="ltr" \
class="gmail_signature"&gt;&lt;div dir="ltr"&gt;&lt;div&gt;&lt;div&gt;Thanks &amp; Regards&lt;br&gt;Sachin \
Soman&lt;br&gt;&lt;br&gt;&lt;/div&gt; &lt;div&gt;  \
&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;div class="gmail_quote"&gt;&lt;div \
dir="ltr" class="gmail_attr"&gt;On Thu, Apr 18, 2019 at 11:00 PM Sachin Soman &lt;&lt;a \
href="mailto:sachonline.soman@gmail.com"&gt;sachonline.soman@gmail.com&lt;/a&gt;&gt; \
wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote class="gmail_quote" style="margin:0px 0px 0px \
0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"&gt;&lt;div dir="ltr"&gt;Note: A \
couple of times I have seen errors while closing the connection (the trace ending \
with virFree). Also, a few times I have seen backtraces which show the flow going via \
esx driver and finally failing to close connection. Unfortunately I dont have those \
logs anymore.&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The execution results I have shared have been \
obtained using Libvirt built from source using the following config \
parameters:&lt;/div&gt;&lt;div&gt;&lt;span \
style="color:rgb(0,0,255);font-family:Arial,Tahoma,Helvetica,FreeSans,sans-serif;font-size:13.2px"&gt;# \
configure --prefix=/usr --localstatedir=/var --sysconfdir=/etc --with-esx=yes&lt;/span&gt;  \
&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The libvirt java bindings I have taken from :  &lt;a \
href="https://github.com/libvirt/libvirt-java" \
target="_blank"&gt;https://github.com/libvirt/libvirt-java&lt;/a&gt;&lt;/div&gt;&lt;div&gt;I have added a \
sysout in the "finalize" method of Connect class in there, thats why the \
"&lt;span style="font-variant-ligatures:no-common-ligatures;color:rgb(0,0,0);font-family:Menlo;font-size:11px"&gt;Connect \
finalizing..&lt;/span&gt;" messages in execution results.&lt;/div&gt;





&lt;div&gt;&lt;br clear="all"&gt;&lt;div&gt;&lt;div dir="ltr" \
class="gmail-m_-3494953778222030362gmail_signature"&gt;&lt;div dir="ltr"&gt;&lt;div&gt;&lt;div&gt;Thanks \
&amp; Regards&lt;br&gt;Sachin Soman&lt;br&gt;&lt;br&gt;&lt;/div&gt; &lt;div&gt;  \
&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;div class="gmail_quote"&gt;&lt;div \
dir="ltr" class="gmail_attr"&gt;On Thu, Apr 18, 2019 at 10:46 PM Sachin Soman &lt;&lt;a \
href="mailto:sachonline.soman@gmail.com" \
target="_blank"&gt;sachonline.soman@gmail.com&lt;/a&gt;&gt; wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote \
class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid \
rgb(204,204,204);padding-left:1ex"&gt;&lt;div dir="ltr"&gt;I am attaching the execution \
results. At the top of each file I have mentioned the environment \
details.&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Following is the test program I have \
used:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;==================================================&lt;br&gt;&lt;/div&gt;&lt;div&gt;






&lt;p class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-p1" \
style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stretch:normal;font-size:12px;line-height:normal;font-family:Menlo"&gt;&lt;span \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-s1" \
style="color:rgb(147,26,104)"&gt;&lt;b&gt;package&lt;/b&gt;&lt;/span&gt; org.libvirt;&lt;/p&gt; &lt;p \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-p2" \
style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stre \
tch:normal;font-size:12px;line-height:normal;font-family:Menlo;min-height:14px"&gt;&lt;br&gt;&lt;/p&gt;
 &lt;p class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-p2" \
style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stre \
tch:normal;font-size:12px;line-height:normal;font-family:Menlo;min-height:14px"&gt;&lt;span \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-s1" \
style="color:rgb(147,26,104)"&gt;&lt;b&gt;import&lt;/b&gt;&lt;/span&gt; org.libvirt.jna.Libvirt;&lt;br&gt;&lt;/p&gt;&lt;p \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-p2" \
style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stre \
tch:normal;font-size:12px;line-height:normal;font-family:Menlo;min-height:14px"&gt;&lt;br&gt;&lt;/p&gt;&lt;p \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-p1" \
style="margin:0px;font:12px Menlo"&gt;&lt;span \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-s1" \
style="color:rgb(147,26,104)"&gt;&lt;b&gt;public&lt;/b&gt;&lt;/span&gt; &lt;span \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-s1" \
style="color:rgb(147,26,104)"&gt;&lt;b&gt;class&lt;/b&gt;&lt;/span&gt; LibvirtCrashTest {&lt;/p&gt;&lt;p \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-p1" \
style="margin:0px;font:12px Menlo"&gt;&lt;span \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;&lt;/p&gt;&lt;p \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-p1" \
style="margin:0px;font:12px Menlo"&gt;&lt;span \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;&lt;span \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-s1" \
style="color:rgb(147,26,104)"&gt;&lt;b&gt;void&lt;/b&gt;&lt;/span&gt; \
createAndDestroyDefaultAuthConnection() {&lt;/p&gt;&lt;p \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-p1" \
style="margin:0px;font:12px Menlo"&gt;&lt;span \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;&lt;span \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;ConnectAuth &lt;span \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-s2" \
style="color:rgb(126,80,79)"&gt;ca&lt;/span&gt; = &lt;span \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-s1" \
style="color:rgb(147,26,104)"&gt;&lt;b&gt;new&lt;/b&gt;&lt;/span&gt; ConnectAuthDefault();&lt;/p&gt;&lt;p \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-p1" \
style="margin:0px;font:12px Menlo"&gt;&lt;span \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;&lt;span \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;&lt;span \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-s1" \
style="color:rgb(147,26,104)"&gt;&lt;b&gt;try&lt;/b&gt;&lt;/span&gt; {&lt;/p&gt;&lt;p \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-p3" \
style="margin:0px;font:12px Menlo;color:rgb(57,51,255)"&gt;&lt;span \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-s4" \
style="color:rgb(0,0,0)"&gt;&lt;span \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;&lt;span \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;&lt;span \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;System.&lt;/span&gt;&lt;span \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-s5" \
style="color:rgb(3,38,204)"&gt;&lt;b&gt;&lt;i&gt;out&lt;/i&gt;&lt;/b&gt;&lt;/span&gt;&lt;span \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-s4" \
style="color:rgb(0,0,0)"&gt;.println(&lt;/span&gt;"Starting new connection with default \
auth"&lt;span class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-s4" \
style="color:rgb(0,0,0)"&gt;);&lt;/span&gt;&lt;/p&gt;&lt;p \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-p2" \
style="margin:0px;font:12px Menlo;min-height:14px"&gt;&lt;span \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;&lt;span \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;&lt;span \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;&lt;/p&gt;&lt;p \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-p3" \
style="margin:0px;font:12px Menlo;color:rgb(57,51,255)"&gt;&lt;span \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-s4" \
style="color:rgb(0,0,0)"&gt;&lt;span \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;&lt;span \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;&lt;span \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;Connect &lt;/span&gt;&lt;span \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-s2" \
style="color:rgb(126,80,79)"&gt;connect&lt;/span&gt;&lt;span \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-s4" \
style="color:rgb(0,0,0)"&gt; = &lt;/span&gt;&lt;span \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-s1" \
style="color:rgb(147,26,104)"&gt;&lt;b&gt;new&lt;/b&gt;&lt;/span&gt;&lt;span \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-s4" \
style="color:rgb(0,0,0)"&gt; Connect(&lt;/span&gt;"esx://x.x.x.x/?no_verify=1"&lt;span \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-s4" \
style="color:rgb(0,0,0)"&gt;, &lt;/span&gt;&lt;span \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-s2" \
style="color:rgb(126,80,79)"&gt;ca&lt;/span&gt;&lt;span \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-s4" \
style="color:rgb(0,0,0)"&gt;, 0);&lt;/span&gt;&lt;/p&gt;&lt;p \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-p2" \
style="margin:0px;font:12px Menlo;min-height:14px"&gt;&lt;span \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;&lt;span \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;&lt;span \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;&lt;/p&gt;&lt;p \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-p1" \
style="margin:0px;font:12px Menlo"&gt;&lt;span \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;&lt;span \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;&lt;span \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;Thread.&lt;i&gt;sleep&lt;/i&gt;(1000);&lt;/p&gt;&lt;p \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-p2" \
style="margin:0px;font:12px Menlo;min-height:14px"&gt;&lt;span \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;&lt;span \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;&lt;span \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;&lt;/p&gt;&lt;p \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-p3" \
style="margin:0px;font:12px Menlo;color:rgb(57,51,255)"&gt;&lt;span \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-s4" \
style="color:rgb(0,0,0)"&gt;&lt;span \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;&lt;span \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;&lt;span \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;System.&lt;/span&gt;&lt;span \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-s5" \
style="color:rgb(3,38,204)"&gt;&lt;b&gt;&lt;i&gt;out&lt;/i&gt;&lt;/b&gt;&lt;/span&gt;&lt;span \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-s4" \
style="color:rgb(0,0,0)"&gt;.println(&lt;/span&gt;"Explicit connection closure"&lt;span \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-s4" \
style="color:rgb(0,0,0)"&gt;);&lt;/span&gt;&lt;/p&gt;&lt;p \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-p1" \
style="margin:0px;font:12px Menlo"&gt;&lt;span \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;&lt;span \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;&lt;span \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;&lt;span \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-s2" \
style="color:rgb(126,80,79)"&gt;connect&lt;/span&gt;.close();&lt;/p&gt;&lt;p \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-p2" \
style="margin:0px;font:12px Menlo;min-height:14px"&gt;&lt;span \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;&lt;span \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;&lt;span \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;&lt;/p&gt;&lt;p \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-p1" \
style="margin:0px;font:12px Menlo"&gt;&lt;span \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;&lt;span \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;&lt;span \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;Thread.&lt;i&gt;sleep&lt;/i&gt;(5000);&lt;/p&gt;&lt;p \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-p1" \
style="margin:0px;font:12px Menlo"&gt;&lt;span \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;&lt;span \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;} &lt;span \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-s1" \
style="color:rgb(147,26,104)"&gt;&lt;b&gt;catch&lt;/b&gt;&lt;/span&gt; (Exception &lt;span \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-s2" \
style="color:rgb(126,80,79)"&gt;e&lt;/span&gt;) {&lt;/p&gt;&lt;p \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-p1" \
style="margin:0px;font:12px Menlo"&gt;&lt;span \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;&lt;span \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;&lt;span \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;&lt;span \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-s2" \
style="color:rgb(126,80,79)"&gt;e&lt;/span&gt;.printStackTrace();&lt;/p&gt;&lt;p \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-p1" \
style="margin:0px;font:12px Menlo"&gt;&lt;span \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;&lt;span \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;}&lt;span \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-Apple-converted-space"&gt; \
&lt;/span&gt;&lt;/p&gt;&lt;p class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-p1" \
style="margin:0px;font:12px Menlo"&gt;&lt;span \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;}&lt;span \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-Apple-tab-span" \
style="white-space:pre-wrap"&gt;	&lt;/span&gt;&lt;/p&gt;&lt;p \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-p2" \
style="margin:0px;font:12px Menlo;min-height:14px"&gt;&lt;br&gt;&lt;/p&gt;&lt;p \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-p1" \
style="margin:0px;font:12px Menlo"&gt;&lt;span \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-Apple-tab-span" \


























































































&lt;/p&gt;&lt;p class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail-p1" \
style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stre \
tch:normal;font-size:12px;line-height:normal;font-family:Menlo"&gt;}&lt;/p&gt;&lt;/div&gt;&lt;div&gt;==================================================&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br \
clear="all"&gt;&lt;div&gt;&lt;div dir="ltr" \
class="gmail-m_-3494953778222030362gmail-m_7655888442696803295gmail_signature"&gt;&lt;div \
dir="ltr"&gt;&lt;div&gt;&lt;div&gt;Thanks &amp; Regards&lt;br&gt;Sachin Soman&lt;br&gt;&lt;br&gt;&lt;/div&gt; &lt;div&gt;  \
&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;div class="gmail_quote"&gt;&lt;div \
dir="ltr" class="gmail_attr"&gt;On Thu, Apr 18, 2019 at 9:25 PM Daniel P. Berrangé \
&lt;&lt;a href="mailto:berrange@redhat.com" target="_blank"&gt;berrange@redhat.com&lt;/a&gt;&gt; \
wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote class="gmail_quote" style="margin:0px 0px 0px \
0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"&gt;On Thu, Apr 18, 2019 \
at 05:51:06PM +0200, Michal Prívozník wrote:&lt;br&gt; &gt; On 4/17/19 10:24 AM, Sachin \
Soman wrote:&lt;br&gt; &gt; &gt; Hi,&lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt; Could you tell me if the following is some known issue?&lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt; While performing the following simple test, I see my JVM crashing&lt;br&gt;
&gt; &gt; (consistently):&lt;br&gt;
&gt; &gt; 1. Open a connection to an ESXi driver/host (passing ConnectAuthDefault&lt;br&gt;
&gt; &gt; instance).&lt;br&gt;
&gt; &gt; 2. Close the connection.&lt;br&gt;
&gt; &gt; 3. Invoke GC&lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt; When GC is triggered, at some point, some unallocated native memory is&lt;br&gt;
&gt; &gt; being tried to release. That's failing.&lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt; The error thrown is:&lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt; java(78745,0x70000241e000) malloc: *** error for object 0x7fd5df561390:&lt;br&gt;
&gt; &gt; pointer being freed was not allocated&lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt; *** set a breakpoint in malloc_error_break to debug&lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt; Frames from core dump:&lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt;        frame #0: 0x00007fff5b274b66 libsystem_kernel.dylib`__pthread_kill + \
10&lt;br&gt; &gt; &gt; &lt;br&gt;
&gt; &gt;        frame #1: 0x00007fff5b43f080 libsystem_pthread.dylib`pthread_kill + \
333&lt;br&gt; &gt; &gt; &lt;br&gt;
&gt; &gt;        frame #2: 0x00007fff5b1d01ae libsystem_c.dylib`abort + 127&lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt;        frame #3: 0x00007fff5b2ce8a6 libsystem_malloc.dylib`free + 521&lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt;        frame #4: 0x00000001127f43a7&lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt;        frame #5: 0x00000001127e3ffd&lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt;        frame #6: 0x00000001127e3ffd&lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt;        frame #7: 0x00000001127e3ffd&lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt;        frame #8: 0x00000001127e3ffd&lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt;        frame #9: 0x00000001127e4042&lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt;        frame #10: 0x00000001127e3ffd&lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt;        frame #11: 0x00000001127e3ffd&lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt;        frame #12: 0x00000001127dc4e7&lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt;        frame #13: 0x000000010c0e235e&lt;br&gt;
&gt; &gt; libjvm.dylib`JavaCalls::call_helper(JavaValue*, methodHandle*,&lt;br&gt;
&gt; &gt; JavaCallArguments*, Thread*) + 1710&lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt;        frame #14: 0x000000010c0e2b02&lt;br&gt;
&gt; &gt; libjvm.dylib`JavaCalls::call_virtual(JavaValue*, KlassHandle, Symbol*,&lt;br&gt;
&gt; &gt; Symbol*, JavaCallArguments*, Thread*) + 356&lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt;        frame #15: 0x000000010c0e2cae&lt;br&gt;
&gt; &gt; libjvm.dylib`JavaCalls::call_virtual(JavaValue*, Handle, KlassHandle,&lt;br&gt;
&gt; &gt; Symbol*, Symbol*, Thread*) + 74&lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt;        frame #16: 0x000000010c1208ee \
libjvm.dylib`thread_entry(JavaThread*,&lt;br&gt; &gt; &gt; Thread*) + 124&lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt;        frame #17: 0x000000010c33e84d&lt;br&gt;
&gt; &gt; libjvm.dylib`JavaThread::thread_main_inner() + 155&lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt;        frame #18: 0x000000010c33ff12 libjvm.dylib`JavaThread::run() + \
448&lt;br&gt; &gt; &gt; &lt;br&gt;
&gt; &gt;        frame #19: 0x000000010c26058a libjvm.dylib`java_start(Thread*) + \
246&lt;br&gt; &gt; &gt; &lt;br&gt;
&gt; &gt;        frame #20: 0x00007fff5b43c661 libsystem_pthread.dylib`_pthread_body \
+&lt;br&gt; &gt; &gt; 340&lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt;        frame #21: 0x00007fff5b43c50d libsystem_pthread.dylib`_pthread_start \
+&lt;br&gt; &gt; &gt; 377&lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt;        frame #22: 0x00007fff5b43bbf9 libsystem_pthread.dylib`thread_start + \
13&lt;br&gt; &gt; &gt; &lt;br&gt;
&gt; &gt; &lt;br&gt;
&gt; &gt; I have installed Libvirt 5.2.0.&lt;br&gt;
&gt; &gt; Java bindings libvirt-java 0.5.1&lt;br&gt;
&gt; &gt; JNA 4.0.0&lt;br&gt;
&gt; &gt; Tested Java environments: Oracle Java 8 and OpenJDK 8 on MAC, OpenJDK 11 \
on&lt;br&gt; &gt; &gt; Ubuntu 16&lt;br&gt;
&gt; &lt;br&gt;
&gt; The backtrace does not suggest it's libvirt related, but I wouldn't \
be&lt;br&gt; &gt; surprised if our Java bindings mangled memory somewhere. They are&lt;br&gt;
&gt; heavily unmaintained.&lt;br&gt;
&lt;br&gt;
It could just as easily be a memory corruption bug in the ESX libvirt&lt;br&gt;
driver, since that runs directly in the applicatin process as it is a&lt;br&gt;
stateless client side driver.&lt;br&gt;
&lt;br&gt;
We would probably need to have an small demo program that can reproduce&lt;br&gt;
the problem in an isolated fashion, in order to try to debug it, along&lt;br&gt;
with full libvirt debug logs.&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
Regards,&lt;br&gt;
Daniel&lt;br&gt;
-- &lt;br&gt;
&gt; &gt; &lt;a href="https://berrange.com" rel="noreferrer" \
&gt; &gt; target="_blank"&gt;https://berrange.com&lt;/a&gt;         -o-      &lt;a \
&gt; &gt; href="https://www.flickr.com/photos/dberrange" rel="noreferrer" \
&gt; &gt; target="_blank"&gt;https://www.flickr.com/photos/dberrange&lt;/a&gt; :|&lt;br&gt;
&gt; &gt; &lt;a href="https://libvirt.org" rel="noreferrer" \
&gt; &gt; target="_blank"&gt;https://libvirt.org&lt;/a&gt;              -o-                  &lt;a \
&gt; &gt; href="https://fstop138.berrange.com" rel="noreferrer" \
&gt; &gt; target="_blank"&gt;https://fstop138.berrange.com&lt;/a&gt; :|&lt;br&gt;
&gt; &gt; &lt;a href="https://entangle-photo.org" rel="noreferrer" \
&gt; &gt; target="_blank"&gt;https://entangle-photo.org&lt;/a&gt;      -o-      &lt;a \
&gt; &gt; href="https://www.instagram.com/dberrange" rel="noreferrer" \
&gt; &gt; target="_blank"&gt;https://www.instagram.com/dberrange&lt;/a&gt; :|&lt;br&gt;
&lt;/blockquote&gt;&lt;/div&gt;
&lt;/blockquote&gt;&lt;/div&gt;
&lt;/blockquote&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190418175207</emailId><senderName>Sachin Soman</senderName><senderEmail>sachonline.soman@gmail.com</senderEmail><timestampReceived>2019-04-18 17:52:07-0400</timestampReceived><subject>Re: [libvirt-users] [libvirt]  JVM crashes during GC</subject><body>

[Attachment #2 (multipart/alternative)]


I have tried the same tests using the "test" driver, and that works
perfectly; no errors seen.

Thanks &amp; Regards
Sachin Soman




On Thu, Apr 18, 2019 at 11:03 PM Daniel P. Berrangé &lt;berrange@redhat.com&gt;
wrote:

&gt; On Thu, Apr 18, 2019 at 10:46:19PM +0530, Sachin Soman wrote:
&gt; &gt; I am attaching the execution results. At the top of each file I have
&gt; &gt; mentioned the environment details.
&gt; &gt;
&gt; &gt; Following is the test program I have used:
&gt; &gt;
&gt; &gt; ==================================================
&gt; &gt;
&gt; &gt; *package* org.libvirt;
&gt; &gt;
&gt; &gt;
&gt; &gt; *import* org.libvirt.jna.Libvirt;
&gt; &gt;
&gt; &gt;
&gt; &gt; *public* *class* LibvirtCrashTest {
&gt; &gt;
&gt; &gt; *void* createAndDestroyDefaultAuthConnection() {
&gt; &gt;
&gt; &gt; ConnectAuth ca = *new* ConnectAuthDefault();
&gt; &gt;
&gt; &gt; *try* {
&gt; &gt;
&gt; &gt; System.*out*.println("Starting new connection with default auth");
&gt; &gt;
&gt; &gt; Connect connect = *new* Connect("esx://x.x.x.x/?no_verify=1", ca, 0);
&gt;
&gt; It could be interesting to try different libvirt drivers.
&gt;
&gt; eg "test:///default"
&gt;
&gt; this could help identify if its a bug in libvirt common code
&gt; vs a bug in only the ESX driver code.
&gt;
&gt; &gt;
&gt; &gt; Thread.*sleep*(1000);
&gt; &gt;
&gt; &gt; System.*out*.println("Explicit connection closure");
&gt; &gt;
&gt; &gt; connect.close();
&gt; &gt;
&gt; &gt; Thread.*sleep*(5000);
&gt; &gt;
&gt; &gt; } *catch* (Exception e) {
&gt; &gt;
&gt; &gt; e.printStackTrace();
&gt; &gt;
&gt; &gt; }
&gt; &gt;
&gt; &gt; }
&gt; &gt;
&gt; &gt;
&gt; &gt; *public* *static* *void* main(String[] args) *throws* Exception {
&gt; &gt;
&gt; &gt; LibvirtCrashTest testInstance = *new* LibvirtCrashTest();
&gt; &gt;
&gt; &gt;
&gt; &gt; *for*(*int* counter = 0; counter &lt; 3; counter++) {
&gt; &gt;
&gt; &gt; testInstance.createAndDestroyDefaultAuthConnection();
&gt; &gt;
&gt; &gt; System.*out*.println("gc'ing");
&gt; &gt;
&gt; &gt; System.*gc*();
&gt; &gt;
&gt; &gt; System.*out*.println("gc'd");
&gt; &gt;
&gt; &gt; *int* tCounter = 0;
&gt; &gt;
&gt; &gt; *while*(tCounter++ &lt; 20) {
&gt; &gt;
&gt; &gt; System.*out*.println("waiting.. " + tCounter);
&gt; &gt;
&gt; &gt; Thread.*sleep*(1000);
&gt; &gt;
&gt; &gt; }
&gt; &gt;
&gt; &gt; }
&gt; &gt;
&gt; &gt; System.*out*.println("Going down...");
&gt; &gt;
&gt; &gt; }
&gt; &gt;
&gt; &gt;
&gt; &gt; }
&gt; &gt; ==================================================
&gt; &gt;
&gt; &gt;
&gt; &gt; Thanks &amp; Regards
&gt; &gt; Sachin Soman
&gt; &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt; On Thu, Apr 18, 2019 at 9:25 PM Daniel P. Berrangé &lt;berrange@redhat.com&gt;
&gt; &gt; wrote:
&gt; &gt;
&gt; &gt; &gt; On Thu, Apr 18, 2019 at 05:51:06PM +0200, Michal Prívozník wrote:
&gt; &gt; &gt; &gt; On 4/17/19 10:24 AM, Sachin Soman wrote:
&gt; &gt; &gt; &gt; &gt; Hi,
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; Could you tell me if the following is some known issue?
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; While performing the following simple test, I see my JVM crashing
&gt; &gt; &gt; &gt; &gt; (consistently):
&gt; &gt; &gt; &gt; &gt; 1. Open a connection to an ESXi driver/host (passing
&gt; ConnectAuthDefault
&gt; &gt; &gt; &gt; &gt; instance).
&gt; &gt; &gt; &gt; &gt; 2. Close the connection.
&gt; &gt; &gt; &gt; &gt; 3. Invoke GC
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; When GC is triggered, at some point, some unallocated native
&gt; memory is
&gt; &gt; &gt; &gt; &gt; being tried to release. That's failing.
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; The error thrown is:
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; java(78745,0x70000241e000) malloc: *** error for object
&gt; 0x7fd5df561390:
&gt; &gt; &gt; &gt; &gt; pointer being freed was not allocated
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; *** set a breakpoint in malloc_error_break to debug
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; Frames from core dump:
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt;     frame #0: 0x00007fff5b274b66
&gt; libsystem_kernel.dylib`__pthread_kill
&gt; &gt; &gt; + 10
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt;     frame #1: 0x00007fff5b43f080
&gt; libsystem_pthread.dylib`pthread_kill
&gt; &gt; &gt; + 333
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt;     frame #2: 0x00007fff5b1d01ae libsystem_c.dylib`abort + 127
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt;     frame #3: 0x00007fff5b2ce8a6 libsystem_malloc.dylib`free + 521
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt;     frame #4: 0x00000001127f43a7
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt;     frame #5: 0x00000001127e3ffd
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt;     frame #6: 0x00000001127e3ffd
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt;     frame #7: 0x00000001127e3ffd
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt;     frame #8: 0x00000001127e3ffd
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt;     frame #9: 0x00000001127e4042
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt;     frame #10: 0x00000001127e3ffd
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt;     frame #11: 0x00000001127e3ffd
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt;     frame #12: 0x00000001127dc4e7
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt;     frame #13: 0x000000010c0e235e
&gt; &gt; &gt; &gt; &gt; libjvm.dylib`JavaCalls::call_helper(JavaValue*, methodHandle*,
&gt; &gt; &gt; &gt; &gt; JavaCallArguments*, Thread*) + 1710
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt;     frame #14: 0x000000010c0e2b02
&gt; &gt; &gt; &gt; &gt; libjvm.dylib`JavaCalls::call_virtual(JavaValue*, KlassHandle,
&gt; Symbol*,
&gt; &gt; &gt; &gt; &gt; Symbol*, JavaCallArguments*, Thread*) + 356
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt;     frame #15: 0x000000010c0e2cae
&gt; &gt; &gt; &gt; &gt; libjvm.dylib`JavaCalls::call_virtual(JavaValue*, Handle,
&gt; KlassHandle,
&gt; &gt; &gt; &gt; &gt; Symbol*, Symbol*, Thread*) + 74
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt;     frame #16: 0x000000010c1208ee
&gt; &gt; &gt; libjvm.dylib`thread_entry(JavaThread*,
&gt; &gt; &gt; &gt; &gt; Thread*) + 124
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt;     frame #17: 0x000000010c33e84d
&gt; &gt; &gt; &gt; &gt; libjvm.dylib`JavaThread::thread_main_inner() + 155
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt;     frame #18: 0x000000010c33ff12 libjvm.dylib`JavaThread::run() +
&gt; 448
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt;     frame #19: 0x000000010c26058a libjvm.dylib`java_start(Thread*)
&gt; +
&gt; &gt; &gt; 246
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt;     frame #20: 0x00007fff5b43c661
&gt; &gt; &gt; libsystem_pthread.dylib`_pthread_body +
&gt; &gt; &gt; &gt; &gt; 340
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt;     frame #21: 0x00007fff5b43c50d
&gt; &gt; &gt; libsystem_pthread.dylib`_pthread_start +
&gt; &gt; &gt; &gt; &gt; 377
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt;     frame #22: 0x00007fff5b43bbf9
&gt; libsystem_pthread.dylib`thread_start
&gt; &gt; &gt; + 13
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; I have installed Libvirt 5.2.0.
&gt; &gt; &gt; &gt; &gt; Java bindings libvirt-java 0.5.1
&gt; &gt; &gt; &gt; &gt; JNA 4.0.0
&gt; &gt; &gt; &gt; &gt; Tested Java environments: Oracle Java 8 and OpenJDK 8 on MAC,
&gt; OpenJDK
&gt; &gt; &gt; 11 on
&gt; &gt; &gt; &gt; &gt; Ubuntu 16
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; The backtrace does not suggest it's libvirt related, but I wouldn't
&gt; be
&gt; &gt; &gt; &gt; surprised if our Java bindings mangled memory somewhere. They are
&gt; &gt; &gt; &gt; heavily unmaintained.
&gt; &gt; &gt;
&gt; &gt; &gt; It could just as easily be a memory corruption bug in the ESX libvirt
&gt; &gt; &gt; driver, since that runs directly in the applicatin process as it is a
&gt; &gt; &gt; stateless client side driver.
&gt; &gt; &gt;
&gt; &gt; &gt; We would probably need to have an small demo program that can reproduce
&gt; &gt; &gt; the problem in an isolated fashion, in order to try to debug it, along
&gt; &gt; &gt; with full libvirt debug logs.
&gt; &gt; &gt;
&gt; &gt; &gt;
&gt; &gt; &gt; Regards,
&gt; &gt; &gt; Daniel
&gt; &gt; &gt; --
&gt; &gt; &gt; |: https://berrange.com      -o-
&gt; &gt; &gt; https://www.flickr.com/photos/dberrange :|
&gt; &gt; &gt; |: https://libvirt.org         -o-
&gt; &gt; &gt; https://fstop138.berrange.com :|
&gt; &gt; &gt; |: https://entangle-photo.org    -o-
&gt; &gt; &gt; https://www.instagram.com/dberrange :|
&gt; &gt; &gt;
&gt;
&gt;
&gt;
&gt;
&gt;
&gt;
&gt;
&gt;
&gt; Regards,
&gt; Daniel
&gt; --
&gt; |: https://berrange.com      -o-
&gt; https://www.flickr.com/photos/dberrange :|
&gt; |: https://libvirt.org         -o-
&gt; https://fstop138.berrange.com :|
&gt; |: https://entangle-photo.org    -o-
&gt; https://www.instagram.com/dberrange :|
&gt;

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;I have tried the same tests using the "test" driver, and \
that works perfectly; no errors seen.&lt;div&gt;&lt;br clear="all"&gt;&lt;div&gt;&lt;div dir="ltr" \
class="gmail_signature" data-smartmail="gmail_signature"&gt;&lt;div \
dir="ltr"&gt;&lt;div&gt;&lt;div&gt;Thanks &amp; Regards&lt;br&gt;Sachin Soman&lt;br&gt;&lt;br&gt;&lt;/div&gt; &lt;div&gt;  \
&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;div class="gmail_quote"&gt;&lt;div \
dir="ltr" class="gmail_attr"&gt;On Thu, Apr 18, 2019 at 11:03 PM Daniel P. Berrangé \
&lt;&lt;a href="mailto:berrange@redhat.com"&gt;berrange@redhat.com&lt;/a&gt;&gt; \
wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote class="gmail_quote" style="margin:0px 0px 0px \
0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"&gt;On Thu, Apr 18, 2019 \
at 10:46:19PM +0530, Sachin Soman wrote:&lt;br&gt; &gt; I am attaching the execution \
results. At the top of each file I have&lt;br&gt; &gt; mentioned the environment \
details.&lt;br&gt; &gt; &lt;br&gt;
&gt; Following is the test program I have used:&lt;br&gt;
&gt; &lt;br&gt;
&gt; ==================================================&lt;br&gt;
&gt; &lt;br&gt;
&gt; *package* org.libvirt;&lt;br&gt;
&gt; &lt;br&gt;
&gt; &lt;br&gt;
&gt; *import* org.libvirt.jna.Libvirt;&lt;br&gt;
&gt; &lt;br&gt;
&gt; &lt;br&gt;
&gt; *public* *class* LibvirtCrashTest {&lt;br&gt;
&gt; &lt;br&gt;
&gt; *void* createAndDestroyDefaultAuthConnection() {&lt;br&gt;
&gt; &lt;br&gt;
&gt; ConnectAuth ca = *new* ConnectAuthDefault();&lt;br&gt;
&gt; &lt;br&gt;
&gt; *try* {&lt;br&gt;
&gt; &lt;br&gt;
&gt; System.*out*.println("Starting new connection with default auth");&lt;br&gt;
&gt; &lt;br&gt;
&gt; Connect connect = *new* Connect("esx://x.x.x.x/?no_verify=1", ca, \
0);&lt;br&gt; &lt;br&gt;
It could be interesting to try different libvirt drivers.&lt;br&gt;
&lt;br&gt;
eg "test:///default"&lt;br&gt;
&lt;br&gt;
this could help identify if its a bug in libvirt common code&lt;br&gt;
vs a bug in only the ESX driver code.&lt;br&gt;
&lt;br&gt;
&gt; &lt;br&gt;
&gt; Thread.*sleep*(1000);&lt;br&gt;
&gt; &lt;br&gt;
&gt; System.*out*.println("Explicit connection closure");&lt;br&gt;
&gt; &lt;br&gt;
&gt; connect.close();&lt;br&gt;
&gt; &lt;br&gt;
&gt; Thread.*sleep*(5000);&lt;br&gt;
&gt; &lt;br&gt;
&gt; } *catch* (Exception e) {&lt;br&gt;
&gt; &lt;br&gt;
&gt; e.printStackTrace();&lt;br&gt;
&gt; &lt;br&gt;
&gt; }&lt;br&gt;
&gt; &lt;br&gt;
&gt; }&lt;br&gt;
&gt; &lt;br&gt;
&gt; &lt;br&gt;
&gt; *public* *static* *void* main(String[] args) *throws* Exception {&lt;br&gt;
&gt; &lt;br&gt;
&gt; LibvirtCrashTest testInstance = *new* LibvirtCrashTest();&lt;br&gt;
&gt; &lt;br&gt;
&gt; &lt;br&gt;
&gt; *for*(*int* counter = 0; counter &lt; 3; counter++) {&lt;br&gt;
&gt; &lt;br&gt;
&gt; testInstance.createAndDestroyDefaultAuthConnection();&lt;br&gt;
&gt; &lt;br&gt;
&gt; System.*out*.println("gc'ing");&lt;br&gt;
&gt; &lt;br&gt;
&gt; System.*gc*();&lt;br&gt;
&gt; &lt;br&gt;
&gt; System.*out*.println("gc'd");&lt;br&gt;
&gt; &lt;br&gt;
&gt; *int* tCounter = 0;&lt;br&gt;
&gt; &lt;br&gt;
&gt; *while*(tCounter++ &lt; 20) {&lt;br&gt;
&gt; &lt;br&gt;
&gt; System.*out*.println("waiting.. " + tCounter);&lt;br&gt;
&gt; &lt;br&gt;
&gt; Thread.*sleep*(1000);&lt;br&gt;
&gt; &lt;br&gt;
&gt; }&lt;br&gt;
&gt; &lt;br&gt;
&gt; }&lt;br&gt;
&gt; &lt;br&gt;
&gt; System.*out*.println("Going down...");&lt;br&gt;
&gt; &lt;br&gt;
&gt; }&lt;br&gt;
&gt; &lt;br&gt;
&gt; &lt;br&gt;
&gt; }&lt;br&gt;
&gt; ==================================================&lt;br&gt;
&gt; &lt;br&gt;
&gt; &lt;br&gt;
&gt; Thanks &amp; Regards&lt;br&gt;
&gt; Sachin Soman&lt;br&gt;
&gt; &lt;br&gt;
&gt; &lt;br&gt;
&gt; &lt;br&gt;
&gt; &lt;br&gt;
&gt; On Thu, Apr 18, 2019 at 9:25 PM Daniel P. Berrangé &lt;&lt;a \
href="mailto:berrange@redhat.com" target="_blank"&gt;berrange@redhat.com&lt;/a&gt;&gt;&lt;br&gt; \
&gt; wrote:&lt;br&gt; &gt; &lt;br&gt;
&gt; &gt; On Thu, Apr 18, 2019 at 05:51:06PM +0200, Michal Prívozník wrote:&lt;br&gt;
&gt; &gt; &gt; On 4/17/19 10:24 AM, Sachin Soman wrote:&lt;br&gt;
&gt; &gt; &gt; &gt; Hi,&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt; Could you tell me if the following is some known issue?&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt; While performing the following simple test, I see my JVM \
crashing&lt;br&gt; &gt; &gt; &gt; &gt; (consistently):&lt;br&gt;
&gt; &gt; &gt; &gt; 1. Open a connection to an ESXi driver/host (passing \
ConnectAuthDefault&lt;br&gt; &gt; &gt; &gt; &gt; instance).&lt;br&gt;
&gt; &gt; &gt; &gt; 2. Close the connection.&lt;br&gt;
&gt; &gt; &gt; &gt; 3. Invoke GC&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt; When GC is triggered, at some point, some unallocated native \
memory is&lt;br&gt; &gt; &gt; &gt; &gt; being tried to release. That's failing.&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt; The error thrown is:&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt; java(78745,0x70000241e000) malloc: *** error for object \
0x7fd5df561390:&lt;br&gt; &gt; &gt; &gt; &gt; pointer being freed was not allocated&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt; *** set a breakpoint in malloc_error_break to debug&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt; Frames from core dump:&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt;        frame #0: 0x00007fff5b274b66 \
libsystem_kernel.dylib`__pthread_kill&lt;br&gt; &gt; &gt; + 10&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt;        frame #1: 0x00007fff5b43f080 \
libsystem_pthread.dylib`pthread_kill&lt;br&gt; &gt; &gt; + 333&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt;        frame #2: 0x00007fff5b1d01ae libsystem_c.dylib`abort + \
127&lt;br&gt; &gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt;        frame #3: 0x00007fff5b2ce8a6 libsystem_malloc.dylib`free + \
521&lt;br&gt; &gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt;        frame #4: 0x00000001127f43a7&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt;        frame #5: 0x00000001127e3ffd&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt;        frame #6: 0x00000001127e3ffd&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt;        frame #7: 0x00000001127e3ffd&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt;        frame #8: 0x00000001127e3ffd&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt;        frame #9: 0x00000001127e4042&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt;        frame #10: 0x00000001127e3ffd&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt;        frame #11: 0x00000001127e3ffd&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt;        frame #12: 0x00000001127dc4e7&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt;        frame #13: 0x000000010c0e235e&lt;br&gt;
&gt; &gt; &gt; &gt; libjvm.dylib`JavaCalls::call_helper(JavaValue*, \
methodHandle*,&lt;br&gt; &gt; &gt; &gt; &gt; JavaCallArguments*, Thread*) + 1710&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt;        frame #14: 0x000000010c0e2b02&lt;br&gt;
&gt; &gt; &gt; &gt; libjvm.dylib`JavaCalls::call_virtual(JavaValue*, KlassHandle, \
Symbol*,&lt;br&gt; &gt; &gt; &gt; &gt; Symbol*, JavaCallArguments*, Thread*) + 356&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt;        frame #15: 0x000000010c0e2cae&lt;br&gt;
&gt; &gt; &gt; &gt; libjvm.dylib`JavaCalls::call_virtual(JavaValue*, Handle, \
KlassHandle,&lt;br&gt; &gt; &gt; &gt; &gt; Symbol*, Symbol*, Thread*) + 74&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt;        frame #16: 0x000000010c1208ee&lt;br&gt;
&gt; &gt; libjvm.dylib`thread_entry(JavaThread*,&lt;br&gt;
&gt; &gt; &gt; &gt; Thread*) + 124&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt;        frame #17: 0x000000010c33e84d&lt;br&gt;
&gt; &gt; &gt; &gt; libjvm.dylib`JavaThread::thread_main_inner() + 155&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt;        frame #18: 0x000000010c33ff12 \
libjvm.dylib`JavaThread::run() + 448&lt;br&gt; &gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt;        frame #19: 0x000000010c26058a \
libjvm.dylib`java_start(Thread*) +&lt;br&gt; &gt; &gt; 246&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt;        frame #20: 0x00007fff5b43c661&lt;br&gt;
&gt; &gt; libsystem_pthread.dylib`_pthread_body +&lt;br&gt;
&gt; &gt; &gt; &gt; 340&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt;        frame #21: 0x00007fff5b43c50d&lt;br&gt;
&gt; &gt; libsystem_pthread.dylib`_pthread_start +&lt;br&gt;
&gt; &gt; &gt; &gt; 377&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt;        frame #22: 0x00007fff5b43bbf9 \
libsystem_pthread.dylib`thread_start&lt;br&gt; &gt; &gt; + 13&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt; I have installed Libvirt 5.2.0.&lt;br&gt;
&gt; &gt; &gt; &gt; Java bindings libvirt-java 0.5.1&lt;br&gt;
&gt; &gt; &gt; &gt; JNA 4.0.0&lt;br&gt;
&gt; &gt; &gt; &gt; Tested Java environments: Oracle Java 8 and OpenJDK 8 on MAC, \
OpenJDK&lt;br&gt; &gt; &gt; 11 on&lt;br&gt;
&gt; &gt; &gt; &gt; Ubuntu 16&lt;br&gt;
&gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; The backtrace does not suggest it's libvirt related, but I \
wouldn't be&lt;br&gt; &gt; &gt; &gt; surprised if our Java bindings mangled memory \
somewhere. They are&lt;br&gt; &gt; &gt; &gt; heavily unmaintained.&lt;br&gt;
&gt; &gt;&lt;br&gt;
&gt; &gt; It could just as easily be a memory corruption bug in the ESX libvirt&lt;br&gt;
&gt; &gt; driver, since that runs directly in the applicatin process as it is a&lt;br&gt;
&gt; &gt; stateless client side driver.&lt;br&gt;
&gt; &gt;&lt;br&gt;
&gt; &gt; We would probably need to have an small demo program that can reproduce&lt;br&gt;
&gt; &gt; the problem in an isolated fashion, in order to try to debug it, along&lt;br&gt;
&gt; &gt; with full libvirt debug logs.&lt;br&gt;
&gt; &gt;&lt;br&gt;
&gt; &gt;&lt;br&gt;
&gt; &gt; Regards,&lt;br&gt;
&gt; &gt; Daniel&lt;br&gt;
&gt; &gt; --&lt;br&gt;
&gt; &gt; |: &lt;a href="https://berrange.com" rel="noreferrer" \
target="_blank"&gt;https://berrange.com&lt;/a&gt;         -o-&lt;br&gt; &gt; &gt; &lt;a \
href="https://www.flickr.com/photos/dberrange" rel="noreferrer" \
target="_blank"&gt;https://www.flickr.com/photos/dberrange&lt;/a&gt; :|&lt;br&gt; &gt; &gt; |: &lt;a \
href="https://libvirt.org" rel="noreferrer" target="_blank"&gt;https://libvirt.org&lt;/a&gt;   \
-o-&lt;br&gt; &gt; &gt; &lt;a href="https://fstop138.berrange.com" rel="noreferrer" \
target="_blank"&gt;https://fstop138.berrange.com&lt;/a&gt; :|&lt;br&gt; &gt; &gt; |: &lt;a \
href="https://entangle-photo.org" rel="noreferrer" \
target="_blank"&gt;https://entangle-photo.org&lt;/a&gt;      -o-&lt;br&gt; &gt; &gt; &lt;a \
href="https://www.instagram.com/dberrange" rel="noreferrer" \
target="_blank"&gt;https://www.instagram.com/dberrange&lt;/a&gt; :|&lt;br&gt; &gt; &gt;&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
Regards,&lt;br&gt;
Daniel&lt;br&gt;
-- &lt;br&gt;
&gt; &gt; &lt;a href="https://berrange.com" rel="noreferrer" \
&gt; &gt; target="_blank"&gt;https://berrange.com&lt;/a&gt;         -o-      &lt;a \
&gt; &gt; href="https://www.flickr.com/photos/dberrange" rel="noreferrer" \
&gt; &gt; target="_blank"&gt;https://www.flickr.com/photos/dberrange&lt;/a&gt; :|&lt;br&gt;
&gt; &gt; &lt;a href="https://libvirt.org" rel="noreferrer" \
&gt; &gt; target="_blank"&gt;https://libvirt.org&lt;/a&gt;              -o-                  &lt;a \
&gt; &gt; href="https://fstop138.berrange.com" rel="noreferrer" \
&gt; &gt; target="_blank"&gt;https://fstop138.berrange.com&lt;/a&gt; :|&lt;br&gt;
&gt; &gt; &lt;a href="https://entangle-photo.org" rel="noreferrer" \
&gt; &gt; target="_blank"&gt;https://entangle-photo.org&lt;/a&gt;      -o-      &lt;a \
&gt; &gt; href="https://www.instagram.com/dberrange" rel="noreferrer" \
&gt; &gt; target="_blank"&gt;https://www.instagram.com/dberrange&lt;/a&gt; :|&lt;br&gt;
&lt;/blockquote&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190420084231</emailId><senderName>Sachin Soman</senderName><senderEmail>sachonline.soman@gmail.com</senderEmail><timestampReceived>2019-04-20 08:42:31-0400</timestampReceived><subject>Re: [libvirt-users] [libvirt]  JVM crashes during GC</subject><body>

[Attachment #2 (multipart/alternative)]


Did you get a chance to debug the issue?

Thanks &amp; Regards,
Sachin Soman


On Thu, Apr 18, 2019, 11:10 PM Sachin Soman &lt;sachonline.soman@gmail.com&gt;
wrote:

&gt; I have tried the same tests using the "test" driver, and that works
&gt; perfectly; no errors seen.
&gt;
&gt; Thanks &amp; Regards
&gt; Sachin Soman
&gt;
&gt;
&gt;
&gt;
&gt; On Thu, Apr 18, 2019 at 11:03 PM Daniel P. Berrangé &lt;berrange@redhat.com&gt;
&gt; wrote:
&gt;
&gt;&gt; On Thu, Apr 18, 2019 at 10:46:19PM +0530, Sachin Soman wrote:
&gt;&gt; &gt; I am attaching the execution results. At the top of each file I have
&gt;&gt; &gt; mentioned the environment details.
&gt;&gt; &gt;
&gt;&gt; &gt; Following is the test program I have used:
&gt;&gt; &gt;
&gt;&gt; &gt; ==================================================
&gt;&gt; &gt;
&gt;&gt; &gt; *package* org.libvirt;
&gt;&gt; &gt;
&gt;&gt; &gt;
&gt;&gt; &gt; *import* org.libvirt.jna.Libvirt;
&gt;&gt; &gt;
&gt;&gt; &gt;
&gt;&gt; &gt; *public* *class* LibvirtCrashTest {
&gt;&gt; &gt;
&gt;&gt; &gt; *void* createAndDestroyDefaultAuthConnection() {
&gt;&gt; &gt;
&gt;&gt; &gt; ConnectAuth ca = *new* ConnectAuthDefault();
&gt;&gt; &gt;
&gt;&gt; &gt; *try* {
&gt;&gt; &gt;
&gt;&gt; &gt; System.*out*.println("Starting new connection with default auth");
&gt;&gt; &gt;
&gt;&gt; &gt; Connect connect = *new* Connect("esx://x.x.x.x/?no_verify=1", ca, 0);
&gt;&gt;
&gt;&gt; It could be interesting to try different libvirt drivers.
&gt;&gt;
&gt;&gt; eg "test:///default"
&gt;&gt;
&gt;&gt; this could help identify if its a bug in libvirt common code
&gt;&gt; vs a bug in only the ESX driver code.
&gt;&gt;
&gt;&gt; &gt;
&gt;&gt; &gt; Thread.*sleep*(1000);
&gt;&gt; &gt;
&gt;&gt; &gt; System.*out*.println("Explicit connection closure");
&gt;&gt; &gt;
&gt;&gt; &gt; connect.close();
&gt;&gt; &gt;
&gt;&gt; &gt; Thread.*sleep*(5000);
&gt;&gt; &gt;
&gt;&gt; &gt; } *catch* (Exception e) {
&gt;&gt; &gt;
&gt;&gt; &gt; e.printStackTrace();
&gt;&gt; &gt;
&gt;&gt; &gt; }
&gt;&gt; &gt;
&gt;&gt; &gt; }
&gt;&gt; &gt;
&gt;&gt; &gt;
&gt;&gt; &gt; *public* *static* *void* main(String[] args) *throws* Exception {
&gt;&gt; &gt;
&gt;&gt; &gt; LibvirtCrashTest testInstance = *new* LibvirtCrashTest();
&gt;&gt; &gt;
&gt;&gt; &gt;
&gt;&gt; &gt; *for*(*int* counter = 0; counter &lt; 3; counter++) {
&gt;&gt; &gt;
&gt;&gt; &gt; testInstance.createAndDestroyDefaultAuthConnection();
&gt;&gt; &gt;
&gt;&gt; &gt; System.*out*.println("gc'ing");
&gt;&gt; &gt;
&gt;&gt; &gt; System.*gc*();
&gt;&gt; &gt;
&gt;&gt; &gt; System.*out*.println("gc'd");
&gt;&gt; &gt;
&gt;&gt; &gt; *int* tCounter = 0;
&gt;&gt; &gt;
&gt;&gt; &gt; *while*(tCounter++ &lt; 20) {
&gt;&gt; &gt;
&gt;&gt; &gt; System.*out*.println("waiting.. " + tCounter);
&gt;&gt; &gt;
&gt;&gt; &gt; Thread.*sleep*(1000);
&gt;&gt; &gt;
&gt;&gt; &gt; }
&gt;&gt; &gt;
&gt;&gt; &gt; }
&gt;&gt; &gt;
&gt;&gt; &gt; System.*out*.println("Going down...");
&gt;&gt; &gt;
&gt;&gt; &gt; }
&gt;&gt; &gt;
&gt;&gt; &gt;
&gt;&gt; &gt; }
&gt;&gt; &gt; ==================================================
&gt;&gt; &gt;
&gt;&gt; &gt;
&gt;&gt; &gt; Thanks &amp; Regards
&gt;&gt; &gt; Sachin Soman
&gt;&gt; &gt;
&gt;&gt; &gt;
&gt;&gt; &gt;
&gt;&gt; &gt;
&gt;&gt; &gt; On Thu, Apr 18, 2019 at 9:25 PM Daniel P. Berrangé &lt;berrange@redhat.com
&gt;&gt; &gt;
&gt;&gt; &gt; wrote:
&gt;&gt; &gt;
&gt;&gt; &gt; &gt; On Thu, Apr 18, 2019 at 05:51:06PM +0200, Michal Prívozník wrote:
&gt;&gt; &gt; &gt; &gt; On 4/17/19 10:24 AM, Sachin Soman wrote:
&gt;&gt; &gt; &gt; &gt; &gt; Hi,
&gt;&gt; &gt; &gt; &gt; &gt;
&gt;&gt; &gt; &gt; &gt; &gt; Could you tell me if the following is some known issue?
&gt;&gt; &gt; &gt; &gt; &gt;
&gt;&gt; &gt; &gt; &gt; &gt; While performing the following simple test, I see my JVM crashing
&gt;&gt; &gt; &gt; &gt; &gt; (consistently):
&gt;&gt; &gt; &gt; &gt; &gt; 1. Open a connection to an ESXi driver/host (passing
&gt;&gt; ConnectAuthDefault
&gt;&gt; &gt; &gt; &gt; &gt; instance).
&gt;&gt; &gt; &gt; &gt; &gt; 2. Close the connection.
&gt;&gt; &gt; &gt; &gt; &gt; 3. Invoke GC
&gt;&gt; &gt; &gt; &gt; &gt;
&gt;&gt; &gt; &gt; &gt; &gt; When GC is triggered, at some point, some unallocated native
&gt;&gt; memory is
&gt;&gt; &gt; &gt; &gt; &gt; being tried to release. That's failing.
&gt;&gt; &gt; &gt; &gt; &gt;
&gt;&gt; &gt; &gt; &gt; &gt; The error thrown is:
&gt;&gt; &gt; &gt; &gt; &gt;
&gt;&gt; &gt; &gt; &gt; &gt; java(78745,0x70000241e000) malloc: *** error for object
&gt;&gt; 0x7fd5df561390:
&gt;&gt; &gt; &gt; &gt; &gt; pointer being freed was not allocated
&gt;&gt; &gt; &gt; &gt; &gt;
&gt;&gt; &gt; &gt; &gt; &gt; *** set a breakpoint in malloc_error_break to debug
&gt;&gt; &gt; &gt; &gt; &gt;
&gt;&gt; &gt; &gt; &gt; &gt;
&gt;&gt; &gt; &gt; &gt; &gt; Frames from core dump:
&gt;&gt; &gt; &gt; &gt; &gt;
&gt;&gt; &gt; &gt; &gt; &gt;     frame #0: 0x00007fff5b274b66
&gt;&gt; libsystem_kernel.dylib`__pthread_kill
&gt;&gt; &gt; &gt; + 10
&gt;&gt; &gt; &gt; &gt; &gt;
&gt;&gt; &gt; &gt; &gt; &gt;     frame #1: 0x00007fff5b43f080
&gt;&gt; libsystem_pthread.dylib`pthread_kill
&gt;&gt; &gt; &gt; + 333
&gt;&gt; &gt; &gt; &gt; &gt;
&gt;&gt; &gt; &gt; &gt; &gt;     frame #2: 0x00007fff5b1d01ae libsystem_c.dylib`abort + 127
&gt;&gt; &gt; &gt; &gt; &gt;
&gt;&gt; &gt; &gt; &gt; &gt;     frame #3: 0x00007fff5b2ce8a6 libsystem_malloc.dylib`free + 521
&gt;&gt; &gt; &gt; &gt; &gt;
&gt;&gt; &gt; &gt; &gt; &gt;     frame #4: 0x00000001127f43a7
&gt;&gt; &gt; &gt; &gt; &gt;
&gt;&gt; &gt; &gt; &gt; &gt;     frame #5: 0x00000001127e3ffd
&gt;&gt; &gt; &gt; &gt; &gt;
&gt;&gt; &gt; &gt; &gt; &gt;     frame #6: 0x00000001127e3ffd
&gt;&gt; &gt; &gt; &gt; &gt;
&gt;&gt; &gt; &gt; &gt; &gt;     frame #7: 0x00000001127e3ffd
&gt;&gt; &gt; &gt; &gt; &gt;
&gt;&gt; &gt; &gt; &gt; &gt;     frame #8: 0x00000001127e3ffd
&gt;&gt; &gt; &gt; &gt; &gt;
&gt;&gt; &gt; &gt; &gt; &gt;     frame #9: 0x00000001127e4042
&gt;&gt; &gt; &gt; &gt; &gt;
&gt;&gt; &gt; &gt; &gt; &gt;     frame #10: 0x00000001127e3ffd
&gt;&gt; &gt; &gt; &gt; &gt;
&gt;&gt; &gt; &gt; &gt; &gt;     frame #11: 0x00000001127e3ffd
&gt;&gt; &gt; &gt; &gt; &gt;
&gt;&gt; &gt; &gt; &gt; &gt;     frame #12: 0x00000001127dc4e7
&gt;&gt; &gt; &gt; &gt; &gt;
&gt;&gt; &gt; &gt; &gt; &gt;     frame #13: 0x000000010c0e235e
&gt;&gt; &gt; &gt; &gt; &gt; libjvm.dylib`JavaCalls::call_helper(JavaValue*, methodHandle*,
&gt;&gt; &gt; &gt; &gt; &gt; JavaCallArguments*, Thread*) + 1710
&gt;&gt; &gt; &gt; &gt; &gt;
&gt;&gt; &gt; &gt; &gt; &gt;     frame #14: 0x000000010c0e2b02
&gt;&gt; &gt; &gt; &gt; &gt; libjvm.dylib`JavaCalls::call_virtual(JavaValue*, KlassHandle,
&gt;&gt; Symbol*,
&gt;&gt; &gt; &gt; &gt; &gt; Symbol*, JavaCallArguments*, Thread*) + 356
&gt;&gt; &gt; &gt; &gt; &gt;
&gt;&gt; &gt; &gt; &gt; &gt;     frame #15: 0x000000010c0e2cae
&gt;&gt; &gt; &gt; &gt; &gt; libjvm.dylib`JavaCalls::call_virtual(JavaValue*, Handle,
&gt;&gt; KlassHandle,
&gt;&gt; &gt; &gt; &gt; &gt; Symbol*, Symbol*, Thread*) + 74
&gt;&gt; &gt; &gt; &gt; &gt;
&gt;&gt; &gt; &gt; &gt; &gt;     frame #16: 0x000000010c1208ee
&gt;&gt; &gt; &gt; libjvm.dylib`thread_entry(JavaThread*,
&gt;&gt; &gt; &gt; &gt; &gt; Thread*) + 124
&gt;&gt; &gt; &gt; &gt; &gt;
&gt;&gt; &gt; &gt; &gt; &gt;     frame #17: 0x000000010c33e84d
&gt;&gt; &gt; &gt; &gt; &gt; libjvm.dylib`JavaThread::thread_main_inner() + 155
&gt;&gt; &gt; &gt; &gt; &gt;
&gt;&gt; &gt; &gt; &gt; &gt;     frame #18: 0x000000010c33ff12 libjvm.dylib`JavaThread::run()
&gt;&gt; + 448
&gt;&gt; &gt; &gt; &gt; &gt;
&gt;&gt; &gt; &gt; &gt; &gt;     frame #19: 0x000000010c26058a
&gt;&gt; libjvm.dylib`java_start(Thread*) +
&gt;&gt; &gt; &gt; 246
&gt;&gt; &gt; &gt; &gt; &gt;
&gt;&gt; &gt; &gt; &gt; &gt;     frame #20: 0x00007fff5b43c661
&gt;&gt; &gt; &gt; libsystem_pthread.dylib`_pthread_body +
&gt;&gt; &gt; &gt; &gt; &gt; 340
&gt;&gt; &gt; &gt; &gt; &gt;
&gt;&gt; &gt; &gt; &gt; &gt;     frame #21: 0x00007fff5b43c50d
&gt;&gt; &gt; &gt; libsystem_pthread.dylib`_pthread_start +
&gt;&gt; &gt; &gt; &gt; &gt; 377
&gt;&gt; &gt; &gt; &gt; &gt;
&gt;&gt; &gt; &gt; &gt; &gt;     frame #22: 0x00007fff5b43bbf9
&gt;&gt; libsystem_pthread.dylib`thread_start
&gt;&gt; &gt; &gt; + 13
&gt;&gt; &gt; &gt; &gt; &gt;
&gt;&gt; &gt; &gt; &gt; &gt;
&gt;&gt; &gt; &gt; &gt; &gt; I have installed Libvirt 5.2.0.
&gt;&gt; &gt; &gt; &gt; &gt; Java bindings libvirt-java 0.5.1
&gt;&gt; &gt; &gt; &gt; &gt; JNA 4.0.0
&gt;&gt; &gt; &gt; &gt; &gt; Tested Java environments: Oracle Java 8 and OpenJDK 8 on MAC,
&gt;&gt; OpenJDK
&gt;&gt; &gt; &gt; 11 on
&gt;&gt; &gt; &gt; &gt; &gt; Ubuntu 16
&gt;&gt; &gt; &gt; &gt;
&gt;&gt; &gt; &gt; &gt; The backtrace does not suggest it's libvirt related, but I wouldn't
&gt;&gt; be
&gt;&gt; &gt; &gt; &gt; surprised if our Java bindings mangled memory somewhere. They are
&gt;&gt; &gt; &gt; &gt; heavily unmaintained.
&gt;&gt; &gt; &gt;
&gt;&gt; &gt; &gt; It could just as easily be a memory corruption bug in the ESX libvirt
&gt;&gt; &gt; &gt; driver, since that runs directly in the applicatin process as it is a
&gt;&gt; &gt; &gt; stateless client side driver.
&gt;&gt; &gt; &gt;
&gt;&gt; &gt; &gt; We would probably need to have an small demo program that can
&gt;&gt; reproduce
&gt;&gt; &gt; &gt; the problem in an isolated fashion, in order to try to debug it, along
&gt;&gt; &gt; &gt; with full libvirt debug logs.
&gt;&gt; &gt; &gt;
&gt;&gt; &gt; &gt;
&gt;&gt; &gt; &gt; Regards,
&gt;&gt; &gt; &gt; Daniel
&gt;&gt; &gt; &gt; --
&gt;&gt; &gt; &gt; |: https://berrange.com      -o-
&gt;&gt; &gt; &gt; https://www.flickr.com/photos/dberrange :|
&gt;&gt; &gt; &gt; |: https://libvirt.org         -o-
&gt;&gt; &gt; &gt; https://fstop138.berrange.com :|
&gt;&gt; &gt; &gt; |: https://entangle-photo.org    -o-
&gt;&gt; &gt; &gt; https://www.instagram.com/dberrange :|
&gt;&gt; &gt; &gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; Regards,
&gt;&gt; Daniel
&gt;&gt; --
&gt;&gt; |: https://berrange.com      -o-
&gt;&gt; https://www.flickr.com/photos/dberrange :|
&gt;&gt; |: https://libvirt.org         -o-
&gt;&gt; https://fstop138.berrange.com :|
&gt;&gt; |: https://entangle-photo.org    -o-
&gt;&gt; https://www.instagram.com/dberrange :|
&gt;&gt;
&gt;

[Attachment #5 (text/html)]

&lt;div dir="auto"&gt;Did you get a chance to debug the issue?&lt;br&gt;&lt;br&gt;&lt;div \
data-smartmail="gmail_signature"&gt;Thanks &amp; Regards,&lt;br&gt;Sachin Soman&lt;br&gt;       \
&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;div class="gmail_quote"&gt;&lt;div dir="ltr" class="gmail_attr"&gt;On Thu, \
Apr 18, 2019, 11:10 PM Sachin Soman &lt;&lt;a \
href="mailto:sachonline.soman@gmail.com"&gt;sachonline.soman@gmail.com&lt;/a&gt;&gt; \
wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote class="gmail_quote" style="margin:0 0 0 \
.8ex;border-left:1px #ccc solid;padding-left:1ex"&gt;&lt;div dir="ltr"&gt;I have tried the \
same tests using the "test" driver, and that works perfectly; no errors \
seen.&lt;div&gt;&lt;br clear="all"&gt;&lt;div&gt;&lt;div dir="ltr" \
class="m_-7958808861510125193gmail_signature" data-smartmail="gmail_signature"&gt;&lt;div \
dir="ltr"&gt;&lt;div&gt;&lt;div&gt;Thanks &amp; Regards&lt;br&gt;Sachin Soman&lt;br&gt;&lt;br&gt;&lt;/div&gt; &lt;div&gt;  \
&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;div class="gmail_quote"&gt;&lt;div \
dir="ltr" class="gmail_attr"&gt;On Thu, Apr 18, 2019 at 11:03 PM Daniel P. Berrangé \
&lt;&lt;a href="mailto:berrange@redhat.com" target="_blank" \
rel="noreferrer"&gt;berrange@redhat.com&lt;/a&gt;&gt; wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote \
class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid \
rgb(204,204,204);padding-left:1ex"&gt;On Thu, Apr 18, 2019 at 10:46:19PM +0530, Sachin \
Soman wrote:&lt;br&gt; &gt; I am attaching the execution results. At the top of each file I \
have&lt;br&gt; &gt; mentioned the environment details.&lt;br&gt;
&gt; &lt;br&gt;
&gt; Following is the test program I have used:&lt;br&gt;
&gt; &lt;br&gt;
&gt; ==================================================&lt;br&gt;
&gt; &lt;br&gt;
&gt; *package* org.libvirt;&lt;br&gt;
&gt; &lt;br&gt;
&gt; &lt;br&gt;
&gt; *import* org.libvirt.jna.Libvirt;&lt;br&gt;
&gt; &lt;br&gt;
&gt; &lt;br&gt;
&gt; *public* *class* LibvirtCrashTest {&lt;br&gt;
&gt; &lt;br&gt;
&gt; *void* createAndDestroyDefaultAuthConnection() {&lt;br&gt;
&gt; &lt;br&gt;
&gt; ConnectAuth ca = *new* ConnectAuthDefault();&lt;br&gt;
&gt; &lt;br&gt;
&gt; *try* {&lt;br&gt;
&gt; &lt;br&gt;
&gt; System.*out*.println("Starting new connection with default auth");&lt;br&gt;
&gt; &lt;br&gt;
&gt; Connect connect = *new* Connect("esx://x.x.x.x/?no_verify=1", ca, \
0);&lt;br&gt; &lt;br&gt;
It could be interesting to try different libvirt drivers.&lt;br&gt;
&lt;br&gt;
eg "test:///default"&lt;br&gt;
&lt;br&gt;
this could help identify if its a bug in libvirt common code&lt;br&gt;
vs a bug in only the ESX driver code.&lt;br&gt;
&lt;br&gt;
&gt; &lt;br&gt;
&gt; Thread.*sleep*(1000);&lt;br&gt;
&gt; &lt;br&gt;
&gt; System.*out*.println("Explicit connection closure");&lt;br&gt;
&gt; &lt;br&gt;
&gt; connect.close();&lt;br&gt;
&gt; &lt;br&gt;
&gt; Thread.*sleep*(5000);&lt;br&gt;
&gt; &lt;br&gt;
&gt; } *catch* (Exception e) {&lt;br&gt;
&gt; &lt;br&gt;
&gt; e.printStackTrace();&lt;br&gt;
&gt; &lt;br&gt;
&gt; }&lt;br&gt;
&gt; &lt;br&gt;
&gt; }&lt;br&gt;
&gt; &lt;br&gt;
&gt; &lt;br&gt;
&gt; *public* *static* *void* main(String[] args) *throws* Exception {&lt;br&gt;
&gt; &lt;br&gt;
&gt; LibvirtCrashTest testInstance = *new* LibvirtCrashTest();&lt;br&gt;
&gt; &lt;br&gt;
&gt; &lt;br&gt;
&gt; *for*(*int* counter = 0; counter &lt; 3; counter++) {&lt;br&gt;
&gt; &lt;br&gt;
&gt; testInstance.createAndDestroyDefaultAuthConnection();&lt;br&gt;
&gt; &lt;br&gt;
&gt; System.*out*.println("gc'ing");&lt;br&gt;
&gt; &lt;br&gt;
&gt; System.*gc*();&lt;br&gt;
&gt; &lt;br&gt;
&gt; System.*out*.println("gc'd");&lt;br&gt;
&gt; &lt;br&gt;
&gt; *int* tCounter = 0;&lt;br&gt;
&gt; &lt;br&gt;
&gt; *while*(tCounter++ &lt; 20) {&lt;br&gt;
&gt; &lt;br&gt;
&gt; System.*out*.println("waiting.. " + tCounter);&lt;br&gt;
&gt; &lt;br&gt;
&gt; Thread.*sleep*(1000);&lt;br&gt;
&gt; &lt;br&gt;
&gt; }&lt;br&gt;
&gt; &lt;br&gt;
&gt; }&lt;br&gt;
&gt; &lt;br&gt;
&gt; System.*out*.println("Going down...");&lt;br&gt;
&gt; &lt;br&gt;
&gt; }&lt;br&gt;
&gt; &lt;br&gt;
&gt; &lt;br&gt;
&gt; }&lt;br&gt;
&gt; ==================================================&lt;br&gt;
&gt; &lt;br&gt;
&gt; &lt;br&gt;
&gt; Thanks &amp; Regards&lt;br&gt;
&gt; Sachin Soman&lt;br&gt;
&gt; &lt;br&gt;
&gt; &lt;br&gt;
&gt; &lt;br&gt;
&gt; &lt;br&gt;
&gt; On Thu, Apr 18, 2019 at 9:25 PM Daniel P. Berrangé &lt;&lt;a \
href="mailto:berrange@redhat.com" target="_blank" \
rel="noreferrer"&gt;berrange@redhat.com&lt;/a&gt;&gt;&lt;br&gt; &gt; wrote:&lt;br&gt;
&gt; &lt;br&gt;
&gt; &gt; On Thu, Apr 18, 2019 at 05:51:06PM +0200, Michal Prívozník wrote:&lt;br&gt;
&gt; &gt; &gt; On 4/17/19 10:24 AM, Sachin Soman wrote:&lt;br&gt;
&gt; &gt; &gt; &gt; Hi,&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt; Could you tell me if the following is some known issue?&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt; While performing the following simple test, I see my JVM \
crashing&lt;br&gt; &gt; &gt; &gt; &gt; (consistently):&lt;br&gt;
&gt; &gt; &gt; &gt; 1. Open a connection to an ESXi driver/host (passing \
ConnectAuthDefault&lt;br&gt; &gt; &gt; &gt; &gt; instance).&lt;br&gt;
&gt; &gt; &gt; &gt; 2. Close the connection.&lt;br&gt;
&gt; &gt; &gt; &gt; 3. Invoke GC&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt; When GC is triggered, at some point, some unallocated native \
memory is&lt;br&gt; &gt; &gt; &gt; &gt; being tried to release. That's failing.&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt; The error thrown is:&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt; java(78745,0x70000241e000) malloc: *** error for object \
0x7fd5df561390:&lt;br&gt; &gt; &gt; &gt; &gt; pointer being freed was not allocated&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt; *** set a breakpoint in malloc_error_break to debug&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt; Frames from core dump:&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt;        frame #0: 0x00007fff5b274b66 \
libsystem_kernel.dylib`__pthread_kill&lt;br&gt; &gt; &gt; + 10&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt;        frame #1: 0x00007fff5b43f080 \
libsystem_pthread.dylib`pthread_kill&lt;br&gt; &gt; &gt; + 333&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt;        frame #2: 0x00007fff5b1d01ae libsystem_c.dylib`abort + \
127&lt;br&gt; &gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt;        frame #3: 0x00007fff5b2ce8a6 libsystem_malloc.dylib`free + \
521&lt;br&gt; &gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt;        frame #4: 0x00000001127f43a7&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt;        frame #5: 0x00000001127e3ffd&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt;        frame #6: 0x00000001127e3ffd&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt;        frame #7: 0x00000001127e3ffd&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt;        frame #8: 0x00000001127e3ffd&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt;        frame #9: 0x00000001127e4042&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt;        frame #10: 0x00000001127e3ffd&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt;        frame #11: 0x00000001127e3ffd&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt;        frame #12: 0x00000001127dc4e7&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt;        frame #13: 0x000000010c0e235e&lt;br&gt;
&gt; &gt; &gt; &gt; libjvm.dylib`JavaCalls::call_helper(JavaValue*, \
methodHandle*,&lt;br&gt; &gt; &gt; &gt; &gt; JavaCallArguments*, Thread*) + 1710&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt;        frame #14: 0x000000010c0e2b02&lt;br&gt;
&gt; &gt; &gt; &gt; libjvm.dylib`JavaCalls::call_virtual(JavaValue*, KlassHandle, \
Symbol*,&lt;br&gt; &gt; &gt; &gt; &gt; Symbol*, JavaCallArguments*, Thread*) + 356&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt;        frame #15: 0x000000010c0e2cae&lt;br&gt;
&gt; &gt; &gt; &gt; libjvm.dylib`JavaCalls::call_virtual(JavaValue*, Handle, \
KlassHandle,&lt;br&gt; &gt; &gt; &gt; &gt; Symbol*, Symbol*, Thread*) + 74&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt;        frame #16: 0x000000010c1208ee&lt;br&gt;
&gt; &gt; libjvm.dylib`thread_entry(JavaThread*,&lt;br&gt;
&gt; &gt; &gt; &gt; Thread*) + 124&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt;        frame #17: 0x000000010c33e84d&lt;br&gt;
&gt; &gt; &gt; &gt; libjvm.dylib`JavaThread::thread_main_inner() + 155&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt;        frame #18: 0x000000010c33ff12 \
libjvm.dylib`JavaThread::run() + 448&lt;br&gt; &gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt;        frame #19: 0x000000010c26058a \
libjvm.dylib`java_start(Thread*) +&lt;br&gt; &gt; &gt; 246&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt;        frame #20: 0x00007fff5b43c661&lt;br&gt;
&gt; &gt; libsystem_pthread.dylib`_pthread_body +&lt;br&gt;
&gt; &gt; &gt; &gt; 340&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt;        frame #21: 0x00007fff5b43c50d&lt;br&gt;
&gt; &gt; libsystem_pthread.dylib`_pthread_start +&lt;br&gt;
&gt; &gt; &gt; &gt; 377&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt;        frame #22: 0x00007fff5b43bbf9 \
libsystem_pthread.dylib`thread_start&lt;br&gt; &gt; &gt; + 13&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt; I have installed Libvirt 5.2.0.&lt;br&gt;
&gt; &gt; &gt; &gt; Java bindings libvirt-java 0.5.1&lt;br&gt;
&gt; &gt; &gt; &gt; JNA 4.0.0&lt;br&gt;
&gt; &gt; &gt; &gt; Tested Java environments: Oracle Java 8 and OpenJDK 8 on MAC, \
OpenJDK&lt;br&gt; &gt; &gt; 11 on&lt;br&gt;
&gt; &gt; &gt; &gt; Ubuntu 16&lt;br&gt;
&gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; The backtrace does not suggest it's libvirt related, but I \
wouldn't be&lt;br&gt; &gt; &gt; &gt; surprised if our Java bindings mangled memory \
somewhere. They are&lt;br&gt; &gt; &gt; &gt; heavily unmaintained.&lt;br&gt;
&gt; &gt;&lt;br&gt;
&gt; &gt; It could just as easily be a memory corruption bug in the ESX libvirt&lt;br&gt;
&gt; &gt; driver, since that runs directly in the applicatin process as it is a&lt;br&gt;
&gt; &gt; stateless client side driver.&lt;br&gt;
&gt; &gt;&lt;br&gt;
&gt; &gt; We would probably need to have an small demo program that can reproduce&lt;br&gt;
&gt; &gt; the problem in an isolated fashion, in order to try to debug it, along&lt;br&gt;
&gt; &gt; with full libvirt debug logs.&lt;br&gt;
&gt; &gt;&lt;br&gt;
&gt; &gt;&lt;br&gt;
&gt; &gt; Regards,&lt;br&gt;
&gt; &gt; Daniel&lt;br&gt;
&gt; &gt; --&lt;br&gt;
&gt; &gt; |: &lt;a href="https://berrange.com" rel="noreferrer noreferrer" \
target="_blank"&gt;https://berrange.com&lt;/a&gt;         -o-&lt;br&gt; &gt; &gt; &lt;a \
href="https://www.flickr.com/photos/dberrange" rel="noreferrer noreferrer" \
target="_blank"&gt;https://www.flickr.com/photos/dberrange&lt;/a&gt; :|&lt;br&gt; &gt; &gt; |: &lt;a \
href="https://libvirt.org" rel="noreferrer noreferrer" \
target="_blank"&gt;https://libvirt.org&lt;/a&gt;              -o-&lt;br&gt; &gt; &gt; &lt;a \
href="https://fstop138.berrange.com" rel="noreferrer noreferrer" \
target="_blank"&gt;https://fstop138.berrange.com&lt;/a&gt; :|&lt;br&gt; &gt; &gt; |: &lt;a \
href="https://entangle-photo.org" rel="noreferrer noreferrer" \
target="_blank"&gt;https://entangle-photo.org&lt;/a&gt;      -o-&lt;br&gt; &gt; &gt; &lt;a \
href="https://www.instagram.com/dberrange" rel="noreferrer noreferrer" \
target="_blank"&gt;https://www.instagram.com/dberrange&lt;/a&gt; :|&lt;br&gt; &gt; &gt;&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
Regards,&lt;br&gt;
Daniel&lt;br&gt;
-- &lt;br&gt;
&gt; &gt; &lt;a href="https://berrange.com" rel="noreferrer noreferrer" \
&gt; &gt; target="_blank"&gt;https://berrange.com&lt;/a&gt;         -o-      &lt;a \
&gt; &gt; href="https://www.flickr.com/photos/dberrange" rel="noreferrer noreferrer" \
&gt; &gt; target="_blank"&gt;https://www.flickr.com/photos/dberrange&lt;/a&gt; :|&lt;br&gt;
&gt; &gt; &lt;a href="https://libvirt.org" rel="noreferrer noreferrer" \
&gt; &gt; target="_blank"&gt;https://libvirt.org&lt;/a&gt;              -o-                  &lt;a \
&gt; &gt; href="https://fstop138.berrange.com" rel="noreferrer noreferrer" \
&gt; &gt; target="_blank"&gt;https://fstop138.berrange.com&lt;/a&gt; :|&lt;br&gt;
&gt; &gt; &lt;a href="https://entangle-photo.org" rel="noreferrer noreferrer" \
&gt; &gt; target="_blank"&gt;https://entangle-photo.org&lt;/a&gt;      -o-      &lt;a \
&gt; &gt; href="https://www.instagram.com/dberrange" rel="noreferrer noreferrer" \
&gt; &gt; target="_blank"&gt;https://www.instagram.com/dberrange&lt;/a&gt; :|&lt;br&gt;
&lt;/blockquote&gt;&lt;/div&gt;
&lt;/blockquote&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190423114412</emailId><senderName>Sachin Soman</senderName><senderEmail>sachonline.soman@gmail.com</senderEmail><timestampReceived>2019-04-23 11:44:12-0400</timestampReceived><subject>Re: [libvirt-users] [libvirt]  JVM crashes during GC</subject><body>

[Attachment #2 (multipart/alternative)]


[Update]

Instead of passing an auth callback to Connect, if I store the credentials
in an INI file and pass the file path as authfile URI parameter, I dont see
these errors.

Thanks &amp; Regards
Sachin Soman




On Sat, Apr 20, 2019 at 2:00 PM Sachin Soman &lt;sachonline.soman@gmail.com&gt;
wrote:

&gt; Did you get a chance to debug the issue?
&gt;
&gt; Thanks &amp; Regards,
&gt; Sachin Soman
&gt;
&gt;
&gt; On Thu, Apr 18, 2019, 11:10 PM Sachin Soman &lt;sachonline.soman@gmail.com&gt;
&gt; wrote:
&gt;
&gt;&gt; I have tried the same tests using the "test" driver, and that works
&gt;&gt; perfectly; no errors seen.
&gt;&gt;
&gt;&gt; Thanks &amp; Regards
&gt;&gt; Sachin Soman
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; On Thu, Apr 18, 2019 at 11:03 PM Daniel P. Berrangé &lt;berrange@redhat.com&gt;
&gt;&gt; wrote:
&gt;&gt;
&gt;&gt;&gt; On Thu, Apr 18, 2019 at 10:46:19PM +0530, Sachin Soman wrote:
&gt;&gt;&gt; &gt; I am attaching the execution results. At the top of each file I have
&gt;&gt;&gt; &gt; mentioned the environment details.
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; Following is the test program I have used:
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; ==================================================
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; *package* org.libvirt;
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; *import* org.libvirt.jna.Libvirt;
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; *public* *class* LibvirtCrashTest {
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; *void* createAndDestroyDefaultAuthConnection() {
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; ConnectAuth ca = *new* ConnectAuthDefault();
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; *try* {
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; System.*out*.println("Starting new connection with default auth");
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; Connect connect = *new* Connect("esx://x.x.x.x/?no_verify=1", ca, 0);
&gt;&gt;&gt;
&gt;&gt;&gt; It could be interesting to try different libvirt drivers.
&gt;&gt;&gt;
&gt;&gt;&gt; eg "test:///default"
&gt;&gt;&gt;
&gt;&gt;&gt; this could help identify if its a bug in libvirt common code
&gt;&gt;&gt; vs a bug in only the ESX driver code.
&gt;&gt;&gt;
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; Thread.*sleep*(1000);
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; System.*out*.println("Explicit connection closure");
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; connect.close();
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; Thread.*sleep*(5000);
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; } *catch* (Exception e) {
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; e.printStackTrace();
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; }
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; }
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; *public* *static* *void* main(String[] args) *throws* Exception {
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; LibvirtCrashTest testInstance = *new* LibvirtCrashTest();
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; *for*(*int* counter = 0; counter &lt; 3; counter++) {
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; testInstance.createAndDestroyDefaultAuthConnection();
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; System.*out*.println("gc'ing");
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; System.*gc*();
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; System.*out*.println("gc'd");
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; *int* tCounter = 0;
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; *while*(tCounter++ &lt; 20) {
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; System.*out*.println("waiting.. " + tCounter);
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; Thread.*sleep*(1000);
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; }
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; }
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; System.*out*.println("Going down...");
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; }
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; }
&gt;&gt;&gt; &gt; ==================================================
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; Thanks &amp; Regards
&gt;&gt;&gt; &gt; Sachin Soman
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; On Thu, Apr 18, 2019 at 9:25 PM Daniel P. Berrangé &lt;
&gt;&gt;&gt; berrange@redhat.com&gt;
&gt;&gt;&gt; &gt; wrote:
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; &gt; On Thu, Apr 18, 2019 at 05:51:06PM +0200, Michal Prívozník wrote:
&gt;&gt;&gt; &gt; &gt; &gt; On 4/17/19 10:24 AM, Sachin Soman wrote:
&gt;&gt;&gt; &gt; &gt; &gt; &gt; Hi,
&gt;&gt;&gt; &gt; &gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; &gt; &gt; Could you tell me if the following is some known issue?
&gt;&gt;&gt; &gt; &gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; &gt; &gt; While performing the following simple test, I see my JVM crashing
&gt;&gt;&gt; &gt; &gt; &gt; &gt; (consistently):
&gt;&gt;&gt; &gt; &gt; &gt; &gt; 1. Open a connection to an ESXi driver/host (passing
&gt;&gt;&gt; ConnectAuthDefault
&gt;&gt;&gt; &gt; &gt; &gt; &gt; instance).
&gt;&gt;&gt; &gt; &gt; &gt; &gt; 2. Close the connection.
&gt;&gt;&gt; &gt; &gt; &gt; &gt; 3. Invoke GC
&gt;&gt;&gt; &gt; &gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; &gt; &gt; When GC is triggered, at some point, some unallocated native
&gt;&gt;&gt; memory is
&gt;&gt;&gt; &gt; &gt; &gt; &gt; being tried to release. That's failing.
&gt;&gt;&gt; &gt; &gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; &gt; &gt; The error thrown is:
&gt;&gt;&gt; &gt; &gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; &gt; &gt; java(78745,0x70000241e000) malloc: *** error for object
&gt;&gt;&gt; 0x7fd5df561390:
&gt;&gt;&gt; &gt; &gt; &gt; &gt; pointer being freed was not allocated
&gt;&gt;&gt; &gt; &gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; &gt; &gt; *** set a breakpoint in malloc_error_break to debug
&gt;&gt;&gt; &gt; &gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; &gt; &gt; Frames from core dump:
&gt;&gt;&gt; &gt; &gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; &gt; &gt;     frame #0: 0x00007fff5b274b66
&gt;&gt;&gt; libsystem_kernel.dylib`__pthread_kill
&gt;&gt;&gt; &gt; &gt; + 10
&gt;&gt;&gt; &gt; &gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; &gt; &gt;     frame #1: 0x00007fff5b43f080
&gt;&gt;&gt; libsystem_pthread.dylib`pthread_kill
&gt;&gt;&gt; &gt; &gt; + 333
&gt;&gt;&gt; &gt; &gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; &gt; &gt;     frame #2: 0x00007fff5b1d01ae libsystem_c.dylib`abort + 127
&gt;&gt;&gt; &gt; &gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; &gt; &gt;     frame #3: 0x00007fff5b2ce8a6 libsystem_malloc.dylib`free +
&gt;&gt;&gt; 521
&gt;&gt;&gt; &gt; &gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; &gt; &gt;     frame #4: 0x00000001127f43a7
&gt;&gt;&gt; &gt; &gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; &gt; &gt;     frame #5: 0x00000001127e3ffd
&gt;&gt;&gt; &gt; &gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; &gt; &gt;     frame #6: 0x00000001127e3ffd
&gt;&gt;&gt; &gt; &gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; &gt; &gt;     frame #7: 0x00000001127e3ffd
&gt;&gt;&gt; &gt; &gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; &gt; &gt;     frame #8: 0x00000001127e3ffd
&gt;&gt;&gt; &gt; &gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; &gt; &gt;     frame #9: 0x00000001127e4042
&gt;&gt;&gt; &gt; &gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; &gt; &gt;     frame #10: 0x00000001127e3ffd
&gt;&gt;&gt; &gt; &gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; &gt; &gt;     frame #11: 0x00000001127e3ffd
&gt;&gt;&gt; &gt; &gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; &gt; &gt;     frame #12: 0x00000001127dc4e7
&gt;&gt;&gt; &gt; &gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; &gt; &gt;     frame #13: 0x000000010c0e235e
&gt;&gt;&gt; &gt; &gt; &gt; &gt; libjvm.dylib`JavaCalls::call_helper(JavaValue*, methodHandle*,
&gt;&gt;&gt; &gt; &gt; &gt; &gt; JavaCallArguments*, Thread*) + 1710
&gt;&gt;&gt; &gt; &gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; &gt; &gt;     frame #14: 0x000000010c0e2b02
&gt;&gt;&gt; &gt; &gt; &gt; &gt; libjvm.dylib`JavaCalls::call_virtual(JavaValue*, KlassHandle,
&gt;&gt;&gt; Symbol*,
&gt;&gt;&gt; &gt; &gt; &gt; &gt; Symbol*, JavaCallArguments*, Thread*) + 356
&gt;&gt;&gt; &gt; &gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; &gt; &gt;     frame #15: 0x000000010c0e2cae
&gt;&gt;&gt; &gt; &gt; &gt; &gt; libjvm.dylib`JavaCalls::call_virtual(JavaValue*, Handle,
&gt;&gt;&gt; KlassHandle,
&gt;&gt;&gt; &gt; &gt; &gt; &gt; Symbol*, Symbol*, Thread*) + 74
&gt;&gt;&gt; &gt; &gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; &gt; &gt;     frame #16: 0x000000010c1208ee
&gt;&gt;&gt; &gt; &gt; libjvm.dylib`thread_entry(JavaThread*,
&gt;&gt;&gt; &gt; &gt; &gt; &gt; Thread*) + 124
&gt;&gt;&gt; &gt; &gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; &gt; &gt;     frame #17: 0x000000010c33e84d
&gt;&gt;&gt; &gt; &gt; &gt; &gt; libjvm.dylib`JavaThread::thread_main_inner() + 155
&gt;&gt;&gt; &gt; &gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; &gt; &gt;     frame #18: 0x000000010c33ff12 libjvm.dylib`JavaThread::run()
&gt;&gt;&gt; + 448
&gt;&gt;&gt; &gt; &gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; &gt; &gt;     frame #19: 0x000000010c26058a
&gt;&gt;&gt; libjvm.dylib`java_start(Thread*) +
&gt;&gt;&gt; &gt; &gt; 246
&gt;&gt;&gt; &gt; &gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; &gt; &gt;     frame #20: 0x00007fff5b43c661
&gt;&gt;&gt; &gt; &gt; libsystem_pthread.dylib`_pthread_body +
&gt;&gt;&gt; &gt; &gt; &gt; &gt; 340
&gt;&gt;&gt; &gt; &gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; &gt; &gt;     frame #21: 0x00007fff5b43c50d
&gt;&gt;&gt; &gt; &gt; libsystem_pthread.dylib`_pthread_start +
&gt;&gt;&gt; &gt; &gt; &gt; &gt; 377
&gt;&gt;&gt; &gt; &gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; &gt; &gt;     frame #22: 0x00007fff5b43bbf9
&gt;&gt;&gt; libsystem_pthread.dylib`thread_start
&gt;&gt;&gt; &gt; &gt; + 13
&gt;&gt;&gt; &gt; &gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; &gt; &gt; I have installed Libvirt 5.2.0.
&gt;&gt;&gt; &gt; &gt; &gt; &gt; Java bindings libvirt-java 0.5.1
&gt;&gt;&gt; &gt; &gt; &gt; &gt; JNA 4.0.0
&gt;&gt;&gt; &gt; &gt; &gt; &gt; Tested Java environments: Oracle Java 8 and OpenJDK 8 on MAC,
&gt;&gt;&gt; OpenJDK
&gt;&gt;&gt; &gt; &gt; 11 on
&gt;&gt;&gt; &gt; &gt; &gt; &gt; Ubuntu 16
&gt;&gt;&gt; &gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; &gt; The backtrace does not suggest it's libvirt related, but I
&gt;&gt;&gt; wouldn't be
&gt;&gt;&gt; &gt; &gt; &gt; surprised if our Java bindings mangled memory somewhere. They are
&gt;&gt;&gt; &gt; &gt; &gt; heavily unmaintained.
&gt;&gt;&gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; It could just as easily be a memory corruption bug in the ESX libvirt
&gt;&gt;&gt; &gt; &gt; driver, since that runs directly in the applicatin process as it is a
&gt;&gt;&gt; &gt; &gt; stateless client side driver.
&gt;&gt;&gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; We would probably need to have an small demo program that can
&gt;&gt;&gt; reproduce
&gt;&gt;&gt; &gt; &gt; the problem in an isolated fashion, in order to try to debug it,
&gt;&gt;&gt; along
&gt;&gt;&gt; &gt; &gt; with full libvirt debug logs.
&gt;&gt;&gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; Regards,
&gt;&gt;&gt; &gt; &gt; Daniel
&gt;&gt;&gt; &gt; &gt; --
&gt;&gt;&gt; &gt; &gt; |: https://berrange.com      -o-
&gt;&gt;&gt; &gt; &gt; https://www.flickr.com/photos/dberrange :|
&gt;&gt;&gt; &gt; &gt; |: https://libvirt.org         -o-
&gt;&gt;&gt; &gt; &gt; https://fstop138.berrange.com :|
&gt;&gt;&gt; &gt; &gt; |: https://entangle-photo.org    -o-
&gt;&gt;&gt; &gt; &gt; https://www.instagram.com/dberrange :|
&gt;&gt;&gt; &gt; &gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; Regards,
&gt;&gt;&gt; Daniel
&gt;&gt;&gt; --
&gt;&gt;&gt; |: https://berrange.com      -o-
&gt;&gt;&gt; https://www.flickr.com/photos/dberrange :|
&gt;&gt;&gt; |: https://libvirt.org         -o-
&gt;&gt;&gt; https://fstop138.berrange.com :|
&gt;&gt;&gt; |: https://entangle-photo.org    -o-
&gt;&gt;&gt; https://www.instagram.com/dberrange :|
&gt;&gt;&gt;
&gt;&gt;

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;[Update]&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Instead of passing an auth callback to \
Connect, if I store the credentials in an INI file and pass the file path as authfile \
URI parameter, I dont see these errors.&lt;/div&gt;&lt;div&gt;&lt;br clear="all"&gt;&lt;div&gt;&lt;div dir="ltr" \
class="gmail_signature" data-smartmail="gmail_signature"&gt;&lt;div \
dir="ltr"&gt;&lt;div&gt;&lt;div&gt;Thanks &amp; Regards&lt;br&gt;Sachin Soman&lt;br&gt;&lt;br&gt;&lt;/div&gt; &lt;div&gt;  \
&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;div class="gmail_quote"&gt;&lt;div \
dir="ltr" class="gmail_attr"&gt;On Sat, Apr 20, 2019 at 2:00 PM Sachin Soman &lt;&lt;a \
href="mailto:sachonline.soman@gmail.com"&gt;sachonline.soman@gmail.com&lt;/a&gt;&gt; \
wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote class="gmail_quote" style="margin:0px 0px 0px \
0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"&gt;&lt;div dir="auto"&gt;Did \
you get a chance to debug the issue?&lt;br&gt;&lt;br&gt;&lt;div&gt;Thanks &amp; Regards,&lt;br&gt;Sachin \
Soman&lt;br&gt;       &lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;div class="gmail_quote"&gt;&lt;div dir="ltr" \
class="gmail_attr"&gt;On Thu, Apr 18, 2019, 11:10 PM Sachin Soman &lt;&lt;a \
href="mailto:sachonline.soman@gmail.com" \
target="_blank"&gt;sachonline.soman@gmail.com&lt;/a&gt;&gt; wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote \
class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid \
rgb(204,204,204);padding-left:1ex"&gt;&lt;div dir="ltr"&gt;I have tried the same tests using \
the "test" driver, and that works perfectly; no errors seen.&lt;div&gt;&lt;br \
clear="all"&gt;&lt;div&gt;&lt;div dir="ltr" \
class="gmail-m_1071887069374896183m_-7958808861510125193gmail_signature"&gt;&lt;div \
dir="ltr"&gt;&lt;div&gt;&lt;div&gt;Thanks &amp; Regards&lt;br&gt;Sachin Soman&lt;br&gt;&lt;br&gt;&lt;/div&gt; &lt;div&gt;  \
&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;div class="gmail_quote"&gt;&lt;div \
dir="ltr" class="gmail_attr"&gt;On Thu, Apr 18, 2019 at 11:03 PM Daniel P. Berrangé \
&lt;&lt;a href="mailto:berrange@redhat.com" rel="noreferrer" \
target="_blank"&gt;berrange@redhat.com&lt;/a&gt;&gt; wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote \
class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid \
rgb(204,204,204);padding-left:1ex"&gt;On Thu, Apr 18, 2019 at 10:46:19PM +0530, Sachin \
Soman wrote:&lt;br&gt; &gt; I am attaching the execution results. At the top of each file I \
have&lt;br&gt; &gt; mentioned the environment details.&lt;br&gt;
&gt; &lt;br&gt;
&gt; Following is the test program I have used:&lt;br&gt;
&gt; &lt;br&gt;
&gt; ==================================================&lt;br&gt;
&gt; &lt;br&gt;
&gt; *package* org.libvirt;&lt;br&gt;
&gt; &lt;br&gt;
&gt; &lt;br&gt;
&gt; *import* org.libvirt.jna.Libvirt;&lt;br&gt;
&gt; &lt;br&gt;
&gt; &lt;br&gt;
&gt; *public* *class* LibvirtCrashTest {&lt;br&gt;
&gt; &lt;br&gt;
&gt; *void* createAndDestroyDefaultAuthConnection() {&lt;br&gt;
&gt; &lt;br&gt;
&gt; ConnectAuth ca = *new* ConnectAuthDefault();&lt;br&gt;
&gt; &lt;br&gt;
&gt; *try* {&lt;br&gt;
&gt; &lt;br&gt;
&gt; System.*out*.println("Starting new connection with default auth");&lt;br&gt;
&gt; &lt;br&gt;
&gt; Connect connect = *new* Connect("esx://x.x.x.x/?no_verify=1", ca, \
0);&lt;br&gt; &lt;br&gt;
It could be interesting to try different libvirt drivers.&lt;br&gt;
&lt;br&gt;
eg "test:///default"&lt;br&gt;
&lt;br&gt;
this could help identify if its a bug in libvirt common code&lt;br&gt;
vs a bug in only the ESX driver code.&lt;br&gt;
&lt;br&gt;
&gt; &lt;br&gt;
&gt; Thread.*sleep*(1000);&lt;br&gt;
&gt; &lt;br&gt;
&gt; System.*out*.println("Explicit connection closure");&lt;br&gt;
&gt; &lt;br&gt;
&gt; connect.close();&lt;br&gt;
&gt; &lt;br&gt;
&gt; Thread.*sleep*(5000);&lt;br&gt;
&gt; &lt;br&gt;
&gt; } *catch* (Exception e) {&lt;br&gt;
&gt; &lt;br&gt;
&gt; e.printStackTrace();&lt;br&gt;
&gt; &lt;br&gt;
&gt; }&lt;br&gt;
&gt; &lt;br&gt;
&gt; }&lt;br&gt;
&gt; &lt;br&gt;
&gt; &lt;br&gt;
&gt; *public* *static* *void* main(String[] args) *throws* Exception {&lt;br&gt;
&gt; &lt;br&gt;
&gt; LibvirtCrashTest testInstance = *new* LibvirtCrashTest();&lt;br&gt;
&gt; &lt;br&gt;
&gt; &lt;br&gt;
&gt; *for*(*int* counter = 0; counter &lt; 3; counter++) {&lt;br&gt;
&gt; &lt;br&gt;
&gt; testInstance.createAndDestroyDefaultAuthConnection();&lt;br&gt;
&gt; &lt;br&gt;
&gt; System.*out*.println("gc'ing");&lt;br&gt;
&gt; &lt;br&gt;
&gt; System.*gc*();&lt;br&gt;
&gt; &lt;br&gt;
&gt; System.*out*.println("gc'd");&lt;br&gt;
&gt; &lt;br&gt;
&gt; *int* tCounter = 0;&lt;br&gt;
&gt; &lt;br&gt;
&gt; *while*(tCounter++ &lt; 20) {&lt;br&gt;
&gt; &lt;br&gt;
&gt; System.*out*.println("waiting.. " + tCounter);&lt;br&gt;
&gt; &lt;br&gt;
&gt; Thread.*sleep*(1000);&lt;br&gt;
&gt; &lt;br&gt;
&gt; }&lt;br&gt;
&gt; &lt;br&gt;
&gt; }&lt;br&gt;
&gt; &lt;br&gt;
&gt; System.*out*.println("Going down...");&lt;br&gt;
&gt; &lt;br&gt;
&gt; }&lt;br&gt;
&gt; &lt;br&gt;
&gt; &lt;br&gt;
&gt; }&lt;br&gt;
&gt; ==================================================&lt;br&gt;
&gt; &lt;br&gt;
&gt; &lt;br&gt;
&gt; Thanks &amp; Regards&lt;br&gt;
&gt; Sachin Soman&lt;br&gt;
&gt; &lt;br&gt;
&gt; &lt;br&gt;
&gt; &lt;br&gt;
&gt; &lt;br&gt;
&gt; On Thu, Apr 18, 2019 at 9:25 PM Daniel P. Berrangé &lt;&lt;a \
href="mailto:berrange@redhat.com" rel="noreferrer" \
target="_blank"&gt;berrange@redhat.com&lt;/a&gt;&gt;&lt;br&gt; &gt; wrote:&lt;br&gt;
&gt; &lt;br&gt;
&gt; &gt; On Thu, Apr 18, 2019 at 05:51:06PM +0200, Michal Prívozník wrote:&lt;br&gt;
&gt; &gt; &gt; On 4/17/19 10:24 AM, Sachin Soman wrote:&lt;br&gt;
&gt; &gt; &gt; &gt; Hi,&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt; Could you tell me if the following is some known issue?&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt; While performing the following simple test, I see my JVM \
crashing&lt;br&gt; &gt; &gt; &gt; &gt; (consistently):&lt;br&gt;
&gt; &gt; &gt; &gt; 1. Open a connection to an ESXi driver/host (passing \
ConnectAuthDefault&lt;br&gt; &gt; &gt; &gt; &gt; instance).&lt;br&gt;
&gt; &gt; &gt; &gt; 2. Close the connection.&lt;br&gt;
&gt; &gt; &gt; &gt; 3. Invoke GC&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt; When GC is triggered, at some point, some unallocated native \
memory is&lt;br&gt; &gt; &gt; &gt; &gt; being tried to release. That's failing.&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt; The error thrown is:&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt; java(78745,0x70000241e000) malloc: *** error for object \
0x7fd5df561390:&lt;br&gt; &gt; &gt; &gt; &gt; pointer being freed was not allocated&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt; *** set a breakpoint in malloc_error_break to debug&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt; Frames from core dump:&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt;        frame #0: 0x00007fff5b274b66 \
libsystem_kernel.dylib`__pthread_kill&lt;br&gt; &gt; &gt; + 10&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt;        frame #1: 0x00007fff5b43f080 \
libsystem_pthread.dylib`pthread_kill&lt;br&gt; &gt; &gt; + 333&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt;        frame #2: 0x00007fff5b1d01ae libsystem_c.dylib`abort + \
127&lt;br&gt; &gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt;        frame #3: 0x00007fff5b2ce8a6 libsystem_malloc.dylib`free + \
521&lt;br&gt; &gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt;        frame #4: 0x00000001127f43a7&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt;        frame #5: 0x00000001127e3ffd&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt;        frame #6: 0x00000001127e3ffd&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt;        frame #7: 0x00000001127e3ffd&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt;        frame #8: 0x00000001127e3ffd&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt;        frame #9: 0x00000001127e4042&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt;        frame #10: 0x00000001127e3ffd&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt;        frame #11: 0x00000001127e3ffd&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt;        frame #12: 0x00000001127dc4e7&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt;        frame #13: 0x000000010c0e235e&lt;br&gt;
&gt; &gt; &gt; &gt; libjvm.dylib`JavaCalls::call_helper(JavaValue*, \
methodHandle*,&lt;br&gt; &gt; &gt; &gt; &gt; JavaCallArguments*, Thread*) + 1710&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt;        frame #14: 0x000000010c0e2b02&lt;br&gt;
&gt; &gt; &gt; &gt; libjvm.dylib`JavaCalls::call_virtual(JavaValue*, KlassHandle, \
Symbol*,&lt;br&gt; &gt; &gt; &gt; &gt; Symbol*, JavaCallArguments*, Thread*) + 356&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt;        frame #15: 0x000000010c0e2cae&lt;br&gt;
&gt; &gt; &gt; &gt; libjvm.dylib`JavaCalls::call_virtual(JavaValue*, Handle, \
KlassHandle,&lt;br&gt; &gt; &gt; &gt; &gt; Symbol*, Symbol*, Thread*) + 74&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt;        frame #16: 0x000000010c1208ee&lt;br&gt;
&gt; &gt; libjvm.dylib`thread_entry(JavaThread*,&lt;br&gt;
&gt; &gt; &gt; &gt; Thread*) + 124&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt;        frame #17: 0x000000010c33e84d&lt;br&gt;
&gt; &gt; &gt; &gt; libjvm.dylib`JavaThread::thread_main_inner() + 155&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt;        frame #18: 0x000000010c33ff12 \
libjvm.dylib`JavaThread::run() + 448&lt;br&gt; &gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt;        frame #19: 0x000000010c26058a \
libjvm.dylib`java_start(Thread*) +&lt;br&gt; &gt; &gt; 246&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt;        frame #20: 0x00007fff5b43c661&lt;br&gt;
&gt; &gt; libsystem_pthread.dylib`_pthread_body +&lt;br&gt;
&gt; &gt; &gt; &gt; 340&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt;        frame #21: 0x00007fff5b43c50d&lt;br&gt;
&gt; &gt; libsystem_pthread.dylib`_pthread_start +&lt;br&gt;
&gt; &gt; &gt; &gt; 377&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt;        frame #22: 0x00007fff5b43bbf9 \
libsystem_pthread.dylib`thread_start&lt;br&gt; &gt; &gt; + 13&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt; I have installed Libvirt 5.2.0.&lt;br&gt;
&gt; &gt; &gt; &gt; Java bindings libvirt-java 0.5.1&lt;br&gt;
&gt; &gt; &gt; &gt; JNA 4.0.0&lt;br&gt;
&gt; &gt; &gt; &gt; Tested Java environments: Oracle Java 8 and OpenJDK 8 on MAC, \
OpenJDK&lt;br&gt; &gt; &gt; 11 on&lt;br&gt;
&gt; &gt; &gt; &gt; Ubuntu 16&lt;br&gt;
&gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; The backtrace does not suggest it's libvirt related, but I \
wouldn't be&lt;br&gt; &gt; &gt; &gt; surprised if our Java bindings mangled memory \
somewhere. They are&lt;br&gt; &gt; &gt; &gt; heavily unmaintained.&lt;br&gt;
&gt; &gt;&lt;br&gt;
&gt; &gt; It could just as easily be a memory corruption bug in the ESX libvirt&lt;br&gt;
&gt; &gt; driver, since that runs directly in the applicatin process as it is a&lt;br&gt;
&gt; &gt; stateless client side driver.&lt;br&gt;
&gt; &gt;&lt;br&gt;
&gt; &gt; We would probably need to have an small demo program that can reproduce&lt;br&gt;
&gt; &gt; the problem in an isolated fashion, in order to try to debug it, along&lt;br&gt;
&gt; &gt; with full libvirt debug logs.&lt;br&gt;
&gt; &gt;&lt;br&gt;
&gt; &gt;&lt;br&gt;
&gt; &gt; Regards,&lt;br&gt;
&gt; &gt; Daniel&lt;br&gt;
&gt; &gt; --&lt;br&gt;
&gt; &gt; |: &lt;a href="https://berrange.com" rel="noreferrer noreferrer" \
target="_blank"&gt;https://berrange.com&lt;/a&gt;         -o-&lt;br&gt; &gt; &gt; &lt;a \
href="https://www.flickr.com/photos/dberrange" rel="noreferrer noreferrer" \
target="_blank"&gt;https://www.flickr.com/photos/dberrange&lt;/a&gt; :|&lt;br&gt; &gt; &gt; |: &lt;a \
href="https://libvirt.org" rel="noreferrer noreferrer" \
target="_blank"&gt;https://libvirt.org&lt;/a&gt;              -o-&lt;br&gt; &gt; &gt; &lt;a \
href="https://fstop138.berrange.com" rel="noreferrer noreferrer" \
target="_blank"&gt;https://fstop138.berrange.com&lt;/a&gt; :|&lt;br&gt; &gt; &gt; |: &lt;a \
href="https://entangle-photo.org" rel="noreferrer noreferrer" \
target="_blank"&gt;https://entangle-photo.org&lt;/a&gt;      -o-&lt;br&gt; &gt; &gt; &lt;a \
href="https://www.instagram.com/dberrange" rel="noreferrer noreferrer" \
target="_blank"&gt;https://www.instagram.com/dberrange&lt;/a&gt; :|&lt;br&gt; &gt; &gt;&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
Regards,&lt;br&gt;
Daniel&lt;br&gt;
-- &lt;br&gt;
&gt; &gt; &lt;a href="https://berrange.com" rel="noreferrer noreferrer" \
&gt; &gt; target="_blank"&gt;https://berrange.com&lt;/a&gt;         -o-      &lt;a \
&gt; &gt; href="https://www.flickr.com/photos/dberrange" rel="noreferrer noreferrer" \
&gt; &gt; target="_blank"&gt;https://www.flickr.com/photos/dberrange&lt;/a&gt; :|&lt;br&gt;
&gt; &gt; &lt;a href="https://libvirt.org" rel="noreferrer noreferrer" \
&gt; &gt; target="_blank"&gt;https://libvirt.org&lt;/a&gt;              -o-                  &lt;a \
&gt; &gt; href="https://fstop138.berrange.com" rel="noreferrer noreferrer" \
&gt; &gt; target="_blank"&gt;https://fstop138.berrange.com&lt;/a&gt; :|&lt;br&gt;
&gt; &gt; &lt;a href="https://entangle-photo.org" rel="noreferrer noreferrer" \
&gt; &gt; target="_blank"&gt;https://entangle-photo.org&lt;/a&gt;      -o-      &lt;a \
&gt; &gt; href="https://www.instagram.com/dberrange" rel="noreferrer noreferrer" \
&gt; &gt; target="_blank"&gt;https://www.instagram.com/dberrange&lt;/a&gt; :|&lt;br&gt;
&lt;/blockquote&gt;&lt;/div&gt;
&lt;/blockquote&gt;&lt;/div&gt;
&lt;/blockquote&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190423115022</emailId><senderName>Daniel =?utf-8?B?UC4gQmVycmFuZ8Op?=</senderName><senderEmail>berrange@redhat.com</senderEmail><timestampReceived>2019-04-23 11:50:22-0400</timestampReceived><subject>Re: [libvirt-users] [libvirt]  JVM crashes during GC</subject><body>

On Tue, Apr 23, 2019 at 05:02:12PM +0530, Sachin Soman wrote:
&gt; [Update]
&gt; 
&gt; Instead of passing an auth callback to Connect, if I store the credentials
&gt; in an INI file and pass the file path as authfile URI parameter, I dont see
&gt; these errors.

That makes it sound like some kind of memory handling bug in the JNI
native calls. I looked the libvirt-java code for the auth callback
but I don't entirely understand what JNI requires here. Probably needs
someone who is more expert in JNI to take a look at the libvirt bindings
I'm afraid.

Regards,
Daniel
-- 
|: https://berrange.com      -o-    https://www.flickr.com/photos/dberrange :|
|: https://libvirt.org         -o-            https://fstop138.berrange.com :|
|: https://entangle-photo.org    -o-    https://www.instagram.com/dberrange :|

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190418142951</emailId><senderName>Daniel =?utf-8?B?UC4gQmVycmFuZ8Op?=</senderName><senderEmail>berrange@redhat.com</senderEmail><timestampReceived>2019-04-18 14:29:51-0400</timestampReceived><subject>Re: [libvirt-users] [libvirt] Why virsh domxml-to-native qemu-argv changes PCI slot number</subject><body>

On Thu, Apr 18, 2019 at 04:23:05PM +0200, Andrea Bolognani wrote:
&gt; Moving to libvirt-users where it belongs.
&gt; 
&gt; On Thu, 2019-04-18 at 06:47 +0000, Tal Attaly wrote:
&gt; &gt; Hi,
&gt; &gt; I have bridge type interface defined with slot 3 -
&gt; &gt; &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/&gt;
&gt; &gt; but after running virsh domxml-to-native qemu-argv I get slot 2-
&gt; &gt; -netdev tap,fd=21,id=hostnet0 -device \
&gt; &gt; e1000,netdev=hostnet0,id=net0,mac=f2:ff:ff:ff:ff:07,bus=pci.0,addr=0x2 Any idea \
&gt; &gt; why it's happen and how to keep the slot number?  Libvirt version is 4.5.0
&gt; 
&gt; I can reproduce this, and also confirm that it shouldn't happen :)
&gt; 
&gt; qemuDomainAssignAddresses() is supposed to make sure that any address
&gt; configured explicitly by the user (or previously by libvirt) is
&gt; preserved, and it's doing that correctly when it's called from inside
&gt; qemuDomainDefAssignAddresses(); however, for some reason, by the time
&gt; we call it again in qemuProcessPrepareDomain() the PCI address for
&gt; the network interface is no longer set, and so a fresh one gets
&gt; assigned instead.
&gt; 
&gt; I'll investigate further and get back to you.

It is a bug in qemuConnectDomainXMLToNative. You'll see we replace
the original type=bridge NIC with a type=ethernet, except we fail
to copy the address info &amp; probably other properties too.


Regards,
Daniel
-- 
&gt; &gt; https://berrange.com      -o-    https://www.flickr.com/photos/dberrange :|
&gt; &gt; https://libvirt.org         -o-            https://fstop138.berrange.com :|
&gt; &gt; https://entangle-photo.org    -o-    https://www.instagram.com/dberrange :|

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20190418153959</emailId><senderName>Andrea Bolognani</senderName><senderEmail>abologna@redhat.com</senderEmail><timestampReceived>2019-04-18 15:39:59-0400</timestampReceived><subject>Re: [libvirt-users] [libvirt] Why virsh domxml-to-native qemu-argv changes PCI slot number</subject><body>

On Thu, 2019-04-18 at 15:29 +0100, Daniel P. Berrangé wrote:
&gt; On Thu, Apr 18, 2019 at 04:23:05PM +0200, Andrea Bolognani wrote:
&gt; &gt; qemuDomainAssignAddresses() is supposed to make sure that any address
&gt; &gt; configured explicitly by the user (or previously by libvirt) is
&gt; &gt; preserved, and it's doing that correctly when it's called from inside
&gt; &gt; qemuDomainDefAssignAddresses(); however, for some reason, by the time
&gt; &gt; we call it again in qemuProcessPrepareDomain() the PCI address for
&gt; &gt; the network interface is no longer set, and so a fresh one gets
&gt; &gt; assigned instead.
&gt; &gt; 
&gt; &gt; I'll investigate further and get back to you.
&gt; 
&gt; It is a bug in qemuConnectDomainXMLToNative. You'll see we replace
&gt; the original type=bridge NIC with a type=ethernet, except we fail
&gt; to copy the address info &amp; probably other properties too.

Yeah, I figured that out after digging a bit more :)

I'm not quite sure how to fix it properly, though. Adding yet more
properties to the list of those we record before calling
virDomainNetDefClear() and restore afterwards would be a stop-gap
measure at best; limiting ourselves to merely changing net-&gt;type,
on the other hand, though it seems to work from a quick test, will
likely lead to hitting other corner cases.

Formatting the XML, replacing the type attribute and parsing it
back perhaps? Other, hopefully better, ideas?

-- 
Andrea Bolognani / Red Hat / Virtualization

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190409151030</emailId><senderName>Michal Privoznik</senderName><senderEmail>mprivozn@redhat.com</senderEmail><timestampReceived>2019-04-09 15:10:30-0400</timestampReceived><subject>Re: [libvirt-users] Network hooks for ethernet interfaces</subject><body>

On 4/9/19 4:38 PM, Ruben Kerkhof wrote:
&gt; Hi all,
&gt; 
&gt; I have a hook script, /etc/libvirt/hooks/network, that doesn't seem to
&gt; be called when I attach an interface with type 'ethernet' with this
&gt; xml snippet:
&gt; 
&gt; &lt;interface type='ethernet'&gt;
&gt;      &lt;model type="virtio"/&gt;
&gt;      &lt;source&gt;
&gt;          &lt;ip address="10.100.0.1" prefix="24" peer="10.100.0.10"/&gt;
&gt;      &lt;/source&gt;
&gt; &lt;/interface&gt;
&gt; 
&gt; https://www.libvirt.org/hooks.html#intro says
&gt; "A network is started or stopped or an interface is plugged/unplugged
&gt; to/from the network (since 1.2.2)".
&gt; 
&gt; While I don't have a network defined in xml, I'd expect this to work
&gt; just as well for 'ethernet' type interfaces. Am I wrong?


Hotplugging an 'ethernet' type of interface doesn't really relate to any 
libvirt network. Hence libvirt doesn't call 'network' hook script. If 
you'd continue reading you'll see what is the 'network' hook fed with 
(on stdin): info on domain in question AND network where the event 
ocurred. But there is no network, is it?

But maybe you can work around this by waiting for 
DEVICE_ADDED/DEVICE_REMOVED events? What is it that you're trying to solve?

Michal

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190409153542</emailId><senderName>Ruben Kerkhof</senderName><senderEmail>ruben@rubenkerkhof.com</senderEmail><timestampReceived>2019-04-09 15:35:42-0400</timestampReceived><subject>Re: [libvirt-users] Network hooks for ethernet interfaces</subject><body>

On Tue, Apr 9, 2019 at 5:10 PM Michal Privoznik &lt;mprivozn@redhat.com&gt; wrote:
&gt;
&gt; On 4/9/19 4:38 PM, Ruben Kerkhof wrote:
&gt; &gt; Hi all,
&gt; &gt;
&gt; &gt; I have a hook script, /etc/libvirt/hooks/network, that doesn't seem to
&gt; &gt; be called when I attach an interface with type 'ethernet' with this
&gt; &gt; xml snippet:
&gt; &gt;
&gt; &gt; &lt;interface type='ethernet'&gt;
&gt; &gt;      &lt;model type="virtio"/&gt;
&gt; &gt;      &lt;source&gt;
&gt; &gt;          &lt;ip address="10.100.0.1" prefix="24" peer="10.100.0.10"/&gt;
&gt; &gt;      &lt;/source&gt;
&gt; &gt; &lt;/interface&gt;
&gt; &gt;
&gt; &gt; https://www.libvirt.org/hooks.html#intro says
&gt; &gt; "A network is started or stopped or an interface is plugged/unplugged
&gt; &gt; to/from the network (since 1.2.2)".
&gt; &gt;
&gt; &gt; While I don't have a network defined in xml, I'd expect this to work
&gt; &gt; just as well for 'ethernet' type interfaces. Am I wrong?
&gt;
&gt;
&gt; Hotplugging an 'ethernet' type of interface doesn't really relate to any
&gt; libvirt network. Hence libvirt doesn't call 'network' hook script. If
&gt; you'd continue reading you'll see what is the 'network' hook fed with
&gt; (on stdin): info on domain in question AND network where the event
&gt; ocurred. But there is no network, is it?

No not in the libvirt sense there isn't, you're right.
&gt;
&gt; But maybe you can work around this by waiting for
&gt; DEVICE_ADDED/DEVICE_REMOVED events? What is it that you're trying to solve?

I'd like to enable proxy_arp on the interface among other things.
I can easily do this from the same script that adds the interface
though, so I have a workaround, but a hook that triggers on all
interface events felt cleaner.

&gt;
&gt; Michal

Kind regards,

Ruben

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190410114424</emailId><senderName>Laine Stump</senderName><senderEmail>laine@redhat.com</senderEmail><timestampReceived>2019-04-10 11:44:24-0400</timestampReceived><subject>Re: [libvirt-users] Network hooks for ethernet interfaces</subject><body>

On 4/9/19 11:35 AM, Ruben Kerkhof wrote:
&gt; On Tue, Apr 9, 2019 at 5:10 PM Michal Privoznik &lt;mprivozn@redhat.com&gt; wrote:
&gt;&gt;
&gt;&gt; On 4/9/19 4:38 PM, Ruben Kerkhof wrote:
&gt;&gt;&gt; Hi all,
&gt;&gt;&gt;
&gt;&gt;&gt; I have a hook script, /etc/libvirt/hooks/network, that doesn't seem to
&gt;&gt;&gt; be called when I attach an interface with type 'ethernet' with this
&gt;&gt;&gt; xml snippet:
&gt;&gt;&gt;
&gt;&gt;&gt; &lt;interface type='ethernet'&gt;
&gt;&gt;&gt;       &lt;model type="virtio"/&gt;
&gt;&gt;&gt;       &lt;source&gt;
&gt;&gt;&gt;           &lt;ip address="10.100.0.1" prefix="24" peer="10.100.0.10"/&gt;
&gt;&gt;&gt;       &lt;/source&gt;
&gt;&gt;&gt; &lt;/interface&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; https://www.libvirt.org/hooks.html#intro says
&gt;&gt;&gt; "A network is started or stopped or an interface is plugged/unplugged
&gt;&gt;&gt; to/from the network (since 1.2.2)".
&gt;&gt;&gt;
&gt;&gt;&gt; While I don't have a network defined in xml, I'd expect this to work
&gt;&gt;&gt; just as well for 'ethernet' type interfaces. Am I wrong?
&gt;&gt;
&gt;&gt;
&gt;&gt; Hotplugging an 'ethernet' type of interface doesn't really relate to any
&gt;&gt; libvirt network. Hence libvirt doesn't call 'network' hook script. If
&gt;&gt; you'd continue reading you'll see what is the 'network' hook fed with
&gt;&gt; (on stdin): info on domain in question AND network where the event
&gt;&gt; ocurred. But there is no network, is it?
&gt; 
&gt; No not in the libvirt sense there isn't, you're right.
&gt;&gt;
&gt;&gt; But maybe you can work around this by waiting for
&gt;&gt; DEVICE_ADDED/DEVICE_REMOVED events? What is it that you're trying to solve?
&gt; 
&gt; I'd like to enable proxy_arp on the interface among other things.
&gt; I can easily do this from the same script that adds the interface
&gt; though, so I have a workaround, but a hook that triggers on all
&gt; interface events felt cleaner.

Also keep in mind that the hook scripts aren't an officially supported 
part of the API, and are thus liable to change without warning. As an 
example, danpb has proposed changing the network hook:

  https://www.redhat.com/archives/libvir-list/2019-March/msg01280.html

Once this goes in, any network hook script that uses the plugged and 
unplugged hooks will no longer work; you would instead need to use the 
port-created and port-deleted hooks.

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190410164446</emailId><senderName>Ruben Kerkhof</senderName><senderEmail>ruben@rubenkerkhof.com</senderEmail><timestampReceived>2019-04-10 16:44:46-0400</timestampReceived><subject>Re: [libvirt-users] Network hooks for ethernet interfaces</subject><body>

On Wed, Apr 10, 2019 at 1:44 PM Laine Stump &lt;laine@redhat.com&gt; wrote:
&gt;
&gt; On 4/9/19 11:35 AM, Ruben Kerkhof wrote:
&gt; &gt; On Tue, Apr 9, 2019 at 5:10 PM Michal Privoznik &lt;mprivozn@redhat.com&gt; wrote:
&gt; &gt;&gt;
&gt; &gt;&gt; On 4/9/19 4:38 PM, Ruben Kerkhof wrote:
&gt; &gt;&gt;&gt; Hi all,
&gt; &gt;&gt;&gt;
&gt; &gt;&gt;&gt; I have a hook script, /etc/libvirt/hooks/network, that doesn't seem to
&gt; &gt;&gt;&gt; be called when I attach an interface with type 'ethernet' with this
&gt; &gt;&gt;&gt; xml snippet:
&gt; &gt;&gt;&gt;
&gt; &gt;&gt;&gt; &lt;interface type='ethernet'&gt;
&gt; &gt;&gt;&gt;       &lt;model type="virtio"/&gt;
&gt; &gt;&gt;&gt;       &lt;source&gt;
&gt; &gt;&gt;&gt;           &lt;ip address="10.100.0.1" prefix="24" peer="10.100.0.10"/&gt;
&gt; &gt;&gt;&gt;       &lt;/source&gt;
&gt; &gt;&gt;&gt; &lt;/interface&gt;
&gt; &gt;&gt;&gt;
&gt; &gt;&gt;&gt; https://www.libvirt.org/hooks.html#intro says
&gt; &gt;&gt;&gt; "A network is started or stopped or an interface is plugged/unplugged
&gt; &gt;&gt;&gt; to/from the network (since 1.2.2)".
&gt; &gt;&gt;&gt;
&gt; &gt;&gt;&gt; While I don't have a network defined in xml, I'd expect this to work
&gt; &gt;&gt;&gt; just as well for 'ethernet' type interfaces. Am I wrong?
&gt; &gt;&gt;
&gt; &gt;&gt;
&gt; &gt;&gt; Hotplugging an 'ethernet' type of interface doesn't really relate to any
&gt; &gt;&gt; libvirt network. Hence libvirt doesn't call 'network' hook script. If
&gt; &gt;&gt; you'd continue reading you'll see what is the 'network' hook fed with
&gt; &gt;&gt; (on stdin): info on domain in question AND network where the event
&gt; &gt;&gt; ocurred. But there is no network, is it?
&gt; &gt;
&gt; &gt; No not in the libvirt sense there isn't, you're right.
&gt; &gt;&gt;
&gt; &gt;&gt; But maybe you can work around this by waiting for
&gt; &gt;&gt; DEVICE_ADDED/DEVICE_REMOVED events? What is it that you're trying to solve?
&gt; &gt;
&gt; &gt; I'd like to enable proxy_arp on the interface among other things.
&gt; &gt; I can easily do this from the same script that adds the interface
&gt; &gt; though, so I have a workaround, but a hook that triggers on all
&gt; &gt; interface events felt cleaner.
&gt;
&gt; Also keep in mind that the hook scripts aren't an officially supported
&gt; part of the API, and are thus liable to change without warning. As an
&gt; example, danpb has proposed changing the network hook:
&gt;
&gt;   https://www.redhat.com/archives/libvir-list/2019-March/msg01280.html
&gt;
&gt; Once this goes in, any network hook script that uses the plugged and
&gt; unplugged hooks will no longer work; you would instead need to use the
&gt; port-created and port-deleted hooks.

That's good to know, thank you Laine.

In that case perhaps adding this functionality to libvirt itself would
make more sense?

Some background, I'm implementing
https://vincent.bernat.ch/en/blog/2018-l3-routing-hypervisor, so
announcing /32 host routes to our vms with BGP.
Our existing vms use /24 network addressing, and to keep that working,
I need to set proxy_arp on the interface.

Kind regards,

Ruben

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190411204306</emailId><senderName>Vasiliy Tolstov</senderName><senderEmail>v.tolstov@selfip.ru</senderEmail><timestampReceived>2019-04-11 20:43:06-0400</timestampReceived><subject>Re: [libvirt-users] Network hooks for ethernet interfaces</subject><body>

ср, 10 апр. 2019 г. в 19:46, Ruben Kerkhof &lt;ruben@rubenkerkhof.com&gt;:
&gt;
&gt; On Wed, Apr 10, 2019 at 1:44 PM Laine Stump &lt;laine@redhat.com&gt; wrote:
&gt; &gt;
&gt; &gt; On 4/9/19 11:35 AM, Ruben Kerkhof wrote:
&gt; &gt; &gt; On Tue, Apr 9, 2019 at 5:10 PM Michal Privoznik &lt;mprivozn@redhat.com&gt; wrote:
&gt; &gt; &gt;&gt;
&gt; &gt; &gt;&gt; On 4/9/19 4:38 PM, Ruben Kerkhof wrote:
&gt; &gt; &gt;&gt;&gt; Hi all,
&gt; &gt; &gt;&gt;&gt;
&gt; &gt; &gt;&gt;&gt; I have a hook script, /etc/libvirt/hooks/network, that doesn't seem to
&gt; &gt; &gt;&gt;&gt; be called when I attach an interface with type 'ethernet' with this
&gt; &gt; &gt;&gt;&gt; xml snippet:
&gt; &gt; &gt;&gt;&gt;
&gt; &gt; &gt;&gt;&gt; &lt;interface type='ethernet'&gt;
&gt; &gt; &gt;&gt;&gt;       &lt;model type="virtio"/&gt;
&gt; &gt; &gt;&gt;&gt;       &lt;source&gt;
&gt; &gt; &gt;&gt;&gt;           &lt;ip address="10.100.0.1" prefix="24" peer="10.100.0.10"/&gt;
&gt; &gt; &gt;&gt;&gt;       &lt;/source&gt;
&gt; &gt; &gt;&gt;&gt; &lt;/interface&gt;
&gt; &gt; &gt;&gt;&gt;
&gt; &gt; &gt;&gt;&gt; https://www.libvirt.org/hooks.html#intro says
&gt; &gt; &gt;&gt;&gt; "A network is started or stopped or an interface is plugged/unplugged
&gt; &gt; &gt;&gt;&gt; to/from the network (since 1.2.2)".
&gt; &gt; &gt;&gt;&gt;
&gt; &gt; &gt;&gt;&gt; While I don't have a network defined in xml, I'd expect this to work
&gt; &gt; &gt;&gt;&gt; just as well for 'ethernet' type interfaces. Am I wrong?
&gt; &gt; &gt;&gt;
&gt; &gt; &gt;&gt;
&gt; &gt; &gt;&gt; Hotplugging an 'ethernet' type of interface doesn't really relate to any
&gt; &gt; &gt;&gt; libvirt network. Hence libvirt doesn't call 'network' hook script. If
&gt; &gt; &gt;&gt; you'd continue reading you'll see what is the 'network' hook fed with
&gt; &gt; &gt;&gt; (on stdin): info on domain in question AND network where the event
&gt; &gt; &gt;&gt; ocurred. But there is no network, is it?
&gt; &gt; &gt;
&gt; &gt; &gt; No not in the libvirt sense there isn't, you're right.
&gt; &gt; &gt;&gt;
&gt; &gt; &gt;&gt; But maybe you can work around this by waiting for
&gt; &gt; &gt;&gt; DEVICE_ADDED/DEVICE_REMOVED events? What is it that you're trying to solve?
&gt; &gt; &gt;
&gt; &gt; &gt; I'd like to enable proxy_arp on the interface among other things.
&gt; &gt; &gt; I can easily do this from the same script that adds the interface
&gt; &gt; &gt; though, so I have a workaround, but a hook that triggers on all
&gt; &gt; &gt; interface events felt cleaner.
&gt; &gt;
&gt; &gt; Also keep in mind that the hook scripts aren't an officially supported
&gt; &gt; part of the API, and are thus liable to change without warning. As an
&gt; &gt; example, danpb has proposed changing the network hook:
&gt; &gt;
&gt; &gt;   https://www.redhat.com/archives/libvir-list/2019-March/msg01280.html
&gt; &gt;
&gt; &gt; Once this goes in, any network hook script that uses the plugged and
&gt; &gt; unplugged hooks will no longer work; you would instead need to use the
&gt; &gt; port-created and port-deleted hooks.
&gt;
&gt; That's good to know, thank you Laine.
&gt;
&gt; In that case perhaps adding this functionality to libvirt itself would
&gt; make more sense?
&gt;
&gt; Some background, I'm implementing
&gt; https://vincent.bernat.ch/en/blog/2018-l3-routing-hypervisor, so
&gt; announcing /32 host routes to our vms with BGP.
&gt; Our existing vms use /24 network addressing, and to keep that working,
&gt; I need to set proxy_arp on the interface.
&gt;
I done something like this in some Russian Cloud hosting provider, but
we use OSPF to redistribute routes in DC, and sync their via bgp
between dc.
I don't recommend hooks, write small netlink based program that
listens events about interface up, check it names and set proxy arp
for it.
This is not blocking and easy to modify/test/write. Or set proxy_arp
globally (but this is not recommended)

-- 
Vasiliy Tolstov,
e-mail: v.tolstov@selfip.ru

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190412091014</emailId><senderName>Ruben Kerkhof</senderName><senderEmail>ruben@rubenkerkhof.com</senderEmail><timestampReceived>2019-04-12 09:10:14-0400</timestampReceived><subject>Re: [libvirt-users] Network hooks for ethernet interfaces</subject><body>

On Thu, Apr 11, 2019 at 10:43 PM Vasiliy Tolstov &lt;v.tolstov@selfip.ru&gt; wrote:

Hi Vasiliy,

&gt;
&gt; ср, 10 апр. 2019 г. в 19:46, Ruben Kerkhof &lt;ruben@rubenkerkhof.com&gt;:
&gt; &gt;
&gt; &gt; On Wed, Apr 10, 2019 at 1:44 PM Laine Stump &lt;laine@redhat.com&gt; wrote:
&gt; &gt; &gt;
&gt; &gt; &gt; On 4/9/19 11:35 AM, Ruben Kerkhof wrote:
&gt; &gt; &gt; &gt; On Tue, Apr 9, 2019 at 5:10 PM Michal Privoznik &lt;mprivozn@redhat.com&gt; wrote:
&gt; &gt; &gt; &gt;&gt;
&gt; &gt; &gt; &gt;&gt; On 4/9/19 4:38 PM, Ruben Kerkhof wrote:
&gt; &gt; &gt; &gt;&gt;&gt; Hi all,
&gt; &gt; &gt; &gt;&gt;&gt;
&gt; &gt; &gt; &gt;&gt;&gt; I have a hook script, /etc/libvirt/hooks/network, that doesn't seem to
&gt; &gt; &gt; &gt;&gt;&gt; be called when I attach an interface with type 'ethernet' with this
&gt; &gt; &gt; &gt;&gt;&gt; xml snippet:
&gt; &gt; &gt; &gt;&gt;&gt;
&gt; &gt; &gt; &gt;&gt;&gt; &lt;interface type='ethernet'&gt;
&gt; &gt; &gt; &gt;&gt;&gt;       &lt;model type="virtio"/&gt;
&gt; &gt; &gt; &gt;&gt;&gt;       &lt;source&gt;
&gt; &gt; &gt; &gt;&gt;&gt;           &lt;ip address="10.100.0.1" prefix="24" peer="10.100.0.10"/&gt;
&gt; &gt; &gt; &gt;&gt;&gt;       &lt;/source&gt;
&gt; &gt; &gt; &gt;&gt;&gt; &lt;/interface&gt;
&gt; &gt; &gt; &gt;&gt;&gt;
&gt; &gt; &gt; &gt;&gt;&gt; https://www.libvirt.org/hooks.html#intro says
&gt; &gt; &gt; &gt;&gt;&gt; "A network is started or stopped or an interface is plugged/unplugged
&gt; &gt; &gt; &gt;&gt;&gt; to/from the network (since 1.2.2)".
&gt; &gt; &gt; &gt;&gt;&gt;
&gt; &gt; &gt; &gt;&gt;&gt; While I don't have a network defined in xml, I'd expect this to work
&gt; &gt; &gt; &gt;&gt;&gt; just as well for 'ethernet' type interfaces. Am I wrong?
&gt; &gt; &gt; &gt;&gt;
&gt; &gt; &gt; &gt;&gt;
&gt; &gt; &gt; &gt;&gt; Hotplugging an 'ethernet' type of interface doesn't really relate to any
&gt; &gt; &gt; &gt;&gt; libvirt network. Hence libvirt doesn't call 'network' hook script. If
&gt; &gt; &gt; &gt;&gt; you'd continue reading you'll see what is the 'network' hook fed with
&gt; &gt; &gt; &gt;&gt; (on stdin): info on domain in question AND network where the event
&gt; &gt; &gt; &gt;&gt; ocurred. But there is no network, is it?
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; No not in the libvirt sense there isn't, you're right.
&gt; &gt; &gt; &gt;&gt;
&gt; &gt; &gt; &gt;&gt; But maybe you can work around this by waiting for
&gt; &gt; &gt; &gt;&gt; DEVICE_ADDED/DEVICE_REMOVED events? What is it that you're trying to solve?
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; I'd like to enable proxy_arp on the interface among other things.
&gt; &gt; &gt; &gt; I can easily do this from the same script that adds the interface
&gt; &gt; &gt; &gt; though, so I have a workaround, but a hook that triggers on all
&gt; &gt; &gt; &gt; interface events felt cleaner.
&gt; &gt; &gt;
&gt; &gt; &gt; Also keep in mind that the hook scripts aren't an officially supported
&gt; &gt; &gt; part of the API, and are thus liable to change without warning. As an
&gt; &gt; &gt; example, danpb has proposed changing the network hook:
&gt; &gt; &gt;
&gt; &gt; &gt;   https://www.redhat.com/archives/libvir-list/2019-March/msg01280.html
&gt; &gt; &gt;
&gt; &gt; &gt; Once this goes in, any network hook script that uses the plugged and
&gt; &gt; &gt; unplugged hooks will no longer work; you would instead need to use the
&gt; &gt; &gt; port-created and port-deleted hooks.
&gt; &gt;
&gt; &gt; That's good to know, thank you Laine.
&gt; &gt;
&gt; &gt; In that case perhaps adding this functionality to libvirt itself would
&gt; &gt; make more sense?
&gt; &gt;
&gt; &gt; Some background, I'm implementing
&gt; &gt; https://vincent.bernat.ch/en/blog/2018-l3-routing-hypervisor, so
&gt; &gt; announcing /32 host routes to our vms with BGP.
&gt; &gt; Our existing vms use /24 network addressing, and to keep that working,
&gt; &gt; I need to set proxy_arp on the interface.
&gt; &gt;
&gt; I done something like this in some Russian Cloud hosting provider, but
&gt; we use OSPF to redistribute routes in DC, and sync their via bgp
&gt; between dc.

Thanks, it's good to know that more people do this and I'm on the right path :)

&gt; I don't recommend hooks, write small netlink based program that
&gt; listens events about interface up, check it names and set proxy arp
&gt; for it.
&gt; This is not blocking and easy to modify/test/write. Or set proxy_arp
&gt; globally (but this is not recommended)

That's a good tip, thanks.
I do want to set proxy_arp before the interface is admin up and
passing traffic, is that possible with netlink?

Writing an udev rule might work as well now that I think of it.

But seeing that multiple people have implemented this in their own
way, wouldn't it make more sense to add support for this to libvirt?
Something like &lt;interface type='ethernet' proxy_arp='on' /&gt;
&gt;
&gt; --
&gt; Vasiliy Tolstov,
&gt; e-mail: v.tolstov@selfip.ru

Kind regards,

Ruben

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190404213541</emailId><senderName>Laine Stump</senderName><senderEmail>laine@redhat.com</senderEmail><timestampReceived>2019-04-04 21:35:41-0400</timestampReceived><subject>Re: [libvirt-users] Guest interface names not same as configured name</subject><body>

On 4/4/19 2:02 PM, PR PR wrote:
&gt; Hi,
&gt; 
&gt; I am creating a guest with following description for interfaces in the 
&gt; xml using virsh create xml command. For some reason, the guest interface 
&gt; names in the VM dont match the names specified in the xml. Is there a 
&gt; way to make guest interface names predictable?

For qemu (which you've indicating you're using) there isn't any way to 
set the name of the network device in the guest from the libvirt config. 
There is no visibility of the &lt;guest dev='xxx'&gt; element into the guest 
OS; all that the guest can know is that there is an e1000 ethernet 
device plugged into PCI bus 0 slot 3, and it has MAC address 
52:54:00:17:0b:e7. Any determination of name must be done within the 
guest OS.

The &lt;guest dev='blah'&gt; element is only used by the LXC and openvz 
drivers. It really should be flagged as an error during validation for 
other drivers (patches welcome :-).


&gt; 
&gt; Following is the qemu version on host
&gt; 
&gt; dpkg --list | grep -i qemu
&gt; ii  qemu-kvm                              1:2.11+dfsg-1ubuntu7.10        
&gt;          amd64        QEMU Full virtualization on x86 hardware
&gt; 
&gt;      &lt;interface type='user'&gt;
&gt;        &lt;mac address='52:54:00:17:0b:e7'/&gt;
&gt;        &lt;guest dev='eth0'/&gt;
&gt;        &lt;model type='e1000'/&gt;
&gt;        &lt;alias name='net0'/&gt;
&gt;        &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x03' 
&gt; function='0x0'/&gt;
&gt;      &lt;/interface&gt;
&gt;      &lt;interface type='ethernet'&gt;
&gt;        &lt;mac address='52:54:00:ee:70:34'/&gt;
&gt;        &lt;target dev='net0'/&gt;
&gt;        &lt;guest dev='Ethernet0'/&gt;
&gt;        &lt;model type='rtl8139'/&gt;
&gt;        &lt;alias name='net1'/&gt;
&gt;        &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x05' 
&gt; function='0x0'/&gt;
&gt;      &lt;/interface&gt;
&gt; 
&gt; Thanks
&gt; 
&gt; _______________________________________________
&gt; libvirt-users mailing list
&gt; libvirt-users@redhat.com
&gt; https://www.redhat.com/mailman/listinfo/libvirt-users
&gt; 

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190406061758</emailId><senderName>Michal Prívozník</senderName><senderEmail>mprivozn@redhat.com</senderEmail><timestampReceived>2019-04-06 06:17:58-0400</timestampReceived><subject>Re: [libvirt-users] Cannot create PID file</subject><body>

On 4/4/19 6:22 PM, Nicol=E1s Iglesias wrote:
&gt; Hi Fellow users
&gt; =

&gt; I've just compiled latest libvirt and qemu, both from their respective of=
ficial repositories.
&gt; Libvirtd starts perfect, but when I try to start a domain using the virsh=
 console, I get the following:
&gt; =

&gt; virsh # start --domain win8.1
&gt; error: Failed to start domain win8.1
&gt; error: internal error: Failed to start QEMU binary /usr/bin/qemu-system-x=
86_64 for probing: qemu-system-x86_64: cannot create PID file: Cannot open =
pid file: Permission denied
&gt; =

&gt; I'm not sure where to look at. Any hint would be much appreciated.

Hi,

when probing for capabilities libvirt starts qemu with:

  -pidfile $libDir/qmp-XXXXX/qmp.pid

where $libDir points to /var/lib/libvirt/qemu for system wide daemon and
$XDG_CACHE_HOME/.cache/qemu/lib/ for session daemon. qemu process is run
under user:group configured from corresponding qemu.conf
(/etc/libvirt/qemu.conf for system daemon). The defaults are distro
specific.

Hope this gives you some hint. Although, libvirt should relabel its
internal paths on daemon startup, so this smells like a bug.

Michal

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190403152724</emailId><senderName>Eric Blake</senderName><senderEmail>eblake@redhat.com</senderEmail><timestampReceived>2019-04-03 15:27:24-0400</timestampReceived><subject>Re: [libvirt-users] is it possible to create a snapshot from a guest residing in a plain partition ?</subject><body>

[Attachment #2 (multipart/signed)]

[Attachment #4 (multipart/mixed)]


On 4/3/19 9:44 AM, Lentes, Bernd wrote:
&gt; Hi,
&gt; 
&gt; i can store the disk of a guest in a plain partition which isn't formatted.
&gt; That's no problem, i did it already several times, although the promised speed increase didn't appear.
&gt; 
&gt; But is it possible to create from such a guest a snapshot in a .sn file using virsh ?

It is possible to create an external snapshot (an internal one is not
possible, unless you stored the guest disk as qcow2 format embedded
inside the partition rather than directly as raw format).  Note that
when you create an external snapshot, the partition becomes a read-only
point in time (no further updates to that partition), and your new
file.sn qcow2 wrapper file created by the snapshot operation stores all
subsequent guest writes. (Well, unless you decide to do a commit
operation to push the changes from the overlay back into the base file
and get rid of the overlay)


-- 
Eric Blake, Principal Software Engineer
Red Hat, Inc.           +1-919-301-3226
Virtualization:  qemu.org | libvirt.org


["signature.asc" (application/pgp-signature)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190404165736</emailId><senderName>"Lentes, Bernd"</senderName><senderEmail>bernd.lentes@helmholtz-muenchen.de</senderEmail><timestampReceived>2019-04-04 16:57:36-0400</timestampReceived><subject>Re: [libvirt-users] is it possible to create a snapshot from a guest residing in a plain partition ?</subject><body>



----- On Apr 3, 2019, at 5:27 PM, Eric Blake eblake@redhat.com wrote:



&gt; It is possible to create an external snapshot (an internal one is not
&gt; possible, unless you stored the guest disk as qcow2 format embedded
&gt; inside the partition rather than directly as raw format).  Note that
&gt; when you create an external snapshot, the partition becomes a read-only
&gt; point in time (no further updates to that partition), and your new
&gt; file.sn qcow2 wrapper file created by the snapshot operation stores all
&gt; subsequent guest writes. (Well, unless you decide to do a commit
&gt; operation to push the changes from the overlay back into the base file
&gt; and get rid of the overlay)

Hi Eric,

thanks for your answer.
i tried it:

virsh # snapshot-create-as --disk-only --name sn --domain sim
error: unsupported configuration: source for disk 'vdb' is not a regular file; \
refusing to generate external snapshot name

This is the snippet from the conf for the guest:

&lt;disk type='block' device='disk'&gt;
      &lt;driver name='qemu' type='raw' cache='none' io='native'/&gt;
      &lt;source dev='/dev/vg_san/lv_sim'/&gt;
      &lt;backingStore/&gt;
      &lt;target dev='vdb' bus='virtio'/&gt;
      &lt;alias name='virtio-disk1'/&gt;
      &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x06' function='0x0'/&gt;
    &lt;/disk&gt;

I'm running SLES 12 SP4 with libvirt 4.0.0-6.13.x86_64.

Any ideas ?


Bernd
 

Helmholtz Zentrum Muenchen
Deutsches Forschungszentrum fuer Gesundheit und Umwelt (GmbH)
Ingolstaedter Landstr. 1
85764 Neuherberg
www.helmholtz-muenchen.de
Aufsichtsratsvorsitzende: MinDirig'in Petra Steiner-Hoffmann
Stellv.Aufsichtsratsvorsitzender: MinDirig. Dr. Manfred Wolter
Geschaeftsfuehrung: Prof. Dr. med. Dr. h.c. Matthias Tschoep, Heinrich Bassler, \
                Kerstin Guenther
Registergericht: Amtsgericht Muenchen HRB 6466
USt-IdNr: DE 129521671

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20190401124449</emailId><senderName>Michal Privoznik</senderName><senderEmail>mprivozn@redhat.com</senderEmail><timestampReceived>2019-04-01 12:44:49-0400</timestampReceived><subject>Re: [libvirt-users] Error creating virtual network: failed to run '/usr/sbin/dnsmasq --version': : S</subject><body>

On 4/1/19 2:16 PM, Harsh Gondaliya wrote:
&gt; I deleted my port virbr0 using brctl command and now when I want to create
&gt; a virtual network, it gives me this error:
&gt; 
&gt; Error creating virtual network: failed to run '/usr/sbin/dnsmasq
&gt; --version': : Success
&gt; Here is my systemlog: https://pastebin.com/xjuVnsyL
&gt; 
&gt; How to rectify this?

Oh, we are overwritting the actual error with something useless. The 
real error is:

Apr  1 17:41:05 dpdk-OptiPlex-5040 libvirtd.service: 1506: error : 
virCommandWait:2553 : internal error: Child process (LC_ALL=C 
PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin 
/usr/sbin/dnsmasq --version) unexpected exit status 126: libvirt:  error 
: cannot execute binary /usr/sbin/dnsmasq: Permission denied

I suggest reviewing and possibly fixing permissions on dnsmasq binary 
(assuming libvirtd is ran as root). Or maybe there's some more info in 
audit.log if this is caused by SELinux.

Michal

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190403133035</emailId><senderName>Francesc Guasch</senderName><senderEmail>frankie@telecos.upc.edu</senderEmail><timestampReceived>2019-04-03 13:30:35-0400</timestampReceived><subject>Re: [libvirt-users] Clock skew on Win10</subject><body>

El 1/4/19 a les 18:43, Alex ha escrit:
&gt; Hi, I haven't received any replies to this, but I'm still having a
&gt; problem with clock skew on Win10.
&gt; 
&gt; How can I troubleshoot this? I'm pretty sure the clock settings are
&gt; correct from within Windows, but when the VM resumes from the host
&gt; sleeping, the clock is off by some seemingly random number of hours.
&gt; 
Hi Alex, I think your problem is very common and has no
easy solution. It is normal that the virtual machines have
not advanced the clock after hibernation. You have to run
a process that updates it or you can call it from a script.

We work with Perl and we ended up using the set_time function
to force it. It requires the vdagent installed in the virtual
machine . We call it after resume:


    $domain-&gt;set_time(time(), 0, 0);

You also need the guest agent channel in the XML definition
of the virtual machine

     &lt;channel type='unix'&gt; 

       &lt;target type='virtio' name='org.qemu.guest_agent.0'/&gt;
       &lt;address type='virtio-serial' controller='0' bus='0' port='2'/&gt;
     &lt;/channel&gt;

http://wiki.stoney-cloud.org/wiki/Qemu_Guest_Agent_Integration

Hope this helps.

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190403162841</emailId><senderName>VHPC 19</senderName><senderEmail>vhpc.dist@gmail.com</senderEmail><timestampReceived>2019-04-03 16:28:41-0400</timestampReceived><subject>[libvirt-users] CfP VHPC19: HPC Virtualization-Containers: Paper due May 1, 2019 (extended)</subject><body>

====================================================================
CALL FOR PAPERS


14th Workshop on Virtualization in High ­-Performance Cloud Computing
(VHPC '19) held in conjunction with the International Supercomputing
Conference - High Performance, June 16-20, 2019, Frankfurt, Germany.
(Springer LNCS Proceedings)

====================================================================

Date: June 20, 2019
Workshop URL: http://vhpc.org

Paper Submission Deadline: May 1, 2019 (extended)
Springer LNCS, rolling abstract submission

Abstract/Paper Submission Link: https://edas.info/newPaper.php?c=25685


Call for Papers

Containers and virtualization technologies constitute key enabling
factors for flexible resource management in modern data centers, and
particularly in cloud environments.  Cloud providers need to manage
complex infrastructures in a seamless fashion to support the highly
dynamic and heterogeneous workloads and hosted applications customers
deploy. Similarly, HPC  environments have been increasingly adopting
techniques that enable flexible management of vast computing and
networking resources, close to marginal provisioning cost, which is
unprecedented in the history of scientific and commercial computing.

Various virtualization-containerization technologies contribute to the
overall picture in different ways: machine virtualization, with its
capability to enable consolidation of multiple under ­utilized servers
with heterogeneous software and operating systems (OSes), and its
capability to live ­-migrate a fully operating virtual machine (VM)
with a very short downtime, enables novel and dynamic ways to manage
physical servers; OS- ­level virtualization (i.e., containerization),
with its capability to isolate multiple user ­-space environments and
to allow for their co ­existence within the same OS kernel, promises to
provide many of the advantages of machine virtualization with high
levels of responsiveness and performance; lastly, unikernels provide
for many virtualization benefits with a minimized OS/library surface.
I/O Virtualization in turn allows physical network interfaces to take
traffic from multiple VMs or containers; network virtualization, with
its capability to create logical network overlays that are independent
of the underlying physical topology is furthermore enabling
virtualization of HPC infrastructures.

Publication

Accepted papers will be published in a Springer LNCS proceedings volume.


Topics of Interest

The VHPC program committee solicits original, high-quality submissions
related to virtualization across the entire software stack with a
special focus on the intersection of HPC, containers-virtualization
and the cloud.

Major Topics:
- HPC on Containers and VMs
- Containerized applications with OS-level virtualization
- Lightweight applications with Unikernels
- HP-as-a-Service

each major topic encompassing design/architecture, management,
performance management, modeling and configuration/tooling:

Design / Architecture:
- Containers and OS-level virtualization (LXC, Docker, rkt,
  Singularity, Shifter, i.a.)
- Hypervisor support for heterogeneous resources (GPUs, co-processors,
  FPGAs, etc.)
- Hypervisor extensions to mitigate side-channel attacks
  ([micro-]architectural timing attacks, privilege escalation)
- VM &amp; Container trust and security models
- Multi-environment coupling, system software supporting in-situ
  analysis with HPC simulation
- Cloud reliability, fault-tolerance and high-availability
- Energy-efficient and power-aware virtualization
- Containers inside VMs with hypervisor isolation
- Virtualization support for emerging memory technologies
- Lightweight/specialized operating systems in conjunction with
  virtual machines
- Hypervisor support for heterogeneous resources (GPUs, co-processors,
  FPGAs, etc.)
- Novel unikernels and use cases for virtualized HPC environments
- ARM-based hypervisors, ARM virtualization extensions

Management:
- Container and VM management for HPC and cloud environments
- HPC services integration, services to support HPC
- Service and on-demand scheduling &amp; resource management
- Dedicated workload management with VMs or containers
- Workflow coupling with VMs and containers
- Unikernel, lightweight VM application management
- Environments and tools for operating containerized environments
  (batch, orchestration)
- Novel models for non-HPC workload provisioning on HPC resources

Performance Measurements and Modeling:
- Performance improvements for or driven by unikernels
- Optimizations of virtual machine monitor platforms and hypervisors
- Scalability analysis of VMs and/or containers at large scale
- Performance measurement, modeling and monitoring of
  virtualized/cloud workloads
- Virtualization in supercomputing environments, HPC clusters, HPC in
  the cloud

Configuration / Tooling:
- Tool support for unikernels: configuration/build environments,
  debuggers, profilers
- Job scheduling/control/policy and container placement in virtualized
  environments
- Operating MPI in containers/VMs and Unikernels
- Software defined networks and network virtualization
- GPU virtualization operationalization


The Workshop on Virtualization in High ­-Performance Cloud Computing
(VHPC) aims to bring together researchers and industrial practitioners
facing the challenges posed by virtualization in order to foster
discussion, collaboration, mutual exchange of knowledge and
experience, enabling research to ultimately provide novel solutions
for virtualized computing systems of tomorrow.

The workshop will be one day in length, composed of 20 min paper
presentations, each followed by 10 min discussion sections, plus
lightning talks that are limited to 5 minutes. Presentations may be
accompanied by interactive demonstrations.


Important Dates

May 1, 2019 - Abstract/Paper extended submission deadline
(Springer LNCS)
May 20, 2019 - Acceptance notification
June 20th, 2019 - Workshop Day
July 10th, 2019 - Camera-ready version due


Chair

Michael Alexander (chair), University of Vienna, Austria
Anastassios Nanos (co- ­chair), SunLight.io, UK
Andrew Younge (co-chair), Sandia National Laboratories

Program committee

Stergios Anastasiadis, University of Ioannina, Greece
Jakob Blomer, CERN, Europe
Eduardo CÃ©sar, Universidad Autonoma de Barcelona, Spain
Taylor Childers, Argonne National Laboratory, USA
Stephen Crago, USC ISI, USA
Tommaso Cucinotta, St. Anna School of Advanced Studies, Italy
Christoffer Dall, Columbia University, USA
FranÃ§ois DiakhatÃ©, CEA, France
Patrick Dreher, MIT, USA
Kyle Hale, Northwestern University, USA
Bob Killen, University of Michigan, USA
Brian Kocoloski, Washington University, USA
John Lange, University of Pittsburgh, USA
Giuseppe Lettieri, University of Pisa, Italy
Qing Liu, Oak Ridge National Laboratory, USA
Nikos Parlavantzas, IRISA, France
Kevin Pedretti, Sandia National Laboratories, USA
Amer Qouneh, Western New England University, USA
Carlos ReaÃ±o, Queen's University Belfast, UK
Borja Sotomayor, University of Chicago, USA
Jonathan Sparks, Cray, USA
Joe Stubbs, Texas Advanced Computing Center, USA
Anata Tiwari, San Diego Supercomputer Center, USA
Kurt Tutschku, Blekinge Institute of Technology, Sweden
John Walters, USC ISI, USA
Yasuhiro Watashiba, Osaka University, Japan
Chao-Tung Yang, Tunghai University, Taiwan
Na Zhang, VMware, USA


Paper Submission-Publication

Papers submitted to the workshop will be reviewed by at least two members of
the program committee and external reviewers. Submissions should include
abstract, keywords, the e-mail address of the corresponding author, and must
not exceed 10 pages, including tables and figures at a main font size no
smaller than 11 point. Submission of a paper should be regarded as a commitment
that, should the paper be accepted, at least one of the authors will register
and attend the conference to present the work. Accepted papers will be
published in a Springer LNCS volume.

The format must be according to the Springer LNCS Style. Initial submissions
are in PDF; authors of accepted papers will be requested to provide source
files.

Format Guidelines:
ftp://ftp.springernature.com/cs-proceeding/llncs/llncs2e.zip

Abstract, Paper Submission Link:
https://edas.info/newPaper.php?c=25685


Lightning Talks

Lightning Talks are non-paper track, synoptical in nature and are strictly
limited to 5 minutes. They can be used to gain early feedback on ongoing
research, for demonstrations, to present research results, early research
ideas, perspectives and positions of interest to the community. Submit abstract
via the main submission link.


General Information

The workshop is one day in length and will be held in conjunction with the
International Supercomputing Conference - High Performance (ISC) 2019, June
16-20, Frankfurt, Germany.

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190404095817</emailId><senderName>Daniel =?utf-8?B?UC4gQmVycmFuZ8Op?=</senderName><senderEmail>berrange@redhat.com</senderEmail><timestampReceived>2019-04-04 09:58:17-0400</timestampReceived><subject>Re: [libvirt-users] SEV machines and memory pinning</subject><body>

On Wed, Apr 03, 2019 at 07:59:13PM +0200, Boris Bobrov wrote:
&gt; Hello,
&gt; 
&gt; I am working on implementing SEV support in OpenStack. There are some
&gt; questions that came up in the discussion of the spec [0]
&gt; 
&gt; [0] https://review.openstack.org/#/c/641994/
&gt; 
&gt; As far as i understand, the memory for SEV machines need to be pinned so
&gt; that it doesn't migrate to swap and page migration. ROMS, UEFI pflash and
&gt; video RAM should be pinned too.
&gt; 
&gt; Initially we planned to use hard_limit of &lt;memtune&gt; element to pin the
&gt; memory. However, from the discussion in the spec it seems that there is no
&gt; way to determine a good enough value and that hard_limit should not be used
&gt; at all.
&gt; 
&gt; What should be used then?
&gt; 
&gt; There is a suggestion to use something like this:
&gt; 
&gt;   &lt;memoryBacking&gt;
&gt;     &lt;hugepages&gt;
&gt;       &lt;page size="2" unit="M" nodeset="1"/&gt;
&gt;     &lt;/hugepages&gt;
&gt;     &lt;nosharepages/&gt;
&gt;     &lt;locked/&gt;
&gt;     &lt;source type="file"/&gt;
&gt;     &lt;access mode="shared"/&gt;
&gt;     &lt;allocation mode="immediate"/&gt;
&gt;   &lt;/memoryBacking&gt;
&gt; 
&gt; Will it work? Are there any caveats we should remember about with this
&gt; config? If we can use it, is there anything that would be redundant or not
&gt; necessary for our case?

AFAIK from the SEV pov only the &lt;locked/&gt; element is required.

This extra things where just suggested on the openstack review
becasue it was suggested to make it dependant on use of huge
pages in Nova.

Regards,
Daniel
-- 
|: https://berrange.com      -o-    https://www.flickr.com/photos/dberrange :|
|: https://libvirt.org         -o-            https://fstop138.berrange.com :|
|: https://entangle-photo.org    -o-    https://www.instagram.com/dberrange :|

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190404174256</emailId><senderName>Eric Blake</senderName><senderEmail>eblake@redhat.com</senderEmail><timestampReceived>2019-04-04 17:42:56-0400</timestampReceived><subject>Re: [libvirt-users] is it possible to create a snapshot from a guest residing in a plain partition ?</subject><body>

[Attachment #2 (multipart/signed)]

[Attachment #4 (multipart/mixed)]


On 4/4/19 11:57 AM, Lentes, Bernd wrote:

&gt; 
&gt; virsh # snapshot-create-as --disk-only --name sn --domain sim
&gt; error: unsupported configuration: source for disk 'vdb' is not a regular file; \
&gt; refusing to generate external snapshot name

That just means that libvirt refuses to create a new block device name
(new file names are easy, new block devices not so much); so you'll have
to tell libvirt what filename (which may or may not be a block device)
to use instead, with the --diskspec parameter.  Something like:

snapshot-create-as --disk-only --name sn --domain sim --diskspec
vdb,file=/path/to/file.sn

-- 
Eric Blake, Principal Software Engineer
Red Hat, Inc.           +1-919-301-3226
Virtualization:  qemu.org | libvirt.org


["signature.asc" (application/pgp-signature)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190406062308</emailId><senderName>Michal Prívozník</senderName><senderEmail>mprivozn@redhat.com</senderEmail><timestampReceived>2019-04-06 06:23:08-0400</timestampReceived><subject>Re: [libvirt-users] Schema</subject><body>

On 4/5/19 1:15 PM, Maximilian Schieder wrote:
&gt; Hey,
&gt; Is there a Schema of creating a VM (Domain)?
&gt; 
&gt; Something like:
&gt; Create Storagepool
&gt; Init Storagepool
&gt; 

Yes there is. /usr/share/libvirt/schemas/storage*.rng. However, our
schemas can be more relaxed in some cases than what libvirt actually
accepts (this arises from fact that the space of accepted XMLs is just
too big).

Therefore, you may want to consult:

  https://libvirt.org/formatstorage.html

Michal

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190406201910</emailId><senderName>Nicolás_Iglesias</senderName><senderEmail>nfiglesias@gmail.com</senderEmail><timestampReceived>2019-04-06 20:19:10-0400</timestampReceived><subject>Re: [libvirt-users] Cannot create PID file</subject><body>

[Attachment #2 (multipart/alternative)]


Thanks for the response Michal.

Indeed, I have set that up already but the PID error was shown anyways.
I unfortunately ceased using Libvirt and gone directly with qemu, until I=
 found out what happens.

On Apr 6 2019, at 3:17 am, Michal Pr=C3=ADvozn=C3=ADk &lt;mprivozn=40redhat.=
com&gt; wrote:
&gt; On 4/4/19 6:22 PM, Nicol=C3=A1s Iglesias wrote:
&gt; &gt; Hi =46ellow users
&gt; &gt;
&gt; &gt; I've just compiled latest libvirt and qemu, both from their respectiv=
e official repositories.
&gt; &gt; Libvirtd starts perfect, but when I try to start a domain using the v=
irsh console, I get the following:
&gt; &gt;
&gt; &gt; virsh =23 start --domain win8.1
&gt; &gt; error: =46ailed to start domain win8.1
&gt; &gt; error: internal error: =46ailed to start QEMU binary /usr/bin/qemu-sy=
stem-x86=5F64 for probing: qemu-system-x86=5F64: cannot create PID file: =
Cannot open pid file: Permission denied
&gt; &gt;
&gt; &gt; I'm not sure where to look at. Any hint would be much appreciated.
&gt; Hi,
&gt; when probing for capabilities libvirt starts qemu with:
&gt; -pidfile =24libDir/qmp-XXXXX/qmp.pid
&gt; where =24libDir points to /var/lib/libvirt/qemu for system wide daemon =
and
&gt; =24XDG=5FCACHE=5FHOME/.cache/qemu/lib/ for session daemon. qemu process=
 is run
&gt; under user:group configured from corresponding qemu.conf
&gt; (/etc/libvirt/qemu.conf for system daemon). The defaults are distro
&gt; specific.
&gt;
&gt; Hope this gives you some hint. Although, libvirt should relabel its
&gt; internal paths on daemon startup, so this smells like a bug.
&gt;
&gt; Michal
[Attachment #5 (text/html)]

&lt;div&gt;Thanks for the response Michal.&lt;/div&gt;&lt;br&gt;&lt;div&gt;Indeed, I have set that up already \
but the PID error was shown anyways.&lt;/div&gt;&lt;br&gt;&lt;div&gt;I unfortunately ceased using \
Libvirt and gone directly with qemu, until I found out what \
happens.&lt;/div&gt;&lt;br&gt;&lt;br&gt;&lt;div class="gmail_quote_attribution"&gt;On Apr 6 2019, at 3:17 am, \
Michal Prívozník &lt;mprivozn@redhat.com&gt; wrote:&lt;/div&gt;&lt;blockquote&gt;&lt;div&gt;&lt;div&gt;On \
4/4/19 6:22 PM, Nicolás Iglesias wrote:&lt;/div&gt;&lt;blockquote&gt;&lt;div&gt;Hi Fellow \
users&lt;/div&gt;&lt;br&gt;&lt;div&gt;I've just compiled latest libvirt and qemu, both from their \
respective official repositories.&lt;/div&gt;&lt;div&gt;Libvirtd starts perfect, but when I try \
to start a domain using the virsh console, I get the following:&lt;/div&gt;&lt;br&gt;&lt;div&gt;virsh # \
start --domain win8.1&lt;/div&gt;&lt;div&gt;error: Failed to start domain win8.1&lt;/div&gt;&lt;div&gt;error: \
internal error: Failed to start QEMU binary /usr/bin/qemu-system-x86_64 for probing: \
qemu-system-x86_64: cannot create PID file: Cannot open pid file: Permission \
denied&lt;/div&gt;&lt;br&gt;&lt;div&gt;I'm not sure where to look at. Any hint would be much \
appreciated.&lt;/div&gt;&lt;/blockquote&gt;&lt;br&gt;&lt;div&gt;Hi,&lt;/div&gt;&lt;br&gt;&lt;div&gt;when probing for \
capabilities libvirt starts qemu with:&lt;/div&gt;&lt;br&gt;&lt;div&gt;-pidfile \
$libDir/qmp-XXXXX/qmp.pid&lt;/div&gt;&lt;br&gt;&lt;div&gt;where $libDir points to /var/lib/libvirt/qemu \
for system wide daemon and&lt;/div&gt;&lt;div&gt;$XDG_CACHE_HOME/.cache/qemu/lib/ for session \
daemon. qemu process is run&lt;/div&gt;&lt;div&gt;under user:group configured from corresponding \
qemu.conf&lt;/div&gt;&lt;div&gt;(/etc/libvirt/qemu.conf for system daemon). The defaults are \
distro&lt;/div&gt;&lt;div&gt;specific.&lt;/div&gt;&lt;br&gt;&lt;div&gt;Hope this gives you some hint. Although, \
libvirt should relabel its&lt;/div&gt;&lt;div&gt;internal paths on daemon startup, so this smells \
like a bug.&lt;/div&gt;&lt;br&gt;&lt;div&gt;Michal&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;img class="mailspring-open" \
alt="Sent from Mailspring" width="0" height="0" style="border:0; width:0; height:0;" \
src="https://link.getmailspring.com/open/0E56D905-FF3C-4008-813A-6B4C03794D46@getmailspring.com?recipient=bGlidmlydC11c2Vyc0ByZWRoYXQuY29t"&gt;




_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190407003838</emailId><senderName>PR PR</senderName><senderEmail>prprpr7819@gmail.com</senderEmail><timestampReceived>2019-04-07 00:38:38-0400</timestampReceived><subject>Re: [libvirt-users] Guest interface names not same as configured name</subject><body>

[Attachment #2 (multipart/alternative)]


Thanks for the quick response. I was able to use udev to control the names
in the guest. Reg patch, i am new to this codebase and sure if you give me
pointers on which file to look into I can give it a shot.

Thanks

On Thu, Apr 4, 2019 at 2:35 PM Laine Stump &lt;laine@redhat.com&gt; wrote:

&gt; On 4/4/19 2:02 PM, PR PR wrote:
&gt; &gt; Hi,
&gt; &gt;
&gt; &gt; I am creating a guest with following description for interfaces in the
&gt; &gt; xml using virsh create xml command. For some reason, the guest interface
&gt; &gt; names in the VM dont match the names specified in the xml. Is there a
&gt; &gt; way to make guest interface names predictable?
&gt;
&gt; For qemu (which you've indicating you're using) there isn't any way to
&gt; set the name of the network device in the guest from the libvirt config.
&gt; There is no visibility of the &lt;guest dev='xxx'&gt; element into the guest
&gt; OS; all that the guest can know is that there is an e1000 ethernet
&gt; device plugged into PCI bus 0 slot 3, and it has MAC address
&gt; 52:54:00:17:0b:e7. Any determination of name must be done within the
&gt; guest OS.
&gt;
&gt; The &lt;guest dev='blah'&gt; element is only used by the LXC and openvz
&gt; drivers. It really should be flagged as an error during validation for
&gt; other drivers (patches welcome :-).
&gt;
&gt;
&gt; &gt;
&gt; &gt; Following is the qemu version on host
&gt; &gt;
&gt; &gt; dpkg --list | grep -i qemu
&gt; &gt; ii  qemu-kvm                              1:2.11+dfsg-1ubuntu7.10
&gt; &gt;          amd64        QEMU Full virtualization on x86 hardware
&gt; &gt;
&gt; &gt;      &lt;interface type='user'&gt;
&gt; &gt;        &lt;mac address='52:54:00:17:0b:e7'/&gt;
&gt; &gt;        &lt;guest dev='eth0'/&gt;
&gt; &gt;        &lt;model type='e1000'/&gt;
&gt; &gt;        &lt;alias name='net0'/&gt;
&gt; &gt;        &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x03'
&gt; &gt; function='0x0'/&gt;
&gt; &gt;      &lt;/interface&gt;
&gt; &gt;      &lt;interface type='ethernet'&gt;
&gt; &gt;        &lt;mac address='52:54:00:ee:70:34'/&gt;
&gt; &gt;        &lt;target dev='net0'/&gt;
&gt; &gt;        &lt;guest dev='Ethernet0'/&gt;
&gt; &gt;        &lt;model type='rtl8139'/&gt;
&gt; &gt;        &lt;alias name='net1'/&gt;
&gt; &gt;        &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x05'
&gt; &gt; function='0x0'/&gt;
&gt; &gt;      &lt;/interface&gt;
&gt; &gt;
&gt; &gt; Thanks
&gt; &gt;
&gt; &gt; _______________________________________________
&gt; &gt; libvirt-users mailing list
&gt; &gt; libvirt-users@redhat.com
&gt; &gt; https://www.redhat.com/mailman/listinfo/libvirt-users
&gt; &gt;
&gt;
&gt;

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;Thanks for the quick response. I was able to use udev to control the \
names in the guest. Reg patch, i am new to this codebase and sure if you give me \
pointers on which file to look into I can give it a \
shot.&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;div class="gmail_quote"&gt;&lt;div \
dir="ltr" class="gmail_attr"&gt;On Thu, Apr 4, 2019 at 2:35 PM Laine Stump &lt;&lt;a \
href="mailto:laine@redhat.com"&gt;laine@redhat.com&lt;/a&gt;&gt; wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote \
class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid \
rgb(204,204,204);padding-left:1ex"&gt;On 4/4/19 2:02 PM, PR PR wrote:&lt;br&gt; &gt; Hi,&lt;br&gt;
&gt; &lt;br&gt;
&gt; I am creating a guest with following description for interfaces in the &lt;br&gt;
&gt; xml using virsh create xml command. For some reason, the guest interface &lt;br&gt;
&gt; names in the VM dont match the names specified in the xml. Is there a &lt;br&gt;
&gt; way to make guest interface names predictable?&lt;br&gt;
&lt;br&gt;
For qemu (which you've indicating you're using) there isn't any way to \
&lt;br&gt; set the name of the network device in the guest from the libvirt config. &lt;br&gt;
There is no visibility of the &lt;guest dev='xxx'&gt; element into the guest \
&lt;br&gt; OS; all that the guest can know is that there is an e1000 ethernet &lt;br&gt;
device plugged into PCI bus 0 slot 3, and it has MAC address &lt;br&gt;
52:54:00:17:0b:e7. Any determination of name must be done within the &lt;br&gt;
guest OS.&lt;br&gt;
&lt;br&gt;
The &lt;guest dev='blah'&gt; element is only used by the LXC and openvz &lt;br&gt;
drivers. It really should be flagged as an error during validation for &lt;br&gt;
other drivers (patches welcome :-).&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&gt; &lt;br&gt;
&gt; Following is the qemu version on host&lt;br&gt;
&gt; &lt;br&gt;
&gt; dpkg --list | grep -i qemu&lt;br&gt;
&gt; ii   qemu-kvm                                             \
1:2.11+dfsg-1ubuntu7.10            &lt;br&gt; &gt;               amd64            QEMU Full \
virtualization on x86 hardware&lt;br&gt; &gt; &lt;br&gt;
&gt;         &lt;interface type='user'&gt;&lt;br&gt;
&gt;            &lt;mac address='52:54:00:17:0b:e7'/&gt;&lt;br&gt;
&gt;            &lt;guest dev='eth0'/&gt;&lt;br&gt;
&gt;            &lt;model type='e1000'/&gt;&lt;br&gt;
&gt;            &lt;alias name='net0'/&gt;&lt;br&gt;
&gt;            &lt;address type='pci' domain='0x0000' \
bus='0x00' slot='0x03' &lt;br&gt; &gt; function='0x0'/&gt;&lt;br&gt;
&gt;         &lt;/interface&gt;&lt;br&gt;
&gt;         &lt;interface type='ethernet'&gt;&lt;br&gt;
&gt;            &lt;mac address='52:54:00:ee:70:34'/&gt;&lt;br&gt;
&gt;            &lt;target dev='net0'/&gt;&lt;br&gt;
&gt;            &lt;guest dev='Ethernet0'/&gt;&lt;br&gt;
&gt;            &lt;model type='rtl8139'/&gt;&lt;br&gt;
&gt;            &lt;alias name='net1'/&gt;&lt;br&gt;
&gt;            &lt;address type='pci' domain='0x0000' \
bus='0x00' slot='0x05' &lt;br&gt; &gt; function='0x0'/&gt;&lt;br&gt;
&gt;         &lt;/interface&gt;&lt;br&gt;
&gt; &lt;br&gt;
&gt; Thanks&lt;br&gt;
&gt; &lt;br&gt;
&gt; _______________________________________________&lt;br&gt;
&gt; libvirt-users mailing list&lt;br&gt;
&gt; &lt;a href="mailto:libvirt-users@redhat.com" \
target="_blank"&gt;libvirt-users@redhat.com&lt;/a&gt;&lt;br&gt; &gt; &lt;a \
href="https://www.redhat.com/mailman/listinfo/libvirt-users" rel="noreferrer" \
target="_blank"&gt;https://www.redhat.com/mailman/listinfo/libvirt-users&lt;/a&gt;&lt;br&gt; &gt; \
&lt;br&gt; &lt;br&gt;
&lt;/blockquote&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190410141532</emailId><senderName>Pavel Hrdina</senderName><senderEmail>phrdina@redhat.com</senderEmail><timestampReceived>2019-04-10 14:15:32-0400</timestampReceived><subject>Re: [libvirt-users] CGroup V2 Support</subject><body>

[Attachment #2 (multipart/signed)]


On Sun, Apr 07, 2019 at 06:46:19PM +0900, ITeng A wrote:
&gt; Dear all
&gt; 
&gt; Does the current version of libvirt support the new cgroup v2 ?
&gt;  I am running KVM qemu VMs on Ubuntu with linux Kernel 4.18 with cgroup v1
&gt; and I would like to use Cgroup v2  but we I mount cgroup v2  the  libvirt
&gt; virtualization daemon  fail to start with error message that it cant create
&gt; cgroup  /system.slice/libvirtd.service  no such file or directory.
&gt;

Hi Asraa,

Cgroups V2 is supported since libvirt 4.9.0 for cpu, cpuacct, io, memory
controllers.

In libvirt 5.2.0 we added support for cpuset with kernel 5.0.

There is still no support for devices controller but that one is not
mandatory to run KVM/QEMU VMs as there is a bug in kernel that leaks
some resources.

Pavel

["signature.asc" (application/pgp-signature)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190412123229</emailId><senderName>Vasiliy Tolstov</senderName><senderEmail>v.tolstov@selfip.ru</senderEmail><timestampReceived>2019-04-12 12:32:29-0400</timestampReceived><subject>Re: [libvirt-users] Network hooks for ethernet interfaces</subject><body>

[Attachment #2 (multipart/alternative)]


пт, 12 апр. 2019 г., 12:10 Ruben Kerkhof &lt;ruben@rubenkerkhof.com&gt;:

&gt; On Thu, Apr 11, 2019 at 10:43 PM Vasiliy Tolstov &lt;v.tolstov@selfip.ru&gt;
&gt; wrote:
&gt;
&gt; Hi Vasiliy,
&gt;
&gt; &gt;
&gt; &gt; ср, 10 апр. 2019 г. в 19:46, Ruben Kerkhof &lt;ruben@rubenkerkhof.com&gt;:
&gt; &gt; &gt;
&gt; &gt; &gt; On Wed, Apr 10, 2019 at 1:44 PM Laine Stump &lt;laine@redhat.com&gt; wrote:
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; On 4/9/19 11:35 AM, Ruben Kerkhof wrote:
&gt; &gt; &gt; &gt; &gt; On Tue, Apr 9, 2019 at 5:10 PM Michal Privoznik &lt;
&gt; mprivozn@redhat.com&gt; wrote:
&gt; &gt; &gt; &gt; &gt;&gt;
&gt; &gt; &gt; &gt; &gt;&gt; On 4/9/19 4:38 PM, Ruben Kerkhof wrote:
&gt; &gt; &gt; &gt; &gt;&gt;&gt; Hi all,
&gt; &gt; &gt; &gt; &gt;&gt;&gt;
&gt; &gt; &gt; &gt; &gt;&gt;&gt; I have a hook script, /etc/libvirt/hooks/network, that doesn't
&gt; seem to
&gt; &gt; &gt; &gt; &gt;&gt;&gt; be called when I attach an interface with type 'ethernet' with
&gt; this
&gt; &gt; &gt; &gt; &gt;&gt;&gt; xml snippet:
&gt; &gt; &gt; &gt; &gt;&gt;&gt;
&gt; &gt; &gt; &gt; &gt;&gt;&gt; &lt;interface type='ethernet'&gt;
&gt; &gt; &gt; &gt; &gt;&gt;&gt;       &lt;model type="virtio"/&gt;
&gt; &gt; &gt; &gt; &gt;&gt;&gt;       &lt;source&gt;
&gt; &gt; &gt; &gt; &gt;&gt;&gt;           &lt;ip address="10.100.0.1" prefix="24"
&gt; peer="10.100.0.10"/&gt;
&gt; &gt; &gt; &gt; &gt;&gt;&gt;       &lt;/source&gt;
&gt; &gt; &gt; &gt; &gt;&gt;&gt; &lt;/interface&gt;
&gt; &gt; &gt; &gt; &gt;&gt;&gt;
&gt; &gt; &gt; &gt; &gt;&gt;&gt; https://www.libvirt.org/hooks.html#intro says
&gt; &gt; &gt; &gt; &gt;&gt;&gt; "A network is started or stopped or an interface is
&gt; plugged/unplugged
&gt; &gt; &gt; &gt; &gt;&gt;&gt; to/from the network (since 1.2.2)".
&gt; &gt; &gt; &gt; &gt;&gt;&gt;
&gt; &gt; &gt; &gt; &gt;&gt;&gt; While I don't have a network defined in xml, I'd expect this to
&gt; work
&gt; &gt; &gt; &gt; &gt;&gt;&gt; just as well for 'ethernet' type interfaces. Am I wrong?
&gt; &gt; &gt; &gt; &gt;&gt;
&gt; &gt; &gt; &gt; &gt;&gt;
&gt; &gt; &gt; &gt; &gt;&gt; Hotplugging an 'ethernet' type of interface doesn't really relate
&gt; to any
&gt; &gt; &gt; &gt; &gt;&gt; libvirt network. Hence libvirt doesn't call 'network' hook
&gt; script. If
&gt; &gt; &gt; &gt; &gt;&gt; you'd continue reading you'll see what is the 'network' hook fed
&gt; with
&gt; &gt; &gt; &gt; &gt;&gt; (on stdin): info on domain in question AND network where the event
&gt; &gt; &gt; &gt; &gt;&gt; ocurred. But there is no network, is it?
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; No not in the libvirt sense there isn't, you're right.
&gt; &gt; &gt; &gt; &gt;&gt;
&gt; &gt; &gt; &gt; &gt;&gt; But maybe you can work around this by waiting for
&gt; &gt; &gt; &gt; &gt;&gt; DEVICE_ADDED/DEVICE_REMOVED events? What is it that you're trying
&gt; to solve?
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; I'd like to enable proxy_arp on the interface among other things.
&gt; &gt; &gt; &gt; &gt; I can easily do this from the same script that adds the interface
&gt; &gt; &gt; &gt; &gt; though, so I have a workaround, but a hook that triggers on all
&gt; &gt; &gt; &gt; &gt; interface events felt cleaner.
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; Also keep in mind that the hook scripts aren't an officially
&gt; supported
&gt; &gt; &gt; &gt; part of the API, and are thus liable to change without warning. As an
&gt; &gt; &gt; &gt; example, danpb has proposed changing the network hook:
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt;
&gt; https://www.redhat.com/archives/libvir-list/2019-March/msg01280.html
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; Once this goes in, any network hook script that uses the plugged and
&gt; &gt; &gt; &gt; unplugged hooks will no longer work; you would instead need to use
&gt; the
&gt; &gt; &gt; &gt; port-created and port-deleted hooks.
&gt; &gt; &gt;
&gt; &gt; &gt; That's good to know, thank you Laine.
&gt; &gt; &gt;
&gt; &gt; &gt; In that case perhaps adding this functionality to libvirt itself would
&gt; &gt; &gt; make more sense?
&gt; &gt; &gt;
&gt; &gt; &gt; Some background, I'm implementing
&gt; &gt; &gt; https://vincent.bernat.ch/en/blog/2018-l3-routing-hypervisor, so
&gt; &gt; &gt; announcing /32 host routes to our vms with BGP.
&gt; &gt; &gt; Our existing vms use /24 network addressing, and to keep that working,
&gt; &gt; &gt; I need to set proxy_arp on the interface.
&gt; &gt; &gt;
&gt; &gt; I done something like this in some Russian Cloud hosting provider, but
&gt; &gt; we use OSPF to redistribute routes in DC, and sync their via bgp
&gt; &gt; between dc.
&gt;
&gt; Thanks, it's good to know that more people do this and I'm on the right
&gt; path :)
&gt;
&gt; &gt; I don't recommend hooks, write small netlink based program that
&gt; &gt; listens events about interface up, check it names and set proxy arp
&gt; &gt; for it.
&gt; &gt; This is not blocking and easy to modify/test/write. Or set proxy_arp
&gt; &gt; globally (but this is not recommended)
&gt;
&gt; That's a good tip, thanks.
&gt; I do want to set proxy_arp before the interface is admin up and
&gt; passing traffic, is that possible with netlink?
&gt;
&gt; Writing an udev rule might work as well now that I think of it.
&gt;
&gt; But seeing that multiple people have implemented this in their own
&gt; way, wouldn't it make more sense to add support for this to libvirt?
&gt; Something like &lt;interface type='ethernet' proxy_arp='on' /&gt;
&gt; &gt;
&gt;


This is not one option that can be setted, so i think this is not generic
variant.
And yes,if this is only one option,udev is sufficiently.

&gt; --
&gt; &gt; Vasiliy Tolstov,
&gt; &gt; e-mail: v.tolstov@selfip.ru
&gt;
&gt; Kind regards,
&gt;
&gt; Ruben
&gt;

[Attachment #5 (text/html)]

&lt;div dir="auto"&gt;&lt;div&gt;&lt;br&gt;&lt;br&gt;&lt;div class="gmail_quote"&gt;&lt;div dir="ltr" \
class="gmail_attr"&gt;пт, 12 апр. 2019 г., 12:10 Ruben Kerkhof &lt;&lt;a \
href="mailto:ruben@rubenkerkhof.com"&gt;ruben@rubenkerkhof.com&lt;/a&gt;&gt;:&lt;br&gt;&lt;/div&gt;&lt;blockquote \
class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc \
solid;padding-left:1ex"&gt;On Thu, Apr 11, 2019 at 10:43 PM Vasiliy Tolstov &lt;&lt;a \
href="mailto:v.tolstov@selfip.ru" target="_blank" \
rel="noreferrer"&gt;v.tolstov@selfip.ru&lt;/a&gt;&gt; wrote:&lt;br&gt; &lt;br&gt;
Hi Vasiliy,&lt;br&gt;
&lt;br&gt;
&gt;&lt;br&gt;
&gt; ср, 10 апр. 2019 г. в 19:46, Ruben Kerkhof &lt;&lt;a \
href="mailto:ruben@rubenkerkhof.com" target="_blank" \
rel="noreferrer"&gt;ruben@rubenkerkhof.com&lt;/a&gt;&gt;:&lt;br&gt; &gt; &gt;&lt;br&gt;
&gt; &gt; On Wed, Apr 10, 2019 at 1:44 PM Laine Stump &lt;&lt;a \
href="mailto:laine@redhat.com" target="_blank" \
rel="noreferrer"&gt;laine@redhat.com&lt;/a&gt;&gt; wrote:&lt;br&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; On 4/9/19 11:35 AM, Ruben Kerkhof wrote:&lt;br&gt;
&gt; &gt; &gt; &gt; On Tue, Apr 9, 2019 at 5:10 PM Michal Privoznik &lt;&lt;a \
href="mailto:mprivozn@redhat.com" target="_blank" \
rel="noreferrer"&gt;mprivozn@redhat.com&lt;/a&gt;&gt; wrote:&lt;br&gt; &gt; &gt; &gt; &gt;&gt;&lt;br&gt;
&gt; &gt; &gt; &gt;&gt; On 4/9/19 4:38 PM, Ruben Kerkhof wrote:&lt;br&gt;
&gt; &gt; &gt; &gt;&gt;&gt; Hi all,&lt;br&gt;
&gt; &gt; &gt; &gt;&gt;&gt;&lt;br&gt;
&gt; &gt; &gt; &gt;&gt;&gt; I have a hook script, /etc/libvirt/hooks/network, that \
doesn't seem to&lt;br&gt; &gt; &gt; &gt; &gt;&gt;&gt; be called when I attach an \
interface with type 'ethernet' with this&lt;br&gt; &gt; &gt; &gt; &gt;&gt;&gt; xml \
snippet:&lt;br&gt; &gt; &gt; &gt; &gt;&gt;&gt;&lt;br&gt;
&gt; &gt; &gt; &gt;&gt;&gt; &lt;interface type='ethernet'&gt;&lt;br&gt;
&gt; &gt; &gt; &gt;&gt;&gt;           &lt;model type="virtio"/&gt;&lt;br&gt;
&gt; &gt; &gt; &gt;&gt;&gt;           &lt;source&gt;&lt;br&gt;
&gt; &gt; &gt; &gt;&gt;&gt;                 &lt;ip address="10.100.0.1" \
prefix="24" peer="10.100.0.10"/&gt;&lt;br&gt; &gt; &gt; &gt; \
&gt;&gt;&gt;           &lt;/source&gt;&lt;br&gt; &gt; &gt; &gt; &gt;&gt;&gt; \
&lt;/interface&gt;&lt;br&gt; &gt; &gt; &gt; &gt;&gt;&gt;&lt;br&gt;
&gt; &gt; &gt; &gt;&gt;&gt; &lt;a href="https://www.libvirt.org/hooks.html#intro" \
rel="noreferrer noreferrer" \
target="_blank"&gt;https://www.libvirt.org/hooks.html#intro&lt;/a&gt; says&lt;br&gt; &gt; &gt; &gt; \
&gt;&gt;&gt; "A network is started or stopped or an interface is \
plugged/unplugged&lt;br&gt; &gt; &gt; &gt; &gt;&gt;&gt; to/from the network (since \
1.2.2)".&lt;br&gt; &gt; &gt; &gt; &gt;&gt;&gt;&lt;br&gt;
&gt; &gt; &gt; &gt;&gt;&gt; While I don't have a network defined in xml, I'd \
expect this to work&lt;br&gt; &gt; &gt; &gt; &gt;&gt;&gt; just as well for \
'ethernet' type interfaces. Am I wrong?&lt;br&gt; &gt; &gt; &gt; &gt;&gt;&lt;br&gt;
&gt; &gt; &gt; &gt;&gt;&lt;br&gt;
&gt; &gt; &gt; &gt;&gt; Hotplugging an 'ethernet' type of interface \
doesn't really relate to any&lt;br&gt; &gt; &gt; &gt; &gt;&gt; libvirt network. Hence \
libvirt doesn't call 'network' hook script. If&lt;br&gt; &gt; &gt; &gt; \
&gt;&gt; you'd continue reading you'll see what is the 'network' hook \
fed with&lt;br&gt; &gt; &gt; &gt; &gt;&gt; (on stdin): info on domain in question AND \
network where the event&lt;br&gt; &gt; &gt; &gt; &gt;&gt; ocurred. But there is no network, \
is it?&lt;br&gt; &gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt; No not in the libvirt sense there isn't, you're \
right.&lt;br&gt; &gt; &gt; &gt; &gt;&gt;&lt;br&gt;
&gt; &gt; &gt; &gt;&gt; But maybe you can work around this by waiting for&lt;br&gt;
&gt; &gt; &gt; &gt;&gt; DEVICE_ADDED/DEVICE_REMOVED events? What is it that \
you're trying to solve?&lt;br&gt; &gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; &gt; I'd like to enable proxy_arp on the interface among other \
things.&lt;br&gt; &gt; &gt; &gt; &gt; I can easily do this from the same script that adds \
the interface&lt;br&gt; &gt; &gt; &gt; &gt; though, so I have a workaround, but a hook that \
triggers on all&lt;br&gt; &gt; &gt; &gt; &gt; interface events felt cleaner.&lt;br&gt;
&gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; Also keep in mind that the hook scripts aren't an officially \
supported&lt;br&gt; &gt; &gt; &gt; part of the API, and are thus liable to change without \
warning. As an&lt;br&gt; &gt; &gt; &gt; example, danpb has proposed changing the network \
hook:&lt;br&gt; &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt;     &lt;a \
href="https://www.redhat.com/archives/libvir-list/2019-March/msg01280.html" \
rel="noreferrer noreferrer" \
target="_blank"&gt;https://www.redhat.com/archives/libvir-list/2019-March/msg01280.html&lt;/a&gt;&lt;br&gt;
 &gt; &gt; &gt;&lt;br&gt;
&gt; &gt; &gt; Once this goes in, any network hook script that uses the plugged \
and&lt;br&gt; &gt; &gt; &gt; unplugged hooks will no longer work; you would instead need to \
use the&lt;br&gt; &gt; &gt; &gt; port-created and port-deleted hooks.&lt;br&gt;
&gt; &gt;&lt;br&gt;
&gt; &gt; That's good to know, thank you Laine.&lt;br&gt;
&gt; &gt;&lt;br&gt;
&gt; &gt; In that case perhaps adding this functionality to libvirt itself would&lt;br&gt;
&gt; &gt; make more sense?&lt;br&gt;
&gt; &gt;&lt;br&gt;
&gt; &gt; Some background, I'm implementing&lt;br&gt;
&gt; &gt; &lt;a href="https://vincent.bernat.ch/en/blog/2018-l3-routing-hypervisor" \
rel="noreferrer noreferrer" \
target="_blank"&gt;https://vincent.bernat.ch/en/blog/2018-l3-routing-hypervisor&lt;/a&gt;, \
so&lt;br&gt; &gt; &gt; announcing /32 host routes to our vms with BGP.&lt;br&gt;
&gt; &gt; Our existing vms use /24 network addressing, and to keep that working,&lt;br&gt;
&gt; &gt; I need to set proxy_arp on the interface.&lt;br&gt;
&gt; &gt;&lt;br&gt;
&gt; I done something like this in some Russian Cloud hosting provider, but&lt;br&gt;
&gt; we use OSPF to redistribute routes in DC, and sync their via bgp&lt;br&gt;
&gt; between dc.&lt;br&gt;
&lt;br&gt;
Thanks, it's good to know that more people do this and I'm on the right path \
:)&lt;br&gt; &lt;br&gt;
&gt; I don't recommend hooks, write small netlink based program that&lt;br&gt;
&gt; listens events about interface up, check it names and set proxy arp&lt;br&gt;
&gt; for it.&lt;br&gt;
&gt; This is not blocking and easy to modify/test/write. Or set proxy_arp&lt;br&gt;
&gt; globally (but this is not recommended)&lt;br&gt;
&lt;br&gt;
That's a good tip, thanks.&lt;br&gt;
I do want to set proxy_arp before the interface is admin up and&lt;br&gt;
passing traffic, is that possible with netlink?&lt;br&gt;
&lt;br&gt;
Writing an udev rule might work as well now that I think of it.&lt;br&gt;
&lt;br&gt;
But seeing that multiple people have implemented this in their own&lt;br&gt;
way, wouldn't it make more sense to add support for this to libvirt?&lt;br&gt;
Something like &lt;interface type='ethernet' proxy_arp='on' /&gt;&lt;br&gt;
&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;/div&gt;&lt;div dir="auto"&gt;&lt;br&gt;&lt;/div&gt;&lt;div \
dir="auto"&gt;&lt;br&gt;&lt;/div&gt;&lt;div dir="auto"&gt;This is not one option that can be setted, so i \
think this is not generic variant.&lt;/div&gt;&lt;div dir="auto"&gt;And yes,if this is only one \
option,udev is sufficiently.&lt;/div&gt;&lt;div dir="auto"&gt;&lt;br&gt;&lt;/div&gt;&lt;div dir="auto"&gt;&lt;div \
class="gmail_quote"&gt;&lt;blockquote class="gmail_quote" style="margin:0 0 0 \
.8ex;border-left:1px #ccc solid;padding-left:1ex"&gt; &gt; --&lt;br&gt;
&gt; Vasiliy Tolstov,&lt;br&gt;
&gt; e-mail: &lt;a href="mailto:v.tolstov@selfip.ru" target="_blank" \
rel="noreferrer"&gt;v.tolstov@selfip.ru&lt;/a&gt;&lt;br&gt; &lt;br&gt;
Kind regards,&lt;br&gt;
&lt;br&gt;
Ruben&lt;br&gt;
&lt;/blockquote&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190412144001</emailId><senderName>Michal Privoznik</senderName><senderEmail>mprivozn@redhat.com</senderEmail><timestampReceived>2019-04-12 14:40:01-0400</timestampReceived><subject>Re: [libvirt-users] Failed to probe capabilities on libvirt v5.1.0</subject><body>

On 4/11/19 6:20 PM, Vladik Romanovsky wrote:
&gt; Hi everyone,
&gt; 
&gt; Unfortunately, I'm facing an issue with libvirt 5.1.0 when probing capabilities.
&gt; 
&gt; Failed to probe capabilities for /usr/bin/qemu-system-x86_64: internal
&gt; error: Failed to start QEMU binary /usr/bin/qemu-system-x86_64 for
&gt; probing: qemu-system-x86_64: cannot create PID file: Cannot open pid
&gt; file: Permission denied
&gt; 
&gt; I see that the qmp directory is being created, however, it belongs to
&gt; root instead of qemu:
&gt; 
&gt; /var/lib/libvirt/qemu/qmp-U1w6o6:
&gt; 0 drwx------. 2 root root   6 Apr 11 14:46 qmp-U1w6o6
&gt; 
&gt; The user and group are set to "qemu" in /etc/libvirt/qemu.conf

Yep, this is a libvirt bug. There's a fix here:

https://www.redhat.com/archives/libvir-list/2019-April/msg00876.html

BTW: are you running libvirt inside a container perhaps? Or without capng?

Michal

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190418154524</emailId><senderName>Daniel =?utf-8?B?UC4gQmVycmFuZ8Op?=</senderName><senderEmail>berrange@redhat.com</senderEmail><timestampReceived>2019-04-18 15:45:24-0400</timestampReceived><subject>Re: [libvirt-users] [libvirt] Why virsh domxml-to-native qemu-argv changes PCI slot number</subject><body>

On Thu, Apr 18, 2019 at 05:39:59PM +0200, Andrea Bolognani wrote:
&gt; On Thu, 2019-04-18 at 15:29 +0100, Daniel P. Berrangé wrote:
&gt; &gt; On Thu, Apr 18, 2019 at 04:23:05PM +0200, Andrea Bolognani wrote:
&gt; &gt; &gt; qemuDomainAssignAddresses() is supposed to make sure that any address
&gt; &gt; &gt; configured explicitly by the user (or previously by libvirt) is
&gt; &gt; &gt; preserved, and it's doing that correctly when it's called from inside
&gt; &gt; &gt; qemuDomainDefAssignAddresses(); however, for some reason, by the time
&gt; &gt; &gt; we call it again in qemuProcessPrepareDomain() the PCI address for
&gt; &gt; &gt; the network interface is no longer set, and so a fresh one gets
&gt; &gt; &gt; assigned instead.
&gt; &gt; &gt; 
&gt; &gt; &gt; I'll investigate further and get back to you.
&gt; &gt; 
&gt; &gt; It is a bug in qemuConnectDomainXMLToNative. You'll see we replace
&gt; &gt; the original type=bridge NIC with a type=ethernet, except we fail
&gt; &gt; to copy the address info &amp; probably other properties too.
&gt; 
&gt; Yeah, I figured that out after digging a bit more :)
&gt; 
&gt; I'm not quite sure how to fix it properly, though. Adding yet more
&gt; properties to the list of those we record before calling
&gt; virDomainNetDefClear() and restore afterwards would be a stop-gap
&gt; measure at best; limiting ourselves to merely changing net-&gt;type,
&gt; on the other hand, though it seems to work from a quick test, will
&gt; likely lead to hitting other corner cases.
&gt; 
&gt; Formatting the XML, replacing the type attribute and parsing it
&gt; back perhaps? Other, hopefully better, ideas?

I think the problem is that we tried to use a whitelkist approach
to change the net backend. We should reverse it to use a blacklist
approach and thus not call virDomainNetDefClear at all.

We only need to be doing this munging for the bridge/network/direct/hostdev
network types, but we were lazy and cleared out all types. eg if someone
had requests slirp we should have honoured it.

So we should just selectively replace bits we dont want, leaving everything
else intact.


Regards,
Daniel
-- 
|: https://berrange.com      -o-    https://www.flickr.com/photos/dberrange :|
|: https://libvirt.org         -o-            https://fstop138.berrange.com :|
|: https://entangle-photo.org    -o-    https://www.instagram.com/dberrange :|

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190418185053</emailId><senderName>Alex Ivanov</senderName><senderEmail>gnidorah@ya.ru</senderEmail><timestampReceived>2019-04-18 18:50:53-0400</timestampReceived><subject>[libvirt-users] GVT-g - suboptimal user experience</subject><body>

Hi.
In the current state of gvt-g the user experience is suboptimal.
So my question is what are the ETAs for following features:
1. Accelerated virt-manager console using gvt-g device
2. Custom resolutions or dynamic resolution
3. UEFI VMs support (Windows guest)
Thanks.

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190420021436</emailId><senderName>"Yuan, Hang"</senderName><senderEmail>hang.yuan@intel.com</senderEmail><timestampReceived>2019-04-20 02:14:36-0400</timestampReceived><subject>Re: [libvirt-users] [iGVT-g] GVT-g - suboptimal user experience</subject><body>

Could you elaborate a bit more about the first two features? On UEFI VMs support (Windows guest), do you mean enabling Windows VM display on UEFI? Thanks.

&gt; -----Original Message-----
&gt; From: iGVT-g [mailto:igvt-g-bounces@lists.01.org] On Behalf Of Alex Ivanov
&gt; Sent: Friday, April 19, 2019 2:51 AM
&gt; To: libvirt-users@redhat.com; igvt-g@lists.01.org; virt-tools-list@redhat.com
&gt; Subject: [iGVT-g] GVT-g - suboptimal user experience
&gt; 
&gt; Hi.
&gt; In the current state of gvt-g the user experience is suboptimal.
&gt; So my question is what are the ETAs for following features:
&gt; 1. Accelerated virt-manager console using gvt-g device 2. Custom resolutions
&gt; or dynamic resolution 3. UEFI VMs support (Windows guest) Thanks.
&gt; _______________________________________________
&gt; iGVT-g mailing list
&gt; iGVT-g@lists.01.org
&gt; https://lists.01.org/mailman/listinfo/igvt-g

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190423144417</emailId><senderName>Michal Privoznik</senderName><senderEmail>mprivozn@redhat.com</senderEmail><timestampReceived>2019-04-23 14:44:17-0400</timestampReceived><subject>Re: [libvirt-users] how to use Libvirt create bridge for vm on Mac OS</subject><body>

On 4/23/19 3:59 PM, llilulu wrote:
&gt; Hi
&gt; Recently, I install Libvirt and Qemu in my Mac book, I find I can't create a bridge \
&gt; like linux bridge use for my vm, I want to know how to create a bridge on Mac for \
&gt; vm.

I don't think OS X has anything like 'software bridge' built in. Perhaps 
some third party app might have it?

Michal

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20190429110653</emailId><senderName></senderName><senderEmail>lameventanas</senderEmail><timestampReceived>2019-04-29 11:06:53-0400</timestampReceived><subject>[libvirt-users] libvirtd via unix socket using system uri</subject><body>

I want to run libvirtd as a special user, and allowing users that belong
to a special group to connect via qemu+unix:///system (eg: unix socket).

I did everything necessary to do so: created a libvirt user and group,
added the libvirt user to the kvm group, added my normal user to the
libvirt group, and made sure the socket is owned by libvirt:libvirt with
permissions set to 770.

libvirtd starts successfully, but when I try to connect as the normal
user I get this error:

bash$ virsh --connect qemu+unix://system
error: failed to connect to the hypervisor
error: invalid argument: using unix socket and remote server 'system' is
not supported.

A trace shows virsh is not even trying to open the socket.

I want to use the socket because I just need local connectivity and
don't want to run sasl and set up certificates for this, but at the same
time want to run libvirtd as a dedicated user.

Is there any reason to prevent libvirt from being used like this?

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190429130135</emailId><senderName>Michal Privoznik</senderName><senderEmail>mprivozn@redhat.com</senderEmail><timestampReceived>2019-04-29 13:01:35-0400</timestampReceived><subject>Re: [libvirt-users] libvirtd via unix socket using system uri</subject><body>

On 4/29/19 1:06 PM, lameventanas@gmail.com wrote:
&gt; I want to run libvirtd as a special user, and allowing users that belong
&gt; to a special group to connect via qemu+unix:///system (eg: unix socket).
&gt; 
&gt; I did everything necessary to do so: created a libvirt user and group,
&gt; added the libvirt user to the kvm group, added my normal user to the
&gt; libvirt group, and made sure the socket is owned by libvirt:libvirt with
&gt; permissions set to 770.
&gt; 
&gt; libvirtd starts successfully, but when I try to connect as the normal
&gt; user I get this error:
&gt; 
&gt; bash$ virsh --connect qemu+unix://system
&gt; error: failed to connect to the hypervisor
&gt; error: invalid argument: using unix socket and remote server 'system' is
&gt; not supported.

This is not valid URI.

https://libvirt.org/uri.html

You may want to use 'qemu+unix:///system' or simply 'qemu:///system' 
which is the same because libvirt connects via unix socket by default.

Anyway, you'll need to run libvirtd privileged, otherwise it'll get 
EPERM when trying to do almost anything.

Michal

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190429154211</emailId><senderName></senderName><senderEmail>lameventanas</senderEmail><timestampReceived>2019-04-29 15:42:11-0400</timestampReceived><subject>Re: [libvirt-users] libvirtd via unix socket using system uri</subject><body>



On 29/04/2019 22.01, Michal Privoznik wrote:
&gt; On 4/29/19 1:06 PM, lameventanas@gmail.com wrote:
&gt;&gt; I want to run libvirtd as a special user, and allowing users that belong
&gt;&gt; to a special group to connect via qemu+unix:///system (eg: unix socket).
&gt;&gt;
&gt;&gt; I did everything necessary to do so: created a libvirt user and group,
&gt;&gt; added the libvirt user to the kvm group, added my normal user to the
&gt;&gt; libvirt group, and made sure the socket is owned by libvirt:libvirt with
&gt;&gt; permissions set to 770.
&gt;&gt;
&gt;&gt; libvirtd starts successfully, but when I try to connect as the normal
&gt;&gt; user I get this error:
&gt;&gt;
&gt;&gt; bash$ virsh --connect qemu+unix://system
&gt;&gt; error: failed to connect to the hypervisor
&gt;&gt; error: invalid argument: using unix socket and remote server 'system' is
&gt;&gt; not supported.
&gt; 
&gt; This is not valid URI.
&gt; 
&gt; https://libvirt.org/uri.html
&gt; 
&gt; You may want to use 'qemu+unix:///system' or simply 'qemu:///system'
&gt; which is the same because libvirt connects via unix socket by default.

Thanks, I missed that.

Now I get this:

$ virsh --connect qemu:///system
error: failed to connect to the hypervisor
error: internal error: unexpected QEMU URI path '/system', try
qemu:///session

But now I see virsh opening the socket, writing, etc.

The server log shows this:

2019-04-29 15:32:07.306+0000: 20863: info : libvirt version: 5.2.0
2019-04-29 15:32:07.306+0000: 20863: info : hostname: koji
2019-04-29 15:32:07.306+0000: 20863: error : virDBusGetSessionBus:169 :
internal error: Unable to get DBus session bus connection: Unable to
autolaunch a dbus-daemon without a $DISPLAY for X11
2019-04-29 15:32:24.534+0000: 20852: error : qemuConnectOpen:1127 :
internal error: unexpected QEMU URI path '/system', try qemu:///session
2019-04-29 15:32:24.534+0000: 20851: error : virNetSocketReadWire:1803 :
End of file while reading data: Input/output error

I also wonder if dbus is important, and if so, how to fix it.


&gt; Anyway, you'll need to run libvirtd privileged, otherwise it'll get
&gt; EPERM when trying to do almost anything.

I'm aware of that, I want to try and see the limitations, and maybe get
around them by using capabilities?

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190430093834</emailId><senderName>Daniel =?utf-8?B?UC4gQmVycmFuZ8Op?=</senderName><senderEmail>berrange@redhat.com</senderEmail><timestampReceived>2019-04-30 09:38:34-0400</timestampReceived><subject>Re: [libvirt-users] libvirtd via unix socket using system uri</subject><body>

On Tue, Apr 30, 2019 at 12:42:11AM +0900, lameventanas@gmail.com wrote:
&gt; 
&gt; 
&gt; On 29/04/2019 22.01, Michal Privoznik wrote:
&gt; &gt; On 4/29/19 1:06 PM, lameventanas@gmail.com wrote:
&gt; &gt;&gt; I want to run libvirtd as a special user, and allowing users that belong
&gt; &gt;&gt; to a special group to connect via qemu+unix:///system (eg: unix socket).
&gt; &gt;&gt;
&gt; &gt;&gt; I did everything necessary to do so: created a libvirt user and group,
&gt; &gt;&gt; added the libvirt user to the kvm group, added my normal user to the
&gt; &gt;&gt; libvirt group, and made sure the socket is owned by libvirt:libvirt with
&gt; &gt;&gt; permissions set to 770.
&gt; &gt;&gt;
&gt; &gt;&gt; libvirtd starts successfully, but when I try to connect as the normal
&gt; &gt;&gt; user I get this error:
&gt; &gt;&gt;
&gt; &gt;&gt; bash$ virsh --connect qemu+unix://system
&gt; &gt;&gt; error: failed to connect to the hypervisor
&gt; &gt;&gt; error: invalid argument: using unix socket and remote server 'system' is
&gt; &gt;&gt; not supported.
&gt; &gt; 
&gt; &gt; This is not valid URI.
&gt; &gt; 
&gt; &gt; https://libvirt.org/uri.html
&gt; &gt; 
&gt; &gt; You may want to use 'qemu+unix:///system' or simply 'qemu:///system'
&gt; &gt; which is the same because libvirt connects via unix socket by default.
&gt; 
&gt; Thanks, I missed that.
&gt; 
&gt; Now I get this:
&gt; 
&gt; $ virsh --connect qemu:///system
&gt; error: failed to connect to the hypervisor
&gt; error: internal error: unexpected QEMU URI path '/system', try
&gt; qemu:///session
&gt; 
&gt; But now I see virsh opening the socket, writing, etc.
&gt; 
&gt; The server log shows this:
&gt; 
&gt; 2019-04-29 15:32:07.306+0000: 20863: info : libvirt version: 5.2.0
&gt; 2019-04-29 15:32:07.306+0000: 20863: info : hostname: koji
&gt; 2019-04-29 15:32:07.306+0000: 20863: error : virDBusGetSessionBus:169 :
&gt; internal error: Unable to get DBus session bus connection: Unable to
&gt; autolaunch a dbus-daemon without a $DISPLAY for X11
&gt; 2019-04-29 15:32:24.534+0000: 20852: error : qemuConnectOpen:1127 :
&gt; internal error: unexpected QEMU URI path '/system', try qemu:///session
&gt; 2019-04-29 15:32:24.534+0000: 20851: error : virNetSocketReadWire:1803 :
&gt; End of file while reading data: Input/output error
&gt; 
&gt; I also wonder if dbus is important, and if so, how to fix it.
&gt; 
&gt; 
&gt; &gt; Anyway, you'll need to run libvirtd privileged, otherwise it'll get
&gt; &gt; EPERM when trying to do almost anything.
&gt; 
&gt; I'm aware of that, I want to try and see the limitations, and maybe get
&gt; around them by using capabilities?

Libvirt has two distinct modes of operation - system mode and session
mode. When uid == 0, libvirtd runs in system mode &amp; offers full
privileges. When uid != 0 it runs in session mode &amp; disables alot of
functionality, or it will simply fail to use it.

It is impossible to run system mode as uid != 0, as it will always
activate session mode in this case.

Regards,
Daniel
-- 
|: https://berrange.com      -o-    https://www.flickr.com/photos/dberrange :|
|: https://libvirt.org         -o-            https://fstop138.berrange.com :|
|: https://entangle-photo.org    -o-    https://www.instagram.com/dberrange :|

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190430094011</emailId><senderName>Michal Privoznik</senderName><senderEmail>mprivozn@redhat.com</senderEmail><timestampReceived>2019-04-30 09:40:11-0400</timestampReceived><subject>Re: [libvirt-users] libvirtd via unix socket using system uri</subject><body>

On 4/29/19 5:42 PM, lameventanas@gmail.com wrote:
&gt; 
&gt; 
&gt; On 29/04/2019 22.01, Michal Privoznik wrote:
&gt;&gt; On 4/29/19 1:06 PM, lameventanas@gmail.com wrote:
&gt;&gt;&gt; I want to run libvirtd as a special user, and allowing users that belong
&gt;&gt;&gt; to a special group to connect via qemu+unix:///system (eg: unix socket).
&gt;&gt;&gt;
&gt;&gt;&gt; I did everything necessary to do so: created a libvirt user and group,
&gt;&gt;&gt; added the libvirt user to the kvm group, added my normal user to the
&gt;&gt;&gt; libvirt group, and made sure the socket is owned by libvirt:libvirt with
&gt;&gt;&gt; permissions set to 770.
&gt;&gt;&gt;
&gt;&gt;&gt; libvirtd starts successfully, but when I try to connect as the normal
&gt;&gt;&gt; user I get this error:
&gt;&gt;&gt;
&gt;&gt;&gt; bash$ virsh --connect qemu+unix://system
&gt;&gt;&gt; error: failed to connect to the hypervisor
&gt;&gt;&gt; error: invalid argument: using unix socket and remote server 'system' is
&gt;&gt;&gt; not supported.
&gt;&gt;
&gt;&gt; This is not valid URI.
&gt;&gt;
&gt;&gt; https://libvirt.org/uri.html
&gt;&gt;
&gt;&gt; You may want to use 'qemu+unix:///system' or simply 'qemu:///system'
&gt;&gt; which is the same because libvirt connects via unix socket by default.
&gt; 
&gt; Thanks, I missed that.
&gt; 
&gt; Now I get this:
&gt; 
&gt; $ virsh --connect qemu:///system
&gt; error: failed to connect to the hypervisor
&gt; error: internal error: unexpected QEMU URI path '/system', try
&gt; qemu:///session
&gt; 
&gt; But now I see virsh opening the socket, writing, etc.
&gt; 
&gt; The server log shows this:
&gt; 
&gt; 2019-04-29 15:32:07.306+0000: 20863: info : libvirt version: 5.2.0
&gt; 2019-04-29 15:32:07.306+0000: 20863: info : hostname: koji
&gt; 2019-04-29 15:32:07.306+0000: 20863: error : virDBusGetSessionBus:169 :
&gt; internal error: Unable to get DBus session bus connection: Unable to
&gt; autolaunch a dbus-daemon without a $DISPLAY for X11
&gt; 2019-04-29 15:32:24.534+0000: 20852: error : qemuConnectOpen:1127 :
&gt; internal error: unexpected QEMU URI path '/system', try qemu:///session
&gt; 2019-04-29 15:32:24.534+0000: 20851: error : virNetSocketReadWire:1803 :
&gt; End of file while reading data: Input/output error
&gt; 
&gt; I also wonder if dbus is important, and if so, how to fix it.

This happened because qemu driver for /system doesn't initialize unless 
libvirtd's EUID == 0.

&gt; 
&gt; 
&gt;&gt; Anyway, you'll need to run libvirtd privileged, otherwise it'll get
&gt;&gt; EPERM when trying to do almost anything.
&gt; 
&gt; I'm aware of that, I want to try and see the limitations, and maybe get
&gt; around them by using capabilities?
&gt; 

Is there any problem running libvirtd as root?

Michal

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190430094503</emailId><senderName>Peter Crowther</senderName><senderEmail>peter.crowther@melandra.com</senderEmail><timestampReceived>2019-04-30 09:45:03-0400</timestampReceived><subject>Re: [libvirt-users] libvirtd via unix socket using system uri</subject><body>

[Attachment #2 (multipart/alternative)]


On Tue, 30 Apr 2019 at 10:40, Michal Privoznik &lt;mprivozn@redhat.com&gt; wrote:

&gt; Is there any problem running libvirtd as root?
&gt;
&gt; Yes, in the regulated environment in which I work!  I have to do far more
thorough threat analysis than I would do if I knew which capabilities it
had.  So far, we've accepted the extra work; but it would be wonderful to
be able to run a locked-down virtualisation environment.

Cheers,

- Peter

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;On Tue, 30 Apr 2019 at 10:40, Michal Privoznik &lt;&lt;a \
href="mailto:mprivozn@redhat.com"&gt;mprivozn@redhat.com&lt;/a&gt;&gt; wrote:&lt;br&gt;&lt;div \
class="gmail_quote"&gt;&lt;blockquote class="gmail_quote" style="margin:0px 0px 0px \
0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"&gt;Is there any problem \
running libvirtd as root?&lt;br&gt; &lt;br&gt;&lt;/blockquote&gt;&lt;div&gt;Yes, in the regulated environment \
in which I work!   I have to do far more thorough threat analysis than I would do if \
I knew which capabilities it had.   So far, we've accepted the extra work; but it \
would be wonderful to be able to run a locked-down virtualisation \
environment.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Cheers,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;- \
Peter&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190430094851</emailId><senderName>Daniel =?utf-8?B?UC4gQmVycmFuZ8Op?=</senderName><senderEmail>berrange@redhat.com</senderEmail><timestampReceived>2019-04-30 09:48:51-0400</timestampReceived><subject>Re: [libvirt-users] libvirtd via unix socket using system uri</subject><body>

On Tue, Apr 30, 2019 at 10:45:03AM +0100, Peter Crowther wrote:
&gt; On Tue, 30 Apr 2019 at 10:40, Michal Privoznik &lt;mprivozn@redhat.com&gt; wrote:
&gt; 
&gt; &gt; Is there any problem running libvirtd as root?
&gt; &gt;
&gt; &gt; Yes, in the regulated environment in which I work!  I have to do far more
&gt; thorough threat analysis than I would do if I knew which capabilities it
&gt; had.  So far, we've accepted the extra work; but it would be wonderful to
&gt; be able to run a locked-down virtualisation environment.

Libvirtd system mode will want cap_net_admin in order to setup TAP devices
and cap_sys_admin to manage disk permissions to grant QEMU access, at which
point you've lost any security benefit of running it unprivileged with
selective capabilities.

Regards,
Daniel
-- 
|: https://berrange.com      -o-    https://www.flickr.com/photos/dberrange :|
|: https://libvirt.org         -o-            https://fstop138.berrange.com :|
|: https://entangle-photo.org    -o-    https://www.instagram.com/dberrange :|

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190430095012</emailId><senderName>Daniel =?utf-8?B?UC4gQmVycmFuZ8Op?=</senderName><senderEmail>berrange@redhat.com</senderEmail><timestampReceived>2019-04-30 09:50:12-0400</timestampReceived><subject>Re: [libvirt-users] libvirtd via unix socket using system uri</subject><body>

On Tue, Apr 30, 2019 at 10:48:51AM +0100, Daniel P. Berrangé wrote:
&gt; On Tue, Apr 30, 2019 at 10:45:03AM +0100, Peter Crowther wrote:
&gt; &gt; On Tue, 30 Apr 2019 at 10:40, Michal Privoznik &lt;mprivozn@redhat.com&gt; wrote:
&gt; &gt; 
&gt; &gt; &gt; Is there any problem running libvirtd as root?
&gt; &gt; &gt;
&gt; &gt; &gt; Yes, in the regulated environment in which I work!  I have to do far more
&gt; &gt; thorough threat analysis than I would do if I knew which capabilities it
&gt; &gt; had.  So far, we've accepted the extra work; but it would be wonderful to
&gt; &gt; be able to run a locked-down virtualisation environment.
&gt; 
&gt; Libvirtd system mode will want cap_net_admin in order to setup TAP devices
&gt; and cap_sys_admin to manage disk permissions to grant QEMU access, at which
&gt; point you've lost any security benefit of running it unprivileged with
&gt; selective capabilities.

Opps, I mean cap_dac_override not cap_sys_admin but the point still stands.

Regards,
Daniel
-- 
|: https://berrange.com      -o-    https://www.flickr.com/photos/dberrange :|
|: https://libvirt.org         -o-            https://fstop138.berrange.com :|
|: https://entangle-photo.org    -o-    https://www.instagram.com/dberrange :|

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190430131508</emailId><senderName>Peter Crowther</senderName><senderEmail>peter.crowther@melandra.com</senderEmail><timestampReceived>2019-04-30 13:15:08-0400</timestampReceived><subject>Re: [libvirt-users] libvirtd via unix socket using system uri</subject><body>

[Attachment #2 (multipart/alternative)]


On Tue, 30 Apr 2019 at 10:48, Daniel P. Berrang=C3=A9 &lt;berrange@redhat.com&gt;
wrote:

&gt; On Tue, Apr 30, 2019 at 10:45:03AM +0100, Peter Crowther wrote:
&gt; &gt; On Tue, 30 Apr 2019 at 10:40, Michal Privoznik &lt;mprivozn@redhat.com&gt;
&gt; wrote:
&gt; &gt;
&gt; &gt; &gt; Is there any problem running libvirtd as root?
&gt; &gt; &gt;
&gt; &gt; &gt; Yes, in the regulated environment in which I work!  I have to do far
&gt; more
&gt; &gt; thorough threat analysis than I would do if I knew which capabilities i=
t
&gt; &gt; had.  So far, we've accepted the extra work; but it would be wonderful =
to
&gt; &gt; be able to run a locked-down virtualisation environment.
&gt;
&gt; Libvirtd system mode will want cap_net_admin in order to setup TAP device=
s
&gt; and cap_sys_admin to manage disk permissions to grant QEMU access, at whi=
ch
&gt; point you've lost any security benefit of running it unprivileged with
&gt; selective capabilities.
&gt;
&gt; Would it fail hard without these, even if using (for example) pre-created
Ceph block storage, which is our use case?  Or would it only fail when it
tried to make use of a capability that wasn't present?  My reading of
capabilities is that behaviour is indistinguishable until you get an EPERM?

I agree that CAP_DAC_OVERRIDE (per your later mail) is game over for any
system, as that allows write of any config file.  It'd be lovely to find a
way of not requiring that.  Knowing that a piece of software can't
maliciously insert kernel modules, can't write or clear audit trails, and
can't do raw I/O already considerably reduces the analysis.

- Peter

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;On Tue, 30 Apr 2019 at 10:48, Daniel P. Berrangé &lt;&lt;a \
href="mailto:berrange@redhat.com"&gt;berrange@redhat.com&lt;/a&gt;&gt; wrote:&lt;br&gt;&lt;div \
class="gmail_quote"&gt;&lt;blockquote class="gmail_quote" style="margin:0px 0px 0px \
0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"&gt;On Tue, Apr 30, 2019 \
at 10:45:03AM +0100, Peter Crowther wrote:&lt;br&gt; &gt; On Tue, 30 Apr 2019 at 10:40, \
Michal Privoznik &lt;&lt;a href="mailto:mprivozn@redhat.com" \
target="_blank"&gt;mprivozn@redhat.com&lt;/a&gt;&gt; wrote:&lt;br&gt; &gt; &lt;br&gt;
&gt; &gt; Is there any problem running libvirtd as root?&lt;br&gt;
&gt; &gt;&lt;br&gt;
&gt; &gt; Yes, in the regulated environment in which I work!   I have to do far \
more&lt;br&gt; &gt; thorough threat analysis than I would do if I knew which capabilities \
it&lt;br&gt; &gt; had.   So far, we've accepted the extra work; but it would be \
wonderful to&lt;br&gt; &gt; be able to run a locked-down virtualisation environment.&lt;br&gt;
&lt;br&gt;
Libvirtd system mode will want cap_net_admin in order to setup TAP devices&lt;br&gt;
and cap_sys_admin to manage disk permissions to grant QEMU access, at which&lt;br&gt;
point you've lost any security benefit of running it unprivileged with&lt;br&gt;
selective capabilities.&lt;br&gt;
&lt;br&gt;&lt;/blockquote&gt;&lt;div&gt;Would it fail hard without these, even if using (for example) \
pre-created Ceph block storage, which is our use case?   Or would it only fail when \
it tried to make use of a capability that wasn't present?   My reading of \
capabilities is that behaviour is indistinguishable until you get an \
EPERM?&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I agree that CAP_DAC_OVERRIDE (per your later \
mail) is game over for any system, as that allows write of any config file.   \
It'd be lovely to find a way of not requiring that.   Knowing that a piece of \
software can't maliciously insert kernel modules, can't write or clear audit \
trails, and can't do raw I/O already considerably reduces the \
analysis.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;- Peter&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190430154306</emailId><senderName>Michal Privoznik</senderName><senderEmail>mprivozn@redhat.com</senderEmail><timestampReceived>2019-04-30 15:43:06-0400</timestampReceived><subject>Re: [libvirt-users] libvirtd via unix socket using system uri</subject><body>

On 4/30/19 3:15 PM, Peter Crowther wrote:
&gt; On Tue, 30 Apr 2019 at 10:48, Daniel P. Berrangé &lt;berrange@redhat.com&gt;
&gt; wrote:
&gt; 
&gt;&gt; On Tue, Apr 30, 2019 at 10:45:03AM +0100, Peter Crowther wrote:
&gt;&gt;&gt; On Tue, 30 Apr 2019 at 10:40, Michal Privoznik &lt;mprivozn@redhat.com&gt;
&gt;&gt; wrote:
&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Is there any problem running libvirtd as root?
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Yes, in the regulated environment in which I work!  I have to do far
&gt;&gt; more
&gt;&gt;&gt; thorough threat analysis than I would do if I knew which capabilities it
&gt;&gt;&gt; had.  So far, we've accepted the extra work; but it would be wonderful to
&gt;&gt;&gt; be able to run a locked-down virtualisation environment.
&gt;&gt;
&gt;&gt; Libvirtd system mode will want cap_net_admin in order to setup TAP devices
&gt;&gt; and cap_sys_admin to manage disk permissions to grant QEMU access, at which
&gt;&gt; point you've lost any security benefit of running it unprivileged with
&gt;&gt; selective capabilities.
&gt;&gt;
&gt;&gt; Would it fail hard without these, even if using (for example) pre-created
&gt; Ceph block storage, which is our use case?  Or would it only fail when it
&gt; tried to make use of a capability that wasn't present?  My reading of
&gt; capabilities is that behaviour is indistinguishable until you get an EPERM?
&gt; 
&gt; I agree that CAP_DAC_OVERRIDE (per your later mail) is game over for any

CAP_DAC_OVERRIDE won't be required if you don't need libvirt to 
chown()/setfilecon() disk images (dynamic_ownership in qemu.conf).
CAP_SYS_ADMIN is going to be required if you want libvirt to mount some 
nfs based storage pools/create namespaces (note that libvirt creates a 
small namespace for qemu to run in - might need CAP_MKNOD then).

Long story short, why bother with /system if you can't use it and not 
use /session instead?

Michal

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190423221315</emailId><senderName>Gionatan Danti</senderName><senderEmail>g.danti@assyoma.it</senderEmail><timestampReceived>2019-04-23 22:13:15-0400</timestampReceived><subject>[libvirt-users] Autodetecting backing file properties when using vol-create-as</subject><body>

Hi all,
experimenting with vol-create-as, I think it should autodetect some data 
- filesize and backing file format, specifically. However, the current 
implementation require us to specify both filesize and backing file 
format.

Considering that qemu-img already autodetects these data, there are any 
reason for the lack of autodetect by libvirt? Should I open a bugzilla 
issue?

Below you can find a practical example of what I mean. System is CentOS 
Linux release 7.6.1810 (Core) with libvirt-4.5.0-10.el7_6.4.x86_64

Please let me know if I am missing something.
Thanks.

# create base file
[root@singularity images]# qemu-img create base.qcow2 8G -f qcow2
Formatting 'base.qcow2', fmt=qcow2 size=8589934592 cluster_size=65536 
lazy_refcounts=off refcount_bits=16
[root@singularity images]# qemu-img info base.qcow2
image: base.qcow2
file format: qcow2
virtual size: 8.0G (8589934592 bytes)
disk size: 17K
cluster_size: 65536
Format specific information:
     compat: 1.1
     lazy refcounts: false
     refcount bits: 16
     corrupt: false

# create overlay1.qcow2 via qemu-img; note how backing file format is 
autodetected ("-f qcow2" regards the overlay file itself)
[root@singularity images]# qemu-img create -b 
/var/lib/libvirt/images/base.qcow2 overlay1.qcow2 -f qcow2
Formatting 'overlay1.qcow2', fmt=qcow2 size=8589934592 
backing_file=/var/lib/libvirt/images/base.qcow2 cluster_size=65536 
lazy_refcounts=off refcount_bits=16
[root@singularity images]# qemu-img info overlay1.qcow2
image: overlay1.qcow2
file format: qcow2
virtual size: 8.0G (8589934592 bytes)
disk size: 17K
cluster_size: 65536
backing file: /var/lib/libvirt/images/base.qcow2
Format specific information:
     compat: 1.1
     lazy refcounts: false
     refcount bits: 16
     corrupt: false

# try the same with virsh vol-create-as; note how you must specify 
filesize and the backing file format is *wrong* (leading to an unusable 
overlay disk)
[root@singularity images]# virsh vol-create-as default overlay2.qcow2 8G 
--format qcow2 --backing-vol /var/lib/libvirt/images/base.qcow2
Vol overlay2.qcow2 created
[root@singularity images]# qemu-img info overlay2.qcow2
image: overlay2.qcow2
file format: qcow2
virtual size: 8.0G (8589934592 bytes)
disk size: 17K
cluster_size: 65536
backing file: /var/lib/libvirt/images/base.qcow2
backing file format: raw
Format specific information:
     compat: 0.10
     refcount bits: 16


-- 
Danti Gionatan
Supporto Tecnico
Assyoma S.r.l. - www.assyoma.it
email: g.danti@assyoma.it - info@assyoma.it
GPG public key ID: FF5F32A8

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190424045515</emailId><senderName>Sachin Soman</senderName><senderEmail>sachonline.soman@gmail.com</senderEmail><timestampReceived>2019-04-24 04:55:15-0400</timestampReceived><subject>Re: [libvirt-users] [libvirt]  JVM crashes during GC</subject><body>

[Attachment #2 (multipart/alternative)]


[Update]

Further debugging I have found that the problematic objects are the "
virConnectCredential" instances; these are created as part of the callback
procedure. If I keep these instances from getting GC'ed, there are no
issues.
Also, as part of testing with esx driver, I see two instances of "
virConnectCredential" getting created (one for user name and another one
for password). But both these instances seem to be backed by the same
native pointer; is this expected?

Thanks &amp; Regards
Sachin Soman




On Tue, Apr 23, 2019 at 5:20 PM Daniel P. Berrang=C3=A9 &lt;berrange@redhat.co=
m&gt;
wrote:

&gt; On Tue, Apr 23, 2019 at 05:02:12PM +0530, Sachin Soman wrote:
&gt; &gt; [Update]
&gt; &gt;
&gt; &gt; Instead of passing an auth callback to Connect, if I store the
&gt; credentials
&gt; &gt; in an INI file and pass the file path as authfile URI parameter, I dont
&gt; see
&gt; &gt; these errors.
&gt;
&gt; That makes it sound like some kind of memory handling bug in the JNI
&gt; native calls. I looked the libvirt-java code for the auth callback
&gt; but I don't entirely understand what JNI requires here. Probably needs
&gt; someone who is more expert in JNI to take a look at the libvirt bindings
&gt; I'm afraid.
&gt;
&gt; Regards,
&gt; Daniel
&gt; --
&gt; |: https://berrange.com      -o-
&gt; https://www.flickr.com/photos/dberrange :|
&gt; |: https://libvirt.org         -o-
&gt; https://fstop138.berrange.com :|
&gt; |: https://entangle-photo.org    -o-
&gt; https://www.instagram.com/dberrange :|
&gt;

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;[Update]&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Further debugging I have found that the \
problematic objects are the "&lt;span \
style="font-family:Menlo;font-size:12px"&gt;virConnectCredential&lt;/span&gt;" instances; \
these are created as part of the callback procedure. If I keep these instances from \
getting GC'ed, there are no issues.&lt;/div&gt;&lt;div&gt;Also, as part of testing with esx \
driver, I see two instances of "&lt;span \
style="font-family:Menlo;font-size:12px"&gt;virConnectCredential&lt;/span&gt;" getting \
created (one for user name and another one for password). But both these instances \
seem to be backed by the same native pointer; is this expected?&lt;/div&gt;





&lt;div&gt;&lt;br&gt;&lt;/div&gt;





&lt;div&gt;&lt;div&gt;&lt;div dir="ltr" class="gmail_signature" \
data-smartmail="gmail_signature"&gt;&lt;div dir="ltr"&gt;&lt;div&gt;&lt;div&gt;Thanks &amp; \
Regards&lt;br&gt;Sachin Soman&lt;br&gt;&lt;br&gt;&lt;/div&gt; &lt;div&gt;  \
&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;div class="gmail_quote"&gt;&lt;div \
dir="ltr" class="gmail_attr"&gt;On Tue, Apr 23, 2019 at 5:20 PM Daniel P. Berrangé \
&lt;&lt;a href="mailto:berrange@redhat.com"&gt;berrange@redhat.com&lt;/a&gt;&gt; \
wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote class="gmail_quote" style="margin:0px 0px 0px \
0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"&gt;On Tue, Apr 23, 2019 \
at 05:02:12PM +0530, Sachin Soman wrote:&lt;br&gt; &gt; [Update]&lt;br&gt;
&gt; &lt;br&gt;
&gt; Instead of passing an auth callback to Connect, if I store the credentials&lt;br&gt;
&gt; in an INI file and pass the file path as authfile URI parameter, I dont see&lt;br&gt;
&gt; these errors.&lt;br&gt;
&lt;br&gt;
That makes it sound like some kind of memory handling bug in the JNI&lt;br&gt;
native calls. I looked the libvirt-java code for the auth callback&lt;br&gt;
but I don't entirely understand what JNI requires here. Probably needs&lt;br&gt;
someone who is more expert in JNI to take a look at the libvirt bindings&lt;br&gt;
I'm afraid.&lt;br&gt;
&lt;br&gt;
Regards,&lt;br&gt;
Daniel&lt;br&gt;
-- &lt;br&gt;
&gt; &gt; &lt;a href="https://berrange.com" rel="noreferrer" \
&gt; &gt; target="_blank"&gt;https://berrange.com&lt;/a&gt;         -o-      &lt;a \
&gt; &gt; href="https://www.flickr.com/photos/dberrange" rel="noreferrer" \
&gt; &gt; target="_blank"&gt;https://www.flickr.com/photos/dberrange&lt;/a&gt; :|&lt;br&gt;
&gt; &gt; &lt;a href="https://libvirt.org" rel="noreferrer" \
&gt; &gt; target="_blank"&gt;https://libvirt.org&lt;/a&gt;              -o-                  &lt;a \
&gt; &gt; href="https://fstop138.berrange.com" rel="noreferrer" \
&gt; &gt; target="_blank"&gt;https://fstop138.berrange.com&lt;/a&gt; :|&lt;br&gt;
&gt; &gt; &lt;a href="https://entangle-photo.org" rel="noreferrer" \
&gt; &gt; target="_blank"&gt;https://entangle-photo.org&lt;/a&gt;      -o-      &lt;a \
&gt; &gt; href="https://www.instagram.com/dberrange" rel="noreferrer" \
&gt; &gt; target="_blank"&gt;https://www.instagram.com/dberrange&lt;/a&gt; :|&lt;br&gt;
&lt;/blockquote&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190429101734</emailId><senderName>"Weller, Lennart"</senderName><senderEmail>lennart.weller@hansemerkur.de</senderEmail><timestampReceived>2019-04-29 10:17:34-0400</timestampReceived><subject>[libvirt-users] Cloning a volume via storage XML</subject><body>

Hello everyone,

After the Bug with libvirt was found and fixed by Michal I am now
looking for a way to actually do the task I intended to do. I cannot
find any information if it is possible to clone a base-volume a la vol-
clone for ceph rbd.

As I posted in my addendum to the first post here I thought something
like this volume xml would do the job:

&lt;volume&gt;
   &lt;name&gt;coreos00.disk&lt;/name&gt;
   &lt;capacity unit="bytes"&gt;9116319744&lt;/capacity&gt;
   &lt;target&gt;
       &lt;format type="raw"&gt;&lt;/format&gt;
       &lt;permissions&gt;
           &lt;mode&gt;644&lt;/mode&gt;
       &lt;/permissions&gt;
   &lt;/target&gt;
   &lt;backingStore&gt;
       &lt;path&gt;vmdisks/coreos_2023&lt;/path&gt;
       &lt;format type="raw"&gt;&lt;/format&gt;
   &lt;/backingStore&gt;
&lt;/volume&gt;

But even with the fix applied this simply creates an empty volume of
the given size. Granted this has no information about the snapshot so I
was sceptical that this would be enough in the first place.

If the vol-clone is not an option right now via volume xml it's not
that wild as I could just patch the terraform-libvirt-provider to do
the task beforehand but I wanted to know if it there exists an option
for libvirt to do it automatically when provided with an xml. I can't
find any options in the storage xml documentation so my guess would be
no.

Kind regards,
Lennart Weller

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190425142601</emailId><senderName>Eric Blake</senderName><senderEmail>eblake@redhat.com</senderEmail><timestampReceived>2019-04-25 14:26:01-0400</timestampReceived><subject>Re: [libvirt-users] Live Disk Backup with Active Blockcommit</subject><body>

[Attachment #2 (multipart/signed)]

[Attachment #4 (multipart/mixed)]


On 4/25/19 8:59 AM, Wolf wrote:
&gt; Hi!
&gt; 
&gt; I was reading the Wiki about 'Live Disk Backup with Active Blockcommit, \
&gt; https://wiki.libvirt.org/page/Live-disk-backup-with-active-blockcommit and see that \
&gt; example shown seems to be using two different names for the same file. 
&gt; First showing the current block device in use:
&gt; $ virsh domblklist vm1
&gt; Target     Source
&gt; ------------------------------------------------
&gt; vda        /export/images/base.qcow2 
&gt; 
&gt; Then copying the same file for backup:
&gt; $ cp /export/images/base.img /export/images/copy.img
&gt; 
&gt; =&gt; Is there are reason why the block device first is called 'base.qcow2' and then \
&gt; 'base.img'?

Nope. Fixed to favor .img throughout, to emphasize that the base image
can be ANY format, not just qcow2.

&gt; 
&gt; 
&gt; I also saw another name that seems to be wrong based on the context.
&gt; It doesn't have the same implication as my earlier example, as the name of the \
&gt;                 overlay file is not written in the command itself, but still:
&gt; ------
&gt; $ virsh snapshot-create-as --domain vm1 guest-state1 \
&gt; --diskspec vda,file=/export/images/overlay1.qcow2 \
&gt; --disk-only --atomic
&gt; 
&gt; Then:
&gt; $ virsh domblklist vm1
&gt; Target     Source
&gt; ------------------------------------------------
&gt; vda        /export/images/overlay.qcow2
&gt; 
&gt; Now that the backup is finished, perform active blockcommit by live mergning \
&gt;                 contents of 'overlay1' into base . . . ."
&gt; ------
&gt; 
&gt; =&gt; Here it seems like the overlay file first is called ''overlay1.qcow2" and the ' \
&gt; virsh domblklist vm1' command shows that it is actually called: 'overlay.qcow2' And \
&gt; then back to ''overlay1 in the following text: 'mergning contents of 'overlay1' \
&gt; into base' (Where 'mergning' is spelled wrong, but that doesn't affect the logic).

Also fixed, here preferring overlay1.qcow2 since it is possible to
create a chain of more than one overlay.

&gt; 
&gt; 
&gt; =&gt; Do I understand all this correctly?

Yes, thanks for spotting the issues and reporting them.

-- 
Eric Blake, Principal Software Engineer
Red Hat, Inc.           +1-919-301-3226
Virtualization:  qemu.org | libvirt.org


["signature.asc" (application/pgp-signature)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190425220422</emailId><senderName>Laine Stump</senderName><senderEmail>laine@redhat.com</senderEmail><timestampReceived>2019-04-25 22:04:22-0400</timestampReceived><subject>Re: [libvirt-users] PCI passthrough and abstraction</subject><body>

On 4/25/19 10:14 AM, Mauricio Tavares wrote:
&gt; So I am reading through , and am wondering what is the difference between
&gt; 
&gt; &lt;hostdev mode='subsystem' type='pci' managed='yes'&gt;
&gt; &lt;hostdev&gt;
&gt; 
&gt; and
&gt; 
&gt; &lt;interface type='hostdev' managed='yes'&gt;
&gt; &lt;/interface&gt;
&gt; 
&gt; if I am trying to give full access to a NIC? Which one exposes more of the card?

I also answered this on IRC, but just in case someone is looking through 
the email archives and comes across this message:

There are a couple of differences between &lt;hostdev&gt; and &lt;interface 
type='hostdev'&gt;:

1)  &lt;hostdev&gt; will work with "many" different devices (as long as they 
are a PCI endpoint device, and don't share an IOMMU group with other 
devices that must remain in use by the host), but &lt;interface 
type='hostdev'&gt; can only be used for a PCI device that is a Virtual 
Function (VF) of an SR-IOV capable network card (if you're unsure 
whether or not your device qualifies, then it almost definitely *doesn't*

2) In preparation for using VFIO device assignment to assign the device 
to a guest, both types of device will be automatically unbound from 
their host driver and bound to the vfio-pci driver *if "managed='yes'" 
is set*. In addition, &lt;interface type='hostdev'&gt; will set the MAC 
address (and optionally the vlan tag) on the VF device before assigning 
it to the guest. This isn't done when you use &lt;hostdev&gt;, the result 
being that your guest will end up with a network device that has a 
random MAC address that is different each time it is started.

So if you are assigning VFs from an SR-IOV netcard, then you *really* 
want to use &lt;interface type='hostdev'&gt;. For all other cases of PCI 
device assignment (including netcards that aren't SR-IOV VFs), you 
*must* use &lt;hostdev&gt;.

As for "managed='yes'" - if you are never using the device directly on 
the host, it's highly recommended that you bind the device to the 
vfio-pci driver during the host bootup, and set "managed='no'" in the 
XML - probably 80% or more of the bugs we encounter with device 
assignment happen when we're unbinding the device from the host net (or 
whatever) driver, and binding it to vfio-pci or vice-versa - all sorts 
of timing issues that are essentially out of our control.


&gt; On Wed, Apr 24, 2019 at 1:13 PM Mauricio Tavares &lt;raubvogel@gmail.com&gt; wrote:
&gt;&gt;
&gt;&gt; When you pass a device in the pci chain (after virsh
&gt;&gt; nodedev-dettach'ing it from host) to the guest, how much is passed
&gt;&gt; without being emulated/abstracted?
&gt; 
&gt; _______________________________________________
&gt; libvirt-users mailing list
&gt; libvirt-users@redhat.com
&gt; https://www.redhat.com/mailman/listinfo/libvirt-users
&gt; 

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190426143033</emailId><senderName>Jim Fehlig</senderName><senderEmail>jfehlig@suse.com</senderEmail><timestampReceived>2019-04-26 14:30:33-0400</timestampReceived><subject>Re: [libvirt-users] 5.2.0 xen and maxGrantFrames</subject><body>

On 4/26/19 4:20 AM, Christoph wrote:
&gt; error: Failed to create domain from /etc/libvirt/libxl/satan_pvh.xml
&gt; error: internal error: libxenlight failed to create new domain
&gt; 'satan.chao5.int'

Is there a more helpful error message in /var/log/libvirt/libxl/libxl-driver.log 
or the associated domain log?

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190429072736</emailId><senderName>Michal Privoznik</senderName><senderEmail>mprivozn@redhat.com</senderEmail><timestampReceived>2019-04-29 07:27:36-0400</timestampReceived><subject>Re: [libvirt-users] Libvirt pool cannot see or create rbd clones</subject><body>

On 4/26/19 11:53 AM, Weller, Lennart wrote:
&gt; Hello everyone,
&gt; 
&gt; To increase my odds of finding an answer I also wanted to ask here.
&gt; This is my post from serverfault[1] in verbatim:
&gt; 
&gt; While trying to get a cloned disk running from my OS snapshot I run
&gt; into the problem that Libvirt cannot see existing images cloned from a
&gt; snapshot. Created via:
&gt; 
&gt; # rbd -p vmdisks clone vmdisks/coreos_2023@base vmdisks/coreos00.disk
&gt; 
&gt; The base image has the one snapshot 'base' and is protected. The cloned
&gt; disk is created just fine:
&gt; 
&gt; # rbd -p vmdisks info coreos00.disk
&gt; rbd image 'coreos00.disk':
&gt;          size 8.49GiB in 2174 objects
&gt;          order 22 (4MiB objects)
&gt;          block_name_prefix: rbd_data.48a99c6b8b4567
&gt;          format: 2
&gt;          features: layering
&gt;          flags:
&gt;          create_timestamp: Thu Apr 25 14:46:52 2019
&gt;          parent: vmdisks/coreos_2023@base
&gt;          overlap: 8.49GiB
&gt; 
&gt; I temporarily have Libvirt configured with a rbd pool that uses the
&gt; ceph admin user. But I cannot see the cloned disk. Just the parent:
&gt; 
&gt; virsh # vol-list --pool rbd_image_root
&gt;   Name                 Path
&gt; ---------------------------------------------------------------------
&gt; ---------
&gt;   coreos_2023 vmdisks/coreos_2023
&gt; 
&gt; If I try to create the cloned image from within virsh I run into the
&gt; following issue:
&gt; 
&gt; virsh # vol-clone --pool rbd_image_root coreos_2023 coreos00.disk
&gt; error: Failed to clone vol from coreos_2023
&gt; error: failed to iterate RBD snapshot coreos_2023@base: Operation not
&gt; permitted
&gt; 
&gt; Note that this pool uses the Ceph admin user which makes the Operation
&gt; not permitted a tad odd.
&gt; 
&gt; Am I missing a configuration option here that would allow for the pool
&gt; to use clones? I can't find any information on this in the
&gt; documentation so far. And the source code of libvirt looks like it
&gt; should support both features.
&gt; 
&gt; Versions:
&gt; 
&gt; Libvirt Machine: Ubuntu 18.04
&gt; Compiled against library: libvirt 4.0.0
&gt; Using library: libvirt 4.0.0
&gt; Using API: QEMU 4.0.0
&gt; Running hypervisor: QEMU 2.11.1
&gt; 
&gt; Ceph Machine: openSUSE Leap 42.3
&gt; Ceph 12.2.5
&gt; 

I wonder if this is a libvirt bug. Looks like it. The error comes from 
rbd_diff_iterate() (or rbd_diff_iterate2 if compiled against newer 
librbd). Anyway, a callback is passed to the itreate() function and from 
librbd code it looks like if the callback returns a negative value then 
an error is signalized from the iterate() function. Well, we're passing 
a callback that does nothing but return an error. This might be a 
possible fix then:

diff --git i/src/storage/storage_backend_rbd.c w/src/storage/storage_backend_rbd.c
index f8c968e682..08f8123678 100644
--- i/src/storage/storage_backend_rbd.c
+++ w/src/storage/storage_backend_rbd.c
@@ -1038,7 +1038,7 @@ virStorageBackendRBDIterateCb(uint64_t offset ATTRIBUTE_UNUSED,
      * searching any further.
      */
     *(int*) arg = 1;
-    return -1;
+    return 0;
 }
 
 static int



Can you please give it a try?

Thanks,
Michal

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190429134153</emailId><senderName>Michal Privoznik</senderName><senderEmail>mprivozn@redhat.com</senderEmail><timestampReceived>2019-04-29 13:41:53-0400</timestampReceived><subject>Re: [libvirt-users] Error connecting to hypervisor</subject><body>

On 4/29/19 2:48 PM, Sukrit Bhatnagar wrote:
&gt; On Sat, 27 Apr 2019 at 12:53, Michal Prívozník &lt;mprivozn@redhat.com&gt; wrote:
&gt;&gt;
&gt;&gt; On 4/23/19 11:56 PM, Sukrit Bhatnagar wrote:
&gt;&gt;&gt; Hi,
&gt;&gt;&gt;
&gt;&gt;&gt; I have compiled and installed libvirt from git checkout
&gt;&gt;&gt; and started libvirtd service. The version is 5.3.0 and
&gt;&gt;&gt; I have done system-wide installation.
&gt;&gt;&gt;
&gt;&gt;&gt; When I do a `virsh list`, I get the following error:
&gt;&gt;&gt; error: failed to connect to the hypervisor
&gt;&gt;&gt; error: Unable to encode message header
&gt;&gt;
&gt;&gt; This is very suspicious. The error is reported because the function that
&gt;&gt; is generated by rpcgen and supposed to encode messages failed. Looks
&gt;&gt; like rpcgen generated some unusable code? What's your rpcgen? I have
&gt;&gt;
&gt;&gt; glibc-rpcgen-2.26.9000-41.fc28.x86_64
&gt;&gt;
&gt;&gt; and everything's working for me. BTW if you try compiling from 5.2.0
&gt;&gt; tarball the error should go away because we ship generated sources in there.
&gt; 
&gt; I am using Fedora 29 and glibc-rpcgen is not available.
&gt; I have these packages installed for rpc:
&gt; rpcgen-1.4-1.fc29.x86_64 (rpcsvc-proto)
&gt; libtirpc-1.1.4-2.rc2.fc29.x86_64
&gt; libtirpc-devel-1.1.4-2.rc2.fc29.x86_64

Ah, looks like libtirpc bug then. Can you please get a stack trace and 
open a bug?

Michal

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190430151332</emailId><senderName>Daniel =?utf-8?B?UC4gQmVycmFuZ8Op?=</senderName><senderEmail>berrange@redhat.com</senderEmail><timestampReceived>2019-04-30 15:13:32-0400</timestampReceived><subject>Re: [libvirt-users] Running all my virtual machines with a low priority</subject><body>

On Tue, Apr 30, 2019 at 04:24:08PM +0200, R. Diez wrote:
&gt; Hi all:
&gt; 
&gt; I have an Ubuntu 18.04 system. What is the easiest way to run all of my virtual \
&gt; machines with a low priority? Say a "nice" level of 15.

You can use the  &lt;vcpusched&gt;  (and related elements) to control
the schedular nice level up or down

  https://libvirt.org/formatdomain.html#elementsCPUTuning

Regards,
Daniel
-- 
&gt; &gt; https://berrange.com      -o-    https://www.flickr.com/photos/dberrange :|
&gt; &gt; https://libvirt.org         -o-            https://fstop138.berrange.com :|
&gt; &gt; https://entangle-photo.org    -o-    https://www.instagram.com/dberrange :|

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20190430155344</emailId><senderName>Peter Crowther</senderName><senderEmail>peter.crowther@melandra.com</senderEmail><timestampReceived>2019-04-30 15:53:44-0400</timestampReceived><subject>Re: [libvirt-users] libvirtd via unix socket using system uri</subject><body>

[Attachment #2 (multipart/alternative)]


On Tue, 30 Apr 2019 at 16:43, Michal Privoznik &lt;mprivozn@redhat.com&gt; wrote:

&gt; Long story short, why bother with /system if you can't use it and not
&gt; use /session instead?
&gt; 
&gt; Because according to the FAQ, /session isn't suitable for my use:

   - You will definitely want to use qemu:///system if your VMs are acting
   as servers. VM autostart on host boot only works for 'system' [Yes, my VMs
   are acting as servers]
   - the root libvirtd instance has necessary permissions to use proper
   networkings via bridges or virtual networks. [Yes, I use OVS, with quite a
   complex bridge+VLAN system configured at boot]
   - qemu:///session has a serious drawback: [...] the only out of the box
   network option is qemu's usermode networking, which has nonobvious
   limitations, so its usage is discouraged.

(Source:
https://wiki.libvirt.org/page/FAQ#What_is_the_difference_between_qemu:.2F.2F.2Fsystem_and_qemu:.2F.2F.2Fsession.3F_Which_one_should_I_use.3F
 )

So I have to use /system, according to the FAQ.  But it'd be nice to nail
the daemon down to reduce the attack surface.

- Peter


[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;On Tue, 30 Apr 2019 at 16:43, Michal Privoznik &lt;&lt;a \
href="mailto:mprivozn@redhat.com"&gt;mprivozn@redhat.com&lt;/a&gt;&gt; wrote:&lt;br&gt;&lt;div \
class="gmail_quote"&gt;&lt;blockquote class="gmail_quote" style="margin:0px 0px 0px \
0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"&gt;Long story short, why \
bother with /system if you can't use it and not &lt;br&gt; use /session instead?&lt;br&gt;
&lt;br&gt;&lt;/blockquote&gt;&lt;div&gt;Because according to the FAQ, /session isn't suitable for \
my use:&lt;/div&gt;&lt;div&gt; &lt;ul&gt;&lt;li&gt;You will definitely want to use qemu:///system if your VMs \
are acting as servers. VM autostart on host boot only works for 'system' 
[Yes, my VMs are acting as servers]&lt;/li&gt;&lt;li&gt;the root libvirtd instance has necessary \
permissions to use proper networkings via bridges or virtual networks. [Yes, I use \
OVS, with quite a complex bridge+VLAN system configured at \
boot]&lt;/li&gt;&lt;li&gt;qemu:///session has a serious drawback: [...] the only out of the box \
network option is qemu's usermode networking, which has nonobvious limitations, \
so its usage is discouraged. &lt;/li&gt;&lt;/ul&gt;

&lt;/div&gt;&lt;div&gt;(Source: &lt;a \
href="https://wiki.libvirt.org/page/FAQ#What_is_the_difference_between_qemu:.2F.2F.2Fs \
ystem_and_qemu:.2F.2F.2Fsession.3F_Which_one_should_I_use.3F"&gt;https://wiki.libvirt.org \
/page/FAQ#What_is_the_difference_between_qemu:.2F.2F.2Fsystem_and_qemu:.2F.2F.2Fsession.3F_Which_one_should_I_use.3F&lt;/a&gt;)&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;So \
I have to use /system, according to the FAQ.   But it'd be nice to nail the \
daemon down to reduce the attack surface.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;- \
Peter&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190430161957</emailId><senderName>"Weller, Lennart"</senderName><senderEmail>lennart.weller@hansemerkur.de</senderEmail><timestampReceived>2019-04-30 16:19:57-0400</timestampReceived><subject>Re: [libvirt-users] Cloning a volume via storage XML</subject><body>

I guess this not an option then. I'll just do a
virStorageVolCreateXMLFrom for now.

Maybe libvirt should print an error that backingStore is not a
supported feature for rbd?

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190305100928</emailId><senderName>Daniel =?utf-8?B?UC4gQmVycmFuZ8Op?=</senderName><senderEmail>berrange@redhat.com</senderEmail><timestampReceived>2019-03-05 10:09:28-0400</timestampReceived><subject>Re: [libvirt-users] How do I close a console connection?</subject><body>

On Mon, Mar 04, 2019 at 04:54:23PM -0500, Lars Kellogg-Stedman wrote:
&gt; I'm working on (re-) implementing serial console support in virtualbmc
&gt; [1], and one of the issues I'm hitting right now is that after
&gt; establishing a console connection via...
&gt; 
&gt;     self._stream = self._conn.newStream(libvirt.VIR_STREAM_NONBLOCK)
&gt;     self._domain.openConsole(None, self._stream, 0)
&gt; 
&gt; ...I can't figure out how to close the console.  Subsequent calls to
&gt; openConsole fail because "a console connection is already open". I
&gt; thought maybe I should close the stream, but that doesn't appear to be
&gt; possible (there is a finish method, but it just tells me that "this
&gt; function is not supported by the connection driver").

You need to call either  Finish or Abort. Either should work if
the openConsole call was successful, though Abort would be more
typical for a console connection since there's on real concept
of completion there.

Regards,
Daniel
-- 
|: https://berrange.com      -o-    https://www.flickr.com/photos/dberrange :|
|: https://libvirt.org         -o-            https://fstop138.berrange.com :|
|: https://entangle-photo.org    -o-    https://www.instagram.com/dberrange :|

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190306154338</emailId><senderName>Eric Blake</senderName><senderEmail>eblake@redhat.com</senderEmail><timestampReceived>2019-03-06 15:43:38-0400</timestampReceived><subject>Re: [libvirt-users] virsh hangs when backup jobs run on the kvm host</subject><body>

[Attachment #2 (multipart/signed)]

[Attachment #4 (multipart/mixed)]


On 3/2/19 9:23 PM, Zhan Adlun wrote:
&gt; Hi,
&gt; Has anyone met the same problem that virsh hangs when there are some backup jobs \
&gt; running on the kvm host? I use dirty bitmap supported by qemu to do backups every 6 \
&gt; minitues. About a few hours later, I ran 'virsh list', It hung.  Then I stopped the \
&gt; backup jobs £¬nothing was getting better. I had checked the libvirt logs £¬but \
&gt; found nothing useful .

How are you using dirty bitmaps?  As my new virDomainBackupBegin() API
has not landed yet, I suspect you are using virQemuMonitorCommand()
(virsh qemu-monitor-command) backdoors, which is explicitly unsupported
(that is, if it breaks, you get to debug it - it exists for development
work, and while 'query-*' QMP commands should be safe, commands that
alter qemu state such as kicking off a backup job may break libvirt
expectations), and which is WHY I'm trying to get incremental backup API
officially supported.

A precise sequence of commands that you issued in order to reproduce the
virsh hang may be useful in debugging this.

&gt; Maybe the high I/O caused the problem? or there are connection number limits when \
&gt; using virsh, because I use virsh to check the backup jobs are still running every \
&gt; 10 seconds? My os version is ' Ubuntu 12.04 LTS   Release: 12.04   Codename: \
&gt; precise,Linux version 4.1.0-generic (gcc version 4.6.3 (Ubuntu/Linaro \
&gt; 4.6.3-1ubuntu5) ) #1 SMP Wed Nov 9 02:04:23 CST 2016'. KVM version is 'QEMU \
&gt; emulator version 2.7.1(Debian 1:2.7+dfsg-3)'. Hoping for you reply. Thanks!

Hmm, my incremental backup API will require qemu 4.0; there have been a
number of fixes in the qemu bitmap tracking that have landed since qemu
2.7.1. It could also be that you've hit an actual qemu bug where the QMP
monitor has gone unresponsive.

-- 
Eric Blake, Principal Software Engineer
Red Hat, Inc.           +1-919-301-3226
Virtualization:  qemu.org | libvirt.org


["signature.asc" (application/pgp-signature)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190307021737</emailId><senderName>Zhan Adlun</senderName><senderEmail>zhanhouliang@outlook.com</senderEmail><timestampReceived>2019-03-07 02:17:37-0400</timestampReceived><subject>[libvirt-users] =?gb2312?b?u9i4tDogUmU6ICB2aXJzaCBoYW5ncyB3aGVu?= =?gb2312?b?IGJhY2t1cCBqb2JzIHJ1biB</subject><body>

[Attachment #2 (text/plain)]

Actually,I use the backdoors as you have mentioned. I use 'virsh \
qemu-monitor-command' to submit backup jobs and  use 'virsh qemu-monitor-event DOMAIN \
--timestamp --loop'  to monitor the jobs through the QMP protocol. for example :
to do a full backup
virsh qemu-monitor-command DOMAIN --pretty { "execute": "transaction",
  "arguments": {
    "actions": [
      {"type": "block-dirty-bitmap-add",
       "data": {"node": "drive0", "name": "bitmap0"} },
      {"type": "drive-backup",
       "data": {"device": "drive0", "target": "/path/to/full_backup.img",
                "sync": "full", "format": "qcow2"} }
    ]
  }
}
refer to https://wiki.qemu.org/Features/IncrementalBackup

Unfortunately, the minitor process 'virsh qemu-monitor-event DOMAIN --timestamp \
--loop' was failed to be killed. A few hours later ,there were hundreds of monitor \
processes running(about 200-300), whice caused the 'virsh list' hung. After I have \
killed the processes,  'virsh list' works well.



________________________________
zhanhouliang@outlook.com

·¢¼þÈË£º Eric Blake&lt;mailto:eblake@redhat.com&gt;
·¢ËÍÊ±¼ä£º 2019-03-06 23:43
ÊÕ¼þÈË£º Zhan Adlun&lt;mailto:zhanhouliang@outlook.com&gt;; \
libvirt-users@redhat.com&lt;mailto:libvirt-users@redhat.com&gt; Ö÷Ìâ£º Re: [libvirt-users] \
virsh hangs when backup jobs run on the kvm host On 3/2/19 9:23 PM, Zhan Adlun wrote:
&gt; Hi,
&gt; Has anyone met the same problem that virsh hangs when there are some backup jobs \
&gt; running on the kvm host? I use dirty bitmap supported by qemu to do backups every 6 \
&gt; minitues. About a few hours later, I ran 'virsh list', It hung.  Then I stopped the \
&gt; backup jobs £¬nothing was getting better. I had checked the libvirt logs £¬but \
&gt; found nothing useful .

How are you using dirty bitmaps?  As my new virDomainBackupBegin() API
has not landed yet, I suspect you are using virQemuMonitorCommand()
(virsh qemu-monitor-command) backdoors, which is explicitly unsupported
(that is, if it breaks, you get to debug it - it exists for development
work, and while 'query-*' QMP commands should be safe, commands that
alter qemu state such as kicking off a backup job may break libvirt
expectations), and which is WHY I'm trying to get incremental backup API
officially supported.

A precise sequence of commands that you issued in order to reproduce the
virsh hang may be useful in debugging this.

&gt; Maybe the high I/O caused the problem? or there are connection number limits when \
&gt; using virsh, because I use virsh to check the backup jobs are still running every \
&gt; 10 seconds? My os version is ' Ubuntu 12.04 LTS   Release: 12.04   Codename: \
&gt; precise,Linux version 4.1.0-generic (gcc version 4.6.3 (Ubuntu/Linaro \
&gt; 4.6.3-1ubuntu5) ) #1 SMP Wed Nov 9 02:04:23 CST 2016'. KVM version is 'QEMU \
&gt; emulator version 2.7.1(Debian 1:2.7+dfsg-3)'. Hoping for you reply. Thanks!

Hmm, my incremental backup API will require qemu 4.0; there have been a
number of fixes in the qemu bitmap tracking that have landed since qemu
2.7.1. It could also be that you've hit an actual qemu bug where the QMP
monitor has gone unresponsive.

--
Eric Blake, Principal Software Engineer
Red Hat, Inc.           +1-919-301-3226
Virtualization:  qemu.org | libvirt.org


[Attachment #3 (text/html)]

&lt;html&gt;
&lt;head&gt;
&lt;meta http-equiv="Content-Type" content="text/html; charset=gb2312"&gt;
&lt;style&gt;body { line-height: 1.5; }blockquote { margin-top: 0px; margin-bottom: 0px; \
margin-left: 0.5em; }body { font-size: 10.5pt; font-family: 'Microsoft YaHei UI'; \
color: rgb(0, 0, 0); line-height: 1.5; }&lt;/style&gt; &lt;/head&gt;
&lt;body&gt;
&lt;div&gt;&lt;span&gt;&lt;/span&gt;Actually,I use the &lt;span style="font-size: 10.5pt; \
line-height: 1.5; background-color: transparent;"&gt;backdoors as you have \
mentioned&lt;/span&gt;&lt;span style="font-size: 10.5pt; line-height: 1.5; background-color: \
transparent;"&gt;. I use '&lt;/span&gt;&lt;span style="font-size: 10.5pt; font-family: 'Microsoft \
YaHei UI', Tahoma; line-height: normal; background-color: transparent;"&gt;virsh  \
qemu-monitor-command&lt;/span&gt;&lt;span style="font-size: 10.5pt; line-height: 1.5; \
background-color: transparent;"&gt;' to submit backup jobs and  use '&lt;/span&gt;&lt;span \
style="font-size: 10.5pt; line-height: 1.5; background-color: \
transparent;"&gt;virsh qemu-monitor-event DOMAIN --timestamp --loop&lt;/span&gt;&lt;span \
style="font-size: 10.5pt; line-height: 1.5; background-color: transparent;"&gt;'  \
 to monitor the jobs through the QMP protocol. &lt;/span&gt;&lt;/div&gt; &lt;div&gt;&lt;span \
style="font-size: 10.5pt; line-height: 1.5; background-color: transparent;"&gt;for \
example :&lt;/span&gt;&lt;/div&gt; &lt;div&gt;&lt;span style="font-size: 10.5pt; line-height: 1.5; \
background-color: transparent;"&gt;to do a full backup&lt;/span&gt;&lt;/div&gt; &lt;div&gt;&lt;span \
microsoftyaheiui?;font-size:14px;color:rgb(0,0,0);background-color:rgba(0,font-weight:normal;font-style:normal;text-decoration:none;?=""&gt;&lt;span \
style="font-family: 'Microsoft YaHei UI', Tahoma; line-height: normal; font-size: \
10.5pt; background-color: transparent;"&gt;virsh  qemu-monitor-command DOMAIN \
--pretty &lt;/span&gt;{ "execute": "transaction",&lt;br&gt; \
  "arguments": {&lt;br&gt; \
    "actions": [&lt;br&gt; \
      {"type": "block-dirty-bitmap-add",&lt;br&gt;
        "data": {"node":&amp;n \
bsp;"drive0", "name": "bitmap0"} },&lt;br&gt; \
      {"type": "drive-backup",&lt;br&gt;
        "data": {"device": \
 "drive0", "target": "/path/to/full_backup.img",&lt;br&gt;
               &amp; \
nbsp; "sync": "full", "format": "qcow2"} }&lt;br&gt;
     ]&lt;br&gt;
  }&lt;br&gt;
}&lt;/span&gt;&lt;/div&gt;
&lt;div&gt;&lt;span microsoftyaheiui?;font-size:14px;color:rgb(0,0,0);background-color:rgba(0,font-weight:normal;font-style:normal;text-decoration:none;?=""&gt;refer \
to https://wiki.qemu.org/Features/IncrementalBackup&lt;/span&gt;&lt;/div&gt; &lt;div&gt;&lt;span \
style="font-size: 10.5pt; line-height: 1.5; background-color: transparent;"&gt;&lt;br&gt; \
&lt;/span&gt;&lt;/div&gt; &lt;div&gt;&lt;span style="font-size: 10.5pt; line-height: 1.5; \
background-color: transparent;"&gt;Unfortunately, the minitor process &lt;/span&gt;&lt;span \
style="font-size: 10.5pt; line-height: 1.5; background-color: \
transparent;"&gt;'&lt;/span&gt;&lt;span style="font-size: 10.5pt; line-height: 1.5; \
background-color: transparent;"&gt;virsh qemu-monitor-event DOMAIN --timestamp --loop&lt;/span&gt;&lt;span \
style="font-size: 10.5pt; line-height: 1.5; background-color: transparent;"&gt;'  was \
failed to be killed. A few hours later ,there were hundreds of \
monitor &lt;/span&gt;&lt;span style="font-size: 10.5pt; line-height: 1.5; \
background-color: transparent;"&gt;processes running(about 200-300), whice caused the \
'virsh list' hung. After I have killed the  processes, &lt;/span&gt;&lt;span \
style="font-size: 10.5pt; line-height: 1.5; background-color: \
transparent;"&gt; &lt;/span&gt;&lt;span style="font-size: 10.5pt; line-height: 1.5; \
background-color: transparent;"&gt;'virsh list' works well. &lt;/span&gt;&lt;/div&gt; &lt;div&gt;&lt;br&gt;
&lt;/div&gt;
&lt;div&gt;&lt;br&gt;
&lt;/div&gt;
&lt;div&gt;&lt;br&gt;
&lt;/div&gt;
&lt;hr style="width: 210px; height: 1px;" color="#b5c4df" size="1" align="left"&gt;
&lt;div&gt;&lt;span&gt;
&lt;div style="MARGIN: 10px; FONT-FAMILY: verdana; FONT-SIZE: 10pt"&gt;
&lt;div&gt;zhanhouliang@outlook.com&lt;/div&gt;
&lt;/div&gt;
&lt;/span&gt;&lt;/div&gt;
&lt;blockquote style="margin-Top: 0px; margin-Bottom: 0px; margin-Left: 0.5em"&gt;
&lt;div&gt; &lt;/div&gt;
&lt;div style="border:none;border-top:solid #B5C4DF 1.0pt;padding:3.0pt 0cm 0cm 0cm"&gt;
&lt;div style="PADDING-RIGHT: 8px; PADDING-LEFT: 8px; FONT-SIZE: \
12px;FONT-FAMILY:tahoma;COLOR:#000000; BACKGROUND: #efefef; PADDING-BOTTOM: 8px; \
PADDING-TOP: 8px"&gt; &lt;div&gt;&lt;b&gt;·¢¼þÈË£º&lt;/b&gt; &lt;a href="mailto:eblake@redhat.com"&gt;Eric \
Blake&lt;/a&gt;&lt;/div&gt; &lt;div&gt;&lt;b&gt;·¢ËÍÊ±¼ä£º&lt;/b&gt; 2019-03-06 23:43&lt;/div&gt;
&lt;div&gt;&lt;b&gt;ÊÕ¼þÈË£º&lt;/b&gt; &lt;a href="mailto:zhanhouliang@outlook.com"&gt;Zhan Adlun&lt;/a&gt;; \
&lt;a href="mailto:libvirt-users@redhat.com"&gt; libvirt-users@redhat.com&lt;/a&gt;&lt;/div&gt;
&lt;div&gt;&lt;b&gt;Ö÷Ìâ£º&lt;/b&gt; Re: [libvirt-users] virsh hangs when backup jobs run on the \
kvm host&lt;/div&gt; &lt;/div&gt;
&lt;/div&gt;
&lt;div&gt;
&lt;div&gt;On 3/2/19 9:23 PM, Zhan Adlun wrote:&lt;/div&gt;
&lt;div&gt;&gt; Hi,&lt;/div&gt;
&lt;div&gt;&gt;     Has anyone met the same problem that virsh hangs \
when there are some backup jobs running on the kvm host? I use dirty bitmap supported \
by qemu to do backups every 6 minitues. About a few hours later, I ran 'virsh list', \
It hung.  Then I stopped the  backup jobs £¬nothing was getting better. I had \
checked the libvirt logs £¬but found nothing useful .&lt;/div&gt; &lt;div&gt; &lt;/div&gt;
&lt;div&gt;How are you using dirty bitmaps?  As my new virDomainBackupBegin() \
API&lt;/div&gt; &lt;div&gt;has not landed yet, I suspect you are using \
virQemuMonitorCommand()&lt;/div&gt; &lt;div&gt;(virsh qemu-monitor-command) backdoors, which is \
explicitly unsupported&lt;/div&gt; &lt;div&gt;(that is, if it breaks, you get to debug it - it \
exists for development&lt;/div&gt; &lt;div&gt;work, and while 'query-*' QMP commands should be \
safe, commands that&lt;/div&gt; &lt;div&gt;alter qemu state such as kicking off a backup job may \
break libvirt&lt;/div&gt; &lt;div&gt;expectations), and which is WHY I'm trying to get \
incremental backup API&lt;/div&gt; &lt;div&gt;officially supported.&lt;/div&gt;
&lt;div&gt; &lt;/div&gt;
&lt;div&gt;A precise sequence of commands that you issued in order to reproduce the&lt;/div&gt;
&lt;div&gt;virsh hang may be useful in debugging this.&lt;/div&gt;
&lt;div&gt; &lt;/div&gt;
&lt;div&gt;&gt;     Maybe the high I/O caused the problem? or there are \
connection number limits when using virsh, because I use virsh to check the backup \
jobs are still running every 10 seconds?&lt;/div&gt; &lt;div&gt;&gt;     My \
os version is ' Ubuntu 12.04 LTS   Release: 12.04   Codename: \
precise,Linux version 4.1.0-generic (gcc version 4.6.3 (Ubuntu/Linaro 4.6.3-1ubuntu5) \
) #1 SMP Wed Nov 9 02:04:23 CST 2016'. KVM version is 'QEMU emulator version \
2.7.1(Debian 1:2.7+dfsg-3)'.  Hoping for you reply. Thanks!&lt;/div&gt;
&lt;div&gt; &lt;/div&gt;
&lt;div&gt;Hmm, my incremental backup API will require qemu 4.0; there have been a&lt;/div&gt;
&lt;div&gt;number of fixes in the qemu bitmap tracking that have landed since qemu&lt;/div&gt;
&lt;div&gt;2.7.1. It could also be that you've hit an actual qemu bug where the QMP&lt;/div&gt;
&lt;div&gt;monitor has gone unresponsive.&lt;/div&gt;
&lt;div&gt; &lt;/div&gt;
&lt;div&gt;-- &lt;/div&gt;
&lt;div&gt;Eric Blake, Principal Software Engineer&lt;/div&gt;
&lt;div&gt;Red Hat, Inc.           \
+1-919-301-3226&lt;/div&gt; &lt;div&gt;Virtualization:  qemu.org | libvirt.org&lt;/div&gt;
&lt;div&gt; &lt;/div&gt;
&lt;/div&gt;
&lt;/blockquote&gt;
&lt;/body&gt;
&lt;/html&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
--===============2871013661367078565==--


</body></email><email><emailId>20190307094949</emailId><senderName>Daniel =?utf-8?B?UC4gQmVycmFuZ8Op?=</senderName><senderEmail>berrange@redhat.com</senderEmail><timestampReceived>2019-03-07 09:49:49-0400</timestampReceived><subject>Re: [libvirt-users] why attach-disk can't be effective when the guest is booting</subject><body>

On Thu, Mar 07, 2019 at 05:15:49PM +0800, Jianan Gao wrote:
&gt; Hi,
&gt;       When i use "virsh attach-device rhel disk.xml" when the guest is
&gt; booting,then i can't find the disk in the guest after booting.But i can
&gt; find it by "virsh domblklist rhel",and when i want to detach it from the
&gt; guest and use "virsh detach-disk rhel vdb", i still can find the disk by
&gt; "virsh domblklist rhel"
&gt;     The disk.xml is like:
&gt; &lt;disk type="file" device="disk"&gt;
&gt; &lt;driver name='qemu' type='raw' cache='none'/&gt;
&gt; &lt;source file="/var/lib/libvirt/images/foo.img"/&gt;
&gt; &lt;target dev="vdb" bus="virtio"/&gt;
&gt; &lt;/disk&gt;
&gt; 
&gt; Libvirt-release is 5.0.0.4 and the qemu-kvm release is 3.1.0
&gt; 
&gt; So i want to know why it failed to attach-disk when booting,and why we design
&gt; in this way.Maybe it's better to return failure if we can't use it like
&gt; this.

Hotplug uses ACPI and thus relies on the guest OS to be processing ACPI
hotplug requests. If the OS hasn't initialized sufficiently then it is
possible it might miss th ACPI event, though I'd hope well written OS
would cope wit hthis &amp; catch up later. In any guest its a guest OS problem.

Regards,
Daniel
-- 
|: https://berrange.com      -o-    https://www.flickr.com/photos/dberrange :|
|: https://libvirt.org         -o-            https://fstop138.berrange.com :|
|: https://entangle-photo.org    -o-    https://www.instagram.com/dberrange :|

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190303032345</emailId><senderName>Zhan Adlun</senderName><senderEmail>zhanhouliang@outlook.com</senderEmail><timestampReceived>2019-03-03 03:23:45-0400</timestampReceived><subject>[libvirt-users] virsh hangs when backup jobs run on the kvm host</subject><body>

[Attachment #2 (text/plain)]

Hi,
    Has anyone met the same problem that virsh hangs when there are some backup jobs \
running on the kvm host? I use dirty bitmap supported by qemu to do backups every 6 \
minitues. About a few hours later, I ran 'virsh list', It hung.  Then I stopped the \
backup jobs £¬nothing was getting better. I had checked the libvirt logs £¬but found \
nothing useful .  Maybe the high I/O caused the problem? or there are connection \
number limits when using virsh, because I use virsh to check the backup jobs are \
still running every 10 seconds?  My os version is ' Ubuntu 12.04 LTS   Release: 12.04 \
Codename: precise,Linux version 4.1.0-generic (gcc version 4.6.3 (Ubuntu/Linaro \
4.6.3-1ubuntu5) ) #1 SMP Wed Nov 9 02:04:23 CST 2016'. KVM version is 'QEMU emulator \
version 2.7.1(Debian 1:2.7+dfsg-3)'. Hoping for you reply. Thanks!


[Attachment #3 (text/html)]

&lt;html&gt;
&lt;head&gt;
&lt;meta http-equiv="Content-Type" content="text/html; charset=gb2312"&gt;
&lt;style type="text/css" style="display:none;"&gt; P {margin-top:0;margin-bottom:0;} \
&lt;/style&gt; &lt;/head&gt;
&lt;body dir="ltr"&gt;
&lt;div style="font-family:Calibri,Arial,Helvetica,sans-serif; font-size:12pt; \
color:rgb(0,0,0)"&gt; Hi, &lt;br&gt;
&lt;/div&gt;
&lt;div style="font-family:Calibri,Arial,Helvetica,sans-serif; font-size:12pt; \
color:rgb(0,0,0)"&gt; &lt;/div&gt;
&lt;div style="font-family:Calibri,Arial,Helvetica,sans-serif; font-size:12pt; \
color:rgb(0,0,0)"&gt;     Has anyone met the same problem that virsh \
hangs when there are some backup jobs running on the kvm host? I use dirty bitmap \
supported by qemu to do backups every 6 minitues. About a few hours later, I ran \
'virsh list', It hung.  Then I stopped the backup  jobs £¬nothing was getting \
better. I had checked the libvirt logs £¬but found nothing useful . &lt;br&gt;
&lt;/div&gt;
&lt;div style="font-family:Calibri,Arial,Helvetica,sans-serif; font-size:12pt; \
color:rgb(0,0,0)"&gt;     Maybe the high I/O caused the problem? or there \
are connection number limits when using virsh, because I use virsh to check the \
backup jobs are still running every 10 seconds?&lt;/div&gt; &lt;div \
style="font-family:Calibri,Arial,Helvetica,sans-serif; font-size:12pt; \
color:rgb(0,0,0)"&gt;     My os version is ' Ubuntu 12.04 LTS   \
Release: 12.04   &lt;span&gt;Codename: precise,Linux version 4.1.0-generic (gcc \
version 4.6.3 (Ubuntu/Linaro 4.6.3-1ubuntu5) ) #1 SMP Wed Nov 9 02:04:23 CST \
2016&lt;/span&gt;'. KVM version is 'QEMU emulator version 2.7.1(Debian  1:2.7+dfsg-3)'. \
Hoping for you reply. Thanks!&lt;br&gt; &lt;/div&gt;
&lt;div style="font-family:Calibri,Arial,Helvetica,sans-serif; font-size:12pt; \
color:rgb(0,0,0)"&gt;     &lt;br&gt;
&lt;/div&gt;
&lt;div style="font-family:Calibri,Arial,Helvetica,sans-serif; font-size:12pt; \
color:rgb(0,0,0)"&gt;     &lt;br&gt;
&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
--===============9086793961184977883==--


</body></email><email><emailId>20190307091549</emailId><senderName>Jianan Gao</senderName><senderEmail>jgao@redhat.com</senderEmail><timestampReceived>2019-03-07 09:15:49-0400</timestampReceived><subject>[libvirt-users] why attach-disk can't be effective when the guest is booting</subject><body>

[Attachment #2 (multipart/alternative)]


Hi,
      When i use "virsh attach-device rhel disk.xml" when the guest is
booting,then i can't find the disk in the guest after booting.But i can
find it by "virsh domblklist rhel",and when i want to detach it from the
guest and use "virsh detach-disk rhel vdb", i still can find the disk by
"virsh domblklist rhel"
    The disk.xml is like:
&lt;disk type="file" device="disk"&gt;
&lt;driver name='qemu' type='raw' cache='none'/&gt;
&lt;source file="/var/lib/libvirt/images/foo.img"/&gt;
&lt;target dev="vdb" bus="virtio"/&gt;
&lt;/disk&gt;

Libvirt-release is 5.0.0.4 and the qemu-kvm release is 3.1.0

So i want to know why it failed to attach-disk when booting,and why we design
in this way.Maybe it's better to return failure if we can't use it like
this.

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;&lt;div&gt;Hi,&lt;/div&gt;&lt;div&gt;           When i use \
"virsh attach-device rhel disk.xml" when the guest is booting,then i \
can't find the disk in the guest after booting.But i can find it by "virsh \
domblklist rhel",and when i want to detach it from the guest and use "virsh \
detach-disk rhel vdb", i still can find the disk by "virsh domblklist \
rhel"&lt;/div&gt;&lt;div&gt;       The disk.xml is like:&lt;/div&gt;&lt;div&gt;&lt;disk \
type="file" device="disk"&gt;&lt;br&gt;&lt;driver name='qemu' \
type='raw' cache='none'/&gt;&lt;br&gt;&lt;source \
file="/var/lib/libvirt/images/foo.img"/&gt;&lt;br&gt;&lt;target \
dev="vdb" bus="virtio"/&gt;&lt;br&gt;&lt;/disk&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Libvirt-release \
is 5.0.0.4 and the qemu-kvm release is 3.1.0&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;So i want to \
know why it failed to attach-disk when booting,and why we &lt;span \
class="gmail-tlid-translation gmail-translation"&gt;&lt;span title="" class="gmail-"&gt;design \
in this way.Maybe it's better to return failure if we can't use it like \
this.&lt;br&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190307225533</emailId><senderName>Maximilian Schieder</senderName><senderEmail>maximilian.schieder@posteo.net</senderEmail><timestampReceived>2019-03-07 22:55:33-0400</timestampReceived><subject>[libvirt-users] Development of Libvirt PHP</subject><body>

Hey,
I want to ask if LibVirt PHP will be develop further or if it is deprecated.


Kind regards,
Maxi

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190301013122</emailId><senderName>Shawn Anastasio</senderName><senderEmail>shawn@anastas.io</senderEmail><timestampReceived>2019-03-01 01:31:22-0400</timestampReceived><subject>[libvirt-users] Obtaining the PID of a domain's QEMU process from C</subject><body>

Hello all,

I'm currently writing a C program that uses the libvirt API and I need a 
way to obtain the pid of a given domain's QEMU process.

Specifically, I'm writing an ivshmem server that uses SO_PEERCRED to get 
the pid of clients that connect to it, and I would like to use that pid 
to look up the domain in libvirt to determine the proper domain ID to 
return to the client.

As far as I can tell, libvirt doesn't expose this information in an easy 
to access manner. Of course it is possible to call `ps` and grep for the 
information I'm looking for, but I was hoping for a cleaner solution.

If anybody knows how to do this, advice would be greatly appreciated.

Thanks in advance,
Shawn

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190311090516</emailId><senderName></senderName><senderEmail>wferi</senderEmail><timestampReceived>2019-03-11 09:05:16-0400</timestampReceived><subject>[libvirt-users] How to insert a dummy NIC</subject><body>

Hi,

I have to host (with KVM) an appliance which does not use its second and
third NIC.  They have to be present in the guest, but they'd better stay
totally disconnected from anything in the host.  "Second" and "third"
apparently means bus order.  Let's consider virtio devices only.  I think
the best technical solution is adding -device virtio-net-pci,addr=0x3 and
similar options to the KVM command line, without any corresponding
-netdev options (better ideas welcome).  QEMU emits "Warning: nic
virtio-net-pci.2 has no peer" messages, but that's expected.  I can even
do this much using the &lt;qemu:commandline&gt; element, but libvirt assigns
the 0x3 address to other virtio devices, leading to collision.  Is there
a way to "reserve" a bus address for such manually added devices without
assigning explicit addresses to all other devices in the configuration?

Things I also tried (and found inadequate):

* Using "generic ethernet connection" for the dummy NICs.  Close, but
  requires extra permissions for accessing /dev/net/tun, and technically
  feels a little inferior to using a peerless network device like above.

* TCP tunnel server.  Even more inferior, does not require extra
  permissions but leaves even looser ends (listening sockets).  Also, the
  RelaxNG grammal does not let me specify a model for this interface
  type, so maintaining bus order with respect to the virtio interfaces is
  impossible.  A grammar bug?

* Using a dummy VLAN in the bridge.  This is what I temporarily settled
  for, but this requires global agreement and still technically inferior,
  so I'd like to move away.

* A &lt;network&gt; without forwarding.  Still inferior, and also requires
  configuration sharing across the host cluster.
-- 
Thanks,
Feri

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190312221040</emailId><senderName>Lars Lindstrom</senderName><senderEmail>lars.lindstrom@gmx.at</senderEmail><timestampReceived>2019-03-12 22:10:40-0400</timestampReceived><subject>[libvirt-users] KVM-Docker-Networking using TAP and MACVLAN</subject><body>

﻿Hi everyone!

I have the following requirement: I need to connect a set of Docker
containers to a KVM. The containers shall be isolated in a way that they
cannot communicate to each other without going through the KVM, which
will act as router/firewall. For this, I thought about the following
simple setup (as opposed to a more complex one involving a bridge with
vlan_filtering and a seperate VLAN for each container):

+------------------------------------------------------------------+
| Host |
|  +-------------+ +----------------------+---+
|  | KVM         |                      | Docker           +-&gt; | a |
|  |  +----------+     +----------+     +--------------+ +---+
|  |  | NIC lan0 | &lt;-&gt; | DEV tap0 | &lt;-&gt; | NET macvlan0 | &lt;-+-&gt; | b |
|  |  +----------+     +----------+     +--------------+ +---+
|  |             |                      |                  +-&gt; | c |
|  +-------------+ +----------------------+---+
| |
+------------------------------------------------------------------+

NIC lan0:
    &lt;interface type='direct'&gt;
       &lt;source dev='tap0' mode='vepa'/&gt;
       &lt;model type='virtio'/&gt;
    &lt;/interface&gt;
    *** Welcome to pfSense 2.4.4-RELEASE-p1 (amd64) on pfSense ***
    LAN (lan) -&gt; vtnet0 -&gt; v4: 10.0.20.1/24

DEV tap0:
    [root@server ~]# ip tuntap add tap0 mode tap
    [root@server ~]# ip l set tap0 up
    [root@server ~]# ip l show tap0
    49: tap0: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc
fq_codel state DOWN mode DEFAULT group default qlen 1000
        link/ether ce:9e:95:89:33:5f brd ff:ff:ff:ff:ff:ff
    [root@server ~]# virsh start pfsense
    [root@server opt]# ip l show tap0
    49: tap0: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc
fq_codel state DOWN mode DEFAULT group default qlen 1000
        link/ether ce:9e:95:89:33:5f brd ff:ff:ff:ff:ff:ff

NET macvlan0:
    [root@server ~]# docker network create --driver macvlan
--subnet=10.0.20.0/24 --gateway=10.0.20.1 --opt parent=tap0 macvlan0

CNT a:
    [root@server ~]# docker run --network macvlan0 --ip=10.0.20.2 -it
alpine /bin/sh
    / # ping -c 4 10.0.20.1
    PING 10.0.20.1 (10.0.20.1): 56 data bytes
    --- 10.0.20.1 ping statistics ---
    4 packets transmitted, 0 packets received, 100% packet loss
    / # ifconfig
    eth0      Link encap:Ethernet  HWaddr 02:42:0A:00:14:02
              inet addr:10.0.20.2  Bcast:10.0.20.255 Mask:255.255.255.0
              UP BROADCAST MULTICAST  MTU:1500  Metric:1
              RX packets:0 errors:0 dropped:0 overruns:0 frame:0
              TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
              collisions:0 txqueuelen:0
              RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)
    lo        Link encap:Local Loopback
              inet addr:127.0.0.1  Mask:255.0.0.0
              UP LOOPBACK RUNNING  MTU:65536  Metric:1
              RX packets:4 errors:0 dropped:0 overruns:0 frame:0
              TX packets:4 errors:0 dropped:0 overruns:0 carrier:0
              collisions:0 txqueuelen:1000
              RX bytes:448 (448.0 B)  TX bytes:448 (448.0 B)
    / # ip r
    default via 10.0.20.1 dev eth0
    10.0.20.0/24 dev eth0 scope link  src 10.0.20.2

CNT b:
    [root@server ~]# docker run --network macvlan0 --ip=10.0.20.2 -it
alpine /bin/ping 10.0.20.1
    PING 10.0.20.1 (10.0.20.1): 56 data bytes

CNT c:
    [root@server ~]# docker run --network macvlan0 --ip=10.0.20.2 -it
alpine /bin/ping 10.0.20.1
    PING 10.0.20.1 (10.0.20.1): 56 data bytes


The KVM is not reachable from within a Docker container (during the test
firewalld was disabled) and vice versa. The first thing I noticed is
that tap0 remains NO-CARRIER and DOWN, even though the KVM has been
started. Shouldn't the link come up as soon as the KVM is started (and
thus is connected to the tap0 device)? The next thing that looked
strange to me - even though interface and routing configuration within
the container seemingly looks OK, there are 0 packets TX/RX on eth0
after pinging the KVM (but 4 on lo instead).

Any idea on how to proceed from here? Is this a valid setup and a valid
libvirt configuration for that setup?


Thanks and br, Lars


_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190313105220</emailId><senderName>lejeczek</senderName><senderEmail>peljasz@yahoo.co.uk</senderEmail><timestampReceived>2019-03-13 10:52:20-0400</timestampReceived><subject>[libvirt-users] vlan tagging for openVSwitch</subject><body>

[Attachment #2 (text/plain)]

hi everyone,

I'm trying to get vlans tagged in libvirt as my switch's end (yes
traffic will be leaving the host and into network switches) allows only
tagged vlans.

But with network as such:

...

  &lt;portgroup name='vlan-55'&gt;
    &lt;vlan trunk='yes'&gt;
      &lt;tag id='55'/&gt;
    &lt;/vlan&gt;
  &lt;/portgroup&gt;
&lt;/network&gt;

and guest as:

    &lt;interface type='network'&gt;
      &lt;mac address='52:54:00:15:00:26'/&gt;
      &lt;source network='ovsbr0' portgroup='vlan-55'/&gt;
      &lt;model type='virtio'/&gt;
    &lt;/interface&gt;

When the guest is fully initialized vSwitch shows: 

...

_uuid               : b3c130db-fa84-49f8-9cf5-824ec8cf3b81
bond_downdelay      : 0
bond_fake_iface     : false
bond_mode           : []
bond_updelay        : 0
external_ids        : {}
fake_bridge         : false
interfaces          : [35c0a914-a21a-43d7-9f63-adacffbb62bc]
lacp                : []
mac                 : []
name                : "ovsbr0"
other_config        : {}
qos                 : []
statistics          : {}
status              : {}
tag                 : []
trunks              : []
vlan_mode           : []

No tags, no trunks, no vlan mode???

Is there something I missed (in docs though I sroogled exensively) ?

I also tried to add mode='trunk' into &lt;tag id='55'/&gt; and virsh does not
complains but next time I edit the guest the mode bit is gone.

My vSwitch's bridge has only one phys iface (into the net switch) and I
tried setting that iface with tag/no tag, with vlan_mode/no vlan_mode
but if guest is up with above libvirt's vSwitch initialization then
guest cannot ping net switch no matter the setting for phys iface.

I'm on Centos 7.6 with libvirt-4.5.0-10.el7_6.4.x86_64 &amp;
openvswitch-2.0.0-7.el7.x86_64.

What can be the problem here?

many thanks, L.







["pEpkey.asc" (application/pgp-keys)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190315125206</emailId><senderName>Suresh Babu Kandukuru</senderName><senderEmail>suresh.babu.kandukuru@oracle.com</senderEmail><timestampReceived>2019-03-15 12:52:06-0400</timestampReceived><subject>[libvirt-users] KVM - full system ( disk+memory) snapshot by excluding the raw disks</subject><body>

[Attachment #2 (multipart/alternative)]


Hi There , 

  I  have KVM VM with 4 qcow2 disks and 2 raw disks .  when I  try to take full \
system snapshot by excluding raw disks . it is give below error . can you help me how \
to fix this ?.  or is it possible to take full system snapshot in this case .?.

 

When I change XMl as internal snapshots for raw disks . It throws a message snapshot \
are not supported on war disks . 

 

[root@localhost oscgpkg-7eee963550ba9e5b]# virsh snapshot-create --domain oscg2 \
--xmlfile oscgsnapshot.xml

error: unsupported configuration: disk 'vda' must use snapshot mode 'internal'

 

[root@localhost oscgpkg-7eee963550ba9e5b]#

 

 

 

 

[root@localhost oscgpkg-7eee963550ba9e5b]# cat oscgsnapshot.xml

&lt;domainsnapshot&gt;

  &lt;description&gt;oscg snapshot&lt;/description&gt;

   &lt;memory snapshot='internal'/&gt;

  &lt;disks&gt;

    &lt;disk name='hda' snapshot='internal'&gt;

    &lt;/disk&gt;

    &lt;disk name='hdb' snapshot='internal'&gt;

    &lt;/disk&gt;

    &lt;disk name='hdc' snapshot='internal'&gt;

    &lt;/disk&gt;

    &lt;disk name='hdd' snapshot='internal'&gt;

    &lt;/disk&gt;

    &lt;disk name='vda' snapshot='no'&gt;

    &lt;/disk&gt;

    &lt;disk name='vdb' snapshot='no'&gt;

    &lt;/disk&gt;

  &lt;/disks&gt;

&lt;/domainsnapshot&gt;

 


[Attachment #5 (text/html)]

&lt;html xmlns:v="urn:schemas-microsoft-com:vml" \
xmlns:o="urn:schemas-microsoft-com:office:office" \
xmlns:w="urn:schemas-microsoft-com:office:word" \
xmlns:m="http://schemas.microsoft.com/office/2004/12/omml" \
xmlns="http://www.w3.org/TR/REC-html40"&gt;&lt;head&gt;&lt;meta http-equiv=Content-Type \
content="text/html; charset=us-ascii"&gt;&lt;meta name=Generator content="Microsoft Word 15 \
(filtered medium)"&gt;&lt;style&gt;&lt;!-- /* Font Definitions */
@font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
/* Style Definitions */
p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0in;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Calibri",sans-serif;}
a:link, span.MsoHyperlink
	{mso-style-priority:99;
	color:#0563C1;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{mso-style-priority:99;
	color:#954F72;
	text-decoration:underline;}
span.EmailStyle17
	{mso-style-type:personal-compose;
	font-family:"Calibri",sans-serif;
	color:windowtext;}
.MsoChpDefault
	{mso-style-type:export-only;
	font-family:"Calibri",sans-serif;}
@page WordSection1
	{size:8.5in 11.0in;
	margin:1.0in 1.0in 1.0in 1.0in;}
div.WordSection1
	{page:WordSection1;}
--&gt;&lt;/style&gt;&lt;!--[if gte mso 9]&gt;&lt;xml&gt;
&lt;o:shapedefaults v:ext="edit" spidmax="1026" /&gt;
&lt;/xml&gt;&lt;![endif]--&gt;&lt;!--[if gte mso 9]&gt;&lt;xml&gt;
&lt;o:shapelayout v:ext="edit"&gt;
&lt;o:idmap v:ext="edit" data="1" /&gt;
&lt;/o:shapelayout&gt;&lt;/xml&gt;&lt;![endif]--&gt;&lt;/head&gt;&lt;body lang=EN-US link="#0563C1" \
vlink="#954F72"&gt;&lt;div class=WordSection1&gt;&lt;p class=MsoNormal&gt;Hi There , \
&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;&lt;p class=MsoNormal&gt;  I  have KVM VM with 4 qcow2 disks \
and 2 raw disks .  when I  try to take full system snapshot by excluding \
raw disks . it is give below error . can you help me how to fix this ?.  or is \
it possible to take full system snapshot in this case .?.&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;&lt;p \
class=MsoNormal&gt;&lt;o:p&gt; &lt;/o:p&gt;&lt;/p&gt;&lt;p class=MsoNormal&gt;When I change XMl as internal \
snapshots for raw disks . It throws a message snapshot are not supported on war disks \
. &lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;&lt;p class=MsoNormal&gt;&lt;o:p&gt; &lt;/o:p&gt;&lt;/p&gt;&lt;p \
class=MsoNormal&gt;[root@localhost oscgpkg-7eee963550ba9e5b]# virsh snapshot-create \
--domain oscg2 --xmlfile oscgsnapshot.xml&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;&lt;p class=MsoNormal&gt;&lt;span \
style='background:yellow;mso-highlight:yellow'&gt;error: unsupported configuration: disk \
'vda' must use snapshot mode 'internal'&lt;/span&gt;&lt;span \
style='color:red'&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;&lt;p class=MsoNormal&gt;&lt;o:p&gt; &lt;/o:p&gt;&lt;/p&gt;&lt;p \
class=MsoNormal&gt;[root@localhost oscgpkg-7eee963550ba9e5b]#&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;&lt;table \
class=MsoNormalTable border=0 cellspacing=0 cellpadding=0 align=left \
style='border-collapse:collapse;margin-left:6.75pt;margin-right:6.75pt'&gt;&lt;tr&gt;&lt;td \
width=241 valign=top style='width:180.9pt;padding:0in 5.4pt 0in 5.4pt'&gt;&lt;p \
class=MsoNormal style='mso-element:frame;mso-element-frame-hspace:9.0pt;mso-element-wr \
ap:around;mso-element-anchor-vertical:paragraph;mso-element-anchor-horizontal:margin;mso-element-top:7.55pt;mso-height-rule:exactly'&gt;&lt;b&gt;&lt;span \
style='font-size:10.0pt;font-family:"Arial",sans-serif;color:black'&gt;&lt;o:p&gt; &lt;/o:p&gt;&lt;/span&gt;&lt;/b&gt;&lt;/p&gt;&lt;/td&gt;&lt;td \
width=319 valign=top style='width:239.4pt;padding:0in 5.4pt 0in 5.4pt'&gt;&lt;p \
class=MsoNormal style='mso-element:frame;mso-element-frame-hspace:9.0pt;mso-element-wr \
ap:around;mso-element-anchor-vertical:paragraph;mso-element-anchor-horizontal:margin;mso-element-top:7.55pt;mso-height-rule:exactly'&gt;&lt;b&gt;&lt;span \
style='font-size:10.0pt;font-family:"Arial",sans-serif'&gt;&lt;o:p&gt; &lt;/o:p&gt;&lt;/span&gt;&lt;/b&gt;&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p \
class=MsoNormal&gt;&lt;o:p&gt; &lt;/o:p&gt;&lt;/p&gt;&lt;p class=MsoNormal&gt;&lt;o:p&gt; &lt;/o:p&gt;&lt;/p&gt;&lt;p \
class=MsoNormal&gt;[root@localhost oscgpkg-7eee963550ba9e5b]# cat \
oscgsnapshot.xml&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;&lt;p \
class=MsoNormal&gt;&lt;domainsnapshot&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;&lt;p class=MsoNormal&gt;  \
&lt;description&gt;oscg snapshot&lt;/description&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;&lt;p \
class=MsoNormal&gt;   &lt;memory snapshot='internal'/&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;&lt;p \
class=MsoNormal&gt;  &lt;disks&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;&lt;p \
class=MsoNormal&gt;    &lt;disk name='hda' \
snapshot='internal'&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;&lt;p class=MsoNormal&gt;    \
&lt;/disk&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;&lt;p class=MsoNormal&gt;    &lt;disk name='hdb' \
snapshot='internal'&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;&lt;p class=MsoNormal&gt;    \
&lt;/disk&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;&lt;p class=MsoNormal&gt;    &lt;disk name='hdc' \
snapshot='internal'&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;&lt;p class=MsoNormal&gt;    \
&lt;/disk&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;&lt;p class=MsoNormal&gt;    &lt;disk name='hdd' \
snapshot='internal'&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;&lt;p class=MsoNormal&gt;    \
&lt;/disk&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;&lt;p class=MsoNormal&gt;    &lt;disk name='vda' \
snapshot='no'&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;&lt;p class=MsoNormal&gt;    \
&lt;/disk&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;&lt;p class=MsoNormal&gt;    &lt;disk name='vdb' \
snapshot='no'&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;&lt;p class=MsoNormal&gt;    \
&lt;/disk&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;&lt;p class=MsoNormal&gt;  &lt;/disks&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;&lt;p \
class=MsoNormal&gt;&lt;/domainsnapshot&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;&lt;p \
class=MsoNormal&gt;&lt;o:p&gt; &lt;/o:p&gt;&lt;/p&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190320185010</emailId><senderName>Mircea Husz</senderName><senderEmail>mirceahusz@yahoo.com</senderEmail><timestampReceived>2019-03-20 18:50:10-0400</timestampReceived><subject>[libvirt-users] virsh snapshot-create-as: change umask on snapshots</subject><body>

I scripted the creation of snapshots and it works fine. Now I'd like to run the \
script as non-root.

virsh snapshot-create-as --domain hq-live-v01 \
     --name snappy \
     --diskspec vda,file=/var/lib/libvirt/images/hq-live-v01.snappy,snapshot=external \
                \
     --diskspec vdb,file=/var/lib/libvirt/images/hq-live-storage.snappy,snapshot=external \
                \
     --disk-only --quiesce --atomic

This fragment creates the snapshots, but get created with mode 0600:
-rw-------  1 qemu qemu     393216 Mar 19 17:08 hq-live-storage.snappy
-rw-------  1 qemu qemu    1048576 Mar 19 17:08 hq-live-v01.snappy

The user account is in the libvirt group and has permissions to do everything except \
delete the files created by the snapshot, all I need is to get the snapshots created \
with 0660 mode.

This is on a Centos 7.6 installation.  What knobs do I need to turn to control the \
umask?

Thanks,
-Mike


_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20190315073328</emailId><senderName>Harsh Gondaliya</senderName><senderEmail>harshgondaliya_vinodbhai@srmuniv.edu.in</senderEmail><timestampReceived>2019-03-15 07:33:28-0400</timestampReceived><subject>[libvirt-users] Error starting domain: internal error: Unable to add port vnet0 to OVS bridge br0</subject><body>

[Attachment #2 (multipart/alternative)]


I have installed OVS from sources using the installation steps mentioned on
this link: http://docs.openvswitch.org/en/latest/intro/install/general/

I had installed libvrt, KVM, QEMU and all the necessary packages using
apt-get. My KVM-QEMU hypervisor has been running well.

To add a VM with the port attached to OVS bridge I changed the XML domain
file as per the instructions on this page:
http://docs.openvswitch.org/en/latest/howto/libvirt/

But the when I start the VM using the Virtual Machine Manager I get
the following error:
*Error starting domain: internal error: Unable to add port vnet0 to OVS
bridge br0*
Traceback (most recent call last):
  File "/usr/share/virt-manager/virtManager/asyncjob.py", line 90, in
cb_wrapper
    callback(asyncjob, *args, **kwargs)
  File "/usr/share/virt-manager/virtManager/asyncjob.py", line 126, in tmpcb
    callback(*args, **kwargs)
  File "/usr/share/virt-manager/virtManager/libvirtobject.py", line 83, in
newfn
    ret = fn(self, *args, **kwargs)
  File "/usr/share/virt-manager/virtManager/domain.py", line 1402, in
startup
    self._backend.create()
  File "/usr/lib/python2.7/dist-packages/libvirt.py", line 1035, in create
    if ret == -1: raise libvirtError ('virDomainCreate() failed', dom=self)
libvirtError: internal error: Unable to add port vnet0 to OVS bridge br0

My output for ovs-vsctl show:
3c28f516-dd5c-43cf-bea1-7c068668d1f6
    Bridge "br0"
        Port "enp0s31f6"
            Interface "enp0s31f6"
        Port "br0"
            Interface "br0"
                type: internal
    ovs_version: "2.11.90"

*However, when OVS is installed using apt-get rather than installing from
source or tarball, all these steps work very well.*

Please guide me why this error is occurring. I am using Ubuntu 16.04 LTS as
my host machine. Many users are facing this issue and they have reported it
on OVS and other mailing lists. But, none is able to give a satisfactory
solution.

Regards,
Harsh

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;&lt;div \
dir="ltr"&gt;I have installed OVS from sources using the installation steps mentioned on \
this link:  &lt;a href="http://docs.openvswitch.org/en/latest/intro/install/general/"&gt;http://docs.openvswitch.org/en/latest/intro/install/general/&lt;/a&gt;&lt;/div&gt;&lt;div \
dir="ltr"&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I had installed libvrt, KVM, QEMU and all the necessary \
packages using apt-get. My KVM-QEMU hypervisor has been running \
well.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;To add a VM with the port attached to OVS bridge I \
changed the XML domain file as per the instructions on this page:  &lt;a \
href="http://docs.openvswitch.org/en/latest/howto/libvirt/"&gt;http://docs.openvswitch.org/en/latest/howto/libvirt/&lt;/a&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;But \
the when I start the VM using the Virtual Machine Manager I get the  following error: \
&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;b&gt;Error starting domain: internal error: Unable to add port vnet0 to \
OVS bridge br0&lt;/b&gt;&lt;/div&gt;&lt;div&gt;Traceback (most recent call last):&lt;/div&gt;&lt;div&gt;   File \
"/usr/share/virt-manager/virtManager/asyncjob.py", line 90, in \
cb_wrapper&lt;/div&gt;&lt;div&gt;      callback(asyncjob, *args, **kwargs)&lt;/div&gt;&lt;div&gt;   File \
"/usr/share/virt-manager/virtManager/asyncjob.py", line 126, in \
tmpcb&lt;/div&gt;&lt;div&gt;      callback(*args, **kwargs)&lt;/div&gt;&lt;div&gt;   File \
"/usr/share/virt-manager/virtManager/libvirtobject.py", line 83, in \
newfn&lt;/div&gt;&lt;div&gt;      ret = fn(self, *args, **kwargs)&lt;/div&gt;&lt;div&gt;   File \
"/usr/share/virt-manager/virtManager/domain.py", line 1402, in \
startup&lt;/div&gt;&lt;div&gt;      self._backend.create()&lt;/div&gt;&lt;div&gt;   File \
"/usr/lib/python2.7/dist-packages/libvirt.py", line 1035, in \
create&lt;/div&gt;&lt;div&gt;      if ret == -1: raise libvirtError ('virDomainCreate() \
failed', dom=self)&lt;/div&gt;&lt;div&gt;libvirtError: internal error: Unable to add port \
vnet0 to OVS bridge br0&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;My output for ovs-vsctl \
show:&lt;/div&gt;&lt;div&gt;&lt;div&gt;3c28f516-dd5c-43cf-bea1-7c068668d1f6&lt;/div&gt;&lt;div&gt;      Bridge \
"br0"&lt;/div&gt;&lt;div&gt;            Port "enp0s31f6"&lt;/div&gt;&lt;div&gt;           \
Interface "enp0s31f6"&lt;/div&gt;&lt;div&gt;            Port "br0"&lt;/div&gt;&lt;div&gt; \
Interface "br0"&lt;/div&gt;&lt;div&gt;                        type: internal&lt;/div&gt;&lt;div&gt; \
ovs_version: "2.11.90"&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;However, when OVS \
is installed using apt-get rather than installing from source or tarball, all these \
steps work very well.&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;Please guide me why this \
error is occurring. I am using Ubuntu 16.04 LTS as my host machine. Many users are \
facing this issue and they  have reported it on OVS and other mailing lists. But, \
none is able to give a satisfactory \
solution.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Regards,&lt;/div&gt;&lt;div&gt;Harsh&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;




_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190319183957</emailId><senderName>Laine Stump</senderName><senderEmail>laine@redhat.com</senderEmail><timestampReceived>2019-03-19 18:39:57-0400</timestampReceived><subject>Re: [libvirt-users] Error starting domain: internal error: Unable to add port vnet0 to OVS bridge br</subject><body>

On 3/15/19 3:21 AM, Harsh Gondaliya wrote:
&gt; I have installed OVS from sources using the installation steps mentioned 
&gt; on this link: http://docs.openvswitch.org/en/latest/intro/install/general/
&gt; 
&gt; I had installed libvrt, KVM, QEMU and all the necessary packages using 
&gt; apt-get. My KVM-QEMU hypervisor has been running well.
&gt; 
&gt; To add a VM with the port attached to OVS bridge I changed the XML 
&gt; domain file as per the instructions on this page: 
&gt; http://docs.openvswitch.org/en/latest/howto/libvirt/
&gt; 
&gt; But the when I start the VM using the Virtual Machine Manager I get 
&gt; the following error:
&gt; *Error starting domain: internal error: Unable to add port vnet0 to OVS 
&gt; bridge br0*

libvirt is creating a tap device, then running ovs-vsctl to attempt to 
attach it to the configured switch. To see what command is run, and what 
error is output, add this to your /etc/libvirt/libvirt.d:

   log_filters="1:util.command 1:util.netdevopenvswitch"
   log_outputs="1:syslog:libvirtd.service"

and restart the libvirt service, then attempt to start your guest while 
watching the system logs. You will see an ovs-vsctl command run by 
virCommandRunAsync. That command and its output should give you a clue 
to what is missing from the locally-built openvswitch vs the official 
package installed with apt-get.


&gt; Traceback (most recent call last):
&gt;    File "/usr/share/virt-manager/virtManager/asyncjob.py", line 90, in 
&gt; cb_wrapper
&gt;      callback(asyncjob, *args, **kwargs)
&gt;    File "/usr/share/virt-manager/virtManager/asyncjob.py", line 126, in 
&gt; tmpcb
&gt;      callback(*args, **kwargs)
&gt;    File "/usr/share/virt-manager/virtManager/libvirtobject.py", line 83, 
&gt; in newfn
&gt;      ret = fn(self, *args, **kwargs)
&gt;    File "/usr/share/virt-manager/virtManager/domain.py", line 1402, in 
&gt; startup
&gt;      self._backend.create()
&gt;    File "/usr/lib/python2.7/dist-packages/libvirt.py", line 1035, in create
&gt;      if ret == -1: raise libvirtError ('virDomainCreate() failed', dom=self)
&gt; libvirtError: internal error: Unable to add port vnet0 to OVS bridge br0
&gt; 
&gt; My output for ovs-vsctl show:
&gt; 3c28f516-dd5c-43cf-bea1-7c068668d1f6
&gt;      Bridge "br0"
&gt;          Port "enp0s31f6"
&gt;              Interface "enp0s31f6"
&gt;          Port "br0"
&gt;              Interface "br0"
&gt;                  type: internal
&gt;      ovs_version: "2.11.90"
&gt; 
&gt; *However, when OVS is installed using apt-get rather than installing 
&gt; from source or tarball, all these steps work very well.*
&gt; *
&gt; *
&gt; Please guide me why this error is occurring. I am using Ubuntu 16.04 LTS 
&gt; as my host machine. Many users are facing this issue and they have 
&gt; reported it on OVS and other mailing lists. But, none is able to give a 
&gt; satisfactory solution.
&gt; 
&gt; Regards,
&gt; Harsh
&gt; 
&gt; 
&gt; _______________________________________________
&gt; libvirt-users mailing list
&gt; libvirt-users@redhat.com
&gt; https://www.redhat.com/mailman/listinfo/libvirt-users
&gt; 

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190320204843</emailId><senderName>Eric Blake</senderName><senderEmail>eblake@redhat.com</senderEmail><timestampReceived>2019-03-20 20:48:43-0400</timestampReceived><subject>Re: [libvirt-users] virsh snapshot-create-as: change umask on snapshots</subject><body>

[Attachment #2 (multipart/signed)]

[Attachment #4 (multipart/mixed)]


On 3/20/19 1:50 PM, Mircea Husz wrote:
&gt; I scripted the creation of snapshots and it works fine. Now I'd like to run the \
&gt; script as non-root. 
&gt; virsh snapshot-create-as --domain hq-live-v01 \
&gt; --name snappy \
&gt; --diskspec vda,file=/var/lib/libvirt/images/hq-live-v01.snappy,snapshot=external \
&gt; --diskspec vdb,file=/var/lib/libvirt/images/hq-live-storage.snappy,snapshot=external \
&gt;                 \
&gt; --disk-only --quiesce --atomic
&gt; 
&gt; This fragment creates the snapshots, but get created with mode 0600:
&gt; -rw-------   1 qemu qemu        393216 Mar 19 17:08 hq-live-storage.snappy
&gt; -rw-------   1 qemu qemu      1048576 Mar 19 17:08 hq-live-v01.snappy
&gt; 
&gt; The user account is in the libvirt group and has permissions to do everything \
&gt; except delete the files created by the snapshot, all I need is to get the snapshots \
&gt; created with 0660 mode. 
&gt; This is on a Centos 7.6 installation.   What knobs do I need to turn to control the \
&gt; umask?

I'm not sure if you can force libvirt to create the files with a
different mask, but perhaps a workaround would be to pre-create the
files yourself with desired permissions, then tell virsh to
--reuse-external (so that libvirt no longer has to try and create the
files, and thus doesn't mess with permissions).

-- 
Eric Blake, Principal Software Engineer
Red Hat, Inc.           +1-919-301-3226
Virtualization:  qemu.org | libvirt.org


["signature.asc" (application/pgp-signature)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190322173609</emailId><senderName>Peter Krempa</senderName><senderEmail>pkrempa@redhat.com</senderEmail><timestampReceived>2019-03-22 17:36:09-0400</timestampReceived><subject>Re: [libvirt-users] virsh snapshot-create-as: change umask on snapshots</subject><body>

[Attachment #2 (multipart/signed)]


On Wed, Mar 20, 2019 at 15:48:43 -0500, Eric Blake wrote:
&gt; On 3/20/19 1:50 PM, Mircea Husz wrote:
&gt; &gt; I scripted the creation of snapshots and it works fine. Now I'd like to run the \
&gt; &gt; script as non-root. 
&gt; &gt; virsh snapshot-create-as --domain hq-live-v01 \
&gt; &gt; --name snappy \
&gt; &gt; --diskspec vda,file=/var/lib/libvirt/images/hq-live-v01.snappy,snapshot=external \
&gt; &gt;                 \
&gt; &gt; --diskspec vdb,file=/var/lib/libvirt/images/hq-live-storage.snappy,snapshot=external \
&gt; &gt;                 \
&gt; &gt; --disk-only --quiesce --atomic
&gt; &gt; 
&gt; &gt; This fragment creates the snapshots, but get created with mode 0600:
&gt; &gt; -rw-------  1 qemu qemu     393216 Mar 19 17:08 hq-live-storage.snappy
&gt; &gt; -rw-------  1 qemu qemu    1048576 Mar 19 17:08 hq-live-v01.snappy
&gt; &gt; 
&gt; &gt; The user account is in the libvirt group and has permissions to do everything \
&gt; &gt; except delete the files created by the snapshot, all I need is to get the \
&gt; &gt; snapshots created with 0660 mode. 
&gt; &gt; This is on a Centos 7.6 installation.  What knobs do I need to turn to control \
&gt; &gt; the umask?
&gt; 
&gt; I'm not sure if you can force libvirt to create the files with a
&gt; different mask, but perhaps a workaround would be to pre-create the
&gt; files yourself with desired permissions, then tell virsh to
&gt; --reuse-external (so that libvirt no longer has to try and create the
&gt; files, and thus doesn't mess with permissions).

--reuse-external is good only for using a custom-formatted image.
Libvirt will chown the image to qemu:qemu if you don't disable
relabelling. This is possible to do via the &lt;seclabel&gt; even in a
snapshot &lt;disk&gt; definition.

Note that it's not documented yet and also does not conform to the
schema, but the parser happily parses it and the code uses the correct
&lt;seclabel&gt; then. I have a not-sufficiently-tested patch that adds the
schema (and IIRC also docs) which I planned to send after testing.


["signature.asc" (application/pgp-signature)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190326190012</emailId><senderName>Chenzijian</senderName><senderEmail>zijian54321@163.com</senderEmail><timestampReceived>2019-03-26 19:00:12-0400</timestampReceived><subject>[libvirt-users] Problem passing qemu cmdline option when using &lt;qemu:commandline&gt; in domain xml.</subject><body>

[Attachment #2 (multipart/alternative)]

[Attachment #4 (text/plain)]

I am trying to pass-through the parallel port of the host to the guest.
When I just used qemu-system-x86_64 with option '-chardev \
pty,id=charparallel0,path=/dev/parport0 -device \
isa-parallel,chardev=charparallel0,id=parallel0', it worked perfect.  But when I \
                tried to pass these option by adding lines below to the domain xml,
...
&lt;/device&gt;
&lt;qemu:commandline&gt;
  &lt;qemu:args value='-chardev'/&gt;
  &lt;qemu:args value='pty,id=charparallel0,path=/dev/parport0'/&gt;
  &lt;qemu:args value='-device'/&gt;
  &lt;qemu:args value='isa-parallel,chardev=charparallel0,id=parallel0'/&gt;
&lt;/qemu:commandline&gt;
...
it failed and showed:
[root@localhost local]# virsh start test02
error: Failed to start domain test02
error: internal error: process exited while connecting to monitor: 2019-03-27 \
02:28:12.507+0000: Domain id=32 is  tainted: custom-argv 2019-03-27T02:28:12.599326Z \
qemu-system-x86_64: -chardev parallel,id=charparallel0,path=/dev/parport0: Could not  \
open '/dev/parport0': No such file or directory


I dont know why it showed a 'No such file or directory'. The /dev/parport0 is \
actually here. I have tried setting chmod 666 to /dev/parport0 and shutdown the \
selinux, but it always show the same thing. Please give me some help, thanks.


[Attachment #5 (text/html)]

&lt;div style="line-height:1.7;color:#000000;font-size:14px;font-family:Arial"&gt;&lt;div&gt;&lt;font \
size="3"&gt;&lt;span style="font-size: 16px;"&gt;I am trying to pass-through the parallel port \
of the host to the guest.&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size="3"&gt;&lt;span \
style="font-size: 16px;"&gt;When I just used qemu-system-x86_64 with option '-chardev \
pty,id=charparallel0,path=/dev/parport0 &lt;/span&gt;&lt;/font&gt;&lt;span style="font-size: \
16px;"&gt;-device isa-parallel,chardev=charparallel0,id=parallel0', it worked \
perfect. &lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style="font-size: 16px;"&gt;But when I tried to \
pass these option by adding lines below to the domain xml,&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span \
style="font-size: 16px;"&gt;...&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style="font-size: \
16px;"&gt;&lt;/device&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style="font-size: \
16px;"&gt;&lt;qemu:commandline&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style="font-size: \
16px;"&gt;  &lt;qemu:args value='&lt;/span&gt;&lt;font size="3"&gt;&lt;span style="font-size: \
16px;"&gt;-chardev'/&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size="3"&gt;&lt;span style="font-size: \
16px;"&gt;  &lt;/span&gt;&lt;/font&gt;&lt;span style="font-size: 16px;"&gt;&lt;qemu:args \
value='&lt;/span&gt;&lt;font size="3"&gt;&lt;span style="font-size: \
16px;"&gt;pty,id=charparallel0,path=/dev/parport0'/&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;span \
style="font-size: 16px;"&gt;  &lt;qemu:args \
value='-device'/&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style="font-size: \
16px;"&gt;  &lt;qemu:args \
value='isa-parallel,chardev=charparallel0,id=parallel0'/&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span \
style="font-size: 16px;"&gt;&lt;/qemu:commandline&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span \
style="font-size: 16px;"&gt;...&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style="font-size: 16px;"&gt;it \
failed and showed:&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;div style=""&gt;&lt;font size="3"&gt;&lt;span \
style="font-size: 16px;"&gt;[root@localhost local]# virsh start \
test02&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=""&gt;&lt;font size="3"&gt;&lt;span style="font-size: \
16px;"&gt;error: Failed to start domain test02&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=""&gt;&lt;font \
size="3"&gt;&lt;span style="font-size: 16px;"&gt;error: internal error: process exited while \
connecting to monitor: 2019-03-27 02:28:12.507+0000: Domain id=32 is  tainted: \
custom-argv&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=""&gt;&lt;font size="3"&gt;&lt;span style="font-size: \
16px;"&gt;2019-03-27T02:28:12.599326Z qemu-system-x86_64: -chardev \
parallel,id=charparallel0,path=/dev/parport0: Could not  open '/dev/parport0': \
No such file or directory&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;div style=""&gt;&lt;br&gt;&lt;/div&gt;&lt;div \
style=""&gt;&lt;span style="font-size: 16px;"&gt;I dont know why it showed a 'No such file or \
directory'. The /dev/parport0 is actually here. I have tried setting chmod 666 to \
/dev/parport0 and shutdown the selinux, but it always show the same \
thing.&lt;/span&gt;&lt;/div&gt;&lt;div style=""&gt;&lt;span style="font-size: 16px;"&gt;Please give me some \
help, thanks.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;br&gt;&lt;span \
title="neteasefooter"&gt;&lt;p&gt; &lt;/p&gt;&lt;/span&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190326222751</emailId><senderName>=?utf-8?Q?Gon=C3=A9ri?= Le Bouder</senderName><senderEmail>goneri@lebouder.net</senderEmail><timestampReceived>2019-03-26 22:27:51-0400</timestampReceived><subject>[libvirt-users] Virt-Lightning: a cloud-like CLI for libvirt</subject><body>

[Attachment #2 (multipart/signed)]


Hi all,

Tl;dr: Virt-Lightning uses libvirt, cloud-init and libguestfs to allow
anyone to quickly start new VM. Very much like a container CLI interface,
but locally.

-&gt; https://github.com/virt-lightning/virt-lightning

To validate my Ansible roles, I was looking for a way to quickly start
and stop my test environments. I was looking for an experience similar
to what we have with the containers. Virt-lightning takes a distribution
name as main input. The output is the IP address of a freshly deployed
VM on which I can run my tests.

Virt-Lightning uses master QCOW2 images with backing file and avoid the
use of DHCP, this to speedup up the first boot. The configuration is
done by cloud-init. The whole deployment is rather fast. For instance, I
can deploy 3 VM in 25s (Lenovo T580).

cloud-init is used to create the user account, inject the SSH keys,
prepare the network configuration and resize the file system.

Regards,
-- 
    Gonéri Le Bouder

["signature.asc" (application/pgp-signature)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190328133720</emailId><senderName>Harsh Gondaliya</senderName><senderEmail>harshgondaliya_vinodbhai@srmuniv.edu.in</senderEmail><timestampReceived>2019-03-28 13:37:20-0400</timestampReceived><subject>[libvirt-users] Error Starting domain: Failed to page size of file</subject><body>

[Attachment #2 (multipart/alternative)]


I am trying to connect a KVM-QEMU VM to OVS-DPDK vhostuser port. But, I am
encountering a few errors. Since I am very new to libvrt and Linux I am not
able to sort them out. Any guidance in this regard would be a great help.

These are my System Logs:

Mar 28 18:03:04 dpdk-OptiPlex-5040 libvirtd.service: 1529: debug :
virCommandRunAsync:2429 : About to run LIBVIRT_LOG_OUTPUTS=3:stderr
/usr/lib/libvirt/virt-aa-helper -p 0 -r -u
libvirt-41b4eef0-b820-41da-9034-9de22e1379e0
Mar 28 18:03:04 dpdk-OptiPlex-5040 libvirtd.service: 1529: debug :
virCommandRunAsync:2432 : Command result 0, with PID 8687
Mar 28 18:03:04 dpdk-OptiPlex-5040 libvirtd.service: 1529: debug :
virCommandRun:2280 : Result status 0, stdout: '' stderr: ''
Mar 28 18:03:04 dpdk-OptiPlex-5040 libvirtd.service: 1529: warning :
qemuProcessLaunch:4807 : Detected vhost-user interface without any shared
memory, the interface might not be operational
Mar 28 18:03:04 dpdk-OptiPlex-5040 kernel: [ 4023.292264] audit: type=1400
audit(1553776384.755:31): apparmor="STATUS" operation="profile_replace"
info="same as current profile, skipping" profile="unconfined"
name="libvirt-41b4eef0-b820-41da-9034-9de22e1379e0" pid=8689
comm="apparmor_parser"
Mar 28 18:03:04 dpdk-OptiPlex-5040 kernel: [ 4023.292503] audit: type=1400
audit(1553776384.755:32): apparmor="STATUS" operation="profile_replace"
info="same as current profile, skipping" profile="unconfined"
name="libvirt-41b4eef0-b820-41da-9034-9de22e1379e0//qemu_bridge_helper"
pid=8689 comm="apparmor_parser"
Mar 28 18:03:04 dpdk-OptiPlex-5040 libvirtd.service: 1529: debug :
virCommandRequireHandshake:2628 : Transfer handshake wait=29 notify=30,
keep handshake wait=27 notify=31
Mar 28 18:03:04 dpdk-OptiPlex-5040 libvirtd.service: 1529: debug :
virCommandRunAsync:2429 : About to run LC_ALL=C
PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
QEMU_AUDIO_DRV=spice /usr/bin/kvm-spice -name VM1 -S -machine
pc-i440fx-xenial,accel=kvm,usb=off -cpu Broadwell-IBRS -m 3072
-mem-prealloc -mem-path /dev/hugepages/libvirt/qemu -realtime mlock=off
-smp 2,sockets=2,cores=1,threads=1 -uuid
41b4eef0-b820-41da-9034-9de22e1379e0 -no-user-config -nodefaults -chardev
socket,id=charmonitor,path=/var/lib/libvirt/qemu/domain-VM1/monitor.sock,server,nowait
                
-mon chardev=charmonitor,id=monitor,mode=control -rtc
base=utc,driftfix=slew -global kvm-pit.lost_tick_policy=discard -no-hpet
-no-shutdown -global PIIX4_PM.disable_s3=1 -global PIIX4_PM.disable_s4=1
-boot strict=on -device ich9-usb-ehci1,id=usb,bus=pci.0,addr=0x5.0x7
-device
ich9-usb-uhci1,masterbus=usb.0,firstport=0,bus=pci.0,multifunction=on,addr=0x5
-device ich9-usb-uhci2,masterbus=usb.0,firstport=2,bus=pci.0,addr=0x5.0x1
-device ich9-usb-uhci3,masterbus=usb.0,firstport=4,bus=pci.0,addr=0x5.0x2
-device virtio-serial-pci,id=virtio-serial0,bus=pci.0,addr=0x4 -drive
file=/var/lib/libvirt/images/VM1-1.qcow2,format=qcow2,if=none,id=drive-ide0-0-0
-device
ide-hd,bus=ide.0,unit=0,drive=drive-ide0-0-0,id=ide0-0-0,bootindex=1 -drive
if=none,id=drive-ide0-0-1,readonly=on -device
ide-cd,bus=ide.0,unit=1,drive=drive-ide0-0-1,id=ide0-0-1 -chardev
socket,id=charnet0,path=/var/run/openvswitch/vhost-user1 -netdev
type=vhost-user,id=hostnet0,chardev=charnet0,queues=4 -device
virtio-net-pci,mrg_rxbuf=on,mq=on,vectors=10,netdev=hostnet0,id=net0,mac=00:00:00:00:00:01,bus=pci.0,addr=0x7
                
-chardev pty,id=charserial0 -device
isa-serial,chardev=charserial0,id=serial0 -chardev
spicevmc,id=charchannel0,name=vdagent -device
virtserialport,bus=virtio-serial0.0,nr=1,chardev=charchannel0,id=channel0,name=com.redhat.spice.0
                
-spice
port=5900,addr=127.0.0.1,disable-ticketing,image-compression=off,seamless-migration=on
                
-device
qxl-vga,id=video0,ram_size=67108864,vram_size=67108864,vgamem_mb=16,bus=pci.0,addr=0x2
                
-device intel-hda,id=sound0,bus=pci.0,addr=0x3 -device
hda-duplex,id=sound0-codec0,bus=sound0.0,cad=0 -chardev
spicevmc,id=charredir0,name=usbredir -device
usb-redir,chardev=charredir0,id=redir0 -chardev
spicevmc,id=charredir1,name=usbredir -device
usb-redir,chardev=charredir1,id=redir1 -device
virtio-balloon-pci,id=balloon0,bus=pci.0,addr=0x6 -msg timestamp=on
Mar 28 18:03:04 dpdk-OptiPlex-5040 libvirtd.service: 1529: debug :
virCommandRunAsync:2432 : Command result 0, with PID 8692
Mar 28 18:03:04 dpdk-OptiPlex-5040 libvirtd.service: 1529: debug :
virCommandRun:2280 : Result status 0, stdout: '(null)' stderr: '(null)'
Mar 28 18:03:04 dpdk-OptiPlex-5040 libvirtd.service: 1529: debug :
virCommandHandshakeWait:2663 : Wait for handshake on 27
Mar 28 18:03:04 dpdk-OptiPlex-5040 libvirtd.service: 1529: debug :
virCommandHandshakeNotify:2729 : Notify handshake on 31
*Mar 28 18:03:05 dpdk-OptiPlex-5040 libvirtd.service: 1351: error :
qemuMonitorIORead:599 : Unable to read from monitor: Connection reset by
peer*
*Mar 28 18:03:05 dpdk-OptiPlex-5040 libvirtd.service: 1351: error :
qemuProcessReportLogError:1709 : internal error: early end of file from
monitor, possible problem: 2019-03-28T12:33:05.007674Z qemu-system-x86_64:
-chardev socket,id=charnet0,path=/var/run/openvswitch/vhost-user1: Failed
to connect socket: Permission denied*
*Mar 28 18:03:05 dpdk-OptiPlex-5040 virtlogd[6704]: Cannot open log file:
'/var/log/libvirt/qemu/VM1.log': Device or resource busy*
*Mar 28 18:03:05 dpdk-OptiPlex-5040 virtlogd[6704]: End of file while
reading data: Input/output error*
*Mar 28 18:03:05 dpdk-OptiPlex-5040 libvirtd.service: 1351: error :
virNetClientProgramDispatchError:177 : Cannot open log file:
'/var/log/libvirt/qemu/VM1.log': Device or resource busy*
Mar 28 18:03:05 dpdk-OptiPlex-5040 libvirtd.service: 1351: debug :
virCommandRunAsync:2429 : About to run /usr/lib/libvirt/virt-aa-helper -R
-u libvirt-41b4eef0-b820-41da-9034-9de22e1379e0
Mar 28 18:03:05 dpdk-OptiPlex-5040 libvirtd.service: 1351: debug :
virCommandRunAsync:2432 : Command result 0, with PID 8705
Mar 28 18:03:05 dpdk-OptiPlex-5040 libvirtd.service: 1351: debug :
virCommandRun:2280 : Result status 0, stdout: '' stderr: ''
*Mar 28 18:03:05 dpdk-OptiPlex-5040 virtlogd[6704]: End of file while
reading data: Input/output error*
Mar 28 18:03:05 dpdk-OptiPlex-5040 kernel: [ 4024.080545] audit: type=1400
audit(1553776385.543:33): apparmor="STATUS" operation="profile_remove"
profile="unconfined" name="libvirt-41b4eef0-b820-41da-9034-9de22e1379e0"
pid=8707 comm="apparmor_parser"
Mar 28 18:05:28 dpdk-OptiPlex-5040 libvirtd.service: 1530: debug :
virCommandRunAsync:2429 : About to run LIBVIRT_LOG_OUTPUTS=3:stderr
/usr/lib/libvirt/virt-aa-helper -p 0 -r -u
libvirt-41b4eef0-b820-41da-9034-9de22e1379e0
Mar 28 18:05:28 dpdk-OptiPlex-5040 libvirtd.service: 1530: debug :
virCommandRunAsync:2432 : Command result 0, with PID 8890
Mar 28 18:05:28 dpdk-OptiPlex-5040 libvirtd.service: 1530: debug :
virCommandRun:2280 : Result status 0, stdout: '' stderr: ''
Mar 28 18:05:28 dpdk-OptiPlex-5040 kernel: [ 4167.453849] audit: type=1400
audit(1553776528.915:34): apparmor="STATUS" operation="profile_load"
profile="unconfined" name="libvirt-41b4eef0-b820-41da-9034-9de22e1379e0"
pid=8893 comm="apparmor_parser"
Mar 28 18:05:28 dpdk-OptiPlex-5040 kernel: [ 4167.454106] audit: type=1400
audit(1553776528.915:35): apparmor="STATUS" operation="profile_load"
profile="unconfined"
name="libvirt-41b4eef0-b820-41da-9034-9de22e1379e0//qemu_bridge_helper"
pid=8893 comm="apparmor_parser"
Mar 28 18:05:28 dpdk-OptiPlex-5040 libvirtd.service: 1530: warning :
qemuProcessLaunch:4807 : Detected vhost-user interface without any shared
memory, the interface might not be operational
Mar 28 18:05:28 dpdk-OptiPlex-5040 libvirtd.service: 1530: debug :
virCommandRequireHandshake:2628 : Transfer handshake wait=28 notify=29,
keep handshake wait=26 notify=30
Mar 28 18:05:28 dpdk-OptiPlex-5040 libvirtd.service: 1530: debug :
virCommandRunAsync:2429 : About to run LC_ALL=C
PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
QEMU_AUDIO_DRV=spice /usr/bin/kvm-spice -name VM1 -S -machine
pc-i440fx-xenial,accel=kvm,usb=off -cpu Broadwell-IBRS -m 1024
-mem-prealloc -mem-path /dev/hugepages/libvirt/qemu -realtime mlock=off
-smp 2,sockets=2,cores=1,threads=1 -uuid
41b4eef0-b820-41da-9034-9de22e1379e0 -no-user-config -nodefaults -chardev
socket,id=charmonitor,path=/var/lib/libvirt/qemu/domain-VM1/monitor.sock,server,nowait
                
-mon chardev=charmonitor,id=monitor,mode=control -rtc
base=utc,driftfix=slew -global kvm-pit.lost_tick_policy=discard -no-hpet
-no-shutdown -global PIIX4_PM.disable_s3=1 -global PIIX4_PM.disable_s4=1
-boot strict=on -device ich9-usb-ehci1,id=usb,bus=pci.0,addr=0x5.0x7
-device
ich9-usb-uhci1,masterbus=usb.0,firstport=0,bus=pci.0,multifunction=on,addr=0x5
-device ich9-usb-uhci2,masterbus=usb.0,firstport=2,bus=pci.0,addr=0x5.0x1
-device ich9-usb-uhci3,masterbus=usb.0,firstport=4,bus=pci.0,addr=0x5.0x2
-device virtio-serial-pci,id=virtio-serial0,bus=pci.0,addr=0x4 -drive
file=/var/lib/libvirt/images/VM1-1.qcow2,format=qcow2,if=none,id=drive-ide0-0-0
-device
ide-hd,bus=ide.0,unit=0,drive=drive-ide0-0-0,id=ide0-0-0,bootindex=1 -drive
if=none,id=drive-ide0-0-1,readonly=on -device
ide-cd,bus=ide.0,unit=1,drive=drive-ide0-0-1,id=ide0-0-1 -chardev
socket,id=charnet0,path=/var/run/openvswitch/vhost-user1 -netdev
type=vhost-user,id=hostnet0,chardev=charnet0,queues=4 -device
virtio-net-pci,mrg_rxbuf=on,mq=on,vectors=10,netdev=hostnet0,id=net0,mac=00:00:00:00:00:01,bus=pci.0,addr=0x7
                
-chardev pty,id=charserial0 -device
isa-serial,chardev=charserial0,id=serial0 -chardev
spicevmc,id=charchannel0,name=vdagent -device
virtserialport,bus=virtio-serial0.0,nr=1,chardev=charchannel0,id=channel0,name=com.redhat.spice.0
                
-spice
port=5900,addr=127.0.0.1,disable-ticketing,image-compression=off,seamless-migration=on
                
-device
qxl-vga,id=video0,ram_size=67108864,vram_size=67108864,vgamem_mb=16,bus=pci.0,addr=0x2
                
-device intel-hda,id=sound0,bus=pci.0,addr=0x3 -device
hda-duplex,id=sound0-codec0,bus=sound0.0,cad=0 -chardev
spicevmc,id=charredir0,name=usbredir -device
usb-redir,chardev=charredir0,id=redir0 -chardev
spicevmc,id=charredir1,name=usbredir -device
usb-redir,chardev=charredir1,id=redir1 -device
virtio-balloon-pci,id=balloon0,bus=pci.0,addr=0x6 -msg timestamp=on
Mar 28 18:05:28 dpdk-OptiPlex-5040 libvirtd.service: 1530: debug :
virCommandRunAsync:2432 : Command result 0, with PID 8895
Mar 28 18:05:29 dpdk-OptiPlex-5040 libvirtd.service: 1530: debug :
virCommandRun:2280 : Result status 0, stdout: '(null)' stderr: '(null)'
Mar 28 18:05:29 dpdk-OptiPlex-5040 libvirtd.service: 1530: debug :
virCommandHandshakeWait:2663 : Wait for handshake on 26
Mar 28 18:05:29 dpdk-OptiPlex-5040 libvirtd.service: 1530: debug :
virCommandHandshakeNotify:2729 : Notify handshake on 30
*Mar 28 18:05:29 dpdk-OptiPlex-5040 libvirtd.service: 1530: error :
qemuMonitorOpenUnix:374 : failed to connect to monitor socket: No such
process*
*Mar 28 18:05:29 dpdk-OptiPlex-5040 libvirtd.service: 1530: error :
qemuProcessReportLogError:1709 : internal error: process exited while
connecting to monitor: 2019-03-28T12:35:29.176289Z qemu-system-x86_64:
-chardev socket,id=charnet0,path=/var/run/openvswitch/vhost-user1: Failed
to connect socket: Permission denied*
*Mar 28 18:05:29 dpdk-OptiPlex-5040 virtlogd[6704]: End of file while
reading data: Input/output error*
*Mar 28 18:05:29 dpdk-OptiPlex-5040 virtlogd[6704]: End of file while
reading data: Input/output error*
Mar 28 18:05:39 dpdk-OptiPlex-5040 libvirtd.service: 1530: debug :
virCommandRunAsync:2429 : About to run LIBVIRT_LOG_OUTPUTS=3:stderr
/usr/lib/libvirt/virt-aa-helper -p 0 -r -u
libvirt-41b4eef0-b820-41da-9034-9de22e1379e0
Mar 28 18:05:39 dpdk-OptiPlex-5040 libvirtd.service: 1530: debug :
virCommandRunAsync:2432 : Command result 0, with PID 8921
Mar 28 18:05:39 dpdk-OptiPlex-5040 libvirtd.service: 1530: debug :
virCommandRun:2280 : Result status 0, stdout: '' stderr: ''
Mar 28 18:05:39 dpdk-OptiPlex-5040 kernel: [ 4178.521901] audit: type=1400
audit(1553776539.983:36): apparmor="STATUS" operation="profile_replace"
info="same as current profile, skipping" profile="unconfined"
name="libvirt-41b4eef0-b820-41da-9034-9de22e1379e0" pid=8923
comm="apparmor_parser"
Mar 28 18:05:39 dpdk-OptiPlex-5040 kernel: [ 4178.522126] audit: type=1400
audit(1553776539.983:37): apparmor="STATUS" operation="profile_replace"
info="same as current profile, skipping" profile="unconfined"
name="libvirt-41b4eef0-b820-41da-9034-9de22e1379e0//qemu_bridge_helper"
pid=8923 comm="apparmor_parser"
Mar 28 18:05:39 dpdk-OptiPlex-5040 libvirtd.service: 1530: warning :
qemuProcessLaunch:4807 : Detected vhost-user interface without any shared
memory, the interface might not be operational
Mar 28 18:05:39 dpdk-OptiPlex-5040 libvirtd.service: 1530: debug :
virCommandRequireHandshake:2628 : Transfer handshake wait=28 notify=29,
keep handshake wait=26 notify=30
Mar 28 18:05:39 dpdk-OptiPlex-5040 libvirtd.service: 1530: debug :
virCommandRunAsync:2429 : About to run LC_ALL=C
PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
QEMU_AUDIO_DRV=spice /usr/bin/kvm-spice -name VM1 -S -machine
pc-i440fx-xenial,accel=kvm,usb=off -cpu Broadwell-IBRS -m 2048
-mem-prealloc -mem-path /dev/hugepages/libvirt/qemu -realtime mlock=off
-smp 2,sockets=2,cores=1,threads=1 -uuid
41b4eef0-b820-41da-9034-9de22e1379e0 -no-user-config -nodefaults -chardev
socket,id=charmonitor,path=/var/lib/libvirt/qemu/domain-VM1/monitor.sock,server,nowait
                
-mon chardev=charmonitor,id=monitor,mode=control -rtc
base=utc,driftfix=slew -global kvm-pit.lost_tick_policy=discard -no-hpet
-no-shutdown -global PIIX4_PM.disable_s3=1 -global PIIX4_PM.disable_s4=1
-boot strict=on -device ich9-usb-ehci1,id=usb,bus=pci.0,addr=0x5.0x7
-device
ich9-usb-uhci1,masterbus=usb.0,firstport=0,bus=pci.0,multifunction=on,addr=0x5
-device ich9-usb-uhci2,masterbus=usb.0,firstport=2,bus=pci.0,addr=0x5.0x1
-device ich9-usb-uhci3,masterbus=usb.0,firstport=4,bus=pci.0,addr=0x5.0x2
-device virtio-serial-pci,id=virtio-serial0,bus=pci.0,addr=0x4 -drive
file=/var/lib/libvirt/images/VM1-1.qcow2,format=qcow2,if=none,id=drive-ide0-0-0
-device
ide-hd,bus=ide.0,unit=0,drive=drive-ide0-0-0,id=ide0-0-0,bootindex=1 -drive
if=none,id=drive-ide0-0-1,readonly=on -device
ide-cd,bus=ide.0,unit=1,drive=drive-ide0-0-1,id=ide0-0-1 -chardev
socket,id=charnet0,path=/var/run/openvswitch/vhost-user1 -netdev
type=vhost-user,id=hostnet0,chardev=charnet0,queues=4 -device
virtio-net-pci,mrg_rxbuf=on,mq=on,vectors=10,netdev=hostnet0,id=net0,mac=00:00:00:00:00:01,bus=pci.0,addr=0x7
                
-chardev pty,id=charserial0 -device
isa-serial,chardev=charserial0,id=serial0 -chardev
spicevmc,id=charchannel0,name=vdagent -device
virtserialport,bus=virtio-serial0.0,nr=1,chardev=charchannel0,id=channel0,name=com.redhat.spice.0
                
-spice
port=5900,addr=127.0.0.1,disable-ticketing,image-compression=off,seamless-migration=on
                
-device
qxl-vga,id=video0,ram_size=67108864,vram_size=67108864,vgamem_mb=16,bus=pci.0,addr=0x2
                
-device intel-hda,id=sound0,bus=pci.0,addr=0x3 -device
hda-duplex,id=sound0-codec0,bus=sound0.0,cad=0 -chardev
spicevmc,id=charredir0,name=usbredir -device
usb-redir,chardev=charredir0,id=redir0 -chardev
spicevmc,id=charredir1,name=usbredir -device
usb-redir,chardev=charredir1,id=redir1 -device
virtio-balloon-pci,id=balloon0,bus=pci.0,addr=0x6 -msg timestamp=on
Mar 28 18:05:39 dpdk-OptiPlex-5040 libvirtd.service: 1530: debug :
virCommandRunAsync:2432 : Command result 0, with PID 8925
Mar 28 18:05:40 dpdk-OptiPlex-5040 libvirtd.service: 1530: debug :
virCommandRun:2280 : Result status 0, stdout: '(null)' stderr: '(null)'
Mar 28 18:05:40 dpdk-OptiPlex-5040 libvirtd.service: 1530: debug :
virCommandHandshakeWait:2663 : Wait for handshake on 26
Mar 28 18:05:40 dpdk-OptiPlex-5040 libvirtd.service: 1530: debug :
virCommandHandshakeNotify:2729 : Notify handshake on 30
*Mar 28 18:05:40 dpdk-OptiPlex-5040 libvirtd.service: 1530: error :
qemuMonitorOpenUnix:374 : failed to connect to monitor socket: No such
process*
*Mar 28 18:05:40 dpdk-OptiPlex-5040 libvirtd.service: 1530: error :
qemuProcessReportLogError:1709 : internal error: process exited while
connecting to monitor:
rbus=usb.0,firstport=0,bus=pci.0,multifunction=on,addr=0x5 -device
ich9-usb-uhci2,masterbus=usb.0,firstport=2,bus=pci.0,addr=0x5.0x1 -device
ich9-usb-uhci3,masterbus=usb.0,firstport=4,bus=pci.0,addr=0x5.0x2 -device
virtio-serial-pci,id=virtio-serial0,bus=pci.0,addr=0x4 -drive
file=/var/lib/libvirt/images/VM1-1.qcow2,format=qcow2,if=none,id=drive-ide0-0-0
-device
ide-hd,bus=ide.0,unit=0,drive=drive-ide0-0-0,id=ide0-0-0,bootindex=1 -drive
if=none,id=drive-ide0-0-1,readonly=on -device
ide-cd,bus=ide.0,unit=1,drive=drive-ide0-0-1,id=ide0-0-1 -chardev
socket,id=charnet0,path=/var/run/openvswitch/vhost-user1 -netdev
type=vhost-user,id=hostnet0,chardev=charnet0,queues=4 -device
virtio-net-pci,mrg_rxbuf=on,mq=on,vectors=10,netdev=hostnet0,id=net0,mac=00:00:00:00:00:01,bus=pci.0,addr=0x7
                
-chardev pty,id=charserial0 -device
isa-serial,chardev=charserial0,id=serial0 -chardev
spicevmc,id=charchannel0,name=vdagent -device
virtserialport,bus=virtio-serial0.0,nr=1,chardev=charch*
*Mar 28 18:05:40 dpdk-OptiPlex-5040 virtlogd[6704]: End of file while
reading data: Input/output error*
*Mar 28 18:05:40 dpdk-OptiPlex-5040 virtlogd[6704]: End of file while
reading data: Input/output error*
Mar 28 18:05:50 dpdk-OptiPlex-5040 libvirtd.service: 1530: debug :
virCommandRunAsync:2429 : About to run LIBVIRT_LOG_OUTPUTS=3:stderr
/usr/lib/libvirt/virt-aa-helper -p 0 -r -u
libvirt-41b4eef0-b820-41da-9034-9de22e1379e0
Mar 28 18:05:50 dpdk-OptiPlex-5040 libvirtd.service: 1530: debug :
virCommandRunAsync:2432 : Command result 0, with PID 8949
Mar 28 18:05:51 dpdk-OptiPlex-5040 libvirtd.service: 1530: debug :
virCommandRun:2280 : Result status 0, stdout: '' stderr: ''
Mar 28 18:05:51 dpdk-OptiPlex-5040 kernel: [ 4189.837493] audit: type=1400
audit(1553776551.299:38): apparmor="STATUS" operation="profile_replace"
info="same as current profile, skipping" profile="unconfined"
name="libvirt-41b4eef0-b820-41da-9034-9de22e1379e0" pid=8951
comm="apparmor_parser"
Mar 28 18:05:51 dpdk-OptiPlex-5040 kernel: [ 4189.837718] audit: type=1400
audit(1553776551.299:39): apparmor="STATUS" operation="profile_replace"
info="same as current profile, skipping" profile="unconfined"
name="libvirt-41b4eef0-b820-41da-9034-9de22e1379e0//qemu_bridge_helper"
pid=8951 comm="apparmor_parser"
Mar 28 18:05:51 dpdk-OptiPlex-5040 libvirtd.service: 1530: warning :
qemuProcessLaunch:4807 : Detected vhost-user interface without any shared
memory, the interface might not be operational
Mar 28 18:05:51 dpdk-OptiPlex-5040 libvirtd.service: 1530: debug :
virCommandRequireHandshake:2628 : Transfer handshake wait=28 notify=29,
keep handshake wait=26 notify=30
Mar 28 18:05:51 dpdk-OptiPlex-5040 libvirtd.service: 1530: debug :
virCommandRunAsync:2429 : About to run LC_ALL=C
PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
QEMU_AUDIO_DRV=spice /usr/bin/kvm-spice -name VM1 -S -machine
pc-i440fx-xenial,accel=kvm,usb=off -cpu Broadwell-IBRS -m 2048
-mem-prealloc -mem-path /dev/hugepages/libvirt/qemu -realtime mlock=off
-smp 2,sockets=2,cores=1,threads=1 -uuid
41b4eef0-b820-41da-9034-9de22e1379e0 -no-user-config -nodefaults -chardev
socket,id=charmonitor,path=/var/lib/libvirt/qemu/domain-VM1/monitor.sock,server,nowait
                
-mon chardev=charmonitor,id=monitor,mode=control -rtc
base=utc,driftfix=slew -global kvm-pit.lost_tick_policy=discard -no-hpet
-no-shutdown -global PIIX4_PM.disable_s3=1 -global PIIX4_PM.disable_s4=1
-boot strict=on -device ich9-usb-ehci1,id=usb,bus=pci.0,addr=0x5.0x7
-device
ich9-usb-uhci1,masterbus=usb.0,firstport=0,bus=pci.0,multifunction=on,addr=0x5
-device ich9-usb-uhci2,masterbus=usb.0,firstport=2,bus=pci.0,addr=0x5.0x1
-device ich9-usb-uhci3,masterbus=usb.0,firstport=4,bus=pci.0,addr=0x5.0x2
-device virtio-serial-pci,id=virtio-serial0,bus=pci.0,addr=0x4 -drive
file=/var/lib/libvirt/images/VM1-1.qcow2,format=qcow2,if=none,id=drive-ide0-0-0
-device
ide-hd,bus=ide.0,unit=0,drive=drive-ide0-0-0,id=ide0-0-0,bootindex=1 -drive
if=none,id=drive-ide0-0-1,readonly=on -device
ide-cd,bus=ide.0,unit=1,drive=drive-ide0-0-1,id=ide0-0-1 -chardev
socket,id=charnet0,path=/var/run/openvswitch/vhost-user1 -netdev
type=vhost-user,id=hostnet0,chardev=charnet0,queues=4 -device
virtio-net-pci,mrg_rxbuf=on,mq=on,vectors=10,netdev=hostnet0,id=net0,mac=00:00:00:00:00:01,bus=pci.0,addr=0x7
                
-chardev pty,id=charserial0 -device
isa-serial,chardev=charserial0,id=serial0 -chardev
spicevmc,id=charchannel0,name=vdagent -device
virtserialport,bus=virtio-serial0.0,nr=1,chardev=charchannel0,id=channel0,name=com.redhat.spice.0
                
-spice
port=5900,addr=127.0.0.1,disable-ticketing,image-compression=off,seamless-migration=on
                
-device
qxl-vga,id=video0,ram_size=67108864,vram_size=67108864,vgamem_mb=16,bus=pci.0,addr=0x2
                
-device intel-hda,id=sound0,bus=pci.0,addr=0x3 -device
hda-duplex,id=sound0-codec0,bus=sound0.0,cad=0 -chardev
spicevmc,id=charredir0,name=usbredir -device
usb-redir,chardev=charredir0,id=redir0 -chardev
spicevmc,id=charredir1,name=usbredir -device
usb-redir,chardev=charredir1,id=redir1 -device
virtio-balloon-pci,id=balloon0,bus=pci.0,addr=0x6 -msg timestamp=on
Mar 28 18:05:51 dpdk-OptiPlex-5040 libvirtd.service: 1530: debug :
virCommandRunAsync:2432 : Command result 0, with PID 8953
Mar 28 18:05:51 dpdk-OptiPlex-5040 libvirtd.service: 1530: debug :
virCommandRun:2280 : Result status 0, stdout: '(null)' stderr: '(null)'
Mar 28 18:05:51 dpdk-OptiPlex-5040 libvirtd.service: 1530: debug :
virCommandHandshakeWait:2663 : Wait for handshake on 26
Mar 28 18:05:51 dpdk-OptiPlex-5040 libvirtd.service: 1530: debug :
virCommandHandshakeNotify:2729 : Notify handshake on 30
*Mar 28 18:05:51 dpdk-OptiPlex-5040 libvirtd.service: 1530: error :
qemuMonitorOpenUnix:374 : failed to connect to monitor socket: No such
process*
*Mar 28 18:05:51 dpdk-OptiPlex-5040 libvirtd.service: 1530: error :
qemuProcessReportLogError:1709 : internal error: process exited while
connecting to monitor: 2019-03-28T12:35:51.560805Z qemu-system-x86_64:
-chardev socket,id=charnet0,path=/var/run/openvswitch/vhost-user1: Failed
to connect socket: Permission denied*
*Mar 28 18:05:51 dpdk-OptiPlex-5040 virtlogd[6704]: End of file while
reading data: Input/output error*
*Mar 28 18:05:51 dpdk-OptiPlex-5040 virtlogd[6704]: End of file while
reading data: Input/output error*
Mar 28 18:05:55 dpdk-OptiPlex-5040 libvirtd.service: 1529: debug :
virCommandRunAsync:2429 : About to run LIBVIRT_LOG_OUTPUTS=3:stderr
/usr/lib/libvirt/virt-aa-helper -p 0 -r -u
libvirt-41b4eef0-b820-41da-9034-9de22e1379e0
Mar 28 18:05:55 dpdk-OptiPlex-5040 libvirtd.service: 1529: debug :
virCommandRunAsync:2432 : Command result 0, with PID 8978
Mar 28 18:05:55 dpdk-OptiPlex-5040 libvirtd.service: 1529: debug :
virCommandRun:2280 : Result status 0, stdout: '' stderr: ''
Mar 28 18:05:55 dpdk-OptiPlex-5040 kernel: [ 4194.448719] audit: type=1400
audit(1553776555.911:40): apparmor="STATUS" operation="profile_replace"
info="same as current profile, skipping" profile="unconfined"
name="libvirt-41b4eef0-b820-41da-9034-9de22e1379e0" pid=8980
comm="apparmor_parser"
Mar 28 18:05:55 dpdk-OptiPlex-5040 kernel: [ 4194.448931] audit: type=1400
audit(1553776555.911:41): apparmor="STATUS" operation="profile_replace"
info="same as current profile, skipping" profile="unconfined"
name="libvirt-41b4eef0-b820-41da-9034-9de22e1379e0//qemu_bridge_helper"
pid=8980 comm="apparmor_parser"
Mar 28 18:05:55 dpdk-OptiPlex-5040 libvirtd.service: 1529: warning :
qemuProcessLaunch:4807 : Detected vhost-user interface without any shared
memory, the interface might not be operational
Mar 28 18:05:55 dpdk-OptiPlex-5040 libvirtd.service: 1529: debug :
virCommandRequireHandshake:2628 : Transfer handshake wait=28 notify=29,
keep handshake wait=26 notify=30
Mar 28 18:05:55 dpdk-OptiPlex-5040 libvirtd.service: 1529: debug :
virCommandRunAsync:2429 : About to run LC_ALL=C
PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
QEMU_AUDIO_DRV=spice /usr/bin/kvm-spice -name VM1 -S -machine
pc-i440fx-xenial,accel=kvm,usb=off -cpu Broadwell-IBRS -m 2048
-mem-prealloc -mem-path /dev/hugepages/libvirt/qemu -realtime mlock=off
-smp 2,sockets=2,cores=1,threads=1 -uuid
41b4eef0-b820-41da-9034-9de22e1379e0 -no-user-config -nodefaults -chardev
socket,id=charmonitor,path=/var/lib/libvirt/qemu/domain-VM1/monitor.sock,server,nowait
                
-mon chardev=charmonitor,id=monitor,mode=control -rtc
base=utc,driftfix=slew -global kvm-pit.lost_tick_policy=discard -no-hpet
-no-shutdown -global PIIX4_PM.disable_s3=1 -global PIIX4_PM.disable_s4=1
-boot strict=on -device ich9-usb-ehci1,id=usb,bus=pci.0,addr=0x5.0x7
-device
ich9-usb-uhci1,masterbus=usb.0,firstport=0,bus=pci.0,multifunction=on,addr=0x5
-device ich9-usb-uhci2,masterbus=usb.0,firstport=2,bus=pci.0,addr=0x5.0x1
-device ich9-usb-uhci3,masterbus=usb.0,firstport=4,bus=pci.0,addr=0x5.0x2
-device virtio-serial-pci,id=virtio-serial0,bus=pci.0,addr=0x4 -drive
file=/var/lib/libvirt/images/VM1-1.qcow2,format=qcow2,if=none,id=drive-ide0-0-0
-device
ide-hd,bus=ide.0,unit=0,drive=drive-ide0-0-0,id=ide0-0-0,bootindex=1 -drive
if=none,id=drive-ide0-0-1,readonly=on -device
ide-cd,bus=ide.0,unit=1,drive=drive-ide0-0-1,id=ide0-0-1 -chardev
socket,id=charnet0,path=/var/run/openvswitch/vhost-user1 -netdev
type=vhost-user,id=hostnet0,chardev=charnet0,queues=4 -device
virtio-net-pci,mrg_rxbuf=on,mq=on,vectors=10,netdev=hostnet0,id=net0,mac=00:00:00:00:00:01,bus=pci.0,addr=0x7
                
-chardev pty,id=charserial0 -device
isa-serial,chardev=charserial0,id=serial0 -chardev
spicevmc,id=charchannel0,name=vdagent -device
virtserialport,bus=virtio-serial0.0,nr=1,chardev=charchannel0,id=channel0,name=com.redhat.spice.0
                
-spice
port=5900,addr=127.0.0.1,disable-ticketing,image-compression=off,seamless-migration=on
                
-device
qxl-vga,id=video0,ram_size=67108864,vram_size=67108864,vgamem_mb=16,bus=pci.0,addr=0x2
                
-device intel-hda,id=sound0,bus=pci.0,addr=0x3 -device
hda-duplex,id=sound0-codec0,bus=sound0.0,cad=0 -chardev
spicevmc,id=charredir0,name=usbredir -device
usb-redir,chardev=charredir0,id=redir0 -chardev
spicevmc,id=charredir1,name=usbredir -device
usb-redir,chardev=charredir1,id=redir1 -device
virtio-balloon-pci,id=balloon0,bus=pci.0,addr=0x6 -msg timestamp=on
Mar 28 18:05:55 dpdk-OptiPlex-5040 libvirtd.service: 1529: debug :
virCommandRunAsync:2432 : Command result 0, with PID 8982
Mar 28 18:05:56 dpdk-OptiPlex-5040 libvirtd.service: 1529: debug :
virCommandRun:2280 : Result status 0, stdout: '(null)' stderr: '(null)'
Mar 28 18:05:56 dpdk-OptiPlex-5040 libvirtd.service: 1529: debug :
virCommandHandshakeWait:2663 : Wait for handshake on 26
Mar 28 18:05:56 dpdk-OptiPlex-5040 libvirtd.service: 1529: debug :
virCommandHandshakeNotify:2729 : Notify handshake on 30
*Mar 28 18:05:56 dpdk-OptiPlex-5040 libvirtd.service: 1529: error :
qemuMonitorOpenUnix:374 : failed to connect to monitor socket: No such
process*
*Mar 28 18:05:56 dpdk-OptiPlex-5040 libvirtd.service: 1529: error :
qemuProcessReportLogError:1709 : internal error: process exited while
connecting to monitor: 2019-03-28T12:35:56.172258Z qemu-system-x86_64:
-chardev socket,id=charnet0,path=/var/run/openvswitch/vhost-user1: Failed
to connect socket: Permission denied*
*Mar 28 18:05:56 dpdk-OptiPlex-5040 virtlogd[6704]: End of file while
reading data: Input/output error*
Mar 28 18:08:20 dpdk-OptiPlex-5040 kernel: [ 4338.842133] perf: interrupt
took too long (2535 &gt; 2500), lowering kernel.perf_event_max_sample_rate to
78750
*Mar 28 18:05:56 dpdk-OptiPlex-5040 virtlogd[6704]: End of file while
reading data: Input/output error*
Mar 28 18:10:05 dpdk-OptiPlex-5040 systemd-timesyncd[863]: Timed out
waiting for reply from 91.189.94.4:123 (ntp.ubuntu.com).
Mar 28 18:10:16 dpdk-OptiPlex-5040 systemd-timesyncd[863]: Timed out
waiting for reply from 91.189.89.198:123 (ntp.ubuntu.com).
Mar 28 18:10:26 dpdk-OptiPlex-5040 systemd-timesyncd[863]: Timed out
waiting for reply from 91.189.89.199:123 (ntp.ubuntu.com).
Mar 28 18:10:36 dpdk-OptiPlex-5040 systemd-timesyncd[863]: Timed out
waiting for reply from 91.189.91.157:123 (ntp.ubuntu.com).
Mar 28 18:17:01 dpdk-OptiPlex-5040 CRON[9422]: (root) CMD (   cd / &amp;&amp;
run-parts --report /etc/cron.hourly)
*Mar 28 18:31:05 dpdk-OptiPlex-5040 libvirtd.service: 1528: error :
virDomainDefParseXML:15281 : Maximum CPUs greater than topology limit*
*Mar 28 18:31:51 dpdk-OptiPlex-5040 libvirtd.service: 1529: error :
virDomainDefParseXML:15281 : Maximum CPUs greater than topology limit*
*Mar 28 18:32:11 dpdk-OptiPlex-5040 libvirtd.service: 1531: error :
virDomainDefParseXML:15281 : Maximum CPUs greater than topology limit*
*Mar 28 18:34:37 dpdk-OptiPlex-5040 libvirtd.service: 1532: error :
virDomainDefParseXML:15299 : internal error: CPU IDs in &lt;numa&gt; exceed the
&lt;vcpu&gt; count*
Mar 28 18:35:45 dpdk-OptiPlex-5040 libvirtd.service: 1528: debug :
virCommandRunAsync:2429 : About to run LIBVIRT_LOG_OUTPUTS=3:stderr
/usr/lib/libvirt/virt-aa-helper -p 0 -r -u
libvirt-41b4eef0-b820-41da-9034-9de22e1379e0
Mar 28 18:35:45 dpdk-OptiPlex-5040 libvirtd.service: 1528: debug :
virCommandRunAsync:2432 : Command result 0, with PID 10179
Mar 28 18:35:45 dpdk-OptiPlex-5040 libvirtd.service: 1528: debug :
virCommandRun:2280 : Result status 0, stdout: '' stderr: ''
Mar 28 18:35:45 dpdk-OptiPlex-5040 kernel: [ 5984.228529] audit: type=1400
audit(1553778345.691:42): apparmor="STATUS" operation="profile_replace"
info="same as current profile, skipping" profile="unconfined"
name="libvirt-41b4eef0-b820-41da-9034-9de22e1379e0" pid=10182
comm="apparmor_parser"
Mar 28 18:35:45 dpdk-OptiPlex-5040 kernel: [ 5984.228757] audit: type=1400
audit(1553778345.691:43): apparmor="STATUS" operation="profile_replace"
info="same as current profile, skipping" profile="unconfined"
name="libvirt-41b4eef0-b820-41da-9034-9de22e1379e0//qemu_bridge_helper"
pid=10182 comm="apparmor_parser"
Mar 28 18:35:45 dpdk-OptiPlex-5040 libvirtd.service: 1528: debug :
virCommandRequireHandshake:2628 : Transfer handshake wait=29 notify=30,
keep handshake wait=27 notify=31
Mar 28 18:35:45 dpdk-OptiPlex-5040 libvirtd.service: 1528: debug :
virCommandRunAsync:2429 : About to run LC_ALL=C
PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
QEMU_AUDIO_DRV=spice /usr/bin/kvm-spice -name VM1 -S -machine
pc-i440fx-xenial,accel=kvm,usb=off -cpu
Broadwell-IBRS,+mpx,+ssbd,+abm,+pdpe1gb,+rdrand,+f16c,+osxsave,+pdcm,+xtpr,+tm2,+est,+smx,+vmx,+ds_cpl,+monitor,+dtes64,+pbe,+tm,+ht,+ss,+acpi,+ds,+vme
                
-m 2048 -realtime mlock=off -smp 2,sockets=1,cores=2,threads=1 -object
memory-backend-file,id=ram-node0,prealloc=yes,mem-path=/dev/hugepages/libvirt/qemu,share=yes,size=2147483648
                
-numa node,nodeid=0,cpus=0-1,memdev=ram-node0 -uuid
41b4eef0-b820-41da-9034-9de22e1379e0 -no-user-config -nodefaults -chardev
socket,id=charmonitor,path=/var/lib/libvirt/qemu/domain-VM1/monitor.sock,server,nowait
                
-mon chardev=charmonitor,id=monitor,mode=control -rtc
base=utc,driftfix=slew -global kvm-pit.lost_tick_policy=discard -no-hpet
-no-shutdown -global PIIX4_PM.disable_s3=1 -global PIIX4_PM.disable_s4=1
-boot strict=on -device ich9-usb-ehci1,id=usb,bus=pci.0,addr=0x5.0x7
-device
ich9-usb-uhci1,masterbus=usb.0,firstport=0,bus=pci.0,multifunction=on,addr=0x5
-device ich9-usb-uhci2,masterbus=usb.0,firstport=2,bus=pci.0,addr=0x5.0x1
-device ich9-usb-uhci3,masterbus=usb.0,firstport=4,bus=pci.0,addr=0x5.0x2
-device virtio-serial-pci,id=virtio-serial0,bus=pci.0,addr=0x4 -drive
file=/var/lib/libvirt/images/VM1-1.qcow2,format=qcow2,if=none,id=drive-ide0-0-0
-device
ide-hd,bus=ide.0,unit=0,drive=drive-ide0-0-0,id=ide0-0-0,bootindex=1 -drive
if=none,id=drive-ide0-0-1,readonly=on -device
ide-cd,bus=ide.0,unit=1,drive=drive-ide0-0-1,id=ide0-0-1 -chardev
socket,id=charnet0,path=/var/run/openvswitch/vhost-user1 -netdev
type=vhost-user,id=hostnet0,chardev=charnet0,queues=4 -device
virtio-net-pci,mrg_rxbuf=on,mq=on,vectors=10,netdev=hostnet0,id=net0,mac=00:00:00:00:00:01,bus=pci.0,addr=0x7
                
-chardev pty,id=charserial0 -device
isa-serial,chardev=charserial0,id=serial0 -chardev
spicevmc,id=charchannel0,name=vdagent -device
virtserialport,bus=virtio-serial0.0,nr=1,chardev=charchannel0,id=channel0,name=com.redhat.spice.0
                
-spice
port=5900,addr=127.0.0.1,disable-ticketing,image-compression=off,seamless-migration=on
                
-device
qxl-vga,id=video0,ram_size=67108864,vram_size=67108864,vgamem_mb=16,bus=pci.0,addr=0x2
                
-device intel-hda,id=sound0,bus=pci.0,addr=0x3 -device
hda-duplex,id=sound0-codec0,bus=sound0.0,cad=0 -chardev
spicevmc,id=charredir0,name=usbredir -device
usb-redir,chardev=charredir0,id=redir0 -chardev
spicevmc,id=charredir1,name=usbredir -device
usb-redir,chardev=charredir1,id=redir1 -device
virtio-balloon-pci,id=balloon0,bus=pci.0,addr=0x6 -msg timestamp=on
Mar 28 18:35:45 dpdk-OptiPlex-5040 libvirtd.service: 1528: debug :
virCommandRunAsync:2432 : Command result 0, with PID 10184
Mar 28 18:35:45 dpdk-OptiPlex-5040 libvirtd.service: 1528: debug :
virCommandRun:2280 : Result status 0, stdout: '(null)' stderr: '(null)'
Mar 28 18:35:45 dpdk-OptiPlex-5040 libvirtd.service: 1528: debug :
virCommandHandshakeWait:2663 : Wait for handshake on 27
Mar 28 18:35:45 dpdk-OptiPlex-5040 libvirtd.service: 1528: debug :
virCommandHandshakeNotify:2729 : Notify handshake on 31
Mar 28 18:35:45 dpdk-OptiPlex-5040 libvirtd.service: 1528: error :
qemuMonitorOpenUnix:374 : failed to connect to monitor socket: No such
process
Mar 28 18:35:45 dpdk-OptiPlex-5040 libvirtd.service: 1528: error :
qemuProcessReportLogError:1709 : internal error: process exited while
connecting to monitor: 2019-03-28T13:05:45.947781Z qemu-system-x86_64:
-object
memory-backend-file,id=ram-node0,prealloc=yes,mem-path=/dev/hugepages/libvirt/qemu,share=yes,size=2147483648:
 failed to get page size of file /dev/hugepages/libvirt/qemu: No such file
or directory
Mar 28 18:35:45 dpdk-OptiPlex-5040 virtlogd[6704]: End of file while
reading data: Input/output error
Mar 28 18:35:45 dpdk-OptiPlex-5040 virtlogd[6704]: End of file while
reading data: Input/output error
Mar 28 18:35:57 dpdk-OptiPlex-5040 libvirtd.service: 1530: debug :
virCommandRunAsync:2429 : About to run LIBVIRT_LOG_OUTPUTS=3:stderr
/usr/lib/libvirt/virt-aa-helper -p 0 -r -u
libvirt-41b4eef0-b820-41da-9034-9de22e1379e0
Mar 28 18:35:57 dpdk-OptiPlex-5040 libvirtd.service: 1530: debug :
virCommandRunAsync:2432 : Command result 0, with PID 10207
Mar 28 18:35:57 dpdk-OptiPlex-5040 libvirtd.service: 1530: debug :
virCommandRun:2280 : Result status 0, stdout: '' stderr: ''
Mar 28 18:35:57 dpdk-OptiPlex-5040 kernel: [ 5996.333003] audit: type=1400
audit(1553778357.795:44): apparmor="STATUS" operation="profile_replace"
info="same as current profile, skipping" profile="unconfined"
name="libvirt-41b4eef0-b820-41da-9034-9de22e1379e0" pid=10209
comm="apparmor_parser"
Mar 28 18:35:57 dpdk-OptiPlex-5040 kernel: [ 5996.333227] audit: type=1400
audit(1553778357.795:45): apparmor="STATUS" operation="profile_replace"
info="same as current profile, skipping" profile="unconfined"
name="libvirt-41b4eef0-b820-41da-9034-9de22e1379e0//qemu_bridge_helper"
pid=10209 comm="apparmor_parser"
Mar 28 18:35:57 dpdk-OptiPlex-5040 libvirtd.service: 1530: debug :
virCommandRequireHandshake:2628 : Transfer handshake wait=28 notify=29,
keep handshake wait=26 notify=30
Mar 28 18:35:57 dpdk-OptiPlex-5040 libvirtd.service: 1530: debug :
virCommandRunAsync:2429 : About to run LC_ALL=C
PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
QEMU_AUDIO_DRV=spice /usr/bin/kvm-spice -name VM1 -S -machine
pc-i440fx-xenial,accel=kvm,usb=off -cpu
Broadwell-IBRS,+mpx,+ssbd,+abm,+pdpe1gb,+rdrand,+f16c,+osxsave,+pdcm,+xtpr,+tm2,+est,+smx,+vmx,+ds_cpl,+monitor,+dtes64,+pbe,+tm,+ht,+ss,+acpi,+ds,+vme
                
-m 2048 -realtime mlock=off -smp 2,sockets=1,cores=2,threads=1 -object
memory-backend-file,id=ram-node0,prealloc=yes,mem-path=/dev/hugepages/libvirt/qemu,share=yes,size=2147483648
                
-numa node,nodeid=0,cpus=0-1,memdev=ram-node0 -uuid
41b4eef0-b820-41da-9034-9de22e1379e0 -no-user-config -nodefaults -chardev
socket,id=charmonitor,path=/var/lib/libvirt/qemu/domain-VM1/monitor.sock,server,nowait
                
-mon chardev=charmonitor,id=monitor,mode=control -rtc
base=utc,driftfix=slew -global kvm-pit.lost_tick_policy=discard -no-hpet
-no-shutdown -global PIIX4_PM.disable_s3=1 -global PIIX4_PM.disable_s4=1
-boot strict=on -device ich9-usb-ehci1,id=usb,bus=pci.0,addr=0x5.0x7
-device
ich9-usb-uhci1,masterbus=usb.0,firstport=0,bus=pci.0,multifunction=on,addr=0x5
-device ich9-usb-uhci2,masterbus=usb.0,firstport=2,bus=pci.0,addr=0x5.0x1
-device ich9-usb-uhci3,masterbus=usb.0,firstport=4,bus=pci.0,addr=0x5.0x2
-device virtio-serial-pci,id=virtio-serial0,bus=pci.0,addr=0x4 -drive
file=/var/lib/libvirt/images/VM1-1.qcow2,format=qcow2,if=none,id=drive-ide0-0-0
-device
ide-hd,bus=ide.0,unit=0,drive=drive-ide0-0-0,id=ide0-0-0,bootindex=1 -drive
if=none,id=drive-ide0-0-1,readonly=on -device
ide-cd,bus=ide.0,unit=1,drive=drive-ide0-0-1,id=ide0-0-1 -chardev
socket,id=charnet0,path=/var/run/openvswitch/vhost-user1 -netdev
type=vhost-user,id=hostnet0,chardev=charnet0,queues=4 -device
virtio-net-pci,mrg_rxbuf=on,mq=on,vectors=10,netdev=hostnet0,id=net0,mac=00:00:00:00:00:01,bus=pci.0,addr=0x7
                
-chardev pty,id=charserial0 -device
isa-serial,chardev=charserial0,id=serial0 -chardev
spicevmc,id=charchannel0,name=vdagent -device
virtserialport,bus=virtio-serial0.0,nr=1,chardev=charchannel0,id=channel0,name=com.redhat.spice.0
                
-spice
port=5900,addr=127.0.0.1,disable-ticketing,image-compression=off,seamless-migration=on
                
-device
qxl-vga,id=video0,ram_size=67108864,vram_size=67108864,vgamem_mb=16,bus=pci.0,addr=0x2
                
-device intel-hda,id=sound0,bus=pci.0,addr=0x3 -device
hda-duplex,id=sound0-codec0,bus=sound0.0,cad=0 -chardev
spicevmc,id=charredir0,name=usbredir -device
usb-redir,chardev=charredir0,id=redir0 -chardev
spicevmc,id=charredir1,name=usbredir -device
usb-redir,chardev=charredir1,id=redir1 -device
virtio-balloon-pci,id=balloon0,bus=pci.0,addr=0x6 -msg timestamp=on
Mar 28 18:35:57 dpdk-OptiPlex-5040 libvirtd.service: 1530: debug :
virCommandRunAsync:2432 : Command result 0, with PID 10211
Mar 28 18:35:58 dpdk-OptiPlex-5040 libvirtd.service: 1530: debug :
virCommandRun:2280 : Result status 0, stdout: '(null)' stderr: '(null)'
Mar 28 18:35:58 dpdk-OptiPlex-5040 libvirtd.service: 1530: debug :
virCommandHandshakeWait:2663 : Wait for handshake on 26
Mar 28 18:35:58 dpdk-OptiPlex-5040 libvirtd.service: 1530: debug :
virCommandHandshakeNotify:2729 : Notify handshake on 30
*Mar 28 18:35:58 dpdk-OptiPlex-5040 libvirtd.service: 1530: error :
qemuMonitorOpenUnix:374 : failed to connect to monitor socket: No such
process*
*Mar 28 18:35:58 dpdk-OptiPlex-5040 libvirtd.service: 1530: error :
qemuProcessReportLogError:1709 : internal error: process exited while
connecting to monitor: 2019-03-28T13:05:58.059732Z qemu-system-x86_64:
-object
memory-backend-file,id=ram-node0,prealloc=yes,mem-path=/dev/hugepages/libvirt/qemu,share=yes,size=2147483648:
 failed to get page size of file /dev/hugepages/libvirt/qemu: No such file
or directory*
*Mar 28 18:35:58 dpdk-OptiPlex-5040 virtlogd[6704]: End of file while
reading data: Input/output error*
*Mar 28 18:35:58 dpdk-OptiPlex-5040 virtlogd[6704]: End of file while
reading data: Input/output error*
Mar 28 18:40:01 dpdk-OptiPlex-5040 libvirtd.service: 1531: debug :
virCommandRunAsync:2429 : About to run LIBVIRT_LOG_OUTPUTS=3:stderr
/usr/lib/libvirt/virt-aa-helper -p 0 -r -u
libvirt-41b4eef0-b820-41da-9034-9de22e1379e0
Mar 28 18:40:01 dpdk-OptiPlex-5040 libvirtd.service: 1531: debug :
virCommandRunAsync:2432 : Command result 0, with PID 10463
Mar 28 18:40:02 dpdk-OptiPlex-5040 libvirtd.service: 1531: debug :
virCommandRun:2280 : Result status 0, stdout: '' stderr: ''
Mar 28 18:40:02 dpdk-OptiPlex-5040 kernel: [ 6241.005871] audit: type=1400
audit(1553778602.467:46): apparmor="STATUS" operation="profile_replace"
info="same as current profile, skipping" profile="unconfined"
name="libvirt-41b4eef0-b820-41da-9034-9de22e1379e0" pid=10465
comm="apparmor_parser"
Mar 28 18:40:02 dpdk-OptiPlex-5040 kernel: [ 6241.006062] audit: type=1400
audit(1553778602.467:47): apparmor="STATUS" operation="profile_replace"
info="same as current profile, skipping" profile="unconfined"
name="libvirt-41b4eef0-b820-41da-9034-9de22e1379e0//qemu_bridge_helper"
pid=10465 comm="apparmor_parser"
Mar 28 18:40:02 dpdk-OptiPlex-5040 libvirtd.service: 1531: debug :
virCommandRequireHandshake:2628 : Transfer handshake wait=29 notify=30,
keep handshake wait=27 notify=31
Mar 28 18:40:02 dpdk-OptiPlex-5040 libvirtd.service: 1531: debug :
virCommandRunAsync:2429 : About to run LC_ALL=C
PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
QEMU_AUDIO_DRV=spice /usr/bin/kvm-spice -name VM1 -S -machine
pc-i440fx-xenial,accel=kvm,usb=off -cpu
Broadwell-IBRS,+mpx,+ssbd,+abm,+pdpe1gb,+rdrand,+f16c,+osxsave,+pdcm,+xtpr,+tm2,+est,+smx,+vmx,+ds_cpl,+monitor,+dtes64,+pbe,+tm,+ht,+ss,+acpi,+ds,+vme
                
-m 2048 -realtime mlock=off -smp 2,sockets=1,cores=2,threads=1 -object
memory-backend-file,id=ram-node0,prealloc=yes,mem-path=/dev/hugepages/libvirt/qemu,share=yes,size=2147483648
                
-numa node,nodeid=0,cpus=0-1,memdev=ram-node0 -uuid
41b4eef0-b820-41da-9034-9de22e1379e0 -no-user-config -nodefaults -chardev
socket,id=charmonitor,path=/var/lib/libvirt/qemu/domain-VM1/monitor.sock,server,nowait
                
-mon chardev=charmonitor,id=monitor,mode=control -rtc
base=utc,driftfix=slew -global kvm-pit.lost_tick_policy=discard -no-hpet
-no-shutdown -global PIIX4_PM.disable_s3=1 -global PIIX4_PM.disable_s4=1
-boot strict=on -device ich9-usb-ehci1,id=usb,bus=pci.0,addr=0x5.0x7
-device
ich9-usb-uhci1,masterbus=usb.0,firstport=0,bus=pci.0,multifunction=on,addr=0x5
-device ich9-usb-uhci2,masterbus=usb.0,firstport=2,bus=pci.0,addr=0x5.0x1
-device ich9-usb-uhci3,masterbus=usb.0,firstport=4,bus=pci.0,addr=0x5.0x2
-device virtio-serial-pci,id=virtio-serial0,bus=pci.0,addr=0x4 -drive
file=/var/lib/libvirt/images/VM1-1.qcow2,format=qcow2,if=none,id=drive-ide0-0-0
-device
ide-hd,bus=ide.0,unit=0,drive=drive-ide0-0-0,id=ide0-0-0,bootindex=1 -drive
if=none,id=drive-ide0-0-1,readonly=on -device
ide-cd,bus=ide.0,unit=1,drive=drive-ide0-0-1,id=ide0-0-1 -chardev
socket,id=charnet0,path=/var/run/openvswitch/vhost-user1 -netdev
type=vhost-user,id=hostnet0,chardev=charnet0,queues=4 -device
virtio-net-pci,mrg_rxbuf=on,mq=on,vectors=10,netdev=hostnet0,id=net0,mac=00:00:00:00:00:01,bus=pci.0,addr=0x7
                
-chardev pty,id=charserial0 -device
isa-serial,chardev=charserial0,id=serial0 -chardev
spicevmc,id=charchannel0,name=vdagent -device
virtserialport,bus=virtio-serial0.0,nr=1,chardev=charchannel0,id=channel0,name=com.redhat.spice.0
                
-spice
port=5900,addr=127.0.0.1,disable-ticketing,image-compression=off,seamless-migration=on
                
-device
qxl-vga,id=video0,ram_size=67108864,vram_size=67108864,vgamem_mb=16,bus=pci.0,addr=0x2
                
-device intel-hda,id=sound0,bus=pci.0,addr=0x3 -device
hda-duplex,id=sound0-codec0,bus=sound0.0,cad=0 -chardev
spicevmc,id=charredir0,name=usbredir -device
usb-redir,chardev=charredir0,id=redir0 -chardev
spicevmc,id=charredir1,name=usbredir -device
usb-redir,chardev=charredir1,id=redir1 -device
virtio-balloon-pci,id=balloon0,bus=pci.0,addr=0x6 -msg timestamp=on
Mar 28 18:40:02 dpdk-OptiPlex-5040 libvirtd.service: 1531: debug :
virCommandRunAsync:2432 : Command result 0, with PID 10467
Mar 28 18:40:02 dpdk-OptiPlex-5040 libvirtd.service: 1531: debug :
virCommandRun:2280 : Result status 0, stdout: '(null)' stderr: '(null)'
Mar 28 18:40:02 dpdk-OptiPlex-5040 libvirtd.service: 1531: debug :
virCommandHandshakeWait:2663 : Wait for handshake on 27
Mar 28 18:40:02 dpdk-OptiPlex-5040 libvirtd.service: 1531: debug :
virCommandHandshakeNotify:2729 : Notify handshake on 31
*Mar 28 18:40:02 dpdk-OptiPlex-5040 libvirtd.service: 1531: error :
qemuMonitorOpenUnix:374 : failed to connect to monitor socket: No such
process*
*Mar 28 18:40:02 dpdk-OptiPlex-5040 libvirtd.service: 1531: error :
qemuProcessReportLogError:1709 : internal error: process exited while
connecting to monitor: 2019-03-28T13:10:02.731557Z qemu-system-x86_64:
-object
memory-backend-file,id=ram-node0,prealloc=yes,mem-path=/dev/hugepages/libvirt/qemu,share=yes,size=2147483648:
 failed to get page size of file /dev/hugepages/libvirt/qemu: No such file
or directory*
*Mar 28 18:40:02 dpdk-OptiPlex-5040 virtlogd[6704]: End of file while
reading data: Input/output error*
*Mar 28 18:40:02 dpdk-OptiPlex-5040 virtlogd[6704]: End of file while
reading data: Input/output error*
Mar 28 18:41:35 dpdk-OptiPlex-5040 libvirtd.service: 1531: debug :
virCommandRunAsync:2429 : About to run LIBVIRT_LOG_OUTPUTS=3:stderr
/usr/lib/libvirt/virt-aa-helper -p 0 -r -u
libvirt-41b4eef0-b820-41da-9034-9de22e1379e0
Mar 28 18:41:35 dpdk-OptiPlex-5040 libvirtd.service: 1531: debug :
virCommandRunAsync:2432 : Command result 0, with PID 10538
Mar 28 18:41:35 dpdk-OptiPlex-5040 libvirtd.service: 1531: debug :
virCommandRun:2280 : Result status 0, stdout: '' stderr: ''
Mar 28 18:41:35 dpdk-OptiPlex-5040 kernel: [ 6334.272454] audit: type=1400
audit(1553778695.735:48): apparmor="STATUS" operation="profile_replace"
info="same as current profile, skipping" profile="unconfined"
name="libvirt-41b4eef0-b820-41da-9034-9de22e1379e0" pid=10540
comm="apparmor_parser"
Mar 28 18:41:35 dpdk-OptiPlex-5040 kernel: [ 6334.272734] audit: type=1400
audit(1553778695.735:49): apparmor="STATUS" operation="profile_replace"
info="same as current profile, skipping" profile="unconfined"
name="libvirt-41b4eef0-b820-41da-9034-9de22e1379e0//qemu_bridge_helper"
pid=10540 comm="apparmor_parser"
Mar 28 18:41:35 dpdk-OptiPlex-5040 libvirtd.service: 1531: debug :
virCommandRequireHandshake:2628 : Transfer handshake wait=29 notify=30,
keep handshake wait=27 notify=31
Mar 28 18:41:35 dpdk-OptiPlex-5040 libvirtd.service: 1531: debug :
virCommandRunAsync:2429 : About to run LC_ALL=C
PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
QEMU_AUDIO_DRV=spice /usr/bin/kvm-spice -name VM1 -S -machine
pc-i440fx-xenial,accel=kvm,usb=off -cpu
Broadwell-IBRS,+mpx,+ssbd,+abm,+pdpe1gb,+rdrand,+f16c,+osxsave,+pdcm,+xtpr,+tm2,+est,+smx,+vmx,+ds_cpl,+monitor,+dtes64,+pbe,+tm,+ht,+ss,+acpi,+ds,+vme
                
-m 2048 -realtime mlock=off -smp 2,sockets=1,cores=2,threads=1 -object
memory-backend-file,id=ram-node0,prealloc=yes,mem-path=/dev/hugepages/libvirt/qemu,share=yes,size=2147483648
                
-numa node,nodeid=0,cpus=0-1,memdev=ram-node0 -uuid
41b4eef0-b820-41da-9034-9de22e1379e0 -no-user-config -nodefaults -chardev
socket,id=charmonitor,path=/var/lib/libvirt/qemu/domain-VM1/monitor.sock,server,nowait
                
-mon chardev=charmonitor,id=monitor,mode=control -rtc
base=utc,driftfix=slew -global kvm-pit.lost_tick_policy=discard -no-hpet
-no-shutdown -global PIIX4_PM.disable_s3=1 -global PIIX4_PM.disable_s4=1
-boot strict=on -device ich9-usb-ehci1,id=usb,bus=pci.0,addr=0x5.0x7
-device
ich9-usb-uhci1,masterbus=usb.0,firstport=0,bus=pci.0,multifunction=on,addr=0x5
-device ich9-usb-uhci2,masterbus=usb.0,firstport=2,bus=pci.0,addr=0x5.0x1
-device ich9-usb-uhci3,masterbus=usb.0,firstport=4,bus=pci.0,addr=0x5.0x2
-device virtio-serial-pci,id=virtio-serial0,bus=pci.0,addr=0x4 -drive
file=/var/lib/libvirt/images/VM1-1.qcow2,format=qcow2,if=none,id=drive-ide0-0-0
-device
ide-hd,bus=ide.0,unit=0,drive=drive-ide0-0-0,id=ide0-0-0,bootindex=1 -drive
if=none,id=drive-ide0-0-1,readonly=on -device
ide-cd,bus=ide.0,unit=1,drive=drive-ide0-0-1,id=ide0-0-1 -chardev
socket,id=charnet0,path=/var/run/openvswitch/vhost-user1 -netdev
type=vhost-user,id=hostnet0,chardev=charnet0,queues=4 -device
virtio-net-pci,mrg_rxbuf=on,mq=on,vectors=10,netdev=hostnet0,id=net0,mac=00:00:00:00:00:01,bus=pci.0,addr=0x7
                
-chardev pty,id=charserial0 -device
isa-serial,chardev=charserial0,id=serial0 -chardev
spicevmc,id=charchannel0,name=vdagent -device
virtserialport,bus=virtio-serial0.0,nr=1,chardev=charchannel0,id=channel0,name=com.redhat.spice.0
                
-spice
port=5900,addr=127.0.0.1,disable-ticketing,image-compression=off,seamless-migration=on
                
-device
qxl-vga,id=video0,ram_size=67108864,vram_size=67108864,vgamem_mb=16,bus=pci.0,addr=0x2
                
-device intel-hda,id=sound0,bus=pci.0,addr=0x3 -device
hda-duplex,id=sound0-codec0,bus=sound0.0,cad=0 -chardev
spicevmc,id=charredir0,name=usbredir -device
usb-redir,chardev=charredir0,id=redir0 -chardev
spicevmc,id=charredir1,name=usbredir -device
usb-redir,chardev=charredir1,id=redir1 -device
virtio-balloon-pci,id=balloon0,bus=pci.0,addr=0x6 -msg timestamp=on
Mar 28 18:41:35 dpdk-OptiPlex-5040 libvirtd.service: 1531: debug :
virCommandRunAsync:2432 : Command result 0, with PID 10542
Mar 28 18:41:35 dpdk-OptiPlex-5040 libvirtd.service: 1531: debug :
virCommandRun:2280 : Result status 0, stdout: '(null)' stderr: '(null)'
Mar 28 18:41:35 dpdk-OptiPlex-5040 libvirtd.service: 1531: debug :
virCommandHandshakeWait:2663 : Wait for handshake on 27
Mar 28 18:41:35 dpdk-OptiPlex-5040 libvirtd.service: 1531: debug :
virCommandHandshakeNotify:2729 : Notify handshake on 31
*Mar 28 18:41:36 dpdk-OptiPlex-5040 libvirtd.service: 1531: error :
qemuMonitorOpenUnix:374 : failed to connect to monitor socket: No such
process*
*Mar 28 18:41:36 dpdk-OptiPlex-5040 libvirtd.service: 1531: error :
qemuProcessReportLogError:1709 : internal error: process exited while
connecting to monitor: 2019-03-28T13:11:35.990304Z qemu-system-x86_64:
-object
memory-backend-file,id=ram-node0,prealloc=yes,mem-path=/dev/hugepages/libvirt/qemu,share=yes,size=2147483648:
 failed to get page size of file /dev/hugepages/libvirt/qemu: No such file
or directory*
*Mar 28 18:41:36 dpdk-OptiPlex-5040 virtlogd[6704]: End of file while
reading data: Input/output error*
*Mar 28 18:41:36 dpdk-OptiPlex-5040 virtlogd[6704]: End of file while
reading data: Input/output error*
Mar 28 18:44:55 dpdk-OptiPlex-5040 systemd-timesyncd[863]: Timed out
waiting for reply from 91.189.89.198:123 (ntp.ubuntu.com).
Mar 28 18:45:05 dpdk-OptiPlex-5040 systemd-timesyncd[863]: Timed out
waiting for reply from 91.189.89.199:123 (ntp.ubuntu.com).
Mar 28 18:45:15 dpdk-OptiPlex-5040 systemd-timesyncd[863]: Timed out
waiting for reply from 91.189.91.157:123 (ntp.ubuntu.com).
Mar 28 18:45:25 dpdk-OptiPlex-5040 systemd-timesyncd[863]: Timed out
waiting for reply from 91.189.94.4:123 (ntp.ubuntu.com).
Mar 28 18:49:39 dpdk-OptiPlex-5040 libvirtd.service: 1531: debug :
virCommandRunAsync:2429 : About to run LIBVIRT_LOG_OUTPUTS=3:stderr
/usr/lib/libvirt/virt-aa-helper -p 0 -r -u
libvirt-41b4eef0-b820-41da-9034-9de22e1379e0
Mar 28 18:49:39 dpdk-OptiPlex-5040 libvirtd.service: 1531: debug :
virCommandRunAsync:2432 : Command result 0, with PID 10907
Mar 28 18:49:39 dpdk-OptiPlex-5040 libvirtd.service: 1531: debug :
virCommandRun:2280 : Result status 0, stdout: '' stderr: ''
Mar 28 18:49:39 dpdk-OptiPlex-5040 kernel: [ 6818.424713] audit: type=1400
audit(1553779179.887:50): apparmor="STATUS" operation="profile_replace"
info="same as current profile, skipping" profile="unconfined"
name="libvirt-41b4eef0-b820-41da-9034-9de22e1379e0" pid=10910
comm="apparmor_parser"
Mar 28 18:49:39 dpdk-OptiPlex-5040 kernel: [ 6818.424938] audit: type=1400
audit(1553779179.887:51): apparmor="STATUS" operation="profile_replace"
info="same as current profile, skipping" profile="unconfined"
name="libvirt-41b4eef0-b820-41da-9034-9de22e1379e0//qemu_bridge_helper"
pid=10910 comm="apparmor_parser"
Mar 28 18:49:39 dpdk-OptiPlex-5040 libvirtd.service: 1531: debug :
virCommandRequireHandshake:2628 : Transfer handshake wait=29 notify=30,
keep handshake wait=27 notify=31
Mar 28 18:49:39 dpdk-OptiPlex-5040 libvirtd.service: 1531: debug :
virCommandRunAsync:2429 : About to run LC_ALL=C
PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
QEMU_AUDIO_DRV=spice /usr/bin/kvm-spice -name VM1 -S -machine
pc-i440fx-xenial,accel=kvm,usb=off -cpu
Broadwell-IBRS,+mpx,+ssbd,+abm,+pdpe1gb,+rdrand,+f16c,+osxsave,+pdcm,+xtpr,+tm2,+est,+smx,+vmx,+ds_cpl,+monitor,+dtes64,+pbe,+tm,+ht,+ss,+acpi,+ds,+vme
                
-m 2048 -realtime mlock=off -smp 2,sockets=1,cores=2,threads=1 -object
memory-backend-file,id=ram-node0,prealloc=yes,mem-path=/dev/hugepages/libvirt/qemu,share=yes,size=2147483648
                
-numa node,nodeid=0,cpus=0-1,memdev=ram-node0 -uuid
41b4eef0-b820-41da-9034-9de22e1379e0 -no-user-config -nodefaults -chardev
socket,id=charmonitor,path=/var/lib/libvirt/qemu/domain-VM1/monitor.sock,server,nowait
                
-mon chardev=charmonitor,id=monitor,mode=control -rtc
base=utc,driftfix=slew -global kvm-pit.lost_tick_policy=discard -no-hpet
-no-shutdown -global PIIX4_PM.disable_s3=1 -global PIIX4_PM.disable_s4=1
-boot strict=on -device ich9-usb-ehci1,id=usb,bus=pci.0,addr=0x5.0x7
-device
ich9-usb-uhci1,masterbus=usb.0,firstport=0,bus=pci.0,multifunction=on,addr=0x5
-device ich9-usb-uhci2,masterbus=usb.0,firstport=2,bus=pci.0,addr=0x5.0x1
-device ich9-usb-uhci3,masterbus=usb.0,firstport=4,bus=pci.0,addr=0x5.0x2
-device virtio-serial-pci,id=virtio-serial0,bus=pci.0,addr=0x4 -drive
file=/var/lib/libvirt/images/VM1-1.qcow2,format=qcow2,if=none,id=drive-ide0-0-0
-device
ide-hd,bus=ide.0,unit=0,drive=drive-ide0-0-0,id=ide0-0-0,bootindex=1 -drive
if=none,id=drive-ide0-0-1,readonly=on -device
ide-cd,bus=ide.0,unit=1,drive=drive-ide0-0-1,id=ide0-0-1 -chardev
socket,id=charnet0,path=/var/run/openvswitch/vhost-user1 -netdev
type=vhost-user,id=hostnet0,chardev=charnet0,queues=4 -device
virtio-net-pci,mrg_rxbuf=on,mq=on,vectors=10,netdev=hostnet0,id=net0,mac=00:00:00:00:00:01,bus=pci.0,addr=0x7
                
-chardev pty,id=charserial0 -device
isa-serial,chardev=charserial0,id=serial0 -chardev
spicevmc,id=charchannel0,name=vdagent -device
virtserialport,bus=virtio-serial0.0,nr=1,chardev=charchannel0,id=channel0,name=com.redhat.spice.0
                
-spice
port=5900,addr=127.0.0.1,disable-ticketing,image-compression=off,seamless-migration=on
                
-device
qxl-vga,id=video0,ram_size=67108864,vram_size=67108864,vgamem_mb=16,bus=pci.0,addr=0x2
                
-device intel-hda,id=sound0,bus=pci.0,addr=0x3 -device
hda-duplex,id=sound0-codec0,bus=sound0.0,cad=0 -chardev
spicevmc,id=charredir0,name=usbredir -device
usb-redir,chardev=charredir0,id=redir0 -chardev
spicevmc,id=charredir1,name=usbredir -device
usb-redir,chardev=charredir1,id=redir1 -device
virtio-balloon-pci,id=balloon0,bus=pci.0,addr=0x6 -msg timestamp=on
Mar 28 18:49:39 dpdk-OptiPlex-5040 libvirtd.service: 1531: debug :
virCommandRunAsync:2432 : Command result 0, with PID 10912
Mar 28 18:49:40 dpdk-OptiPlex-5040 libvirtd.service: 1531: debug :
virCommandRun:2280 : Result status 0, stdout: '(null)' stderr: '(null)'
Mar 28 18:49:40 dpdk-OptiPlex-5040 libvirtd.service: 1531: debug :
virCommandHandshakeWait:2663 : Wait for handshake on 27
Mar 28 18:49:40 dpdk-OptiPlex-5040 libvirtd.service: 1531: debug :
virCommandHandshakeNotify:2729 : Notify handshake on 31
*Mar 28 18:49:40 dpdk-OptiPlex-5040 libvirtd.service: 1531: error :
qemuMonitorOpenUnix:374 : failed to connect to monitor socket: No such
process*
*Mar 28 18:49:40 dpdk-OptiPlex-5040 libvirtd.service: 1531: error :
qemuProcessReportLogError:1709 : internal error: process exited while
connecting to monitor: 2019-03-28T13:19:40.147316Z qemu-system-x86_64:
-object
memory-backend-file,id=ram-node0,prealloc=yes,mem-path=/dev/hugepages/libvirt/qemu,share=yes,size=2147483648:
 failed to get page size of file /dev/hugepages/libvirt/qemu: No such file
or directory*
Mar 28 18:49:40 dpdk-OptiPlex-5040 virtlogd[6704]: End of file while
reading data: Input/output error


This is my  domain xml file

&lt;domain type='kvm'&gt;
  &lt;name&gt;VM1&lt;/name&gt;
  &lt;uuid&gt;41b4eef0-b820-41da-9034-9de22e1379e0&lt;/uuid&gt;
  &lt;memory unit='KiB'&gt;2097152&lt;/memory&gt;
  &lt;currentMemory unit='KiB'&gt;2097152&lt;/currentMemory&gt;
  &lt;memoryBacking&gt;
    &lt;hugepages&gt;
      &lt;page size='1048576' unit='KiB' nodeset='0'/&gt;
    &lt;/hugepages&gt;
  &lt;/memoryBacking&gt;
  &lt;vcpu placement='static'&gt;2&lt;/vcpu&gt;
  &lt;cputune&gt;
    &lt;vcpupin vcpu='0' cpuset='4-5'/&gt;
    &lt;vcpupin vcpu='1' cpuset='6-7'/&gt;
    &lt;emulatorpin cpuset='4-7'/&gt;
  &lt;/cputune&gt;
  &lt;os&gt;
    &lt;type arch='x86_64' machine='pc-i440fx-xenial'&gt;hvm&lt;/type&gt;
    &lt;boot dev='hd'/&gt;
  &lt;/os&gt;
  &lt;features&gt;
    &lt;acpi/&gt;
    &lt;apic/&gt;
  &lt;/features&gt;
  &lt;cpu mode='host-model'&gt;
    &lt;model fallback='allow'/&gt;
    &lt;topology sockets='1' cores='2' threads='1'/&gt;
    &lt;numa&gt;
      &lt;cell id='0' cpus='0-1' memory='2097152' unit='KiB'
memAccess='shared'/&gt;
    &lt;/numa&gt;
  &lt;/cpu&gt;
  &lt;clock offset='utc'&gt;
    &lt;timer name='rtc' tickpolicy='catchup'/&gt;
    &lt;timer name='pit' tickpolicy='delay'/&gt;
    &lt;timer name='hpet' present='no'/&gt;
  &lt;/clock&gt;
  &lt;on_poweroff&gt;destroy&lt;/on_poweroff&gt;
  &lt;on_reboot&gt;restart&lt;/on_reboot&gt;
  &lt;on_crash&gt;restart&lt;/on_crash&gt;
  &lt;pm&gt;
    &lt;suspend-to-mem enabled='no'/&gt;
    &lt;suspend-to-disk enabled='no'/&gt;
  &lt;/pm&gt;
  &lt;devices&gt;
    &lt;emulator&gt;/usr/bin/kvm-spice&lt;/emulator&gt;
    &lt;disk type='file' device='disk'&gt;
      &lt;driver name='qemu' type='qcow2'/&gt;
      &lt;source file='/var/lib/libvirt/images/VM1-1.qcow2'/&gt;
      &lt;target dev='hda' bus='ide'/&gt;
      &lt;address type='drive' controller='0' bus='0' target='0' unit='0'/&gt;
    &lt;/disk&gt;
    &lt;disk type='file' device='cdrom'&gt;
      &lt;driver name='qemu' type='raw'/&gt;
      &lt;target dev='hdb' bus='ide'/&gt;
      &lt;readonly/&gt;
      &lt;address type='drive' controller='0' bus='0' target='0' unit='1'/&gt;
    &lt;/disk&gt;
    &lt;controller type='usb' index='0' model='ich9-ehci1'&gt;
      &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x05'
function='0x7'/&gt;
    &lt;/controller&gt;
    &lt;controller type='usb' index='0' model='ich9-uhci1'&gt;
      &lt;master startport='0'/&gt;
      &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x05'
function='0x0' multifunction='on'/&gt;
    &lt;/controller&gt;
    &lt;controller type='usb' index='0' model='ich9-uhci2'&gt;
      &lt;master startport='2'/&gt;
      &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x05'
function='0x1'/&gt;
    &lt;/controller&gt;
    &lt;controller type='usb' index='0' model='ich9-uhci3'&gt;
      &lt;master startport='4'/&gt;
      &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x05'
function='0x2'/&gt;
    &lt;/controller&gt;
    &lt;controller type='pci' index='0' model='pci-root'/&gt;
    &lt;controller type='ide' index='0'&gt;
      &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x01'
function='0x1'/&gt;
    &lt;/controller&gt;
    &lt;controller type='virtio-serial' index='0'&gt;
      &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x04'
function='0x0'/&gt;
    &lt;/controller&gt;
    &lt;interface type='vhostuser'&gt;
      &lt;mac address='00:00:00:00:00:01'/&gt;
      &lt;source type='unix' path='/var/run/openvswitch/vhost-user1'
mode='client'/&gt;
      &lt;model type='virtio'/&gt;
      &lt;driver queues='4'&gt;
        &lt;host mrg_rxbuf='on'/&gt;
      &lt;/driver&gt;
      &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x07'
function='0x0'/&gt;
    &lt;/interface&gt;
    &lt;serial type='pty'&gt;
      &lt;target port='0'/&gt;
    &lt;/serial&gt;
    &lt;console type='pty'&gt;
      &lt;target type='serial' port='0'/&gt;
    &lt;/console&gt;
    &lt;channel type='spicevmc'&gt;
      &lt;target type='virtio' name='com.redhat.spice.0'/&gt;
      &lt;address type='virtio-serial' controller='0' bus='0' port='1'/&gt;
    &lt;/channel&gt;
    &lt;input type='mouse' bus='ps2'/&gt;
    &lt;input type='keyboard' bus='ps2'/&gt;
    &lt;graphics type='spice' autoport='yes'&gt;
      &lt;image compression='off'/&gt;
    &lt;/graphics&gt;
    &lt;sound model='ich6'&gt;
      &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x03'
function='0x0'/&gt;
    &lt;/sound&gt;
    &lt;video&gt;
      &lt;model type='qxl' ram='65536' vram='65536' vgamem='16384' heads='1'/&gt;
      &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x02'
function='0x0'/&gt;
    &lt;/video&gt;
    &lt;redirdev bus='usb' type='spicevmc'&gt;
    &lt;/redirdev&gt;
    &lt;redirdev bus='usb' type='spicevmc'&gt;
    &lt;/redirdev&gt;
    &lt;memballoon model='virtio'&gt;
      &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x06'
function='0x0'/&gt;
    &lt;/memballoon&gt;
  &lt;/devices&gt;
&lt;/domain&gt;

Sorry if I am not supposed to send such a long message. But, it turns out
that I don't know where exactly is an error occurring.


[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;I am trying to connect a KVM-QEMU VM to \
OVS-DPDK vhostuser  port. But, I am encountering a few errors. Since I am very new to \
libvrt and Linux I am not able to sort them out. Any guidance in this regard would be \
a great help.&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;These are my System \
Logs:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;Mar 28 18:03:04 dpdk-OptiPlex-5040 \
libvirtd.service: 1529: debug : virCommandRunAsync:2429 : About to run \
LIBVIRT_LOG_OUTPUTS=3:stderr /usr/lib/libvirt/virt-aa-helper -p 0 -r -u \
libvirt-41b4eef0-b820-41da-9034-9de22e1379e0&lt;/div&gt;&lt;div&gt;Mar 28 18:03:04 \
dpdk-OptiPlex-5040 libvirtd.service: 1529: debug : virCommandRunAsync:2432 : Command \
result 0, with PID 8687&lt;/div&gt;&lt;div&gt;Mar 28 18:03:04 dpdk-OptiPlex-5040 \
libvirtd.service: 1529: debug : virCommandRun:2280 : Result status 0, stdout: \
'' stderr: ''&lt;/div&gt;&lt;div&gt;Mar 28 18:03:04 dpdk-OptiPlex-5040 \
libvirtd.service: 1529: warning : qemuProcessLaunch:4807 : Detected vhost-user \
interface without any shared memory, the interface might not be \
operational&lt;/div&gt;&lt;div&gt;Mar 28 18:03:04 dpdk-OptiPlex-5040 kernel: [ 4023.292264] \
audit: type=1400 audit(1553776384.755:31): apparmor="STATUS" \
operation="profile_replace" info="same as current profile, \
skipping" profile="unconfined" \
name="libvirt-41b4eef0-b820-41da-9034-9de22e1379e0" pid=8689 \
comm="apparmor_parser"&lt;/div&gt;&lt;div&gt;Mar 28 18:03:04 dpdk-OptiPlex-5040 kernel: \
[ 4023.292503] audit: type=1400 audit(1553776384.755:32): apparmor="STATUS" \
operation="profile_replace" info="same as current profile, \
skipping" profile="unconfined" \
name="libvirt-41b4eef0-b820-41da-9034-9de22e1379e0//qemu_bridge_helper" \
pid=8689 comm="apparmor_parser"&lt;/div&gt;&lt;div&gt;Mar 28 18:03:04 \
dpdk-OptiPlex-5040 libvirtd.service: 1529: debug : virCommandRequireHandshake:2628 : \
Transfer handshake wait=29 notify=30, keep handshake wait=27 notify=31&lt;/div&gt;&lt;div&gt;Mar \
28 18:03:04 dpdk-OptiPlex-5040 libvirtd.service: 1529: debug : \
virCommandRunAsync:2429 : About to run LC_ALL=C \
PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin \
QEMU_AUDIO_DRV=spice /usr/bin/kvm-spice -name VM1 -S -machine \
pc-i440fx-xenial,accel=kvm,usb=off -cpu Broadwell-IBRS -m 3072 -mem-prealloc \
-mem-path /dev/hugepages/libvirt/qemu -realtime mlock=off -smp \
2,sockets=2,cores=1,threads=1 -uuid 41b4eef0-b820-41da-9034-9de22e1379e0 \
-no-user-config -nodefaults -chardev \
socket,id=charmonitor,path=/var/lib/libvirt/qemu/domain-VM1/monitor.sock,server,nowait \
-mon chardev=charmonitor,id=monitor,mode=control -rtc base=utc,driftfix=slew -global \
kvm-pit.lost_tick_policy=discard -no-hpet -no-shutdown -global PIIX4_PM.disable_s3=1 \
-global PIIX4_PM.disable_s4=1 -boot strict=on -device \
ich9-usb-ehci1,id=usb,bus=pci.0,addr=0x5.0x7 -device \
ich9-usb-uhci1,masterbus=usb.0,firstport=0,bus=pci.0,multifunction=on,addr=0x5 \
-device ich9-usb-uhci2,masterbus=usb.0,firstport=2,bus=pci.0,addr=0x5.0x1 -device \
ich9-usb-uhci3,masterbus=usb.0,firstport=4,bus=pci.0,addr=0x5.0x2 -device \
virtio-serial-pci,id=virtio-serial0,bus=pci.0,addr=0x4 -drive \
file=/var/lib/libvirt/images/VM1-1.qcow2,format=qcow2,if=none,id=drive-ide0-0-0 \
-device ide-hd,bus=ide.0,unit=0,drive=drive-ide0-0-0,id=ide0-0-0,bootindex=1 -drive \
if=none,id=drive-ide0-0-1,readonly=on -device \
ide-cd,bus=ide.0,unit=1,drive=drive-ide0-0-1,id=ide0-0-1 -chardev \
socket,id=charnet0,path=/var/run/openvswitch/vhost-user1 -netdev \
type=vhost-user,id=hostnet0,chardev=charnet0,queues=4 -device \
virtio-net-pci,mrg_rxbuf=on,mq=on,vectors=10,netdev=hostnet0,id=net0,mac=00:00:00:00:00:01,bus=pci.0,addr=0x7 \
-chardev pty,id=charserial0 -device isa-serial,chardev=charserial0,id=serial0 \
-chardev spicevmc,id=charchannel0,name=vdagent -device \
virtserialport,bus=virtio-serial0.0,nr=1,chardev=charchannel0,id=channel0,name=com.redhat.spice.0 \
-spice port=5900,addr=127.0.0.1,disable-ticketing,image-compression=off,seamless-migration=on \
-device qxl-vga,id=video0,ram_size=67108864,vram_size=67108864,vgamem_mb=16,bus=pci.0,addr=0x2 \
-device intel-hda,id=sound0,bus=pci.0,addr=0x3 -device \
hda-duplex,id=sound0-codec0,bus=sound0.0,cad=0 -chardev \
spicevmc,id=charredir0,name=usbredir -device usb-redir,chardev=charredir0,id=redir0 \
-chardev spicevmc,id=charredir1,name=usbredir -device \
usb-redir,chardev=charredir1,id=redir1 -device \
virtio-balloon-pci,id=balloon0,bus=pci.0,addr=0x6 -msg timestamp=on&lt;/div&gt;&lt;div&gt;Mar 28 \
18:03:04 dpdk-OptiPlex-5040 libvirtd.service: 1529: debug : virCommandRunAsync:2432 : \
Command result 0, with PID 8692&lt;/div&gt;&lt;div&gt;Mar 28 18:03:04 dpdk-OptiPlex-5040 \
libvirtd.service: 1529: debug : virCommandRun:2280 : Result status 0, stdout: \
'(null)' stderr: '(null)'&lt;/div&gt;&lt;div&gt;Mar 28 18:03:04 \
dpdk-OptiPlex-5040 libvirtd.service: 1529: debug : virCommandHandshakeWait:2663 : \
Wait for handshake on 27&lt;/div&gt;&lt;div&gt;Mar 28 18:03:04 dpdk-OptiPlex-5040 \
libvirtd.service: 1529: debug : virCommandHandshakeNotify:2729 : Notify handshake on \
31&lt;/div&gt;&lt;div&gt;&lt;b&gt;Mar 28 18:03:05 dpdk-OptiPlex-5040 libvirtd.service: 1351: error : \
qemuMonitorIORead:599 : Unable to read from monitor: Connection reset by \
peer&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;Mar 28 18:03:05 dpdk-OptiPlex-5040 libvirtd.service: 1351: \
error : qemuProcessReportLogError:1709 : internal error: early end of file from \
monitor, possible problem: 2019-03-28T12:33:05.007674Z qemu-system-x86_64: -chardev \
socket,id=charnet0,path=/var/run/openvswitch/vhost-user1: Failed to connect socket: \
Permission denied&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;Mar 28 18:03:05 dpdk-OptiPlex-5040 virtlogd[6704]: \
Cannot open log file: '/var/log/libvirt/qemu/VM1.log': Device or resource \
busy&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;Mar 28 18:03:05 dpdk-OptiPlex-5040 virtlogd[6704]: End of file \
while reading data: Input/output error&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;Mar 28 18:03:05 \
dpdk-OptiPlex-5040 libvirtd.service: 1351: error : \
virNetClientProgramDispatchError:177 : Cannot open log file: \
'/var/log/libvirt/qemu/VM1.log': Device or resource busy&lt;/b&gt;&lt;/div&gt;&lt;div&gt;Mar 28 \
18:03:05 dpdk-OptiPlex-5040 libvirtd.service: 1351: debug : virCommandRunAsync:2429 : \
About to run /usr/lib/libvirt/virt-aa-helper -R -u \
libvirt-41b4eef0-b820-41da-9034-9de22e1379e0&lt;/div&gt;&lt;div&gt;Mar 28 18:03:05 \
dpdk-OptiPlex-5040 libvirtd.service: 1351: debug : virCommandRunAsync:2432 : Command \
result 0, with PID 8705&lt;/div&gt;&lt;div&gt;Mar 28 18:03:05 dpdk-OptiPlex-5040 \
libvirtd.service: 1351: debug : virCommandRun:2280 : Result status 0, stdout: \
'' stderr: ''&lt;/div&gt;&lt;div&gt;&lt;b&gt;Mar 28 18:03:05 dpdk-OptiPlex-5040 \
virtlogd[6704]: End of file while reading data: Input/output error&lt;/b&gt;&lt;/div&gt;&lt;div&gt;Mar \
28 18:03:05 dpdk-OptiPlex-5040 kernel: [ 4024.080545] audit: type=1400 \
audit(1553776385.543:33): apparmor="STATUS" \
operation="profile_remove" profile="unconfined" \
name="libvirt-41b4eef0-b820-41da-9034-9de22e1379e0" pid=8707 \
comm="apparmor_parser"&lt;/div&gt;&lt;div&gt;Mar 28 18:05:28 dpdk-OptiPlex-5040 \
libvirtd.service: 1530: debug : virCommandRunAsync:2429 : About to run \
LIBVIRT_LOG_OUTPUTS=3:stderr /usr/lib/libvirt/virt-aa-helper -p 0 -r -u \
libvirt-41b4eef0-b820-41da-9034-9de22e1379e0&lt;/div&gt;&lt;div&gt;Mar 28 18:05:28 \
dpdk-OptiPlex-5040 libvirtd.service: 1530: debug : virCommandRunAsync:2432 : Command \
result 0, with PID 8890&lt;/div&gt;&lt;div&gt;Mar 28 18:05:28 dpdk-OptiPlex-5040 \
libvirtd.service: 1530: debug : virCommandRun:2280 : Result status 0, stdout: \
'' stderr: ''&lt;/div&gt;&lt;div&gt;Mar 28 18:05:28 dpdk-OptiPlex-5040 kernel: [ \
4167.453849] audit: type=1400 audit(1553776528.915:34): apparmor="STATUS" \
operation="profile_load" profile="unconfined" \
name="libvirt-41b4eef0-b820-41da-9034-9de22e1379e0" pid=8893 \
comm="apparmor_parser"&lt;/div&gt;&lt;div&gt;Mar 28 18:05:28 dpdk-OptiPlex-5040 kernel: \
[ 4167.454106] audit: type=1400 audit(1553776528.915:35): apparmor="STATUS" \
operation="profile_load" profile="unconfined" \
name="libvirt-41b4eef0-b820-41da-9034-9de22e1379e0//qemu_bridge_helper" \
pid=8893 comm="apparmor_parser"&lt;/div&gt;&lt;div&gt;Mar 28 18:05:28 \
dpdk-OptiPlex-5040 libvirtd.service: 1530: warning : qemuProcessLaunch:4807 : \
Detected vhost-user interface without any shared memory, the interface might not be \
operational&lt;/div&gt;&lt;div&gt;Mar 28 18:05:28 dpdk-OptiPlex-5040 libvirtd.service: 1530: \
debug : virCommandRequireHandshake:2628 : Transfer handshake wait=28 notify=29, keep \
handshake wait=26 notify=30&lt;/div&gt;&lt;div&gt;Mar 28 18:05:28 dpdk-OptiPlex-5040 \
libvirtd.service: 1530: debug : virCommandRunAsync:2429 : About to run LC_ALL=C \
PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin \
QEMU_AUDIO_DRV=spice /usr/bin/kvm-spice -name VM1 -S -machine \
pc-i440fx-xenial,accel=kvm,usb=off -cpu Broadwell-IBRS -m 1024 -mem-prealloc \
-mem-path /dev/hugepages/libvirt/qemu -realtime mlock=off -smp \
2,sockets=2,cores=1,threads=1 -uuid 41b4eef0-b820-41da-9034-9de22e1379e0 \
-no-user-config -nodefaults -chardev \
socket,id=charmonitor,path=/var/lib/libvirt/qemu/domain-VM1/monitor.sock,server,nowait \
-mon chardev=charmonitor,id=monitor,mode=control -rtc base=utc,driftfix=slew -global \
kvm-pit.lost_tick_policy=discard -no-hpet -no-shutdown -global PIIX4_PM.disable_s3=1 \
-global PIIX4_PM.disable_s4=1 -boot strict=on -device \
ich9-usb-ehci1,id=usb,bus=pci.0,addr=0x5.0x7 -device \
ich9-usb-uhci1,masterbus=usb.0,firstport=0,bus=pci.0,multifunction=on,addr=0x5 \
-device ich9-usb-uhci2,masterbus=usb.0,firstport=2,bus=pci.0,addr=0x5.0x1 -device \
ich9-usb-uhci3,masterbus=usb.0,firstport=4,bus=pci.0,addr=0x5.0x2 -device \
virtio-serial-pci,id=virtio-serial0,bus=pci.0,addr=0x4 -drive \
file=/var/lib/libvirt/images/VM1-1.qcow2,format=qcow2,if=none,id=drive-ide0-0-0 \
-device ide-hd,bus=ide.0,unit=0,drive=drive-ide0-0-0,id=ide0-0-0,bootindex=1 -drive \
if=none,id=drive-ide0-0-1,readonly=on -device \
ide-cd,bus=ide.0,unit=1,drive=drive-ide0-0-1,id=ide0-0-1 -chardev \
socket,id=charnet0,path=/var/run/openvswitch/vhost-user1 -netdev \
type=vhost-user,id=hostnet0,chardev=charnet0,queues=4 -device \
virtio-net-pci,mrg_rxbuf=on,mq=on,vectors=10,netdev=hostnet0,id=net0,mac=00:00:00:00:00:01,bus=pci.0,addr=0x7 \
-chardev pty,id=charserial0 -device isa-serial,chardev=charserial0,id=serial0 \
-chardev spicevmc,id=charchannel0,name=vdagent -device \
virtserialport,bus=virtio-serial0.0,nr=1,chardev=charchannel0,id=channel0,name=com.redhat.spice.0 \
-spice port=5900,addr=127.0.0.1,disable-ticketing,image-compression=off,seamless-migration=on \
-device qxl-vga,id=video0,ram_size=67108864,vram_size=67108864,vgamem_mb=16,bus=pci.0,addr=0x2 \
-device intel-hda,id=sound0,bus=pci.0,addr=0x3 -device \
hda-duplex,id=sound0-codec0,bus=sound0.0,cad=0 -chardev \
spicevmc,id=charredir0,name=usbredir -device usb-redir,chardev=charredir0,id=redir0 \
-chardev spicevmc,id=charredir1,name=usbredir -device \
usb-redir,chardev=charredir1,id=redir1 -device \
virtio-balloon-pci,id=balloon0,bus=pci.0,addr=0x6 -msg timestamp=on&lt;/div&gt;&lt;div&gt;Mar 28 \
18:05:28 dpdk-OptiPlex-5040 libvirtd.service: 1530: debug : virCommandRunAsync:2432 : \
Command result 0, with PID 8895&lt;/div&gt;&lt;div&gt;Mar 28 18:05:29 dpdk-OptiPlex-5040 \
libvirtd.service: 1530: debug : virCommandRun:2280 : Result status 0, stdout: \
'(null)' stderr: '(null)'&lt;/div&gt;&lt;div&gt;Mar 28 18:05:29 \
dpdk-OptiPlex-5040 libvirtd.service: 1530: debug : virCommandHandshakeWait:2663 : \
Wait for handshake on 26&lt;/div&gt;&lt;div&gt;Mar 28 18:05:29 dpdk-OptiPlex-5040 \
libvirtd.service: 1530: debug : virCommandHandshakeNotify:2729 : Notify handshake on \
30&lt;/div&gt;&lt;div&gt;&lt;b&gt;Mar 28 18:05:29 dpdk-OptiPlex-5040 libvirtd.service: 1530: error : \
qemuMonitorOpenUnix:374 : failed to connect to monitor socket: No such \
process&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;Mar 28 18:05:29 dpdk-OptiPlex-5040 libvirtd.service: 1530: \
error : qemuProcessReportLogError:1709 : internal error: process exited while \
connecting to monitor: 2019-03-28T12:35:29.176289Z qemu-system-x86_64: -chardev \
socket,id=charnet0,path=/var/run/openvswitch/vhost-user1: Failed to connect socket: \
Permission denied&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;Mar 28 18:05:29 dpdk-OptiPlex-5040 virtlogd[6704]: \
End of file while reading data: Input/output error&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;Mar 28 18:05:29 \
dpdk-OptiPlex-5040 virtlogd[6704]: End of file while reading data: Input/output \
error&lt;/b&gt;&lt;/div&gt;&lt;div&gt;Mar 28 18:05:39 dpdk-OptiPlex-5040 libvirtd.service: 1530: debug \
: virCommandRunAsync:2429 : About to run LIBVIRT_LOG_OUTPUTS=3:stderr \
/usr/lib/libvirt/virt-aa-helper -p 0 -r -u \
libvirt-41b4eef0-b820-41da-9034-9de22e1379e0&lt;/div&gt;&lt;div&gt;Mar 28 18:05:39 \
dpdk-OptiPlex-5040 libvirtd.service: 1530: debug : virCommandRunAsync:2432 : Command \
result 0, with PID 8921&lt;/div&gt;&lt;div&gt;Mar 28 18:05:39 dpdk-OptiPlex-5040 \
libvirtd.service: 1530: debug : virCommandRun:2280 : Result status 0, stdout: \
'' stderr: ''&lt;/div&gt;&lt;div&gt;Mar 28 18:05:39 dpdk-OptiPlex-5040 kernel: [ \
4178.521901] audit: type=1400 audit(1553776539.983:36): apparmor="STATUS" \
operation="profile_replace" info="same as current profile, \
skipping" profile="unconfined" \
name="libvirt-41b4eef0-b820-41da-9034-9de22e1379e0" pid=8923 \
comm="apparmor_parser"&lt;/div&gt;&lt;div&gt;Mar 28 18:05:39 dpdk-OptiPlex-5040 kernel: \
[ 4178.522126] audit: type=1400 audit(1553776539.983:37): apparmor="STATUS" \
operation="profile_replace" info="same as current profile, \
skipping" profile="unconfined" \
name="libvirt-41b4eef0-b820-41da-9034-9de22e1379e0//qemu_bridge_helper" \
pid=8923 comm="apparmor_parser"&lt;/div&gt;&lt;div&gt;Mar 28 18:05:39 \
dpdk-OptiPlex-5040 libvirtd.service: 1530: warning : qemuProcessLaunch:4807 : \
Detected vhost-user interface without any shared memory, the interface might not be \
operational&lt;/div&gt;&lt;div&gt;Mar 28 18:05:39 dpdk-OptiPlex-5040 libvirtd.service: 1530: \
debug : virCommandRequireHandshake:2628 : Transfer handshake wait=28 notify=29, keep \
handshake wait=26 notify=30&lt;/div&gt;&lt;div&gt;Mar 28 18:05:39 dpdk-OptiPlex-5040 \
libvirtd.service: 1530: debug : virCommandRunAsync:2429 : About to run LC_ALL=C \
PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin \
QEMU_AUDIO_DRV=spice /usr/bin/kvm-spice -name VM1 -S -machine \
pc-i440fx-xenial,accel=kvm,usb=off -cpu Broadwell-IBRS -m 2048 -mem-prealloc \
-mem-path /dev/hugepages/libvirt/qemu -realtime mlock=off -smp \
2,sockets=2,cores=1,threads=1 -uuid 41b4eef0-b820-41da-9034-9de22e1379e0 \
-no-user-config -nodefaults -chardev \
socket,id=charmonitor,path=/var/lib/libvirt/qemu/domain-VM1/monitor.sock,server,nowait \
-mon chardev=charmonitor,id=monitor,mode=control -rtc base=utc,driftfix=slew -global \
kvm-pit.lost_tick_policy=discard -no-hpet -no-shutdown -global PIIX4_PM.disable_s3=1 \
-global PIIX4_PM.disable_s4=1 -boot strict=on -device \
ich9-usb-ehci1,id=usb,bus=pci.0,addr=0x5.0x7 -device \
ich9-usb-uhci1,masterbus=usb.0,firstport=0,bus=pci.0,multifunction=on,addr=0x5 \
-device ich9-usb-uhci2,masterbus=usb.0,firstport=2,bus=pci.0,addr=0x5.0x1 -device \



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190327073311</emailId><senderName>Michal Privoznik</senderName><senderEmail>mprivozn@redhat.com</senderEmail><timestampReceived>2019-03-27 07:33:11-0400</timestampReceived><subject>Re: [libvirt-users] Virt-Lightning: a cloud-like CLI for libvirt</subject><body>

On 3/26/19 11:27 PM, Gonéri Le Bouder wrote:
&gt; Hi all,
&gt; 
&gt; Tl;dr: Virt-Lightning uses libvirt, cloud-init and libguestfs to allow
&gt; anyone to quickly start new VM. Very much like a container CLI interface,
&gt; but locally.
&gt; 
&gt; -&gt; https://github.com/virt-lightning/virt-lightning
&gt; 
&gt; To validate my Ansible roles, I was looking for a way to quickly start
&gt; and stop my test environments. I was looking for an experience similar
&gt; to what we have with the containers. Virt-lightning takes a distribution
&gt; name as main input. The output is the IP address of a freshly deployed
&gt; VM on which I can run my tests.
&gt; 
&gt; Virt-Lightning uses master QCOW2 images with backing file and avoid the
&gt; use of DHCP, this to speedup up the first boot. The configuration is
&gt; done by cloud-init. The whole deployment is rather fast. For instance, I
&gt; can deploy 3 VM in 25s (Lenovo T580).

Impressive.

&gt; 
&gt; cloud-init is used to create the user account, inject the SSH keys,
&gt; prepare the network configuration and resize the file system.
&gt; 
&gt; Regards,
&gt; 

Cool. Do you want to add it to https://libvirt.org/apps.html ?
If so, you can just send a patch against libvirt.git/docs/apps.html.in 
(or I can do that if you don't feel like it).

Michal

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190326190517</emailId><senderName>Chenzijian</senderName><senderEmail>zijian54321@163.com</senderEmail><timestampReceived>2019-03-26 19:05:17-0400</timestampReceived><subject>[libvirt-users] Problem passing qemu cmdline option when using &lt;qemu:commandline&gt; in domain xml.</subject><body>

[Attachment #2 (multipart/alternative)]

[Attachment #4 (text/plain)]

¡¾Sorry there I maked some mistake in my first email, here is the correct one.¡¿
I am trying to pass-through the parallel port of the host to the guest.
When I just used qemu-system-x86_64 with option '-chardev \
parallel,id=charparallel0,path=/dev/parport0 -device \
isa-parallel,chardev=charparallel0,id=parallel0', it worked perfect.  But when I \
                tried to pass these option by adding lines below to the domain xml,
...
&lt;/device&gt;
&lt;qemu:commandline&gt;
  &lt;qemu:args value='-chardev'/&gt;
  &lt;qemu:args value='parallel,id=charparallel0,path=/dev/parport0'/&gt;
  &lt;qemu:args value='-device'/&gt;
  &lt;qemu:args value='isa-parallel,chardev=charparallel0,id=parallel0'/&gt;
&lt;/qemu:commandline&gt;
...
it failed and showed:
[root@localhost local]# virsh start test02
error: Failed to start domain test02
error: internal error: process exited while connecting to monitor: 2019-03-27 \
02:28:12.507+0000: Domain id=32 is  tainted: custom-argv 2019-03-27T02:28:12.599326Z \
qemu-system-x86_64: -chardev parallel,id=charparallel0,path=/dev/parport0: Could not  \
open '/dev/parport0': No such file or directory


I dont know why it showed a 'No such file or directory'. The /dev/parport0 is \
actually here. I have tried setting chmod 666 to /dev/parport0 and shutdown the \
selinux, but it always show the same thing. Please give me some help, thanks.


[Attachment #5 (text/html)]

&lt;div style="line-height:1.7;color:#000000;font-size:14px;font-family:Arial"&gt;&lt;div&gt;&lt;span \
style="font-size: 16px;"&gt;¡¾Sorry there I maked some mistake in my first email, here \
is the correct one.¡¿&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;font size="3"&gt;&lt;span style="font-size: \
16px;"&gt;I am trying to pass-through the parallel port of the host to the \
guest.&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size="3"&gt;&lt;span style="font-size: 16px;"&gt;When I \
just used qemu-system-x86_64 with option '-chardev \
parallel,id=charparallel0,path=/dev/parport0 &lt;/span&gt;&lt;/font&gt;&lt;span \
style="font-size: 16px;"&gt;-device isa-parallel,chardev=charparallel0,id=parallel0', it \
worked perfect. &lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style="font-size: 16px;"&gt;But when I \
tried to pass these option by adding lines below to the domain \
xml,&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style="font-size: 16px;"&gt;...&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span \
style="font-size: 16px;"&gt;&lt;/device&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style="font-size: \
16px;"&gt;&lt;qemu:commandline&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style="font-size: \
16px;"&gt;  &lt;qemu:args value='&lt;/span&gt;&lt;font size="3"&gt;&lt;span style="font-size: \
16px;"&gt;-chardev'/&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size="3"&gt;&lt;span style="font-size: \
16px;"&gt;  &lt;/span&gt;&lt;/font&gt;&lt;span style="font-size: 16px;"&gt;&lt;qemu:args \
value='&lt;/span&gt;&lt;font size="3"&gt;&lt;span style="font-size: \
16px;"&gt;parallel,id=charparallel0,path=/dev/parport0'/&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;span \
style="font-size: 16px;"&gt;  &lt;qemu:args \
value='-device'/&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style="font-size: \
16px;"&gt;  &lt;qemu:args \
value='isa-parallel,chardev=charparallel0,id=parallel0'/&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span \
style="font-size: 16px;"&gt;&lt;/qemu:commandline&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span \
style="font-size: 16px;"&gt;...&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style="font-size: 16px;"&gt;it \
failed and showed:&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;font size="3"&gt;&lt;span style="font-size: \
16px;"&gt;[root@localhost local]# virsh start test02&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font \
size="3"&gt;&lt;span style="font-size: 16px;"&gt;error: Failed to start domain \
test02&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size="3"&gt;&lt;span style="font-size: 16px;"&gt;error: \
internal error: process exited while connecting to monitor: 2019-03-27 \
02:28:12.507+0000: Domain id=32 is  tainted: \
custom-argv&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size="3"&gt;&lt;span style="font-size: \
16px;"&gt;2019-03-27T02:28:12.599326Z qemu-system-x86_64: -chardev \
parallel,id=charparallel0,path=/dev/parport0: Could not  open '/dev/parport0': \
No such file or directory&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span \
style="font-size: 16px;"&gt;I dont know why it showed a 'No such file or directory'. The \
/dev/parport0 is actually here. I have tried setting chmod 666 to /dev/parport0 and \
shutdown the selinux, but it always show the same thing.&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span \
style="font-size: 16px;"&gt;Please give me some help, \
thanks.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;br&gt;&lt;span title="neteasefooter"&gt;&lt;p&gt; &lt;/p&gt;&lt;/span&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190313132607</emailId><senderName>Martin Kletzander</senderName><senderEmail>mkletzan@redhat.com</senderEmail><timestampReceived>2019-03-13 13:26:07-0400</timestampReceived><subject>Re: [libvirt-users] KVM-Docker-Networking using TAP and MACVLAN</subject><body>

[Attachment #2 (multipart/signed)]


On Tue, Mar 12, 2019 at 11:10:40PM +0100, Lars Lindstrom wrote:
&gt; ﻿Hi everyone!
&gt; 
&gt; I have the following requirement: I need to connect a set of Docker
&gt; containers to a KVM. The containers shall be isolated in a way that they
&gt; cannot communicate to each other without going through the KVM, which
&gt; will act as router/firewall. For this, I thought about the following
&gt; simple setup (as opposed to a more complex one involving a bridge with
&gt; vlan_filtering and a seperate VLAN for each container):
&gt; 
&gt; +------------------------------------------------------------------+
&gt; &gt; Host |
&gt; &gt; +-------------+ +----------------------+---+
&gt; &gt; &gt; KVM                 |                                           | Docker        \
&gt; &gt; &gt; +-&gt; | a |
&gt; &gt; &gt; +----------+         +----------+         +--------------+ +---+
&gt; &gt; &gt; &gt; NIC lan0 | &lt;-&gt; | DEV tap0 | &lt;-&gt; | NET macvlan0 | &lt;-+-&gt; | b |
&gt; &gt; &gt; +----------+         +----------+         +--------------+ +---+
&gt; &gt; &gt; &gt; &gt; +-&gt; | c |
&gt; &gt; +-------------+ +----------------------+---+
&gt; &gt; &gt; 
&gt; +------------------------------------------------------------------+
&gt; 
&gt; NIC lan0:
&gt; &lt;interface type='direct'&gt;
&gt; &lt;source dev='tap0' mode='vepa'/&gt;
&gt; &lt;model type='virtio'/&gt;
&gt; &lt;/interface&gt;
&gt; *** Welcome to pfSense 2.4.4-RELEASE-p1 (amd64) on pfSense ***
&gt; LAN (lan) -&gt; vtnet0 -&gt; v4: 10.0.20.1/24
&gt; 
&gt; DEV tap0:
&gt; [root@server ~]# ip tuntap add tap0 mode tap
&gt; [root@server ~]# ip l set tap0 up
&gt; [root@server ~]# ip l show tap0
&gt; 49: tap0: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc
&gt; fq_codel state DOWN mode DEFAULT group default qlen 1000
&gt; link/ether ce:9e:95:89:33:5f brd ff:ff:ff:ff:ff:ff
&gt; [root@server ~]# virsh start pfsense
&gt; [root@server opt]# ip l show tap0
&gt; 49: tap0: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc
&gt; fq_codel state DOWN mode DEFAULT group default qlen 1000
&gt; link/ether ce:9e:95:89:33:5f brd ff:ff:ff:ff:ff:ff
&gt; 

IIUC, you are using the tap0 device, but it is not plugged anywhere.  By that I
mean there is one end that you created and passed through into the VM, but there
is no other end of that.  I can think of some complicated ways how to do what
you are trying to, but hopefully the above explanation will move you forward and
you'll figure out something better than what I'm thinking about right now.  What
usually helps me is to think of a way this would be done with hardware and
replicate that as most of the technology is modelled after HW anyway.  Or
someone else will have a better idea.

Before sending it I just thought, wouldn't it be possible to just have a veth
pair instead of the tap device?  one end would go to the VM and the other one
would be used for the containers' macvtaps...

&gt; NET macvlan0:
&gt; [root@server ~]# docker network create --driver macvlan
&gt; --subnet=10.0.20.0/24 --gateway=10.0.20.1 --opt parent=tap0 macvlan0
&gt; 
&gt; CNT a:
&gt; [root@server ~]# docker run --network macvlan0 --ip=10.0.20.2 -it
&gt; alpine /bin/sh
&gt; / # ping -c 4 10.0.20.1
&gt; PING 10.0.20.1 (10.0.20.1): 56 data bytes
&gt; --- 10.0.20.1 ping statistics ---
&gt; 4 packets transmitted, 0 packets received, 100% packet loss
&gt; / # ifconfig
&gt; eth0           Link encap:Ethernet   HWaddr 02:42:0A:00:14:02
&gt; inet addr:10.0.20.2   Bcast:10.0.20.255 Mask:255.255.255.0
&gt; UP BROADCAST MULTICAST   MTU:1500   Metric:1
&gt; RX packets:0 errors:0 dropped:0 overruns:0 frame:0
&gt; TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
&gt; collisions:0 txqueuelen:0
&gt; RX bytes:0 (0.0 B)   TX bytes:0 (0.0 B)
&gt; lo               Link encap:Local Loopback
&gt; inet addr:127.0.0.1   Mask:255.0.0.0
&gt; UP LOOPBACK RUNNING   MTU:65536   Metric:1
&gt; RX packets:4 errors:0 dropped:0 overruns:0 frame:0
&gt; TX packets:4 errors:0 dropped:0 overruns:0 carrier:0
&gt; collisions:0 txqueuelen:1000
&gt; RX bytes:448 (448.0 B)   TX bytes:448 (448.0 B)
&gt; / # ip r
&gt; default via 10.0.20.1 dev eth0
&gt; 10.0.20.0/24 dev eth0 scope link   src 10.0.20.2
&gt; 
&gt; CNT b:
&gt; [root@server ~]# docker run --network macvlan0 --ip=10.0.20.2 -it
&gt; alpine /bin/ping 10.0.20.1
&gt; PING 10.0.20.1 (10.0.20.1): 56 data bytes
&gt; 
&gt; CNT c:
&gt; [root@server ~]# docker run --network macvlan0 --ip=10.0.20.2 -it
&gt; alpine /bin/ping 10.0.20.1
&gt; PING 10.0.20.1 (10.0.20.1): 56 data bytes
&gt; 
&gt; 
&gt; The KVM is not reachable from within a Docker container (during the test
&gt; firewalld was disabled) and vice versa. The first thing I noticed is
&gt; that tap0 remains NO-CARRIER and DOWN, even though the KVM has been
&gt; started. Shouldn't the link come up as soon as the KVM is started (and
&gt; thus is connected to the tap0 device)? The next thing that looked
&gt; strange to me - even though interface and routing configuration within
&gt; the container seemingly looks OK, there are 0 packets TX/RX on eth0
&gt; after pinging the KVM (but 4 on lo instead).
&gt; 
&gt; Any idea on how to proceed from here? Is this a valid setup and a valid
&gt; libvirt configuration for that setup?
&gt; 
&gt; 
&gt; Thanks and br, Lars
&gt; 
&gt; 
&gt; _______________________________________________
&gt; libvirt-users mailing list
&gt; libvirt-users@redhat.com
&gt; https://www.redhat.com/mailman/listinfo/libvirt-users


["signature.asc" (application/pgp-signature)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190313224051</emailId><senderName>Lars Lindstrom</senderName><senderEmail>lars.lindstrom@gmx.at</senderEmail><timestampReceived>2019-03-13 22:40:51-0400</timestampReceived><subject>Re: [libvirt-users] KVM-Docker-Networking using TAP and MACVLAN</subject><body>


On 3/13/19 2:26 PM, Martin Kletzander wrote:
&gt; IIUC, you are using the tap0 device, but it is not plugged anywhere.
&gt; By that I
&gt; mean there is one end that you created and passed through into the VM,
&gt; but there
&gt; is no other end of that.  I can think of some complicated ways how to
&gt; do what
&gt; you are trying to, but hopefully the above explanation will move you
&gt; forward and
&gt; you'll figure out something better than what I'm thinking about right
&gt; now.  What
&gt; usually helps me is to think of a way this would be done with hardware
&gt; and
&gt; replicate that as most of the technology is modelled after HW anyway.  Or
&gt; someone else will have a better idea.
&gt;
&gt; Before sending it I just thought, wouldn't it be possible to just have
&gt; a veth
&gt; pair instead of the tap device?  one end would go to the VM and the
&gt; other one
&gt; would be used for the containers' macvtaps...

What I am trying to achieve is the most performant way to connect a set
of containers to the KVM while having proper isolation. As the Linux
bridge does not support port isolation I started with a 'bridge'
networking and MACVLAN using a VLAN for each container, but this comes
at the cost of bridging and the VLAN trunk on the KVM side. The simplest
(and hopefully therefore most performant) solution I could come up with
was using a 'virtio' NIC in the KVM, with 'direct' connection in 'vepa'
mode to 'some other end' on the host, TAP in its simplest form, which
Docker then uses for its MACVLAN network.


I am not quite sure if I understood you correctly with the 'other end'.
With the given configuration I would expect that one end of the TAP
device is connected to the NIC in the KVM (and it actually is, it has an
IP address assigned in the KVM and is serving the web configurator) and
the other end is connected to the MACVLAN network of Docker. If this is
not how TAP works, how do I then provide a 'simple virtual NIC' which
has one end in the KVM itself and the other on the host (without using
bridging or alike). I always thought then when using 'bridge' network
libvirt does exactly that, it creates a TAP device on the host and
assigns it to a bridge.


According to the man page I have to specify both interfaces when
creating the 'vdev' device, but how would I do that on the host with one
end being in the KVM?



br Lars


_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190314150620</emailId><senderName>Martin Kletzander</senderName><senderEmail>mkletzan@redhat.com</senderEmail><timestampReceived>2019-03-14 15:06:20-0400</timestampReceived><subject>Re: [libvirt-users] KVM-Docker-Networking using TAP and MACVLAN</subject><body>

[Attachment #2 (multipart/signed)]


On Wed, Mar 13, 2019 at 11:40:51PM +0100, Lars Lindstrom wrote:
&gt;
&gt;On 3/13/19 2:26 PM, Martin Kletzander wrote:
&gt;&gt; IIUC, you are using the tap0 device, but it is not plugged anywhere.
&gt;&gt; By that I
&gt;&gt; mean there is one end that you created and passed through into the VM,
&gt;&gt; but there
&gt;&gt; is no other end of that.  I can think of some complicated ways how to
&gt;&gt; do what
&gt;&gt; you are trying to, but hopefully the above explanation will move you
&gt;&gt; forward and
&gt;&gt; you'll figure out something better than what I'm thinking about right
&gt;&gt; now.  What
&gt;&gt; usually helps me is to think of a way this would be done with hardware
&gt;&gt; and
&gt;&gt; replicate that as most of the technology is modelled after HW anyway.  Or
&gt;&gt; someone else will have a better idea.
&gt;&gt;
&gt;&gt; Before sending it I just thought, wouldn't it be possible to just have
&gt;&gt; a veth
&gt;&gt; pair instead of the tap device?  one end would go to the VM and the
&gt;&gt; other one
&gt;&gt; would be used for the containers' macvtaps...
&gt;
&gt;What I am trying to achieve is the most performant way to connect a set
&gt;of containers to the KVM while having proper isolation. As the Linux
&gt;bridge does not support port isolation I started with a 'bridge'
&gt;networking and MACVLAN using a VLAN for each container, but this comes
&gt;at the cost of bridging and the VLAN trunk on the KVM side. The simplest
&gt;(and hopefully therefore most performant) solution I could come up with
&gt;was using a 'virtio' NIC in the KVM, with 'direct' connection in 'vepa'
&gt;mode to 'some other end' on the host, TAP in its simplest form, which
&gt;Docker then uses for its MACVLAN network.
&gt;

I hope I'm not misunderstanding something, but the way I understand it is the
following:

TAP device is 1 device, a virtual ethernet card or an emulated network card.
Usually (VPNs and such) some user process binds to the device, can read data
which would normally go out on the wire and can write data that will look like
they came on the wire from the outside.  This is "one end of the device", the
software is there instead of a wire connected to it.  The "other end" shows up
in the OS as a network device that it can use to getting an IP address, sending
other packets, etc.

I think we both understand that, I just want to make sure we are on the same
page and also to have something to reference with my highly technical term (like
"other end") =)

Then when you create the VM and give it a VEPA access to the tap device, it
essentially just "duplicates" that device (the part that's in the OS) and
whatever the VM tries to send will be sent out over the wire.

When you create the containers with MACVLAN (macvtap) it does similar thing, it
creates virtual interface over the tap device and whatever the container is
trying to send ends up being sent over the wire.

That is why I think this cannot work for you (unless you have a program that
binds to the tap device and hairpins all the packets, but that's not what you
want I think).

&gt;
&gt;I am not quite sure if I understood you correctly with the 'other end'.

Yeah, sorry for my knowledge on how this is actually called.  I found out,
however, the "other end" is whatever _binds_ to the device.

&gt;With the given configuration I would expect that one end of the TAP
&gt;device is connected to the NIC in the KVM (and it actually is, it has an
&gt;IP address assigned in the KVM and is serving the web configurator) and
&gt;the other end is connected to the MACVLAN network of Docker. If this is

From how I understand it you are plugging the same end to all of them.

&gt;not how TAP works, how do I then provide a 'simple virtual NIC' which
&gt;has one end in the KVM itself and the other on the host (without using

This is what veth pair does, IIUC.  I imagine it as a patch cable.

&gt;bridging or alike). I always thought then when using 'bridge' network
&gt;libvirt does exactly that, it creates a TAP device on the host and
&gt;assigns it to a bridge.
&gt;

Yes, but it is slightly more complicated.  There is a device that is connected
to the bridge which is on the host, so that the host can communicate with it.
However, when you start a VM, new device is created that is plugged in the
bridge and then passed to the VM.  That is done for each VM (and talking about
the default network).

&gt;
&gt;According to the man page I have to specify both interfaces when
&gt;creating the 'vdev' device, but how would I do that on the host with one
&gt;end being in the KVM?
&gt;

I cannot try this right now, but I would try something like this:

ip link add dev veth-vm type veth peer name veth-cont

and then put veth-vm in the VM (type='direct' would work, but I can imagine
type='ethernet' might be even faster) and start the containers with macvtap
using veth-cont.

I am in no position to even estimate what the performance is, neither compare it
to anything.  I would, however, imagine this could be pretty low-overhead
solution.

Let me know if that works or if I made any sense, I'd love to hear that.

Have a nice day,
Martin

["signature.asc" (application/pgp-signature)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190314234253</emailId><senderName>Lars Lindstrom</senderName><senderEmail>lars.lindstrom@gmx.at</senderEmail><timestampReceived>2019-03-14 23:42:53-0400</timestampReceived><subject>Re: [libvirt-users] KVM-Docker-Networking using TAP and MACVLAN</subject><body>


On 3/14/19 4:06 PM, Martin Kletzander wrote:
&gt; I cannot try this right now, but I would try something like this:
&gt;
&gt; ip link add dev veth-vm type veth peer name veth-cont
&gt;
&gt; and then put veth-vm in the VM (type='direct' would work, but I can
&gt; imagine
&gt; type='ethernet' might be even faster) and start the containers with
&gt; macvtap
&gt; using veth-cont.


I really appreciate your effort. The problem is in fact that I
misunderstood the manual. I thought that VETH requires two existing
devices, but in fact it creates two devices being connected (this
virtual link exists purely in the kernel, so performance should be fine).

As there is still no connectivity I reduced the setup to the bare
minimum, I kickstarted the server, installed QEMU and defined two
Debian-based KVM with a 'direct' device in 'vepa' mode and a VETH
between them. When started, both KVM create a MACVTAP assigned to each
end of the VETH. Both KVM can ping each other (without any additional
route configured) and the VETH is LOWER_UP and UP even when no KVM is
running.

I then replaced one Debian-based KVM with pfSense and both KVM can still
ping each other.

I then created a MACVLAN docker network with the VETH as parent and
replaced the second Debian-based KVM with a Docker container using this
network. I am not quite sure why - but there is connectivity now. There
must have been some configuration issue on the server that was resolved
with kickstarting it.

Using type ETHERNET and the VETH as target did not work, "Unable to
create tap device veth1: Invalid argument". I then removed the VETH and
kept the ETHERNET configuration setting, which caused a TAP device
(according to error message) being created when the KVM is started. To
my confusion, this TAP device can be actually used as a parent for the
Docker MACVLAN network while still having connectivity! The downside is
that there is now an order dependency; the Docker network is unusable
when the KVM is shut down. In addition, when the KVM is shut down while
the container is still running the container must be restarted to get
networking going again.

So, there are two possible ways to achieve connectivity now
(VETH/VEPA/PASSTHROUGH and ETHERNET/TAP). Unfortunately there is a
'but'. I then added another container and even though the KVM device has
been configured VEPA, the containers are still able to contact each
other, so there is no isolation. I assume this is because just the 'KVM
end' of the VETH is in VEPA mode, whereas the 'Docker end' of the VETH
is in BRIDGE mode. Unfortunately for the ETHERNET/TAP way no mode can be
configured in the KVM domain (I would assume because no MACVTAP is
involved).

The problem is that I cannot seem to figure out how to configure the
Docker network to use VEPA mode.


br Lars


_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190311151514</emailId><senderName>Laine Stump</senderName><senderEmail>laine@redhat.com</senderEmail><timestampReceived>2019-03-11 15:15:14-0400</timestampReceived><subject>Re: [libvirt-users] How to insert a dummy NIC</subject><body>

On 3/11/19 5:05 AM, wferi@niif.hu wrote:
&gt; Hi,
&gt; 
&gt; I have to host (with KVM) an appliance which does not use its second and
&gt; third NIC.  They have to be present in the guest, but they'd better stay
&gt; totally disconnected from anything in the host.  "Second" and "third"
&gt; apparently means bus order.  Let's consider virtio devices only.  I think
&gt; the best technical solution is adding -device virtio-net-pci,addr=0x3 and
&gt; similar options to the KVM command line, without any corresponding
&gt; -netdev options (better ideas welcome).  QEMU emits "Warning: nic
&gt; virtio-net-pci.2 has no peer" messages, but that's expected.  I can even
&gt; do this much using the &lt;qemu:commandline&gt; element, but libvirt assigns
&gt; the 0x3 address to other virtio devices, leading to collision.  Is there
&gt; a way to "reserve" a bus address for such manually added devices without
&gt; assigning explicit addresses to all other devices in the configuration?


I think qemu is going to be upset by anything that has no backend to the 
emulated device.

As for libvirt reserving addresses that (from its point of view are 
otherwise unused - no, there's no way to do that; if a PCI address isn't 
used by a device in the libvirt config, it is considered fair game for 
assigning to a new device, and we've never considered such an option.

&gt; 
&gt; Things I also tried (and found inadequate):
&gt; 
&gt; * Using "generic ethernet connection" for the dummy NICs.  Close, but
&gt;    requires extra permissions for accessing /dev/net/tun, and technically
&gt;    feels a little inferior to using a peerless network device like above.

What version is your libvirt? extra permissions for qemu using 
type='ethernet' (beyond what's required for a type='network' or 
type='bridge') have not been required since libvirt-1.3.3, released on 
April 6, 2016 (this was the result of commit 9c17d665f). If your libvirt 
is that old, you *really* should update to something newer. If it's 
*not* that old, then you're just working with out of date documentation.


&gt; 
&gt; * TCP tunnel server.  Even more inferior, does not require extra
&gt;    permissions but leaves even looser ends (listening sockets).  Also, the
&gt;    RelaxNG grammal does not let me specify a model for this interface
&gt;    type, so maintaining bus order with respect to the virtio interfaces is
&gt;    impossible.  A grammar bug?
&gt; 
&gt; * Using a dummy VLAN in the bridge.  This is what I temporarily settled
&gt;    for, but this requires global agreement and still technically inferior,
&gt;    so I'd like to move away.
&gt; 
&gt; * A &lt;network&gt; without forwarding.  Still inferior, and also requires
&gt;    configuration sharing across the host cluster.
&gt; 

Does it matter if the interface is online or not?

I would recommend using an expansion of this:

    &lt;interface type='ethernet'&gt;
       &lt;link state='down'/&gt;
       ...

Your guest will have a network device in the desired position, qemu will 
be satisfied that the device has a backend, libvirt will know there is a 
device there so it won't give the PCI address away to somebody else, and 
the tap device will be IFF_DOWN, so there will be no possibility of 
network traffic accidentally leaking into the host (which would already 
be nearly impossible unless someone separately assigned an IP address to 
the host side of the tap device).

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190308190007</emailId><senderName>Cole Robinson</senderName><senderEmail>crobinso@redhat.com</senderEmail><timestampReceived>2019-03-08 19:00:07-0400</timestampReceived><subject>Re: [libvirt-users] Obtaining the PID of a domain's QEMU process from C</subject><body>

On 2/28/19 8:31 PM, Shawn Anastasio wrote:
&gt; Hello all,
&gt; 
&gt; I'm currently writing a C program that uses the libvirt API and I need a
&gt; way to obtain the pid of a given domain's QEMU process.
&gt; 
&gt; Specifically, I'm writing an ivshmem server that uses SO_PEERCRED to get
&gt; the pid of clients that connect to it, and I would like to use that pid
&gt; to look up the domain in libvirt to determine the proper domain ID to
&gt; return to the client.
&gt; 
&gt; As far as I can tell, libvirt doesn't expose this information in an easy
&gt; to access manner. Of course it is possible to call `ps` and grep for the
&gt; information I'm looking for, but I was hoping for a cleaner solution.
&gt; 
&gt; If anybody knows how to do this, advice would be greatly appreciated.
&gt; 
&gt; Thanks in advance,

There isn't any libvirt API for getting the qemu pid, so I think going
outside libvirt is your only option

- Cole

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190309153200</emailId><senderName>Michal Prívozník</senderName><senderEmail>mprivozn@redhat.com</senderEmail><timestampReceived>2019-03-09 15:32:00-0400</timestampReceived><subject>Re: [libvirt-users] Obtaining the PID of a domain's QEMU process from C</subject><body>

On 3/1/19 2:31 AM, Shawn Anastasio wrote:
&gt; Hello all,
&gt; 
&gt; I'm currently writing a C program that uses the libvirt API and I need a
&gt; way to obtain the pid of a given domain's QEMU process.
&gt; 
&gt; Specifically, I'm writing an ivshmem server that uses SO_PEERCRED to get
&gt; the pid of clients that connect to it, and I would like to use that pid
&gt; to look up the domain in libvirt to determine the proper domain ID to
&gt; return to the client.
&gt; 
&gt; As far as I can tell, libvirt doesn't expose this information in an easy
&gt; to access manner. Of course it is possible to call `ps` and grep for the
&gt; information I'm looking for, but I was hoping for a cleaner solution.
&gt; 
&gt; If anybody knows how to do this, advice would be greatly appreciated.

There isn't an API for that as we don't want users to fiddle with qemu
behid its back. Anyway, apart from ps there might be a solution. Libvirt
of course know the PID and stores it - in the status XML. This is a file
that libvirt uses to store runtime information for the domain in case
the daemon restarts. It's located under
/var/run/libvirt/qemu/$domain.xml. But you'll need root priviledges to
read it.

Also, it is very wise to follow the comment at the beginning of the file
and not modify it ;-) And just like with any libvirt internals, we make
no guarantees they won't change in the long run.

Michal

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190309172651</emailId><senderName>Shawn Anastasio</senderName><senderEmail>shawn@anastas.io</senderEmail><timestampReceived>2019-03-09 17:26:51-0400</timestampReceived><subject>Re: [libvirt-users] Obtaining the PID of a domain's QEMU process from C</subject><body>

Thanks for the response. /var/run/libvirt/qemu/ seems to be exactly what 
I'm looking for. It would, however, be nice to be able to access this 
file without root privileges. Is there any way to access the file using 
the credentials from a connected virConnectPtr?

If not, I can stick to my current workaround of walking /proc and 
scanning each PID's cmdline for the VM's UUID string.

Thanks,
Shawn

On 3/9/19 9:32 AM, Michal Prívozník wrote:
&gt; On 3/1/19 2:31 AM, Shawn Anastasio wrote:
&gt;&gt; Hello all,
&gt;&gt;
&gt;&gt; I'm currently writing a C program that uses the libvirt API and I need a
&gt;&gt; way to obtain the pid of a given domain's QEMU process.
&gt;&gt;
&gt;&gt; Specifically, I'm writing an ivshmem server that uses SO_PEERCRED to get
&gt;&gt; the pid of clients that connect to it, and I would like to use that pid
&gt;&gt; to look up the domain in libvirt to determine the proper domain ID to
&gt;&gt; return to the client.
&gt;&gt;
&gt;&gt; As far as I can tell, libvirt doesn't expose this information in an easy
&gt;&gt; to access manner. Of course it is possible to call `ps` and grep for the
&gt;&gt; information I'm looking for, but I was hoping for a cleaner solution.
&gt;&gt;
&gt;&gt; If anybody knows how to do this, advice would be greatly appreciated.
&gt; 
&gt; There isn't an API for that as we don't want users to fiddle with qemu
&gt; behid its back. Anyway, apart from ps there might be a solution. Libvirt
&gt; of course know the PID and stores it - in the status XML. This is a file
&gt; that libvirt uses to store runtime information for the domain in case
&gt; the daemon restarts. It's located under
&gt; /var/run/libvirt/qemu/$domain.xml. But you'll need root priviledges to
&gt; read it.
&gt; 
&gt; Also, it is very wise to follow the comment at the beginning of the file
&gt; and not modify it ;-) And just like with any libvirt internals, we make
&gt; no guarantees they won't change in the long run.
&gt; 
&gt; Michal
&gt; 

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190309191439</emailId><senderName>Peter Crowther</senderName><senderEmail>peter.crowther@melandra.com</senderEmail><timestampReceived>2019-03-09 19:14:39-0400</timestampReceived><subject>Re: [libvirt-users] Obtaining the PID of a domain's QEMU process from C</subject><body>

[Attachment #2 (multipart/alternative)]


On Sat, 9 Mar 2019 at 17:27, Shawn Anastasio &lt;shawn@anastas.io&gt; wrote:

&gt; Thanks for the response. /var/run/libvirt/qemu/ seems to be exactly what
&gt; I'm looking for. It would, however, be nice to be able to access this
&gt; file without root privileges.
&gt;

Use a tiny setuid C program that reads the relevant file and writes it to a
known UNIX-domain socket that has more liberal permissions?  On past
experience, I wouldn't expect this to end up being supported in libvirt,
though there's nothing to stop you creating your own patched version.

Cheers,

- Peter

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;On Sat, 9 Mar 2019 at 17:27, Shawn Anastasio &lt;&lt;a \
href="mailto:shawn@anastas.io"&gt;shawn@anastas.io&lt;/a&gt;&gt; wrote:&lt;br&gt;&lt;div \
class="gmail_quote"&gt;&lt;blockquote class="gmail_quote" style="margin:0px 0px 0px \
0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"&gt;Thanks for the \
response. /var/run/libvirt/qemu/ seems to be exactly what &lt;br&gt; I'm looking for. \
It would, however, be nice to be able to access this &lt;br&gt; file without root \
privileges.&lt;br&gt; &lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Use a tiny setuid C program that \
reads the relevant file and writes it to a known UNIX-domain socket that has more \
liberal permissions?   On past experience, I wouldn't expect this to end up being \
supported in libvirt, though there's nothing to stop you creating your own \
patched version.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Cheers,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;- \
Peter&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190309203234</emailId><senderName>Shawn Anastasio</senderName><senderEmail>shawn@anastas.io</senderEmail><timestampReceived>2019-03-09 20:32:34-0400</timestampReceived><subject>Re: [libvirt-users] Obtaining the PID of a domain's QEMU process from C</subject><body>

On 3/9/19 1:14 PM, Peter Crowther wrote:
&gt; Use a tiny setuid C program that reads the relevant file and writes it to a
&gt; known UNIX-domain socket that has more liberal permissions?

Indeed this is a possibility, but I was hoping for a cleaner solution
that fit in with libvirt's existing authentication mechanisms.

 &gt; I wouldn't expect this to end up being supported in libvirt,
 &gt; though there's nothing to stop you creating your own patched version.

That's a shame, but it's certainly not the end of the world.

I may end up running my daemon as root, forking before dropping
privileges, and using the child to open the files and pass them
to the parent using SCM_RIGHTS or something.

Thanks,
Shawn


_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190311080242</emailId><senderName>Erik Skultety</senderName><senderEmail>eskultet@redhat.com</senderEmail><timestampReceived>2019-03-11 08:02:42-0400</timestampReceived><subject>Re: [libvirt-users] Obtaining the PID of a domain's QEMU process from C</subject><body>

On Sat, Mar 09, 2019 at 04:32:00PM +0100, Michal Prívozník wrote:
&gt; On 3/1/19 2:31 AM, Shawn Anastasio wrote:
&gt; &gt; Hello all,
&gt; &gt;
&gt; &gt; I'm currently writing a C program that uses the libvirt API and I need a
&gt; &gt; way to obtain the pid of a given domain's QEMU process.
&gt; &gt;
&gt; &gt; Specifically, I'm writing an ivshmem server that uses SO_PEERCRED to get
&gt; &gt; the pid of clients that connect to it, and I would like to use that pid
&gt; &gt; to look up the domain in libvirt to determine the proper domain ID to
&gt; &gt; return to the client.
&gt; &gt;
&gt; &gt; As far as I can tell, libvirt doesn't expose this information in an easy
&gt; &gt; to access manner. Of course it is possible to call `ps` and grep for the
&gt; &gt; information I'm looking for, but I was hoping for a cleaner solution.
&gt; &gt;
&gt; &gt; If anybody knows how to do this, advice would be greatly appreciated.
&gt;
&gt; There isn't an API for that as we don't want users to fiddle with qemu

That's right, and it should stay that way. On the other hand, the same way we
can't prevent anyone from editing /etc/libvirt/qemu/&lt;domain&gt;.xml or
/var/run/libvirt/qemu/&lt;domain&gt;.xml or run the 'ps' command or whatever we might
as well report the PID as part of virConnectListAllDomains data. I don't have
a problem with reporting PIDs in principle, provided it's used for informatory
purposes.
Having said that, there's the question of why libvirt should report something
that it doesn't need to consume, IOW we report machine ID which we can use to
control the machine, we also report UUID which we can consume, but we'd do
absolutely nothing with the PID besides reporting it.
Another thing is that reporting PIDs of machines running on a remote host is
quite useless for locally running clients.

Erik

&gt; behid its back. Anyway, apart from ps there might be a solution. Libvirt
&gt; of course know the PID and stores it - in the status XML. This is a file
&gt; that libvirt uses to store runtime information for the domain in case
&gt; the daemon restarts. It's located under
&gt; /var/run/libvirt/qemu/$domain.xml. But you'll need root priviledges to
&gt; read it.
&gt;
&gt; Also, it is very wise to follow the comment at the beginning of the file
&gt; and not modify it ;-) And just like with any libvirt internals, we make
&gt; no guarantees they won't change in the long run.
&gt;
&gt; Michal
&gt;
&gt; _______________________________________________
&gt; libvirt-users mailing list
&gt; libvirt-users@redhat.com
&gt; https://www.redhat.com/mailman/listinfo/libvirt-users

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190311083330</emailId><senderName>Michal Privoznik</senderName><senderEmail>mprivozn@redhat.com</senderEmail><timestampReceived>2019-03-11 08:33:30-0400</timestampReceived><subject>Re: [libvirt-users] Obtaining the PID of a domain's QEMU process from C</subject><body>

On 3/11/19 9:02 AM, Erik Skultety wrote:
&gt; On Sat, Mar 09, 2019 at 04:32:00PM +0100, Michal Prívozník wrote:
&gt;&gt; On 3/1/19 2:31 AM, Shawn Anastasio wrote:
&gt;&gt;&gt; Hello all,
&gt;&gt;&gt;
&gt;&gt;&gt; I'm currently writing a C program that uses the libvirt API and I need a
&gt;&gt;&gt; way to obtain the pid of a given domain's QEMU process.
&gt;&gt;&gt;
&gt;&gt;&gt; Specifically, I'm writing an ivshmem server that uses SO_PEERCRED to get
&gt;&gt;&gt; the pid of clients that connect to it, and I would like to use that pid
&gt;&gt;&gt; to look up the domain in libvirt to determine the proper domain ID to
&gt;&gt;&gt; return to the client.
&gt;&gt;&gt;
&gt;&gt;&gt; As far as I can tell, libvirt doesn't expose this information in an easy
&gt;&gt;&gt; to access manner. Of course it is possible to call `ps` and grep for the
&gt;&gt;&gt; information I'm looking for, but I was hoping for a cleaner solution.
&gt;&gt;&gt;
&gt;&gt;&gt; If anybody knows how to do this, advice would be greatly appreciated.
&gt;&gt;
&gt;&gt; There isn't an API for that as we don't want users to fiddle with qemu
&gt; 
&gt; That's right, and it should stay that way. On the other hand, the same way we
&gt; can't prevent anyone from editing /etc/libvirt/qemu/&lt;domain&gt;.xml or
&gt; /var/run/libvirt/qemu/&lt;domain&gt;.xml or run the 'ps' command or whatever we might
&gt; as well report the PID as part of virConnectListAllDomains data. I don't have
&gt; a problem with reporting PIDs in principle, provided it's used for informatory
&gt; purposes.
&gt; Having said that, there's the question of why libvirt should report something
&gt; that it doesn't need to consume, IOW we report machine ID which we can use to
&gt; control the machine, we also report UUID which we can consume, but we'd do
&gt; absolutely nothing with the PID besides reporting it.
&gt; Another thing is that reporting PIDs of machines running on a remote host is
&gt; quite useless for locally running clients.

Alternatively, we may do what LXC driver already does -&gt; domain ID is 
PID of init running within the container. In QEMU driver, the domain ID 
can be PID of qemu then.

Michal

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190311094611</emailId><senderName>Daniel =?utf-8?B?UC4gQmVycmFuZ8Op?=</senderName><senderEmail>berrange@redhat.com</senderEmail><timestampReceived>2019-03-11 09:46:11-0400</timestampReceived><subject>Re: [libvirt-users] Obtaining the PID of a domain's QEMU process from C</subject><body>

On Mon, Mar 11, 2019 at 09:33:30AM +0100, Michal Privoznik wrote:
&gt; On 3/11/19 9:02 AM, Erik Skultety wrote:
&gt; &gt; On Sat, Mar 09, 2019 at 04:32:00PM +0100, Michal Prívozník wrote:
&gt; &gt; &gt; On 3/1/19 2:31 AM, Shawn Anastasio wrote:
&gt; &gt; &gt; &gt; Hello all,
&gt; &gt; &gt; &gt; 
&gt; &gt; &gt; &gt; I'm currently writing a C program that uses the libvirt API and I need a
&gt; &gt; &gt; &gt; way to obtain the pid of a given domain's QEMU process.
&gt; &gt; &gt; &gt; 
&gt; &gt; &gt; &gt; Specifically, I'm writing an ivshmem server that uses SO_PEERCRED to get
&gt; &gt; &gt; &gt; the pid of clients that connect to it, and I would like to use that pid
&gt; &gt; &gt; &gt; to look up the domain in libvirt to determine the proper domain ID to
&gt; &gt; &gt; &gt; return to the client.
&gt; &gt; &gt; &gt; 
&gt; &gt; &gt; &gt; As far as I can tell, libvirt doesn't expose this information in an easy
&gt; &gt; &gt; &gt; to access manner. Of course it is possible to call `ps` and grep for the
&gt; &gt; &gt; &gt; information I'm looking for, but I was hoping for a cleaner solution.
&gt; &gt; &gt; &gt; 
&gt; &gt; &gt; &gt; If anybody knows how to do this, advice would be greatly appreciated.
&gt; &gt; &gt; 
&gt; &gt; &gt; There isn't an API for that as we don't want users to fiddle with qemu
&gt; &gt; 
&gt; &gt; That's right, and it should stay that way. On the other hand, the same way we
&gt; &gt; can't prevent anyone from editing /etc/libvirt/qemu/&lt;domain&gt;.xml or
&gt; &gt; /var/run/libvirt/qemu/&lt;domain&gt;.xml or run the 'ps' command or whatever we might
&gt; &gt; as well report the PID as part of virConnectListAllDomains data. I don't have
&gt; &gt; a problem with reporting PIDs in principle, provided it's used for informatory
&gt; &gt; purposes.
&gt; &gt; Having said that, there's the question of why libvirt should report something
&gt; &gt; that it doesn't need to consume, IOW we report machine ID which we can use to
&gt; &gt; control the machine, we also report UUID which we can consume, but we'd do
&gt; &gt; absolutely nothing with the PID besides reporting it.
&gt; &gt; Another thing is that reporting PIDs of machines running on a remote host is
&gt; &gt; quite useless for locally running clients.
&gt; 
&gt; Alternatively, we may do what LXC driver already does -&gt; domain ID is PID of
&gt; init running within the container. In QEMU driver, the domain ID can be PID
&gt; of qemu then.

I would not want todo that - in fact I've wanted to remove that aspect
of the LXC driver as it is misleading. People think its the PID of the
first proess in the container, but it is in fact the PID of the controller
in the host.   Also I like low-numbered domain IDs :-)

Regards,
Daniel
-- 
|: https://berrange.com      -o-    https://www.flickr.com/photos/dberrange :|
|: https://libvirt.org         -o-            https://fstop138.berrange.com :|
|: https://entangle-photo.org    -o-    https://www.instagram.com/dberrange :|

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190311094945</emailId><senderName>Erik Skultety</senderName><senderEmail>eskultet@redhat.com</senderEmail><timestampReceived>2019-03-11 09:49:45-0400</timestampReceived><subject>Re: [libvirt-users] Obtaining the PID of a domain's QEMU process from C</subject><body>

On Mon, Mar 11, 2019 at 09:46:11AM +0000, Daniel P. Berrangé wrote:
&gt; On Mon, Mar 11, 2019 at 09:33:30AM +0100, Michal Privoznik wrote:
&gt; &gt; On 3/11/19 9:02 AM, Erik Skultety wrote:
&gt; &gt; &gt; On Sat, Mar 09, 2019 at 04:32:00PM +0100, Michal Prívozník wrote:
&gt; &gt; &gt; &gt; On 3/1/19 2:31 AM, Shawn Anastasio wrote:
&gt; &gt; &gt; &gt; &gt; Hello all,
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; I'm currently writing a C program that uses the libvirt API and I need a
&gt; &gt; &gt; &gt; &gt; way to obtain the pid of a given domain's QEMU process.
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; Specifically, I'm writing an ivshmem server that uses SO_PEERCRED to get
&gt; &gt; &gt; &gt; &gt; the pid of clients that connect to it, and I would like to use that pid
&gt; &gt; &gt; &gt; &gt; to look up the domain in libvirt to determine the proper domain ID to
&gt; &gt; &gt; &gt; &gt; return to the client.
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; As far as I can tell, libvirt doesn't expose this information in an easy
&gt; &gt; &gt; &gt; &gt; to access manner. Of course it is possible to call `ps` and grep for the
&gt; &gt; &gt; &gt; &gt; information I'm looking for, but I was hoping for a cleaner solution.
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; If anybody knows how to do this, advice would be greatly appreciated.
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; There isn't an API for that as we don't want users to fiddle with qemu
&gt; &gt; &gt;
&gt; &gt; &gt; That's right, and it should stay that way. On the other hand, the same way we
&gt; &gt; &gt; can't prevent anyone from editing /etc/libvirt/qemu/&lt;domain&gt;.xml or
&gt; &gt; &gt; /var/run/libvirt/qemu/&lt;domain&gt;.xml or run the 'ps' command or whatever we might
&gt; &gt; &gt; as well report the PID as part of virConnectListAllDomains data. I don't have
&gt; &gt; &gt; a problem with reporting PIDs in principle, provided it's used for informatory
&gt; &gt; &gt; purposes.
&gt; &gt; &gt; Having said that, there's the question of why libvirt should report something
&gt; &gt; &gt; that it doesn't need to consume, IOW we report machine ID which we can use to
&gt; &gt; &gt; control the machine, we also report UUID which we can consume, but we'd do
&gt; &gt; &gt; absolutely nothing with the PID besides reporting it.
&gt; &gt; &gt; Another thing is that reporting PIDs of machines running on a remote host is
&gt; &gt; &gt; quite useless for locally running clients.
&gt; &gt;
&gt; &gt; Alternatively, we may do what LXC driver already does -&gt; domain ID is PID of
&gt; &gt; init running within the container. In QEMU driver, the domain ID can be PID
&gt; &gt; of qemu then.
&gt;
&gt; I would not want todo that - in fact I've wanted to remove that aspect
&gt; of the LXC driver as it is misleading. People think its the PID of the
&gt; first proess in the container, but it is in fact the PID of the controller
&gt; in the host.   Also I like low-numbered domain IDs :-)

Do you also have an opinion about potentially exposing PID as part of the
virDomain data I mentioned above (eventhough I'm a bit skeptical about that
myself)?

Erik

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190307225820</emailId><senderName>Eric Blake</senderName><senderEmail>eblake@redhat.com</senderEmail><timestampReceived>2019-03-07 22:58:20-0400</timestampReceived><subject>Re: [libvirt-users] Development of Libvirt PHP</subject><body>

[Attachment #2 (multipart/signed)]

[Attachment #4 (multipart/mixed)]


On 3/7/19 4:55 PM, Maximilian Schieder wrote:
&gt; Hey,
&gt; I want to ask if LibVirt PHP will be develop further or if it is deprecated.

It is not deprecated, but it never hurts to have more developers
submitting patches.

-- 
Eric Blake, Principal Software Engineer
Red Hat, Inc.           +1-919-301-3226
Virtualization:  qemu.org | libvirt.org


["signature.asc" (application/pgp-signature)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190308032927</emailId><senderName>Thing</senderName><senderEmail>thing.thing@gmail.com</senderEmail><timestampReceived>2019-03-08 03:29:27-0400</timestampReceived><subject>Re: [libvirt-users] Development of Libvirt PHP</subject><body>

[Attachment #2 (multipart/alternative)]


unsubscribe

On Fri, 8 Mar 2019 at 11:58, Eric Blake &lt;eblake@redhat.com&gt; wrote:

&gt; On 3/7/19 4:55 PM, Maximilian Schieder wrote:
&gt; &gt; Hey,
&gt; &gt; I want to ask if LibVirt PHP will be develop further or if it is
&gt; deprecated.
&gt;
&gt; It is not deprecated, but it never hurts to have more developers
&gt; submitting patches.
&gt;
&gt; --
&gt; Eric Blake, Principal Software Engineer
&gt; Red Hat, Inc.           +1-919-301-3226
&gt; Virtualization:  qemu.org | libvirt.org
&gt;
&gt; _______________________________________________
&gt; libvirt-users mailing list
&gt; libvirt-users@redhat.com
&gt; https://www.redhat.com/mailman/listinfo/libvirt-users

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;unsubscribe&lt;/div&gt;&lt;br&gt;&lt;div class="gmail_quote"&gt;&lt;div dir="ltr" \
class="gmail_attr"&gt;On Fri, 8 Mar 2019 at 11:58, Eric Blake &lt;&lt;a \
href="mailto:eblake@redhat.com"&gt;eblake@redhat.com&lt;/a&gt;&gt; wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote \
class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid \
rgb(204,204,204);padding-left:1ex"&gt;On 3/7/19 4:55 PM, Maximilian Schieder wrote:&lt;br&gt; \
&gt; Hey,&lt;br&gt; &gt; I want to ask if LibVirt PHP will be develop further or if it is \
deprecated.&lt;br&gt; &lt;br&gt;
It is not deprecated, but it never hurts to have more developers&lt;br&gt;
submitting patches.&lt;br&gt;
&lt;br&gt;
-- &lt;br&gt;
Eric Blake, Principal Software Engineer&lt;br&gt;
Red Hat, Inc.                 +1-919-301-3226&lt;br&gt;
Virtualization:   &lt;a href="http://qemu.org" rel="noreferrer" \
target="_blank"&gt;qemu.org&lt;/a&gt; | &lt;a href="http://libvirt.org" rel="noreferrer" \
target="_blank"&gt;libvirt.org&lt;/a&gt;&lt;br&gt; &lt;br&gt;
_______________________________________________&lt;br&gt;
libvirt-users mailing list&lt;br&gt;
&lt;a href="mailto:libvirt-users@redhat.com" \
target="_blank"&gt;libvirt-users@redhat.com&lt;/a&gt;&lt;br&gt; &lt;a \
href="https://www.redhat.com/mailman/listinfo/libvirt-users" rel="noreferrer" \
target="_blank"&gt;https://www.redhat.com/mailman/listinfo/libvirt-users&lt;/a&gt;&lt;/blockquote&gt;&lt;/div&gt;




_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190306152600</emailId><senderName>Michal PrÃ­voznÃ­k</senderName><senderEmail>mprivozn@redhat.com</senderEmail><timestampReceived>2019-03-06 15:26:00-0400</timestampReceived><subject>Re: [libvirt-users] virsh hangs when backup jobs run on the kvm host</subject><body>

On 3/3/19 4:23 AM, Zhan Adlun wrote:
&gt; Hi,
&gt; Has anyone met the same problem that virsh hangs when there are some backup jobs \
&gt; running on the kvm host? I use dirty bitmap supported by qemu to do backups every 6 \
&gt; minitues. About a few hours later, I ran 'virsh list', It hung.  Then I stopped the \
&gt; backup jobs £¬nothing was getting better. I had checked the libvirt logs £¬but \
&gt; found nothing useful . Maybe the high I/O caused the problem? or there are \
&gt; connection number limits when using virsh, because I use virsh to check the backup \
&gt; jobs are still running every 10 seconds? My os version is ' Ubuntu 12.04 LTS   \
&gt; Release: 12.04   Codename: precise,Linux version 4.1.0-generic (gcc version 4.6.3 \
&gt; (Ubuntu/Linaro 4.6.3-1ubuntu5) ) #1 SMP Wed Nov 9 02:04:23 CST 2016'. KVM version \
&gt; is 'QEMU emulator version 2.7.1(Debian 1:2.7+dfsg-3)'. Hoping for you reply. \
&gt; Thanks!


This sounds like a deadlock. If you can attach gdb to libvirtd once
virsh hangs and run 't a a bt' and share the output, that'd be great.

Michal

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20190308121240</emailId><senderName>Daniel =?utf-8?B?UC4gQmVycmFuZ8Op?=</senderName><senderEmail>berrange@redhat.com</senderEmail><timestampReceived>2019-03-08 12:12:40-0400</timestampReceived><subject>Re: [libvirt-users] Development of Libvirt PHP</subject><body>

On Thu, Mar 07, 2019 at 11:55:33PM +0100, Maximilian Schieder wrote:
&gt; Hey,
&gt; I want to ask if LibVirt PHP will be develop further or if it is deprecated.

Any of the language bindings are really dependent on having interested
developers with the motivation to work on them. The Python, Perl and Go
bindings are the only ones with 100% coverage of libvirt C API. The
other languages have varying levels of API coverage - typically however
much was needed by the person(s) who were using them.

IOW, if you want to use it &amp; it doesn't cover APis you need, we'd be
happy to receive patches from yourself or anyone else who is willing
to help.

Regards,
Daniel
-- 
|: https://berrange.com      -o-    https://www.flickr.com/photos/dberrange :|
|: https://libvirt.org         -o-            https://fstop138.berrange.com :|
|: https://entangle-photo.org    -o-    https://www.instagram.com/dberrange :|

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190311095215</emailId><senderName>Daniel =?utf-8?B?UC4gQmVycmFuZ8Op?=</senderName><senderEmail>berrange@redhat.com</senderEmail><timestampReceived>2019-03-11 09:52:15-0400</timestampReceived><subject>Re: [libvirt-users] Obtaining the PID of a domain's QEMU process from C</subject><body>

On Mon, Mar 11, 2019 at 10:49:45AM +0100, Erik Skultety wrote:
&gt; On Mon, Mar 11, 2019 at 09:46:11AM +0000, Daniel P. Berrangé wrote:
&gt; &gt; On Mon, Mar 11, 2019 at 09:33:30AM +0100, Michal Privoznik wrote:
&gt; &gt; &gt; On 3/11/19 9:02 AM, Erik Skultety wrote:
&gt; &gt; &gt; &gt; On Sat, Mar 09, 2019 at 04:32:00PM +0100, Michal Prívozník wrote:
&gt; &gt; &gt; &gt; &gt; On 3/1/19 2:31 AM, Shawn Anastasio wrote:
&gt; &gt; &gt; &gt; &gt; &gt; Hello all,
&gt; &gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; &gt; I'm currently writing a C program that uses the libvirt API and I need a
&gt; &gt; &gt; &gt; &gt; &gt; way to obtain the pid of a given domain's QEMU process.
&gt; &gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; &gt; Specifically, I'm writing an ivshmem server that uses SO_PEERCRED to get
&gt; &gt; &gt; &gt; &gt; &gt; the pid of clients that connect to it, and I would like to use that pid
&gt; &gt; &gt; &gt; &gt; &gt; to look up the domain in libvirt to determine the proper domain ID to
&gt; &gt; &gt; &gt; &gt; &gt; return to the client.
&gt; &gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; &gt; As far as I can tell, libvirt doesn't expose this information in an easy
&gt; &gt; &gt; &gt; &gt; &gt; to access manner. Of course it is possible to call `ps` and grep for the
&gt; &gt; &gt; &gt; &gt; &gt; information I'm looking for, but I was hoping for a cleaner solution.
&gt; &gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; &gt; If anybody knows how to do this, advice would be greatly appreciated.
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; There isn't an API for that as we don't want users to fiddle with qemu
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; That's right, and it should stay that way. On the other hand, the same way we
&gt; &gt; &gt; &gt; can't prevent anyone from editing /etc/libvirt/qemu/&lt;domain&gt;.xml or
&gt; &gt; &gt; &gt; /var/run/libvirt/qemu/&lt;domain&gt;.xml or run the 'ps' command or whatever we might
&gt; &gt; &gt; &gt; as well report the PID as part of virConnectListAllDomains data. I don't have
&gt; &gt; &gt; &gt; a problem with reporting PIDs in principle, provided it's used for informatory
&gt; &gt; &gt; &gt; purposes.
&gt; &gt; &gt; &gt; Having said that, there's the question of why libvirt should report something
&gt; &gt; &gt; &gt; that it doesn't need to consume, IOW we report machine ID which we can use to
&gt; &gt; &gt; &gt; control the machine, we also report UUID which we can consume, but we'd do
&gt; &gt; &gt; &gt; absolutely nothing with the PID besides reporting it.
&gt; &gt; &gt; &gt; Another thing is that reporting PIDs of machines running on a remote host is
&gt; &gt; &gt; &gt; quite useless for locally running clients.
&gt; &gt; &gt;
&gt; &gt; &gt; Alternatively, we may do what LXC driver already does -&gt; domain ID is PID of
&gt; &gt; &gt; init running within the container. In QEMU driver, the domain ID can be PID
&gt; &gt; &gt; of qemu then.
&gt; &gt;
&gt; &gt; I would not want todo that - in fact I've wanted to remove that aspect
&gt; &gt; of the LXC driver as it is misleading. People think its the PID of the
&gt; &gt; first proess in the container, but it is in fact the PID of the controller
&gt; &gt; in the host.   Also I like low-numbered domain IDs :-)
&gt; 
&gt; Do you also have an opinion about potentially exposing PID as part of the
&gt; virDomain data I mentioned above (eventhough I'm a bit skeptical about that
&gt; myself)?

I would not like to expose any PID because it puts across the misleading
impression that the VM is represented by a single process. It is increasingly
clear that QEMU is heading in a direction of splitting up to provide a
multitude of processes each with distinct jobs. As such I think it is
important that the notion of how many processes are used remain an internal
impl detail not exposed to applications.

Regards,
Daniel
-- 
|: https://berrange.com      -o-    https://www.flickr.com/photos/dberrange :|
|: https://libvirt.org         -o-            https://fstop138.berrange.com :|
|: https://entangle-photo.org    -o-    https://www.instagram.com/dberrange :|

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190311195049</emailId><senderName></senderName><senderEmail>wferi</senderEmail><timestampReceived>2019-03-11 19:50:49-0400</timestampReceived><subject>Re: [libvirt-users] How to insert a dummy NIC</subject><body>

Laine Stump &lt;laine@redhat.com&gt; writes:

&gt; On 3/11/19 5:05 AM, wferi@niif.hu wrote:
&gt;
&gt;&gt; Is there a way to "reserve" a bus address for such manually added
&gt;&gt; devices without assigning explicit addresses to all other devices in
&gt;&gt; the configuration?
&gt;
&gt; no, there's no way to do that; if a PCI address isn't used by a device
&gt; in the libvirt config, it is considered fair game for assigning to a
&gt; new device, and we've never considered such an option.

Understood; thanks for confirming this.

&gt;&gt; Things I also tried (and found inadequate):
&gt;&gt;
&gt;&gt; * Using "generic ethernet connection" for the dummy NICs.  Close, but
&gt;&gt;   requires extra permissions for accessing /dev/net/tun, and technically
&gt;&gt;   feels a little inferior to using a peerless network device like above.
&gt;
&gt; What version is your libvirt? extra permissions for qemu using
&gt; type='ethernet' (beyond what's required for a type='network' or
&gt; type='bridge') have not been required since libvirt-1.3.3, released on
&gt; April 6, 2016 (this was the result of commit 9c17d665f). If your
&gt; libvirt is that old, you *really* should update to something newer. If
&gt; it's *not* that old, then you're just working with out of date
&gt; documentation.

Yes, it's really that old, 1.2.9 from Debian jessie.  Works just fine
for our purposes and very stable in our environment.  We hit several
problems (deadlocks and crashes) with earlier versions before settling
here, so I'm not exactly looking forward to upgrading to 5.0, but
testing will start in the near future.

&gt; Does it matter if the interface is online or not?

No, it doesn't matter.

&gt; I would recommend using an expansion of this:
&gt;
&gt;    &lt;interface type='ethernet'&gt;
&gt;       &lt;link state='down'/&gt;
&gt;       ...
&gt;
&gt; Your guest will have a network device in the desired position, qemu
&gt; will be satisfied that the device has a backend, libvirt will know
&gt; there is a device there so it won't give the PCI address away to
&gt; somebody else, and the tap device will be IFF_DOWN, so there will be
&gt; no possibility of network traffic accidentally leaking into the host
&gt; (which would already be nearly impossible unless someone separately
&gt; assigned an IP address to the host side of the tap device).

Thanks for this, it looks like a good compromise for after the upgrade.
Those tap devices are still somewhat ugly, but so is specifying qemu
command line options and bus addresses.  And who knows, maybe qemu
eventually implements the null netdev backend mentioned on IRC and I
can have the best possible dummy interfaces for this... appliance.
-- 
Regards,
Feri

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190312131741</emailId><senderName>Alex</senderName><senderEmail>mysqlstudent@gmail.com</senderEmail><timestampReceived>2019-03-12 13:17:41-0400</timestampReceived><subject>[libvirt-users] Clock skew on Win10</subject><body>

Hi,

I'm having a problem with significant clock skew on fedora29 with
qemu-system-x86-3.0.0 and ibvirt-daemon-kvm-4.7.0. This is on my
desktop and appears to happen between suspends of the host each night.
It appears like the time just stops while the guest is suspended, of
course, but then doesn't update once the guest is resumed.

I'm pretty sure time is configured correctly on the Win10 guest. It's
configured to be set according to Internet time and syncs with
time.windows.com.

How do I troubleshoot this further?

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190314235636</emailId><senderName>Lars Lindstrom</senderName><senderEmail>lars.lindstrom@gmx.at</senderEmail><timestampReceived>2019-03-14 23:56:36-0400</timestampReceived><subject>Re: [libvirt-users] KVM-Docker-Networking using TAP and MACVLAN</subject><body>

On 3/15/19 12:42 AM, Lars Lindstrom wrote:
&gt; The problem is that I cannot seem to figure out how to configure the
&gt; Docker network to use VEPA mode.


The MACVLAN driver source revealed what the documentation concealed:

[root@server ~]# docker network create --driver macvlan --opt
parent=tap0 --opt macvlan_mode=vepa macvlan0

The containers now reach the KVM, but not each other, the KVM can reach
both - finally!

This leaves me with some performance tests to be done to find out which
of the two ways, VETH or ETHERNET/TAP, provides the most performance at
the least resource usage.


br Lars


_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190315015821</emailId><senderName>Laine Stump</senderName><senderEmail>laine@redhat.com</senderEmail><timestampReceived>2019-03-15 01:58:21-0400</timestampReceived><subject>Re: [libvirt-users] vlan tagging for openVSwitch</subject><body>

On 3/13/19 6:52 AM, lejeczek wrote:
&gt; hi everyone,
&gt; 
&gt; I'm trying to get vlans tagged in libvirt as my switch's end (yes
&gt; traffic will be leaving the host and into network switches) allows only
&gt; tagged vlans.
&gt; 
&gt; But with network as such:
&gt; 
&gt; ...
&gt; 
&gt;    &lt;portgroup name='vlan-55'&gt;
&gt;      &lt;vlan trunk='yes'&gt;


I responded to the bug you filed at bugzilla.redhat.com, but I'll 
respond here too in case someone comes across this message in the future.

If you want untagged traffic from the guest to be tagged as it is going 
onto the OVS switch, then you do not want "trunk='yes'" here. Either set 
trunk='no', or just leave it out.

If you set trunk='yes' then (as I understand it) traffic tagged with id 
55 will be allowed through the port, but the tag won't be removed or 
added. in either direction.


&gt;        &lt;tag id='55'/&gt;
&gt;      &lt;/vlan&gt;
&gt;    &lt;/portgroup&gt;
&gt; &lt;/network&gt;
&gt; 
&gt; and guest as:
&gt; 
&gt;      &lt;interface type='network'&gt;
&gt;        &lt;mac address='52:54:00:15:00:26'/&gt;
&gt;        &lt;source network='ovsbr0' portgroup='vlan-55'/&gt;
&gt;        &lt;model type='virtio'/&gt;
&gt;      &lt;/interface&gt;
&gt; 
&gt; When the guest is fully initialized vSwitch shows:
&gt; 
&gt; ...
&gt; 
&gt; _uuid               : b3c130db-fa84-49f8-9cf5-824ec8cf3b81
&gt; bond_downdelay      : 0
&gt; bond_fake_iface     : false
&gt; bond_mode           : []
&gt; bond_updelay        : 0
&gt; external_ids        : {}
&gt; fake_bridge         : false
&gt; interfaces          : [35c0a914-a21a-43d7-9f63-adacffbb62bc]
&gt; lacp                : []
&gt; mac                 : []
&gt; name                : "ovsbr0"
&gt; other_config        : {}
&gt; qos                 : []
&gt; statistics          : {}
&gt; status              : {}
&gt; tag                 : []
&gt; trunks              : []
&gt; vlan_mode           : []
&gt; 
&gt; No tags, no trunks, no vlan mode???
&gt; 
&gt; Is there something I missed (in docs though I sroogled exensively) ?
&gt; 
&gt; I also tried to add mode='trunk' into &lt;tag id='55'/&gt; and virsh does not
&gt; complains but next time I edit the guest the mode bit is gone.

There is no such attribute "mode='trunk'". The accepted attributes for 
the &lt;vlan&gt; attribute can be found at 
https://libvirt.org/formatnetwork.html - search for "vlan" within that page.

&gt; 
&gt; My vSwitch's bridge has only one phys iface (into the net switch) and I
&gt; tried setting that iface with tag/no tag, with vlan_mode/no vlan_mode
&gt; but if guest is up with above libvirt's vSwitch initialization then
&gt; guest cannot ping net switch no matter the setting for phys iface.
&gt; 
&gt; I'm on Centos 7.6 with libvirt-4.5.0-10.el7_6.4.x86_64 &amp;
&gt; openvswitch-2.0.0-7.el7.x86_64.
&gt; 
&gt; What can be the problem here?
&gt; 
&gt; many thanks, L.
&gt; 
&gt; 
&gt; 
&gt; 
&gt; 
&gt; 
&gt; 
&gt; _______________________________________________
&gt; libvirt-users mailing list
&gt; libvirt-users@redhat.com
&gt; https://www.redhat.com/mailman/listinfo/libvirt-users
&gt; 

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190316144705</emailId><senderName>Chris Lalancette</senderName><senderEmail>clalancette@gmail.com</senderEmail><timestampReceived>2019-03-16 14:47:05-0400</timestampReceived><subject>[libvirt-users] ANNOUNCE: Oz 0.17.0 release</subject><body>

All,
     I'm pleased to announce release 0.17.0 of Oz.  Oz is a program for 
doing automated installation of guest operating systems with limited 
input from the user.  Release 0.17.0 switches Oz to be python3 only, 
since Python 2 support is ending soon.  There are also some minor fixes 
in here, along with the addition of support for some new OSs.

A tarball and zipfile of this release is available on the Github 
releases page: https://github.com/clalancette/oz/releases . Packages for 
Fedora-30 and Rawhide will be built in Koji and will eventually make 
their way to stable.  Instructions on how to get and use Oz are 
available at http://github.com/clalancette/oz/wiki .


If you have questions or comments about Oz, please feel free to contact 
me at clalancette at gmail.com, or open up an issue on the github page: 
http://github.com/clalancette/oz/issues .

Thanks to everyone who contributed to this release through bug reports, 
patches, and suggestions for improvement.

Chris Lalancette

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190318103422</emailId><senderName>Peter Krempa</senderName><senderEmail>pkrempa@redhat.com</senderEmail><timestampReceived>2019-03-18 10:34:22-0400</timestampReceived><subject>Re: [libvirt-users] KVM - full system ( disk+memory) snapshot by excluding the raw disks</subject><body>

[Attachment #2 (multipart/signed)]


On Fri, Mar 15, 2019 at 12:52:06 +0000, Suresh Babu Kandukuru wrote:
&gt; Hi There , I  have KVM VM with 4 qcow2 disks and 2 raw disks .  when I
&gt; try to take full system snapshot by excluding raw disks . it is give
&gt; below error . can you help me how to fix this ?.  or is it possible to
&gt; take full system snapshot in this case .?.

No. For internal snapshots the qemu APIs don't support any form of
selecting which disks to include in a snapshots and which to omit.

This means that for a successful internal snapshot you need all disks to
be qcow2.


&gt;  
&gt; When I change XMl as internal snapshots for raw disks . It throws a
&gt; message snapshot are not supported on war disks . 
&gt;  
&gt; [root@localhost oscgpkg-7eee963550ba9e5b]# virsh snapshot-create
&gt; --domain oscg2 --xmlfile oscgsnapshot.xml error: unsupported
&gt; configuration: disk 'vda' must use snapshot mode 'internal'

This error message is based on the inherent limitation of internal
snapshots.

You can try to use external snapshots where it is possible to snapshot
anything (even raw disks, by adding a qcow2 overlay). Unfortunately
external snapshots don't work with 'Revert' and 'Delete' snapshot APIs.

["signature.asc" (application/pgp-signature)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190319024322</emailId><senderName>Zhan Adlun</senderName><senderEmail>zhanhouliang@outlook.com</senderEmail><timestampReceived>2019-03-19 02:43:22-0400</timestampReceived><subject>[libvirt-users] use dirty bitmap to backup raw images</subject><body>

[Attachment #2 (text/plain)]

Dear Sir,
    I use dirty bitmap to backup kvm raw images. I did not shutdown or suspend the vm \
when backup.  I try to export backup as raw images or qcow2 images  when doing full \
backups as the origin disk is in raw format, all backup jobs finish successfully. But \
only the raw images  works, the guest os runs well. The qcow2 backup has data \
corruption and the guest os is in rescue mode.This happens all the time and no \
operation is done to the vm when doing backup.


export as raw disk
{ "type": "drive-backup", "data": {"device": "drive-virtio-disk0", "target": \
"/datastore/centos.raw","sync":"full" ,"format": "raw"}} export as qcow2 disk
{ "type": "drive-backup", "data": {"device": "drive-virtio-disk0", "target": \
"/datastore/centos.raw","sync":"full" ,"format": "qcow2"}}


After I suspend the vm, and export qcow2 disk, the disk works.
Are there any limits when using bitmap to backup raw disks? For example , we should \
keep the backup disk in the same format as the origin when vm is running?


[Attachment #3 (text/html)]

&lt;html&gt;
&lt;head&gt;
&lt;meta http-equiv="Content-Type" content="text/html; charset=gb2312"&gt;
&lt;style type="text/css" style="display:none;"&gt; P {margin-top:0;margin-bottom:0;} \
&lt;/style&gt; &lt;/head&gt;
&lt;body dir="ltr"&gt;
&lt;div style="font-family: Calibri, Arial, Helvetica, sans-serif; font-size: 12pt; \
color: rgb(0, 0, 0);"&gt; Dear Sir,&lt;/div&gt;
&lt;div style="font-family: Calibri, Arial, Helvetica, sans-serif; font-size: 12pt; \
color: rgb(0, 0, 0);"&gt;     I use dirty bitmap to backup kvm raw images. I \
did not shutdown or suspend the vm when backup. &lt;/div&gt; &lt;div style="font-family: \
Calibri, Arial, Helvetica, sans-serif; font-size: 12pt; color: rgb(0, 0, 0);"&gt;   \
  I try to export backup as raw images or qcow2 images  when doing full \
backups as the origin disk is in raw format, all backup jobs finish successfully. But \
only the raw images  works, the guest os runs well. The qcow2 backup \
has data corruption and the  guest os is in rescue mode.This happens all the \
time and no operation is done to the vm when doing backup.&lt;/div&gt; &lt;div \
style="font-family: Calibri, Arial, Helvetica, sans-serif; font-size: 12pt; color: \
rgb(0, 0, 0);"&gt;  &lt;/div&gt;
&lt;div style="font-family: Calibri, Arial, Helvetica, sans-serif; font-size: 12pt; \
color: rgb(0, 0, 0);"&gt; &lt;br&gt;
&lt;/div&gt;
&lt;div style="font-family: Calibri, Arial, Helvetica, sans-serif; font-size: 12pt; \
color: rgb(0, 0, 0);"&gt; &lt;span style="font-family: Calibri, Arial, Helvetica, \
sans-serif; background-color: rgb(255, 255, 255); display: inline !important"&gt;export \
as raw disk&lt;/span&gt;&lt;br&gt; &lt;/div&gt;
&lt;div style="font-family: Calibri, Arial, Helvetica, sans-serif; font-size: 12pt; \
color: rgb(0, 0, 0);"&gt; { "type": "drive-backup", \
"data": {"device": "drive-virtio-disk0", \
"target": "/datastore/centos.raw","sync":"full" \
,"format": "raw"}}&lt;br&gt; &lt;/div&gt;
&lt;div style="font-family: Calibri, Arial, Helvetica, sans-serif; font-size: 12pt; \
color: rgb(0, 0, 0);"&gt; export as qcow2 disk&lt;/div&gt;
&lt;div style="font-family: Calibri, Arial, Helvetica, sans-serif; font-size: 12pt; \
color: rgb(0, 0, 0);"&gt; { "type": "drive-backup", \
"data": {"device": "drive-virtio-disk0", \
"target": "/datastore/centos.raw","sync":"full" \
,"format": "qcow2"}}&lt;br&gt; &lt;/div&gt;
&lt;div style="font-family: Calibri, Arial, Helvetica, sans-serif; font-size: 12pt; \
color: rgb(0, 0, 0);"&gt; &lt;br&gt;
&lt;/div&gt;
&lt;div style="font-family: Calibri, Arial, Helvetica, sans-serif; font-size: 12pt; \
color: rgb(0, 0, 0);"&gt; &lt;br&gt;
&lt;/div&gt;
&lt;div style="font-family: Calibri, Arial, Helvetica, sans-serif; font-size: 12pt; \
color: rgb(0, 0, 0);"&gt; &lt;span style="font-family: Calibri, Arial, Helvetica, \
sans-serif; background-color: rgb(255, 255, 255); display: inline !important"&gt;After I \
suspend the vm, and export qcow2 disk, the disk works.&lt;/span&gt;&lt;/div&gt; &lt;div \
style="font-family: Calibri, Arial, Helvetica, sans-serif; font-size: 12pt; color: \
rgb(0, 0, 0);"&gt; Are there any limits when using bitmap to backup raw disks? For \
example , we should keep the backup disk in the same format as the origin when vm is \
running? &lt;/div&gt; &lt;div id="signature"&gt;&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
--===============3449095509563484042==--


</body></email><email><emailId>20190322194837</emailId><senderName>Mircea Husz</senderName><senderEmail>mirceahusz@yahoo.com</senderEmail><timestampReceived>2019-03-22 19:48:37-0400</timestampReceived><subject>Re: [libvirt-users] virsh snapshot-create-as: change umask on snapshots</subject><body>


&gt; On Friday, March 22, 2019, 12:36:16 PM CDT, Peter Krempa &lt;pkrempa@redhat.com&gt; \
&gt; wrote:  
&gt; On Wed, Mar 20, 2019 at 15:48:43 -0500, Eric Blake wrote:
&gt; 
&gt; &gt; On 3/20/19 1:50 PM, Mircea Husz wrote:
&gt; &gt; &gt; I scripted the creation of snapshots and it works fine. Now I'd like to run the \
&gt; &gt; &gt; script as non-root. 
&gt; &gt; &gt; virsh snapshot-create-as --domain hq-live-v01 \
&gt; &gt; &gt; --name snappy \
&gt; &gt; &gt; --diskspec vda,file=/var/lib/libvirt/images/hq-live-v01.snappy,snapshot=external \
&gt; &gt; &gt;                 \
&gt; &gt; &gt; --diskspec vdb,file=/var/lib/libvirt/images/hq-live-storage.snappy,snapshot=external \
&gt; &gt; &gt;                 \
&gt; &gt; &gt; --disk-only --quiesce --atomic
&gt; &gt; &gt; 
&gt; &gt; &gt; This fragment creates the snapshots, but get created with mode 0600:
&gt; &gt; &gt; -rw-------  1 qemu qemu     393216 Mar 19 17:08 hq-live-storage.snappy
&gt; &gt; &gt; -rw-------  1 qemu qemu    1048576 Mar 19 17:08 hq-live-v01.snappy
&gt; &gt; &gt; 
&gt; &gt; &gt; The user account is in the libvirt group and has permissions to do everything \
&gt; &gt; &gt; except delete the files created by the snapshot, all I need is to get the \
&gt; &gt; &gt; snapshots created with 0660 mode. 
&gt; &gt; &gt; This is on a Centos 7.6 installation.  What knobs do I need to turn to control \
&gt; &gt; &gt; the umask?
&gt; &gt; 
&gt; &gt; I'm not sure if you can force libvirt to create the files with a
&gt; &gt; different mask, but perhaps a workaround would be to pre-create the
&gt; &gt; files yourself with desired permissions, then tell virsh to
&gt; &gt; --reuse-external (so that libvirt no longer has to try and create the
&gt; &gt; files, and thus doesn't mess with permissions).
&gt; 
&gt; 
&gt; --reuse-external is good only for using a custom-formatted image.
&gt; Libvirt will chown the image to qemu:qemu if you don't disable
&gt; relabelling. This is possible to do via the &lt;seclabel&gt; even in a
&gt; snapshot &lt;disk&gt; definition.

I created an image as the non-root user and it worked well.
qemu-img create -f qcow2 /path/to/file 1k

&gt; Note that it's not documented yet and also does not conform to the
&gt; schema, but the parser happily parses it and the code uses the correct
&gt; &lt;seclabel&gt; then. I have a not-sufficiently-tested patch that adds the
&gt; schema (and IIRC also docs) which I planned to send after testing.

Yes, I noticed that the snapshot changed the owner back to qemu. 
I just added the user to the qemu group. Good thing it didn't change the mask.

Also, selinux is disabled on this installation.

Thank you for the helpful information.
-Mike

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20190326173112</emailId><senderName>Laine Stump</senderName><senderEmail>laine@redhat.com</senderEmail><timestampReceived>2019-03-26 17:31:12-0400</timestampReceived><subject>Re: [libvirt-users] Error starting domain: internal error: Unable to add port vnet0 to OVS bridge br</subject><body>

I added libvirt-users@redhat.com back to the Cc for this response. 
Please don't remove the list address when responding to postings on a 
mailing list. A message to the list is *much* more likely to reach 
someone who knows the answer than is a private message to a single person.


On 3/26/19 10:03 AM, Harsh Gondaliya wrote:
&gt; Mar 26 19:25:01 dpdk-OptiPlex-5040 libvirtd.service: 20423: error : 
&gt; virCommandWait:2553 : internal error: Child process (ovs-vsctl 
&gt; --timeout=5 -- --if-exists del-port vnet0 -- add-port br0 vnet0 -- set 
&gt; Interface vnet0 'external-ids:attached-mac="52:54:00:90:c6:c3"' -- set 
&gt; Interface vnet0 
&gt; 'external-ids:iface-id="a9700eff-03a7-4c47-a112-429fc20677a2"' -- set 
&gt; Interface vnet0 
&gt; 'external-ids:vm-id="41b4eef0-b820-41da-9034-9de22e1379e0"' -- set 
&gt; Interface vnet0 external-ids:iface-status=active) unexpected exit status 
&gt; 126:
&gt; *
&gt; *
&gt; *libvirt:  error : cannot execute binary ovs-vsctl: Permission denied*
&gt; 
&gt; Mar 26 19:25:01 dpdk-OptiPlex-5040 kernel: [ 1932.243181] audit: 
&gt; type=1400 audit(1553608501.701:59): apparmor="DENIED" operation="exec" 
&gt; profile="/usr/sbin/libvirtd" name="/usr/local/bin/ovs-vsctl" pid=20679 
&gt; comm="libvirtd" requested_mask="x" denied_mask="x" fsuid=0 ouid=0

AppArmor is prohibiting it for some reason. I don't run debian or 
ubuntu, so I don't have any idea how AppArmor works. Possibly someone 
else on the list knows (or maybe you could search for help on AppArmor 
somewhere).


&gt; 
&gt; Mar 26 19:25:01 dpdk-OptiPlex-5040 libvirtd.service: 20423: debug : 
&gt; virCommandRun:2280 : Result status 0, stdout: '' stderr: 'libvirt:  
&gt; error : cannot execute binary ovs-vsctl: Permission denied#012'
&gt; Mar 26 19:25:01 dpdk-OptiPlex-5040 libvirtd.service: 20423: error : 
&gt; virNetDevOpenvswitchAddPort:155 : internal error: Unable to add port 
&gt; vnet0 to OVS bridge br0
&gt; Mar 26 19:25:01 dpdk-OptiPlex-5040 NetworkManager[1096]: &lt;info&gt;  
&gt; [1553608501.7126] devices removed (path: /sys/devices/virtual/net/vnet0, 
&gt; iface: vnet0)
&gt; 
&gt; 
&gt; libvrt does not have permissions to execute ovs-vsctl. How can I get 
&gt; this issue sorted out?
&gt; 
&gt; On Wed, Mar 20, 2019 at 12:10 AM Laine Stump &lt;laine@redhat.com 
&gt; &lt;mailto:laine@redhat.com&gt;&gt; wrote:
&gt; 
&gt;     On 3/15/19 3:21 AM, Harsh Gondaliya wrote:
&gt;      &gt; I have installed OVS from sources using the installation steps
&gt;     mentioned
&gt;      &gt; on this link:
&gt;     http://docs.openvswitch.org/en/latest/intro/install/general/
&gt;      &gt;
&gt;      &gt; I had installed libvrt, KVM, QEMU and all the necessary packages
&gt;     using
&gt;      &gt; apt-get. My KVM-QEMU hypervisor has been running well.
&gt;      &gt;
&gt;      &gt; To add a VM with the port attached to OVS bridge I changed the XML
&gt;      &gt; domain file as per the instructions on this page:
&gt;      &gt; http://docs.openvswitch.org/en/latest/howto/libvirt/
&gt;      &gt;
&gt;      &gt; But the when I start the VM using the Virtual Machine Manager I get
&gt;      &gt; the following error:
&gt;      &gt; *Error starting domain: internal error: Unable to add port vnet0
&gt;     to OVS
&gt;      &gt; bridge br0*
&gt; 
&gt;     libvirt is creating a tap device, then running ovs-vsctl to attempt to
&gt;     attach it to the configured switch. To see what command is run, and
&gt;     what
&gt;     error is output, add this to your /etc/libvirt/libvirt.d:
&gt; 
&gt;         log_filters="1:util.command 1:util.netdevopenvswitch"
&gt;         log_outputs="1:syslog:libvirtd.service"
&gt; 
&gt;     and restart the libvirt service, then attempt to start your guest while
&gt;     watching the system logs. You will see an ovs-vsctl command run by
&gt;     virCommandRunAsync. That command and its output should give you a clue
&gt;     to what is missing from the locally-built openvswitch vs the official
&gt;     package installed with apt-get.
&gt; 
&gt; 
&gt;      &gt; Traceback (most recent call last):
&gt;      &gt;    File "/usr/share/virt-manager/virtManager/asyncjob.py", line
&gt;     90, in
&gt;      &gt; cb_wrapper
&gt;      &gt;      callback(asyncjob, *args, **kwargs)
&gt;      &gt;    File "/usr/share/virt-manager/virtManager/asyncjob.py", line
&gt;     126, in
&gt;      &gt; tmpcb
&gt;      &gt;      callback(*args, **kwargs)
&gt;      &gt;    File "/usr/share/virt-manager/virtManager/libvirtobject.py",
&gt;     line 83,
&gt;      &gt; in newfn
&gt;      &gt;      ret = fn(self, *args, **kwargs)
&gt;      &gt;    File "/usr/share/virt-manager/virtManager/domain.py", line
&gt;     1402, in
&gt;      &gt; startup
&gt;      &gt;      self._backend.create()
&gt;      &gt;    File "/usr/lib/python2.7/dist-packages/libvirt.py", line 1035,
&gt;     in create
&gt;      &gt;      if ret == -1: raise libvirtError ('virDomainCreate()
&gt;     failed', dom=self)
&gt;      &gt; libvirtError: internal error: Unable to add port vnet0 to OVS
&gt;     bridge br0
&gt;      &gt;
&gt;      &gt; My output for ovs-vsctl show:
&gt;      &gt; 3c28f516-dd5c-43cf-bea1-7c068668d1f6
&gt;      &gt;      Bridge "br0"
&gt;      &gt;          Port "enp0s31f6"
&gt;      &gt;              Interface "enp0s31f6"
&gt;      &gt;          Port "br0"
&gt;      &gt;              Interface "br0"
&gt;      &gt;                  type: internal
&gt;      &gt;      ovs_version: "2.11.90"
&gt;      &gt;
&gt;      &gt; *However, when OVS is installed using apt-get rather than installing
&gt;      &gt; from source or tarball, all these steps work very well.*
&gt;      &gt; *
&gt;      &gt; *
&gt;      &gt; Please guide me why this error is occurring. I am using Ubuntu
&gt;     16.04 LTS
&gt;      &gt; as my host machine. Many users are facing this issue and they have
&gt;      &gt; reported it on OVS and other mailing lists. But, none is able to
&gt;     give a
&gt;      &gt; satisfactory solution.
&gt;      &gt;
&gt;      &gt; Regards,
&gt;      &gt; Harsh
&gt;      &gt;
&gt;      &gt;
&gt;      &gt; _______________________________________________
&gt;      &gt; libvirt-users mailing list
&gt;      &gt; libvirt-users@redhat.com &lt;mailto:libvirt-users@redhat.com&gt;
&gt;      &gt; https://www.redhat.com/mailman/listinfo/libvirt-users
&gt;      &gt;
&gt; 

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190327132551</emailId><senderName>Peter Krempa</senderName><senderEmail>pkrempa@redhat.com</senderEmail><timestampReceived>2019-03-27 13:25:51-0400</timestampReceived><subject>Re: [libvirt-users] Problem passing qemu cmdline option when using &lt;qemu:commandline&gt; in domain xml.</subject><body>

[Attachment #2 (multipart/signed)]


On Wed, Mar 27, 2019 at 03:05:17 +0800, Chenzijian wrote:
&gt; 【Sorry there I maked some mistake in my first email, here is the correct one.】
&gt; I am trying to pass-through the parallel port of the host to the guest.
&gt; When I just used qemu-system-x86_64 with option '-chardev \
&gt; parallel,id=charparallel0,path=/dev/parport0 -device \
&gt; isa-parallel,chardev=charparallel0,id=parallel0', it worked perfect.  But when I \
&gt;                 tried to pass these option by adding lines below to the domain xml,
&gt; ...
&gt; &lt;/device&gt;
&gt; &lt;qemu:commandline&gt;
&gt; &lt;qemu:args value='-chardev'/&gt;
&gt; &lt;qemu:args value='parallel,id=charparallel0,path=/dev/parport0'/&gt;
&gt; &lt;qemu:args value='-device'/&gt;
&gt; &lt;qemu:args value='isa-parallel,chardev=charparallel0,id=parallel0'/&gt;
&gt; &lt;/qemu:commandline&gt;

Note that using this should not be required as libvirt does support
&lt;parallel&gt; devices.


&gt; ...
&gt; it failed and showed:
&gt; [root@localhost local]# virsh start test02
&gt; error: Failed to start domain test02
&gt; error: internal error: process exited while connecting to monitor: 2019-03-27 \
&gt; 02:28:12.507+0000: Domain id=32 is  tainted: custom-argv \
&gt; 2019-03-27T02:28:12.599326Z qemu-system-x86_64: -chardev \
&gt; parallel,id=charparallel0,path=/dev/parport0: Could not  open '/dev/parport0': No \
&gt; such file or directory 
&gt; 
&gt; I dont know why it showed a 'No such file or directory'. The /dev/parport0 is \
&gt; actually here. I have tried setting chmod 666 to /dev/parport0 and shutdown the \
&gt; selinux, but it always show the same thing. Please give me some help, thanks.

libvirt runs qemu in a "container" where /dev/is not fully populated,
but rather only necessary devices are present.

For the example above you should be able to use the &lt;parallel&gt; element
directly.

You can work around the containerization of /dev/ by adding the correct
device to cgroup_device_acl in /etc/libvirt/qemu.conf


["signature.asc" (application/pgp-signature)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190327135109</emailId><senderName>Gonéri Le Bouder</senderName><senderEmail>goneri@lebouder.net</senderEmail><timestampReceived>2019-03-27 13:51:09-0400</timestampReceived><subject>Re: [libvirt-users] Virt-Lightning: a cloud-like CLI for libvirt</subject><body>

[Attachment #2 (multipart/signed)]


Michal Privoznik &lt;mprivozn@redhat.com&gt; writes:

&gt; Cool. Do you want to add it to https://libvirt.org/apps.html ?
&gt; If so, you can just send a patch against libvirt.git/docs/apps.html.in 
&gt; (or I can do that if you don't feel like it).

Thanks Michal for the feedback. Yes please, could you adjust the page
for me?

Regards,
-- 
    Gonéri Le Bouder

["signature.asc" (application/pgp-signature)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190328153606</emailId><senderName>Michal Privoznik</senderName><senderEmail>mprivozn@redhat.com</senderEmail><timestampReceived>2019-03-28 15:36:06-0400</timestampReceived><subject>Re: [libvirt-users] Error Starting domain: Failed to page size of file</subject><body>

On 3/28/19 2:25 PM, Harsh Gondaliya wrote:
&gt; I am trying to connect a KVM-QEMU VM to OVS-DPDK vhostuser port. But, I am
&gt; encountering a few errors. Since I am very new to libvrt and Linux I am not
&gt; able to sort them out. Any guidance in this regard would be a great help.
&gt; 
&gt; These are my System Logs:

For future reference, it may be better to use some sharing service (e.g. 
pastebin) rather than pasting huge logs into an e-mail.

&gt; *Mar 28 18:03:05 dpdk-OptiPlex-5040 libvirtd.service: 1351: error :
&gt; qemuProcessReportLogError:1709 : internal error: early end of file from
&gt; monitor, possible problem: 2019-03-28T12:33:05.007674Z qemu-system-x86_64:
&gt; -chardev socket,id=charnet0,path=/var/run/openvswitch/vhost-user1: Failed
&gt; to connect socket: Permission denied*

This says that your openvswitch is not allowing qemu to connect. You 
need to fix your permissions.

&gt; *Mar 28 18:03:05 dpdk-OptiPlex-5040 virtlogd[6704]: Cannot open log file:
&gt; '/var/log/libvirt/qemu/VM1.log': Device or resource busy*

This is suspicious, but if I recall correctly, this was fixed a while 
ago. You might want to test the latest libvirt. BTW what is your libvirt 
version?


&gt; *Mar 28 18:35:58 dpdk-OptiPlex-5040 libvirtd.service: 1530: error :
&gt; qemuProcessReportLogError:1709 : internal error: process exited while
&gt; connecting to monitor: 2019-03-28T13:05:58.059732Z qemu-system-x86_64:
&gt; -object
&gt; memory-backend-file,id=ram-node0,prealloc=yes,mem-path=/dev/hugepages/libvirt/qemu,share=yes,size=2147483648:
&gt;  failed to get page size of file /dev/hugepages/libvirt/qemu: No such file
&gt; or directory*

Interesting. Libvirt detected /dev/hugepages as a hugetlbfs mount but 
failed to create the directory structure there? Or perhaps it did but 
somebody/something has removed it. Or maybe, after libvirtd was started 
then /dev/hugepages was mounted over, e.g.:

# mount none /dev/hugepages -t hugetlbfs -o pagesize=1GB

which replaces /dev/hugepages mount point with a new filesystem masking 
the old one (with the directory structure) out.

Michal

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20190204065959</emailId><senderName>Sharath Kurudi</senderName><senderEmail>kurudisharath@gmail.com</senderEmail><timestampReceived>2019-02-04 06:59:59-0400</timestampReceived><subject>[libvirt-users] Unable to start libvirt systemd service</subject><body>

[Attachment #2 (multipart/alternative)]


Hi all,

    I am using the libvirt 4.9  version. I get the following error when I
try to run the command virsh list after the system comes up

virsh list
error: failed to connect to the hypervisor
error: Failed to connect socket to '/var/run/libvirt/libvirt-sock': No such
file or directory

When I run the command ps -ef | grep libvirtd, to find whether the libvirtd
process is running. I get the following message.

 ps -ef | grep libvirtd
root       418     1  0 06:33 ?        00:00:00 /usr/sbin/libvirtd --daemon
--config /etc/libvirt/libvirtd.conf
root       420     1  0 06:33 ?        00:00:00 /usr/sbin/libvirtd --daemon
--config /etc/libvirt/libvirtd.conf

After sometime, I see that the virsh list command goes through and the
command ps -ef | grep libvirtd, gives the following putput

ps -ef | grep libvirtd
root       420     1  0 06:33 ?        00:00:00 /usr/sbin/libvirtd --daemon
--config /etc/libvirt/libvirtd.conf
root       610   227  0 06:34 ttyS0    00:00:00 grep libvirtd
root@draco:~# virsh list
Id   Name   State
--------------------

Following are the logs of journalctl -xe | grep libvirtd

-- Unit libvirtd.service has begun starting
up.
Feb 04 06:32:01 draco libvirtd[388]: 2019-02-04 06:32:01.298+0000: 388:
info : libvirt version:
4.9.0

Feb 04 06:32:01 draco libvirtd[388]: 2019-02-04 06:32:01.298+0000: 388:
info : hostname: draco
Feb 04 06:32:01 draco libvirtd[388]: 2019-02-04 06:32:01.298+0000: 388:
warning : virGetHostnameImpl:714 : getaddrinfo failed for 'draco':
Temporary failure in name resolution
Feb 04 06:33:31 draco systemd[1]: libvirtd.service: Start operation timed
out.
Terminating.

Feb 04 06:33:31 draco systemd[1]: libvirtd.service: Failed with result
'timeout'.

-- Subject: Unit libvirtd.service has
failed
-- Unit libvirtd.service has
failed.
Feb 04 06:33:31 draco systemd[1]: libvirtd.service: Service hold-off time
over, scheduling
restart.

Feb 04 06:33:31 draco systemd[1]: libvirtd.service: Scheduled restart job,
restart counter is at
4.

-- Automatic restarting of the unit libvirtd.service has been scheduled, as
the result
for

-- Subject: Unit libvirtd.service has finished shutting
down
-- Unit libvirtd.service has finished shutting
down.

-- Subject: Unit libvirtd.service has begun
start-up
-- Unit libvirtd.service has begun starting
up.
Feb 04 06:33:31 draco libvirtd[418]: 2019-02-04 06:33:31.799+0000: 418:
info : libvirt version:
4.9.0

Feb 04 06:33:31 draco libvirtd[418]: 2019-02-04 06:33:31.799+0000: 418:
info : hostname: draco       [4 draco libvirtd[418]: 2019-02-04
06:33:31.799+0000: 418: warning : virGetHostnameImpl:714 : getaddrn
Feb 04 06:33:31 draco libvirtd[418]: 2019-02-04 06:33:31.799+0000: 418:
warning : virGetHostnameImpl:714 : getaddrinfo failed for 'draco':
Temporary failure in name resolution
-- Subject: Unit libvirtd.service has finished
start-up

-- Unit libvirtd.service has finished starting
up.

Feb 04 06:34:41 draco libvirtd[420]: 482: info : libvirt version:
4.9.0
Feb 04 06:34:41 draco libvirtd[420]: 482: info : hostname:
draco
Feb 04 06:34:41 draco libvirtd[420]: 482: error : virGetUserID:1041 :
invalid argument: Failed to parse user
'tss'
Feb 04 06:34:41 draco libvirtd[420]: 482: error : virGetGroupID:1124 :
invalid argument: Failed to parse group
'tss'
- msg 68/68 100%


It is found that the libvirt systemd service times out, and for some
unkonwn reason the previous libvitrd process is not killed.
I dont see any errors in /var/log/messages or /var/log/syslog.

Could anyone please help?

Thanks
Sharath

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;&lt;div \
dir="ltr"&gt;&lt;div&gt;Hi all,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;    I am using the libvirt 4.9  \
version. I get the following error when I try to run the command virsh list after the \
system comes up&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;virsh list&lt;br&gt;error: failed to connect to \
the hypervisor&lt;br&gt;error: Failed to connect socket to \
'/var/run/libvirt/libvirt-sock': No such file or \
directory&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;When I run the command ps -ef | grep libvirtd, to \
find whether the libvirtd process is running. I get the following \
message.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; ps -ef | grep libvirtd&lt;br&gt;root       418     1  0 \
06:33 ?        00:00:00 /usr/sbin/libvirtd --daemon --config \
/etc/libvirt/libvirtd.conf&lt;br&gt;root       420     1  0 06:33 ?        00:00:00 \
/usr/sbin/libvirtd --daemon --config \
/etc/libvirt/libvirtd.conf&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;After sometime, I see that \
the virsh list command goes through and the command ps -ef | grep libvirtd, gives the \
following putput&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;ps -ef | grep libvirtd&lt;br&gt;root       420    \
1  0 06:33 ?        00:00:00 /usr/sbin/libvirtd --daemon --config \
/etc/libvirt/libvirtd.conf&lt;br&gt;root       610   227  0 06:34 ttyS0    00:00:00 grep \
libvirtd&lt;br&gt;root@draco:~# virsh list&lt;br&gt;Id   Name   State  \
&lt;br&gt;--------------------&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Following are the logs of journalctl -xe | \
grep libvirtd&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;-- Unit libvirtd.service has begun starting \
up.                                                    &lt;br&gt;Feb 04 06:32:01 draco \
libvirtd[388]: 2019-02-04 06:32:01.298+0000: 388: info : libvirt version: 4.9.0       \
&lt;br&gt;Feb 04 06:32:01 draco libvirtd[388]: 2019-02-04 06:32:01.298+0000: 388: info : \
hostname: draco       &lt;br&gt;Feb 04 06:32:01 draco libvirtd[388]: 2019-02-04 \
06:32:01.298+0000: 388: warning : virGetHostnameImpl:714 : getaddrinfo failed for \
'draco': Temporary failure in name resolution&lt;br&gt;Feb 04 06:33:31 draco \
systemd[1]: libvirtd.service: Start operation timed out. Terminating.                 \
&lt;br&gt;Feb 04 06:33:31 draco systemd[1]: libvirtd.service: Failed with result \
'timeout'.                                                                    \
&lt;br&gt;-- Subject: Unit libvirtd.service has failed                                      \
&lt;br&gt;-- Unit libvirtd.service has failed.                                              \
&lt;br&gt;Feb 04 06:33:31 draco systemd[1]: libvirtd.service: Service hold-off time over, \
scheduling restart.                                                                   \
&lt;br&gt;Feb 04 06:33:31 draco systemd[1]: libvirtd.service: Scheduled restart job, \
restart counter is at 4.                                                              \
&lt;br&gt;-- Automatic restarting of the unit libvirtd.service has been scheduled, as the \
result for                                                                            \
&lt;br&gt;-- Subject: Unit libvirtd.service has finished shutting down                      \
&lt;br&gt;-- Unit libvirtd.service has finished shutting down.                              \
&lt;br&gt;-- Subject: Unit libvirtd.service has begun start-up                              \
&lt;br&gt;-- Unit libvirtd.service has begun starting up.                                   \
&lt;br&gt;Feb 04 06:33:31 draco libvirtd[418]: 2019-02-04 06:33:31.799+0000: 418: info : \
libvirt version: 4.9.0                                                                \
&lt;br&gt;Feb 04 06:33:31 draco libvirtd[418]: 2019-02-04 06:33:31.799+0000: 418: info : \
hostname: draco        [4 draco libvirtd[418]: 2019-02-04 06:33:31.799+0000: 418: \
warning : virGetHostnameImpl:714 : getaddrn&lt;br&gt;Feb 04 06:33:31 draco libvirtd[418]: \
2019-02-04 06:33:31.799+0000: 418: warning : virGetHostnameImpl:714 : getaddrinfo \
failed for 'draco': Temporary failure in name resolution&lt;br&gt;-- Subject: Unit \
libvirtd.service has finished start-up                                                \
&lt;br&gt;-- Unit libvirtd.service has finished starting up.                                \
&lt;br&gt;Feb 04 06:34:41 draco libvirtd[420]: 482: info : libvirt version: 4.9.0           \
&lt;br&gt;Feb 04 06:34:41 draco libvirtd[420]: 482: info : hostname: draco                  \
&lt;br&gt;Feb 04 06:34:41 draco libvirtd[420]: 482: error : virGetUserID:1041 : invalid \
argument: Failed to parse user 'tss'                                          \
&lt;br&gt;Feb 04 06:34:41 draco libvirtd[420]: 482: error : virGetGroupID:1124 : invalid \
argument: Failed to parse group 'tss'                                         \
&lt;br&gt;- msg 68/68 100%&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;It is found that the \
libvirt systemd service times out, and for some unkonwn reason the previous libvitrd \
process is not killed.&lt;/div&gt;&lt;div&gt;I dont see any errors in /var/log/messages or \
/var/log/syslog. &lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Could anyone please \
help?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks&lt;/div&gt;&lt;div&gt;Sharath&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;




_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190206132630</emailId><senderName>Alvin Starr</senderName><senderEmail>alvin@netvel.net</senderEmail><timestampReceived>2019-02-06 13:26:30-0400</timestampReceived><subject>Re: [libvirt-users] Installing libvirt and Xen on Red Hat 7.5</subject><body>

[Attachment #2 (multipart/alternative)]


I believe you need libvirt-daemon-driver-libxl

Here is my libvirt installed RPMs (Its a stable system so does not get 
frequent updates so may be older than yours)

libvirt-daemon-driver-xen-3.2.1-402.el7.x86_64
libvirt-daemon-kvm-3.2.1-402.el7.x86_64
libvirt-3.2.1-402.el7.x86_64
libvirt-daemon-driver-secret-3.2.1-402.el7.x86_64
libvirt-daemon-driver-storage-core-3.2.1-402.el7.x86_64
libvirt-daemon-driver-storage-logical-3.2.1-402.el7.x86_64
libvirt-libs-3.2.1-402.el7.x86_64
libvirt-daemon-config-nwfilter-3.2.1-402.el7.x86_64
libvirt-daemon-driver-storage-disk-3.2.1-402.el7.x86_64
libvirt-daemon-driver-nodedev-3.2.1-402.el7.x86_64
libvirt-daemon-driver-libxl-3.2.1-402.el7.x86_64
libvirt-daemon-driver-qemu-3.2.1-402.el7.x86_64
libvirt-daemon-driver-storage-3.2.1-402.el7.x86_64
libvirt-glib-1.0.0-1.el7.x86_64
libvirt-daemon-driver-storage-mpath-3.2.1-402.el7.x86_64
libvirt-daemon-3.2.1-402.el7.x86_64
libvirt-daemon-config-network-3.2.1-402.el7.x86_64
libvirt-daemon-driver-storage-rbd-3.2.1-402.el7.x86_64
libvirt-daemon-driver-interface-3.2.1-402.el7.x86_64
libvirt-daemon-driver-storage-iscsi-3.2.1-402.el7.x86_64
libvirt-gobject-1.0.0-1.el7.x86_64
libvirt-daemon-driver-storage-scsi-3.2.1-402.el7.x86_64
libvirt-daemon-driver-network-3.2.1-402.el7.x86_64
libvirt-daemon-driver-lxc-3.2.1-402.el7.x86_64
libvirt-daemon-driver-storage-gluster-3.2.1-402.el7.x86_64
libvirt-daemon-driver-nwfilter-3.2.1-402.el7.x86_64
libvirt-python-3.2.0-3.el7_4.1.x86_64
libvirt-client-3.2.1-402.el7.x86_64
libvirt-gconfig-1.0.0-1.el7.x86_64


On 2/4/19 6:57 PM, Lianjie Cao wrote:
&gt; Hi,
&gt; 
&gt; I am installing OpenStack on Red Hat 7.5. For Nova compute component, 
&gt; I choose libvirt and Xen.
&gt; However, I am running into some problems. It seems libvirt is unable 
&gt; to communicate with Xen.
&gt; 
&gt; Xen installation:
&gt; I installed Xen410 using "Xen make easy" 
&gt; https://xen.crc.id.au/support/guides/install/. Here is a list of 
&gt; packages installed and verification that Xen is running.
&gt; 
&gt; # lsb_release -a
&gt; LSB Version: :core-4.1-amd64:core-4.1-noarch
&gt; Distributor ID: RedHatEnterpriseServer
&gt; Description: Red Hat Enterprise Linux Server release 7.5 (Maipo)
&gt; Release: 7.5
&gt; Codename:  Maipo
&gt; 
&gt; # yum list | grep xen
&gt; * kernel-xen: us3.mirror.crc.id.au &lt;http://us3.mirror.crc.id.au&gt;
&gt; * kernel-xen-extra: us3.mirror.crc.id.au &lt;http://us3.mirror.crc.id.au&gt;
&gt; kernel-xen.x86_64               4.14.94-6.el7xen @kernel-xen
&gt; kernel-xen.x86_64               4.14.97-6.el7xen @kernel-xen
&gt; kernel-xen-devel.x86_64         4.14.97-6.el7xen @kernel-xen
&gt; kernel-xen-firmware.x86_64      4.14.97-6.el7xen @kernel-xen
&gt; kernel-xen-headers.x86_64       4.14.97-6.el7xen @kernel-xen
&gt; kernel-xen-release.noarch       1:7-13           @kernel-xen
&gt; xen410.x86_64               4.10.2-7.el7     @kernel-xen
&gt; xen410-devel.x86_64             4.10.2-7.el7     @kernel-xen
&gt; xen410-hypervisor.x86_64        4.10.2-7.el7     @kernel-xen
&gt; xen410-libs.x86_64              4.10.2-7.el7     @kernel-xen
&gt; xen410-licenses.x86_64          4.10.2-7.el7     @kernel-xen
&gt; xen410-ocaml.x86_64             4.10.2-7.el7     @kernel-xen
&gt; xen410-runtime.x86_64           4.10.2-7.el7     @kernel-xen
&gt; xen46-licenses.x86_64           4.6.6-16.el7     @kernel-xen
&gt; 
&gt; # xl info
&gt; host    : nfv-sec-cn01-pa.labs.hpecorp.net 
&gt; &lt;http://nfv-sec-cn01-pa.labs.hpecorp.net&gt;
&gt; release     : 4.14.97-6.el7xen.x86_64
&gt; version     : #2 SMP Fri Feb 1 00:33:52 AEDT 2019
&gt; machine     : x86_64
&gt; nr_cpus     : 32
&gt; max_cpu_id    : 63
&gt; nr_nodes    : 2
&gt; cores_per_socket    : 8
&gt; threads_per_core    : 2
&gt; cpu_mhz     : 1995
&gt; hw_caps     : 
&gt; bfebfbff:17bee3ff:2c100800:00000001:00000001:00000000:00000000:00000100
&gt; virt_caps     : hvm hvm_directio
&gt; total_memory    : 131034
&gt; free_memory     : 96587
&gt; sharing_freed_memory  : 0
&gt; sharing_used_memory   : 0
&gt; outstanding_claims    : 0
&gt; free_cpus     : 0
&gt; xen_major     : 4
&gt; xen_minor     : 10
&gt; xen_extra     : .3-pre
&gt; xen_version     : 4.10.3-pre
&gt; xen_caps    : xen-3.0-x86_64 xen-3.0-x86_32p hvm-3.0-x86_32 
&gt; hvm-3.0-x86_32p hvm-3.0-x86_64
&gt; xen_scheduler     : credit
&gt; xen_pagesize    : 4096
&gt; platform_params     : virt_start=0xffff800000000000
&gt; xen_changeset     : Tue Nov 20 15:45:04 2018 +0100 git:b6e203b-dirty
&gt; xen_commandline     : placeholder dom0_mem=32768M cpufreq=xen 
&gt; dom0_max_vcpus=8 dom0_vcpus_pin console=tty0 console=com1 com1=115200,8n1
&gt; cc_compiler     : gcc (GCC) 4.8.5 20150623 (Red Hat 4.8.5-28)
&gt; cc_compile_by     : mockbuild
&gt; cc_compile_domain     :
&gt; cc_compile_date     : Wed Nov 21 02:09:26 AEDT 2018
&gt; build_id    : 2d53c8b15aaf737b0351e78ad863eb5a530e7df0
&gt; xend_config_format    : 4
&gt; 
&gt; 
&gt; libvirt was installed as dependencies of openstack-nova-compute from yum.
&gt; 
&gt; ==================================================================================== \
&gt; ==============================================================================================================
&gt;  Package                                   Arch         Version 
&gt; Repository                 Size
&gt; ==================================================================================== \
&gt; ==============================================================================================================
&gt;  Installing:
&gt; openstack-nova-compute                            noarch 
&gt; 1:17.0.9-1.el7  openstack-queens                7.9 k
&gt; Installing for dependencies:
&gt; OpenIPMI-modalias                                 x86_64       
&gt; 2.0.23-2.el7  RedHat-7Server-x86_64-errata                 16 k
&gt; attr                                    x86_64         2.4.46-13.el7 
&gt; RedHat-7Server-x86_64-errata                 66 k
&gt; dosfstools                                    x86_64         
&gt; 3.0.20-9.el7  RedHat-7.1Server-x86_64                 101 k
&gt; fuse                                    x86_64         2.9.2-10.el7 
&gt; RedHat-7Server-x86_64-errata                 86 k
&gt; gdisk                                   x86_64         0.8.6-5.el7 
&gt; RedHat-7.1Server-x86_64               187 k
&gt; glusterfs-cli                                   x86_64         
&gt; 3.8.4-53.el7  RedHat-7Server-x86_64-errata                176 k
&gt; hivex                                   x86_64         1.3.10-6.9.el7 
&gt; RedHat-7Server-x86_64-errata                101 k
&gt; ipmitool                                    x86_64         
&gt; 1.8.18-7.el7  RedHat-7Server-x86_64-errata                441 k
&gt; libguestfs                                    x86_64         
&gt; 1:1.36.10-6.el7_5.2 RedHat-7Server-x86_64-errata                1.9 M
&gt; libreport-filesystem                              x86_64   
&gt; 2.1.11-40.el7 RedHat-7Server-x86_64-errata                 39 k
&gt; libvirt-daemon                                    x86_64         
&gt; 3.9.0-14.el7_5.6  RedHat-7Server-x86_64-errata                852 k
&gt; libvirt-daemon-driver-interface                   x86_64 
&gt; 3.9.0-14.el7_5.6  RedHat-7Server-x86_64-errata                220 k
&gt; libvirt-daemon-driver-network                     x86_64 
&gt; 3.9.0-14.el7_5.6  RedHat-7Server-x86_64-errata                389 k
&gt; libvirt-daemon-driver-nodedev                     x86_64 
&gt; 3.9.0-14.el7_5.6  RedHat-7Server-x86_64-errata                221 k
&gt; libvirt-daemon-driver-nwfilter                    x86_64 
&gt; 3.9.0-14.el7_5.6  RedHat-7Server-x86_64-errata                243 k
&gt; libvirt-daemon-driver-qemu                        x86_64 
&gt; 3.9.0-14.el7_5.6  RedHat-7Server-x86_64-errata                714 k
&gt; libvirt-daemon-driver-secret                      x86_64 
&gt; 3.9.0-14.el7_5.6  RedHat-7Server-x86_64-errata                210 k
&gt; libvirt-daemon-driver-storage                     x86_64 
&gt; 3.9.0-14.el7_5.6  RedHat-7Server-x86_64-errata                173 k
&gt; libvirt-daemon-driver-storage-core                x86_64 
&gt; 3.9.0-14.el7_5.6  RedHat-7Server-x86_64-errata                405 k
&gt; libvirt-daemon-driver-storage-disk                x86_64 
&gt; 3.9.0-14.el7_5.6  RedHat-7Server-x86_64-errata                182 k
&gt; libvirt-daemon-driver-storage-gluster             x86_64 
&gt; 3.9.0-14.el7_5.6  RedHat-7Server-x86_64-errata                183 k
&gt; libvirt-daemon-driver-storage-iscsi               x86_64 
&gt; 3.9.0-14.el7_5.6  RedHat-7Server-x86_64-errata                179 k
&gt; libvirt-daemon-driver-storage-logical             x86_64 
&gt; 3.9.0-14.el7_5.6  RedHat-7Server-x86_64-errata                183 k
&gt; libvirt-daemon-driver-storage-mpath               x86_64 
&gt; 3.9.0-14.el7_5.6  RedHat-7Server-x86_64-errata                178 k
&gt; libvirt-daemon-driver-storage-rbd                 x86_64 
&gt; 3.9.0-14.el7_5.6  RedHat-7Server-x86_64-errata                185 k
&gt; libvirt-daemon-driver-storage-scsi                x86_64 
&gt; 3.9.0-14.el7_5.6  RedHat-7Server-x86_64-errata                179 k
&gt; libvirt-daemon-kvm                                x86_64     
&gt; 3.9.0-14.el7_5.6  RedHat-7Server-x86_64-errata                173 k
&gt; libvirt-python                                    x86_64         
&gt; 3.9.0-1.el7 RedHat-7Server-x86_64-errata                335 k
&gt; mdadm                                   x86_64         4.0-13.el7 
&gt; RedHat-7Server-x86_64-errata                431 k
&gt; mtools                                    x86_64         4.0.18-5.el7 
&gt; RedHat-7.1Server-x86_64                 203 k
&gt; perl-hivex                                    x86_64         
&gt; 1.3.10-6.9.el7  RedHat-7Server-x86_64-errata                 41 k
&gt; python-libguestfs                                 x86_64       
&gt; 1:1.36.10-6.el7_5.2 RedHat-7Server-x86_64-errata                203 k
&gt; scrub                                   x86_64         2.5.2-7.el7 
&gt; RedHat-7Server-x86_64-errata                 41 k
&gt; squashfs-tools                                    x86_64         
&gt; 4.3-0.21.gitaae0aff4.el7  RedHat-7.1Server-x86_64                 101 k
&gt; supermin5                                   x86_64         
&gt; 5.1.19-1.el7  RedHat-7Server-x86_64-errata                631 k
&gt; syslinux                                    x86_64         
&gt; 4.05-13.el7 RedHat-7Server-x86_64-errata                990 k
&gt; syslinux-extlinux                                 x86_64       
&gt; 4.05-13.el7 RedHat-7Server-x86_64-errata                363 k
&gt; 
&gt; 
&gt; However, after installation, Nova complains "no connection driver 
&gt; available for xen:///".
&gt; Also, virsh cannot connect Xen.
&gt; 
&gt; /var/log/nova/nova-compute.log
&gt; 2019-02-01 15:13:29.965 5091 INFO nova.service [-] Starting compute 
&gt; node (version 18.1.0-1.el7)
&gt; 2019-02-01 15:13:30.023 5091 ERROR nova.virt.libvirt.host [-] 
&gt; Connection to libvirt failed: no connection driver available for 
&gt; xen:///: libvirtError: no connection driver available for xen:///
&gt; 2019-02-01 15:13:30.023 5091 ERROR nova.virt.libvirt.host Traceback 
&gt; (most recent call last):
&gt; 2019-02-01 15:13:30.023 5091 ERROR nova.virt.libvirt.host   File 
&gt; "/usr/lib/python2.7/site-packages/nova/virt/libvirt/host.py", line 
&gt; 460, in get_connection
&gt; 2019-02-01 15:13:30.023 5091 ERROR nova.virt.libvirt.host  conn = 
&gt; self._get_connection()
&gt; 2019-02-01 15:13:30.023 5091 ERROR nova.virt.libvirt.host   File 
&gt; "/usr/lib/python2.7/site-packages/nova/virt/libvirt/host.py", line 
&gt; 443, in _get_connection
&gt; 2019-02-01 15:13:30.023 5091 ERROR nova.virt.libvirt.host  {'msg': ex})
&gt; 2019-02-01 15:13:30.023 5091 ERROR nova.virt.libvirt.host   File 
&gt; "/usr/lib/python2.7/site-packages/oslo_utils/excutils.py", line 220, 
&gt; in __exit__
&gt; 2019-02-01 15:13:30.023 5091 ERROR nova.virt.libvirt.host 
&gt; self.force_reraise()
&gt; 2019-02-01 15:13:30.023 5091 ERROR nova.virt.libvirt.host   File 
&gt; "/usr/lib/python2.7/site-packages/oslo_utils/excutils.py", line 196, 
&gt; in force_reraise
&gt; 2019-02-01 15:13:30.023 5091 ERROR nova.virt.libvirt.host 
&gt; six.reraise(self.type_, self.value, self.tb)
&gt; 2019-02-01 15:13:30.023 5091 ERROR nova.virt.libvirt.host   File 
&gt; "/usr/lib/python2.7/site-packages/nova/virt/libvirt/host.py", line 
&gt; 432, in _get_connection
&gt; 2019-02-01 15:13:30.023 5091 ERROR nova.virt.libvirt.host 
&gt; self._wrapped_conn = self._get_new_connection()
&gt; 2019-02-01 15:13:30.023 5091 ERROR nova.virt.libvirt.host   File 
&gt; "/usr/lib/python2.7/site-packages/nova/virt/libvirt/host.py", line 
&gt; 386, in _get_new_connection
&gt; 2019-02-01 15:13:30.023 5091 ERROR nova.virt.libvirt.host 
&gt; wrapped_conn = self._connect(self._uri, self._read_only)
&gt; 2019-02-01 15:13:30.023 5091 ERROR nova.virt.libvirt.host   File 
&gt; "/usr/lib/python2.7/site-packages/nova/virt/libvirt/host.py", line 
&gt; 242, in _connect
&gt; 2019-02-01 15:13:30.023 5091 ERROR nova.virt.libvirt.host 
&gt; libvirt.openAuth, uri, auth, flags)
&gt; 2019-02-01 15:13:30.023 5091 ERROR nova.virt.libvirt.host   File 
&gt; "/usr/lib/python2.7/site-packages/eventlet/tpool.py", line 148, in 
&gt; proxy_call
&gt; 2019-02-01 15:13:30.023 5091 ERROR nova.virt.libvirt.host     rv = 
&gt; execute(f, *args, **kwargs)
&gt; 2019-02-01 15:13:30.023 5091 ERROR nova.virt.libvirt.host   File 
&gt; "/usr/lib/python2.7/site-packages/eventlet/tpool.py", line 129, in execute
&gt; 2019-02-01 15:13:30.023 5091 ERROR nova.virt.libvirt.host 
&gt; six.reraise(c, e, tb)
&gt; 2019-02-01 15:13:30.023 5091 ERROR nova.virt.libvirt.host   File 
&gt; "/usr/lib/python2.7/site-packages/eventlet/tpool.py", line 83, in tworker
&gt; 2019-02-01 15:13:30.023 5091 ERROR nova.virt.libvirt.host     rv = 
&gt; meth(*args, **kwargs)
&gt; 2019-02-01 15:13:30.023 5091 ERROR nova.virt.libvirt.host   File 
&gt; "/usr/lib64/python2.7/site-packages/libvirt.py", line 105, in openAuth
&gt; 2019-02-01 15:13:30.023 5091 ERROR nova.virt.libvirt.host     if ret 
&gt; is None:raise libvirtError('virConnectOpenAuth() failed')
&gt; 2019-02-01 15:13:30.023 5091 ERROR nova.virt.libvirt.host 
&gt; libvirtError: no connection driver available for xen:///
&gt; 
&gt; # virsh -c xen:/// list
&gt; error: failed to connect to the hypervisor
&gt; error: no connection driver available for xen:///
&gt; 
&gt; 
&gt; Then I check the connection drivers of libvirt. It seems the daemon 
&gt; driver for xen is missing.
&gt; 
&gt; # ls -l /usr/lib64/libvirt/connection-driver/
&gt; total 2664
&gt; -rwxr-xr-x 1 root root  115976 Jun  5  2018 libvirt_driver_interface.so
&gt; -rwxr-xr-x 1 root root  292008 Jun  5  2018 libvirt_driver_lxc.so
&gt; -rwxr-xr-x 1 root root  169424 Jun  5  2018 libvirt_driver_network.so
&gt; -rwxr-xr-x 1 root root  119720 Jun  5  2018 libvirt_driver_nodedev.so
&gt; -rwxr-xr-x 1 root root  174216 Jun  5  2018 libvirt_driver_nwfilter.so
&gt; -rwxr-xr-x 1 root root 1545344 Jun  5  2018 libvirt_driver_qemu.so
&gt; -rwxr-xr-x 1 root root   86616 Jun  5  2018 libvirt_driver_secret.so
&gt; -rwxr-xr-x 1 root root  202568 Jun  5  2018 libvirt_driver_storage.so
&gt; 
&gt; 
&gt; But I couldn't find the xen driver (libvirt-daemon-driver-xen) from 
&gt; yum. I do find it driver on some websites 
&gt; (http://rpmfind.net/linux/rpm2html/search.php?query=libvirt-daemon-driver-xen), 
&gt; but I am not sure which is the right version to choose.
&gt; I also found this email 
&gt; https://www.spinics.net/lists/centos-virt/msg05163.html.
&gt; Then I decided to compile libvirt from source code. So I checked out 
&gt; the source code from github and tried to configure and compile it.
&gt; However, from the output of ./autogen.sh --system, I don't find driver 
&gt; for xen is enabled. Actually, xen is not listed as driver in the output.
&gt; 
&gt; configure:
&gt; configure: Configuration summary
&gt; configure: =====================
&gt; configure:
&gt; configure: Drivers
&gt; configure:
&gt; configure:  QEMU: yes
&gt; configure:  OpenVZ: yes
&gt; configure:  VMware: yes
&gt; configure:  VBox: yes
&gt; configure:  XenAPI: no
&gt; configure: libxl: yes
&gt; configure: LXC: yes
&gt; configure:  PHYP: no
&gt; configure: ESX: no
&gt; configure: Hyper-V: no
&gt; configure:  vz: no
&gt; configure: Bhyve: no
&gt; configure:  Test: yes
&gt; configure:  Remote: yes
&gt; configure: Network: yes
&gt; configure:  Libvirtd: yes
&gt; configure: Interface: yes
&gt; configure:
&gt; configure: Storage Drivers
&gt; configure:
&gt; configure: Dir: yes
&gt; configure:  FS: yes
&gt; configure: NetFS: yes
&gt; configure: LVM: yes
&gt; configure: iSCSI: yes
&gt; configure: iscsi-direct: no
&gt; configure:  SCSI: yes
&gt; configure: mpath: yes
&gt; configure:  Disk: no
&gt; configure: RBD: no
&gt; configure:  Sheepdog: no
&gt; configure: Gluster: no
&gt; configure: ZFS: no
&gt; configure: Virtuozzo storage: no
&gt; configure:
&gt; configure: Security Drivers
&gt; configure:
&gt; configure: SELinux: yes
&gt; configure:  AppArmor: no
&gt; configure:
&gt; configure: Driver Loadable Modules
&gt; configure:
&gt; configure: driver_modules: yes (CFLAGS='' LIBS='-ldl')
&gt; configure:
&gt; configure: Libraries
&gt; configure:
&gt; configure: acl: no
&gt; configure:  apparmor: no
&gt; configure:  attr: no
&gt; configure: audit: no
&gt; configure: avahi: no
&gt; configure: bash_completion: no
&gt; configure: blkid: no
&gt; configure: capng: no
&gt; configure:  curl: no
&gt; configure:  dbus: no
&gt; configure:  dlopen: yes (CFLAGS='' LIBS='-ldl')
&gt; configure: firewalld: no
&gt; configure: firewalld-zone: no
&gt; configure:  fuse: no
&gt; configure: glusterfs: no
&gt; configure:  gnutls: yes (CFLAGS='-I/usr/include/p11-kit-1  ' 
&gt; LIBS='-lgnutls  ')
&gt; configure: hal: no
&gt; configure:  libiscsi: no
&gt; configure: libnl: yes (CFLAGS=' ' LIBS='-lnl  ')
&gt; configure: libpcap: no
&gt; configure:  libssh: no
&gt; configure: libxl: yes (CFLAGS='  -DLIBXL_API_VERSION=0x040500' 
&gt; LIBS='-lxenlight   -lxlutil -lxenstore -lxentoollog')
&gt; configure:  libxml: yes (CFLAGS='-I/usr/include/libxml2  ' 
&gt; LIBS='-lxml2  ')
&gt; configure: macvtap: yes (CFLAGS='' LIBS='')
&gt; configure: netcf: no
&gt; configure: NLS: yes
&gt; configure: nss: yes
&gt; configure: numactl: no
&gt; configure: openwsman: no
&gt; configure: pciaccess: yes (CFLAGS=' ' LIBS='-lpciaccess  ')
&gt; configure:  pm_utils: yes (CFLAGS='' LIBS='')
&gt; configure:  polkit: no
&gt; configure: rbd: no
&gt; configure:  readline: no
&gt; configure: sanlock: no
&gt; configure:  sasl: yes (CFLAGS='' LIBS='-lsasl2')
&gt; configure: selinux: yes (CFLAGS='' LIBS='-lselinux')
&gt; configure:  ssh2: no
&gt; configure:  udev: yes (CFLAGS=' ' LIBS='-ludev  ')
&gt; configure: virtualport: yes (CFLAGS='' LIBS='')
&gt; configure: xdr: yes (CFLAGS='' LIBS='')
&gt; configure:  xenapi: no
&gt; configure:  yajl: yes (CFLAGS='' LIBS='-lyajl')
&gt; configure:
&gt; configure: Windows
&gt; configure:
&gt; configure:  Cygwin: no
&gt; configure: MinGW: no
&gt; configure:  MSVC: no
&gt; configure: windres: no
&gt; configure:
&gt; configure: Test suite
&gt; configure:
&gt; configure: Coverage: no
&gt; configure:  Alloc OOM: no
&gt; configure:
&gt; configure: Miscellaneous
&gt; configure:
&gt; configure:     Debug: yes
&gt; configure: Use -Werror: yes
&gt; configure: Warning Flags:  -fno-common -W -Waddress 
&gt; -Waggressive-loop-optimizations -Wall -Wattributes -Wbad-function-cast 
&gt; -Wbuiltin-macro-redefined -Wcast-align -Wchar-subscripts -Wclobbered 
&gt; -Wcomment -Wcomments -Wcoverage-mismatch -Wcpp 
&gt; -Wdeprecated-declarations -Wdiv-by-zero -Wdouble-promotion 
&gt; -Wempty-body -Wendif-labels -Wextra -Wformat-contains-nul 
&gt; -Wformat-extra-args -Wformat-security -Wformat-y2k 
&gt; -Wformat-zero-length -Wfree-nonheap-object -Wignored-qualifiers 
&gt; -Wimplicit -Wimplicit-function-declaration -Wimplicit-int -Winit-self 
&gt; -Winline -Wint-to-pointer-cast -Winvalid-memory-model -Winvalid-pch 
&gt; -Wlogical-op -Wmain -Wmaybe-uninitialized -Wmissing-braces 
&gt; -Wmissing-declarations -Wmissing-field-initializers 
&gt; -Wmissing-include-dirs -Wmissing-parameter-type -Wmissing-prototypes 
&gt; -Wmultichar -Wnarrowing -Wnested-externs -Wnonnull 
&gt; -Wold-style-declaration -Wold-style-definition -Woverflow 
&gt; -Woverride-init -Wpacked-bitfield-compat -Wparentheses -Wpointer-arith 
&gt; -Wpointer-sign -Wpointer-to-int-cast -Wpragmas -Wpsabi 
&gt; -Wreturn-local-addr -Wreturn-type -Wsequence-point -Wshadow 
&gt; -Wsizeof-pointer-memaccess -Wstrict-aliasing -Wstrict-prototypes 
&gt; -Wsuggest-attribute=const -Wsuggest-attribute=format 
&gt; -Wsuggest-attribute=noreturn -Wsuggest-attribute=pure -Wswitch 
&gt; -Wsync-nand -Wtrampolines -Wtrigraphs -Wtype-limits -Wuninitialized 
&gt; -Wunknown-pragmas -Wunused -Wunused-but-set-parameter 
&gt; -Wunused-but-set-variable -Wunused-function -Wunused-label 
&gt; -Wunused-local-typedefs -Wunused-parameter -Wunused-result 
&gt; -Wunused-value -Wunused-variable -Wvarargs -Wvariadic-macros 
&gt; -Wvector-operation-performance -Wvolatile-register-var -Wwrite-strings 
&gt; -Wnormalized=nfc -Wno-sign-compare -Wjump-misses-init -Wswitch-enum 
&gt; -Wno-format-nonliteral -fstack-protector-strong -fexceptions 
&gt; -fasynchronous-unwind-tables -fipa-pure-const 
&gt; -Wno-suggest-attribute=pure -Wno-suggest-attribute=const -Werror
&gt; configure:    DTrace: no
&gt; configure:     numad: no
&gt; configure: Init script: systemd
&gt; configure:  Char device locks: /var/lock
&gt; configure:  Default Editor: vi
&gt; configure:  Loader/NVRAM:
&gt; configure:  virt-login-shell: yes
&gt; configure: virt-host-validate: yes
&gt; configure:  TLS priority: NORMAL
&gt; configure:
&gt; configure: Developer Tools
&gt; configure:
&gt; configure: wireshark_dissector: no
&gt; configure:
&gt; configure: Privileges
&gt; configure:
&gt; configure:  QEMU: root:root
&gt; configure:
&gt; 
&gt; 
&gt; My question is how should I install the libvirt-daemon-driver-xen 
&gt; driver and make Nova work with Xen?
&gt; 
&gt; Thanks a lot in advance!
&gt; Best regards,
&gt; Lianjie Cao
&gt; 
&gt; _______________________________________________
&gt; libvirt-users mailing list
&gt; libvirt-users@redhat.com
&gt; https://www.redhat.com/mailman/listinfo/libvirt-users

-- 
Alvin Starr                   ||   land:  (905)513-7688
Netvel Inc.                   ||   Cell:  (416)806-0133
alvin@netvel.net              ||


[Attachment #5 (text/html)]

&lt;html&gt;
  &lt;head&gt;
    &lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8"&gt;
  &lt;/head&gt;
  &lt;body text="#000000" bgcolor="#FFFFFF"&gt;
    &lt;p&gt;I believe you need libvirt-daemon-driver-libxl&lt;/p&gt;
    &lt;p&gt;Here is my libvirt installed RPMs (Its a stable system so does
      not get frequent updates so may be older than yours)&lt;/p&gt;
    &lt;p&gt;libvirt-daemon-driver-xen-3.2.1-402.el7.x86_64&lt;br&gt;
      libvirt-daemon-kvm-3.2.1-402.el7.x86_64&lt;br&gt;
      libvirt-3.2.1-402.el7.x86_64&lt;br&gt;
      libvirt-daemon-driver-secret-3.2.1-402.el7.x86_64&lt;br&gt;
      libvirt-daemon-driver-storage-core-3.2.1-402.el7.x86_64&lt;br&gt;
      libvirt-daemon-driver-storage-logical-3.2.1-402.el7.x86_64&lt;br&gt;
      libvirt-libs-3.2.1-402.el7.x86_64&lt;br&gt;
      libvirt-daemon-config-nwfilter-3.2.1-402.el7.x86_64&lt;br&gt;
      libvirt-daemon-driver-storage-disk-3.2.1-402.el7.x86_64&lt;br&gt;
      libvirt-daemon-driver-nodedev-3.2.1-402.el7.x86_64&lt;br&gt;
      libvirt-daemon-driver-libxl-3.2.1-402.el7.x86_64&lt;br&gt;
      libvirt-daemon-driver-qemu-3.2.1-402.el7.x86_64&lt;br&gt;
      libvirt-daemon-driver-storage-3.2.1-402.el7.x86_64&lt;br&gt;
      libvirt-glib-1.0.0-1.el7.x86_64&lt;br&gt;
      libvirt-daemon-driver-storage-mpath-3.2.1-402.el7.x86_64&lt;br&gt;
      libvirt-daemon-3.2.1-402.el7.x86_64&lt;br&gt;
      libvirt-daemon-config-network-3.2.1-402.el7.x86_64&lt;br&gt;
      libvirt-daemon-driver-storage-rbd-3.2.1-402.el7.x86_64&lt;br&gt;
      libvirt-daemon-driver-interface-3.2.1-402.el7.x86_64&lt;br&gt;
      libvirt-daemon-driver-storage-iscsi-3.2.1-402.el7.x86_64&lt;br&gt;
      libvirt-gobject-1.0.0-1.el7.x86_64&lt;br&gt;
      libvirt-daemon-driver-storage-scsi-3.2.1-402.el7.x86_64&lt;br&gt;
      libvirt-daemon-driver-network-3.2.1-402.el7.x86_64&lt;br&gt;
      libvirt-daemon-driver-lxc-3.2.1-402.el7.x86_64&lt;br&gt;
      libvirt-daemon-driver-storage-gluster-3.2.1-402.el7.x86_64&lt;br&gt;
      libvirt-daemon-driver-nwfilter-3.2.1-402.el7.x86_64&lt;br&gt;
      libvirt-python-3.2.0-3.el7_4.1.x86_64&lt;br&gt;
      libvirt-client-3.2.1-402.el7.x86_64&lt;br&gt;
      libvirt-gconfig-1.0.0-1.el7.x86_64&lt;br&gt;
      &lt;br&gt;
    &lt;/p&gt;
    &lt;p&gt;&lt;br&gt;
    &lt;/p&gt;
    &lt;div class="moz-cite-prefix"&gt;On 2/4/19 6:57 PM, Lianjie Cao wrote:&lt;br&gt;
    &lt;/div&gt;
    &lt;blockquote type="cite"
cite="mid:CADPO750qCr7YwijffG21VL1pxD+wxfMTLrD-XmwvwN381WRsdw@mail.gmail.com"&gt;
      &lt;meta http-equiv="content-type" content="text/html; charset=UTF-8"&gt;
      &lt;div dir="ltr"&gt;
        &lt;div dir="ltr"&gt;
          &lt;div dir="ltr"&gt;
            &lt;div dir="ltr"&gt;
              &lt;div&gt;Hi,&lt;/div&gt;
              &lt;div&gt;&lt;br&gt;
              &lt;/div&gt;
              &lt;div&gt;I am installing OpenStack on Red Hat 7.5. For Nova
                compute component, I choose libvirt and Xen.&lt;/div&gt;
              &lt;div&gt;However, I am running into some problems. It seems
                libvirt is unable to communicate with Xen.&lt;/div&gt;
              &lt;div&gt;&lt;br&gt;
              &lt;/div&gt;
              &lt;div&gt;Xen installation:&lt;/div&gt;
              &lt;div&gt;I installed Xen410 using "Xen make easy" &lt;a
                  href="https://xen.crc.id.au/support/guides/install/"
                  moz-do-not-send="true"&gt;https://xen.crc.id.au/support/guides/install/&lt;/a&gt;.
  Here is a list of packages installed and verification
                that Xen is running.&lt;/div&gt;
              &lt;div&gt;&lt;br&gt;
              &lt;/div&gt;
              &lt;div&gt;
                &lt;div&gt;&lt;font face="monospace, monospace"&gt;# lsb_release -a&lt;/font&gt;&lt;/div&gt;
                &lt;div&gt;&lt;font face="monospace, monospace"&gt;LSB Version:   
                    :core-4.1-amd64:core-4.1-noarch&lt;/font&gt;&lt;/div&gt;
                &lt;div&gt;&lt;font face="monospace, monospace"&gt;Distributor ID:
                    RedHatEnterpriseServer&lt;/font&gt;&lt;/div&gt;
                &lt;div&gt;&lt;font face="monospace, monospace"&gt;Description:   
                    Red Hat Enterprise Linux Server release 7.5 (Maipo)&lt;/font&gt;&lt;/div&gt;
                &lt;div&gt;&lt;font face="monospace, monospace"&gt;Release:       
                    7.5&lt;/font&gt;&lt;/div&gt;
                &lt;div&gt;&lt;font face="monospace, monospace"&gt;Codename:     
                     Maipo&lt;/font&gt;&lt;/div&gt;
              &lt;/div&gt;
              &lt;div&gt;&lt;br&gt;
              &lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;# yum list | grep
                  xen&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt; * kernel-xen: &lt;a
                    href="http://us3.mirror.crc.id.au"
                    moz-do-not-send="true"&gt;us3.mirror.crc.id.au&lt;/a&gt;&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt; *
                  kernel-xen-extra: &lt;a
                    href="http://us3.mirror.crc.id.au"
                    moz-do-not-send="true"&gt;us3.mirror.crc.id.au&lt;/a&gt;&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;kernel-xen.x86_64 
                                4.14.94-6.el7xen @kernel-xen&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;kernel-xen.x86_64 
                                4.14.97-6.el7xen @kernel-xen&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;kernel-xen-devel.x86_64 
                          4.14.97-6.el7xen @kernel-xen&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;kernel-xen-firmware.x86_64 
                       4.14.97-6.el7xen @kernel-xen&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;kernel-xen-headers.x86_64 
                        4.14.97-6.el7xen @kernel-xen&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;kernel-xen-release.noarch 
                        1:7-13           @kernel-xen&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;xen410.x86_64     
                                4.10.2-7.el7     @kernel-xen&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;xen410-devel.x86_64 
                              4.10.2-7.el7     @kernel-xen&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;xen410-hypervisor.x86_64 
                         4.10.2-7.el7     @kernel-xen&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;xen410-libs.x86_64 
                               4.10.2-7.el7     @kernel-xen&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;xen410-licenses.x86_64 
                           4.10.2-7.el7     @kernel-xen&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;xen410-ocaml.x86_64 
                              4.10.2-7.el7     @kernel-xen&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;xen410-runtime.x86_64 
                            4.10.2-7.el7     @kernel-xen&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;xen46-licenses.x86_64 
                            4.6.6-16.el7     @kernel-xen&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;br&gt;
              &lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;# xl info&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;host               
                     : &lt;a
                    href="http://nfv-sec-cn01-pa.labs.hpecorp.net"
                    moz-do-not-send="true"&gt;nfv-sec-cn01-pa.labs.hpecorp.net&lt;/a&gt;&lt;/font&gt;&lt;/div&gt;
  &lt;div&gt;&lt;font face="monospace, monospace"&gt;release           
                      : 4.14.97-6.el7xen.x86_64&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;version           
                      : #2 SMP Fri Feb 1 00:33:52 AEDT 2019&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;machine           
                      : x86_64&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;nr_cpus           
                      : 32&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;max_cpu_id         
                     : 63&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;nr_nodes           
                     : 2&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;cores_per_socket   
                     : 8&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;threads_per_core   
                     : 2&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;cpu_mhz           
                      : 1995&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;hw_caps           
                      :
                  bfebfbff:17bee3ff:2c100800:00000001:00000001:00000000:00000000:00000100&lt;/font&gt;&lt;/div&gt;
  &lt;div&gt;&lt;font face="monospace, monospace"&gt;virt_caps         
                      : hvm hvm_directio&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;total_memory       
                     : 131034&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;free_memory       
                      : 96587&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;sharing_freed_memory 
                   : 0&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;sharing_used_memory 
                    : 0&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;outstanding_claims 
                     : 0&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;free_cpus         
                      : 0&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;xen_major         
                      : 4&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;xen_minor         
                      : 10&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;xen_extra         
                      : .3-pre&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;xen_version       
                      : 4.10.3-pre&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;xen_caps           
                     : xen-3.0-x86_64 xen-3.0-x86_32p hvm-3.0-x86_32
                  hvm-3.0-x86_32p hvm-3.0-x86_64&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;xen_scheduler     
                      : credit&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;xen_pagesize       
                     : 4096&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;platform_params   
                      : virt_start=0xffff800000000000&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;xen_changeset     
                      : Tue Nov 20 15:45:04 2018 +0100 git:b6e203b-dirty&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;xen_commandline   
                      : placeholder dom0_mem=32768M cpufreq=xen
                  dom0_max_vcpus=8 dom0_vcpus_pin console=tty0
                  console=com1 com1=115200,8n1&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;cc_compiler       
                      : gcc (GCC) 4.8.5 20150623 (Red Hat 4.8.5-28)&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;cc_compile_by     
                      : mockbuild&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;cc_compile_domain 
                      :&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;cc_compile_date   
                      : Wed Nov 21 02:09:26 AEDT 2018&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;build_id           
                     : 2d53c8b15aaf737b0351e78ad863eb5a530e7df0&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;xend_config_format 
                     : 4&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;br&gt;
              &lt;/div&gt;
              &lt;div&gt;&lt;br&gt;
              &lt;/div&gt;
              &lt;div&gt;libvirt was installed as dependencies of
                openstack-nova-compute from yum.&lt;/div&gt;
              &lt;div&gt;&lt;br&gt;
              &lt;/div&gt;
              &lt;div&gt;
                &lt;div&gt;&lt;font face="monospace, \
monospace"&gt;=========================================================================== \
=======================================================================================================================&lt;/font&gt;&lt;/div&gt;
  &lt;div&gt;&lt;font face="monospace, monospace"&gt; Package         
                                                      Arch             
                            Version                               
                    Repository                                         
                                    Size&lt;/font&gt;&lt;/div&gt;
                &lt;div&gt;&lt;font face="monospace, \
monospace"&gt;=========================================================================== \
=======================================================================================================================&lt;/font&gt;&lt;/div&gt;
                
                &lt;div&gt;&lt;font face="monospace, monospace"&gt;Installing:&lt;/font&gt;&lt;/div&gt;
                &lt;div&gt;&lt;font face="monospace, monospace"&gt; openstack-nova-compute 
                                               noarch                   
                    1:17.0.9-1.el7                       
                     openstack-queens                                   
                                   7.9 k&lt;/font&gt;&lt;/div&gt;
                &lt;div&gt;&lt;font face="monospace, monospace"&gt;Installing for
                    dependencies:&lt;/font&gt;&lt;/div&gt;
                &lt;div&gt;&lt;font face="monospace, monospace"&gt; OpenIPMI-modalias 
                                                    x86_64             
                          2.0.23-2.el7                         
                     RedHat-7Server-x86_64-errata                       
                                    16 k&lt;/font&gt;&lt;/div&gt;
                &lt;div&gt;&lt;font face="monospace, monospace"&gt; attr           
                                                       x86_64           
                            2.4.46-13.el7                         
                    RedHat-7Server-x86_64-errata                       
                                    66 k&lt;/font&gt;&lt;/div&gt;
                &lt;div&gt;&lt;font face="monospace, monospace"&gt; dosfstools     
                                                       x86_64           
                            3.0.20-9.el7                         
                     RedHat-7.1Server-x86_64                           
                                    101 k&lt;/font&gt;&lt;/div&gt;
                &lt;div&gt;&lt;font face="monospace, monospace"&gt; fuse           
                                                       x86_64           
                            2.9.2-10.el7                         
                     RedHat-7Server-x86_64-errata                       
                                    86 k&lt;/font&gt;&lt;/div&gt;
                &lt;div&gt;&lt;font face="monospace, monospace"&gt; gdisk           
                                                      x86_64           
                            0.8.6-5.el7                           
                    RedHat-7.1Server-x86_64                             
                                  187 k&lt;/font&gt;&lt;/div&gt;
                &lt;div&gt;&lt;font face="monospace, monospace"&gt; glusterfs-cli   
                                                      x86_64           
                            3.8.4-53.el7                         
                     RedHat-7Server-x86_64-errata                       
                                   176 k&lt;/font&gt;&lt;/div&gt;
                &lt;div&gt;&lt;font face="monospace, monospace"&gt; hivex           
                                                      x86_64           
                            1.3.10-6.9.el7                       
                     RedHat-7Server-x86_64-errata                       
                                   101 k&lt;/font&gt;&lt;/div&gt;
                &lt;div&gt;&lt;font face="monospace, monospace"&gt; ipmitool       
                                                       x86_64           
                            1.8.18-7.el7                         
                     RedHat-7Server-x86_64-errata                       
                                   441 k&lt;/font&gt;&lt;/div&gt;
                &lt;div&gt;&lt;font face="monospace, monospace"&gt; libguestfs     
                                                       x86_64           
                            1:1.36.10-6.el7_5.2                   
                    RedHat-7Server-x86_64-errata                       
                                   1.9 M&lt;/font&gt;&lt;/div&gt;
                &lt;div&gt;&lt;font face="monospace, monospace"&gt; libreport-filesystem 
                                                 x86_64                 
                      2.1.11-40.el7                         
                    RedHat-7Server-x86_64-errata                       
                                    39 k&lt;/font&gt;&lt;/div&gt;
                &lt;div&gt;&lt;font face="monospace, monospace"&gt; libvirt-daemon 
                                                       x86_64           
                            3.9.0-14.el7_5.6                     
                     RedHat-7Server-x86_64-errata                       
                                   852 k&lt;/font&gt;&lt;/div&gt;
                &lt;div&gt;&lt;font face="monospace, monospace"&gt; \
libvirt-daemon-driver-interface   x86_64                   
                    3.9.0-14.el7_5.6                     
                     RedHat-7Server-x86_64-errata                       
                                   220 k&lt;/font&gt;&lt;/div&gt;
                &lt;div&gt;&lt;font face="monospace, monospace"&gt; libvirt-daemon-driver-network \
  x86_64                   
                    3.9.0-14.el7_5.6                     
                     RedHat-7Server-x86_64-errata                       
                                   389 k&lt;/font&gt;&lt;/div&gt;
                &lt;div&gt;&lt;font face="monospace, monospace"&gt; libvirt-daemon-driver-nodedev \
  x86_64                   
                    3.9.0-14.el7_5.6                     
                     RedHat-7Server-x86_64-errata                       
                                   221 k&lt;/font&gt;&lt;/div&gt;
                &lt;div&gt;&lt;font face="monospace, monospace"&gt; \
libvirt-daemon-driver-nwfilter   x86_64                   
                    3.9.0-14.el7_5.6                     
                     RedHat-7Server-x86_64-errata                       
                                   243 k&lt;/font&gt;&lt;/div&gt;
                &lt;div&gt;&lt;font face="monospace, monospace"&gt; libvirt-daemon-driver-qemu 
                                           x86_64                   
                    3.9.0-14.el7_5.6                     
                     RedHat-7Server-x86_64-errata                       
                                   714 k&lt;/font&gt;&lt;/div&gt;
                &lt;div&gt;&lt;font face="monospace, monospace"&gt; libvirt-daemon-driver-secret 
                                         x86_64                   
                    3.9.0-14.el7_5.6                     
                     RedHat-7Server-x86_64-errata                       
                                   210 k&lt;/font&gt;&lt;/div&gt;
                &lt;div&gt;&lt;font face="monospace, monospace"&gt; libvirt-daemon-driver-storage \
  x86_64                   
                    3.9.0-14.el7_5.6                     
                     RedHat-7Server-x86_64-errata                       
                                   173 k&lt;/font&gt;&lt;/div&gt;
                &lt;div&gt;&lt;font face="monospace, monospace"&gt; \
libvirt-daemon-driver-storage-core   x86_64                   
                    3.9.0-14.el7_5.6                     
                     RedHat-7Server-x86_64-errata                       
                                   405 k&lt;/font&gt;&lt;/div&gt;
                &lt;div&gt;&lt;font face="monospace, monospace"&gt; \
libvirt-daemon-driver-storage-disk   x86_64                   
                    3.9.0-14.el7_5.6                     
                     RedHat-7Server-x86_64-errata                       
                                   182 k&lt;/font&gt;&lt;/div&gt;
                &lt;div&gt;&lt;font face="monospace, monospace"&gt; \
libvirt-daemon-driver-storage-gluster   x86_64                   
                    3.9.0-14.el7_5.6                     
                     RedHat-7Server-x86_64-errata                       
                                   183 k&lt;/font&gt;&lt;/div&gt;
                &lt;div&gt;&lt;font face="monospace, monospace"&gt; \
libvirt-daemon-driver-storage-iscsi   x86_64                   
                    3.9.0-14.el7_5.6                     
                     RedHat-7Server-x86_64-errata                       
                                   179 k&lt;/font&gt;&lt;/div&gt;
                &lt;div&gt;&lt;font face="monospace, monospace"&gt; \
libvirt-daemon-driver-storage-logical   x86_64                   
                    3.9.0-14.el7_5.6                     
                     RedHat-7Server-x86_64-errata                       
                                   183 k&lt;/font&gt;&lt;/div&gt;
                &lt;div&gt;&lt;font face="monospace, monospace"&gt; \
libvirt-daemon-driver-storage-mpath   x86_64                   
                    3.9.0-14.el7_5.6                     
                     RedHat-7Server-x86_64-errata                       
                                   178 k&lt;/font&gt;&lt;/div&gt;
                &lt;div&gt;&lt;font face="monospace, monospace"&gt; \
libvirt-daemon-driver-storage-rbd   x86_64                   
                    3.9.0-14.el7_5.6                     
                     RedHat-7Server-x86_64-errata                       
                                   185 k&lt;/font&gt;&lt;/div&gt;
                &lt;div&gt;&lt;font face="monospace, monospace"&gt; \
libvirt-daemon-driver-storage-scsi   x86_64                   
                    3.9.0-14.el7_5.6                     
                     RedHat-7Server-x86_64-errata                       
                                   179 k&lt;/font&gt;&lt;/div&gt;
                &lt;div&gt;&lt;font face="monospace, monospace"&gt; libvirt-daemon-kvm 
                                                   x86_64               
                        3.9.0-14.el7_5.6                     
                     RedHat-7Server-x86_64-errata                       
                                   173 k&lt;/font&gt;&lt;/div&gt;
                &lt;div&gt;&lt;font face="monospace, monospace"&gt; libvirt-python 
                                                       x86_64           
                            3.9.0-1.el7                           
                    RedHat-7Server-x86_64-errata                       
                                   335 k&lt;/font&gt;&lt;/div&gt;
                &lt;div&gt;&lt;font face="monospace, monospace"&gt; mdadm           
                                                      x86_64           
                            4.0-13.el7                           
                     RedHat-7Server-x86_64-errata                       
                                   431 k&lt;/font&gt;&lt;/div&gt;
                &lt;div&gt;&lt;font face="monospace, monospace"&gt; mtools         
                                                       x86_64           
                            4.0.18-5.el7                         
                     RedHat-7.1Server-x86_64                           
                                    203 k&lt;/font&gt;&lt;/div&gt;
                &lt;div&gt;&lt;font face="monospace, monospace"&gt; perl-hivex     
                                                       x86_64           
                            1.3.10-6.9.el7                       
                     RedHat-7Server-x86_64-errata                       
                                    41 k&lt;/font&gt;&lt;/div&gt;
                &lt;div&gt;&lt;font face="monospace, monospace"&gt; python-libguestfs 
                                                    x86_64             
                          1:1.36.10-6.el7_5.2                   
                    RedHat-7Server-x86_64-errata                       
                                   203 k&lt;/font&gt;&lt;/div&gt;
                &lt;div&gt;&lt;font face="monospace, monospace"&gt; scrub           
                                                      x86_64           
                            2.5.2-7.el7                           
                    RedHat-7Server-x86_64-errata                       
                                    41 k&lt;/font&gt;&lt;/div&gt;
                &lt;div&gt;&lt;font face="monospace, monospace"&gt; squashfs-tools 
                                                       x86_64           
                            4.3-0.21.gitaae0aff4.el7             
                     RedHat-7.1Server-x86_64                           
                                    101 k&lt;/font&gt;&lt;/div&gt;
                &lt;div&gt;&lt;font face="monospace, monospace"&gt; supermin5       
                                                      x86_64           
                            5.1.19-1.el7                         
                     RedHat-7Server-x86_64-errata                       
                                   631 k&lt;/font&gt;&lt;/div&gt;
                &lt;div&gt;&lt;font face="monospace, monospace"&gt; syslinux       
                                                       x86_64           
                            4.05-13.el7                           
                    RedHat-7Server-x86_64-errata                       
                                   990 k&lt;/font&gt;&lt;/div&gt;
                &lt;div&gt;&lt;font face="monospace, monospace"&gt; syslinux-extlinux 
                                                    x86_64             
                          4.05-13.el7                           
                    RedHat-7Server-x86_64-errata                       
                                   363 k&lt;/font&gt;&lt;/div&gt;
              &lt;/div&gt;
              &lt;div&gt;&lt;br&gt;
              &lt;/div&gt;
              &lt;div&gt;&lt;br&gt;
              &lt;/div&gt;
              &lt;div&gt;However, after installation, Nova complains "no
                connection driver available for xen:///".&lt;/div&gt;
              &lt;div&gt;Also, virsh cannot connect Xen.&lt;/div&gt;
              &lt;div&gt;&lt;br&gt;
              &lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, \
monospace"&gt;/var/log/nova/nova-compute.log&lt;/font&gt;&lt;/div&gt;  &lt;div&gt;&lt;font face="monospace, \
monospace"&gt;2019-02-01  15:13:29.965 5091 INFO nova.service [-] Starting
                  compute node (version 18.1.0-1.el7)&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;2019-02-01
                  15:13:30.023 5091 ERROR nova.virt.libvirt.host [-]
                  Connection to libvirt failed: no connection driver
                  available for xen:///: libvirtError: no connection
                  driver available for xen:///&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;2019-02-01
                  15:13:30.023 5091 ERROR nova.virt.libvirt.host
                  Traceback (most recent call last):&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;2019-02-01
                  15:13:30.023 5091 ERROR nova.virt.libvirt.host   File
"/usr/lib/python2.7/site-packages/nova/virt/libvirt/host.py", line 460,
                  in get_connection&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;2019-02-01
                  15:13:30.023 5091 ERROR nova.virt.libvirt.host   
                   conn = self._get_connection()&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;2019-02-01
                  15:13:30.023 5091 ERROR nova.virt.libvirt.host   File
"/usr/lib/python2.7/site-packages/nova/virt/libvirt/host.py", line 443,
                  in _get_connection&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;2019-02-01
                  15:13:30.023 5091 ERROR nova.virt.libvirt.host   
                   {'msg': ex})&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;2019-02-01
                  15:13:30.023 5091 ERROR nova.virt.libvirt.host   File
"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py", line 220, in
                  __exit__&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;2019-02-01
                  15:13:30.023 5091 ERROR nova.virt.libvirt.host   
                   self.force_reraise()&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;2019-02-01
                  15:13:30.023 5091 ERROR nova.virt.libvirt.host   File
"/usr/lib/python2.7/site-packages/oslo_utils/excutils.py", line 196, in
                  force_reraise&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;2019-02-01
                  15:13:30.023 5091 ERROR nova.virt.libvirt.host   
                   six.reraise(self.type_, self.value, self.tb)&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;2019-02-01
                  15:13:30.023 5091 ERROR nova.virt.libvirt.host   File
"/usr/lib/python2.7/site-packages/nova/virt/libvirt/host.py", line 432,
                  in _get_connection&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;2019-02-01
                  15:13:30.023 5091 ERROR nova.virt.libvirt.host   
                   self._wrapped_conn = self._get_new_connection()&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;2019-02-01
                  15:13:30.023 5091 ERROR nova.virt.libvirt.host   File
"/usr/lib/python2.7/site-packages/nova/virt/libvirt/host.py", line 386,
                  in _get_new_connection&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;2019-02-01
                  15:13:30.023 5091 ERROR nova.virt.libvirt.host   
                   wrapped_conn = self._connect(self._uri,
                  self._read_only)&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;2019-02-01
                  15:13:30.023 5091 ERROR nova.virt.libvirt.host   File
"/usr/lib/python2.7/site-packages/nova/virt/libvirt/host.py", line 242,
                  in _connect&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;2019-02-01
                  15:13:30.023 5091 ERROR nova.virt.libvirt.host   
                   libvirt.openAuth, uri, auth, flags)&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;2019-02-01
                  15:13:30.023 5091 ERROR nova.virt.libvirt.host   File
                  "/usr/lib/python2.7/site-packages/eventlet/tpool.py",
                  line 148, in proxy_call&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;2019-02-01
                  15:13:30.023 5091 ERROR nova.virt.libvirt.host     rv
                  = execute(f, *args, **kwargs)&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;2019-02-01
                  15:13:30.023 5091 ERROR nova.virt.libvirt.host   File
                  "/usr/lib/python2.7/site-packages/eventlet/tpool.py",
                  line 129, in execute&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;2019-02-01
                  15:13:30.023 5091 ERROR nova.virt.libvirt.host   
                   six.reraise(c, e, tb)&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;2019-02-01
                  15:13:30.023 5091 ERROR nova.virt.libvirt.host   File
                  "/usr/lib/python2.7/site-packages/eventlet/tpool.py",
                  line 83, in tworker&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;2019-02-01
                  15:13:30.023 5091 ERROR nova.virt.libvirt.host     rv
                  = meth(*args, **kwargs)&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;2019-02-01
                  15:13:30.023 5091 ERROR nova.virt.libvirt.host   File
                  "/usr/lib64/python2.7/site-packages/libvirt.py", line
                  105, in openAuth&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;2019-02-01
                  15:13:30.023 5091 ERROR nova.virt.libvirt.host     if
                  ret is None:raise libvirtError('virConnectOpenAuth()
                  failed')&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;2019-02-01
                  15:13:30.023 5091 ERROR nova.virt.libvirt.host
                  libvirtError: no connection driver available for
                  xen:///&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;br&gt;
              &lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;# virsh -c xen:///
                  list&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;error: failed to
                  connect to the hypervisor&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;error: no
                  connection driver available for xen:///&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;br&gt;
              &lt;/div&gt;
              &lt;div&gt;&lt;br&gt;
              &lt;/div&gt;
              &lt;div&gt;Then I check the connection drivers of libvirt. It
                seems the daemon driver for xen is missing.&lt;/div&gt;
              &lt;div&gt;&lt;br&gt;
              &lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;# ls -l
                  /usr/lib64/libvirt/connection-driver/&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;total 2664&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;-rwxr-xr-x 1 root
                  root  115976 Jun  5  2018 libvirt_driver_interface.so&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;-rwxr-xr-x 1 root
                  root  292008 Jun  5  2018 libvirt_driver_lxc.so&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;-rwxr-xr-x 1 root
                  root  169424 Jun  5  2018 libvirt_driver_network.so&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;-rwxr-xr-x 1 root
                  root  119720 Jun  5  2018 libvirt_driver_nodedev.so&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;-rwxr-xr-x 1 root
                  root  174216 Jun  5  2018 libvirt_driver_nwfilter.so&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;-rwxr-xr-x 1 root
                  root 1545344 Jun  5  2018 libvirt_driver_qemu.so&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;-rwxr-xr-x 1 root
                  root   86616 Jun  5  2018 libvirt_driver_secret.so&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;-rwxr-xr-x 1 root
                  root  202568 Jun  5  2018 libvirt_driver_storage.so&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;br&gt;
              &lt;/div&gt;
              &lt;div&gt;&lt;br&gt;
              &lt;/div&gt;
              &lt;div&gt;But I couldn't find the xen driver (&lt;span
                  class="gmail-gr_ gmail-gr_60 gmail-gr-alert
                  gmail-gr_spell gmail-gr_inline_cards
                  gmail-gr_disable_anim_appear gmail-ContextualSpelling"
                  id="gmail-60" style="display:inline;border-bottom:2px
                  solid \
transparent;background-repeat:no-repeat"&gt;libvirt&lt;/span&gt;-daemon-driver-&lt;span  \
class="gmail-gr_ gmail-gr_58 gmail-gr-alert  gmail-gr_spell gmail-gr_inline_cards
                  gmail-gr_disable_anim_appear gmail-ContextualSpelling
                  gmail-ins-del gmail-multiReplace" id="gmail-58"
                  style="display:inline;border-bottom:2px solid
                  transparent;background-repeat:no-repeat"&gt;xen&lt;/span&gt;)
                from yum. I do find it driver on some websites (&lt;a
href="http://rpmfind.net/linux/rpm2html/search.php?query=libvirt-daemon-driver-xen"
                  moz-do-not-send="true"&gt;http://rpmfind.net/linux/rpm2html/search.php?query=libvirt-daemon-driver-xen&lt;/a&gt;),
                
                but I am not sure which is the right version to choose.&lt;/div&gt;
              &lt;div&gt;I also found this email &lt;a
                  href="https://www.spinics.net/lists/centos-virt/msg05163.html"
                  moz-do-not-send="true"&gt;https://www.spinics.net/lists/centos-virt/msg05163.html&lt;/a&gt;.&lt;/div&gt;
  &lt;div&gt;Then I decided to compile libvirt from source code.
                So I checked out the source code from github and tried
                to configure and compile it.&lt;/div&gt;
              &lt;div&gt;However, from the output of ./autogen.sh --system, I
                don't find driver for xen is enabled. Actually, xen is
                not listed as driver in the output. &lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;&lt;br&gt;
                &lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:
                  Configuration summary&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:
                  =====================&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure: Drivers&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:     
                   QEMU: yes&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:   
                   OpenVZ: yes&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:   
                   VMware: yes&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:     
                   VBox: yes&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:   
                   XenAPI: no&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:     
                  libxl: yes&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:       
                  LXC: yes&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:     
                   PHYP: no&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:       
                  ESX: no&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:   
                  Hyper-V: no&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:       
                   vz: no&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:     
                  Bhyve: no&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:     
                   Test: yes&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:   
                   Remote: yes&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:   
                  Network: yes&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure: 
                   Libvirtd: yes&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure: 
                  Interface: yes&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure: Storage
                  Drivers&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:       
                  Dir: yes&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:       
                   FS: yes&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:     
                  NetFS: yes&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:       
                  LVM: yes&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:     
                  iSCSI: yes&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:
                  iscsi-direct: no&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:     
                   SCSI: yes&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:     
                  mpath: yes&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:     
                   Disk: no&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:       
                  RBD: no&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure: 
                   Sheepdog: no&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:   
                  Gluster: no&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:       
                  ZFS: no&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:
                  Virtuozzo storage: no&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure: Security
                  Drivers&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:   
                  SELinux: yes&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure: 
                   AppArmor: no&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure: Driver
                  Loadable Modules&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:
                  driver_modules: yes (CFLAGS='' LIBS='-ldl')&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:
                  Libraries&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:       
                  acl: no&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure: 
                   apparmor: no&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:     
                   attr: no&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:     
                  audit: no&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:     
                  avahi: no&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:
                  bash_completion: no&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:     
                  blkid: no&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:     
                  capng: no&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:     
                   curl: no&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:     
                   dbus: no&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:   
                   dlopen: yes (CFLAGS='' LIBS='-ldl')&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure: 
                  firewalld: no&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:
                  firewalld-zone: no&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:     
                   fuse: no&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure: 
                  glusterfs: no&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:   
                   gnutls: yes (CFLAGS='-I/usr/include/p11-kit-1  '
                  LIBS='-lgnutls  ')&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:       
                  hal: no&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure: 
                   libiscsi: no&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:     
                  libnl: yes (CFLAGS=' ' LIBS='-lnl  ')&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:   
                  libpcap: no&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:   
                   libssh: no&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:     
                  libxl: yes (CFLAGS='  -DLIBXL_API_VERSION=0x040500'
                  LIBS='-lxenlight   -lxlutil -lxenstore -lxentoollog')&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:   
                   libxml: yes (CFLAGS='-I/usr/include/libxml2  '
                  LIBS='-lxml2  ')&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:   
                  macvtap: yes (CFLAGS='' LIBS='')&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:     
                  netcf: no&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:       
                  NLS: yes&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:       
                  nss: yes&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:   
                  numactl: no&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure: 
                  openwsman: no&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure: 
                  pciaccess: yes (CFLAGS=' ' LIBS='-lpciaccess  ')&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure: 
                   pm_utils: yes (CFLAGS='' LIBS='')&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:   
                   polkit: no&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:       
                  rbd: no&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure: 
                   readline: no&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:   
                  sanlock: no&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:     
                   sasl: yes (CFLAGS='' LIBS='-lsasl2')&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:   
                  selinux: yes (CFLAGS='' LIBS='-lselinux')&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:     
                   ssh2: no&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:     
                   udev: yes (CFLAGS=' ' LIBS='-ludev  ')&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:
                  virtualport: yes (CFLAGS='' LIBS='')&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:       
                  xdr: yes (CFLAGS='' LIBS='')&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:   
                   xenapi: no&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:     
                   yajl: yes (CFLAGS='' LIBS='-lyajl')&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure: Windows&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:   
                   Cygwin: no&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:     
                  MinGW: no&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:     
                   MSVC: no&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:   
                  windres: no&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure: Test
                  suite&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:         
                  Coverage: no&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:       
                   Alloc OOM: no&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:
                  Miscellaneous&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:         
                      Debug: yes&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:       
                  Use -Werror: yes&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:     
                  Warning Flags:  -fno-common -W -Waddress
                  -Waggressive-loop-optimizations -Wall -Wattributes
                  -Wbad-function-cast -Wbuiltin-macro-redefined
                  -Wcast-align -Wchar-subscripts -Wclobbered -Wcomment
                  -Wcomments -Wcoverage-mismatch -Wcpp
                  -Wdeprecated-declarations -Wdiv-by-zero
                  -Wdouble-promotion -Wempty-body -Wendif-labels -Wextra
                  -Wformat-contains-nul -Wformat-extra-args
                  -Wformat-security -Wformat-y2k -Wformat-zero-length
                  -Wfree-nonheap-object -Wignored-qualifiers -Wimplicit
                  -Wimplicit-function-declaration -Wimplicit-int
                  -Winit-self -Winline -Wint-to-pointer-cast
                  -Winvalid-memory-model -Winvalid-pch -Wlogical-op
                  -Wmain -Wmaybe-uninitialized -Wmissing-braces
                  -Wmissing-declarations -Wmissing-field-initializers
                  -Wmissing-include-dirs -Wmissing-parameter-type
                  -Wmissing-prototypes -Wmultichar -Wnarrowing
                  -Wnested-externs -Wnonnull -Wold-style-declaration
                  -Wold-style-definition -Woverflow -Woverride-init
                  -Wpacked-bitfield-compat -Wparentheses -Wpointer-arith
                  -Wpointer-sign -Wpointer-to-int-cast -Wpragmas -Wpsabi
                  -Wreturn-local-addr -Wreturn-type -Wsequence-point
                  -Wshadow -Wsizeof-pointer-memaccess -Wstrict-aliasing
                  -Wstrict-prototypes -Wsuggest-attribute=const
                  -Wsuggest-attribute=format
                  -Wsuggest-attribute=noreturn -Wsuggest-attribute=pure
                  -Wswitch -Wsync-nand -Wtrampolines -Wtrigraphs
                  -Wtype-limits -Wuninitialized -Wunknown-pragmas
                  -Wunused -Wunused-but-set-parameter
                  -Wunused-but-set-variable -Wunused-function
                  -Wunused-label -Wunused-local-typedefs
                  -Wunused-parameter -Wunused-result -Wunused-value
                  -Wunused-variable -Wvarargs -Wvariadic-macros
                  -Wvector-operation-performance -Wvolatile-register-var
                  -Wwrite-strings -Wnormalized=nfc -Wno-sign-compare
                  -Wjump-misses-init -Wswitch-enum
                  -Wno-format-nonliteral -fstack-protector-strong
                  -fexceptions -fasynchronous-unwind-tables
                  -fipa-pure-const -Wno-suggest-attribute=pure
                  -Wno-suggest-attribute=const -Werror&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:         
                     DTrace: no&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:         
                      numad: no&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:       
                  Init script: systemd&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:  Char
                  device locks: /var/lock&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:   
                   Default Editor: vi&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:     
                   Loader/NVRAM:&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure: 
                   virt-login-shell: yes&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:
                  virt-host-validate: yes&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:     
                   TLS priority: NORMAL&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:
                  Developer Tools&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:
                  wireshark_dissector: no&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:
                  Privileges&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:     
                   QEMU: root:root&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;font face="monospace, monospace"&gt;configure:&lt;/font&gt;&lt;/div&gt;
              &lt;div&gt;&lt;br&gt;
              &lt;/div&gt;
              &lt;div&gt;&lt;br&gt;
              &lt;/div&gt;
              &lt;div&gt;My question is how should I install the
                libvirt-daemon-driver-xen driver and make Nova work with
                Xen?&lt;/div&gt;
              &lt;div&gt;&lt;br&gt;
              &lt;/div&gt;
              &lt;div&gt;Thanks a lot in advance!&lt;/div&gt;
              &lt;div&gt;Best regards,&lt;/div&gt;
              &lt;div&gt;Lianjie Cao&lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
      &lt;br&gt;
      &lt;fieldset class="mimeAttachmentHeader"&gt;&lt;/fieldset&gt;
      &lt;pre class="moz-quote-pre" \
wrap=""&gt;_______________________________________________ libvirt-users mailing list
&lt;a class="moz-txt-link-abbreviated" \
href="mailto:libvirt-users@redhat.com"&gt;libvirt-users@redhat.com&lt;/a&gt; &lt;a \
class="moz-txt-link-freetext" \
href="https://www.redhat.com/mailman/listinfo/libvirt-users"&gt;https://www.redhat.com/mailman/listinfo/libvirt-users&lt;/a&gt;&lt;/pre&gt;
  &lt;/blockquote&gt;
    &lt;pre class="moz-signature" cols="72"&gt;-- 
Alvin Starr                   ||   land:  (905)513-7688
Netvel Inc.                   ||   Cell:  (416)806-0133
&lt;a class="moz-txt-link-abbreviated" \
href="mailto:alvin@netvel.net"&gt;alvin@netvel.net&lt;/a&gt;              ||

&lt;/pre&gt;
  &lt;/body&gt;
&lt;/html&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190206163856</emailId><senderName>Jim Fehlig</senderName><senderEmail>jfehlig@suse.com</senderEmail><timestampReceived>2019-02-06 16:38:56-0400</timestampReceived><subject>Re: [libvirt-users] concurrent migration of several domains rarely fails</subject><body>

On 12/10/18 5:46 AM, Lentes, Bernd wrote:
 &gt; Hi Jim,
 &gt;

Hi Bernd,

I was doing some mail housekeeping and realized I never responded to this 
message. Apologies for the long delay.

&gt; Unfortunately not.
&gt; 
&gt; I have some more questions, maybe you can help me a bit.
&gt; I found http://epic-alfa.kavli.tudelft.nl/share/doc/libvirt-devel-0.10.2/migration.html \
&gt; , which is quite interesting.

The canonical location of that doc is the libvirt website :-)

https://libvirt.org/migration.html

&gt; When i migrate with virsh, i use:
&gt; virsh --connect=qemu:///system migrate --verbose --live  domain \
&gt; qemu+ssh://ha-idg-1/system 
&gt; When pacemaker migrates, it creates this sequence:
&gt; virsh --connect=qemu:///system --quiet migrate --live  domain \
&gt; qemu+ssh://ha-idg-1/system which is quite the same.
&gt; Do i understand the webpage correctly, is this a "Native migration, client to two \
&gt; libvirtd servers" ?

Yes, that is correct.

&gt; Furthermore the document says:
&gt; "To force migration over an alternate network interface the optional hypervisor \
&gt; specific URI must be provided". 
&gt; I have both hosts also connected directly to each other with a bonding device using \
&gt; round-robin, and an internal ip (192.168.100.xx). When i want to use this device, \
&gt; which is maybe a bit faster and more secure (directly connected), how do i have to \
&gt; specify that ?

By using the 'migrateuri' parameter. See 'migrate' section of virsh man page for 
more details.

&gt; virsh --connect=qemu:///system --quiet migrate --live  domain \
&gt; qemu+ssh://ha-idg-1/system tcp://192.168.100.xx

This example looks correct, where the 'tcp://192.168.100.xx' part is the migrateuri.

&gt; Does it have to be the ip from the source or the destination ? Does the source then \
&gt; use automatically use also its device with 192.168.100.xx ?

It is the address of the destination. The destination will select a port if not 
specified, open a socket for the incoming migration, and provide the 
address/port to the source so it can connect and send the migration stream.

Note that /etc/libvirt/qemu.conf contains some knobs for controlling default 
migration settings in the qemu driver.

Regards,
Jim

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20190211084516</emailId><senderName>Han Han</senderName><senderEmail>hhan@redhat.com</senderEmail><timestampReceived>2019-02-11 08:45:16-0400</timestampReceived><subject>Re: [libvirt-users] libvirtd (4.9) version takes a long time to start</subject><body>

[Attachment #2 (multipart/alternative)]


Please provide your domain xml and libvirtd configuration. And it's better
to compare start time with previous libvirt versions...

On Fri, Feb 8, 2019 at 11:55 AM Sharath Kurudi &lt;kurudisharath@gmail.com&gt;
wrote:

&gt; Hi,
&gt;
&gt;     I have installed libvirt 4.9. libvirtd 4.9 takes a long time to come
&gt; up. I enabled debug prints and also put my own prints Logs are below
&gt;
&gt;
&gt; 2019-02-06 05:55:49.082+0000: 377: info : libvirt version: 4.9.0
&gt; 2019-02-06 05:55:49.082+0000: 377: info : hostname: draco
&gt; 2019-02-06 05:55:49.082+0000: 377: info : virObjectNew:248 : OBJECT_NEW:
&gt; obj=0x558e782d8bb0 classname=virAccessManager
&gt; 2019-02-06 05:55:49.082+0000: 377: debug : virAccessManagerNewDriver:105 :
&gt; Initialized with stack
&gt; 2019-02-06 05:55:49.082+0000: 377: info : virObjectNew:248 : OBJECT_NEW:
&gt; obj=0x558e782cd870 classname=virAccessManager
&gt; 2019-02-06 05:55:49.082+0000: 377: debug : virAccessManagerNewDriver:105 :
&gt; Initialized with none
&gt; 2019-02-06 05:55:49.082+0000: 377: info : virObjectRef:382 : OBJECT_REF:
&gt; obj=0x558e782d8bb0
&gt; 2019-02-06 05:55:49.082+0000: 377: info : virObjectUnref:344 :
&gt; OBJECT_UNREF: obj=0x558e782d8bb0
&gt; 2019-02-06 05:55:49.082+0000: 377: debug : main:1200 : Decided on pid file
&gt; path '/var/run/libvirtd.pid'
&gt; 2019-02-06 05:55:49.082+0000: 377: debug : main:1213 : Decided on socket
&gt; paths '/var/run/libvirt/libvirt-sock', '/var/run/libvirt/libvirt-sock-ro'
&gt; and '/var/run/libvirt/libvirt-admin-sock'
&gt; 2019-02-06 05:55:49.082+0000: 377: debug : virFileClose:109 : Closed fd 5
&gt; 2019-02-06 05:55:49.082+0000: 378: debug : virFileClose:109 : Closed fd 4
&gt; 2019-02-06 05:55:49.082+0000: 378: debug : virFileClose:109 : Closed fd 4
&gt; 2019-02-06 05:55:49.082+0000: 378: debug : virFileClose:109 : Closed fd 6
&gt; 2019-02-06 05:55:49.083+0000: 379: debug : main:1255 : Ensuring run dir
&gt; '/var/run/libvirt' exists
&gt; 2019-02-06 05:55:49.083+0000: 379: debug : virFileMakePathHelper:3034 :
&gt; path=/var/run/libvirt mode=0777
&gt; 2019-02-06 05:55:49.083+0000: 379: debug : virNetlinkStartup:137 : Running
&gt; global netlink initialization
&gt; 2019-02-06 05:55:49.083+0000: 379: debug : virNetlinkStartup:144 : Sharath
&gt; Returning from global netlink initialization
&gt; 2019-02-06 05:55:49.083+0000: 379: debug : main:1270 : Sharath
&gt; virNetlinkStartup done
&gt; 2019-02-06 05:55:49.083+0000: 379: debug : virNetDaemonNew:127 : Sharath
&gt; Running virNetDaemonNew
&gt; 2019-02-06 05:55:49.083+0000: 379: debug : virNetDaemonNew:131 : Sharath
&gt; virNetDaemonInitalize done
&gt; 2019-02-06 05:55:49.083+0000: 379: info : virObjectNew:248 : OBJECT_NEW:
&gt; obj=0x558e782ce1b0 classname=virNetDaemon
&gt; 2019-02-06 05:55:49.083+0000: 379: debug : virNetDaemonNew:136 : Sharath
&gt; virNetDaemonInitalize done
&gt;
&gt; The above logs loop till libvirtd comes up. It is also seen that more than
&gt; one instance of libvirtd runs simultaneously during delay.
&gt;
&gt; Any ideas on how to resolve?
&gt;
&gt; Thanks
&gt; _______________________________________________
&gt; libvirt-users mailing list
&gt; libvirt-users@redhat.com
&gt; https://www.redhat.com/mailman/listinfo/libvirt-users



-- 
Best regards,
-----------------------------------
Han Han
Quality Engineer
Redhat.

Email: hhan@redhat.com
Phone: +861065339333

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;Please provide your domain xml and libvirtd configuration. And \
it's better to compare start time with previous libvirt \
versions...&lt;br&gt;&lt;/div&gt;&lt;br&gt;&lt;div class="gmail_quote"&gt;&lt;div dir="ltr" \
class="gmail_attr"&gt;On Fri, Feb 8, 2019 at 11:55 AM Sharath Kurudi &lt;&lt;a \
href="mailto:kurudisharath@gmail.com"&gt;kurudisharath@gmail.com&lt;/a&gt;&gt; \
wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote class="gmail_quote" style="margin:0px 0px 0px \
0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"&gt;&lt;div dir="ltr"&gt; \
&lt;div&gt;Hi,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;       I have installed libvirt 4.9.  libvirtd 4.9 \
takes a long time to come up. I enabled debug prints and  also put my own prints Logs \
are below&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;2019-02-06 05:55:49.082+0000: 377: \
info : libvirt version: 4.9.0&lt;br&gt;2019-02-06 05:55:49.082+0000: 377: info : hostname: \
draco&lt;br&gt;2019-02-06 05:55:49.082+0000: 377: info : virObjectNew:248 : OBJECT_NEW: \
obj=0x558e782d8bb0 classname=virAccessManager&lt;br&gt;2019-02-06 05:55:49.082+0000: 377: \
debug : virAccessManagerNewDriver:105 : Initialized with stack&lt;br&gt;2019-02-06 \
05:55:49.082+0000: 377: info : virObjectNew:248 : OBJECT_NEW: obj=0x558e782cd870 \
classname=virAccessManager&lt;br&gt;2019-02-06 05:55:49.082+0000: 377: debug : \
virAccessManagerNewDriver:105 : Initialized with none&lt;br&gt;2019-02-06 \
05:55:49.082+0000: 377: info : virObjectRef:382 : OBJECT_REF: \
obj=0x558e782d8bb0&lt;br&gt;2019-02-06 05:55:49.082+0000: 377: info : virObjectUnref:344 : \
OBJECT_UNREF: obj=0x558e782d8bb0&lt;br&gt;2019-02-06 05:55:49.082+0000: 377: debug : \
main:1200 : Decided on pid file path '/var/run/libvirtd.pid'&lt;br&gt;2019-02-06 \
05:55:49.082+0000: 377: debug : main:1213 : Decided on socket paths \
'/var/run/libvirt/libvirt-sock', '/var/run/libvirt/libvirt-sock-ro' \
and '/var/run/libvirt/libvirt-admin-sock'&lt;br&gt;2019-02-06 05:55:49.082+0000: \
377: debug : virFileClose:109 : Closed fd 5&lt;br&gt;2019-02-06 05:55:49.082+0000: 378: \
debug : virFileClose:109 : Closed fd 4&lt;br&gt;2019-02-06 05:55:49.082+0000: 378: debug : \
virFileClose:109 : Closed fd 4&lt;br&gt;2019-02-06 05:55:49.082+0000: 378: debug : \
virFileClose:109 : Closed fd 6&lt;br&gt;2019-02-06 05:55:49.083+0000: 379: debug : \
main:1255 : Ensuring run dir '/var/run/libvirt' exists&lt;br&gt;2019-02-06 \
05:55:49.083+0000: 379: debug : virFileMakePathHelper:3034 : path=/var/run/libvirt \
mode=0777&lt;br&gt;2019-02-06 05:55:49.083+0000: 379: debug : virNetlinkStartup:137 : \
Running global netlink initialization&lt;br&gt;2019-02-06 05:55:49.083+0000: 379: debug : \
virNetlinkStartup:144 : Sharath Returning from global netlink \
initialization&lt;br&gt;2019-02-06 05:55:49.083+0000: 379: debug : main:1270 : Sharath \
virNetlinkStartup done&lt;br&gt;2019-02-06 05:55:49.083+0000: 379: debug : \
virNetDaemonNew:127 : Sharath Running virNetDaemonNew&lt;br&gt;2019-02-06 \
05:55:49.083+0000: 379: debug : virNetDaemonNew:131 : Sharath virNetDaemonInitalize \
done&lt;br&gt;2019-02-06 05:55:49.083+0000: 379: info : virObjectNew:248 : OBJECT_NEW: \
obj=0x558e782ce1b0 classname=virNetDaemon&lt;br&gt;2019-02-06 05:55:49.083+0000: 379: debug \
: virNetDaemonNew:136 : Sharath virNetDaemonInitalize \
done&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The  above logs loop till libvirtd comes up. It is also \
seen that more than  one instance of libvirtd runs simultaneously during \
delay.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Any ideas on how to \
resolve?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks&lt;/div&gt;

&lt;/div&gt;
_______________________________________________&lt;br&gt;
libvirt-users mailing list&lt;br&gt;
&lt;a href="mailto:libvirt-users@redhat.com" \
target="_blank"&gt;libvirt-users@redhat.com&lt;/a&gt;&lt;br&gt; &lt;a \
href="https://www.redhat.com/mailman/listinfo/libvirt-users" rel="noreferrer" \
target="_blank"&gt;https://www.redhat.com/mailman/listinfo/libvirt-users&lt;/a&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br \
clear="all"&gt;&lt;br&gt;-- &lt;br&gt;&lt;div dir="ltr" class="gmail_signature"&gt;&lt;div \
dir="ltr"&gt;&lt;div&gt;&lt;div dir="ltr"&gt;&lt;div&gt;&lt;div dir="ltr"&gt;Best regards,&lt;/div&gt;&lt;div \
dir="ltr"&gt;-----------------------------------&lt;br&gt;&lt;/div&gt;&lt;div dir="ltr"&gt;Han \
Han&lt;br&gt;Quality Engineer&lt;br&gt;Redhat.&lt;br&gt;&lt;br&gt;Email: &lt;a href="mailto:hhan@redhat.com" \
target="_blank"&gt;hhan@redhat.com&lt;/a&gt;&lt;br&gt;Phone: \
+861065339333&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190213104559</emailId><senderName>Paul van der Vlis</senderName><senderEmail>paul@vandervlis.nl</senderEmail><timestampReceived>2019-02-13 10:45:59-0400</timestampReceived><subject>Re: [libvirt-users] virsh migrate --copy-storage-inc</subject><body>

Op 11-02-19 om 14:31 schreef Peter Krempa:
&gt; On Sun, Feb 10, 2019 at 12:11:42 +0100, Paul van der Vlis wrote:
&gt; &gt; Hello,
&gt; &gt; 
&gt; &gt; I use libvirt on machines without shared storage. My VM's have all one
&gt; &gt; qcow2-disk, with the same name as the VM.
&gt; &gt; 
&gt; &gt; When I want to migrate a VM, I check if there is an qcow2 image on the
&gt; &gt; other host with that name. When that's not the case, I copy the image
&gt; &gt; using rsync first. If the image excist, I don't do that, and I think
&gt; &gt; that "--copy-storage-inc" will do it.
&gt; 
&gt; Note that using the 'inc' or incremental mode will copy only the data in
&gt; the top level image rather than a full copy. This means that you need to&gt; \
&gt; pre-create empty qcow2 files which point to the correct backing store.

Hmm, I don't know what's a "top level image", I cannot find how to
create an empty qcow2 file, and I don't know what's a "backing store".

I miss some information, and I don't know where to find this info.

&gt; &gt; But I don't know how intelligent "--copy-storage-inc" is. I use LVM
&gt; &gt; inside the VM's, and it's possible that I have changed the size of a
&gt; &gt; volume for example.
&gt; 
&gt; Non shared storage migration preserves the guest visible state.
&gt; 
&gt; &gt; 
&gt; &gt; My questions:
&gt; &gt; Is "--copy-storage-inc" intelligent enough for such tasks?
&gt; 
&gt; If used with --tunelled you can only use it if you wish to migrate ALL
&gt; disks in such a VM and need to pre-create the correct files.
&gt; 
&gt; If you wish to migrate only certain disks you need to stop using
&gt; --tunelled.
&gt; 
&gt; &gt; Is there documentation what is done during migration? Is it using rsync?
&gt; 
&gt; Normally (if --tunneled is not used) it's using blockdev-mirror or
&gt; drive-mirror in qemu over an NBD connection to destination.
&gt; 
&gt; In your case it's using the old storage migration protocol.
&gt; 
&gt; &gt; Is it possible to make the migration process more verbose?
&gt; 
&gt; What do you mean by this? In case if --tunelled there's nothing we can
&gt; do though. Everything is done inside qemu.

When I understand you well, it would be better to not-use "tunneled".

&gt; &gt; Is what I do a good way?
&gt; &gt; 
&gt; &gt; With regards,
&gt; &gt; Paul van der Vlis
&gt; &gt; 
&gt; &gt; BTW: this is what I do, sometimes the lines are broken wrong:
&gt; &gt; -----------
&gt; &gt; # Rsync image when not on the other host:
&gt; &gt; if test `ssh $other "if test -e /data/$vm.qcow2; then echo ja; else echo
&gt; &gt; nee; fi"` = "nee"; then
&gt; &gt; echo "rsync..."
&gt; &gt; rsync /data/$vm.qcow2 $other://data/$vm.qcow2
&gt; &gt; if test $? = 0; then echo "gelukt"; else echo "niet gelukt"; exit; fi
&gt; &gt; fi
&gt; &gt; 
&gt; &gt; # migrate
&gt; &gt; echo "migrate..."
&gt; &gt; virsh migrate --live --p2p --tunnelled --copy-storage-inc --persistent
&gt; 
&gt; As said above this implies the old storage migration protocol which
&gt; transports the data in the migration stream. This stream is then
&gt; tunelled over the libvirt connection. This is very inefficient and also
&gt; uses the old storage migration protocol which is obsolete and qemu will
&gt; attempt to remove it in the future.

Thanks for your help, I will test how migration work without "tunneled".

I guess I do not need a tunnel, I use allready SSH and a safe network
connection.

With regards,
Paul van der Vlis


&gt; &gt; --undefinesource --verbose $vm qemu+ssh://$other/system
&gt; &gt; if test $? = 0; then echo "gelukt"; else echo "niet gelukt"; exit; fi
&gt; &gt; -----------
&gt; &gt; 
&gt; &gt; 
&gt; &gt; -- 
&gt; &gt; Paul van der Vlis Linux systeembeheer Groningen
&gt; &gt; https://www.vandervlis.nl/
&gt; &gt; 
&gt; &gt; _______________________________________________
&gt; &gt; libvirt-users mailing list
&gt; &gt; libvirt-users@redhat.com
&gt; &gt; https://www.redhat.com/mailman/listinfo/libvirt-users



-- 
Paul van der Vlis Linux systeembeheer Groningen
https://www.vandervlis.nl/

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20190215152748</emailId><senderName>Daniel =?utf-8?B?UC4gQmVycmFuZ8Op?=</senderName><senderEmail>berrange@redhat.com</senderEmail><timestampReceived>2019-02-15 15:27:48-0400</timestampReceived><subject>Re: [libvirt-users] HELP!</subject><body>

On Fri, Feb 15, 2019 at 04:20:34PM +0100, Martin Kletzander wrote:
&gt; Please consider writing more descriptive subjects.  No need to shout, too.
&gt; 
&gt; On Fri, Feb 15, 2019 at 08:43:36PM +0530, Shashwat shagun wrote:
&gt; 
&gt; [...]
&gt; 
&gt; &gt; func (d *DomService) Connect() error {
&gt; &gt;        var err error
&gt; &gt;        d.Conn, err = libvirt.NewConnect("qemu:///system")
&gt; &gt;        if err != nil {
&gt; &gt;                fmt.Println(err)
&gt; &gt;        }
&gt; &gt; defer d.Conn.Close()
&gt; 
&gt; I have no idea how the golang bindings are structured, but I'm quite sure you
&gt; don't want to close the connection right after this function ends...

Yes, this code is just causing the connection to close immediately when
Connect() returns, so the code to list domains won't ever get an open
connection.

Regards,
Daniel
-- 
|: https://berrange.com      -o-    https://www.flickr.com/photos/dberrange :|
|: https://libvirt.org         -o-            https://fstop138.berrange.com :|
|: https://entangle-photo.org    -o-    https://www.instagram.com/dberrange :|

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190221134749</emailId><senderName>Ján Tomko</senderName><senderEmail>jtomko@redhat.com</senderEmail><timestampReceived>2019-02-21 13:47:49-0400</timestampReceived><subject>Re: [libvirt-users] virsh confirmed edits do not persist</subject><body>

[Attachment #2 (multipart/signed)]


[please don't top-post on technical lists]

On Thu, Feb 21, 2019 at 08:16:33AM -0500, Josh Mcneil wrote:
&gt;Thanks Ján!
&gt;
&gt;&gt;What were the exact changes you were trying to make?
&gt;
&gt;I was following this guide:
&gt;https://wiki.archlinux.org/index.php/PCI_passthrough_via_OVMF#Passing_keyboard/mouse_via_Evdev
&gt;
&gt;Specifically, I was updating the domain tag to include `xmlns:qemu='
&gt;http://libvirt.org/schemas/domain/qemu/1.0'`
&gt;

https://libvirt.org/drvqemu.html#qemucommand
That is used to allow (unsupported) passing of arbitrary arguments to
QEMU, but the xmlns= line on its own does not do anything.
You need to add the actual &lt;qemu:...&gt; elements. The snippet in the wiki
you linked does not show that it belongs between &lt;/devices&gt; and
&lt;/domain&gt;.

Note that libvirt does support evdev passthrough via virtio-input
(the virtio-input-host QEMU device), which saves you from setting up the
permissions and cgroup acl manually, but requires virtio drivers in the
guest and won't give up control of the evdev while the guest is running.

Jano

&gt;&gt;both call virDomainDefineXMLFlags under the hood.
&gt;
&gt;That is good to know, thanks for the explanation.
&gt;
&gt;I appreciate the help, if you have any suggestions I'm happy to hear them
&gt;
&gt;Josh

["signature.asc" (application/pgp-signature)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190225165356</emailId><senderName>Laine Stump</senderName><senderEmail>laine@laine.org</senderEmail><timestampReceived>2019-02-25 16:53:56-0400</timestampReceived><subject>Re: [libvirt-users] libvirt 5.0.0 - LXC container still in "virsh list" output after shutdown</subject><body>

On 2/25/19 11:12 AM, mxs kolo wrote:
&gt; https://bugzilla.redhat.com/show_bug.cgi?id=1681180

Since you are able to post to a mailing list, and are also know what is 
the problem and how to patch it, how about sending a patch (based on git 
master of libvirt source, and using git send-email) to 
libvir-list@redhat.com?

   https://libvirt.org/hacking.html#patches

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190207050135</emailId><senderName>Sharath Kurudi</senderName><senderEmail>kurudisharath@gmail.com</senderEmail><timestampReceived>2019-02-07 05:01:35-0400</timestampReceived><subject>[libvirt-users] libvirtd (4.9) version takes a long time to start</subject><body>

[Attachment #2 (multipart/alternative)]


Hi,

    I have installed libvirt 4.9. libvirtd 4.9 takes a long time to come
up. I enabled debug prints and also put my own prints Logs are below


2019-02-06 05:55:49.082+0000: 377: info : libvirt version: 4.9.0
2019-02-06 05:55:49.082+0000: 377: info : hostname: draco
2019-02-06 05:55:49.082+0000: 377: info : virObjectNew:248 : OBJECT_NEW:
obj=0x558e782d8bb0 classname=virAccessManager
2019-02-06 05:55:49.082+0000: 377: debug : virAccessManagerNewDriver:105 :
Initialized with stack
2019-02-06 05:55:49.082+0000: 377: info : virObjectNew:248 : OBJECT_NEW:
obj=0x558e782cd870 classname=virAccessManager
2019-02-06 05:55:49.082+0000: 377: debug : virAccessManagerNewDriver:105 :
Initialized with none
2019-02-06 05:55:49.082+0000: 377: info : virObjectRef:382 : OBJECT_REF:
obj=0x558e782d8bb0
2019-02-06 05:55:49.082+0000: 377: info : virObjectUnref:344 :
OBJECT_UNREF: obj=0x558e782d8bb0
2019-02-06 05:55:49.082+0000: 377: debug : main:1200 : Decided on pid file
path '/var/run/libvirtd.pid'
2019-02-06 05:55:49.082+0000: 377: debug : main:1213 : Decided on socket
paths '/var/run/libvirt/libvirt-sock', '/var/run/libvirt/libvirt-sock-ro'
and '/var/run/libvirt/libvirt-admin-sock'
2019-02-06 05:55:49.082+0000: 377: debug : virFileClose:109 : Closed fd 5
2019-02-06 05:55:49.082+0000: 378: debug : virFileClose:109 : Closed fd 4
2019-02-06 05:55:49.082+0000: 378: debug : virFileClose:109 : Closed fd 4
2019-02-06 05:55:49.082+0000: 378: debug : virFileClose:109 : Closed fd 6
2019-02-06 05:55:49.083+0000: 379: debug : main:1255 : Ensuring run dir
'/var/run/libvirt' exists
2019-02-06 05:55:49.083+0000: 379: debug : virFileMakePathHelper:3034 :
path=/var/run/libvirt mode=0777
2019-02-06 05:55:49.083+0000: 379: debug : virNetlinkStartup:137 : Running
global netlink initialization
2019-02-06 05:55:49.083+0000: 379: debug : virNetlinkStartup:144 : Sharath
Returning from global netlink initialization
2019-02-06 05:55:49.083+0000: 379: debug : main:1270 : Sharath
virNetlinkStartup done
2019-02-06 05:55:49.083+0000: 379: debug : virNetDaemonNew:127 : Sharath
Running virNetDaemonNew
2019-02-06 05:55:49.083+0000: 379: debug : virNetDaemonNew:131 : Sharath
virNetDaemonInitalize done
2019-02-06 05:55:49.083+0000: 379: info : virObjectNew:248 : OBJECT_NEW:
obj=0x558e782ce1b0 classname=virNetDaemon
2019-02-06 05:55:49.083+0000: 379: debug : virNetDaemonNew:136 : Sharath
virNetDaemonInitalize done

The above logs loop till libvirtd comes up. It is also seen that more than
one instance of libvirtd runs simultaneously during delay.

Any ideas on how to resolve?

Thanks
Sharath

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;&lt;div&gt;Hi,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;       I have \
installed libvirt 4.9. libvirtd 4.9 takes a long time to come up. I enabled debug \
prints and also put my own prints Logs are \
below&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;2019-02-06 05:55:49.082+0000: 377: info \
: libvirt version: 4.9.0&lt;br&gt;2019-02-06 05:55:49.082+0000: 377: info : hostname: \
draco&lt;br&gt;2019-02-06 05:55:49.082+0000: 377: info : virObjectNew:248 : OBJECT_NEW: \
obj=0x558e782d8bb0 classname=virAccessManager&lt;br&gt;2019-02-06 05:55:49.082+0000: 377: \
debug : virAccessManagerNewDriver:105 : Initialized with stack&lt;br&gt;2019-02-06 \
05:55:49.082+0000: 377: info : virObjectNew:248 : OBJECT_NEW: obj=0x558e782cd870 \
classname=virAccessManager&lt;br&gt;2019-02-06 05:55:49.082+0000: 377: debug : \
virAccessManagerNewDriver:105 : Initialized with none&lt;br&gt;2019-02-06 \
05:55:49.082+0000: 377: info : virObjectRef:382 : OBJECT_REF: \
obj=0x558e782d8bb0&lt;br&gt;2019-02-06 05:55:49.082+0000: 377: info : virObjectUnref:344 : \
OBJECT_UNREF: obj=0x558e782d8bb0&lt;br&gt;2019-02-06 05:55:49.082+0000: 377: debug : \
main:1200 : Decided on pid file path '/var/run/libvirtd.pid'&lt;br&gt;2019-02-06 \
05:55:49.082+0000: 377: debug : main:1213 : Decided on socket paths \
'/var/run/libvirt/libvirt-sock', '/var/run/libvirt/libvirt-sock-ro' \
and '/var/run/libvirt/libvirt-admin-sock'&lt;br&gt;2019-02-06 05:55:49.082+0000: \
377: debug : virFileClose:109 : Closed fd 5&lt;br&gt;2019-02-06 05:55:49.082+0000: 378: \
debug : virFileClose:109 : Closed fd 4&lt;br&gt;2019-02-06 05:55:49.082+0000: 378: debug : \
virFileClose:109 : Closed fd 4&lt;br&gt;2019-02-06 05:55:49.082+0000: 378: debug : \
virFileClose:109 : Closed fd 6&lt;br&gt;2019-02-06 05:55:49.083+0000: 379: debug : \
main:1255 : Ensuring run dir '/var/run/libvirt' exists&lt;br&gt;2019-02-06 \
05:55:49.083+0000: 379: debug : virFileMakePathHelper:3034 : path=/var/run/libvirt \
mode=0777&lt;br&gt;2019-02-06 05:55:49.083+0000: 379: debug : virNetlinkStartup:137 : \
Running global netlink initialization&lt;br&gt;2019-02-06 05:55:49.083+0000: 379: debug : \
virNetlinkStartup:144 : Sharath Returning from global netlink \
initialization&lt;br&gt;2019-02-06 05:55:49.083+0000: 379: debug : main:1270 : Sharath \
virNetlinkStartup done&lt;br&gt;2019-02-06 05:55:49.083+0000: 379: debug : \
virNetDaemonNew:127 : Sharath Running virNetDaemonNew&lt;br&gt;2019-02-06 \
05:55:49.083+0000: 379: debug : virNetDaemonNew:131 : Sharath virNetDaemonInitalize \
done&lt;br&gt;2019-02-06 05:55:49.083+0000: 379: info : virObjectNew:248 : OBJECT_NEW: \
obj=0x558e782ce1b0 classname=virNetDaemon&lt;br&gt;2019-02-06 05:55:49.083+0000: 379: debug \
: virNetDaemonNew:136 : Sharath virNetDaemonInitalize \
done&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The above logs loop till libvirtd comes up. It is also \
seen that more than one instance of libvirtd runs simultaneously during \
delay.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Any ideas on how to \
resolve?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks&lt;/div&gt;&lt;div&gt;Sharath&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190210111142</emailId><senderName>Paul van der Vlis</senderName><senderEmail>paul@vandervlis.nl</senderEmail><timestampReceived>2019-02-10 11:11:42-0400</timestampReceived><subject>[libvirt-users] virsh migrate --copy-storage-inc</subject><body>

Hello,

I use libvirt on machines without shared storage. My VM's have all one
qcow2-disk, with the same name as the VM.

When I want to migrate a VM, I check if there is an qcow2 image on the
other host with that name. When that's not the case, I copy the image
using rsync first. If the image excist, I don't do that, and I think
that "--copy-storage-inc" will do it.

But I don't know how intelligent "--copy-storage-inc" is. I use LVM
inside the VM's, and it's possible that I have changed the size of a
volume for example.

My questions:
Is "--copy-storage-inc" intelligent enough for such tasks?
Is there documentation what is done during migration? Is it using rsync?
Is it possible to make the migration process more verbose?
Is what I do a good way?

With regards,
Paul van der Vlis

BTW: this is what I do, sometimes the lines are broken wrong:
-----------
# Rsync image when not on the other host:
if test `ssh $other "if test -e /data/$vm.qcow2; then echo ja; else echo
nee; fi"` = "nee"; then
  echo "rsync..."
  rsync /data/$vm.qcow2 $other://data/$vm.qcow2
  if test $? = 0; then echo "gelukt"; else echo "niet gelukt"; exit; fi
fi

# migrate
echo "migrate..."
virsh migrate --live --p2p --tunnelled --copy-storage-inc --persistent
--undefinesource --verbose $vm qemu+ssh://$other/system
if test $? = 0; then echo "gelukt"; else echo "niet gelukt"; exit; fi
-----------


-- 
Paul van der Vlis Linux systeembeheer Groningen
https://www.vandervlis.nl/

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190215152034</emailId><senderName>Martin Kletzander</senderName><senderEmail>mkletzan@redhat.com</senderEmail><timestampReceived>2019-02-15 15:20:34-0400</timestampReceived><subject>Re: [libvirt-users] HELP!</subject><body>

[Attachment #2 (multipart/signed)]


Please consider writing more descriptive subjects.  No need to shout, too.

On Fri, Feb 15, 2019 at 08:43:36PM +0530, Shashwat shagun wrote:

[...]

&gt;func (d *DomService) Connect() error {
&gt;        var err error
&gt;        d.Conn, err = libvirt.NewConnect("qemu:///system")
&gt;        if err != nil {
&gt;                fmt.Println(err)
&gt;        }
&gt;defer d.Conn.Close()

I have no idea how the golang bindings are structured, but I'm quite sure you
don't want to close the connection right after this function ends...

["signature.asc" (application/pgp-signature)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190221060648</emailId><senderName>Josh Mcneil</senderName><senderEmail>josh@mcneilio.com</senderEmail><timestampReceived>2019-02-21 06:06:48-0400</timestampReceived><subject>[libvirt-users] virsh confirmed edits do not persist</subject><body>

[Attachment #2 (multipart/alternative)]


This may be user error, I am new to libvirt.

I am using libvirt 5.0.0. I have created a VM (win10) in the system URI
using virt-manager. I stopped the VM to edit it.

I set my LIBVIRT_DEFAULT_URI="qemu:///system" and am able to read the
domain configuration with `EDITOR=nano virsh edit win10`. When I save
(ctrl+o) and exit (ctrl+x) I see the message "Domain win10 XML
configuration edited." as expected. However, when I run the edit command
again the changes do not appear to have persisted.

I have tried starting and stopping the VM. I read that I may need to define
the domain with virsh so I did that. None of these things seem to work.

I would appreciate it if someone could help me solve this issue in order to
be able to modify domains from virsh!

Thanks in advance for any help!

Josh

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;&lt;div&gt;This may be user error, I am new to \
libvirt.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I am using libvirt 5.0.0. I have created a VM \
(win10) in the system URI using virt-manager. I stopped the VM to edit \
it.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I set my LIBVIRT_DEFAULT_URI="qemu:///system" \
and am able to read the domain configuration with `EDITOR=nano virsh edit win10`. \
When I save (ctrl+o) and exit (ctrl+x) I see the message "Domain win10 XML \
configuration edited." as expected. However, when I run the edit command again \
the changes do not appear to have persisted.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I have tried \
starting and stopping the VM. I read that I may need to define the domain with virsh \
so I did that. None of these things seem to work.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I would \
appreciate it if someone could help me solve this issue in order to be able to modify \
domains from virsh!&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks in advance for any \
help!&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Josh&lt;br&gt;&lt;/div&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190221071613</emailId><senderName>Ján Tomko</senderName><senderEmail>jtomko@redhat.com</senderEmail><timestampReceived>2019-02-21 07:16:13-0400</timestampReceived><subject>Re: [libvirt-users] virsh confirmed edits do not persist</subject><body>

[Attachment #2 (multipart/signed)]


On Thu, Feb 21, 2019 at 01:06:48AM -0500, Josh Mcneil wrote:
&gt;This may be user error, I am new to libvirt.
&gt;

Welcome,

&gt;I am using libvirt 5.0.0. I have created a VM (win10) in the system URI
&gt;using virt-manager. I stopped the VM to edit it.
&gt;
&gt;I set my LIBVIRT_DEFAULT_URI="qemu:///system" and am able to read the
&gt;domain configuration with `EDITOR=nano virsh edit win10`. When I save
&gt;(ctrl+o) and exit (ctrl+x) I see the message "Domain win10 XML
&gt;configuration edited." as expected.

that means libvirt successfully parsed the changed XML file.
The elements libvirt does not parse will not appear in the changed
configuration. Usually those should get caught by the schema validation,
but it's not perfect.

What were the exact changes you were trying to make?

&gt;However, when I run the edit command
&gt;again the changes do not appear to have persisted.
&gt;
&gt;I have tried starting and stopping the VM. I read that I may need to define
&gt;the domain with virsh so I did that. None of these things seem to work.

Calling 'virsh define' with the same domain name and UUID in the XML and
'virsh edit' is equivalent - both call virDomainDefineXMLFlags under the
hood.

Jano

&gt;
&gt;I would appreciate it if someone could help me solve this issue in order to
&gt;be able to modify domains from virsh!
&gt;
&gt;Thanks in advance for any help!
&gt;
&gt;Josh

&gt;_______________________________________________
&gt;libvirt-users mailing list
&gt;libvirt-users@redhat.com
&gt;https://www.redhat.com/mailman/listinfo/libvirt-users


["signature.asc" (application/pgp-signature)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190103170758</emailId><senderName>daggs</senderName><senderEmail>daggs@gmx.com</senderEmail><timestampReceived>2019-01-03 17:07:58-0400</timestampReceived><subject>[libvirt-users] script called from qemu hook freezes.</subject><body>

Greetings,

I'm executing an external script when the qemu hook is called with start or release, \
the script is rather simple, upon start it iterates over the output of lsusb -t and \
for each device, it looks if it should be added to the vm we started, if so, it \
attaches it to the vm as follows: virsh --connect qemu:///system "${cmd}" "${domain}" \
/dev/stdin &lt;&lt; END &lt;hostdev mode='subsystem' type='usb'&gt;
  &lt;source&gt;
   &lt;address bus='${busnum}' device='${devnum}' /&gt;
  &lt;/source&gt;
&lt;/hostdev&gt;
END

where cmd is attach-device, domain is the vm's name, busnum and devnum come from the \
output of the lsusb -t. my issue is that upon the first attach attempt, the cmd \
hangs, I need to kill it and after than I cannot preform any virsh cmd, I must \
restart the host. if I try to execute the same cmd after the vm is up, it works \
great.

why the attach process gets stuck? do I need to execute it under different stage?

thanks,

Dagg.

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20190104161441</emailId><senderName>Christoph</senderName><senderEmail>mangel@gmx.de</senderEmail><timestampReceived>2019-01-04 16:14:41-0400</timestampReceived><subject>[libvirt-users] xen and libvirt</subject><body>

Hi

Does someone know how it is possible these parameters:

e820_host
max_grant_frames

to set with libvirt xml config?

I use them with xl config but I want to change to libvirt config/tools.
(with libvirt 4.10 it is possible to start pvh domains)

-- 
------
Greetz

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190104174241</emailId><senderName>Jim Fehlig</senderName><senderEmail>jfehlig@suse.com</senderEmail><timestampReceived>2019-01-04 17:42:41-0400</timestampReceived><subject>Re: [libvirt-users] xen and libvirt</subject><body>

On 1/4/19 9:14 AM, Christoph wrote:
&gt; Hi
&gt; 
&gt; Does someone know how it is possible these parameters:
&gt; 
&gt; e820_host
&gt; max_grant_frames
&gt; 
&gt; to set with libvirt xml config?

Currently, those settings are not supported by libvirt. Do you need to adjust 
them for PCI passthrough to PV domains?

I took a quick peek at xl.cfg(5) and based on the description of those settings 
didn't see a counterpart in the libvirt domain schema. Perhaps understanding 
use-cases will help with modeling those settings in libvirt domain XML.

Regards,
Jim

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190105093247</emailId><senderName>Christoph</senderName><senderEmail>mangel@gmx.de</senderEmail><timestampReceived>2019-01-05 09:32:47-0400</timestampReceived><subject>Re: [libvirt-users] xen and libvirt</subject><body>

Hi

I need the e820_host option for a passthrough of an digitaldevices 
dvb-s2 card. Without this I'cant initialize the card in the domU.

On an all my domU's with high IO load like an file server I need to set 
max_grant_frames = 64 or higher. Without this I get a lot of messages on 
dom0/domU and kernel exceptions.
I've read it should be ok to set it = 256 on all domU's (somewhere on 
SuSE pages), so if there is a possibility to set it global on 
hyperviser, this could be a solution for me.
With xl.conf it is possible but libvirt doesnt look there for the 
settings. I've tried to set it in libxl.conf, but this doesnt work to.

Am 2019-01-04 18:42, schrieb Jim Fehlig:
&gt; On 1/4/19 9:14 AM, Christoph wrote:
&gt;&gt; Hi
&gt;&gt; 
&gt;&gt; Does someone know how it is possible these parameters:
&gt;&gt; 
&gt;&gt; e820_host
&gt;&gt; max_grant_frames
&gt;&gt; 
&gt;&gt; to set with libvirt xml config?
&gt; 
&gt; Currently, those settings are not supported by libvirt. Do you need to
&gt; adjust them for PCI passthrough to PV domains?
&gt; 
&gt; I took a quick peek at xl.cfg(5) and based on the description of those
&gt; settings didn't see a counterpart in the libvirt domain schema.
&gt; Perhaps understanding use-cases will help with modeling those settings
&gt; in libvirt domain XML.
&gt; 
&gt; Regards,
&gt; Jim

-- 
------
Greetz

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190104144710</emailId><senderName>Peter Krempa</senderName><senderEmail>pkrempa@redhat.com</senderEmail><timestampReceived>2019-01-04 14:47:10-0400</timestampReceived><subject>Re: [libvirt-users] script called from qemu hook freezes.</subject><body>

[Attachment #2 (multipart/signed)]


On Thu, Jan 03, 2019 at 18:07:58 +0100, daggs wrote:
&gt; Greetings,
&gt; 
&gt; I'm executing an external script when the qemu hook is called with start or \
&gt; release, the script is rather simple, upon start it iterates over the output of \
&gt; lsusb -t and for each device, it looks if it should be added to the vm we started, \
&gt; if so, it attaches it to the vm as follows: virsh --connect qemu:///system "${cmd}" \
&gt; "${domain}" /dev/stdin &lt;&lt; END &lt;hostdev mode='subsystem' type='usb'&gt;
&gt; &lt;source&gt;
&gt; &lt;address bus='${busnum}' device='${devnum}' /&gt;
&gt; &lt;/source&gt;
&gt; &lt;/hostdev&gt;
&gt; END
&gt; 
&gt; where cmd is attach-device, domain is the vm's name, busnum and devnum come from \
&gt; the output of the lsusb -t. my issue is that upon the first attach attempt, the cmd \
&gt; hangs, I need to kill it and after than I cannot preform any virsh cmd, I must \
&gt; restart the host. if I try to execute the same cmd after the vm is up, it works \
&gt; great. 
&gt; why the attach process gets stuck? do I need to execute it under different stage?

Hook scripts shall never call any libvirt API (even through virsh). At
the point when the hook script is called the VM startup process is
paused until the script returns. If the script attempts to modify the VM
it gets stuck as the VM is locked at that point.

You either need to add the device prior to startup, but AFAIK that is
not possible with a hook script or after but the script needs to return.

So you either fork off a process which will wait for the startup to
finish from the hook script or write an APP using the libvirt API which
will wait for the VM start event and then execute what's necessary.


["signature.asc" (application/pgp-signature)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190104181227</emailId><senderName>Keith Bierman</senderName><senderEmail>khbkhb@gmail.com</senderEmail><timestampReceived>2019-01-04 18:12:27-0400</timestampReceived><subject>[libvirt-users] virsh on mac os X</subject><body>

[Attachment #2 (multipart/alternative)]


Mac OS X 10.14.2
VirtualBox 5.2.22 and 6.0.0
libvirt installed via homebrew

virsh -V

Virsh command line tool of libvirt 4.10.0

See web site at https://libvirt.org/


Compiled with support for:

 Hypervisors: QEMU/KVM VMware VirtualBox ESX Test

 Networking: Remote Bridging

 Storage: Dir

 Miscellaneous: Daemon Secrets Debug


brew services start libvirt

virsh -c vbox:///session list

error: failed to connect to the hypervisor

error: internal error: unable to initialize VirtualBox driver API

Unless there's a known issue with Mojave that's escaped me, surely I've
done something clueless .. pointers to the FM or otherwise greatly
appreciated.


Keith Bierman
khbkhb@gmail.com

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;&lt;div class="gmail_default" \
style="font-family:georgia,serif;color:rgb(102,51,255)"&gt;Mac OS X 10.14.2&lt;/div&gt;&lt;div \
class="gmail_default" \
style="font-family:georgia,serif;color:rgb(102,51,255)"&gt;VirtualBox 5.2.22 and \
6.0.0&lt;/div&gt;&lt;div class="gmail_default" \
style="font-family:georgia,serif;color:rgb(102,51,255)"&gt;libvirt installed via \
homebrew&lt;/div&gt;&lt;div class="gmail_default" \
style="font-family:georgia,serif;color:rgb(102,51,255)"&gt;







&lt;p class="gmail-p1" style="margin:0px;font:11px Menlo;color:rgb(0,0,0)"&gt;&lt;span \
class="gmail-s1" style="font-variant-ligatures:no-common-ligatures"&gt;virsh \
-V&lt;/span&gt;&lt;/p&gt; &lt;p class="gmail-p1" style="margin:0px;font:11px \
Menlo;color:rgb(0,0,0)"&gt;&lt;span class="gmail-s1" \
style="font-variant-ligatures:no-common-ligatures"&gt;Virsh command line tool of libvirt \
4.10.0&lt;/span&gt;&lt;/p&gt; &lt;p class="gmail-p1" style="margin:0px;font:11px \
Menlo;color:rgb(0,0,0)"&gt;&lt;span class="gmail-s1" \
style="font-variant-ligatures:no-common-ligatures"&gt;See web site at &lt;a \
href="https://libvirt.org/"&gt;https://libvirt.org/&lt;/a&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="gmail-p2" \
style="margin:0px;font:11px Menlo;color:rgb(0,0,0);min-height:13px"&gt;&lt;span \
class="gmail-s1" style="font-variant-ligatures:no-common-ligatures"&gt;&lt;/span&gt;&lt;br&gt;&lt;/p&gt; \
&lt;p class="gmail-p1" style="margin:0px;font:11px Menlo;color:rgb(0,0,0)"&gt;&lt;span \
class="gmail-s1" style="font-variant-ligatures:no-common-ligatures"&gt;Compiled with \
support for:&lt;/span&gt;&lt;/p&gt; &lt;p class="gmail-p1" style="margin:0px;font:11px \
Menlo;color:rgb(0,0,0)"&gt;&lt;span class="gmail-s1" \
style="font-variant-ligatures:no-common-ligatures"&gt;&lt;span \
class="gmail-Apple-converted-space"&gt;  &lt;/span&gt;Hypervisors: QEMU/KVM VMware VirtualBox \
ESX Test&lt;/span&gt;&lt;/p&gt; &lt;p class="gmail-p1" style="margin:0px;font:11px \
Menlo;color:rgb(0,0,0)"&gt;&lt;span class="gmail-s1" \
style="font-variant-ligatures:no-common-ligatures"&gt;&lt;span \
class="gmail-Apple-converted-space"&gt;  &lt;/span&gt;Networking: Remote Bridging&lt;/span&gt;&lt;/p&gt; \
&lt;p class="gmail-p1" style="margin:0px;font:11px Menlo;color:rgb(0,0,0)"&gt;&lt;span \
class="gmail-s1" style="font-variant-ligatures:no-common-ligatures"&gt;&lt;span \
class="gmail-Apple-converted-space"&gt;  &lt;/span&gt;Storage: Dir&lt;/span&gt;&lt;/p&gt; &lt;p \
class="gmail-p1" style="margin:0px;font:11px Menlo;color:rgb(0,0,0)"&gt;&lt;span \
class="gmail-s1" style="font-variant-ligatures:no-common-ligatures"&gt;&lt;span \
class="gmail-Apple-converted-space"&gt;  &lt;/span&gt;Miscellaneous: Daemon Secrets \
Debug&lt;/span&gt;&lt;/p&gt; &lt;p class="gmail-p1" style="margin:0px;font:11px \
Menlo;color:rgb(0,0,0)"&gt;&lt;br&gt;&lt;/p&gt;&lt;/div&gt;&lt;div class="gmail_default" \
style="font-family:georgia,serif;color:rgb(102,51,255)"&gt;brew services start \
libvirt&lt;/div&gt;&lt;div class="gmail_default" \
style="font-family:georgia,serif;color:rgb(102,51,255)"&gt;&lt;br&gt;&lt;/div&gt;&lt;div \
class="gmail_default" style="font-family:georgia,serif;color:rgb(102,51,255)"&gt;







&lt;p class="gmail-p1" style="margin:0px;font:11px Menlo;color:rgb(0,0,0)"&gt;&lt;span \
class="gmail-s1" style="font-variant-ligatures:no-common-ligatures"&gt;virsh -c \
vbox:///session list&lt;span class="gmail-Apple-converted-space"&gt;                        \
&lt;/span&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="gmail-p1" style="margin:0px;font:11px \
Menlo;color:rgb(0,0,0)"&gt;&lt;span class="gmail-s1" \
style="font-variant-ligatures:no-common-ligatures"&gt;error: failed to connect to the \
hypervisor&lt;/span&gt;&lt;/p&gt; &lt;p class="gmail-p1" style="margin:0px;font:11px \
Menlo;color:rgb(0,0,0)"&gt;&lt;span class="gmail-s1" \
style="font-variant-ligatures:no-common-ligatures"&gt;error: internal error: unable to \
initialize VirtualBox driver API&lt;/span&gt;&lt;/p&gt;&lt;/div&gt;&lt;div class="gmail_default" \
style="font-family:georgia,serif;color:rgb(102,51,255)"&gt;&lt;br&gt;&lt;/div&gt;&lt;div \
class="gmail_default" style="font-family:georgia,serif;color:rgb(102,51,255)"&gt;Unless \
there's a known issue with Mojave that's escaped me, surely I've done \
something clueless .. pointers to the FM or otherwise greatly appreciated.&lt;/div&gt;&lt;div \
class="gmail_default" \
style="font-family:georgia,serif;color:rgb(102,51,255)"&gt;&lt;br&gt;&lt;/div&gt;&lt;div \
class="gmail_default" \
style="font-family:georgia,serif;color:rgb(102,51,255)"&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div dir="ltr" \
class="gmail_signature"&gt;&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;Keith \
Bierman&lt;br&gt;&lt;a href="mailto:khbkhb@gmail.com" \
target="_blank"&gt;khbkhb@gmail.com&lt;/a&gt;&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;




_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190103013751</emailId><senderName>Branimir Pejakovic</senderName><senderEmail>branimirp@gmail.com</senderEmail><timestampReceived>2019-01-03 01:37:51-0400</timestampReceived><subject>[libvirt-users] Golang libvirt bindings problem</subject><body>

[Attachment #2 (multipart/alternative)]


Hello everybody!

First, allow me to wish you all a Happy New year!

I have a problem with a small app that I wrote in Go and which uses libvirt
go bindings. Actually, the problem exists only when I want to compile the
code statically. Basically, when CGO_ENABLED=0 is exported, go (running go
test, go run, go build) complains:

undefined: libvirt.NewConnect

When I try to compile the source dynamically (running the same go &lt;command&gt;
commands) the app works/checks out as expected and works without any
problem.

I tried this on:

- CentOS 7.6 (go version 1.11.2)
- Ubuntu 18.04 LTS (go version 1.10.4)

Both systems - as advised on project's github pages/godoc.org - have
libvirt-dev package installed. Also, the libvirt module is imported as
advised:

libvirt "github.com/libvirt/libvirt-go"

GOPATH is set to /home/$USER/go

I downloaded the package via go get; go get -v -u
github.com/libvirt/libvirt-go. Please if somebody encountered this before,
could you give me a hint if possible in order to solve this?

Thank you very much in advance!


Regards,

Branimir

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;Hello everybody!&lt;br&gt;&lt;br&gt;First, allow me to wish you all \
a Happy New year!&lt;br&gt;&lt;br&gt;I have a problem with a small app that I wrote in Go and \
which uses libvirt go bindings. Actually, the problem exists only when I want to \
compile the code statically. Basically, when CGO_ENABLED=0 is exported, go (running \
go test, go run, go build) complains:&lt;br&gt;&lt;br&gt;undefined: \
libvirt.NewConnect&lt;br&gt;&lt;br&gt;When I try to compile the source dynamically (running the \
same go &lt;command&gt; commands) the app works/checks out as expected and works \
without any problem.&lt;br&gt;&lt;br&gt;I tried this on:&lt;br&gt;&lt;br&gt;- CentOS 7.6 (go version \
1.11.2)&lt;br&gt;- Ubuntu 18.04 LTS (go version 1.10.4)&lt;br&gt;&lt;br&gt;Both systems - as advised on \
project's github pages/&lt;a href="http://godoc.org"&gt;godoc.org&lt;/a&gt; - have \
libvirt-dev package installed. Also, the libvirt module is imported as \
advised:&lt;br&gt;&lt;br&gt;libvirt "&lt;a \
href="http://github.com/libvirt/libvirt-go"&gt;github.com/libvirt/libvirt-go&lt;/a&gt;"&lt;br&gt;&lt;br&gt;GOPATH \
is set to /home/$USER/go&lt;br&gt;&lt;br&gt;I downloaded the package via go get; go get -v -u &lt;a \
href="http://github.com/libvirt/libvirt-go"&gt;github.com/libvirt/libvirt-go&lt;/a&gt;. Please \
if somebody encountered this before, could you give me a hint if possible in order to \
solve this? &lt;br&gt;&lt;br&gt;Thank you very much in \
advance!&lt;br&gt;&lt;br&gt;&lt;br&gt;Regards,&lt;br&gt;&lt;br&gt;Branimir&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;div dir="ltr" \
class="gmail_signature"&gt;&lt;div dir="ltr"&gt;&lt;div&gt;&lt;div dir="ltr"&gt;&lt;div&gt;&lt;div \
dir="ltr"&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190113095630</emailId><senderName>daggs</senderName><senderEmail>daggs@gmx.com</senderEmail><timestampReceived>2019-01-13 09:56:30-0400</timestampReceived><subject>[libvirt-users] forcing order of vnet creation</subject><body>

dummy0 Link encap:Ethernet HWaddr C6:C8:2A:04:FD:23
BROADCAST NOARP MTU:1500 Metric:1
RX packets:0 errors:0 dropped:0 overruns:0 frame:0
TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
collisions:0 txqueuelen:1000
RX bytes:0 (0.0 B) TX bytes:0 (0.0 B)

lo Link encap:Local Loopback
inet addr:127.0.0.1 Mask:255.0.0.0
inet6 addr: ::1/128 Scope:Host
UP LOOPBACK RUNNING MTU:65536 Metric:1
RX packets:22048 errors:0 dropped:0 overruns:0 frame:0
TX packets:22048 errors:0 dropped:0 overruns:0 carrier:0
collisions:0 txqueuelen:1000
RX bytes:1068960 (1.0 MiB) TX bytes:1068960 (1.0 MiB)

Greetings,

I have a host that has two vms, one is a router that all the machines on the network \
connect to it and that other a test virtual machine. the router vm is connected to \
the host using a virt net, the test virtual machine is connected to the router via a \
virtual switch. my /etc/network/interfaces defines vnet1 as dhcp by assuming that it \
is the vnet for the host (it was seen multiple times). yesterday I came back from a \
vacation, booted the system and didn't got any ip to the host, the rest of the \
machines on the network got ip. at the end, the issue was that vnet1 was the virtual \
switch rather than the host's virtual nic. is there a way for "lock" the vnics config \
so they won't change?

the host is Debian 9.6, the output of ifconfig -a is below (the "faulty" scenario)
virtsw0 Link encap:Ethernet HWaddr 52:54:00:6B:1B:92
UP BROADCAST RUNNING MULTICAST MTU:1500 Metric:1
RX packets:92908 errors:0 dropped:0 overruns:0 frame:0
TX packets:18 errors:0 dropped:0 overruns:0 carrier:0
collisions:0 txqueuelen:1000
RX bytes:13257095 (12.6 MiB) TX bytes:756 (756.0 B)

virtsw0-nic Link encap:Ethernet HWaddr 52:54:00:6B:1B:92
BROADCAST MULTICAST MTU:1500 Metric:1
RX packets:0 errors:0 dropped:0 overruns:0 frame:0
TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
collisions:0 txqueuelen:1000
RX bytes:0 (0.0 B) TX bytes:0 (0.0 B)

vnet0 Link encap:Ethernet HWaddr FE:54:00:8B:66:C1
inet addr:10.0.0.3 Bcast:10.0.0.255 Mask:255.255.255.0
inet6 addr: fe80::fc54:ff:fe8b:66c1/64 Scope:Link
inet6 addr: fdab:9802:eb52:0:fc54:ff:fe8b:66c1/64 Scope:Global
UP BROADCAST RUNNING MULTICAST MTU:1500 Metric:1
RX packets:528665 errors:0 dropped:0 overruns:0 frame:0
TX packets:752585 errors:0 dropped:0 overruns:0 carrier:0
collisions:0 txqueuelen:1000
RX bytes:44311555 (42.2 MiB) TX bytes:2165654771 (2.0 GiB)

vnet1 Link encap:Ethernet HWaddr FE:54:00:A7:79:6B
inet6 addr: fe80::fc54:ff:fea7:796b/64 Scope:Link
UP BROADCAST RUNNING MULTICAST MTU:1500 Metric:1
RX packets:92983 errors:0 dropped:0 overruns:0 frame:0
TX packets:81658 errors:0 dropped:0 overruns:0 carrier:0
collisions:0 txqueuelen:1000
RX bytes:14566221 (13.8 MiB) TX bytes:4249914 (4.0 MiB)

vnet2 Link encap:Ethernet HWaddr FE:54:00:54:78:BE
inet6 addr: fe80::fc54:ff:fe54:78be/64 Scope:Link
UP BROADCAST RUNNING MULTICAST MTU:1500 Metric:1
RX packets:15 errors:0 dropped:0 overruns:0 frame:0
TX packets:257 errors:0 dropped:0 overruns:0 carrier:0
collisions:0 txqueuelen:1000
RX bytes:1962 (1.9 KiB) TX bytes:42261 (41.2 KiB)

thanks,

Dagg.

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20190116084221</emailId><senderName>Christophe Dumont</senderName><senderEmail>christophedumont5@gmail.com</senderEmail><timestampReceived>2019-01-16 08:42:21-0400</timestampReceived><subject>[libvirt-users] cpu0 unhandled rdmsr:</subject><body>

[Attachment #2 (multipart/alternative)]


Hello,

Do you know what this means :

kvm: 2918: cpu0 unhandled rdmsr: 0x345
kvm: 2918: cpu0 unhandled rdmsr: 0x1c9
kvm: 2918: cpu0 unhandled rdmsr: 0x1a6
kvm: 2918: cpu0 unhandled rdmsr: 0x1a7
kvm: 2918: cpu0 unhandled rdmsr: 0x3f6
tap110i0: no IPv6 routers present
kvm: 2952: cpu0 unhandled rdmsr: 0x345
kvm: 2952: cpu0 unhandled rdmsr: 0x1c9
kvm: 2952: cpu0 unhandled rdmsr: 0x1a6
kvm: 2952: cpu0 unhandled rdmsr: 0x1a7
kvm: 2952: cpu0 unhandled rdmsr: 0x3f6

I think it causes instability, we had to reboot the server twice and a
backup script still fails.

Thx

-- 
Christophe Dumont
4, Passage du Lycée
38000 Grenoble
0633475733

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;Hello,  &lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Do you know what this means \
:  &lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;kvm: 2918: cpu0 unhandled rdmsr: \
0x345&lt;/div&gt;&lt;div&gt;kvm: 2918: cpu0 unhandled rdmsr: 0x1c9&lt;/div&gt;&lt;div&gt;kvm: 2918: cpu0 \
unhandled rdmsr: 0x1a6&lt;/div&gt;&lt;div&gt;kvm: 2918: cpu0 unhandled rdmsr: \
0x1a7&lt;/div&gt;&lt;div&gt;kvm: 2918: cpu0 unhandled rdmsr: 0x3f6&lt;/div&gt;&lt;div&gt;tap110i0: no IPv6 \
routers present&lt;/div&gt;&lt;div&gt;kvm: 2952: cpu0 unhandled rdmsr: 0x345&lt;/div&gt;&lt;div&gt;kvm: 2952: \
cpu0 unhandled rdmsr: 0x1c9&lt;/div&gt;&lt;div&gt;kvm: 2952: cpu0 unhandled rdmsr: \
0x1a6&lt;/div&gt;&lt;div&gt;kvm: 2952: cpu0 unhandled rdmsr: 0x1a7&lt;/div&gt;&lt;div&gt;kvm: 2952: cpu0 \
unhandled rdmsr: 0x3f6&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I think it causes instability, \
we had to reboot the server twice and a backup script still \
fails.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thx&lt;br clear="all"&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;-- &lt;br&gt;&lt;div \
dir="ltr" class="gmail_signature"&gt;&lt;div dir="ltr"&gt;&lt;div&gt;&lt;div dir="ltr"&gt;&lt;div&gt;Christophe \
Dumont&lt;br&gt;&lt;/div&gt;&lt;div&gt;4, Passage du Lycée&lt;br&gt;&lt;/div&gt;&lt;div&gt;38000 \
Grenoble&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;0633475733&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;




_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190116090745</emailId><senderName>Daniel =?utf-8?B?UC4gQmVycmFuZ8Op?=</senderName><senderEmail>berrange@redhat.com</senderEmail><timestampReceived>2019-01-16 09:07:45-0400</timestampReceived><subject>Re: [libvirt-users] cpu0 unhandled rdmsr:</subject><body>

On Wed, Jan 16, 2019 at 09:42:21AM +0100, Christophe Dumont wrote:
&gt; Hello,
&gt; 
&gt; Do you know what this means :
&gt; 
&gt; kvm: 2918: cpu0 unhandled rdmsr: 0x345
&gt; kvm: 2918: cpu0 unhandled rdmsr: 0x1c9
&gt; kvm: 2918: cpu0 unhandled rdmsr: 0x1a6
&gt; kvm: 2918: cpu0 unhandled rdmsr: 0x1a7
&gt; kvm: 2918: cpu0 unhandled rdmsr: 0x3f6
&gt; tap110i0: no IPv6 routers present
&gt; kvm: 2952: cpu0 unhandled rdmsr: 0x345
&gt; kvm: 2952: cpu0 unhandled rdmsr: 0x1c9
&gt; kvm: 2952: cpu0 unhandled rdmsr: 0x1a6
&gt; kvm: 2952: cpu0 unhandled rdmsr: 0x1a7
&gt; kvm: 2952: cpu0 unhandled rdmsr: 0x3f6
&gt; 
&gt; I think it causes instability, we had to reboot the server twice and a
&gt; backup script still fails.

KVM has a whitelist of MSRs that it handles. These messages show
that the guest has been doing reads on various MSRs that KVM does
not support. These can sometimes be the the cause of bugs, but
others may be harmless. Best to report these to the KVM community,
with details about your host hardware CPU models, and what guest
OS you are running


Regards,
Daniel
-- 
|: https://berrange.com      -o-    https://www.flickr.com/photos/dberrange :|
|: https://libvirt.org         -o-            https://fstop138.berrange.com :|
|: https://entangle-photo.org    -o-    https://www.instagram.com/dberrange :|

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190110101957</emailId><senderName>"Roosen, Nicolas"</senderName><senderEmail>nicolas.roosen@hpe.com</senderEmail><timestampReceived>2019-01-10 10:19:57-0400</timestampReceived><subject>[libvirt-users] VM running with storage image file deleted</subject><body>

Hello, I have a strange issue I'd like to have some insights on.


We have 2 running VM, the storage pool is over NFS. Unfortunately, the back=
end storage folder has been deleted (so the image file in it as well, obvio=
usly) ...


Yet, the 2 VM are still up and running, with their root filesystem being mo=
unted "rw".


- how does that work? I was expecting that with the file image being delete=
d, the VM would not work at all.

- since the VM is still running, is there a way to create a snapshot of it =
in order to re-create the image file on another storage pool ? I'm currentl=
y exploring "virsh snapshot-create-as ...", but if access to the image file=
 is needed, it will fail.


Thanks.


--

Nicolas

[Attachment #3 (text/html)]

&lt;html&gt;
&lt;head&gt;
&lt;meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"&gt;
&lt;style type="text/css" style="display:none;"&gt;&lt;!-- P {margin-top:0;margin-bottom:0;} \
--&gt;&lt;/style&gt; &lt;/head&gt;
&lt;body dir="ltr"&gt;
&lt;div id="divtagdefaultwrapper" \
style="font-size:11pt;color:#000000;font-family:Helvetica;" dir="ltr"&gt; &lt;p \
style="margin-top:0;margin-bottom:0"&gt;Hello, I have a strange issue I'd like to have \
some insights on.&lt;br&gt; &lt;/p&gt;
&lt;p style="margin-top:0;margin-bottom:0"&gt;&lt;br&gt;
&lt;/p&gt;
&lt;p style="margin-top:0;margin-bottom:0"&gt;We have 2 running VM, the storage pool is \
over NFS. Unfortunately, the backend storage folder has been deleted (so the image \
file in it as well, obviously) ...&lt;/p&gt; &lt;p style="margin-top:0;margin-bottom:0"&gt;&lt;br&gt;
&lt;/p&gt;
&lt;p style="margin-top:0;margin-bottom:0"&gt;Yet, the 2 VM are still up and running, with \
their root filesystem being mounted "rw".&lt;/p&gt; &lt;p \
style="margin-top:0;margin-bottom:0"&gt;&lt;br&gt; &lt;/p&gt;
&lt;p style="margin-top:0;margin-bottom:0"&gt;- how does that work? I was expecting that \
with the file image being deleted, the VM would not work at all.&lt;/p&gt; &lt;p \
style="margin-top:0;margin-bottom:0"&gt;- since the VM is still running, is there a way \
to create a snapshot of it in order to re-create the image file on another storage \
pool ? I'm currently exploring "virsh snapshot-create-as ...", but if \
access to the image  file is needed, it will fail.&lt;/p&gt;
&lt;p style="margin-top:0;margin-bottom:0"&gt;&lt;br&gt;
&lt;/p&gt;
&lt;p style="margin-top:0;margin-bottom:0"&gt;Thanks.&lt;br&gt;
&lt;/p&gt;
&lt;p style="margin-top:0;margin-bottom:0"&gt;&lt;br&gt;
&lt;/p&gt;
&lt;div id="Signature"&gt;
&lt;div id="divtagdefaultwrapper" dir="ltr" style="font-size:12pt; color:rgb(0,0,0); \
font-family:Calibri,Arial,Helvetica,sans-serif,"EmojiFont","Apple \
Color Emoji","Segoe UI Emoji",NotoColorEmoji,"Segoe UI \
Symbol","Android Emoji",EmojiSymbols,"EmojiFont","Apple \
Color Emoji","Segoe UI Emoji",NotoColorEmoji,"Segoe UI \
Symbol","Android Emoji",EmojiSymbols"&gt; &lt;p&gt;&lt;span \
style="font-family:Calibri,Helvetica,sans-serif"&gt;--&lt;/span&gt;&lt;/p&gt; &lt;span \
style="font-family:Calibri,Helvetica,sans-serif"&gt;&lt;/span&gt; &lt;p&gt;&lt;/p&gt;
&lt;div&gt;&lt;span style="font-family:Calibri,Helvetica,sans-serif"&gt;Nicolas&lt;/span&gt;&lt;span \
style="font-family:Calibri,Helvetica,sans-serif"&gt;&lt;/span&gt;&lt;/div&gt; &lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
--===============2050144157373879183==--


</body></email><email><emailId>20190117105820</emailId><senderName>Igor Gnatenko</senderName><senderEmail>i.gnatenko.brain@gmail.com</senderEmail><timestampReceived>2019-01-17 10:58:20-0400</timestampReceived><subject>[libvirt-users] virt-install and IOThreads</subject><body>

Hello,

is there any way of specifying iothreads via virt-install command?

I've tried appending ",iothread='1'" but that didn't work.

Thanks in advance!
-- 
-Igor Gnatenko

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190121131557</emailId><senderName>Pascal Legrand</senderName><senderEmail>pascal.legrand@univ-orleans.fr</senderEmail><timestampReceived>2019-01-21 13:15:57-0400</timestampReceived><subject>[libvirt-users] Slow ssh</subject><body>

Hello,
i'm using libvirt/kvm/qemu on a stable Debian Linux KVM 4.9.0-6-amd64 .

qemu-kvm : 1:2.8+dfsg-6+deb9u5
libvirt-daemon : 3.0.0-4+deb9u3
libvirt-clients : 3.0.0-4+deb9u3
virt-manager : 1:1.4.0-5
virt-viewer : 5.0-1
virtinst : 1:1.4.0-5


My guests are made with this kind of command line :

virt-install --connect=qemu:///system --name=debian --ram=2048 --disk 
/home/vm/debian.qcow2,size=10,format=qcow2 
--network=bridge:bridge-0-1,model=virtio 
--network=bridge:bridge-0-2,model=virtio 
--network=bridge:bridge-0-3,model=virtio --accelerate --noautoconsole 
--vnc --vnclisten=0.0.0.0 --keymap=fr 
--cdrom=/home/iso/debian-6.0.1a-i386-netinst.iso --os-type=linux 
--os-variant=debiansqueeze --hvm


Since a long time ago now (may be a Debian upgrade) i noticed that ssh 
session from my personal PC to guests are very slow (connection and 
behaviour)

My ssh configuration is the same on all my real/vm servers.
The problem occure only on my guest.


Have you got a solution or an idea to solve this problem ?

Thanks for your help

-- 
Pascal

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190122152510</emailId><senderName>lejeczek</senderName><senderEmail>peljasz@yahoo.co.uk</senderEmail><timestampReceived>2019-01-22 15:25:10-0400</timestampReceived><subject>[libvirt-users] LXC guest to have/make a device node (FUSE)</subject><body>

hi guys

With lxc container under libvirt control - how can guest create device
nodes?

I'm specifically looking for FUSE device. Is it possible somehow to get
it to the guest(passthrough?) or allow the guest to create dev node?

many thanks, L.


["pEpkey.asc" (application/pgp-keys)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190122153632</emailId><senderName>Daniel =?utf-8?B?UC4gQmVycmFuZ8Op?=</senderName><senderEmail>berrange@redhat.com</senderEmail><timestampReceived>2019-01-22 15:36:32-0400</timestampReceived><subject>Re: [libvirt-users] LXC guest to have/make a device node (FUSE)</subject><body>

On Tue, Jan 22, 2019 at 03:25:10PM +0000, lejeczek wrote:
&gt; hi guys
&gt; 
&gt; With lxc container under libvirt control - how can guest create device
&gt; nodes?
&gt; 
&gt; I'm specifically looking for FUSE device. Is it possible somehow to get
&gt; it to the guest(passthrough?) or allow the guest to create dev node?

You can tell libvirt to create it using host device "passthrough" for
arbitrary block or character devices:

  https://libvirt.org/formatdomain.html#elementsHostDevCaps

Regards,
Daniel
-- 
|: https://berrange.com      -o-    https://www.flickr.com/photos/dberrange :|
|: https://libvirt.org         -o-            https://fstop138.berrange.com :|
|: https://entangle-photo.org    -o-    https://www.instagram.com/dberrange :|

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190117153535</emailId><senderName>Cole Robinson</senderName><senderEmail>crobinso@redhat.com</senderEmail><timestampReceived>2019-01-17 15:35:35-0400</timestampReceived><subject>Re: [libvirt-users] virt-install and IOThreads</subject><body>

On 01/17/2019 05:58 AM, Igor Gnatenko wrote:
&gt; Hello,
&gt; 
&gt; is there any way of specifying iothreads via virt-install command?
&gt; 
&gt; I've tried appending ",iothread='1'" but that didn't work.
&gt; 
&gt; Thanks in advance!
&gt; 

No unfortunately it's not wired up in virt-install. It's fairly easy to 
patch+extend the command line if you're interested, this is a bit out of 
date but still pretty close

https://blog.wikichoon.com/2014/03/extending-virt-xml-command-line.html

- Cole

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190117194623</emailId><senderName>Igor Gnatenko</senderName><senderEmail>i.gnatenko.brain@gmail.com</senderEmail><timestampReceived>2019-01-17 19:46:23-0400</timestampReceived><subject>Re: [libvirt-users] virt-install and IOThreads</subject><body>

On Thu, Jan 17, 2019 at 4:35 PM Cole Robinson &lt;crobinso@redhat.com&gt; wrote:
&gt;
&gt; On 01/17/2019 05:58 AM, Igor Gnatenko wrote:
&gt; &gt; Hello,
&gt; &gt;
&gt; &gt; is there any way of specifying iothreads via virt-install command?
&gt; &gt;
&gt; &gt; I've tried appending ",iothread='1'" but that didn't work.
&gt; &gt;
&gt; &gt; Thanks in advance!
&gt; &gt;
&gt;
&gt; No unfortunately it's not wired up in virt-install. It's fairly easy to
&gt; patch+extend the command line if you're interested, this is a bit out of
&gt; date but still pretty close
&gt;
&gt; https://blog.wikichoon.com/2014/03/extending-virt-xml-command-line.html

Thanks for reference!

I'm still not sure how the commandline would look like, what do you
think about something like…
--iothreads=X --disk=…,iothread=1 --disk=…,iothread=X

?
-- 
-Igor Gnatenko

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190110103133</emailId><senderName>Michael Hierweck</senderName><senderEmail>michael@hierweck.de</senderEmail><timestampReceived>2019-01-10 10:31:33-0400</timestampReceived><subject>Re: [libvirt-users] VM running with storage image file deleted</subject><body>

On 10.01.19 11:19, Roosen, Nicolas wrote:
&gt; Hello, I have a strange issue I'd like to have some insights on.
&gt; 
&gt; 
&gt; We have 2 running VM, the storage pool is over NFS. Unfortunately, the backend \
&gt; storage folder has been deleted (so the image file in it as well, obviously) ... 
&gt; 
&gt; Yet, the 2 VM are still up and running, with their root filesystem being mounted \
&gt; "rw". 
&gt; 
&gt; - how does that work? I was expecting that with the file image being deleted, the \
&gt; VM would not work at all.

The file was "unlinked" but still exists.

https://superuser.com/questions/283102/how-to-recover-deleted-file-if-it-is-still-opened-by-some-process


I would consider doing a backup from inside the VM, too.

&gt; - since the VM is still running, is there a way to create a snapshot of it in order \
&gt; to re-create the image file on another storage pool ? I'm currently exploring \
&gt; "virsh snapshot-create-as ...", but if access to the image file is needed, it will \
&gt; fail.

Note: the file will be lost, when it is released by the QEMU process.

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20190110103513</emailId><senderName>Michal Privoznik</senderName><senderEmail>mprivozn@redhat.com</senderEmail><timestampReceived>2019-01-10 10:35:13-0400</timestampReceived><subject>Re: [libvirt-users] VM running with storage image file deleted</subject><body>

On 1/10/19 11:19 AM, Roosen, Nicolas wrote:
&gt; Hello, I have a strange issue I'd like to have some insights on.
&gt; 
&gt; 
&gt; We have 2 running VM, the storage pool is over NFS. Unfortunately, the backend \
&gt; storage folder has been deleted (so the image file in it as well, obviously) ... 
&gt; 
&gt; Yet, the 2 VM are still up and running, with their root filesystem being mounted \
&gt; "rw". 
&gt; 
&gt; - how does that work? I was expecting that with the file image being deleted, the \
&gt; VM would not work at all. 
&gt; - since the VM is still running, is there a way to create a snapshot of it in order \
&gt; to re-create the image file on another storage pool ? I'm currently exploring \
&gt; "virsh snapshot-create-as ...", but if access to the image file is needed, it will \
&gt; fail. 

On Linux a file is not deleted right away if there's a process that has
the file opened, which is your case. The deletion is deferred until the
last process closed the file.

In order to rescue the file you could get the PID of qemu that still has
the disk open, and then find the FD corresponding to the file and with
some magic you should be able to recover the file:

# pgrep qemu
221472

# ls -l /proc/221472/fd/ | grep deleted
lr-x------ 1 root root 64 Jan 10 11:31 29 -&gt;
/var/lib/libvirt/images/fd.img (deleted)

(Here, 29 is the FD we're looking for)

# dd if=/proc/221472/fd/29 of=blah.img

snapshot-create-* won't work because that will instruct qemu to open the
file again which will fail because the filename is gone.

Michal

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20190110110825</emailId><senderName>"Roosen, Nicolas"</senderName><senderEmail>nicolas.roosen@hpe.com</senderEmail><timestampReceived>2019-01-10 11:08:25-0400</timestampReceived><subject>Re: [libvirt-users] VM running with storage image file deleted</subject><body>

Thanks Michal, this is good to know.


Unfortunately, "dd" complains that the file is a "Stale file handle".


dd if=/proc/470/fs/27 of=/data/vmguest.img

dd: failed to open '/proc/470/fs/27': Stale file handle


The file was on a NFS server, but the process "qemu" is running on the VM host. Duno \
if it makes a difference, but anyway, it seems I cannot "dd" the FD file.


I'll try a rsync of the root FS of the running guest, to "backup" as much as I can.


Nicolas


________________________________
From: Michal Privoznik &lt;mprivozn@redhat.com&gt;
Sent: Thursday, January 10, 2019 11:35
To: Roosen, Nicolas; libvirt-users@redhat.com
Subject: Re: [libvirt-users] VM running with storage image file deleted

On 1/10/19 11:19 AM, Roosen, Nicolas wrote:
&gt; Hello, I have a strange issue I'd like to have some insights on.
&gt; 
&gt; 
&gt; We have 2 running VM, the storage pool is over NFS. Unfortunately, the backend \
&gt; storage folder has been deleted (so the image file in it as well, obviously) ... 
&gt; 
&gt; Yet, the 2 VM are still up and running, with their root filesystem being mounted \
&gt; "rw". 
&gt; 
&gt; - how does that work? I was expecting that with the file image being deleted, the \
&gt; VM would not work at all. 
&gt; - since the VM is still running, is there a way to create a snapshot of it in order \
&gt; to re-create the image file on another storage pool ? I'm currently exploring \
&gt; "virsh snapshot-create-as ...", but if access to the image file is needed, it will \
&gt; fail. 

On Linux a file is not deleted right away if there's a process that has
the file opened, which is your case. The deletion is deferred until the
last process closed the file.

In order to rescue the file you could get the PID of qemu that still has
the disk open, and then find the FD corresponding to the file and with
some magic you should be able to recover the file:

# pgrep qemu
221472

# ls -l /proc/221472/fd/ | grep deleted
lr-x------ 1 root root 64 Jan 10 11:31 29 -&gt;
/var/lib/libvirt/images/fd.img (deleted)

(Here, 29 is the FD we're looking for)

# dd if=/proc/221472/fd/29 of=blah.img

snapshot-create-* won't work because that will instruct qemu to open the
file again which will fail because the filename is gone.

Michal


[Attachment #3 (text/html)]

&lt;html&gt;
&lt;head&gt;
&lt;meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"&gt;
&lt;style type="text/css" style="display:none;"&gt;&lt;!-- P {margin-top:0;margin-bottom:0;} \
--&gt;&lt;/style&gt; &lt;/head&gt;
&lt;body dir="ltr"&gt;
&lt;div id="divtagdefaultwrapper" \
style="font-size:11pt;color:#000000;font-family:Helvetica;" dir="ltr"&gt; &lt;p \
style="margin-top:0;margin-bottom:0"&gt;Thanks Michal, this is good to know.&lt;/p&gt; &lt;p \
style="margin-top:0;margin-bottom:0"&gt;&lt;br&gt; &lt;/p&gt;
&lt;p style="margin-top:0;margin-bottom:0"&gt;Unfortunately, "dd" complains that \
the file is a "Stale file handle".&lt;/p&gt; &lt;p \
style="margin-top:0;margin-bottom:0"&gt;&lt;br&gt; &lt;/p&gt;
&lt;p style="margin-top:0;margin-bottom:0"&gt;dd if=/proc/470/fs/27 \
of=/data/vmguest.img&lt;/p&gt; &lt;p style="margin-top:0;margin-bottom:0"&gt;dd: failed to open \
'/proc/470/fs/27': Stale file handle&lt;br&gt; &lt;/p&gt;
&lt;p style="margin-top:0;margin-bottom:0"&gt;&lt;br&gt;
&lt;/p&gt;
&lt;p style="margin-top:0;margin-bottom:0"&gt;The file was on a NFS server, but the process \
"qemu" is running on the VM host. Duno if it makes a difference, but \
anyway, it seems I cannot "dd" the FD file.&lt;/p&gt; &lt;p \
style="margin-top:0;margin-bottom:0"&gt;&lt;br&gt; &lt;/p&gt;
&lt;p style="margin-top:0;margin-bottom:0"&gt;I'll try a rsync of the root FS of the \
running guest, to "backup" as much as I can.&lt;/p&gt; &lt;p \
style="margin-top:0;margin-bottom:0"&gt;&lt;br&gt; &lt;/p&gt;
&lt;p style="margin-top:0;margin-bottom:0"&gt;Nicolas&lt;br&gt;
&lt;/p&gt;
&lt;p style="margin-top:0;margin-bottom:0"&gt;&lt;br&gt;
&lt;/p&gt;
&lt;div style="color: rgb(0, 0, 0);"&gt;
&lt;hr style="display:inline-block;width:98%" tabindex="-1"&gt;
&lt;div id="divRplyFwdMsg" dir="ltr"&gt;&lt;font style="font-size:11pt" face="Calibri, \
sans-serif" color="#000000"&gt;&lt;b&gt;From:&lt;/b&gt; Michal Privoznik \
&lt;mprivozn@redhat.com&gt;&lt;br&gt; &lt;b&gt;Sent:&lt;/b&gt; Thursday, January 10, 2019 11:35&lt;br&gt;
&lt;b&gt;To:&lt;/b&gt; Roosen, Nicolas; libvirt-users@redhat.com&lt;br&gt;
&lt;b&gt;Subject:&lt;/b&gt; Re: [libvirt-users] VM running with storage image file deleted&lt;/font&gt;
&lt;div&gt; &lt;/div&gt;
&lt;/div&gt;
&lt;div class="BodyFragment"&gt;&lt;font size="2"&gt;&lt;span style="font-size:11pt;"&gt;
&lt;div class="PlainText"&gt;On 1/10/19 11:19 AM, Roosen, Nicolas wrote:&lt;br&gt;
&gt; Hello, I have a strange issue I'd like to have some insights on.&lt;br&gt;
&gt; &lt;br&gt;
&gt; &lt;br&gt;
&gt; We have 2 running VM, the storage pool is over NFS. Unfortunately, the backend \
storage folder has been deleted (so the image file in it as well, obviously) ...&lt;br&gt; \
&gt; &lt;br&gt; &gt; &lt;br&gt;
&gt; Yet, the 2 VM are still up and running, with their root filesystem being mounted \
"rw".&lt;br&gt; &gt; &lt;br&gt;
&gt; &lt;br&gt;
&gt; - how does that work? I was expecting that with the file image being deleted, \
the VM would not work at all.&lt;br&gt; &gt; &lt;br&gt;
&gt; - since the VM is still running, is there a way to create a snapshot of it in \
order to re-create the image file on another storage pool ? I'm currently exploring \
"virsh snapshot-create-as ...", but if access to the image file is needed, \
it will fail.&lt;br&gt; &gt; &lt;br&gt;
&lt;br&gt;
On Linux a file is not deleted right away if there's a process that has&lt;br&gt;
the file opened, which is your case. The deletion is deferred until the&lt;br&gt;
last process closed the file.&lt;br&gt;
&lt;br&gt;
In order to rescue the file you could get the PID of qemu that still has&lt;br&gt;
the disk open, and then find the FD corresponding to the file and with&lt;br&gt;
some magic you should be able to recover the file:&lt;br&gt;
&lt;br&gt;
# pgrep qemu&lt;br&gt;
221472&lt;br&gt;
&lt;br&gt;
# ls -l /proc/221472/fd/ | grep deleted&lt;br&gt;
lr-x------ 1 root root 64 Jan 10 11:31 29 -&gt;&lt;br&gt;
/var/lib/libvirt/images/fd.img (deleted)&lt;br&gt;
&lt;br&gt;
(Here, 29 is the FD we're looking for)&lt;br&gt;
&lt;br&gt;
# dd if=/proc/221472/fd/29 of=blah.img&lt;br&gt;
&lt;br&gt;
snapshot-create-* won't work because that will instruct qemu to open the&lt;br&gt;
file again which will fail because the filename is gone.&lt;br&gt;
&lt;br&gt;
Michal&lt;/div&gt;
&lt;div class="PlainText"&gt;&lt;br&gt;
&lt;/div&gt;
&lt;div class="PlainText"&gt;&lt;br&gt;
&lt;/div&gt;
&lt;div class="PlainText"&gt;&lt;br&gt;
&lt;/div&gt;
&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
--===============0808034062165990146==--


</body></email><email><emailId>20190115141808</emailId><senderName>Peter Krempa</senderName><senderEmail>pkrempa@redhat.com</senderEmail><timestampReceived>2019-01-15 14:18:08-0400</timestampReceived><subject>Re: [libvirt-users] VM running with storage image file deleted</subject><body>

[Attachment #2 (multipart/signed)]


On Thu, Jan 10, 2019 at 11:35:13 +0100, Michal Privoznik wrote:
&gt; On 1/10/19 11:19 AM, Roosen, Nicolas wrote:
&gt; &gt; Hello, I have a strange issue I'd like to have some insights on.
&gt; &gt; 
&gt; &gt; 
&gt; &gt; We have 2 running VM, the storage pool is over NFS. Unfortunately, the backend \
&gt; &gt; storage folder has been deleted (so the image file in it as well, obviously) ... 
&gt; &gt; 
&gt; &gt; Yet, the 2 VM are still up and running, with their root filesystem being mounted \
&gt; &gt; "rw". 
&gt; &gt; 
&gt; &gt; - how does that work? I was expecting that with the file image being deleted, the \
&gt; &gt; VM would not work at all. 
&gt; &gt; - since the VM is still running, is there a way to create a snapshot of it in \
&gt; &gt; order to re-create the image file on another storage pool ? I'm currently \
&gt; &gt; exploring "virsh snapshot-create-as ...", but if access to the image file is \
&gt; &gt; needed, it will fail. 
&gt; 
&gt; On Linux a file is not deleted right away if there's a process that has
&gt; the file opened, which is your case. The deletion is deferred until the
&gt; last process closed the file.
&gt; 
&gt; In order to rescue the file you could get the PID of qemu that still has
&gt; the disk open, and then find the FD corresponding to the file and with
&gt; some magic you should be able to recover the file:
&gt; 
&gt; # pgrep qemu
&gt; 221472
&gt; 
&gt; # ls -l /proc/221472/fd/ | grep deleted
&gt; lr-x------ 1 root root 64 Jan 10 11:31 29 -&gt;
&gt; /var/lib/libvirt/images/fd.img (deleted)
&gt; 
&gt; (Here, 29 is the FD we're looking for)
&gt; 
&gt; # dd if=/proc/221472/fd/29 of=blah.img
&gt; 
&gt; snapshot-create-* won't work because that will instruct qemu to open the
&gt; file again which will fail because the filename is gone.

You can use 'virsh blockcopy $domname $diskname /path/to/other/location --pivot
--transient-job' to rescue this situation.

The above command will copy the full block device from qemu's point of
view (thus without any change) into the new location and then switch to
it when done.

Your VM will even continue running as it did but will use the new file.


["signature.asc" (application/pgp-signature)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190107175207</emailId><senderName>Keith Bierman</senderName><senderEmail>khbkhb@gmail.com</senderEmail><timestampReceived>2019-01-07 17:52:07-0400</timestampReceived><subject>Re: [libvirt-users] virsh on mac os X</subject><body>

[Attachment #2 (multipart/alternative)]


On Fri, Jan 4, 2019 at 11:12 AM Keith Bierman &lt;khbkhb@gmail.com&gt; wrote:

&gt; Mac OS X 10.14.2
&gt; VirtualBox 5.2.22 and 6.0.0
&gt; libvirt installed via homebrew....
&gt; 
&gt; virsh -c vbox:///session list
&gt; 
&gt; error: failed to connect to the hypervisor
&gt; 
&gt; error: internal error: unable to initialize VirtualBox driver API
&gt; ....
&gt; 

In case it's helpful, here's dtruss results (dtruss -fn virsh; start virsh
in another window...). Or are these artifacts of the SIP feature?

sudo dtruss -fn virsh

dtrace: system integrity protection is on, some features will not be
available



PID/THRD  SYSCALL(args)  = return

98962/0x5a031:  thread_selfid(0x0, 0x0, 0x0) = 368689 0

98962/0x5a031:  __mac_syscall(0x1058CDC89, 0x5A, 0x7FFEEA718F00) = 0 0

98962/0x5a031:  shared_region_check_np(0x7FFEEA718D68, 0x0, 0x0) = 0 0

98962/0x5a031:  stat64("/private/var/db/dyld/dyld_shared_cache_x86_64h\0",
0x7FFEEA718CB0, 0x0) = 0 0

98962/0x5a031:  csrctl(0x0, 0x7FFEEA718A7C, 0x4) = -1 Err#1

98962/0x5a031:  stat64("/usr/local/bin/virsh\0", 0x7FFEEA719400, 0x0) = 0 0

98962/0x5a031:  getpid(0x0, 0x0, 0x0) = 98962 0

98962/0x5a031:  proc_info(0x2, 0x18292, 0x16) = 1272 0

98962/0x5a031:
stat64("/usr/local/Cellar/libvirt/4.10.0/lib/libvirt-lxc.0.dylib\0",
0x7FFEEA717C00, 0x0) = 0 0

98962/0x5a031:
stat64("/usr/local/Cellar/libvirt/4.10.0/lib/libvirt-lxc.0.dylib\0",
0x7FFEEA718040, 0x0) = 0 0

98962/0x5a031:
open("/usr/local/Cellar/libvirt/4.10.0/lib/libvirt-lxc.0.dylib\0", 0x0,
0x0) = 3 0

dtrace: error on enabled probe ID 2189 (ID 468: syscall::pread:return):
invalid kernel access in action #13 at DIF offset 20

98962/0x5a031:  fcntl(0x3, 0x62, 0x7FFEEA70F7D0) = 0 0

98962/0x5a031:  mmap(0x10556D000, 0x4000, 0x5, 0x12, 0x3, 0x0) =
0x10556D000 0

98962/0x5a031:  mmap(0x105571000, 0x1000, 0x3, 0x12, 0x3, 0x4000) =
0x105571000 0

98962/0x5a031:  mmap(0x105572000, 0x6CC, 0x1, 0x12, 0x3, 0x5000) =
0x105572000 0

98962/0x5a031:  fcntl(0x3, 0x2C, 0x7FFEEA70F9D0) = 0 0

98962/0x5a031:  close(0x3) = 0 0

98962/0x5a031:
stat64("/usr/local/Cellar/libvirt/4.10.0/lib/libvirt-qemu.0.dylib\0",
0x7FFEEA717C00, 0x0) = 0 0

98962/0x5a031:
stat64("/usr/local/Cellar/libvirt/4.10.0/lib/libvirt-qemu.0.dylib\0",
0x7FFEEA718040, 0x0) = 0 0

98962/0x5a031:
open("/usr/local/Cellar/libvirt/4.10.0/lib/libvirt-qemu.0.dylib\0", 0x0,
0x0) = 3 0

dtrace: error on enabled probe ID 2189 (ID 468: syscall::pread:return):
invalid kernel access in action #13 at DIF offset 20

98962/0x5a031:  fcntl(0x3, 0x62, 0x7FFEEA70F7D0) = 0 0

98962/0x5a031:  mmap(0x105575000, 0x4000, 0x5, 0x12, 0x3, 0x0) =
0x105575000 0

98962/0x5a031:  mmap(0x105579000, 0x1000, 0x3, 0x12, 0x3, 0x4000) =
0x105579000 0

98962/0x5a031:  mmap(0x10557A000, 0x4D4, 0x1, 0x12, 0x3, 0x5000) =
0x10557A000 0

98962/0x5a031:  fcntl(0x3, 0x2C, 0x7FFEEA70F9D0) = 0 0

98962/0x5a031:  close(0x3) = 0 0

98962/0x5a031:
stat64("/usr/local/Cellar/libvirt/4.10.0/lib/libvirt.0.dylib\0",
0x7FFEEA717C00, 0x0) = 0 0

98962/0x5a031:
stat64("/usr/local/Cellar/libvirt/4.10.0/lib/libvirt.0.dylib\0",
0x7FFEEA718040, 0x0) = 0 0

98962/0x5a031:
open("/usr/local/Cellar/libvirt/4.10.0/lib/libvirt.0.dylib\0", 0x0, 0x0) =
3 0

dtrace: error on enabled probe ID 2189 (ID 468: syscall::pread:return):
invalid kernel access in action #13 at DIF offset 20

98962/0x5a031:  fcntl(0x3, 0x62, 0x7FFEEA70F7D0) = 0 0

98962/0x5a031:  mmap(0x105947000, 0x252000, 0x5, 0x12, 0x3, 0x0) =
0x105947000 0

98962/0x5a031:  mmap(0x105B99000, 0x12000, 0x3, 0x12, 0x3, 0x252000) =
0x105B99000 0

98962/0x5a031:  mmap(0x105BAC000, 0x8FED4, 0x1, 0x12, 0x3, 0x264000) =
0x105BAC000 0

98962/0x5a031:  fcntl(0x3, 0x2C, 0x7FFEEA70F9D0) = 0 0

98962/0x5a031:  close(0x3) = 0 0

98962/0x5a031:  stat64("/usr/local/opt/yajl/lib/libyajl.2.dylib\0",
0x7FFEEA717C00, 0x0) = 0 0

98962/0x5a031:  stat64("/usr/local/opt/yajl/lib/libyajl.2.dylib\0",
0x7FFEEA718040, 0x0) = 0 0

98962/0x5a031:  open("/usr/local/opt/yajl/lib/libyajl.2.dylib\0", 0x0, 0x0)
= 3 0

dtrace: error on enabled probe ID 2189 (ID 468: syscall::pread:return):
invalid kernel access in action #13 at DIF offset 20

98962/0x5a031:  fcntl(0x3, 0x62, 0x7FFEEA70F7D0) = 0 0

98962/0x5a031:  mmap(0x10557B000, 0x7000, 0x5, 0x12, 0x3, 0x0) =
0x10557B000 0

98962/0x5a031:  mmap(0x105582000, 0x1000, 0x3, 0x12, 0x3, 0x7000) =
0x105582000 0

98962/0x5a031:  mmap(0x105583000, 0x1150, 0x1, 0x12, 0x3, 0x8000) =
0x105583000 0

98962/0x5a031:  fcntl(0x3, 0x2C, 0x7FFEEA70F9D0) = 0 0

98962/0x5a031:  close(0x3) = 0 0

98962/0x5a031:  stat64("/usr/lib/libSystem.B.dylib\0", 0x7FFEEA718040, 0x0)
= 0 0

98962/0x5a031:  stat64("/usr/lib/libsasl2.2.dylib\0", 0x7FFEEA718040, 0x0)
= 0 0

98962/0x5a031:  stat64("/usr/local/opt/gnutls/lib/libgnutls.30.dylib\0",
0x7FFEEA717C00, 0x0) = 0 0

98962/0x5a031:  stat64("/usr/local/opt/gnutls/lib/libgnutls.30.dylib\0",
0x7FFEEA718040, 0x0) = 0 0

98962/0x5a031:  open("/usr/local/opt/gnutls/lib/libgnutls.30.dylib\0", 0x0,
0x0 = 3 0

dtrace: error on enabled probe ID 2189 (ID 468: syscall::pread:return):
invalid kernel access in action #13 at DIF offset 20

98962/0x5a031:  fcntl(0x3, 0x62, 0x7FFEEA70F7D0) = 0 0

98962/0x5a031:  mmap(0x105585000, 0x135000, 0x5, 0x12, 0x3, 0x0) =
0x105585000 0

98962/0x5a031:  mmap(0x1056BA000, 0xF000, 0x3, 0x12, 0x3, 0x135000) =
0x1056BA000 0

98962/0x5a031:  mmap(0x1056CA000, 0x31E5C, 0x1, 0x12, 0x3, 0x144000) =
0x1056CA000 0

98962/0x5a031:  fcntl(0x3, 0x2C, 0x7FFEEA70F9D0) = 0 0

98962/0x5a031:  madvise(0x1056CA000, 0x2000, 0x2) = 0 0

98962/0x5a031:  close(0x3) = 0 0

98962/0x5a031:  stat64("/usr/lib/libcurl.4.dylib\0", 0x7FFEEA718040, 0x0) =
0 0

98962/0x5a031:  stat64("/usr/lib/libxml2.2.dylib\0", 0x7FFEEA718040, 0x0) =
0 0

98962/0x5a031:  stat64("/usr/lib/system/libcache.dylib\0", 0x7FFEEA717900,
0x0) = 0 0

98962/0x5a031:  stat64("/usr/lib/system/libcommonCrypto.dylib\0",
0x7FFEEA717900, 0x0) = 0 0

98962/0x5a031:  stat64("/usr/lib/system/libcompiler_rt.dylib\0",
0x7FFEEA717900, 0x0) = 0 0

98962/0x5a031:  stat64("/usr/lib/system/libcopyfile.dylib\0",
0x7FFEEA717900, 0x0) = 0 0

98962/0x5a031:  stat64("/usr/lib/system/libcorecrypto.dylib\0",
0x7FFEEA717900, 0x0) = 0 0

98962/0x5a031:  stat64("/usr/lib/system/libdispatch.dylib\0",
0x7FFEEA717900, 0x0) = 0 0

98962/0x5a031:  stat64("/usr/lib/system/libdyld.dylib\0", 0x7FFEEA717900,
0x0) = 0 0

98962/0x5a031:  stat64("/usr/lib/system/libkeymgr.dylib\0", 0x7FFEEA717900,
0x0 = 0 0

98962/0x5a031:  stat64("/usr/lib/system/liblaunch.dylib\0", 0x7FFEEA717900,
0x0 = 0 0

98962/0x5a031:  stat64("/usr/lib/system/libmacho.dylib\0", 0x7FFEEA717900,
0x0) = 0 0

98962/0x5a031:  stat64("/usr/lib/system/libquarantine.dylib\0",
0x7FFEEA717900, 0x0) = 0 0

98962/0x5a031:  stat64("/usr/lib/system/libremovefile.dylib\0",
0x7FFEEA717900, 0x0) = 0 0

98962/0x5a031:  stat64("/usr/lib/system/libsystem_asl.dylib\0",
0x7FFEEA717900, 0x0) = 0 0

98962/0x5a031:  stat64("/usr/lib/system/libsystem_blocks.dylib\0",
0x7FFEEA717900, 0x0) = 0 0

98962/0x5a031:  stat64("/usr/lib/system/libsystem_c.dylib\0",
0x7FFEEA717900, 0x0) = 0 0

98962/0x5a031:  stat64("/usr/lib/system/libsystem_configuration.dylib\0",
0x7FFEEA717900, 0x0) = 0 0

98962/0x5a031:  stat64("/usr/lib/system/libsystem_coreservices.dylib\0",
0x7FFEEA717900, 0x0) = 0 0

98962/0x5a031:  stat64("/usr/lib/system/libsystem_darwin.dylib\0",
0x7FFEEA717900, 0x0) = 0 0

98962/0x5a031:  stat64("/usr/lib/system/libsystem_dnssd.dylib\0",
0x7FFEEA717900, 0x0) = 0 0

98962/0x5a031:  stat64("/usr/lib/system/libsystem_info.dylib\0",
0x7FFEEA717900, 0x0) = 0 0

98962/0x5a031:  stat64("/usr/lib/system/libsystem_m.dylib\0",
0x7FFEEA717900, 0x0) = 0 0

98962/0x5a031:  stat64("/usr/lib/system/libsystem_malloc.dylib\0",
0x7FFEEA717900, 0x0) = 0 0

98962/0x5a031:
stat64("/usr/lib/system/libsystem_networkextension.dylib\0",
0x7FFEEA717900, 0x0) = 0 0

98962/0x5a031:  stat64("/usr/lib/system/libsystem_notify.dylib\0",
0x7FFEEA717900, 0x0) = 0 0

98962/0x5a031:  stat64("/usr/lib/system/libsystem_sandbox.dylib\0",
0x7FFEEA717900, 0x0) = 0 0

98962/0x5a031:  stat64("/usr/lib/system/libsystem_secinit.dylib\0",
0x7FFEEA717900, 0x0) = 0 0

98962/0x5a031:  stat64("/usr/lib/system/libsystem_kernel.dylib\0",
0x7FFEEA717900, 0x0) = 0 0

98962/0x5a031:  stat64("/usr/lib/system/libsystem_platform.dylib\0",
0x7FFEEA717900, 0x0) = 0 0

98962/0x5a031:  stat64("/usr/lib/system/libsystem_pthread.dylib\0",
0x7FFEEA717900, 0x0) = 0 0

98962/0x5a031:  stat64("/usr/lib/system/libsystem_symptoms.dylib\0",
0x7FFEEA717900, 0x0) = 0 0

98962/0x5a031:  stat64("/usr/lib/system/libsystem_trace.dylib\0",
0x7FFEEA717900, 0x0) = 0 0

98962/0x5a031:  stat64("/usr/lib/system/libunwind.dylib\0", 0x7FFEEA717900,
0x0 = 0 0

98962/0x5a031:  stat64("/usr/lib/system/libxpc.dylib\0", 0x7FFEEA717900,
0x0) = 0 0

98962/0x5a031:  stat64("/usr/lib/libobjc.A.dylib\0", 0x7FFEEA716C00, 0x0) =
0 0

98962/0x5a031:  stat64("/usr/lib/libc++abi.dylib\0", 0x7FFEEA7162E0, 0x0) =
0 0

98962/0x5a031:  stat64("/usr/lib/libc++.1.dylib\0", 0x7FFEEA7162E0, 0x0) =
0 0

98962/0x5a031:  stat64("/usr/lib/libicucore.A.dylib\0", 0x7FFEEA717CA0,
0x0) = 0 0

98962/0x5a031:  stat64("/usr/lib/libz.1.dylib\0", 0x7FFEEA717CA0, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/Frameworks/Security.framework/Versions/A/Security\0",
0x7FFEEA717C10, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation\0",
 0x7FFEEA717C10, 0x0) = 0 0

98962/0x5a031:  stat64("/usr/local/opt/p11-kit/lib/libp11-kit.0.dylib\0",
0x7FFEEA7177D0, 0x0) = 0 0

98962/0x5a031:  stat64("/usr/local/opt/p11-kit/lib/libp11-kit.0.dylib\0",
0x7FFEEA717C10, 0x0) = 0 0

98962/0x5a031:  open("/usr/local/opt/p11-kit/lib/libp11-kit.0.dylib\0",
0x0, 0x0) = 3 0

dtrace: error on enabled probe ID 2189 (ID 468: syscall::pread:return):
invalid kernel access in action #13 at DIF offset 20

98962/0x5a031:  fcntl(0x3, 0x62, 0x7FFEEA70F3A0) = 0 0

98962/0x5a031:  mmap(0x1056FC000, 0xA8000, 0x5, 0x12, 0x3, 0x0) =
0x1056FC000 0

98962/0x5a031:  mmap(0x1057A4000, 0x14000, 0x3, 0x12, 0x3, 0xA8000) =
0x1057A4000 0

98962/0x5a031:  mmap(0x1057B8000, 0x34AB8, 0x1, 0x12, 0x3, 0xBC000) =
0x1057B8000 0

98962/0x5a031:  fcntl(0x3, 0x2C, 0x7FFEEA70F5A0) = 0 0

98962/0x5a031:  close(0x3) = 0 0

98962/0x5a031:
stat64("/usr/local/opt/libunistring/lib/libunistring.2.dylib\0",
0x7FFEEA7177D0, 0x0) = 0 0

98962/0x5a031:
stat64("/usr/local/opt/libunistring/lib/libunistring.2.dylib\0",
0x7FFEEA717C10, 0x0) = 0 0

98962/0x5a031:
open("/usr/local/opt/libunistring/lib/libunistring.2.dylib\0", 0x0, 0x0) =
3 0

dtrace: error on enabled probe ID 2189 (ID 468: syscall::pread:return):
invalid kernel access in action #13 at DIF offset 20

98962/0x5a031:  fcntl(0x3, 0x62, 0x7FFEEA70F3A0) = 0 0

98962/0x5a031:  mmap(0x105C3C000, 0x164000, 0x5, 0x12, 0x3, 0x0) =
0x105C3C000 0

98962/0x5a031:  mmap(0x105DA0000, 0x3000, 0x3, 0x12, 0x3, 0x164000) =
0x105DA0000 0

98962/0x5a031:  mmap(0x105DA3000, 0xE130, 0x1, 0x12, 0x3, 0x167000) =
0x105DA3000 0

98962/0x5a031:  fcntl(0x3, 0x2C, 0x7FFEEA70F5A0) = 0 0

98962/0x5a031:  close(0x3) = 0 0

98962/0x5a031:  stat64("/usr/local/opt/libtasn1/lib/libtasn1.6.dylib\0",
0x7FFEEA7177D0, 0x0) = 0 0

98962/0x5a031:  stat64("/usr/local/opt/libtasn1/lib/libtasn1.6.dylib\0",
0x7FFEEA717C10, 0x0) = 0 0

98962/0x5a031:  open("/usr/local/opt/libtasn1/lib/libtasn1.6.dylib\0", 0x0,
0x0 = 3 0

dtrace: error on enabled probe ID 2189 (ID 468: syscall::pread:return):
invalid kernel access in action #13 at DIF offset 20

98962/0x5a031:  fcntl(0x3, 0x62, 0x7FFEEA70F3A0) = 0 0

98962/0x5a031:  mmap(0x1057ED000, 0xC000, 0x5, 0x12, 0x3, 0x0) =
0x1057ED000 0

98962/0x5a031:  mmap(0x1057F9000, 0x1000, 0x3, 0x12, 0x3, 0xC000) =
0x1057F9000 0

98962/0x5a031:  mmap(0x1057FA000, 0x19A8, 0x1, 0x12, 0x3, 0xD000) =
0x1057FA000 0

98962/0x5a031:  fcntl(0x3, 0x2C, 0x7FFEEA70F5A0) = 0 0

98962/0x5a031:  close(0x3) = 0 0

98962/0x5a031:  stat64("/usr/local/opt/nettle/lib/libnettle.6.dylib\0",
0x7FFEEA7177D0, 0x0) = 0 0

98962/0x5a031:  stat64("/usr/local/opt/nettle/lib/libnettle.6.dylib\0",
0x7FFEEA717C10, 0x0) = 0 0

98962/0x5a031:  open("/usr/local/opt/nettle/lib/libnettle.6.dylib\0", 0x0,
0x0) = 3 0

dtrace: error on enabled probe ID 2189 (ID 468: syscall::pread:return):
invalid kernel access in action #13 at DIF offset 20

98962/0x5a031:  fcntl(0x3, 0x62, 0x7FFEEA70F3A0) = 0 0

98962/0x5a031:  mmap(0x1057FC000, 0x26000, 0x5, 0x12, 0x3, 0x0) =
0x1057FC000 0

98962/0x5a031:  mmap(0x105822000, 0x1000, 0x3, 0x12, 0x3, 0x26000) =
0x105822000 0

98962/0x5a031:  mmap(0x105823000, 0x7B10, 0x1, 0x12, 0x3, 0x27000) =
0x105823000 0

98962/0x5a031:  fcntl(0x3, 0x2C, 0x7FFEEA70F5A0) = 0 0

98962/0x5a031:  close(0x3) = 0 0

98962/0x5a031:  stat64("/usr/local/opt/nettle/lib/libhogweed.4.dylib\0",
0x7FFEEA7177D0, 0x0) = 0 0

98962/0x5a031:  stat64("/usr/local/opt/nettle/lib/libhogweed.4.dylib\0",
0x7FFEEA717C10, 0x0) = 0 0

98962/0x5a031:  open("/usr/local/opt/nettle/lib/libhogweed.4.dylib\0", 0x0,
0x0 = 3 0

dtrace: error on enabled probe ID 2189 (ID 468: syscall::pread:return):
invalid kernel access in action #13 at DIF offset 20

98962/0x5a031:  fcntl(0x3, 0x62, 0x7FFEEA70F3A0) = 0 0

98962/0x5a031:  mmap(0x10582B000, 0x2A000, 0x5, 0x12, 0x3, 0x0) =
0x10582B000 0

98962/0x5a031:  mmap(0x105855000, 0x1000, 0x3, 0x12, 0x3, 0x2A000) =
0x105855000 0

98962/0x5a031:  mmap(0x105856000, 0x65E0, 0x1, 0x12, 0x3, 0x2B000) =
0x105856000 0

98962/0x5a031:  fcntl(0x3, 0x2C, 0x7FFEEA70F5A0) = 0 0

98962/0x5a031:  close(0x3) = 0 0

98962/0x5a031:  stat64("/usr/local/opt/gmp/lib/libgmp.10.dylib\0",
0x7FFEEA7177D0, 0x0) = 0 0

98962/0x5a031:  stat64("/usr/local/opt/gmp/lib/libgmp.10.dylib\0",
0x7FFEEA717C10, 0x0) = 0 0

98962/0x5a031:  open("/usr/local/opt/gmp/lib/libgmp.10.dylib\0", 0x0, 0x0)
= 3 0

dtrace: error on enabled probe ID 2189 (ID 468: syscall::pread:return):
invalid kernel access in action #13 at DIF offset 20

98962/0x5a031:  fcntl(0x3, 0x62, 0x7FFEEA70F3A0) = 0 0

98962/0x5a031:  mmap(0x105DB2000, 0x5D000, 0x5, 0x12, 0x3, 0x0) =
0x105DB2000 0

98962/0x5a031:  mmap(0x105E0F000, 0x1000, 0x3, 0x12, 0x3, 0x5D000) =
0x105E0F000 0

98962/0x5a031:  mmap(0x105E10000, 0x92DC, 0x1, 0x12, 0x3, 0x5E000) =
0x105E10000 0

98962/0x5a031:  fcntl(0x3, 0x2C, 0x7FFEEA70F5A0) = 0 0

98962/0x5a031:  close(0x3) = 0 0

98962/0x5a031:
stat64("/System/Library/Frameworks/Foundation.framework/Versions/C/Foundation\0",
0x7FFEEA7179C0, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/PrivateFrameworks/AppleFSCompression.framework/Versions/A/AppleFSCompression\0",
 0x7FFEEA7179C0, 0x0) = 0 0

98962/0x5a031:  stat64("/usr/lib/libDiagnosticMessagesClient.dylib\0",
0x7FFEEA7179C0, 0x0) = 0 0

98962/0x5a031:  stat64("/usr/lib/libOpenScriptingUtil.dylib\0",
0x7FFEEA7179C0, 0x0) = 0 0

98962/0x5a031:  stat64("/usr/lib/libauto.dylib\0", 0x7FFEEA7179C0, 0x0) = 0
0

98962/0x5a031:  stat64("/usr/lib/libbsm.0.dylib\0", 0x7FFEEA7179C0, 0x0) =
0 0

98962/0x5a031:  stat64("/usr/lib/libcoretls.dylib\0", 0x7FFEEA7179C0, 0x0)
= 0 0

98962/0x5a031:  stat64("/usr/lib/libcoretls_cfhelpers.dylib\0",
0x7FFEEA7179C0, 0x0) = 0 0

98962/0x5a031:  stat64("/usr/lib/libpam.2.dylib\0", 0x7FFEEA7179C0, 0x0) =
0 0

98962/0x5a031:  stat64("/usr/lib/libsqlite3.dylib\0", 0x7FFEEA7179C0, 0x0)
= 0 0

98962/0x5a031:  stat64("/usr/lib/libxar.1.dylib\0", 0x7FFEEA7179C0, 0x0) =
0 0

98962/0x5a031:
stat64("/System/Library/Frameworks/IOKit.framework/Versions/A/IOKit\0",
0x7FFEEA7179C0, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/Frameworks/DiskArbitration.framework/Versions/A/DiskArbitration\0",
 0x7FFEEA717790, 0x0) = 0 0

98962/0x5a031:  stat64("/usr/lib/libarchive.2.dylib\0", 0x7FFEEA717790,
0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/Frameworks/CFNetwork.framework/Versions/A/CFNetwork\0",
0x7FFEEA717790, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/Frameworks/SystemConfiguration.framework/Versions/A/SystemConfiguration\0",
 0x7FFEEA717790, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/Frameworks/CoreServices.framework/Versions/A/CoreServices\0",
0x7FFEEA717790, 0x0) = 0 0

98962/0x5a031:  stat64("/usr/lib/liblangid.dylib\0", 0x7FFEEA717790, 0x0) =
0 0

98962/0x5a031:  stat64("/usr/lib/libCRFSuite.dylib\0", 0x7FFEEA717790, 0x0)
= 0 0

98962/0x5a031:  stat64("/usr/lib/libenergytrace.dylib\0", 0x7FFEEA717520,
0x0) = 0 0

98962/0x5a031:  stat64("/usr/lib/system/libkxld.dylib\0", 0x7FFEEA717520,
0x0) = 0 0

98962/0x5a031:  stat64("/usr/lib/libbz2.1.0.dylib\0", 0x7FFEEA717660, 0x0)
= 0 0

98962/0x5a031:  stat64("/usr/lib/liblzma.5.dylib\0", 0x7FFEEA717660, 0x0) =
0 0

98962/0x5a031:  stat64("/usr/lib/libnetwork.dylib\0", 0x7FFEEA717570, 0x0)
= 0 0

98962/0x5a031:  stat64("/usr/lib/libapple_nghttp2.dylib\0", 0x7FFEEA717570,
0x0 = 0 0

98962/0x5a031:  stat64("/usr/lib/libpcap.A.dylib\0", 0x7FFEEA7172F0, 0x0) =
0 0

98962/0x5a031:
stat64("/System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/FSEvents.framework/Versions/A/FSEvents\0",
 0x7FFEEA7175C0, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/CarbonCore.framework/Versions/A/CarbonCore\0",
 0x7FFEEA7175C0, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/Metadata.framework/Versions/A/Metadata\0",
 0x7FFEEA7175C0, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/OSServices.framework/Versions/A/OSServices\0",
 0x7FFEEA7175C0, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/SearchKit.framework/Versions/A/SearchKit\0",
 0x7FFEEA7175C0, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/AE.framework/Versions/A/AE\0",
 0x7FFEEA7175C0, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/LaunchServices.framework/Versions/A/LaunchServices\0",
 0x7FFEEA7175C0, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/DictionaryServices.framework/Versions/A/DictionaryServices\0",
 0x7FFEEA7175C0, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/SharedFileList.framework/Versions/A/SharedFileList\0",
 0x7FFEEA7175C0, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/Frameworks/NetFS.framework/Versions/A/NetFS\0",
0x7FFEEA717420, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/PrivateFrameworks/NetAuth.framework/Versions/A/NetAuth\0",
0x7FFEEA7172B0, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/PrivateFrameworks/login.framework/Versions/A/Frameworks/loginsupport.framework/Versions/A/loginsupport\0",
 0x7FFEEA7171B0, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/PrivateFrameworks/TCC.framework/Versions/A/TCC\0",
0x7FFEEA7173F0, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/PrivateFrameworks/CoreNLP.framework/Versions/A/CoreNLP\0",
0x7FFEEA7173F0, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/PrivateFrameworks/MetadataUtilities.framework/Versions/A/MetadataUtilities\0",
 0x7FFEEA7173F0, 0x0) = 0 0

98962/0x5a031:  stat64("/usr/lib/libmecabra.dylib\0", 0x7FFEEA7173F0, 0x0)
= 0 0

98962/0x5a031:
stat64("/System/Library/Frameworks/ApplicationServices.framework/Versions/A/ApplicationServices\0",
 0x7FFEEA7172B0, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/Frameworks/CoreGraphics.framework/Versions/A/CoreGraphics\0",
0x7FFEEA7170C0, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/Frameworks/CoreText.framework/Versions/A/CoreText\0",
0x7FFEEA7170C0, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/Frameworks/ImageIO.framework/Versions/A/ImageIO\0",
0x7FFEEA7170C0, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/Frameworks/ColorSync.framework/Versions/A/ColorSync\0",
0x7FFEEA7170C0, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ATS.framework/Versions/A/ATS\0",
 0x7FFEEA7170C0, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ColorSyncLegacy.framework/Versions/A/ColorSyncLegacy\0",
 0x7FFEEA7170C0, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/HIServices.framework/Versions/A/HIServices\0",
 0x7FFEEA7170C0, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/LangAnalysis.framework/Versions/A/LangAnalysis\0",
 0x7FFEEA7170C0, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/PrintCore.framework/Versions/A/PrintCore\0",
 0x7FFEEA7170C0, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/QD.framework/Versions/A/QD\0",
 0x7FFEEA7170C0, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/SpeechSynthesis.framework/Versions/A/SpeechSynthesis\0",
 0x7FFEEA7170C0, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/PrivateFrameworks/SkyLight.framework/Versions/A/SkyLight\0",
0x7FFEEA716F20, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/Frameworks/IOSurface.framework/Versions/A/IOSurface\0",
0x7FFEEA716F20, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/Frameworks/Accelerate.framework/Versions/A/Accelerate\0",
0x7FFEEA716F20, 0x0) = 0 0

98962/0x5a031:  stat64("/usr/lib/libcompression.dylib\0", 0x7FFEEA716C70,
0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/Frameworks/CoreDisplay.framework/Versions/A/CoreDisplay\0",
0x7FFEEA716C70, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/Frameworks/Metal.framework/Versions/A/Metal\0",
0x7FFEEA716C70, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/Frameworks/MetalPerformanceShaders.framework/Versions/A/MetalPerformanceShaders\0",
 0x7FFEEA716C70, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/PrivateFrameworks/MultitouchSupport.framework/Versions/A/MultitouchSupport\0",
 0x7FFEEA716C70, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/Frameworks/QuartzCore.framework/Versions/A/QuartzCore\0",
0x7FFEEA716C70, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vImage.framework/Versions/A/vImage\0",
 0x7FFEEA716B70, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/vecLib\0",
 0x7FFEEA716B70, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libvMisc.dylib\0",
 0x7FFEEA7169D0, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libvDSP.dylib\0",
 0x7FFEEA7169D0, 0x0 = 0 0

98962/0x5a031:
stat64("/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libBLAS.dylib\0",
 0x7FFEEA7169D0, 0x0 = 0 0

98962/0x5a031:
stat64("/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libLAPACK.dylib\0",
 0x7FFEEA7169D0, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libLinearAlgebra.dylib\0",
 0x7FFEEA7169D0, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libSparseBLAS.dylib\0",
 0x7FFEEA7169D0, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libQuadrature.dylib\0",
 0x7FFEEA7169D0, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libBNNS.dylib\0",
 0x7FFEEA7169D0, 0x0 = 0 0

98962/0x5a031:
stat64("/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libSparse.dylib\0",
 0x7FFEEA7169D0, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/PrivateFrameworks/GPUWrangler.framework/Versions/A/GPUWrangler\0",
 0x7FFEEA716A20, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/PrivateFrameworks/IOAccelerator.framework/Versions/A/IOAccelerator\0",
 0x7FFEEA716A20, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/PrivateFrameworks/IOPresentment.framework/Versions/A/IOPresentment\0",
 0x7FFEEA716A20, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/PrivateFrameworks/DSExternalDisplay.framework/Versions/A/DSExternalDisplay\0",
 0x7FFEEA716A20, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libCoreFSCache.dylib\0",
 0x7FFEEA716880, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/Frameworks/MetalPerformanceShaders.framework/Frameworks/MPSCore.framework/Versions/A/MPSCore\0",
 0x7FFEEA716AE0, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/Frameworks/MetalPerformanceShaders.framework/Frameworks/MPSImage.framework/Versions/A/MPSImage\0",
 0x7FFEEA716AE0, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/Frameworks/MetalPerformanceShaders.framework/Frameworks/MPSNeuralNetwork.framework/Versions/A/MPSNeuralNetwork\0",
 0x7FFEEA716AE0, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/Frameworks/MetalPerformanceShaders.framework/Frameworks/MPSMatrix.framework/Versions/A/MPSMatrix\0",
 0x7FFEEA716AE0, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/Frameworks/MetalPerformanceShaders.framework/Frameworks/MPSRayIntersector.framework/Versions/A/MPSRayIntersector\0",
 0x7FFEEA716AE0, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/PrivateFrameworks/MetalTools.framework/Versions/A/MetalTools\0",
 0x7FFEEA716950, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/PrivateFrameworks/AggregateDictionary.framework/Versions/A/AggregateDictionary\0",
 0x7FFEEA716950, 0x0) = 0 0

98962/0x5a031:  stat64("/usr/lib/libMobileGestalt.dylib\0", 0x7FFEEA7167F0,
0x0 = 0 0

98962/0x5a031:
stat64("/System/Library/Frameworks/CoreImage.framework/Versions/A/CoreImage\0",
0x7FFEEA716A20, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/Frameworks/CoreVideo.framework/Versions/A/CoreVideo\0",
0x7FFEEA716A20, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/Frameworks/OpenGL.framework/Versions/A/OpenGL\0",
0x7FFEEA716A20, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/PrivateFrameworks/GraphVisualizer.framework/Versions/A/GraphVisualizer\0",
 0x7FFEEA716790, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/PrivateFrameworks/FaceCore.framework/Versions/A/FaceCore\0",
0x7FFEEA716790, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/Frameworks/OpenCL.framework/Versions/A/OpenCL\0",
0x7FFEEA716790, 0x0) = 0 0

98962/0x5a031:  stat64("/usr/lib/libFosl_dynamic.dylib\0", 0x7FFEEA716790,
0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/PrivateFrameworks/OTSVG.framework/Versions/A/OTSVG\0",
0x7FFEEA716590, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ATS.framework/Versions/A/Resources/libFontParser.dylib\0",
 0x7FFEEA716590, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ATS.framework/Versions/A/Resources/libFontRegistry.dylib\0",
 0x7FFEEA716590, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/Frameworks/ImageIO.framework/Versions/A/Resources/libJPEG.dylib\0",
 0x7FFEEA716170, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/Frameworks/ImageIO.framework/Versions/A/Resources/libTIFF.dylib\0",
 0x7FFEEA716170, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/Frameworks/ImageIO.framework/Versions/A/Resources/libPng.dylib\0",
 0x7FFEEA716170, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/Frameworks/ImageIO.framework/Versions/A/Resources/libGIF.dylib\0",
 0x7FFEEA716170, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/Frameworks/ImageIO.framework/Versions/A/Resources/libJP2.dylib\0",
 0x7FFEEA716170, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/Frameworks/ImageIO.framework/Versions/A/Resources/libRadiance.dylib\0",
 0x7FFEEA716170, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/PrivateFrameworks/AppleJPEG.framework/Versions/A/AppleJPEG\0",
 0x7FFEEA716170, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libGFXShared.dylib\0",
 0x7FFEEA716460, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libGLU.dylib\0",
 0x7FFEEA716260, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libGL.dylib\0",
 0x7FFEEA716260, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libGLImage.dylib\0",
 0x7FFEEA7160D0, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libCVMSPluginSupport.dylib\0",
 0x7FFEEA715FD0, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libCoreVMClient.dylib\0",
 0x7FFEEA715EC0, 0x0) = 0 0

98962/0x5a031:  stat64("/usr/lib/libcups.2.dylib\0", 0x7FFEEA716E70, 0x0) =
0 0

98962/0x5a031:
stat64("/System/Library/Frameworks/Kerberos.framework/Versions/A/Kerberos\0",
0x7FFEEA716CE0, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/Frameworks/GSS.framework/Versions/A/GSS\0",
0x7FFEEA716CE0, 0x0) = 0 0

98962/0x5a031:  stat64("/usr/lib/libresolv.9.dylib\0", 0x7FFEEA716CE0, 0x0)
= 0 0

98962/0x5a031:  stat64("/usr/lib/libiconv.2.dylib\0", 0x7FFEEA716CE0, 0x0)
= 0 0

98962/0x5a031:
stat64("/System/Library/PrivateFrameworks/Heimdal.framework/Versions/A/Heimdal\0",
0x7FFEEA716BD0, 0x0) = 0 0

98962/0x5a031:  stat64("/usr/lib/libheimdal-asn1.dylib\0", 0x7FFEEA716A00,
0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/Frameworks/OpenDirectory.framework/Versions/A/OpenDirectory\0",
 0x7FFEEA716B50, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/PrivateFrameworks/CommonAuth.framework/Versions/A/CommonAuth\0",
 0x7FFEEA716B50, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/Frameworks/OpenDirectory.framework/Versions/A/Frameworks/CFOpenDirectory.framework/Versions/A/CFOpenDirectory\0",
 0x7FFEEA7169E0, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/Frameworks/SecurityFoundation.framework/Versions/A/SecurityFoundation\0",
 0x7FFEEA7169E0, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/PrivateFrameworks/APFS.framework/Versions/A/APFS\0",
0x7FFEEA7168A0, 0x0) = 0 0

98962/0x5a031:  stat64("/usr/lib/libutil.dylib\0", 0x7FFEEA716790, 0x0) = 0
0

98962/0x5a031:  stat64("/usr/lib/libcharset.1.dylib\0", 0x7FFEEA716C00,
0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/Frameworks/CoreAudio.framework/Versions/A/CoreAudio\0",
0x7FFEEA716F50, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/Frameworks/AudioToolbox.framework/Versions/A/AudioToolbox\0",
0x7FFEEA716F50, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/PrivateFrameworks/AppleSauce.framework/Versions/A/AppleSauce\0",
 0x7FFEEA716DE0, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/PrivateFrameworks/AssertionServices.framework/Versions/A/AssertionServices\0",
 0x7FFEEA716DE0, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/PrivateFrameworks/BaseBoard.framework/Versions/A/BaseBoard\0",
 0x7FFEEA716CB0, 0x0) = 0 0

98962/0x5a031:  stat64("/usr/lib/libmecab.1.0.0.dylib\0", 0x7FFEEA717250,
0x0) = 0 0

98962/0x5a031:  stat64("/usr/lib/libgermantok.dylib\0", 0x7FFEEA717250,
0x0) = 0 0

98962/0x5a031:  stat64("/usr/lib/libThaiTokenizer.dylib\0", 0x7FFEEA717250,
0x0 = 0 0

98962/0x5a031:  stat64("/usr/lib/libChineseTokenizer.dylib\0",
0x7FFEEA717250, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/PrivateFrameworks/LanguageModeling.framework/Versions/A/LanguageModeling\0",
 0x7FFEEA717110, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/PrivateFrameworks/CoreEmoji.framework/Versions/A/CoreEmoji\0",
 0x7FFEEA716F40, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/PrivateFrameworks/Lexicon.framework/Versions/A/Lexicon\0",
0x7FFEEA716F40, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/PrivateFrameworks/LinguisticData.framework/Versions/A/LinguisticData\0",
 0x7FFEEA716F40, 0x0) = 0 0

98962/0x5a031:  stat64("/usr/lib/libcmph.dylib\0", 0x7FFEEA716F40, 0x0) = 0
0

98962/0x5a031:
stat64("/System/Library/Frameworks/CoreData.framework/Versions/A/CoreData\0",
0x7FFEEA7171C0, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/Frameworks/ServiceManagement.framework/Versions/A/ServiceManagement\0",
 0x7FFEEA717220, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/PrivateFrameworks/BackgroundTaskManagement.framework/Versions/A/BackgroundTaskManagement\0",
 0x7FFEEA7170C0, 0x0) = 0 0

98962/0x5a031:  stat64("/usr/lib/libxslt.1.dylib\0", 0x7FFEEA7173C0, 0x0) =
0 0

98962/0x5a031:  stat64("/usr/local/opt/libffi/lib/libffi.6.dylib\0",
0x7FFEEA7176F0, 0x0) = 0 0

98962/0x5a031:  stat64("/usr/local/opt/libffi/lib/libffi.6.dylib\0",
0x7FFEEA717B30, 0x0) = 0 0

98962/0x5a031:  open("/usr/local/opt/libffi/lib/libffi.6.dylib\0", 0x0,
0x0) = 3 0

dtrace: error on enabled probe ID 2189 (ID 468: syscall::pread:return):
invalid kernel access in action #13 at DIF offset 20

98962/0x5a031:  fcntl(0x3, 0x62, 0x7FFEEA70F2C0) = 0 0

98962/0x5a031:  mmap(0x10585D000, 0x5000, 0x5, 0x12, 0x3, 0x0) =
0x10585D000 0

98962/0x5a031:  mmap(0x105862000, 0x1000, 0x3, 0x12, 0x3, 0x5000) =
0x105862000 0

98962/0x5a031:  mmap(0x105863000, 0x10AC, 0x1, 0x12, 0x3, 0x6000) =
0x105863000 0

98962/0x5a031:  fcntl(0x3, 0x2C, 0x7FFEEA70F4C0) = 0 0

98962/0x5a031:  close(0x3) = 0 0

98962/0x5a031:
stat64("/usr/local/Cellar/nettle/3.4.1/lib/libnettle.6.dylib\0",
0x7FFEEA7176D0, 0x0) = 0 0

98962/0x5a031:
stat64("/usr/local/Cellar/nettle/3.4.1/lib/libnettle.6.dylib\0",
0x7FFEEA717B10, 0x0) = 0 0

98962/0x5a031:  stat64("/usr/lib/libcrypto.42.dylib\0", 0x7FFEEA717C40,
0x0) = 0 0

98962/0x5a031:  stat64("/usr/lib/libssl.44.dylib\0", 0x7FFEEA717C40, 0x0) =
0 0

98962/0x5a031:
stat64("/System/Library/Frameworks/LDAP.framework/Versions/A/LDAP\0",
0x7FFEEA717C40, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/PrivateFrameworks/TrustEvaluationAgent.framework/Versions/A/TrustEvaluationAgent\0",
 0x7FFEEA717B60, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/PrivateFrameworks/CoreDaemon.framework/Versions/B/CoreDaemon\0",
 0x7FFEEA717AD0, 0x0) = 0 0

98962/0x5a031:
stat64("/System/Library/PrivateFrameworks/AppleSRP.framework/Versions/A/AppleSRP\0",
0x7FFEEA717960, 0x0) = 0 0

98962/0x5a031:  open("/dev/dtracehelper\0", 0x2, 0xFFFFFFFFEA718E90) = 3 0

98962/0x5a031:  ioctl(0x3, 0x80086804, 0x7FFEEA718CA0) = 0 0

98962/0x5a031:  close(0x3) = 0 0

98962/0x5a031:  madvise(0x1056CA000, 0x2000, 0x5) = 0 0

98962/0x5a031:  madvise(0x10554C000, 0x2000, 0x5) = 0 0

98962/0x5a031:  access("/AppleInternal/XBS/.isChrooted\0", 0x0, 0x0) = -1
Err#2

98962/0x5a031:  bsdthread_register(0x7FFF6722B408, 0x7FFF6722B3F8, 0x2000)
= 1073742047 0

98962/0x5a031:  sysctlbyname(kern.bootargs, 0xD, 0x7FFEEA7165B0,
0x7FFEEA7165A8, 0x0) = 0 0

98962/0x5a031:  ioctl(0x2, 0x4004667A, 0x7FFEEA716834) = 0 0

98962/0x5a031:  mprotect(0x105E1A000, 0x1000, 0x0) = 0 0

98962/0x5a031:  mprotect(0x105E21000, 0x1000, 0x0) = 0 0

98962/0x5a031:  mprotect(0x105E22000, 0x1000, 0x0) = 0 0

98962/0x5a031:  mprotect(0x105E29000, 0x1000, 0x0) = 0 0

98962/0x5a031:  mprotect(0x105568000, 0x90, 0x1) = 0 0

98962/0x5a031:  mprotect(0x10556A000, 0x1000, 0x1) = 0 0

98962/0x5a031:  mprotect(0x105568000, 0x90, 0x3) = 0 0

98962/0x5a031:  mprotect(0x105568000, 0x90, 0x1) = 0 0

98962/0x5a031:  issetugid(0x0, 0x0, 0x0) = 0 0

98962/0x5a031:  getentropy(0x7FFEEA713E00, 0x20, 0x0) = 0 0

98962/0x5a031:  getpid(0x0, 0x0, 0x0) = 98962 0

98962/0x5a031:  stat64("/AppleInternal\0", 0x7FFEEA716A20, 0x0) = -1 Err#2

98962/0x5a031:  csops(0x18292, 0x7, 0x7FFEEA716550) = -1 Err#22

98962/0x5a031:  proc_info(0x2, 0x18292, 0xD) = 64 0

98962/0x5a031:  csops(0x18292, 0x7, 0x7FFEEA715DA0) = -1 Err#22

98962/0x5a031:  geteuid(0x0, 0x0, 0x0) = 502 0

98962/0x5a031:  getuid(0x0, 0x0, 0x0) = 502 0

dtrace: error on enabled probe ID 2198 (ID 566: syscall::sysctl:return):
invalid kernel access in action #11 at DIF offset 28

98962/0x5a031:  gettid(0x7FFEEA715408, 0x7FFEEA71540C, 0x0) = -1 Err#3

98962/0x5a031:  geteuid(0x0, 0x0, 0x0) = 502 0

98962/0x5a031:  getegid(0x0, 0x0, 0x0) = 20 0

98962/0x5a031:  getuid(0x0, 0x0, 0x0) = 502 0

98962/0x5a031:  getgid(0x0, 0x0, 0x0) = 20 0

98962/0x5a031:  geteuid(0x0, 0x0, 0x0) = 502 0

98962/0x5a031:  getegid(0x0, 0x0, 0x0) = 20 0

98962/0x5a031:  issetugid(0x0, 0x0, 0x0) = 0 0

98962/0x5a031:  issetugid(0x0, 0x0, 0x0) = 0 0

98962/0x5a031:  issetugid(0x0, 0x0, 0x0) = 0 0

98962/0x5a031:  issetugid(0x0, 0x0, 0x0) = 0 0

98962/0x5a031:  stat64("/etc/gnutls/default-priorities\0", 0x7FFEEA716A78,
0x0) = -1 Err#2

98962/0x5a031:
stat64("/System/Library/PrivateFrameworks/Heimdal.framework/Heimdal\0",
0x7FFEEA715670, 0x0) = 0 0

98962/0x5a031:  stat64("/System/Library/Frameworks/GSS.framework/GSS\0",
0x7FFEEA715670, 0x0) = 0 0

98962/0x5a031:  ioctl(0x0, 0x4004667A, 0x7FFEEA719564) = 0 0

98962/0x5a031:  ioctl(0x0, 0x40487413, 0x7FFEEA7196B8) = 0 0

98962/0x5a031:  getuid(0x0, 0x0, 0x0) = 502 0

98962/0x5a031:  geteuid(0x0, 0x0, 0x0) = 502 0

dtrace: error on enabled probe ID 2198 (ID 566: syscall::sysctl:return):
invalid kernel access in action #11 at DIF offset 28

98962/0x5a031:  getrlimit(0x1008, 0x7FFEEA719270, 0x0) = 0 0

98962/0x5a031:  open_nocancel("/private/etc/ssl/openssl.cnf\0", 0x0, 0x1B6)
= 3 0

98962/0x5a031:  fstat64(0x3, 0x7FFEEA719108, 0x0) = 0 0

dtrace: error on enabled probe ID 2175 (ID 954:
syscall::read_nocancel:return): invalid kernel access in action #13 at DIF
offset 68

dtrace: error on enabled probe ID 2175 (ID 954:
syscall::read_nocancel:return): invalid kernel access in action #13 at DIF
offset 68

98962/0x5a031:  close_nocancel(0x3) = 0 0

98962/0x5a031:  socket(0x1E, 0x2, 0x0) = 3 0

98962/0x5a031:  close(0x3) = 0 0

98962/0x5a031:  issetugid(0x0, 0x0, 0x0) = 0 0

98962/0x5a031:  issetugid(0x0, 0x0, 0x0) = 0 0

98962/0x5a031:  pipe(0x0, 0x0, 0x0) = 3 0

98962/0x5a031:  fcntl(0x4, 0x3, 0x0) = 1 0

98962/0x5a031:  fcntl(0x4, 0x4, 0x5) = 0 0

98962/0x5a031:  fcntl(0x3, 0x3, 0x0) = 0 0

98962/0x5a031:  fcntl(0x3, 0x4, 0x4) = 0 0

98962/0x5a031:  fcntl(0x4, 0x1, 0x0) = 0 0

98962/0x5a031:  fcntl(0x4, 0x2, 0x1) = 0 0

98962/0x5a031:  fcntl(0x3, 0x1, 0x0) = 0 0

98962/0x5a031:  fcntl(0x3, 0x2, 0x1) = 0 0

98962/0x5a031:  bsdthread_create(0x10599EEC4, 0x7FB1E8C09440,
0x7000028AD000) = 42651648 0

98962/0x5a033:  thread_selfid(0x0, 0x0, 0x0) = 368691 0

98962/0x5a031:  geteuid(0x0, 0x0, 0x0) = 502 0

98962/0x5a031:  issetugid(0x0, 0x0, 0x0) = 0 0

98962/0x5a031:  geteuid(0x0, 0x0, 0x0) = 502 0

98962/0x5a031:  shm_open(0x7FFF6721ECD8, 0x0, 0x0) = 5 0

98962/0x5a031:  mmap(0x0, 0x1000, 0x1, 0x1, 0x5, 0x0) = 0x10556B000 0

98962/0x5a031:  close_nocancel(0x5) = 0 0

98962/0x5a031:  open_nocancel("/etc/.mdns_debug\0", 0x0, 0x0) = -1 Err#2

98962/0x5a031:  issetugid(0x0, 0x0, 0x0) = 0 0

98962/0x5a031:  issetugid(0x0, 0x0, 0x0) = 0 0

98962/0x5a031:  proc_info(0x2, 0x18292, 0x11) = 56 0

98962/0x5a031:  proc_info(0x2, 0x18292, 0x11) = 56 0

dtrace: error on enabled probe ID 2198 (ID 566: syscall::sysctl:return):
invalid kernel access in action #11 at DIF offset 28

98962/0x5a031:  issetugid(0x0, 0x0, 0x0) = 0 0

98962/0x5a031:  openat(0xFFFFFFFFFFFFFFFE,
"/Library/Preferences/Logging/com.apple.diagnosticd.filter.plist\0",
0x1000104, 0xFFFFFFFFEA718B40) = 5 0

98962/0x5a031:  lseek(0x5, 0x0, 0x2) = 62 0

dtrace: error on enabled probe ID 2189 (ID 468: syscall::pread:return):
invalid kernel access in action #13 at DIF offset 20

98962/0x5a031:  close(0x5) = 0 0

98962/0x5a031:  open("/usr/local/bin/virsh\0", 0x8004, 0x67267DD2) = 5 0

98962/0x5a031:  fcntl(0x5, 0x32, 0x7FFEEA718590) = 0 0

98962/0x5a031:  close(0x5) = 0 0

98962/0x5a031:  access("/Users/AB84394/.config/libvirt/libvirt.conf\0",
0x0, 0x0) = -1 Err#2

98962/0x5a031:  issetugid(0x0, 0x0, 0x0) = 0 0

98962/0x5a031:  geteuid(0x0, 0x0, 0x0) = 502 0

98962/0x5a031:  getuid(0x0, 0x0, 0x0) = 502 0

98962/0x5a031:  geteuid(0x0, 0x0, 0x0) = 502 0

98962/0x5a031:  getuid(0x0, 0x0, 0x0) = 502 0

98962/0x5a031:  geteuid(0x0, 0x0, 0x0) = 502 0

98962/0x5a031:  issetugid(0x0, 0x0, 0x0) = 0 0

98962/0x5a031:  issetugid(0x0, 0x0, 0x0) = 0 0

98962/0x5a031:  geteuid(0x0, 0x0, 0x0) = 502 0

98962/0x5a031:  issetugid(0x0, 0x0, 0x0) = 0 0

98962/0x5a031:  issetugid(0x0, 0x0, 0x0) = 0 0

98962/0x5a031:  issetugid(0x0, 0x0, 0x0) = 0 0

98962/0x5a031:  geteuid(0x0, 0x0, 0x0) = 502 0

98962/0x5a031:  stat64("/Users/AB84394/.cache/libvirt\0", 0x7FFEEA718FA0,
0x0) = 0 0

98962/0x5a031:  open("/Users/AB84394/.cache/libvirt/libvirtd.lock\0",
0x202, 0x180) = 5 0

98962/0x5a031:  fcntl(0x5, 0x1, 0xFFFFFFFFE8C09590) = 0 0

98962/0x5a031:  fcntl(0x5, 0x2, 0x1) = 0 0

98962/0x5a031:  fcntl(0x5, 0x9, 0x7FFEEA719058) = 0 0

98962/0x5a031:  socket(0x1, 0x1, 0x0) = 6 0

98962/0x5a031:  connect(0x6, 0x7FFEEA7190E0, 0x6A) = 0 0

98962/0x5a031:  getsockname(0x6, 0x7FFEEA719170, 0x7FFEEA7191F0) = 0 0

98962/0x5a031:  fcntl(0x6, 0x1, 0x5B6A4AF) = 0 0

98962/0x5a031:  fcntl(0x6, 0x2, 0x1) = 0 0

98962/0x5a031:  fcntl(0x6, 0x3, 0x0) = 2 0

98962/0x5a031:  fcntl(0x6, 0x4, 0x6) = 0 0

98962/0x5a031:  unlink("/Users/AB84394/.cache/libvirt/libvirtd.lock\0",
0x0, 0x0) = 0 0

98962/0x5a031:  close(0x5) = 0 0

98962/0x5a031:  pipe(0x0, 0x0, 0x0) = 5 0

98962/0x5a031:  fcntl(0x7, 0x1, 0x0) = 0 0

98962/0x5a031:  fcntl(0x7, 0x2, 0x1) = 0 0

98962/0x5a031:  fcntl(0x5, 0x1, 0x0) = 0 0

98962/0x5a031:  fcntl(0x5, 0x2, 0x1) = 0 0

dtrace: error on enabled probe ID 2172 (ID 170: syscall::write:return):
invalid kernel access in action #13 at DIF offset 68

98962/0x5a033:  select(0x4, 0x7000028ACC20, 0x7000028ACCA0, 0x7000028ACD20,
0x0 = 1 0

98962/0x5a033:  recvfrom(0x3, 0x0, 0x0) = -1 Err#38

dtrace: error on enabled probe ID 2172 (ID 170: syscall::write:return):
invalid kernel access in action #13 at DIF offset 68

98962/0x5a031:  __pthread_sigmask(0x1, 0x7FFEEA71904C, 0x7FFEEA71905C) = 0 0

98962/0x5a033:  ioctl(0x3, 0x4004667F, 0x7000028ACDC0) = 0 0

98962/0x5a031:  select(0x7, 0x7FFEEA718E50, 0x7FFEEA718ED0, 0x7FFEEA718F50,
0x0 = 1 0

98962/0x5a031:  __pthread_sigmask(0x3, 0x7FFEEA71905C, 0x0) = 0 0

dtrace: error on enabled probe ID 2174 (ID 168: syscall::read:return):
invalid kernel access in action #13 at DIF offset 68

dtrace: error on enabled probe ID 2172 (ID 170: syscall::write:return):
invalid kernel access in action #13 at DIF offset 68

98962/0x5a031:  __pthread_sigmask(0x1, 0x7FFEEA71904C, 0x7FFEEA71905C) = 0 0

98962/0x5a033:  select(0x4, 0x7000028ACC20, 0x7000028ACCA0, 0x7000028ACD20,
0x0 = 1 0

98962/0x5a033:  recvfrom(0x3, 0x0, 0x0) = -1 Err#38

98962/0x5a033:  ioctl(0x3, 0x4004667F, 0x7000028ACDC0) = 0 0

dtrace: error on enabled probe ID 2174 (ID 168: syscall::read:return):
invalid kernel access in action #13 at DIF offset 68

98962/0x5a031:  select(0x7, 0x7FFEEA718E50, 0x7FFEEA718ED0, 0x7FFEEA718F50,
0x0 = 1 0

98962/0x5a031:  recvfrom(0x6, 0x0, 0x0) = 0 0

98962/0x5a031:  ioctl(0x6, 0x4004667F, 0x7FFEEA718FF0) = 0 0

98962/0x5a031:  __pthread_sigmask(0x3, 0x7FFEEA71905C, 0x0) = 0 0

dtrace: error on enabled probe ID 2174 (ID 168: syscall::read:return):
invalid kernel access in action #13 at DIF offset 68

dtrace: error on enabled probe ID 2174 (ID 168: syscall::read:return):
invalid kernel access in action #13 at DIF offset 68

dtrace: error on enabled probe ID 2172 (ID 170: syscall::write:return):
invalid kernel access in action #13 at DIF offset 68

98962/0x5a033:  select(0x4, 0x7000028ACC20, 0x7000028ACCA0, 0x7000028ACD20,
0x0 = 1 0

98962/0x5a033:  recvfrom(0x3, 0x0, 0x0) = -1 Err#38

98962/0x5a033:  ioctl(0x3, 0x4004667F, 0x7000028ACDC0) = 0 0

dtrace: error on enabled probe ID 2172 (ID 170: syscall::write:return):
invalid kernel access in action #13 at DIF offset 68

98962/0x5a031:  __pthread_sigmask(0x1, 0x7FFEEA71904C, 0x7FFEEA71905C) = 0 0

dtrace: error on enabled probe ID 2174 (ID 168: syscall::read:return):
invalid kernel access in action #13 at DIF offset 68

98962/0x5a031:  select(0x7, 0x7FFEEA718E50, 0x7FFEEA718ED0, 0x7FFEEA718F50,
0x0 = 1 0

98962/0x5a031:  __pthread_sigmask(0x3, 0x7FFEEA71905C, 0x0) = 0 0

98962/0x5a033:  select(0x4, 0x7000028ACC20, 0x7000028ACCA0, 0x7000028ACD20,
0x0 = 1 0

98962/0x5a033:  recvfrom(0x3, 0x0, 0x0) = -1 Err#38

dtrace: error on enabled probe ID 2172 (ID 170: syscall::write:return):
invalid kernel access in action #13 at DIF offset 68

98962/0x5a031:  __pthread_sigmask(0x1, 0x7FFEEA71904C, 0x7FFEEA71905C) = 0 0

98962/0x5a033:  ioctl(0x3, 0x4004667F, 0x7000028ACDC0) = 0 0

dtrace: error on enabled probe ID 2174 (ID 168: syscall::read:return):
invalid kernel access in action #13 at DIF offset 68

98962/0x5a031:  select(0x7, 0x7FFEEA718E50, 0x7FFEEA718ED0, 0x7FFEEA718F50,
0x0 = 1 0

98962/0x5a031:  recvfrom(0x6, 0x0, 0x0) = 0 0

98962/0x5a031:  ioctl(0x6, 0x4004667F, 0x7FFEEA718FF0) = 0 0

98962/0x5a031:  __pthread_sigmask(0x3, 0x7FFEEA71905C, 0x0) = 0 0

dtrace: error on enabled probe ID 2174 (ID 168: syscall::read:return):
invalid kernel access in action #13 at DIF offset 68

dtrace: error on enabled probe ID 2174 (ID 168: syscall::read:return):
invalid kernel access in action #13 at DIF offset 68

dtrace: error on enabled probe ID 2172 (ID 170: syscall::write:return):
invalid kernel access in action #13 at DIF offset 68

98962/0x5a033:  select(0x4, 0x7000028ACC20, 0x7000028ACCA0, 0x7000028ACD20,
0x0 = 1 0

98962/0x5a033:  recvfrom(0x3, 0x0, 0x0) = -1 Err#38

dtrace: error on enabled probe ID 2172 (ID 170: syscall::write:return):
invalid kernel access in action #13 at DIF offset 68

98962/0x5a033:  ioctl(0x3, 0x4004667F, 0x7000028ACDC0) = 0 0

98962/0x5a031:  __pthread_sigmask(0x1, 0x7FFEEA71904C, 0x7FFEEA71905C) = 0 0

dtrace: error on enabled probe ID 2174 (ID 168: syscall::read:return):
invalid kernel access in action #13 at DIF offset 68

98962/0x5a031:  select(0x7, 0x7FFEEA718E50, 0x7FFEEA718ED0, 0x7FFEEA718F50,
0x0 = 1 0

98962/0x5a033:  select(0x4, 0x7000028ACC20, 0x7000028ACCA0, 0x7000028ACD20,
0x0 = 1 0

98962/0x5a031:  __pthread_sigmask(0x3, 0x7FFEEA71905C, 0x0) = 0 0

98962/0x5a033:  recvfrom(0x3, 0x0, 0x0) = -1 Err#38

dtrace: error on enabled probe ID 2172 (ID 170: syscall::write:return):
invalid kernel access in action #13 at DIF offset 68

98962/0x5a033:  ioctl(0x3, 0x4004667F, 0x7000028ACDC0) = 0 0

98962/0x5a031:  __pthread_sigmask(0x1, 0x7FFEEA71904C, 0x7FFEEA71905C) = 0 0

dtrace: error on enabled probe ID 2174 (ID 168: syscall::read:return):
invalid kernel access in action #13 at DIF offset 68

98962/0x5a031:  select(0x7, 0x7FFEEA718E50, 0x7FFEEA718ED0, 0x7FFEEA718F50,
0x0 = 1 0

98962/0x5a031:  recvfrom(0x6, 0x0, 0x0) = 0 0

98962/0x5a031:  ioctl(0x6, 0x4004667F, 0x7FFEEA718FF0) = 0 0

98962/0x5a031:  __pthread_sigmask(0x3, 0x7FFEEA71905C, 0x0) = 0 0

dtrace: error on enabled probe ID 2174 (ID 168: syscall::read:return):
invalid kernel access in action #13 at DIF offset 68

dtrace: error on enabled probe ID 2174 (ID 168: syscall::read:return):
invalid kernel access in action #13 at DIF offset 68

dtrace: error on enabled probe ID 2172 (ID 170: syscall::write:return):
invalid kernel access in action #13 at DIF offset 68

98962/0x5a033:  select(0x4, 0x7000028ACC20, 0x7000028ACCA0, 0x7000028ACD20,
0x0 = 1 0

98962/0x5a033:  recvfrom(0x3, 0x0, 0x0) = -1 Err#38

dtrace: error on enabled probe ID 2172 (ID 170: syscall::write:return):
invalid kernel access in action #13 at DIF offset 68

98962/0x5a033:  ioctl(0x3, 0x4004667F, 0x7000028ACDC0) = 0 0

dtrace: error on enabled probe ID 2174 (ID 168: syscall::read:return):
invalid kernel access in action #13 at DIF offset 68

98962/0x5a033:  close(0x7) = 0 0

dtrace: error on enabled probe ID 2173 (ID 956:
syscall::write_nocancel:return): invalid kernel access in action #13 at DIF
offset 68

98962/0x5a033:  close(0x5) = 0 0

dtrace: error on enabled probe ID 2173 (ID 956:
syscall::write_nocancel:return): invalid kernel access in action #13 at DIF
offset 68

dtrace: error on enabled probe ID 2173 (ID 956:
syscall::write_nocancel:return): invalid kernel access in action #13 at DIF
offset 68

dtrace: error on enabled probe ID 2173 (ID 956:
syscall::write_nocancel:return): invalid kernel access in action #13 at DIF
offset 68

dtrace: error on enabled probe ID 2172 (ID 170: syscall::write:return):
invalid kernel access in action #13 at DIF offset 68

98962/0x5a033:  close(0x6) = 0 0

98962/0x5a033:  __disable_threadsignal(0x1, 0x0, 0x0) = 0 0

98962/0x5a033:  ulock_wake(0x1000002, 0x7000028AD034, 0x0) = 0 0

98962/0x5a031:  ulock_wait(0x1020002, 0x7000028AD034, 0xB03) = 0 0

98962/0x5a031:  issetugid(0x0, 0x0, 0x0) = 0 0





&gt; 
&gt; 
&gt; Keith Bierman
&gt; khbkhb@gmail.com
&gt; 
&gt; 


[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;&lt;div class="gmail_default" \
style="font-family:georgia,serif;color:rgb(102,51,255)"&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div \
class="gmail_quote"&gt;&lt;div dir="ltr"&gt;On Fri, Jan 4, 2019 at 11:12 AM Keith Bierman \
&lt;&lt;a href="mailto:khbkhb@gmail.com"&gt;khbkhb@gmail.com&lt;/a&gt;&gt; \
wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote class="gmail_quote" style="margin:0px 0px 0px \
0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"&gt;&lt;div dir="ltr"&gt;&lt;div \
dir="ltr"&gt;&lt;div dir="ltr"&gt;&lt;div \
style="font-family:georgia,serif;color:rgb(102,51,255)"&gt;Mac OS X 10.14.2&lt;/div&gt;&lt;div \
style="font-family:georgia,serif;color:rgb(102,51,255)"&gt;VirtualBox 5.2.22 and \
6.0.0&lt;/div&gt;&lt;div style="font-family:georgia,serif;color:rgb(102,51,255)"&gt;libvirt \
installed via homebrew&lt;span class="gmail_default" \
style="font-family:georgia,serif;color:rgb(102,51,255)"&gt;....&lt;/span&gt;&lt;/div&gt;&lt;div \
style="font-family:georgia,serif;color:rgb(102,51,255)"&gt;&lt;br&gt;&lt;/div&gt;&lt;div \
style="font-family:georgia,serif;color:rgb(102,51,255)"&gt;







&lt;p class="gmail-m_-2878797956378602797gmail-p1" style="margin:0px;font:11px \
Menlo;color:rgb(0,0,0)"&gt;&lt;span class="gmail-m_-2878797956378602797gmail-s1" \
style="font-variant-ligatures:no-common-ligatures"&gt;virsh -c vbox:///session list&lt;span \
class="gmail-m_-2878797956378602797gmail-Apple-converted-space"&gt;                      \
&lt;/span&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="gmail-m_-2878797956378602797gmail-p1" \
style="margin:0px;font:11px Menlo;color:rgb(0,0,0)"&gt;&lt;span \
class="gmail-m_-2878797956378602797gmail-s1" \
style="font-variant-ligatures:no-common-ligatures"&gt;error: failed to connect to the \
hypervisor&lt;/span&gt;&lt;/p&gt; &lt;p class="gmail-m_-2878797956378602797gmail-p1" \
style="margin:0px;font:11px Menlo;color:rgb(0,0,0)"&gt;&lt;span \
class="gmail-m_-2878797956378602797gmail-s1" \
style="font-variant-ligatures:no-common-ligatures"&gt;error: internal error: unable to \
initialize VirtualBox driver API&lt;/span&gt;&lt;/p&gt;&lt;/div&gt;&lt;div \
style="font-family:georgia,serif;color:rgb(102,51,255)"&gt;&lt;div class="gmail_default" \
style="font-family:georgia,serif;color:rgb(102,51,255)"&gt;....&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div \
class="gmail_default" style="font-family:georgia,serif;color:rgb(102,51,255)"&gt;In case \
it's helpful, here's dtruss results (dtruss -fn virsh; start virsh in another \
window...). Or are these artifacts of the SIP feature?&lt;/div&gt;&lt;div \
class="gmail_default" \
style="font-family:georgia,serif;color:rgb(102,51,255)"&gt;&lt;br&gt;&lt;/div&gt;&lt;div \
class="gmail_default" style="font-family:georgia,serif;color:rgb(102,51,255)"&gt;







&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;sudo
dtruss -fn virsh&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;dtrace:
system integrity protection is on, some features will not be available&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:11pt"&gt;  &lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;PID/THRD  
SYSCALL(args)   = return&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 thread_selfid(0x0, 0x0, 0x0) = 368689 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 __mac_syscall(0x1058CDC89, 0x5A, 0x7FFEEA718F00) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 shared_region_check_np(0x7FFEEA718D68, 0x0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/private/var/db/dyld/dyld_shared_cache_x86_64h\0",
0x7FFEEA718CB0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 csrctl(0x0, 0x7FFEEA718A7C, 0x4) = -1 Err#1&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/local/bin/virsh\0", 0x7FFEEA719400, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 getpid(0x0, 0x0, 0x0) = 98962 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 proc_info(0x2, 0x18292, 0x16) = 1272 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/local/Cellar/libvirt/4.10.0/lib/libvirt-lxc.0.dylib\0",
0x7FFEEA717C00, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/local/Cellar/libvirt/4.10.0/lib/libvirt-lxc.0.dylib\0",
0x7FFEEA718040, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 open("/usr/local/Cellar/libvirt/4.10.0/lib/libvirt-lxc.0.dylib\0",
0x0, 0x0) = 3 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;&lt;span \
style="background:yellow"&gt;dtrace: error on enabled probe ID 2189 (ID 468: \
syscall::pread:return): invalid kernel access in action #13 at DIF offset \
20&lt;/span&gt;&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 fcntl(0x3, 0x62, 0x7FFEEA70F7D0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 mmap(0x10556D000, 0x4000, 0x5, 0x12, 0x3, 0x0) = 0x10556D000 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 mmap(0x105571000, 0x1000, 0x3, 0x12, 0x3, 0x4000) = 0x105571000 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 mmap(0x105572000, 0x6CC, 0x1, 0x12, 0x3, 0x5000) = 0x105572000 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 fcntl(0x3, 0x2C, 0x7FFEEA70F9D0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 close(0x3) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/local/Cellar/libvirt/4.10.0/lib/libvirt-qemu.0.dylib\0",
0x7FFEEA717C00, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/local/Cellar/libvirt/4.10.0/lib/libvirt-qemu.0.dylib\0",
0x7FFEEA718040, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 open("/usr/local/Cellar/libvirt/4.10.0/lib/libvirt-qemu.0.dylib\0",
0x0, 0x0) = 3 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;&lt;span \
style="background:yellow"&gt;dtrace: error on enabled probe ID 2189 (ID 468: \
syscall::pread:return): invalid kernel access in action #13 at DIF offset \
20&lt;/span&gt;&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 fcntl(0x3, 0x62, 0x7FFEEA70F7D0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 mmap(0x105575000, 0x4000, 0x5, 0x12, 0x3, 0x0) = 0x105575000 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 mmap(0x105579000, 0x1000, 0x3, 0x12, 0x3, 0x4000) = 0x105579000 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 mmap(0x10557A000, 0x4D4, 0x1, 0x12, 0x3, 0x5000) = 0x10557A000 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 fcntl(0x3, 0x2C, 0x7FFEEA70F9D0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 close(0x3) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/local/Cellar/libvirt/4.10.0/lib/libvirt.0.dylib\0",
0x7FFEEA717C00, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/local/Cellar/libvirt/4.10.0/lib/libvirt.0.dylib\0",
0x7FFEEA718040, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 open("/usr/local/Cellar/libvirt/4.10.0/lib/libvirt.0.dylib\0", 0x0,
0x0) = 3 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;&lt;span \
style="background:yellow"&gt;dtrace: error on enabled probe ID 2189 (ID 468: \
syscall::pread:return): invalid kernel access in action #13 at DIF offset \
20&lt;/span&gt;&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 fcntl(0x3, 0x62, 0x7FFEEA70F7D0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 mmap(0x105947000, 0x252000, 0x5, 0x12, 0x3, 0x0) = 0x105947000 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 mmap(0x105B99000, 0x12000, 0x3, 0x12, 0x3, 0x252000) = 0x105B99000 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 mmap(0x105BAC000, 0x8FED4, 0x1, 0x12, 0x3, 0x264000) = 0x105BAC000 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 fcntl(0x3, 0x2C, 0x7FFEEA70F9D0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 close(0x3) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/local/opt/yajl/lib/libyajl.2.dylib\0", 0x7FFEEA717C00,
0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/local/opt/yajl/lib/libyajl.2.dylib\0", 0x7FFEEA718040,
0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 open("/usr/local/opt/yajl/lib/libyajl.2.dylib\0", 0x0, 0x0) = 3 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;&lt;span \
style="background:yellow"&gt;dtrace: error on enabled probe ID 2189 (ID 468: \
syscall::pread:return): invalid kernel access in action #13 at DIF offset \
20&lt;/span&gt;&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 fcntl(0x3, 0x62, 0x7FFEEA70F7D0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 mmap(0x10557B000, 0x7000, 0x5, 0x12, 0x3, 0x0) = 0x10557B000 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 mmap(0x105582000, 0x1000, 0x3, 0x12, 0x3, 0x7000) = 0x105582000 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 mmap(0x105583000, 0x1150, 0x1, 0x12, 0x3, 0x8000) = 0x105583000 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 fcntl(0x3, 0x2C, 0x7FFEEA70F9D0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 close(0x3) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/lib/libSystem.B.dylib\0", 0x7FFEEA718040, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/lib/libsasl2.2.dylib\0", 0x7FFEEA718040, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/local/opt/gnutls/lib/libgnutls.30.dylib\0",
0x7FFEEA717C00, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/local/opt/gnutls/lib/libgnutls.30.dylib\0",
0x7FFEEA718040, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 open("/usr/local/opt/gnutls/lib/libgnutls.30.dylib\0", 0x0, 0x0 = 3 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;&lt;span \
style="background:yellow"&gt;dtrace: error on enabled probe ID 2189 (ID 468: \
syscall::pread:return): invalid kernel access in action #13 at DIF offset \
20&lt;/span&gt;&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 fcntl(0x3, 0x62, 0x7FFEEA70F7D0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 mmap(0x105585000, 0x135000, 0x5, 0x12, 0x3, 0x0) = 0x105585000 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 mmap(0x1056BA000, 0xF000, 0x3, 0x12, 0x3, 0x135000) = 0x1056BA000 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 mmap(0x1056CA000, 0x31E5C, 0x1, 0x12, 0x3, 0x144000) = 0x1056CA000 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 fcntl(0x3, 0x2C, 0x7FFEEA70F9D0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 madvise(0x1056CA000, 0x2000, 0x2) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 close(0x3) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/lib/libcurl.4.dylib\0", 0x7FFEEA718040, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/lib/libxml2.2.dylib\0", 0x7FFEEA718040, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/lib/system/libcache.dylib\0", 0x7FFEEA717900, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/lib/system/libcommonCrypto.dylib\0", 0x7FFEEA717900,
0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/lib/system/libcompiler_rt.dylib\0", 0x7FFEEA717900, 0x0)
= 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/lib/system/libcopyfile.dylib\0", 0x7FFEEA717900, 0x0) =
0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/lib/system/libcorecrypto.dylib\0", 0x7FFEEA717900, 0x0)
= 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/lib/system/libdispatch.dylib\0", 0x7FFEEA717900, 0x0) =
0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/lib/system/libdyld.dylib\0", 0x7FFEEA717900, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/lib/system/libkeymgr.dylib\0", 0x7FFEEA717900, 0x0 = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/lib/system/liblaunch.dylib\0", 0x7FFEEA717900, 0x0 = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/lib/system/libmacho.dylib\0", 0x7FFEEA717900, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/lib/system/libquarantine.dylib\0", 0x7FFEEA717900, 0x0)
= 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/lib/system/libremovefile.dylib\0", 0x7FFEEA717900, 0x0)
= 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/lib/system/libsystem_asl.dylib\0", 0x7FFEEA717900, 0x0)
= 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/lib/system/libsystem_blocks.dylib\0", 0x7FFEEA717900,
0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/lib/system/libsystem_c.dylib\0", 0x7FFEEA717900, 0x0) =
0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/lib/system/libsystem_configuration.dylib\0",
0x7FFEEA717900, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/lib/system/libsystem_coreservices.dylib\0",
0x7FFEEA717900, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/lib/system/libsystem_darwin.dylib\0", 0x7FFEEA717900,
0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/lib/system/libsystem_dnssd.dylib\0", 0x7FFEEA717900,
0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/lib/system/libsystem_info.dylib\0", 0x7FFEEA717900, 0x0)
= 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/lib/system/libsystem_m.dylib\0", 0x7FFEEA717900, 0x0) =
0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/lib/system/libsystem_malloc.dylib\0", 0x7FFEEA717900,
0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/lib/system/libsystem_networkextension.dylib\0",
0x7FFEEA717900, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/lib/system/libsystem_notify.dylib\0", 0x7FFEEA717900,
0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/lib/system/libsystem_sandbox.dylib\0", 0x7FFEEA717900,
0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/lib/system/libsystem_secinit.dylib\0", 0x7FFEEA717900,
0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/lib/system/libsystem_kernel.dylib\0", 0x7FFEEA717900,
0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/lib/system/libsystem_platform.dylib\0", 0x7FFEEA717900,
0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/lib/system/libsystem_pthread.dylib\0", 0x7FFEEA717900,
0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/lib/system/libsystem_symptoms.dylib\0", 0x7FFEEA717900,
0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/lib/system/libsystem_trace.dylib\0", 0x7FFEEA717900,
0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/lib/system/libunwind.dylib\0", 0x7FFEEA717900, 0x0 = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/lib/system/libxpc.dylib\0", 0x7FFEEA717900, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/lib/libobjc.A.dylib\0", 0x7FFEEA716C00, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/lib/libc++abi.dylib\0", 0x7FFEEA7162E0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/lib/libc++.1.dylib\0", 0x7FFEEA7162E0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/lib/libicucore.A.dylib\0", 0x7FFEEA717CA0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/lib/libz.1.dylib\0", 0x7FFEEA717CA0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/Frameworks/Security.framework/Versions/A/Security\0",
 0x7FFEEA717C10, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation\0",
 0x7FFEEA717C10, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/local/opt/p11-kit/lib/libp11-kit.0.dylib\0",
0x7FFEEA7177D0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/local/opt/p11-kit/lib/libp11-kit.0.dylib\0",
0x7FFEEA717C10, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 open("/usr/local/opt/p11-kit/lib/libp11-kit.0.dylib\0", 0x0, 0x0) = 3
0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;&lt;span \
style="background:yellow"&gt;dtrace: error on enabled probe ID 2189 (ID 468: \
syscall::pread:return): invalid kernel access in action #13 at DIF offset \
20&lt;/span&gt;&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 fcntl(0x3, 0x62, 0x7FFEEA70F3A0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 mmap(0x1056FC000, 0xA8000, 0x5, 0x12, 0x3, 0x0) = 0x1056FC000 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 mmap(0x1057A4000, 0x14000, 0x3, 0x12, 0x3, 0xA8000) = 0x1057A4000 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 mmap(0x1057B8000, 0x34AB8, 0x1, 0x12, 0x3, 0xBC000) = 0x1057B8000 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 fcntl(0x3, 0x2C, 0x7FFEEA70F5A0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 close(0x3) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/local/opt/libunistring/lib/libunistring.2.dylib\0",
0x7FFEEA7177D0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/local/opt/libunistring/lib/libunistring.2.dylib\0",
0x7FFEEA717C10, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 open("/usr/local/opt/libunistring/lib/libunistring.2.dylib\0", 0x0,
0x0) = 3 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;dtrace:
error on enabled probe ID 2189 (ID 468: syscall::pread:return): invalid kernel
access in action #13 at DIF offset 20&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 fcntl(0x3, 0x62, 0x7FFEEA70F3A0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 mmap(0x105C3C000, 0x164000, 0x5, 0x12, 0x3, 0x0) = 0x105C3C000 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 mmap(0x105DA0000, 0x3000, 0x3, 0x12, 0x3, 0x164000) = 0x105DA0000 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 mmap(0x105DA3000, 0xE130, 0x1, 0x12, 0x3, 0x167000) = 0x105DA3000 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 fcntl(0x3, 0x2C, 0x7FFEEA70F5A0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 close(0x3) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/local/opt/libtasn1/lib/libtasn1.6.dylib\0",
0x7FFEEA7177D0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/local/opt/libtasn1/lib/libtasn1.6.dylib\0",
0x7FFEEA717C10, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 open("/usr/local/opt/libtasn1/lib/libtasn1.6.dylib\0", 0x0, 0x0 = 3 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;dtrace:
error on enabled probe ID 2189 (ID 468: syscall::pread:return): invalid kernel
access in action #13 at DIF offset 20&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 fcntl(0x3, 0x62, 0x7FFEEA70F3A0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 mmap(0x1057ED000, 0xC000, 0x5, 0x12, 0x3, 0x0) = 0x1057ED000 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 mmap(0x1057F9000, 0x1000, 0x3, 0x12, 0x3, 0xC000) = 0x1057F9000 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 mmap(0x1057FA000, 0x19A8, 0x1, 0x12, 0x3, 0xD000) = 0x1057FA000 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 fcntl(0x3, 0x2C, 0x7FFEEA70F5A0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 close(0x3) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/local/opt/nettle/lib/libnettle.6.dylib\0",
0x7FFEEA7177D0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/local/opt/nettle/lib/libnettle.6.dylib\0",
0x7FFEEA717C10, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 open("/usr/local/opt/nettle/lib/libnettle.6.dylib\0", 0x0, 0x0) = 3 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;dtrace:
error on enabled probe ID 2189 (ID 468: syscall::pread:return): invalid kernel
access in action #13 at DIF offset 20&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 fcntl(0x3, 0x62, 0x7FFEEA70F3A0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 mmap(0x1057FC000, 0x26000, 0x5, 0x12, 0x3, 0x0) = 0x1057FC000 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 mmap(0x105822000, 0x1000, 0x3, 0x12, 0x3, 0x26000) = 0x105822000 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 mmap(0x105823000, 0x7B10, 0x1, 0x12, 0x3, 0x27000) = 0x105823000 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 fcntl(0x3, 0x2C, 0x7FFEEA70F5A0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 close(0x3) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/local/opt/nettle/lib/libhogweed.4.dylib\0",
0x7FFEEA7177D0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/local/opt/nettle/lib/libhogweed.4.dylib\0",
0x7FFEEA717C10, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 open("/usr/local/opt/nettle/lib/libhogweed.4.dylib\0", 0x0, 0x0 = 3 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;dtrace:
error on enabled probe ID 2189 (ID 468: syscall::pread:return): invalid kernel
access in action #13 at DIF offset 20&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 fcntl(0x3, 0x62, 0x7FFEEA70F3A0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 mmap(0x10582B000, 0x2A000, 0x5, 0x12, 0x3, 0x0) = 0x10582B000 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 mmap(0x105855000, 0x1000, 0x3, 0x12, 0x3, 0x2A000) = 0x105855000 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 mmap(0x105856000, 0x65E0, 0x1, 0x12, 0x3, 0x2B000) = 0x105856000 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 fcntl(0x3, 0x2C, 0x7FFEEA70F5A0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 close(0x3) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/local/opt/gmp/lib/libgmp.10.dylib\0", 0x7FFEEA7177D0,
0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/local/opt/gmp/lib/libgmp.10.dylib\0", 0x7FFEEA717C10,
0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 open("/usr/local/opt/gmp/lib/libgmp.10.dylib\0", 0x0, 0x0) = 3 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;dtrace:
error on enabled probe ID 2189 (ID 468: syscall::pread:return): invalid kernel
access in action #13 at DIF offset 20&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 fcntl(0x3, 0x62, 0x7FFEEA70F3A0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 mmap(0x105DB2000, 0x5D000, 0x5, 0x12, 0x3, 0x0) = 0x105DB2000 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 mmap(0x105E0F000, 0x1000, 0x3, 0x12, 0x3, 0x5D000) = 0x105E0F000 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 mmap(0x105E10000, 0x92DC, 0x1, 0x12, 0x3, 0x5E000) = 0x105E10000 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 fcntl(0x3, 0x2C, 0x7FFEEA70F5A0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 close(0x3) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/Frameworks/Foundation.framework/Versions/C/Foundation\0",
 0x7FFEEA7179C0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/PrivateFrameworks/AppleFSCompression.framework/Versions/A/AppleFSCompression\0",
 0x7FFEEA7179C0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/lib/libDiagnosticMessagesClient.dylib\0",
0x7FFEEA7179C0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/lib/libOpenScriptingUtil.dylib\0", 0x7FFEEA7179C0, 0x0)
= 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/lib/libauto.dylib\0", 0x7FFEEA7179C0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/lib/libbsm.0.dylib\0", 0x7FFEEA7179C0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/lib/libcoretls.dylib\0", 0x7FFEEA7179C0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/lib/libcoretls_cfhelpers.dylib\0", 0x7FFEEA7179C0, 0x0)
= 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/lib/libpam.2.dylib\0", 0x7FFEEA7179C0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/lib/libsqlite3.dylib\0", 0x7FFEEA7179C0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/lib/libxar.1.dylib\0", 0x7FFEEA7179C0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/Frameworks/IOKit.framework/Versions/A/IOKit\0",
0x7FFEEA7179C0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/Frameworks/DiskArbitration.framework/Versions/A/DiskArbitration\0",
 0x7FFEEA717790, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/lib/libarchive.2.dylib\0", 0x7FFEEA717790, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/Frameworks/CFNetwork.framework/Versions/A/CFNetwork\0",
 0x7FFEEA717790, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/Frameworks/SystemConfiguration.framework/Versions/A/SystemConfiguration\0",
 0x7FFEEA717790, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/Frameworks/CoreServices.framework/Versions/A/CoreServices\0",
 0x7FFEEA717790, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/lib/liblangid.dylib\0", 0x7FFEEA717790, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/lib/libCRFSuite.dylib\0", 0x7FFEEA717790, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/lib/libenergytrace.dylib\0", 0x7FFEEA717520, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/lib/system/libkxld.dylib\0", 0x7FFEEA717520, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/lib/libbz2.1.0.dylib\0", 0x7FFEEA717660, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/lib/liblzma.5.dylib\0", 0x7FFEEA717660, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/lib/libnetwork.dylib\0", 0x7FFEEA717570, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/lib/libapple_nghttp2.dylib\0", 0x7FFEEA717570, 0x0 = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/lib/libpcap.A.dylib\0", 0x7FFEEA7172F0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/FSEvents.framework/Versions/A/FSEvents\0",
 0x7FFEEA7175C0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/CarbonCore.framework/Versions/A/CarbonCore\0",
 0x7FFEEA7175C0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/Metadata.framework/Versions/A/Metadata\0",
 0x7FFEEA7175C0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/OSServices.framework/Versions/A/OSServices\0",
 0x7FFEEA7175C0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/SearchKit.framework/Versions/A/SearchKit\0",
 0x7FFEEA7175C0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/AE.framework/Versions/A/AE\0",
 0x7FFEEA7175C0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/LaunchServices.framework/Versions/A/LaunchServices\0",
 0x7FFEEA7175C0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/DictionaryServices.framework/Versions/A/DictionaryServices\0",
 0x7FFEEA7175C0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/SharedFileList.framework/Versions/A/SharedFileList\0",
 0x7FFEEA7175C0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/Frameworks/NetFS.framework/Versions/A/NetFS\0",
0x7FFEEA717420, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/PrivateFrameworks/NetAuth.framework/Versions/A/NetAuth\0",
 0x7FFEEA7172B0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/PrivateFrameworks/login.framework/Versions/A/Frameworks/loginsupport.framework/Versions/A/loginsupport\0",
 0x7FFEEA7171B0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/PrivateFrameworks/TCC.framework/Versions/A/TCC\0",
0x7FFEEA7173F0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/PrivateFrameworks/CoreNLP.framework/Versions/A/CoreNLP\0",
 0x7FFEEA7173F0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/PrivateFrameworks/MetadataUtilities.framework/Versions/A/MetadataUtilities\0",
 0x7FFEEA7173F0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/lib/libmecabra.dylib\0", 0x7FFEEA7173F0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/Frameworks/ApplicationServices.framework/Versions/A/ApplicationServices\0",
 0x7FFEEA7172B0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/Frameworks/CoreGraphics.framework/Versions/A/CoreGraphics\0",
 0x7FFEEA7170C0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/Frameworks/CoreText.framework/Versions/A/CoreText\0",
 0x7FFEEA7170C0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/Frameworks/ImageIO.framework/Versions/A/ImageIO\0",
 0x7FFEEA7170C0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/Frameworks/ColorSync.framework/Versions/A/ColorSync\0",
 0x7FFEEA7170C0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ATS.framework/Versions/A/ATS\0",
 0x7FFEEA7170C0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ColorSyncLegacy.framework/Versions/A/ColorSyncLegacy\0",
 0x7FFEEA7170C0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/HIServices.framework/Versions/A/HIServices\0",
 0x7FFEEA7170C0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/LangAnalysis.framework/Versions/A/LangAnalysis\0",
 0x7FFEEA7170C0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/PrintCore.framework/Versions/A/PrintCore\0",
 0x7FFEEA7170C0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/QD.framework/Versions/A/QD\0",
 0x7FFEEA7170C0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/SpeechSynthesis.framework/Versions/A/SpeechSynthesis\0",
 0x7FFEEA7170C0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/PrivateFrameworks/SkyLight.framework/Versions/A/SkyLight\0",
 0x7FFEEA716F20, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/Frameworks/IOSurface.framework/Versions/A/IOSurface\0",
 0x7FFEEA716F20, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/Frameworks/Accelerate.framework/Versions/A/Accelerate\0",
 0x7FFEEA716F20, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/lib/libcompression.dylib\0", 0x7FFEEA716C70, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/Frameworks/CoreDisplay.framework/Versions/A/CoreDisplay\0",
 0x7FFEEA716C70, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/Frameworks/Metal.framework/Versions/A/Metal\0",
0x7FFEEA716C70, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/Frameworks/MetalPerformanceShaders.framework/Versions/A/MetalPerformanceShaders\0",
 0x7FFEEA716C70, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/PrivateFrameworks/MultitouchSupport.framework/Versions/A/MultitouchSupport\0",
 0x7FFEEA716C70, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/Frameworks/QuartzCore.framework/Versions/A/QuartzCore\0",
 0x7FFEEA716C70, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vImage.framework/Versions/A/vImage\0",
 0x7FFEEA716B70, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/vecLib\0",
 0x7FFEEA716B70, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libvMisc.dylib\0",
 0x7FFEEA7169D0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libvDSP.dylib\0",
 0x7FFEEA7169D0, 0x0 = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libBLAS.dylib\0",
 0x7FFEEA7169D0, 0x0 = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libLAPACK.dylib\0",
 0x7FFEEA7169D0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libLinearAlgebra.dylib\0",
 0x7FFEEA7169D0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libSparseBLAS.dylib\0",
 0x7FFEEA7169D0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libQuadrature.dylib\0",
 0x7FFEEA7169D0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libBNNS.dylib\0",
 0x7FFEEA7169D0, 0x0 = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libSparse.dylib\0",
 0x7FFEEA7169D0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/PrivateFrameworks/GPUWrangler.framework/Versions/A/GPUWrangler\0",
 0x7FFEEA716A20, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/PrivateFrameworks/IOAccelerator.framework/Versions/A/IOAccelerator\0",
 0x7FFEEA716A20, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/PrivateFrameworks/IOPresentment.framework/Versions/A/IOPresentment\0",
 0x7FFEEA716A20, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/PrivateFrameworks/DSExternalDisplay.framework/Versions/A/DSExternalDisplay\0",
 0x7FFEEA716A20, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libCoreFSCache.dylib\0",
 0x7FFEEA716880, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/Frameworks/MetalPerformanceShaders.framework/Frameworks/MPSCore.framework/Versions/A/MPSCore\0",
 0x7FFEEA716AE0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/Frameworks/MetalPerformanceShaders.framework/Frameworks/MPSImage.framework/Versions/A/MPSImage\0",
 0x7FFEEA716AE0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/Frameworks/MetalPerformanceShaders.framework/Frameworks/MPSNeuralNetwork.framework/Versions/A/MPSNeuralNetwork\0",
 0x7FFEEA716AE0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/Frameworks/MetalPerformanceShaders.framework/Frameworks/MPSMatrix.framework/Versions/A/MPSMatrix\0",
 0x7FFEEA716AE0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/Frameworks/MetalPerformanceShaders.framework/Frameworks/MPSRayIntersector.framework/Versions/A/MPSRayIntersector\0",
 0x7FFEEA716AE0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/PrivateFrameworks/MetalTools.framework/Versions/A/MetalTools\0",
 0x7FFEEA716950, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/PrivateFrameworks/AggregateDictionary.framework/Versions/A/AggregateDictionary\0",
 0x7FFEEA716950, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/lib/libMobileGestalt.dylib\0", 0x7FFEEA7167F0, 0x0 = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/Frameworks/CoreImage.framework/Versions/A/CoreImage\0",
 0x7FFEEA716A20, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/Frameworks/CoreVideo.framework/Versions/A/CoreVideo\0",
 0x7FFEEA716A20, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/Frameworks/OpenGL.framework/Versions/A/OpenGL\0",
0x7FFEEA716A20, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/PrivateFrameworks/GraphVisualizer.framework/Versions/A/GraphVisualizer\0",
 0x7FFEEA716790, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/PrivateFrameworks/FaceCore.framework/Versions/A/FaceCore\0",
 0x7FFEEA716790, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/Frameworks/OpenCL.framework/Versions/A/OpenCL\0",
0x7FFEEA716790, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/lib/libFosl_dynamic.dylib\0", 0x7FFEEA716790, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/PrivateFrameworks/OTSVG.framework/Versions/A/OTSVG\0",
 0x7FFEEA716590, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ATS.framework/Versions/A/Resources/libFontParser.dylib\0",
 0x7FFEEA716590, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ATS.framework/Versions/A/Resources/libFontRegistry.dylib\0",
 0x7FFEEA716590, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/Frameworks/ImageIO.framework/Versions/A/Resources/libJPEG.dylib\0",
 0x7FFEEA716170, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/Frameworks/ImageIO.framework/Versions/A/Resources/libTIFF.dylib\0",
 0x7FFEEA716170, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/Frameworks/ImageIO.framework/Versions/A/Resources/libPng.dylib\0",
 0x7FFEEA716170, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/Frameworks/ImageIO.framework/Versions/A/Resources/libGIF.dylib\0",
 0x7FFEEA716170, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/Frameworks/ImageIO.framework/Versions/A/Resources/libJP2.dylib\0",
 0x7FFEEA716170, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/Frameworks/ImageIO.framework/Versions/A/Resources/libRadiance.dylib\0",
 0x7FFEEA716170, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/PrivateFrameworks/AppleJPEG.framework/Versions/A/AppleJPEG\0",
 0x7FFEEA716170, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libGFXShared.dylib\0",
 0x7FFEEA716460, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libGLU.dylib\0",
 0x7FFEEA716260, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libGL.dylib\0",
 0x7FFEEA716260, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libGLImage.dylib\0",
 0x7FFEEA7160D0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libCVMSPluginSupport.dylib\0",
 0x7FFEEA715FD0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libCoreVMClient.dylib\0",
 0x7FFEEA715EC0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/lib/libcups.2.dylib\0", 0x7FFEEA716E70, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/Frameworks/Kerberos.framework/Versions/A/Kerberos\0",
 0x7FFEEA716CE0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/Frameworks/GSS.framework/Versions/A/GSS\0",
0x7FFEEA716CE0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/lib/libresolv.9.dylib\0", 0x7FFEEA716CE0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/lib/libiconv.2.dylib\0", 0x7FFEEA716CE0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/PrivateFrameworks/Heimdal.framework/Versions/A/Heimdal\0",
 0x7FFEEA716BD0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/lib/libheimdal-asn1.dylib\0", 0x7FFEEA716A00, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/Frameworks/OpenDirectory.framework/Versions/A/OpenDirectory\0",
 0x7FFEEA716B50, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/PrivateFrameworks/CommonAuth.framework/Versions/A/CommonAuth\0",
 0x7FFEEA716B50, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/Frameworks/OpenDirectory.framework/Versions/A/Frameworks/CFOpenDirectory.framework/Versions/A/CFOpenDirectory\0",
 0x7FFEEA7169E0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/Frameworks/SecurityFoundation.framework/Versions/A/SecurityFoundation\0",
 0x7FFEEA7169E0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/PrivateFrameworks/APFS.framework/Versions/A/APFS\0",
 0x7FFEEA7168A0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/lib/libutil.dylib\0", 0x7FFEEA716790, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/lib/libcharset.1.dylib\0", 0x7FFEEA716C00, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/Frameworks/CoreAudio.framework/Versions/A/CoreAudio\0",
 0x7FFEEA716F50, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/Frameworks/AudioToolbox.framework/Versions/A/AudioToolbox\0",
 0x7FFEEA716F50, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/PrivateFrameworks/AppleSauce.framework/Versions/A/AppleSauce\0",
 0x7FFEEA716DE0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/PrivateFrameworks/AssertionServices.framework/Versions/A/AssertionServices\0",
 0x7FFEEA716DE0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/PrivateFrameworks/BaseBoard.framework/Versions/A/BaseBoard\0",
 0x7FFEEA716CB0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/lib/libmecab.1.0.0.dylib\0", 0x7FFEEA717250, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/lib/libgermantok.dylib\0", 0x7FFEEA717250, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/lib/libThaiTokenizer.dylib\0", 0x7FFEEA717250, 0x0 = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/lib/libChineseTokenizer.dylib\0", 0x7FFEEA717250, 0x0) =
0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/PrivateFrameworks/LanguageModeling.framework/Versions/A/LanguageModeling\0",
 0x7FFEEA717110, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/PrivateFrameworks/CoreEmoji.framework/Versions/A/CoreEmoji\0",
 0x7FFEEA716F40, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/PrivateFrameworks/Lexicon.framework/Versions/A/Lexicon\0",
 0x7FFEEA716F40, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/PrivateFrameworks/LinguisticData.framework/Versions/A/LinguisticData\0",
 0x7FFEEA716F40, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/lib/libcmph.dylib\0", 0x7FFEEA716F40, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/Frameworks/CoreData.framework/Versions/A/CoreData\0",
 0x7FFEEA7171C0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/Frameworks/ServiceManagement.framework/Versions/A/ServiceManagement\0",
 0x7FFEEA717220, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/PrivateFrameworks/BackgroundTaskManagement.framework/Versions/A/BackgroundTaskManagement\0",
 0x7FFEEA7170C0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/lib/libxslt.1.dylib\0", 0x7FFEEA7173C0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/local/opt/libffi/lib/libffi.6.dylib\0", 0x7FFEEA7176F0,
0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/local/opt/libffi/lib/libffi.6.dylib\0", 0x7FFEEA717B30,
0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 open("/usr/local/opt/libffi/lib/libffi.6.dylib\0", 0x0, 0x0) = 3 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;dtrace:
error on enabled probe ID 2189 (ID 468: syscall::pread:return): invalid kernel
access in action #13 at DIF offset 20&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 fcntl(0x3, 0x62, 0x7FFEEA70F2C0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 mmap(0x10585D000, 0x5000, 0x5, 0x12, 0x3, 0x0) = 0x10585D000 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 mmap(0x105862000, 0x1000, 0x3, 0x12, 0x3, 0x5000) = 0x105862000 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 mmap(0x105863000, 0x10AC, 0x1, 0x12, 0x3, 0x6000) = 0x105863000 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 fcntl(0x3, 0x2C, 0x7FFEEA70F4C0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 close(0x3) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/local/Cellar/nettle/3.4.1/lib/libnettle.6.dylib\0",
0x7FFEEA7176D0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/local/Cellar/nettle/3.4.1/lib/libnettle.6.dylib\0",
0x7FFEEA717B10, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/lib/libcrypto.42.dylib\0", 0x7FFEEA717C40, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/usr/lib/libssl.44.dylib\0", 0x7FFEEA717C40, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/Frameworks/LDAP.framework/Versions/A/LDAP\0",
0x7FFEEA717C40, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/PrivateFrameworks/TrustEvaluationAgent.framework/Versions/A/TrustEvaluationAgent\0",
 0x7FFEEA717B60, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/PrivateFrameworks/CoreDaemon.framework/Versions/B/CoreDaemon\0",
 0x7FFEEA717AD0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/PrivateFrameworks/AppleSRP.framework/Versions/A/AppleSRP\0",
 0x7FFEEA717960, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 open("/dev/dtracehelper\0", 0x2, 0xFFFFFFFFEA718E90) = 3 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 ioctl(0x3, 0x80086804, 0x7FFEEA718CA0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 close(0x3) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 madvise(0x1056CA000, 0x2000, 0x5) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 madvise(0x10554C000, 0x2000, 0x5) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 access("/AppleInternal/XBS/.isChrooted\0", 0x0, 0x0) = -1 Err#2&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 bsdthread_register(0x7FFF6722B408, 0x7FFF6722B3F8, 0x2000) = 1073742047 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 sysctlbyname(kern.bootargs, 0xD, 0x7FFEEA7165B0, 0x7FFEEA7165A8, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 ioctl(0x2, 0x4004667A, 0x7FFEEA716834) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 mprotect(0x105E1A000, 0x1000, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 mprotect(0x105E21000, 0x1000, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 mprotect(0x105E22000, 0x1000, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 mprotect(0x105E29000, 0x1000, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 mprotect(0x105568000, 0x90, 0x1) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 mprotect(0x10556A000, 0x1000, 0x1) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 mprotect(0x105568000, 0x90, 0x3) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 mprotect(0x105568000, 0x90, 0x1) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 issetugid(0x0, 0x0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 getentropy(0x7FFEEA713E00, 0x20, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 getpid(0x0, 0x0, 0x0) = 98962 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/AppleInternal\0", 0x7FFEEA716A20, 0x0) = -1 Err#2&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 csops(0x18292, 0x7, 0x7FFEEA716550) = -1 Err#22&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 proc_info(0x2, 0x18292, 0xD) = 64 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 csops(0x18292, 0x7, 0x7FFEEA715DA0) = -1 Err#22&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 geteuid(0x0, 0x0, 0x0) = 502 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 getuid(0x0, 0x0, 0x0) = 502 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;dtrace:
error on enabled probe ID 2198 (ID 566: syscall::sysctl:return): invalid kernel
access in action #11 at DIF offset 28&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 gettid(0x7FFEEA715408, 0x7FFEEA71540C, 0x0) = -1 Err#3&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 geteuid(0x0, 0x0, 0x0) = 502 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 getegid(0x0, 0x0, 0x0) = 20 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 getuid(0x0, 0x0, 0x0) = 502 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 getgid(0x0, 0x0, 0x0) = 20 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 geteuid(0x0, 0x0, 0x0) = 502 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 getegid(0x0, 0x0, 0x0) = 20 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 issetugid(0x0, 0x0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 issetugid(0x0, 0x0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 issetugid(0x0, 0x0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 issetugid(0x0, 0x0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/etc/gnutls/default-priorities\0", 0x7FFEEA716A78, 0x0) = -1
Err#2&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/PrivateFrameworks/Heimdal.framework/Heimdal\0",
0x7FFEEA715670, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/System/Library/Frameworks/GSS.framework/GSS\0",
0x7FFEEA715670, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 ioctl(0x0, 0x4004667A, 0x7FFEEA719564) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 ioctl(0x0, 0x40487413, 0x7FFEEA7196B8) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 getuid(0x0, 0x0, 0x0) = 502 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 geteuid(0x0, 0x0, 0x0) = 502 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;dtrace:
error on enabled probe ID 2198 (ID 566: syscall::sysctl:return): invalid kernel
access in action #11 at DIF offset 28&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 getrlimit(0x1008, 0x7FFEEA719270, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 open_nocancel("/private/etc/ssl/openssl.cnf\0", 0x0, 0x1B6) = 3 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 fstat64(0x3, 0x7FFEEA719108, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;dtrace:
error on enabled probe ID 2175 (ID 954: syscall::read_nocancel:return): invalid
kernel access in action #13 at DIF offset 68&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;dtrace:
error on enabled probe ID 2175 (ID 954: syscall::read_nocancel:return): invalid
kernel access in action #13 at DIF offset 68&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 close_nocancel(0x3) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 socket(0x1E, 0x2, 0x0) = 3 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 close(0x3) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 issetugid(0x0, 0x0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 issetugid(0x0, 0x0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 pipe(0x0, 0x0, 0x0) = 3 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 fcntl(0x4, 0x3, 0x0) = 1 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 fcntl(0x4, 0x4, 0x5) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 fcntl(0x3, 0x3, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 fcntl(0x3, 0x4, 0x4) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 fcntl(0x4, 0x1, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 fcntl(0x4, 0x2, 0x1) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 fcntl(0x3, 0x1, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 fcntl(0x3, 0x2, 0x1) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 bsdthread_create(0x10599EEC4, 0x7FB1E8C09440, 0x7000028AD000) = 42651648 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a033: \
 thread_selfid(0x0, 0x0, 0x0) = 368691 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 geteuid(0x0, 0x0, 0x0) = 502 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 issetugid(0x0, 0x0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 geteuid(0x0, 0x0, 0x0) = 502 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 shm_open(0x7FFF6721ECD8, 0x0, 0x0) = 5 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 mmap(0x0, 0x1000, 0x1, 0x1, 0x5, 0x0) = 0x10556B000 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 close_nocancel(0x5) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 open_nocancel("/etc/.mdns_debug\0", 0x0, 0x0) = -1 Err#2&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 issetugid(0x0, 0x0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 issetugid(0x0, 0x0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 proc_info(0x2, 0x18292, 0x11) = 56 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 proc_info(0x2, 0x18292, 0x11) = 56 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;dtrace:
error on enabled probe ID 2198 (ID 566: syscall::sysctl:return): invalid kernel
access in action #11 at DIF offset 28&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 issetugid(0x0, 0x0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 openat(0xFFFFFFFFFFFFFFFE,
"/Library/Preferences/Logging/com.apple.diagnosticd.filter.plist\0",
0x1000104, 0xFFFFFFFFEA718B40) = 5 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 lseek(0x5, 0x0, 0x2) = 62 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;dtrace:
error on enabled probe ID 2189 (ID 468: syscall::pread:return): invalid kernel
access in action #13 at DIF offset 20&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 close(0x5) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 open("/usr/local/bin/virsh\0", 0x8004, 0x67267DD2) = 5 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 fcntl(0x5, 0x32, 0x7FFEEA718590) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 close(0x5) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 access("/Users/AB84394/.config/libvirt/libvirt.conf\0", 0x0, 0x0) =
-1 Err#2&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 issetugid(0x0, 0x0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 geteuid(0x0, 0x0, 0x0) = 502 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 getuid(0x0, 0x0, 0x0) = 502 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 geteuid(0x0, 0x0, 0x0) = 502 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 getuid(0x0, 0x0, 0x0) = 502 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 geteuid(0x0, 0x0, 0x0) = 502 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 issetugid(0x0, 0x0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 issetugid(0x0, 0x0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 geteuid(0x0, 0x0, 0x0) = 502 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 issetugid(0x0, 0x0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 issetugid(0x0, 0x0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 issetugid(0x0, 0x0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 geteuid(0x0, 0x0, 0x0) = 502 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 stat64("/Users/AB84394/.cache/libvirt\0", 0x7FFEEA718FA0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 open("/Users/AB84394/.cache/libvirt/libvirtd.lock\0", 0x202, 0x180) =
5 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 fcntl(0x5, 0x1, 0xFFFFFFFFE8C09590) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 fcntl(0x5, 0x2, 0x1) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 fcntl(0x5, 0x9, 0x7FFEEA719058) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 socket(0x1, 0x1, 0x0) = 6 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 connect(0x6, 0x7FFEEA7190E0, 0x6A) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 getsockname(0x6, 0x7FFEEA719170, 0x7FFEEA7191F0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 fcntl(0x6, 0x1, 0x5B6A4AF) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 fcntl(0x6, 0x2, 0x1) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 fcntl(0x6, 0x3, 0x0) = 2 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 fcntl(0x6, 0x4, 0x6) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 unlink("/Users/AB84394/.cache/libvirt/libvirtd.lock\0", 0x0, 0x0) = 0
0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 close(0x5) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 pipe(0x0, 0x0, 0x0) = 5 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 fcntl(0x7, 0x1, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 fcntl(0x7, 0x2, 0x1) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 fcntl(0x5, 0x1, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 fcntl(0x5, 0x2, 0x1) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;dtrace:
error on enabled probe ID 2172 (ID 170: syscall::write:return): invalid kernel
access in action #13 at DIF offset 68&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a033: \
 select(0x4, 0x7000028ACC20, 0x7000028ACCA0, 0x7000028ACD20, 0x0 = 1 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a033: \
 recvfrom(0x3, 0x0, 0x0) = -1 Err#38&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;dtrace:
error on enabled probe ID 2172 (ID 170: syscall::write:return): invalid kernel
access in action #13 at DIF offset 68&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 __pthread_sigmask(0x1, 0x7FFEEA71904C, 0x7FFEEA71905C) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a033: \
 ioctl(0x3, 0x4004667F, 0x7000028ACDC0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 select(0x7, 0x7FFEEA718E50, 0x7FFEEA718ED0, 0x7FFEEA718F50, 0x0 = 1 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 __pthread_sigmask(0x3, 0x7FFEEA71905C, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;dtrace:
error on enabled probe ID 2174 (ID 168: syscall::read:return): invalid kernel
access in action #13 at DIF offset 68&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;dtrace:
error on enabled probe ID 2172 (ID 170: syscall::write:return): invalid kernel
access in action #13 at DIF offset 68&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 __pthread_sigmask(0x1, 0x7FFEEA71904C, 0x7FFEEA71905C) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a033: \
 select(0x4, 0x7000028ACC20, 0x7000028ACCA0, 0x7000028ACD20, 0x0 = 1 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a033: \
 recvfrom(0x3, 0x0, 0x0) = -1 Err#38&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a033: \
 ioctl(0x3, 0x4004667F, 0x7000028ACDC0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;dtrace:
error on enabled probe ID 2174 (ID 168: syscall::read:return): invalid kernel
access in action #13 at DIF offset 68&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 select(0x7, 0x7FFEEA718E50, 0x7FFEEA718ED0, 0x7FFEEA718F50, 0x0 = 1 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 recvfrom(0x6, 0x0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 ioctl(0x6, 0x4004667F, 0x7FFEEA718FF0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 __pthread_sigmask(0x3, 0x7FFEEA71905C, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;dtrace:
error on enabled probe ID 2174 (ID 168: syscall::read:return): invalid kernel
access in action #13 at DIF offset 68&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;dtrace:
error on enabled probe ID 2174 (ID 168: syscall::read:return): invalid kernel
access in action #13 at DIF offset 68&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;dtrace:
error on enabled probe ID 2172 (ID 170: syscall::write:return): invalid kernel
access in action #13 at DIF offset 68&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a033: \
 select(0x4, 0x7000028ACC20, 0x7000028ACCA0, 0x7000028ACD20, 0x0 = 1 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a033: \
 recvfrom(0x3, 0x0, 0x0) = -1 Err#38&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a033: \
 ioctl(0x3, 0x4004667F, 0x7000028ACDC0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;dtrace:
error on enabled probe ID 2172 (ID 170: syscall::write:return): invalid kernel
access in action #13 at DIF offset 68&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 __pthread_sigmask(0x1, 0x7FFEEA71904C, 0x7FFEEA71905C) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;dtrace:
error on enabled probe ID 2174 (ID 168: syscall::read:return): invalid kernel
access in action #13 at DIF offset 68&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 select(0x7, 0x7FFEEA718E50, 0x7FFEEA718ED0, 0x7FFEEA718F50, 0x0 = 1 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 __pthread_sigmask(0x3, 0x7FFEEA71905C, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a033: \
 select(0x4, 0x7000028ACC20, 0x7000028ACCA0, 0x7000028ACD20, 0x0 = 1 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a033: \
 recvfrom(0x3, 0x0, 0x0) = -1 Err#38&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;dtrace:
error on enabled probe ID 2172 (ID 170: syscall::write:return): invalid kernel
access in action #13 at DIF offset 68&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 __pthread_sigmask(0x1, 0x7FFEEA71904C, 0x7FFEEA71905C) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a033: \
 ioctl(0x3, 0x4004667F, 0x7000028ACDC0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;dtrace:
error on enabled probe ID 2174 (ID 168: syscall::read:return): invalid kernel
access in action #13 at DIF offset 68&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 select(0x7, 0x7FFEEA718E50, 0x7FFEEA718ED0, 0x7FFEEA718F50, 0x0 = 1 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 recvfrom(0x6, 0x0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 ioctl(0x6, 0x4004667F, 0x7FFEEA718FF0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 __pthread_sigmask(0x3, 0x7FFEEA71905C, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;dtrace:
error on enabled probe ID 2174 (ID 168: syscall::read:return): invalid kernel
access in action #13 at DIF offset 68&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;dtrace:
error on enabled probe ID 2174 (ID 168: syscall::read:return): invalid kernel
access in action #13 at DIF offset 68&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;dtrace:
error on enabled probe ID 2172 (ID 170: syscall::write:return): invalid kernel
access in action #13 at DIF offset 68&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a033: \
 select(0x4, 0x7000028ACC20, 0x7000028ACCA0, 0x7000028ACD20, 0x0 = 1 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a033: \
 recvfrom(0x3, 0x0, 0x0) = -1 Err#38&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;dtrace:
error on enabled probe ID 2172 (ID 170: syscall::write:return): invalid kernel
access in action #13 at DIF offset 68&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a033: \
 ioctl(0x3, 0x4004667F, 0x7000028ACDC0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 __pthread_sigmask(0x1, 0x7FFEEA71904C, 0x7FFEEA71905C) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;dtrace:
error on enabled probe ID 2174 (ID 168: syscall::read:return): invalid kernel
access in action #13 at DIF offset 68&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 select(0x7, 0x7FFEEA718E50, 0x7FFEEA718ED0, 0x7FFEEA718F50, 0x0 = 1 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a033: \
 select(0x4, 0x7000028ACC20, 0x7000028ACCA0, 0x7000028ACD20, 0x0 = 1 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 __pthread_sigmask(0x3, 0x7FFEEA71905C, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a033: \
 recvfrom(0x3, 0x0, 0x0) = -1 Err#38&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;dtrace:
error on enabled probe ID 2172 (ID 170: syscall::write:return): invalid kernel
access in action #13 at DIF offset 68&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a033: \
 ioctl(0x3, 0x4004667F, 0x7000028ACDC0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 __pthread_sigmask(0x1, 0x7FFEEA71904C, 0x7FFEEA71905C) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;dtrace:
error on enabled probe ID 2174 (ID 168: syscall::read:return): invalid kernel
access in action #13 at DIF offset 68&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 select(0x7, 0x7FFEEA718E50, 0x7FFEEA718ED0, 0x7FFEEA718F50, 0x0 = 1 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 recvfrom(0x6, 0x0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 ioctl(0x6, 0x4004667F, 0x7FFEEA718FF0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 __pthread_sigmask(0x3, 0x7FFEEA71905C, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;dtrace:
error on enabled probe ID 2174 (ID 168: syscall::read:return): invalid kernel
access in action #13 at DIF offset 68&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;dtrace:
error on enabled probe ID 2174 (ID 168: syscall::read:return): invalid kernel
access in action #13 at DIF offset 68&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;dtrace:
error on enabled probe ID 2172 (ID 170: syscall::write:return): invalid kernel
access in action #13 at DIF offset 68&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a033: \
 select(0x4, 0x7000028ACC20, 0x7000028ACCA0, 0x7000028ACD20, 0x0 = 1 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a033: \
 recvfrom(0x3, 0x0, 0x0) = -1 Err#38&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;dtrace:
error on enabled probe ID 2172 (ID 170: syscall::write:return): invalid kernel
access in action #13 at DIF offset 68&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a033: \
 ioctl(0x3, 0x4004667F, 0x7000028ACDC0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;dtrace:
error on enabled probe ID 2174 (ID 168: syscall::read:return): invalid kernel
access in action #13 at DIF offset 68&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a033: \
 close(0x7) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;dtrace:
error on enabled probe ID 2173 (ID 956: syscall::write_nocancel:return):
invalid kernel access in action #13 at DIF offset 68&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a033: \
 close(0x5) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;dtrace:
error on enabled probe ID 2173 (ID 956: syscall::write_nocancel:return):
invalid kernel access in action #13 at DIF offset 68&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;dtrace:
error on enabled probe ID 2173 (ID 956: syscall::write_nocancel:return):
invalid kernel access in action #13 at DIF offset 68&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;dtrace:
error on enabled probe ID 2173 (ID 956: syscall::write_nocancel:return):
invalid kernel access in action #13 at DIF offset 68&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;dtrace:
error on enabled probe ID 2172 (ID 170: syscall::write:return): invalid kernel
access in action #13 at DIF offset 68&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a033: \
 close(0x6) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a033: \
 __disable_threadsignal(0x1, 0x0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a033: \
 ulock_wake(0x1000002, 0x7000028AD034, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 ulock_wait(0x1020002, 0x7000028AD034, 0xB03) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;98962/0x5a031: \
 issetugid(0x0, 0x0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Menlo;font-size:12pt;color:black"&gt;  &lt;/p&gt;

&lt;p style="margin:0in;font-family:Calibri;font-size:11pt"&gt;  &lt;/p&gt;

&lt;/div&gt;&lt;blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px \
solid rgb(204,204,204);padding-left:1ex"&gt;&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;&lt;div \
dir="ltr"&gt;&lt;div style="font-family:georgia,serif;color:rgb(102,51,255)"&gt;&lt;br&gt;&lt;/div&gt;&lt;div \
style="font-family:georgia,serif;color:rgb(102,51,255)"&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div dir="ltr" \
class="gmail-m_-2878797956378602797gmail_signature"&gt;&lt;div dir="ltr"&gt;&lt;div \
dir="ltr"&gt;&lt;div dir="ltr"&gt;Keith Bierman&lt;br&gt;&lt;a href="mailto:khbkhb@gmail.com" \
target="_blank"&gt;khbkhb@gmail.com&lt;/a&gt;&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;
 &lt;/blockquote&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190107194212</emailId><senderName>Keith Bierman</senderName><senderEmail>khbkhb@gmail.com</senderEmail><timestampReceived>2019-01-07 19:42:12-0400</timestampReceived><subject>Re: [libvirt-users] virsh on mac os X</subject><body>

[Attachment #2 (multipart/alternative)]


after a reboot into recovery mode, csrutil enable --without dtrace
(ignoring warnings about how horribly unsupported this is). This eliminates
the dtrace errors, but virsh remains ill. Clue bats appreciated!

Last login: Mon Jan  7 12:31:39 on console

/Users/AB84394&gt;sudo dtruss -fn virsh

PID/THRD  SYSCALL(args)  = return

  918/0x3b12:  thread_selfid(0x0, 0x0, 0x0) = 15122 0

  918/0x3b12:  __mac_syscall(0x112B02C89, 0x5A, 0x7FFEE285EF00) = 0 0

  918/0x3b12:  shared_region_check_np(0x7FFEE285ED68, 0x0, 0x0) = 0 0

  918/0x3b12:  stat64("/private/var/db/dyld/dyld_shared_cache_x86_64h\0",
0x7FFEE285ECB0, 0x0) = 0 0

  918/0x3b12:  csrctl(0x0, 0x7FFEE285EA7C, 0x4) = -1 Err#1

  918/0x3b12:  stat64("/usr/local/bin/virsh\0", 0x7FFEE285F400, 0x0) = 0 0

  918/0x3b12:  getpid(0x0, 0x0, 0x0) = 918 0

  918/0x3b12:  proc_info(0x2, 0x396, 0x16) = 1272 0

  918/0x3b12:
stat64("/usr/local/Cellar/libvirt/4.10.0/lib/libvirt-lxc.0.dylib\0",
0x7FFEE285DC00, 0x0) = 0 0

  918/0x3b12:
stat64("/usr/local/Cellar/libvirt/4.10.0/lib/libvirt-lxc.0.dylib\0",
0x7FFEE285E040, 0x0) = 0 0

  918/0x3b12:
open("/usr/local/Cellar/libvirt/4.10.0/lib/libvirt-lxc.0.dylib\0", 0x0,
0x0) = 3 0

  918/0x3b12:  pread(0x3, "\317\372\355\376\a\0", 0x1000, 0x0) = 4096 0

  918/0x3b12:  fcntl(0x3, 0x62, 0x7FFEE28557D0) = 0 0

  918/0x3b12:  mmap(0x10D421000, 0x4000, 0x5, 0x12, 0x3, 0x0) = 0x10D421000
0

  918/0x3b12:  mmap(0x10D425000, 0x1000, 0x3, 0x12, 0x3, 0x4000) =
0x10D425000 0

  918/0x3b12:  mmap(0x10D426000, 0x6CC, 0x1, 0x12, 0x3, 0x5000) =
0x10D426000 0

  918/0x3b12:  fcntl(0x3, 0x2C, 0x7FFEE28559D0) = 0 0

  918/0x3b12:  close(0x3) = 0 0

  918/0x3b12:
stat64("/usr/local/Cellar/libvirt/4.10.0/lib/libvirt-qemu.0.dylib\0",
0x7FFEE285DC00, 0x0) = 0 0

  918/0x3b12:
stat64("/usr/local/Cellar/libvirt/4.10.0/lib/libvirt-qemu.0.dylib\0",
0x7FFEE285E040, 0x0) = 0 0

  918/0x3b12:
open("/usr/local/Cellar/libvirt/4.10.0/lib/libvirt-qemu.0.dylib\0", 0x0,
0x0) = 3 0

  918/0x3b12:  pread(0x3, "\317\372\355\376\a\0", 0x1000, 0x0) = 4096 0

  918/0x3b12:  fcntl(0x3, 0x62, 0x7FFEE28557D0) = 0 0

  918/0x3b12:  mmap(0x10D42E000, 0x4000, 0x5, 0x12, 0x3, 0x0) = 0x10D42E000
0

  918/0x3b12:  mmap(0x10D432000, 0x1000, 0x3, 0x12, 0x3, 0x4000) =
0x10D432000 0

  918/0x3b12:  mmap(0x10D433000, 0x4D4, 0x1, 0x12, 0x3, 0x5000) =
0x10D433000 0

  918/0x3b12:  fcntl(0x3, 0x2C, 0x7FFEE28559D0) = 0 0

  918/0x3b12:  close(0x3) = 0 0

  918/0x3b12:
stat64("/usr/local/Cellar/libvirt/4.10.0/lib/libvirt.0.dylib\0",
0x7FFEE285DC00, 0x0) = 0 0

  918/0x3b12:
stat64("/usr/local/Cellar/libvirt/4.10.0/lib/libvirt.0.dylib\0",
0x7FFEE285E040, 0x0) = 0 0

  918/0x3b12:
open("/usr/local/Cellar/libvirt/4.10.0/lib/libvirt.0.dylib\0", 0x0, 0x0) =
3 0

  918/0x3b12:  pread(0x3, "\317\372\355\376\a\0", 0x1000, 0x0) = 4096 0

  918/0x3b12:  fcntl(0x3, 0x62, 0x7FFEE28557D0) = 0 0

  918/0x3b12:  mmap(0x10D438000, 0x252000, 0x5, 0x12, 0x3, 0x0) =
0x10D438000 0

  918/0x3b12:  mmap(0x10D68A000, 0x12000, 0x3, 0x12, 0x3, 0x252000) =
0x10D68A000 0

  918/0x3b12:  mmap(0x10D69D000, 0x8FED4, 0x1, 0x12, 0x3, 0x264000) =
0x10D69D000 0

  918/0x3b12:  fcntl(0x3, 0x2C, 0x7FFEE28559D0) = 0 0

  918/0x3b12:  close(0x3) = 0 0

  918/0x3b12:  stat64("/usr/local/opt/yajl/lib/libyajl.2.dylib\0",
0x7FFEE285DC00, 0x0) = 0 0

  918/0x3b12:  stat64("/usr/local/opt/yajl/lib/libyajl.2.dylib\0",
0x7FFEE285E040, 0x0) = 0 0

  918/0x3b12:  open("/usr/local/opt/yajl/lib/libyajl.2.dylib\0", 0x0, 0x0)
= 3 0

  918/0x3b12:  pread(0x3, "\317\372\355\376\a\0", 0x1000, 0x0) = 4096 0

  918/0x3b12:  fcntl(0x3, 0x62, 0x7FFEE28557D0) = 0 0

  918/0x3b12:  mmap(0x10D72E000, 0x7000, 0x5, 0x12, 0x3, 0x0) = 0x10D72E000
0

  918/0x3b12:  mmap(0x10D735000, 0x1000, 0x3, 0x12, 0x3, 0x7000) =
0x10D735000 0

  918/0x3b12:  mmap(0x10D736000, 0x1150, 0x1, 0x12, 0x3, 0x8000) =
0x10D736000 0

  918/0x3b12:  fcntl(0x3, 0x2C, 0x7FFEE28559D0) = 0 0

  918/0x3b12:  close(0x3) = 0 0

  918/0x3b12:  stat64("/usr/lib/libSystem.B.dylib\0", 0x7FFEE285E040, 0x0)
= 0 0

  918/0x3b12:  stat64("/usr/lib/libsasl2.2.dylib\0", 0x7FFEE285E040, 0x0) =
0 0

  918/0x3b12:  stat64("/usr/local/opt/gnutls/lib/libgnutls.30.dylib\0",
0x7FFEE285DC00, 0x0) = 0 0

  918/0x3b12:  stat64("/usr/local/opt/gnutls/lib/libgnutls.30.dylib\0",
0x7FFEE285E040, 0x0) = 0 0

  918/0x3b12:  open("/usr/local/opt/gnutls/lib/libgnutls.30.dylib\0", 0x0,
0x0) = 3 0

  918/0x3b12:  pread(0x3, "\317\372\355\376\a\0", 0x1000, 0x0) = 4096 0

  918/0x3b12:  fcntl(0x3, 0x62, 0x7FFEE28557D0) = 0 0

  918/0x3b12:  mmap(0x10D739000, 0x135000, 0x5, 0x12, 0x3, 0x0) =
0x10D739000 0

  918/0x3b12:  mmap(0x10D86E000, 0xF000, 0x3, 0x12, 0x3, 0x135000) =
0x10D86E000 0

  918/0x3b12:  mmap(0x10D87E000, 0x31E5C, 0x1, 0x12, 0x3, 0x144000) =
0x10D87E000 0

  918/0x3b12:  fcntl(0x3, 0x2C, 0x7FFEE28559D0) = 0 0

  918/0x3b12:  madvise(0x10D87E000, 0x2000, 0x2) = 0 0

  918/0x3b12:  close(0x3) = 0 0

  918/0x3b12:  stat64("/usr/lib/libcurl.4.dylib\0", 0x7FFEE285E040, 0x0) =
0 0

  918/0x3b12:  stat64("/usr/lib/libxml2.2.dylib\0", 0x7FFEE285E040, 0x0) =
0 0

  918/0x3b12:  stat64("/usr/lib/system/libcache.dylib\0", 0x7FFEE285D900,
0x0) = 0 0

  918/0x3b12:  stat64("/usr/lib/system/libcommonCrypto.dylib\0",
0x7FFEE285D900, 0x0) = 0 0

  918/0x3b12:  stat64("/usr/lib/system/libcompiler_rt.dylib\0",
0x7FFEE285D900, 0x0) = 0 0

  918/0x3b12:  stat64("/usr/lib/system/libcopyfile.dylib\0",
0x7FFEE285D900, 0x0) = 0 0

  918/0x3b12:  stat64("/usr/lib/system/libcorecrypto.dylib\0",
0x7FFEE285D900, 0x0) = 0 0

  918/0x3b12:  stat64("/usr/lib/system/libdispatch.dylib\0",
0x7FFEE285D900, 0x0) = 0 0

  918/0x3b12:  stat64("/usr/lib/system/libdyld.dylib\0", 0x7FFEE285D900,
0x0) = 0 0

  918/0x3b12:  stat64("/usr/lib/system/libkeymgr.dylib\0", 0x7FFEE285D900,
0x0) = 0 0

  918/0x3b12:  stat64("/usr/lib/system/liblaunch.dylib\0", 0x7FFEE285D900,
0x0) = 0 0

  918/0x3b12:  stat64("/usr/lib/system/libmacho.dylib\0", 0x7FFEE285D900,
0x0) = 0 0

  918/0x3b12:  stat64("/usr/lib/system/libquarantine.dylib\0",
0x7FFEE285D900, 0x0) = 0 0

  918/0x3b12:  stat64("/usr/lib/system/libremovefile.dylib\0",
0x7FFEE285D900, 0x0) = 0 0

  918/0x3b12:  stat64("/usr/lib/system/libsystem_asl.dylib\0",
0x7FFEE285D900, 0x0) = 0 0

  918/0x3b12:  stat64("/usr/lib/system/libsystem_blocks.dylib\0",
0x7FFEE285D900, 0x0) = 0 0

  918/0x3b12:  stat64("/usr/lib/system/libsystem_c.dylib\0",
0x7FFEE285D900, 0x0) = 0 0

  918/0x3b12:  stat64("/usr/lib/system/libsystem_configuration.dylib\0",
0x7FFEE285D900, 0x0) = 0 0

  918/0x3b12:  stat64("/usr/lib/system/libsystem_coreservices.dylib\0",
0x7FFEE285D900, 0x0) = 0 0

  918/0x3b12:  stat64("/usr/lib/system/libsystem_darwin.dylib\0",
0x7FFEE285D900, 0x0) = 0 0

  918/0x3b12:  stat64("/usr/lib/system/libsystem_dnssd.dylib\0",
0x7FFEE285D900, 0x0) = 0 0

  918/0x3b12:  stat64("/usr/lib/system/libsystem_info.dylib\0",
0x7FFEE285D900, 0x0) = 0 0

  918/0x3b12:  stat64("/usr/lib/system/libsystem_m.dylib\0",
0x7FFEE285D900, 0x0) = 0 0

  918/0x3b12:  stat64("/usr/lib/system/libsystem_malloc.dylib\0",
0x7FFEE285D900, 0x0) = 0 0

  918/0x3b12:  stat64("/usr/lib/system/libsystem_networkextension.dylib\0",
0x7FFEE285D900, 0x0) = 0 0

  918/0x3b12:  stat64("/usr/lib/system/libsystem_notify.dylib\0",
0x7FFEE285D900, 0x0) = 0 0

  918/0x3b12:  stat64("/usr/lib/system/libsystem_sandbox.dylib\0",
0x7FFEE285D900, 0x0) = 0 0

  918/0x3b12:  stat64("/usr/lib/system/libsystem_secinit.dylib\0",
0x7FFEE285D900, 0x0) = 0 0

  918/0x3b12:  stat64("/usr/lib/system/libsystem_kernel.dylib\0",
0x7FFEE285D900, 0x0) = 0 0

  918/0x3b12:  stat64("/usr/lib/system/libsystem_platform.dylib\0",
0x7FFEE285D900, 0x0) = 0 0

  918/0x3b12:  stat64("/usr/lib/system/libsystem_pthread.dylib\0",
0x7FFEE285D900, 0x0) = 0 0

  918/0x3b12:  stat64("/usr/lib/system/libsystem_symptoms.dylib\0",
0x7FFEE285D900, 0x0) = 0 0

  918/0x3b12:  stat64("/usr/lib/system/libsystem_trace.dylib\0",
0x7FFEE285D900, 0x0) = 0 0

  918/0x3b12:  stat64("/usr/lib/system/libunwind.dylib\0", 0x7FFEE285D900,
0x0) = 0 0

  918/0x3b12:  stat64("/usr/lib/system/libxpc.dylib\0", 0x7FFEE285D900,
0x0) = 0 0

  918/0x3b12:  stat64("/usr/lib/libobjc.A.dylib\0", 0x7FFEE285CC00, 0x0) =
0 0

  918/0x3b12:  stat64("/usr/lib/libc++abi.dylib\0", 0x7FFEE285C2E0, 0x0) =
0 0

  918/0x3b12:  stat64("/usr/lib/libc++.1.dylib\0", 0x7FFEE285C2E0, 0x0) = 0
0

  918/0x3b12:  stat64("/usr/lib/libicucore.A.dylib\0", 0x7FFEE285DCA0, 0x0)
= 0 0

  918/0x3b12:  stat64("/usr/lib/libz.1.dylib\0", 0x7FFEE285DCA0, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/Frameworks/Security.framework/Versions/A/Security\0",
0x7FFEE285DC10, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation\0",
 0x7FFEE285DC10, 0x0) = 0 0

  918/0x3b12:  stat64("/usr/local/opt/p11-kit/lib/libp11-kit.0.dylib\0",
0x7FFEE285D7D0, 0x0) = 0 0

  918/0x3b12:  stat64("/usr/local/opt/p11-kit/lib/libp11-kit.0.dylib\0",
0x7FFEE285DC10, 0x0) = 0 0

  918/0x3b12:  open("/usr/local/opt/p11-kit/lib/libp11-kit.0.dylib\0", 0x0,
0x0 = 3 0

  918/0x3b12:  pread(0x3, "\317\372\355\376\a\0", 0x1000, 0x0) = 4096 0

  918/0x3b12:  fcntl(0x3, 0x62, 0x7FFEE28553A0) = 0 0

  918/0x3b12:  mmap(0x10D8B5000, 0xA8000, 0x5, 0x12, 0x3, 0x0) =
0x10D8B5000 0

  918/0x3b12:  mmap(0x10D95D000, 0x14000, 0x3, 0x12, 0x3, 0xA8000) =
0x10D95D000 0

  918/0x3b12:  mmap(0x10D971000, 0x34AB8, 0x1, 0x12, 0x3, 0xBC000) =
0x10D971000 0

  918/0x3b12:  fcntl(0x3, 0x2C, 0x7FFEE28555A0) = 0 0

  918/0x3b12:  close(0x3) = 0 0

  918/0x3b12:
stat64("/usr/local/opt/libunistring/lib/libunistring.2.dylib\0",
0x7FFEE285D7D0, 0x0) = 0 0

  918/0x3b12:
stat64("/usr/local/opt/libunistring/lib/libunistring.2.dylib\0",
0x7FFEE285DC10, 0x0) = 0 0

  918/0x3b12:
open("/usr/local/opt/libunistring/lib/libunistring.2.dylib\0", 0x0, 0x0) =
3 0

  918/0x3b12:  pread(0x3, "\317\372\355\376\a\0", 0x1000, 0x0) = 4096 0

  918/0x3b12:  fcntl(0x3, 0x62, 0x7FFEE28553A0) = 0 0

  918/0x3b12:  mmap(0x10D9A6000, 0x164000, 0x5, 0x12, 0x3, 0x0) =
0x10D9A6000 0

  918/0x3b12:  mmap(0x10DB0A000, 0x3000, 0x3, 0x12, 0x3, 0x164000) =
0x10DB0A000 0

  918/0x3b12:  mmap(0x10DB0D000, 0xE130, 0x1, 0x12, 0x3, 0x167000) =
0x10DB0D000 0

  918/0x3b12:  fcntl(0x3, 0x2C, 0x7FFEE28555A0) = 0 0

  918/0x3b12:  close(0x3) = 0 0

  918/0x3b12:  stat64("/usr/local/opt/libtasn1/lib/libtasn1.6.dylib\0",
0x7FFEE285D7D0, 0x0) = 0 0

  918/0x3b12:  stat64("/usr/local/opt/libtasn1/lib/libtasn1.6.dylib\0",
0x7FFEE285DC10, 0x0) = 0 0

  918/0x3b12:  open("/usr/local/opt/libtasn1/lib/libtasn1.6.dylib\0", 0x0,
0x0) = 3 0

  918/0x3b12:  pread(0x3, "\317\372\355\376\a\0", 0x1000, 0x0) = 4096 0

  918/0x3b12:  fcntl(0x3, 0x62, 0x7FFEE28553A0) = 0 0

  918/0x3b12:  mmap(0x10DB22000, 0xC000, 0x5, 0x12, 0x3, 0x0) = 0x10DB22000
0

  918/0x3b12:  mmap(0x10DB2E000, 0x1000, 0x3, 0x12, 0x3, 0xC000) =
0x10DB2E000 0

  918/0x3b12:  mmap(0x10DB2F000, 0x19A8, 0x1, 0x12, 0x3, 0xD000) =
0x10DB2F000 0

  918/0x3b12:  fcntl(0x3, 0x2C, 0x7FFEE28555A0) = 0 0

  918/0x3b12:  close(0x3) = 0 0

  918/0x3b12:  stat64("/usr/local/opt/nettle/lib/libnettle.6.dylib\0",
0x7FFEE285D7D0, 0x0) = 0 0

  918/0x3b12:  stat64("/usr/local/opt/nettle/lib/libnettle.6.dylib\0",
0x7FFEE285DC10, 0x0) = 0 0

  918/0x3b12:  open("/usr/local/opt/nettle/lib/libnettle.6.dylib\0", 0x0,
0x0) = 3 0

  918/0x3b12:  pread(0x3, "\317\372\355\376\a\0", 0x1000, 0x0) = 4096 0

  918/0x3b12:  fcntl(0x3, 0x62, 0x7FFEE28553A0) = 0 0

  918/0x3b12:  mmap(0x10DB33000, 0x26000, 0x5, 0x12, 0x3, 0x0) =
0x10DB33000 0

  918/0x3b12:  mmap(0x10DB59000, 0x1000, 0x3, 0x12, 0x3, 0x26000) =
0x10DB59000 0

  918/0x3b12:  mmap(0x10DB5A000, 0x7B10, 0x1, 0x12, 0x3, 0x27000) =
0x10DB5A000 0

  918/0x3b12:  fcntl(0x3, 0x2C, 0x7FFEE28555A0) = 0 0

  918/0x3b12:  close(0x3) = 0 0

  918/0x3b12:  stat64("/usr/local/opt/nettle/lib/libhogweed.4.dylib\0",
0x7FFEE285D7D0, 0x0) = 0 0

  918/0x3b12:  stat64("/usr/local/opt/nettle/lib/libhogweed.4.dylib\0",
0x7FFEE285DC10, 0x0) = 0 0

  918/0x3b12:  open("/usr/local/opt/nettle/lib/libhogweed.4.dylib\0", 0x0,
0x0) = 3 0

  918/0x3b12:  pread(0x3, "\317\372\355\376\a\0", 0x1000, 0x0) = 4096 0

  918/0x3b12:  fcntl(0x3, 0x62, 0x7FFEE28553A0) = 0 0

  918/0x3b12:  mmap(0x10DB65000, 0x2A000, 0x5, 0x12, 0x3, 0x0) =
0x10DB65000 0

  918/0x3b12:  mmap(0x10DB8F000, 0x1000, 0x3, 0x12, 0x3, 0x2A000) =
0x10DB8F000 0

  918/0x3b12:  mmap(0x10DB90000, 0x65E0, 0x1, 0x12, 0x3, 0x2B000) =
0x10DB90000 0

  918/0x3b12:  fcntl(0x3, 0x2C, 0x7FFEE28555A0) = 0 0

  918/0x3b12:  close(0x3) = 0 0

  918/0x3b12:  stat64("/usr/local/opt/gmp/lib/libgmp.10.dylib\0",
0x7FFEE285D7D0, 0x0) = 0 0

  918/0x3b12:  stat64("/usr/local/opt/gmp/lib/libgmp.10.dylib\0",
0x7FFEE285DC10, 0x0) = 0 0

  918/0x3b12:  open("/usr/local/opt/gmp/lib/libgmp.10.dylib\0", 0x0, 0x0) =
3 0

  918/0x3b12:  pread(0x3, "\317\372\355\376\a\0", 0x1000, 0x0) = 4096 0

  918/0x3b12:  fcntl(0x3, 0x62, 0x7FFEE28553A0) = 0 0

  918/0x3b12:  mmap(0x10DB9A000, 0x5D000, 0x5, 0x12, 0x3, 0x0) =
0x10DB9A000 0

  918/0x3b12:  mmap(0x10DBF7000, 0x1000, 0x3, 0x12, 0x3, 0x5D000) =
0x10DBF7000 0

  918/0x3b12:  mmap(0x10DBF8000, 0x92DC, 0x1, 0x12, 0x3, 0x5E000) =
0x10DBF8000 0

  918/0x3b12:  fcntl(0x3, 0x2C, 0x7FFEE28555A0) = 0 0

  918/0x3b12:  close(0x3) = 0 0

  918/0x3b12:
stat64("/System/Library/Frameworks/Foundation.framework/Versions/C/Foundation\0",
0x7FFEE285D9C0, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/PrivateFrameworks/AppleFSCompression.framework/Versions/A/AppleFSCompression\0",
 0x7FFEE285D9C0, 0x0) = 0 0

  918/0x3b12:  stat64("/usr/lib/libDiagnosticMessagesClient.dylib\0",
0x7FFEE285D9C0, 0x0) = 0 0

  918/0x3b12:  stat64("/usr/lib/libOpenScriptingUtil.dylib\0",
0x7FFEE285D9C0, 0x0) = 0 0

  918/0x3b12:  stat64("/usr/lib/libauto.dylib\0", 0x7FFEE285D9C0, 0x0) = 0 0

  918/0x3b12:  stat64("/usr/lib/libbsm.0.dylib\0", 0x7FFEE285D9C0, 0x0) = 0
0

  918/0x3b12:  stat64("/usr/lib/libcoretls.dylib\0", 0x7FFEE285D9C0, 0x0) =
0 0

  918/0x3b12:  stat64("/usr/lib/libcoretls_cfhelpers.dylib\0",
0x7FFEE285D9C0, 0x0) = 0 0

  918/0x3b12:  stat64("/usr/lib/libpam.2.dylib\0", 0x7FFEE285D9C0, 0x0) = 0
0

  918/0x3b12:  stat64("/usr/lib/libsqlite3.dylib\0", 0x7FFEE285D9C0, 0x0) =
0 0

  918/0x3b12:  stat64("/usr/lib/libxar.1.dylib\0", 0x7FFEE285D9C0, 0x0) = 0
0

  918/0x3b12:
stat64("/System/Library/Frameworks/IOKit.framework/Versions/A/IOKit\0",
0x7FFEE285D9C0, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/Frameworks/DiskArbitration.framework/Versions/A/DiskArbitration\0",
 0x7FFEE285D790, 0x0) = 0 0

  918/0x3b12:  stat64("/usr/lib/libarchive.2.dylib\0", 0x7FFEE285D790, 0x0)
= 0 0

  918/0x3b12:
stat64("/System/Library/Frameworks/CFNetwork.framework/Versions/A/CFNetwork\0",
0x7FFEE285D790, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/Frameworks/SystemConfiguration.framework/Versions/A/SystemConfiguration\0",
 0x7FFEE285D790, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/Frameworks/CoreServices.framework/Versions/A/CoreServices\0",
0x7FFEE285D790, 0x0) = 0 0

  918/0x3b12:  stat64("/usr/lib/liblangid.dylib\0", 0x7FFEE285D790, 0x0) =
0 0

  918/0x3b12:  stat64("/usr/lib/libCRFSuite.dylib\0", 0x7FFEE285D790, 0x0)
= 0 0

  918/0x3b12:  stat64("/usr/lib/libenergytrace.dylib\0", 0x7FFEE285D520,
0x0) = 0 0

  918/0x3b12:  stat64("/usr/lib/system/libkxld.dylib\0", 0x7FFEE285D520,
0x0) = 0 0

  918/0x3b12:  stat64("/usr/lib/libbz2.1.0.dylib\0", 0x7FFEE285D660, 0x0) =
0 0

  918/0x3b12:  stat64("/usr/lib/liblzma.5.dylib\0", 0x7FFEE285D660, 0x0) =
0 0

  918/0x3b12:  stat64("/usr/lib/libnetwork.dylib\0", 0x7FFEE285D570, 0x0) =
0 0

  918/0x3b12:  stat64("/usr/lib/libapple_nghttp2.dylib\0", 0x7FFEE285D570,
0x0) = 0 0

  918/0x3b12:  stat64("/usr/lib/libpcap.A.dylib\0", 0x7FFEE285D2F0, 0x0) =
0 0

  918/0x3b12:
stat64("/System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/FSEvents.framework/Versions/A/FSEvents\0",
 0x7FFEE285D5C0, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/CarbonCore.framework/Versions/A/CarbonCore\0",
 0x7FFEE285D5C0, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/Metadata.framework/Versions/A/Metadata\0",
 0x7FFEE285D5C0, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/OSServices.framework/Versions/A/OSServices\0",
 0x7FFEE285D5C0, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/SearchKit.framework/Versions/A/SearchKit\0",
 0x7FFEE285D5C0, 0x0 = 0 0

  918/0x3b12:
stat64("/System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/AE.framework/Versions/A/AE\0",
 0x7FFEE285D5C0, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/LaunchServices.framework/Versions/A/LaunchServices\0",
 0x7FFEE285D5C0, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/DictionaryServices.framework/Versions/A/DictionaryServices\0",
 0x7FFEE285D5C0, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/SharedFileList.framework/Versions/A/SharedFileList\0",
 0x7FFEE285D5C0, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/Frameworks/NetFS.framework/Versions/A/NetFS\0",
0x7FFEE285D420, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/PrivateFrameworks/NetAuth.framework/Versions/A/NetAuth\0",
0x7FFEE285D2B0, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/PrivateFrameworks/login.framework/Versions/A/Frameworks/loginsupport.framework/Versions/A/loginsupport\0",
 0x7FFEE285D1B0, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/PrivateFrameworks/TCC.framework/Versions/A/TCC\0",
0x7FFEE285D3F0, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/PrivateFrameworks/CoreNLP.framework/Versions/A/CoreNLP\0",
0x7FFEE285D3F0, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/PrivateFrameworks/MetadataUtilities.framework/Versions/A/MetadataUtilities\0",
 0x7FFEE285D3F0, 0x0) = 0 0

  918/0x3b12:  stat64("/usr/lib/libmecabra.dylib\0", 0x7FFEE285D3F0, 0x0) =
0 0

  918/0x3b12:
stat64("/System/Library/Frameworks/ApplicationServices.framework/Versions/A/ApplicationServices\0",
 0x7FFEE285D2B0, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/Frameworks/CoreGraphics.framework/Versions/A/CoreGraphics\0",
0x7FFEE285D0C0, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/Frameworks/CoreText.framework/Versions/A/CoreText\0",
0x7FFEE285D0C0, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/Frameworks/ImageIO.framework/Versions/A/ImageIO\0",
0x7FFEE285D0C0, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/Frameworks/ColorSync.framework/Versions/A/ColorSync\0",
0x7FFEE285D0C0, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ATS.framework/Versions/A/ATS\0",
 0x7FFEE285D0C0, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ColorSyncLegacy.framework/Versions/A/ColorSyncLegacy\0",
 0x7FFEE285D0C0, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/HIServices.framework/Versions/A/HIServices\0",
 0x7FFEE285D0C0, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/LangAnalysis.framework/Versions/A/LangAnalysis\0",
 0x7FFEE285D0C0, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/PrintCore.framework/Versions/A/PrintCore\0",
 0x7FFEE285D0C0, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/QD.framework/Versions/A/QD\0",
 0x7FFEE285D0C0, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/SpeechSynthesis.framework/Versions/A/SpeechSynthesis\0",
 0x7FFEE285D0C0, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/PrivateFrameworks/SkyLight.framework/Versions/A/SkyLight\0",
0x7FFEE285CF20, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/Frameworks/IOSurface.framework/Versions/A/IOSurface\0",
0x7FFEE285CF20, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/Frameworks/Accelerate.framework/Versions/A/Accelerate\0",
0x7FFEE285CF20, 0x0) = 0 0

  918/0x3b12:  stat64("/usr/lib/libcompression.dylib\0", 0x7FFEE285CC70,
0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/Frameworks/CoreDisplay.framework/Versions/A/CoreDisplay\0",
0x7FFEE285CC70, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/Frameworks/Metal.framework/Versions/A/Metal\0",
0x7FFEE285CC70, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/Frameworks/MetalPerformanceShaders.framework/Versions/A/MetalPerformanceShaders\0",
 0x7FFEE285CC70, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/PrivateFrameworks/MultitouchSupport.framework/Versions/A/MultitouchSupport\0",
 0x7FFEE285CC70, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/Frameworks/QuartzCore.framework/Versions/A/QuartzCore\0",
0x7FFEE285CC70, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vImage.framework/Versions/A/vImage\0",
 0x7FFEE285CB70, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/vecLib\0",
 0x7FFEE285CB70, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libvMisc.dylib\0",
 0x7FFEE285C9D0, 0x0 = 0 0

  918/0x3b12:
stat64("/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libvDSP.dylib\0",
 0x7FFEE285C9D0, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libBLAS.dylib\0",
 0x7FFEE285C9D0, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libLAPACK.dylib\0",
 0x7FFEE285C9D0, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libLinearAlgebra.dylib\0",
 0x7FFEE285C9D0, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libSparseBLAS.dylib\0",
 0x7FFEE285C9D0, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libQuadrature.dylib\0",
 0x7FFEE285C9D0, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libBNNS.dylib\0",
 0x7FFEE285C9D0, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libSparse.dylib\0",
 0x7FFEE285C9D0, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/PrivateFrameworks/GPUWrangler.framework/Versions/A/GPUWrangler\0",
 0x7FFEE285CA20, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/PrivateFrameworks/IOAccelerator.framework/Versions/A/IOAccelerator\0",
 0x7FFEE285CA20, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/PrivateFrameworks/IOPresentment.framework/Versions/A/IOPresentment\0",
 0x7FFEE285CA20, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/PrivateFrameworks/DSExternalDisplay.framework/Versions/A/DSExternalDisplay\0",
 0x7FFEE285CA20, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libCoreFSCache.dylib\0",
 0x7FFEE285C880, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/Frameworks/MetalPerformanceShaders.framework/Frameworks/MPSCore.framework/Versions/A/MPSCore\0",
 0x7FFEE285CAE0, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/Frameworks/MetalPerformanceShaders.framework/Frameworks/MPSImage.framework/Versions/A/MPSImage\0",
 0x7FFEE285CAE0, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/Frameworks/MetalPerformanceShaders.framework/Frameworks/MPSNeuralNetwork.framework/Versions/A/MPSNeuralNetwork\0",
 0x7FFEE285CAE0, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/Frameworks/MetalPerformanceShaders.framework/Frameworks/MPSMatrix.framework/Versions/A/MPSMatrix\0",
 0x7FFEE285CAE0, 0x0 = 0 0

  918/0x3b12:
stat64("/System/Library/Frameworks/MetalPerformanceShaders.framework/Frameworks/MPSRayIntersector.framework/Versions/A/MPSRayIntersector\0",
 0x7FFEE285CAE0, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/PrivateFrameworks/MetalTools.framework/Versions/A/MetalTools\0",
 0x7FFEE285C950, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/PrivateFrameworks/AggregateDictionary.framework/Versions/A/AggregateDictionary\0",
 0x7FFEE285C950, 0x0) = 0 0

  918/0x3b12:  stat64("/usr/lib/libMobileGestalt.dylib\0", 0x7FFEE285C7F0,
0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/Frameworks/CoreImage.framework/Versions/A/CoreImage\0",
0x7FFEE285CA20, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/Frameworks/CoreVideo.framework/Versions/A/CoreVideo\0",
0x7FFEE285CA20, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/Frameworks/OpenGL.framework/Versions/A/OpenGL\0",
0x7FFEE285CA20, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/PrivateFrameworks/GraphVisualizer.framework/Versions/A/GraphVisualizer\0",
 0x7FFEE285C790, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/PrivateFrameworks/FaceCore.framework/Versions/A/FaceCore\0",
0x7FFEE285C790, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/Frameworks/OpenCL.framework/Versions/A/OpenCL\0",
0x7FFEE285C790, 0x0) = 0 0

  918/0x3b12:  stat64("/usr/lib/libFosl_dynamic.dylib\0", 0x7FFEE285C790,
0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/PrivateFrameworks/OTSVG.framework/Versions/A/OTSVG\0",
0x7FFEE285C590, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ATS.framework/Versions/A/Resources/libFontParser.dylib\0",
 0x7FFEE285C590, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ATS.framework/Versions/A/Resources/libFontRegistry.dylib\0",
 0x7FFEE285C590, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/Frameworks/ImageIO.framework/Versions/A/Resources/libJPEG.dylib\0",
 0x7FFEE285C170, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/Frameworks/ImageIO.framework/Versions/A/Resources/libTIFF.dylib\0",
 0x7FFEE285C170, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/Frameworks/ImageIO.framework/Versions/A/Resources/libPng.dylib\0",
 0x7FFEE285C170, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/Frameworks/ImageIO.framework/Versions/A/Resources/libGIF.dylib\0",
 0x7FFEE285C170, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/Frameworks/ImageIO.framework/Versions/A/Resources/libJP2.dylib\0",
 0x7FFEE285C170, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/Frameworks/ImageIO.framework/Versions/A/Resources/libRadiance.dylib\0",
 0x7FFEE285C170, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/PrivateFrameworks/AppleJPEG.framework/Versions/A/AppleJPEG\0",
 0x7FFEE285C170, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libGFXShared.dylib\0",
 0x7FFEE285C460, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libGLU.dylib\0",
 0x7FFEE285C260, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libGL.dylib\0",
 0x7FFEE285C260, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libGLImage.dylib\0",
 0x7FFEE285C0D0, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libCVMSPluginSupport.dylib\0",
 0x7FFEE285BFD0, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libCoreVMClient.dylib\0",
 0x7FFEE285BEC0, 0x0) = 0 0

  918/0x3b12:  stat64("/usr/lib/libcups.2.dylib\0", 0x7FFEE285CE70, 0x0) =
0 0

  918/0x3b12:
stat64("/System/Library/Frameworks/Kerberos.framework/Versions/A/Kerberos\0",
0x7FFEE285CCE0, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/Frameworks/GSS.framework/Versions/A/GSS\0",
0x7FFEE285CCE0, 0x0) = 0 0

  918/0x3b12:  stat64("/usr/lib/libresolv.9.dylib\0", 0x7FFEE285CCE0, 0x0)
= 0 0

  918/0x3b12:  stat64("/usr/lib/libiconv.2.dylib\0", 0x7FFEE285CCE0, 0x0) =
0 0

  918/0x3b12:
stat64("/System/Library/PrivateFrameworks/Heimdal.framework/Versions/A/Heimdal\0",
0x7FFEE285CBD0, 0x0) = 0 0

  918/0x3b12:  stat64("/usr/lib/libheimdal-asn1.dylib\0", 0x7FFEE285CA00,
0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/Frameworks/OpenDirectory.framework/Versions/A/OpenDirectory\0",
 0x7FFEE285CB50, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/PrivateFrameworks/CommonAuth.framework/Versions/A/CommonAuth\0",
 0x7FFEE285CB50, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/Frameworks/OpenDirectory.framework/Versions/A/Frameworks/CFOpenDirectory.framework/Versions/A/CFOpenDirectory\0",
 0x7FFEE285C9E0, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/Frameworks/SecurityFoundation.framework/Versions/A/SecurityFoundation\0",
 0x7FFEE285C9E0, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/PrivateFrameworks/APFS.framework/Versions/A/APFS\0",
0x7FFEE285C8A0, 0x0) = 0 0

  918/0x3b12:  stat64("/usr/lib/libutil.dylib\0", 0x7FFEE285C790, 0x0) = 0 0

  918/0x3b12:  stat64("/usr/lib/libcharset.1.dylib\0", 0x7FFEE285CC00, 0x0)
= 0 0

  918/0x3b12:
stat64("/System/Library/Frameworks/CoreAudio.framework/Versions/A/CoreAudio\0",
0x7FFEE285CF50, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/Frameworks/AudioToolbox.framework/Versions/A/AudioToolbox\0",
0x7FFEE285CF50, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/PrivateFrameworks/AppleSauce.framework/Versions/A/AppleSauce\0",
 0x7FFEE285CDE0, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/PrivateFrameworks/AssertionServices.framework/Versions/A/AssertionServices\0",
 0x7FFEE285CDE0, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/PrivateFrameworks/BaseBoard.framework/Versions/A/BaseBoard\0",
 0x7FFEE285CCB0, 0x0) = 0 0

  918/0x3b12:  stat64("/usr/lib/libmecab.1.0.0.dylib\0", 0x7FFEE285D250,
0x0) = 0 0

  918/0x3b12:  stat64("/usr/lib/libgermantok.dylib\0", 0x7FFEE285D250, 0x0)
= 0 0

  918/0x3b12:  stat64("/usr/lib/libThaiTokenizer.dylib\0", 0x7FFEE285D250,
0x0) = 0 0

  918/0x3b12:  stat64("/usr/lib/libChineseTokenizer.dylib\0",
0x7FFEE285D250, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/PrivateFrameworks/LanguageModeling.framework/Versions/A/LanguageModeling\0",
 0x7FFEE285D110, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/PrivateFrameworks/CoreEmoji.framework/Versions/A/CoreEmoji\0",
 0x7FFEE285CF40, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/PrivateFrameworks/Lexicon.framework/Versions/A/Lexicon\0",
0x7FFEE285CF40, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/PrivateFrameworks/LinguisticData.framework/Versions/A/LinguisticData\0",
 0x7FFEE285CF40, 0x0) = 0 0

  918/0x3b12:  stat64("/usr/lib/libcmph.dylib\0", 0x7FFEE285CF40, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/Frameworks/CoreData.framework/Versions/A/CoreData\0",
0x7FFEE285D1C0, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/Frameworks/ServiceManagement.framework/Versions/A/ServiceManagement\0",
 0x7FFEE285D220, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/PrivateFrameworks/BackgroundTaskManagement.framework/Versions/A/BackgroundTaskManagement\0",
 0x7FFEE285D0C0, 0x0) = 0 0

  918/0x3b12:  stat64("/usr/lib/libxslt.1.dylib\0", 0x7FFEE285D3C0, 0x0) =
0 0

  918/0x3b12:  stat64("/usr/local/opt/libffi/lib/libffi.6.dylib\0",
0x7FFEE285D6F0, 0x0) = 0 0

  918/0x3b12:  stat64("/usr/local/opt/libffi/lib/libffi.6.dylib\0",
0x7FFEE285DB30, 0x0) = 0 0

  918/0x3b12:  open("/usr/local/opt/libffi/lib/libffi.6.dylib\0", 0x0, 0x0)
= 3 0

  918/0x3b12:  pread(0x3, "\317\372\355\376\a\0", 0x1000, 0x0) = 4096 0

  918/0x3b12:  fcntl(0x3, 0x62, 0x7FFEE28552C0) = 0 0

  918/0x3b12:  mmap(0x10DC03000, 0x5000, 0x5, 0x12, 0x3, 0x0) = 0x10DC03000
0

  918/0x3b12:  mmap(0x10DC08000, 0x1000, 0x3, 0x12, 0x3, 0x5000) =
0x10DC08000 0

  918/0x3b12:  mmap(0x10DC09000, 0x10AC, 0x1, 0x12, 0x3, 0x6000) =
0x10DC09000 0

  918/0x3b12:  fcntl(0x3, 0x2C, 0x7FFEE28554C0) = 0 0

  918/0x3b12:  close(0x3) = 0 0

  918/0x3b12:
stat64("/usr/local/Cellar/nettle/3.4.1/lib/libnettle.6.dylib\0",
0x7FFEE285D6D0, 0x0) = 0 0

  918/0x3b12:
stat64("/usr/local/Cellar/nettle/3.4.1/lib/libnettle.6.dylib\0",
0x7FFEE285DB10, 0x0) = 0 0

  918/0x3b12:  stat64("/usr/lib/libcrypto.42.dylib\0", 0x7FFEE285DC40, 0x0)
= 0 0

  918/0x3b12:  stat64("/usr/lib/libssl.44.dylib\0", 0x7FFEE285DC40, 0x0) =
0 0

  918/0x3b12:
stat64("/System/Library/Frameworks/LDAP.framework/Versions/A/LDAP\0",
0x7FFEE285DC40, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/PrivateFrameworks/TrustEvaluationAgent.framework/Versions/A/TrustEvaluationAgent\0",
 0x7FFEE285DB60, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/PrivateFrameworks/CoreDaemon.framework/Versions/B/CoreDaemon\0",
 0x7FFEE285DAD0, 0x0) = 0 0

  918/0x3b12:
stat64("/System/Library/PrivateFrameworks/AppleSRP.framework/Versions/A/AppleSRP\0",
0x7FFEE285D960, 0x0) = 0 0

  918/0x3b12:  open("/dev/dtracehelper\0", 0x2, 0xFFFFFFFFE285EE90) = 3 0

  918/0x3b12:  ioctl(0x3, 0x80086804, 0x7FFEE285ECA0) = 0 0

  918/0x3b12:  close(0x3) = 0 0

  918/0x3b12:  madvise(0x10D87E000, 0x2000, 0x5) = 0 0

  918/0x3b12:  madvise(0x10D406000, 0x2000, 0x5) = 0 0

  918/0x3b12:  access("/AppleInternal/XBS/.isChrooted\0", 0x0, 0x0) = -1
Err#2

  918/0x3b12:  bsdthread_register(0x7FFF6DA47408, 0x7FFF6DA473F8, 0x2000) =
1073742047 0

  918/0x3b12:  sysctlbyname(kern.bootargs, 0xD, 0x7FFEE285C5B0,
0x7FFEE285C5A8, 0x0) = 0 0

  918/0x3b12:  ioctl(0x2, 0x4004667A, 0x7FFEE285C834) = 0 0

  918/0x3b12:  mprotect(0x10DC0B000, 0x1000, 0x0) = 0 0

  918/0x3b12:  mprotect(0x10DC12000, 0x1000, 0x0) = 0 0

  918/0x3b12:  mprotect(0x10DC13000, 0x1000, 0x0) = 0 0

  918/0x3b12:  mprotect(0x10DC1A000, 0x1000, 0x0) = 0 0

  918/0x3b12:  mprotect(0x10D429000, 0x90, 0x1) = 0 0

  918/0x3b12:  mprotect(0x10D420000, 0x1000, 0x1) = 0 0

  918/0x3b12:  mprotect(0x10D429000, 0x90, 0x3) = 0 0

  918/0x3b12:  mprotect(0x10D429000, 0x90, 0x1) = 0 0

  918/0x3b12:  issetugid(0x0, 0x0, 0x0) = 0 0

  918/0x3b12:  getentropy(0x7FFEE2859E00, 0x20, 0x0) = 0 0

  918/0x3b12:  getpid(0x0, 0x0, 0x0) = 918 0

  918/0x3b12:  stat64("/AppleInternal\0", 0x7FFEE285CA20, 0x0) = -1 Err#2

  918/0x3b12:  csops(0x396, 0x7, 0x7FFEE285C550) = -1 Err#22

  918/0x3b12:  proc_info(0x2, 0x396, 0xD) = 64 0

  918/0x3b12:  csops(0x396, 0x7, 0x7FFEE285BDA0) = -1 Err#22

  918/0x3b12:  geteuid(0x0, 0x0, 0x0) = 502 0

  918/0x3b12:  getuid(0x0, 0x0, 0x0) = 502 0

  918/0x3b12:  sysctl([CTL_KERN, 14, 1, 918, 0, 0] (4), 0x7FFEE285B168,
0x7FFEE285B148, 0x0, 0x0) = 0 0

  918/0x3b12:  gettid(0x7FFEE285B408, 0x7FFEE285B40C, 0x0) = -1 Err#3

  918/0x3b12:  geteuid(0x0, 0x0, 0x0) = 502 0

  918/0x3b12:  getegid(0x0, 0x0, 0x0) = 20 0

  918/0x3b12:  getuid(0x0, 0x0, 0x0) = 502 0

  918/0x3b12:  getgid(0x0, 0x0, 0x0) = 20 0

  918/0x3b12:  geteuid(0x0, 0x0, 0x0) = 502 0

  918/0x3b12:  getegid(0x0, 0x0, 0x0) = 20 0

  918/0x3b12:  issetugid(0x0, 0x0, 0x0) = 0 0

  918/0x3b12:  issetugid(0x0, 0x0, 0x0) = 0 0

  918/0x3b12:  issetugid(0x0, 0x0, 0x0) = 0 0

  918/0x3b12:  issetugid(0x0, 0x0, 0x0) = 0 0

  918/0x3b12:  stat64("/etc/gnutls/default-priorities\0", 0x7FFEE285CA78,
0x0) = -1 Err#2

  918/0x3b12:
stat64("/System/Library/PrivateFrameworks/Heimdal.framework/Heimdal\0",
0x7FFEE285B670, 0x0) = 0 0

  918/0x3b12:  stat64("/System/Library/Frameworks/GSS.framework/GSS\0",
0x7FFEE285B670, 0x0) = 0 0

  918/0x3b12:  ioctl(0x0, 0x4004667A, 0x7FFEE285F564) = 0 0

  918/0x3b12:  ioctl(0x0, 0x40487413, 0x7FFEE285F6B8) = 0 0

  918/0x3b12:  getuid(0x0, 0x0, 0x0) = 502 0

  918/0x3b12:  geteuid(0x0, 0x0, 0x0) = 502 0

  918/0x3b12:  sysctl([CTL_KERN, 10, 0, 0, 0, 0] (2), 0x10D69B970,
0x7FFEE285F2C8, 0x0, 0x0) = 0 0

  918/0x3b12:  getrlimit(0x1008, 0x7FFEE285F270, 0x0) = 0 0

  918/0x3b12:  open_nocancel("/private/etc/ssl/openssl.cnf\0", 0x0, 0x1B6)
= 3 0

  918/0x3b12:  fstat64(0x3, 0x7FFEE285F108, 0x0) = 0 0

  918/0x3b12:  read_nocancel(0x3, "[ req ]\n#default_bits\t\t=
2048\n#default_md\t\t= sha256\n#default_keyfile \t=
privkey.pem\ndistinguished_name\t= req_distinguished_name\nattributes\t\t=
req_attributes\n\n[ req_distinguished_name ]\ncountryName\t\t\t= Country
Name (2 letter code)\ncountryName_min\t\t\t= 2\ncoun", 0x1000) = 745 0

  918/0x3b12:  read_nocancel(0x3, "\0", 0x1000) = 0 0

  918/0x3b12:  close_nocancel(0x3) = 0 0

  918/0x3b12:  socket(0x1E, 0x2, 0x0) = 3 0

  918/0x3b12:  close(0x3) = 0 0

  918/0x3b12:  issetugid(0x0, 0x0, 0x0) = 0 0

  918/0x3b12:  issetugid(0x0, 0x0, 0x0) = 0 0

  918/0x3b12:  pipe(0x0, 0x0, 0x0) = 3 0

  918/0x3b12:  fcntl(0x4, 0x3, 0x0) = 1 0

  918/0x3b12:  fcntl(0x4, 0x4, 0x5) = 0 0

  918/0x3b12:  fcntl(0x3, 0x3, 0x0) = 0 0

  918/0x3b12:  fcntl(0x3, 0x4, 0x4) = 0 0

  918/0x3b12:  fcntl(0x4, 0x1, 0x0) = 0 0

  918/0x3b12:  fcntl(0x4, 0x2, 0x1) = 0 0

  918/0x3b12:  fcntl(0x3, 0x1, 0x0) = 0 0

  918/0x3b12:  fcntl(0x3, 0x2, 0x1) = 0 0

  918/0x3b12:  bsdthread_create(0x10D48FEC4, 0x7FCE20607AA0,
0x70000D280000) = 220725248 0

  918/0x3b15:  thread_selfid(0x0, 0x0, 0x0) = 15125 0

  918/0x3b12:  geteuid(0x0, 0x0, 0x0) = 502 0

  918/0x3b12:  issetugid(0x0, 0x0, 0x0) = 0 0

  918/0x3b12:  geteuid(0x0, 0x0, 0x0) = 502 0

  918/0x3b12:  shm_open(0x7FFF6DA3ACD8, 0x0, 0x0) = 5 0

  918/0x3b12:  mmap(0x0, 0x1000, 0x1, 0x1, 0x5, 0x0) = 0x10D42B000 0

  918/0x3b12:  close_nocancel(0x5) = 0 0

  918/0x3b12:  open_nocancel("/etc/.mdns_debug\0", 0x0, 0x0) = -1 Err#2

  918/0x3b12:  issetugid(0x0, 0x0, 0x0) = 0 0

  918/0x3b12:  issetugid(0x0, 0x0, 0x0) = 0 0

  918/0x3b12:  proc_info(0x2, 0x396, 0x11) = 56 0

  918/0x3b12:  proc_info(0x2, 0x396, 0x11) = 56 0

  918/0x3b12:  sysctl([CTL_KERN, 14, 1, 918, 0, 0] (4), 0x7FFEE285ED28,
0x7FFEE285ED18, 0x0, 0x0) = 0 0

  918/0x3b12:  issetugid(0x0, 0x0, 0x0) = 0 0

  918/0x3b12:  openat(0xFFFFFFFFFFFFFFFE,
"/Library/Preferences/Logging/com.apple.diagnosticd.filter.plist\0",
0x1000104, 0xFFFFFFFFE285EB40) = 5 0

  918/0x3b12:  lseek(0x5, 0x0, 0x2) = 62 0

  918/0x3b12:  pread(0x5, "bplist00\321\001\002Vglobal\023\0", 0x3E, 0x0) =
62 0

  918/0x3b12:  close(0x5) = 0 0

  918/0x3b12:  open("/usr/local/bin/virsh\0", 0x8004, 0x6DA83DD2) = 5 0

  918/0x3b12:  fcntl(0x5, 0x32, 0x7FFEE285E590) = 0 0

  918/0x3b12:  close(0x5) = 0 0

  918/0x3b12:  access("/Users/AB84394/.config/libvirt/libvirt.conf\0", 0x0,
0x0 = -1 Err#2

  918/0x3b12:  issetugid(0x0, 0x0, 0x0) = 0 0

  918/0x3b12:  geteuid(0x0, 0x0, 0x0) = 502 0

  918/0x3b12:  getuid(0x0, 0x0, 0x0) = 502 0

  918/0x3b12:  geteuid(0x0, 0x0, 0x0) = 502 0

  918/0x3b12:  getuid(0x0, 0x0, 0x0) = 502 0

  918/0x3b12:  geteuid(0x0, 0x0, 0x0) = 502 0

  918/0x3b12:  issetugid(0x0, 0x0, 0x0) = 0 0

  918/0x3b12:  issetugid(0x0, 0x0, 0x0) = 0 0

  918/0x3b12:  geteuid(0x0, 0x0, 0x0) = 502 0

  918/0x3b12:  issetugid(0x0, 0x0, 0x0) = 0 0

  918/0x3b12:  issetugid(0x0, 0x0, 0x0) = 0 0

  918/0x3b12:  issetugid(0x0, 0x0, 0x0) = 0 0

  918/0x3b12:  geteuid(0x0, 0x0, 0x0) = 502 0

  918/0x3b12:  stat64("/Users/AB84394/.cache/libvirt\0", 0x7FFEE285EFA0,
0x0) = 0 0

  918/0x3b12:  open("/Users/AB84394/.cache/libvirt/libvirtd.lock\0", 0x202,
0x180) = 5 0

  918/0x3b12:  fcntl(0x5, 0x1, 0x206084A0) = 0 0

  918/0x3b12:  fcntl(0x5, 0x2, 0x1) = 0 0

  918/0x3b12:  fcntl(0x5, 0x9, 0x7FFEE285F058) = 0 0

  918/0x3b12:  socket(0x1, 0x1, 0x0) = 6 0

  918/0x3b12:  connect(0x6, 0x7FFEE285F0E0, 0x6A) = 0 0

  918/0x3b12:  getsockname(0x6, 0x7FFEE285F170, 0x7FFEE285F1F0) = 0 0

  918/0x3b12:  fcntl(0x6, 0x1, 0xD65B4AF) = 0 0

  918/0x3b12:  fcntl(0x6, 0x2, 0x1) = 0 0

  918/0x3b12:  fcntl(0x6, 0x3, 0x0) = 2 0

  918/0x3b12:  fcntl(0x6, 0x4, 0x6) = 0 0

  918/0x3b12:  unlink("/Users/AB84394/.cache/libvirt/libvirtd.lock\0", 0x0,
0x0 = 0 0

  918/0x3b12:  close(0x5) = 0 0

  918/0x3b12:  pipe(0x0, 0x0, 0x0) = 5 0

  918/0x3b12:  fcntl(0x7, 0x1, 0x0) = 0 0

  918/0x3b12:  fcntl(0x7, 0x2, 0x1) = 0 0

  918/0x3b12:  fcntl(0x5, 0x1, 0x0) = 0 0

  918/0x3b12:  fcntl(0x5, 0x2, 0x1) = 0 0

  918/0x3b12:  write(0x4, "\0", 0x1) = 1 0

  918/0x3b15:  select(0x4, 0x70000D27FC20, 0x70000D27FCA0, 0x70000D27FD20,
0x0) = 1 0

  918/0x3b15:  recvfrom(0x3, 0x0, 0x0) = -1 Err#38

  918/0x3b15:  ioctl(0x3, 0x4004667F, 0x70000D27FDC0) = 0 0

  918/0x3b15:  read(0x3, "\0", 0x1) = 1 0

  918/0x3b12:  write(0x4, "\0", 0x1) = 1 0

  918/0x3b12:  __pthread_sigmask(0x1, 0x7FFEE285F04C, 0x7FFEE285F05C) = 0 0

  918/0x3b15:  select(0x7, 0x70000D27FC20, 0x70000D27FCA0, 0x70000D27FD20,
0x0) = 1 0

  918/0x3b12:  select(0x7, 0x7FFEE285EE50, 0x7FFEE285EED0, 0x7FFEE285EF50,
0x0) = 1 0

  918/0x3b15:  recvfrom(0x3, 0x0, 0x0) = -1 Err#38

  918/0x3b12:  __pthread_sigmask(0x3, 0x7FFEE285F05C, 0x0) = 0 0

  918/0x3b15:  ioctl(0x3, 0x4004667F, 0x70000D27FDC0) = 0 0

  918/0x3b15:  read(0x3, "\0", 0x1) = 1 0

  918/0x3b12:  write(0x6, "\0", 0x1C) = 28 0

  918/0x3b12:  __pthread_sigmask(0x1, 0x7FFEE285F04C, 0x7FFEE285F05C) = 0 0

  918/0x3b12:  select(0x7, 0x7FFEE285EE50, 0x7FFEE285EED0, 0x7FFEE285EF50,
0x0) = 1 0

  918/0x3b12:  recvfrom(0x6, 0x0, 0x0) = 0 0

  918/0x3b12:  ioctl(0x6, 0x4004667F, 0x7FFEE285EFF0) = 0 0

  918/0x3b12:  __pthread_sigmask(0x3, 0x7FFEE285F05C, 0x0) = 0 0

  918/0x3b12:  read(0x6, "\0", 0x4) = 4 0

  918/0x3b12:  read(0x6, " \0", 0x20) = 32 0

  918/0x3b12:  write(0x4, "\0", 0x1) = 1 0

  918/0x3b15:  select(0x4, 0x70000D27FC20, 0x70000D27FCA0, 0x70000D27FD20,
0x0) = 1 0

  918/0x3b12:  write(0x4, "\0", 0x1) = 1 0

  918/0x3b15:  recvfrom(0x3, 0x0, 0x0) = -1 Err#38

  918/0x3b12:  __pthread_sigmask(0x1, 0x7FFEE285F04C, 0x7FFEE285F05C) = 0 0

  918/0x3b15:  ioctl(0x3, 0x4004667F, 0x70000D27FDC0) = 0 0

  918/0x3b12:  select(0x7, 0x7FFEE285EE50, 0x7FFEE285EED0, 0x7FFEE285EF50,
0x0) = 1 0

  918/0x3b15:  read(0x3, "\0", 0x1) = 1 0

  918/0x3b12:  __pthread_sigmask(0x3, 0x7FFEE285F05C, 0x0) = 0 0

  918/0x3b15:  select(0x4, 0x70000D27FC20, 0x70000D27FCA0, 0x70000D27FD20,
0x0) = 1 0

  918/0x3b12:  write(0x6, "\0", 0x20) = 32 0

  918/0x3b15:  recvfrom(0x3, 0x0, 0x0) = -1 Err#38

  918/0x3b12:  __pthread_sigmask(0x1, 0x7FFEE285F04C, 0x7FFEE285F05C) = 0 0

  918/0x3b15:  ioctl(0x3, 0x4004667F, 0x70000D27FDC0) = 0 0

  918/0x3b15:  read(0x3, "\0", 0x1) = 1 0

  918/0x3b12:  select(0x7, 0x7FFEE285EE50, 0x7FFEE285EED0, 0x7FFEE285EF50,
0x0) = 1 0

  918/0x3b12:  recvfrom(0x6, 0x0, 0x0) = 0 0

  918/0x3b12:  ioctl(0x6, 0x4004667F, 0x7FFEE285EFF0) = 0 0

  918/0x3b12:  __pthread_sigmask(0x3, 0x7FFEE285F05C, 0x0) = 0 0

  918/0x3b12:  read(0x6, "\0", 0x4) = 4 0

  918/0x3b12:  read(0x6, " \0", 0x1C) = 28 0

  918/0x3b12:  write(0x4, "\0", 0x1) = 1 0

  918/0x3b12:  write(0x4, "\0", 0x1) = 1 0

  918/0x3b15:  select(0x4, 0x70000D27FC20, 0x70000D27FCA0, 0x70000D27FD20,
0x0) = 1 0

  918/0x3b12:  __pthread_sigmask(0x1, 0x7FFEE285F04C, 0x7FFEE285F05C) = 0 0

  918/0x3b15:  recvfrom(0x3, 0x0, 0x0) = -1 Err#38

  918/0x3b12:  select(0x7, 0x7FFEE285EE50, 0x7FFEE285EED0, 0x7FFEE285EF50,
0x0) = 1 0

  918/0x3b15:  ioctl(0x3, 0x4004667F, 0x70000D27FDC0) = 0 0

  918/0x3b12:  __pthread_sigmask(0x3, 0x7FFEE285F05C, 0x0) = 0 0

  918/0x3b15:  read(0x3, "\0", 0x1) = 1 0

  918/0x3b12:  write(0x6, "\0", 0x38) = 56 0

  918/0x3b15:  select(0x4, 0x70000D27FC20, 0x70000D27FCA0, 0x70000D27FD20,
0x0) = 1 0

  918/0x3b12:  __pthread_sigmask(0x1, 0x7FFEE285F04C, 0x7FFEE285F05C) = 0 0

  918/0x3b15:  recvfrom(0x3, 0x0, 0x0) = -1 Err#38

  918/0x3b15:  ioctl(0x3, 0x4004667F, 0x70000D27FDC0) = 0 0

  918/0x3b15:  read(0x3, "\0", 0x1) = 1 0

  918/0x3b12:  select(0x7, 0x7FFEE285EE50, 0x7FFEE285EED0, 0x7FFEE285EF50,
0x0) = 1 0

  918/0x3b12:  recvfrom(0x6, 0x0, 0x0) = 0 0

  918/0x3b12:  ioctl(0x6, 0x4004667F, 0x7FFEE285EFF0) = 0 0

  918/0x3b12:  __pthread_sigmask(0x3, 0x7FFEE285F05C, 0x0) = 0 0

  918/0x3b12:  read(0x6, "\0", 0x4) = 4 0

  918/0x3b12:  read(0x6, " \0", 0xCC) = 204 0

  918/0x3b12:  write(0x4, "\0", 0x1) = 1 0

  918/0x3b12:  write(0x4, "\0", 0x1) = 1 0

  918/0x3b15:  select(0x4, 0x70000D27FC20, 0x70000D27FCA0, 0x70000D27FD20,
0x0) = 1 0

  918/0x3b15:  recvfrom(0x3, 0x0, 0x0) = -1 Err#38

  918/0x3b15:  ioctl(0x3, 0x4004667F, 0x70000D27FDC0) = 0 0

  918/0x3b15:  read(0x3, "\0", 0x1) = 1 0

  918/0x3b12:  write_nocancel(0x2, "error: \0", 0x7) = 7 0

  918/0x3b15:  close(0x7) = 0 0

  918/0x3b15:  close(0x5) = 0 0

  918/0x3b12:  write_nocancel(0x2, "failed to connect to the
hypervisor\n\0", 0x24) = 36 0

  918/0x3b12:  write_nocancel(0x2, "error: \0", 0x7) = 7 0

  918/0x3b12:  write_nocancel(0x2, "internal error: unable to initialize
VirtualBox driver API\n\0", 0x3B) = 59 0

  918/0x3b12:  write(0x4, "\0", 0x1) = 1 0

  918/0x3b15:  close(0x6) = 0 0

  918/0x3b15:  __disable_threadsignal(0x1, 0x0, 0x0) = 0 0

  918/0x3b15:  ulock_wake(0x1000002, 0x70000D280034, 0x0) = 0 0

  918/0x3b12:  ulock_wait(0x1020002, 0x70000D280034, 0x1303) = 0 0

  918/0x3b12:  issetugid(0x0, 0x0, 0x0) = 0 0

  919/0x3b1a:  thread_selfid(0x70000D1FF000, 0x81000, 0x1303) = 15130 0

   95/0x3b19:  thread_selfid(0x1, 0x0, 0x0) = 15129 0


[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;&lt;div class="gmail_default" \
style="font-family:georgia,serif;color:rgb(102,51,255)"&gt;after a reboot into recovery \
mode, csrutil enable --without dtrace (ignoring warnings about how horribly \
unsupported this is). This eliminates the dtrace errors, but virsh remains ill. Clue \
bats appreciated!&lt;/div&gt;&lt;div class="gmail_default" \
style="font-family:georgia,serif;color:rgb(102,51,255)"&gt;&lt;br&gt;&lt;/div&gt;







&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;Last
login: Mon Jan   7 12:31:39 on console&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;/Users/AB84394&gt;sudo
 dtruss -fn virsh&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;PID/THRD  
SYSCALL(args)   = return&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   thread_selfid(0x0, 0x0, 0x0) = 15122 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   __mac_syscall(0x112B02C89, 0x5A, 0x7FFEE285EF00) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   shared_region_check_np(0x7FFEE285ED68, 0x0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/private/var/db/dyld/dyld_shared_cache_x86_64h\0",
0x7FFEE285ECB0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   csrctl(0x0, 0x7FFEE285EA7C, 0x4) = -1 Err#1&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   stat64("/usr/local/bin/virsh\0", 0x7FFEE285F400,
0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   getpid(0x0, 0x0, 0x0) = 918 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   proc_info(0x2, 0x396, 0x16) = 1272 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/usr/local/Cellar/libvirt/4.10.0/lib/libvirt-lxc.0.dylib\0",
0x7FFEE285DC00, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/usr/local/Cellar/libvirt/4.10.0/lib/libvirt-lxc.0.dylib\0",
0x7FFEE285E040, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
open("/usr/local/Cellar/libvirt/4.10.0/lib/libvirt-lxc.0.dylib\0",
0x0, 0x0) = 3 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   pread(0x3, "\317\372\355\376\a\0", 0x1000, 0x0) =
4096 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   fcntl(0x3, 0x62, 0x7FFEE28557D0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   mmap(0x10D421000, 0x4000, 0x5, 0x12, 0x3, 0x0) = 0x10D421000
0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   mmap(0x10D425000, 0x1000, 0x3, 0x12, 0x3, 0x4000) =
0x10D425000 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   mmap(0x10D426000, 0x6CC, 0x1, 0x12, 0x3, 0x5000) =
0x10D426000 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   fcntl(0x3, 0x2C, 0x7FFEE28559D0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   close(0x3) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/usr/local/Cellar/libvirt/4.10.0/lib/libvirt-qemu.0.dylib\0",
0x7FFEE285DC00, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/usr/local/Cellar/libvirt/4.10.0/lib/libvirt-qemu.0.dylib\0",
0x7FFEE285E040, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
open("/usr/local/Cellar/libvirt/4.10.0/lib/libvirt-qemu.0.dylib\0",
0x0, 0x0) = 3 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   pread(0x3, "\317\372\355\376\a\0", 0x1000, 0x0) =
4096 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   fcntl(0x3, 0x62, 0x7FFEE28557D0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   mmap(0x10D42E000, 0x4000, 0x5, 0x12, 0x3, 0x0) = 0x10D42E000
0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   mmap(0x10D432000, 0x1000, 0x3, 0x12, 0x3, 0x4000) =
0x10D432000 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   mmap(0x10D433000, 0x4D4, 0x1, 0x12, 0x3, 0x5000) =
0x10D433000 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   fcntl(0x3, 0x2C, 0x7FFEE28559D0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   close(0x3) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/usr/local/Cellar/libvirt/4.10.0/lib/libvirt.0.dylib\0",
0x7FFEE285DC00, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/usr/local/Cellar/libvirt/4.10.0/lib/libvirt.0.dylib\0",
0x7FFEE285E040, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
open("/usr/local/Cellar/libvirt/4.10.0/lib/libvirt.0.dylib\0", 0x0,
0x0) = 3 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   pread(0x3, "\317\372\355\376\a\0", 0x1000, 0x0) =
4096 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   fcntl(0x3, 0x62, 0x7FFEE28557D0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   mmap(0x10D438000, 0x252000, 0x5, 0x12, 0x3, 0x0) =
0x10D438000 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   mmap(0x10D68A000, 0x12000, 0x3, 0x12, 0x3, 0x252000) =
0x10D68A000 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   mmap(0x10D69D000, 0x8FED4, 0x1, 0x12, 0x3, 0x264000) =
0x10D69D000 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   fcntl(0x3, 0x2C, 0x7FFEE28559D0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   close(0x3) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   stat64("/usr/local/opt/yajl/lib/libyajl.2.dylib\0",
0x7FFEE285DC00, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   stat64("/usr/local/opt/yajl/lib/libyajl.2.dylib\0",
0x7FFEE285E040, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   open("/usr/local/opt/yajl/lib/libyajl.2.dylib\0",
0x0, 0x0) = 3 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   pread(0x3, "\317\372\355\376\a\0", 0x1000, 0x0) =
4096 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   fcntl(0x3, 0x62, 0x7FFEE28557D0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   mmap(0x10D72E000, 0x7000, 0x5, 0x12, 0x3, 0x0) = 0x10D72E000
0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   mmap(0x10D735000, 0x1000, 0x3, 0x12, 0x3, 0x7000) =
0x10D735000 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   mmap(0x10D736000, 0x1150, 0x1, 0x12, 0x3, 0x8000) =
0x10D736000 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   fcntl(0x3, 0x2C, 0x7FFEE28559D0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   close(0x3) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   stat64("/usr/lib/libSystem.B.dylib\0",
0x7FFEE285E040, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   stat64("/usr/lib/libsasl2.2.dylib\0",
0x7FFEE285E040, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/usr/local/opt/gnutls/lib/libgnutls.30.dylib\0",
0x7FFEE285DC00, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/usr/local/opt/gnutls/lib/libgnutls.30.dylib\0",
0x7FFEE285E040, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
open("/usr/local/opt/gnutls/lib/libgnutls.30.dylib\0", 0x0, 0x0) = 3
0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   pread(0x3, "\317\372\355\376\a\0", 0x1000, 0x0) =
4096 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   fcntl(0x3, 0x62, 0x7FFEE28557D0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   mmap(0x10D739000, 0x135000, 0x5, 0x12, 0x3, 0x0) =
0x10D739000 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   mmap(0x10D86E000, 0xF000, 0x3, 0x12, 0x3, 0x135000) =
0x10D86E000 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   mmap(0x10D87E000, 0x31E5C, 0x1, 0x12, 0x3, 0x144000) =
0x10D87E000 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   fcntl(0x3, 0x2C, 0x7FFEE28559D0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   madvise(0x10D87E000, 0x2000, 0x2) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   close(0x3) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   stat64("/usr/lib/libcurl.4.dylib\0",
0x7FFEE285E040, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   stat64("/usr/lib/libxml2.2.dylib\0",
0x7FFEE285E040, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   stat64("/usr/lib/system/libcache.dylib\0",
0x7FFEE285D900, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   stat64("/usr/lib/system/libcommonCrypto.dylib\0",
0x7FFEE285D900, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   stat64("/usr/lib/system/libcompiler_rt.dylib\0",
0x7FFEE285D900, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   stat64("/usr/lib/system/libcopyfile.dylib\0",
0x7FFEE285D900, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   stat64("/usr/lib/system/libcorecrypto.dylib\0",
0x7FFEE285D900, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   stat64("/usr/lib/system/libdispatch.dylib\0",
0x7FFEE285D900, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   stat64("/usr/lib/system/libdyld.dylib\0",
0x7FFEE285D900, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   stat64("/usr/lib/system/libkeymgr.dylib\0",
0x7FFEE285D900, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   stat64("/usr/lib/system/liblaunch.dylib\0",
0x7FFEE285D900, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   stat64("/usr/lib/system/libmacho.dylib\0",
0x7FFEE285D900, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   stat64("/usr/lib/system/libquarantine.dylib\0",
0x7FFEE285D900, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   stat64("/usr/lib/system/libremovefile.dylib\0",
0x7FFEE285D900, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   stat64("/usr/lib/system/libsystem_asl.dylib\0",
0x7FFEE285D900, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   stat64("/usr/lib/system/libsystem_blocks.dylib\0",
0x7FFEE285D900, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   stat64("/usr/lib/system/libsystem_c.dylib\0",
0x7FFEE285D900, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/usr/lib/system/libsystem_configuration.dylib\0",
0x7FFEE285D900, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/usr/lib/system/libsystem_coreservices.dylib\0",
0x7FFEE285D900, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   stat64("/usr/lib/system/libsystem_darwin.dylib\0",
0x7FFEE285D900, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   stat64("/usr/lib/system/libsystem_dnssd.dylib\0",
0x7FFEE285D900, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   stat64("/usr/lib/system/libsystem_info.dylib\0",
0x7FFEE285D900, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   stat64("/usr/lib/system/libsystem_m.dylib\0",
0x7FFEE285D900, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   stat64("/usr/lib/system/libsystem_malloc.dylib\0",
0x7FFEE285D900, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/usr/lib/system/libsystem_networkextension.dylib\0",
0x7FFEE285D900, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   stat64("/usr/lib/system/libsystem_notify.dylib\0",
0x7FFEE285D900, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   stat64("/usr/lib/system/libsystem_sandbox.dylib\0",
0x7FFEE285D900, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   stat64("/usr/lib/system/libsystem_secinit.dylib\0",
0x7FFEE285D900, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   stat64("/usr/lib/system/libsystem_kernel.dylib\0",
0x7FFEE285D900, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/usr/lib/system/libsystem_platform.dylib\0", 0x7FFEE285D900,
0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   stat64("/usr/lib/system/libsystem_pthread.dylib\0",
0x7FFEE285D900, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/usr/lib/system/libsystem_symptoms.dylib\0", 0x7FFEE285D900,
0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   stat64("/usr/lib/system/libsystem_trace.dylib\0",
0x7FFEE285D900, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   stat64("/usr/lib/system/libunwind.dylib\0",
0x7FFEE285D900, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   stat64("/usr/lib/system/libxpc.dylib\0",
0x7FFEE285D900, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   stat64("/usr/lib/libobjc.A.dylib\0",
0x7FFEE285CC00, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   stat64("/usr/lib/libc++abi.dylib\0",
0x7FFEE285C2E0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   stat64("/usr/lib/libc++.1.dylib\0", 0x7FFEE285C2E0,
0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   stat64("/usr/lib/libicucore.A.dylib\0",
0x7FFEE285DCA0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   stat64("/usr/lib/libz.1.dylib\0", 0x7FFEE285DCA0,
0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/Frameworks/Security.framework/Versions/A/Security\0",
 0x7FFEE285DC10, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation\0",
 0x7FFEE285DC10, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/usr/local/opt/p11-kit/lib/libp11-kit.0.dylib\0",
0x7FFEE285D7D0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/usr/local/opt/p11-kit/lib/libp11-kit.0.dylib\0",
0x7FFEE285DC10, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
open("/usr/local/opt/p11-kit/lib/libp11-kit.0.dylib\0", 0x0, 0x0 = 3
0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   pread(0x3, "\317\372\355\376\a\0", 0x1000, 0x0) =
4096 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   fcntl(0x3, 0x62, 0x7FFEE28553A0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   mmap(0x10D8B5000, 0xA8000, 0x5, 0x12, 0x3, 0x0) = 0x10D8B5000
0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   mmap(0x10D95D000, 0x14000, 0x3, 0x12, 0x3, 0xA8000) =
0x10D95D000 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   mmap(0x10D971000, 0x34AB8, 0x1, 0x12, 0x3, 0xBC000) =
0x10D971000 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   fcntl(0x3, 0x2C, 0x7FFEE28555A0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   close(0x3) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/usr/local/opt/libunistring/lib/libunistring.2.dylib\0",
0x7FFEE285D7D0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/usr/local/opt/libunistring/lib/libunistring.2.dylib\0",
0x7FFEE285DC10, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
open("/usr/local/opt/libunistring/lib/libunistring.2.dylib\0", 0x0,
0x0) = 3 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   pread(0x3, "\317\372\355\376\a\0", 0x1000, 0x0) =
4096 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   fcntl(0x3, 0x62, 0x7FFEE28553A0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   mmap(0x10D9A6000, 0x164000, 0x5, 0x12, 0x3, 0x0) =
0x10D9A6000 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   mmap(0x10DB0A000, 0x3000, 0x3, 0x12, 0x3, 0x164000) =
0x10DB0A000 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   mmap(0x10DB0D000, 0xE130, 0x1, 0x12, 0x3, 0x167000) =
0x10DB0D000 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   fcntl(0x3, 0x2C, 0x7FFEE28555A0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   close(0x3) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/usr/local/opt/libtasn1/lib/libtasn1.6.dylib\0",
0x7FFEE285D7D0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/usr/local/opt/libtasn1/lib/libtasn1.6.dylib\0",
0x7FFEE285DC10, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
open("/usr/local/opt/libtasn1/lib/libtasn1.6.dylib\0", 0x0, 0x0) = 3
0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   pread(0x3, "\317\372\355\376\a\0", 0x1000, 0x0) =
4096 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   fcntl(0x3, 0x62, 0x7FFEE28553A0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   mmap(0x10DB22000, 0xC000, 0x5, 0x12, 0x3, 0x0) = 0x10DB22000
0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   mmap(0x10DB2E000, 0x1000, 0x3, 0x12, 0x3, 0xC000) =
0x10DB2E000 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   mmap(0x10DB2F000, 0x19A8, 0x1, 0x12, 0x3, 0xD000) =
0x10DB2F000 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   fcntl(0x3, 0x2C, 0x7FFEE28555A0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   close(0x3) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/usr/local/opt/nettle/lib/libnettle.6.dylib\0",
0x7FFEE285D7D0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/usr/local/opt/nettle/lib/libnettle.6.dylib\0",
0x7FFEE285DC10, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
open("/usr/local/opt/nettle/lib/libnettle.6.dylib\0", 0x0, 0x0) = 3 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   pread(0x3, "\317\372\355\376\a\0", 0x1000, 0x0) =
4096 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   fcntl(0x3, 0x62, 0x7FFEE28553A0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   mmap(0x10DB33000, 0x26000, 0x5, 0x12, 0x3, 0x0) = 0x10DB33000
0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   mmap(0x10DB59000, 0x1000, 0x3, 0x12, 0x3, 0x26000) =
0x10DB59000 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   mmap(0x10DB5A000, 0x7B10, 0x1, 0x12, 0x3, 0x27000) =
0x10DB5A000 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   fcntl(0x3, 0x2C, 0x7FFEE28555A0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   close(0x3) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/usr/local/opt/nettle/lib/libhogweed.4.dylib\0",
0x7FFEE285D7D0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/usr/local/opt/nettle/lib/libhogweed.4.dylib\0",
0x7FFEE285DC10, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
open("/usr/local/opt/nettle/lib/libhogweed.4.dylib\0", 0x0, 0x0) = 3
0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   pread(0x3, "\317\372\355\376\a\0", 0x1000, 0x0) =
4096 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   fcntl(0x3, 0x62, 0x7FFEE28553A0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   mmap(0x10DB65000, 0x2A000, 0x5, 0x12, 0x3, 0x0) = 0x10DB65000
0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   mmap(0x10DB8F000, 0x1000, 0x3, 0x12, 0x3, 0x2A000) =
0x10DB8F000 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   mmap(0x10DB90000, 0x65E0, 0x1, 0x12, 0x3, 0x2B000) =
0x10DB90000 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   fcntl(0x3, 0x2C, 0x7FFEE28555A0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   close(0x3) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   stat64("/usr/local/opt/gmp/lib/libgmp.10.dylib\0",
0x7FFEE285D7D0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   stat64("/usr/local/opt/gmp/lib/libgmp.10.dylib\0",
0x7FFEE285DC10, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   open("/usr/local/opt/gmp/lib/libgmp.10.dylib\0",
0x0, 0x0) = 3 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   pread(0x3, "\317\372\355\376\a\0", 0x1000, 0x0) =
4096 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   fcntl(0x3, 0x62, 0x7FFEE28553A0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   mmap(0x10DB9A000, 0x5D000, 0x5, 0x12, 0x3, 0x0) = 0x10DB9A000
0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   mmap(0x10DBF7000, 0x1000, 0x3, 0x12, 0x3, 0x5D000) =
0x10DBF7000 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   mmap(0x10DBF8000, 0x92DC, 0x1, 0x12, 0x3, 0x5E000) =
0x10DBF8000 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   fcntl(0x3, 0x2C, 0x7FFEE28555A0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   close(0x3) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/Frameworks/Foundation.framework/Versions/C/Foundation\0",
 0x7FFEE285D9C0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/PrivateFrameworks/AppleFSCompression.framework/Versions/A/AppleFSCompression\0",
 0x7FFEE285D9C0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/usr/lib/libDiagnosticMessagesClient.dylib\0",
0x7FFEE285D9C0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   stat64("/usr/lib/libOpenScriptingUtil.dylib\0",
0x7FFEE285D9C0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   stat64("/usr/lib/libauto.dylib\0", 0x7FFEE285D9C0,
0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   stat64("/usr/lib/libbsm.0.dylib\0", 0x7FFEE285D9C0,
0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   stat64("/usr/lib/libcoretls.dylib\0",
0x7FFEE285D9C0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   stat64("/usr/lib/libcoretls_cfhelpers.dylib\0",
0x7FFEE285D9C0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   stat64("/usr/lib/libpam.2.dylib\0", 0x7FFEE285D9C0,
0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   stat64("/usr/lib/libsqlite3.dylib\0",
0x7FFEE285D9C0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   stat64("/usr/lib/libxar.1.dylib\0", 0x7FFEE285D9C0,
0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/Frameworks/IOKit.framework/Versions/A/IOKit\0",
0x7FFEE285D9C0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/Frameworks/DiskArbitration.framework/Versions/A/DiskArbitration\0",
 0x7FFEE285D790, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   stat64("/usr/lib/libarchive.2.dylib\0",
0x7FFEE285D790, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/Frameworks/CFNetwork.framework/Versions/A/CFNetwork\0",
 0x7FFEE285D790, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/Frameworks/SystemConfiguration.framework/Versions/A/SystemConfiguration\0",
 0x7FFEE285D790, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/Frameworks/CoreServices.framework/Versions/A/CoreServices\0",
 0x7FFEE285D790, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   stat64("/usr/lib/liblangid.dylib\0",
0x7FFEE285D790, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   stat64("/usr/lib/libCRFSuite.dylib\0",
0x7FFEE285D790, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   stat64("/usr/lib/libenergytrace.dylib\0",
0x7FFEE285D520, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   stat64("/usr/lib/system/libkxld.dylib\0",
0x7FFEE285D520, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   stat64("/usr/lib/libbz2.1.0.dylib\0",
0x7FFEE285D660, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   stat64("/usr/lib/liblzma.5.dylib\0",
0x7FFEE285D660, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   stat64("/usr/lib/libnetwork.dylib\0",
0x7FFEE285D570, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   stat64("/usr/lib/libapple_nghttp2.dylib\0",
0x7FFEE285D570, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   stat64("/usr/lib/libpcap.A.dylib\0",
0x7FFEE285D2F0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/FSEvents.framework/Versions/A/FSEvents\0",
 0x7FFEE285D5C0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/CarbonCore.framework/Versions/A/CarbonCore\0",
 0x7FFEE285D5C0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/Metadata.framework/Versions/A/Metadata\0",
 0x7FFEE285D5C0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/OSServices.framework/Versions/A/OSServices\0",
 0x7FFEE285D5C0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/SearchKit.framework/Versions/A/SearchKit\0",
 0x7FFEE285D5C0, 0x0 = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/AE.framework/Versions/A/AE\0",
 0x7FFEE285D5C0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/LaunchServices.framework/Versions/A/LaunchServices\0",
 0x7FFEE285D5C0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/DictionaryServices.framework/Versions/A/DictionaryServices\0",
 0x7FFEE285D5C0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/SharedFileList.framework/Versions/A/SharedFileList\0",
 0x7FFEE285D5C0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/Frameworks/NetFS.framework/Versions/A/NetFS\0",
0x7FFEE285D420, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/PrivateFrameworks/NetAuth.framework/Versions/A/NetAuth\0",
 0x7FFEE285D2B0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/PrivateFrameworks/login.framework/Versions/A/Frameworks/loginsupport.framework/Versions/A/loginsupport\0",
 0x7FFEE285D1B0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/PrivateFrameworks/TCC.framework/Versions/A/TCC\0",
0x7FFEE285D3F0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/PrivateFrameworks/CoreNLP.framework/Versions/A/CoreNLP\0",
 0x7FFEE285D3F0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/PrivateFrameworks/MetadataUtilities.framework/Versions/A/MetadataUtilities\0",
 0x7FFEE285D3F0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   stat64("/usr/lib/libmecabra.dylib\0",
0x7FFEE285D3F0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/Frameworks/ApplicationServices.framework/Versions/A/ApplicationServices\0",
 0x7FFEE285D2B0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/Frameworks/CoreGraphics.framework/Versions/A/CoreGraphics\0",
 0x7FFEE285D0C0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/Frameworks/CoreText.framework/Versions/A/CoreText\0",
 0x7FFEE285D0C0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/Frameworks/ImageIO.framework/Versions/A/ImageIO\0",
0x7FFEE285D0C0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/Frameworks/ColorSync.framework/Versions/A/ColorSync\0",
 0x7FFEE285D0C0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ATS.framework/Versions/A/ATS\0",
 0x7FFEE285D0C0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ColorSyncLegacy.framework/Versions/A/ColorSyncLegacy\0",
 0x7FFEE285D0C0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/HIServices.framework/Versions/A/HIServices\0",
 0x7FFEE285D0C0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/LangAnalysis.framework/Versions/A/LangAnalysis\0",
 0x7FFEE285D0C0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/PrintCore.framework/Versions/A/PrintCore\0",
 0x7FFEE285D0C0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/QD.framework/Versions/A/QD\0",
 0x7FFEE285D0C0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/SpeechSynthesis.framework/Versions/A/SpeechSynthesis\0",
 0x7FFEE285D0C0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/PrivateFrameworks/SkyLight.framework/Versions/A/SkyLight\0",
 0x7FFEE285CF20, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/Frameworks/IOSurface.framework/Versions/A/IOSurface\0",
 0x7FFEE285CF20, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/Frameworks/Accelerate.framework/Versions/A/Accelerate\0",
 0x7FFEE285CF20, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   stat64("/usr/lib/libcompression.dylib\0",
0x7FFEE285CC70, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/Frameworks/CoreDisplay.framework/Versions/A/CoreDisplay\0",
 0x7FFEE285CC70, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/Frameworks/Metal.framework/Versions/A/Metal\0",
0x7FFEE285CC70, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/Frameworks/MetalPerformanceShaders.framework/Versions/A/MetalPerformanceShaders\0",
 0x7FFEE285CC70, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/PrivateFrameworks/MultitouchSupport.framework/Versions/A/MultitouchSupport\0",
 0x7FFEE285CC70, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/Frameworks/QuartzCore.framework/Versions/A/QuartzCore\0",
 0x7FFEE285CC70, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vImage.framework/Versions/A/vImage\0",
 0x7FFEE285CB70, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/vecLib\0",
 0x7FFEE285CB70, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libvMisc.dylib\0",
 0x7FFEE285C9D0, 0x0 = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libvDSP.dylib\0",
 0x7FFEE285C9D0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libBLAS.dylib\0",
 0x7FFEE285C9D0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libLAPACK.dylib\0",
 0x7FFEE285C9D0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libLinearAlgebra.dylib\0",
 0x7FFEE285C9D0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libSparseBLAS.dylib\0",
 0x7FFEE285C9D0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libQuadrature.dylib\0",
 0x7FFEE285C9D0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libBNNS.dylib\0",
 0x7FFEE285C9D0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libSparse.dylib\0",
 0x7FFEE285C9D0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/PrivateFrameworks/GPUWrangler.framework/Versions/A/GPUWrangler\0",
 0x7FFEE285CA20, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/PrivateFrameworks/IOAccelerator.framework/Versions/A/IOAccelerator\0",
 0x7FFEE285CA20, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/PrivateFrameworks/IOPresentment.framework/Versions/A/IOPresentment\0",
 0x7FFEE285CA20, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/PrivateFrameworks/DSExternalDisplay.framework/Versions/A/DSExternalDisplay\0",
 0x7FFEE285CA20, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libCoreFSCache.dylib\0",
 0x7FFEE285C880, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/Frameworks/MetalPerformanceShaders.framework/Frameworks/MPSCore.framework/Versions/A/MPSCore\0",
 0x7FFEE285CAE0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/Frameworks/MetalPerformanceShaders.framework/Frameworks/MPSImage.framework/Versions/A/MPSImage\0",
 0x7FFEE285CAE0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/Frameworks/MetalPerformanceShaders.framework/Frameworks/MPSNeuralNetwork.framework/Versions/A/MPSNeuralNetwork\0",
 0x7FFEE285CAE0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/Frameworks/MetalPerformanceShaders.framework/Frameworks/MPSMatrix.framework/Versions/A/MPSMatrix\0",
 0x7FFEE285CAE0, 0x0 = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/Frameworks/MetalPerformanceShaders.framework/Frameworks/MPSRayIntersector.framework/Versions/A/MPSRayIntersector\0",
 0x7FFEE285CAE0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/PrivateFrameworks/MetalTools.framework/Versions/A/MetalTools\0",
 0x7FFEE285C950, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/PrivateFrameworks/AggregateDictionary.framework/Versions/A/AggregateDictionary\0",
 0x7FFEE285C950, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   stat64("/usr/lib/libMobileGestalt.dylib\0",
0x7FFEE285C7F0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/Frameworks/CoreImage.framework/Versions/A/CoreImage\0",
 0x7FFEE285CA20, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/Frameworks/CoreVideo.framework/Versions/A/CoreVideo\0",
 0x7FFEE285CA20, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/Frameworks/OpenGL.framework/Versions/A/OpenGL\0",
0x7FFEE285CA20, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/PrivateFrameworks/GraphVisualizer.framework/Versions/A/GraphVisualizer\0",
 0x7FFEE285C790, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/PrivateFrameworks/FaceCore.framework/Versions/A/FaceCore\0",
 0x7FFEE285C790, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/Frameworks/OpenCL.framework/Versions/A/OpenCL\0",
0x7FFEE285C790, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   stat64("/usr/lib/libFosl_dynamic.dylib\0",
0x7FFEE285C790, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/PrivateFrameworks/OTSVG.framework/Versions/A/OTSVG\0",
 0x7FFEE285C590, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ATS.framework/Versions/A/Resources/libFontParser.dylib\0",
 0x7FFEE285C590, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ATS.framework/Versions/A/Resources/libFontRegistry.dylib\0",
 0x7FFEE285C590, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/Frameworks/ImageIO.framework/Versions/A/Resources/libJPEG.dylib\0",
 0x7FFEE285C170, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/Frameworks/ImageIO.framework/Versions/A/Resources/libTIFF.dylib\0",
 0x7FFEE285C170, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/Frameworks/ImageIO.framework/Versions/A/Resources/libPng.dylib\0",
 0x7FFEE285C170, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/Frameworks/ImageIO.framework/Versions/A/Resources/libGIF.dylib\0",
 0x7FFEE285C170, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/Frameworks/ImageIO.framework/Versions/A/Resources/libJP2.dylib\0",
 0x7FFEE285C170, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/Frameworks/ImageIO.framework/Versions/A/Resources/libRadiance.dylib\0",
 0x7FFEE285C170, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/PrivateFrameworks/AppleJPEG.framework/Versions/A/AppleJPEG\0",
 0x7FFEE285C170, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libGFXShared.dylib\0",
 0x7FFEE285C460, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libGLU.dylib\0",
 0x7FFEE285C260, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libGL.dylib\0",
 0x7FFEE285C260, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libGLImage.dylib\0",
 0x7FFEE285C0D0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libCVMSPluginSupport.dylib\0",
 0x7FFEE285BFD0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libCoreVMClient.dylib\0",
 0x7FFEE285BEC0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   stat64("/usr/lib/libcups.2.dylib\0",
0x7FFEE285CE70, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/Frameworks/Kerberos.framework/Versions/A/Kerberos\0",
 0x7FFEE285CCE0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/Frameworks/GSS.framework/Versions/A/GSS\0",
0x7FFEE285CCE0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   stat64("/usr/lib/libresolv.9.dylib\0",
0x7FFEE285CCE0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   stat64("/usr/lib/libiconv.2.dylib\0",
0x7FFEE285CCE0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/PrivateFrameworks/Heimdal.framework/Versions/A/Heimdal\0",
 0x7FFEE285CBD0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   stat64("/usr/lib/libheimdal-asn1.dylib\0",
0x7FFEE285CA00, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/Frameworks/OpenDirectory.framework/Versions/A/OpenDirectory\0",
 0x7FFEE285CB50, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/PrivateFrameworks/CommonAuth.framework/Versions/A/CommonAuth\0",
 0x7FFEE285CB50, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/Frameworks/OpenDirectory.framework/Versions/A/Frameworks/CFOpenDirectory.framework/Versions/A/CFOpenDirectory\0",
 0x7FFEE285C9E0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/Frameworks/SecurityFoundation.framework/Versions/A/SecurityFoundation\0",
 0x7FFEE285C9E0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/PrivateFrameworks/APFS.framework/Versions/A/APFS\0",
 0x7FFEE285C8A0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   stat64("/usr/lib/libutil.dylib\0", 0x7FFEE285C790,
0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   stat64("/usr/lib/libcharset.1.dylib\0",
0x7FFEE285CC00, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/Frameworks/CoreAudio.framework/Versions/A/CoreAudio\0",
 0x7FFEE285CF50, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/Frameworks/AudioToolbox.framework/Versions/A/AudioToolbox\0",
 0x7FFEE285CF50, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/PrivateFrameworks/AppleSauce.framework/Versions/A/AppleSauce\0",
 0x7FFEE285CDE0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/PrivateFrameworks/AssertionServices.framework/Versions/A/AssertionServices\0",
 0x7FFEE285CDE0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/PrivateFrameworks/BaseBoard.framework/Versions/A/BaseBoard\0",
 0x7FFEE285CCB0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   stat64("/usr/lib/libmecab.1.0.0.dylib\0",
0x7FFEE285D250, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   stat64("/usr/lib/libgermantok.dylib\0",
0x7FFEE285D250, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   stat64("/usr/lib/libThaiTokenizer.dylib\0",
0x7FFEE285D250, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   stat64("/usr/lib/libChineseTokenizer.dylib\0",
0x7FFEE285D250, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/PrivateFrameworks/LanguageModeling.framework/Versions/A/LanguageModeling\0",
 0x7FFEE285D110, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/PrivateFrameworks/CoreEmoji.framework/Versions/A/CoreEmoji\0",
 0x7FFEE285CF40, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/PrivateFrameworks/Lexicon.framework/Versions/A/Lexicon\0",
 0x7FFEE285CF40, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/PrivateFrameworks/LinguisticData.framework/Versions/A/LinguisticData\0",
 0x7FFEE285CF40, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   stat64("/usr/lib/libcmph.dylib\0", 0x7FFEE285CF40,
0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/Frameworks/CoreData.framework/Versions/A/CoreData\0",
 0x7FFEE285D1C0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/Frameworks/ServiceManagement.framework/Versions/A/ServiceManagement\0",
 0x7FFEE285D220, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/PrivateFrameworks/BackgroundTaskManagement.framework/Versions/A/BackgroundTaskManagement\0",
 0x7FFEE285D0C0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   stat64("/usr/lib/libxslt.1.dylib\0",
0x7FFEE285D3C0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/usr/local/opt/libffi/lib/libffi.6.dylib\0", 0x7FFEE285D6F0,
0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/usr/local/opt/libffi/lib/libffi.6.dylib\0", 0x7FFEE285DB30,
0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   open("/usr/local/opt/libffi/lib/libffi.6.dylib\0",
0x0, 0x0) = 3 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   pread(0x3, "\317\372\355\376\a\0", 0x1000, 0x0) =
4096 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   fcntl(0x3, 0x62, 0x7FFEE28552C0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   mmap(0x10DC03000, 0x5000, 0x5, 0x12, 0x3, 0x0) = 0x10DC03000
0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   mmap(0x10DC08000, 0x1000, 0x3, 0x12, 0x3, 0x5000) =
0x10DC08000 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   mmap(0x10DC09000, 0x10AC, 0x1, 0x12, 0x3, 0x6000) =
0x10DC09000 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   fcntl(0x3, 0x2C, 0x7FFEE28554C0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   close(0x3) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/usr/local/Cellar/nettle/3.4.1/lib/libnettle.6.dylib\0",
0x7FFEE285D6D0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/usr/local/Cellar/nettle/3.4.1/lib/libnettle.6.dylib\0",
0x7FFEE285DB10, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   stat64("/usr/lib/libcrypto.42.dylib\0",
0x7FFEE285DC40, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   stat64("/usr/lib/libssl.44.dylib\0",
0x7FFEE285DC40, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/Frameworks/LDAP.framework/Versions/A/LDAP\0",
0x7FFEE285DC40, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/PrivateFrameworks/TrustEvaluationAgent.framework/Versions/A/TrustEvaluationAgent\0",
 0x7FFEE285DB60, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/PrivateFrameworks/CoreDaemon.framework/Versions/B/CoreDaemon\0",
 0x7FFEE285DAD0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/PrivateFrameworks/AppleSRP.framework/Versions/A/AppleSRP\0",
 0x7FFEE285D960, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   open("/dev/dtracehelper\0", 0x2,
0xFFFFFFFFE285EE90) = 3 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   ioctl(0x3, 0x80086804, 0x7FFEE285ECA0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   close(0x3) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   madvise(0x10D87E000, 0x2000, 0x5) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   madvise(0x10D406000, 0x2000, 0x5) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   access("/AppleInternal/XBS/.isChrooted\0", 0x0,
0x0) = -1 Err#2&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   bsdthread_register(0x7FFF6DA47408, 0x7FFF6DA473F8, 0x2000) =
1073742047 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   sysctlbyname(kern.bootargs, 0xD, 0x7FFEE285C5B0,
0x7FFEE285C5A8, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   ioctl(0x2, 0x4004667A, 0x7FFEE285C834) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   mprotect(0x10DC0B000, 0x1000, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   mprotect(0x10DC12000, 0x1000, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   mprotect(0x10DC13000, 0x1000, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   mprotect(0x10DC1A000, 0x1000, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   mprotect(0x10D429000, 0x90, 0x1) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   mprotect(0x10D420000, 0x1000, 0x1) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   mprotect(0x10D429000, 0x90, 0x3) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   mprotect(0x10D429000, 0x90, 0x1) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   issetugid(0x0, 0x0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   getentropy(0x7FFEE2859E00, 0x20, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   getpid(0x0, 0x0, 0x0) = 918 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   stat64("/AppleInternal\0", 0x7FFEE285CA20, 0x0) =
-1 Err#2&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   csops(0x396, 0x7, 0x7FFEE285C550) = -1 Err#22&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   proc_info(0x2, 0x396, 0xD) = 64 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   csops(0x396, 0x7, 0x7FFEE285BDA0) = -1 Err#22&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   geteuid(0x0, 0x0, 0x0) = 502 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   getuid(0x0, 0x0, 0x0) = 502 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   sysctl([CTL_KERN, 14, 1, 918, 0, 0] (4), 0x7FFEE285B168,
0x7FFEE285B148, 0x0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   gettid(0x7FFEE285B408, 0x7FFEE285B40C, 0x0) = -1 Err#3&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   geteuid(0x0, 0x0, 0x0) = 502 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   getegid(0x0, 0x0, 0x0) = 20 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   getuid(0x0, 0x0, 0x0) = 502 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   getgid(0x0, 0x0, 0x0) = 20 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   geteuid(0x0, 0x0, 0x0) = 502 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   getegid(0x0, 0x0, 0x0) = 20 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   issetugid(0x0, 0x0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   issetugid(0x0, 0x0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   issetugid(0x0, 0x0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   issetugid(0x0, 0x0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   stat64("/etc/gnutls/default-priorities\0",
0x7FFEE285CA78, 0x0) = -1 Err#2&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/PrivateFrameworks/Heimdal.framework/Heimdal\0",
0x7FFEE285B670, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
stat64("/System/Library/Frameworks/GSS.framework/GSS\0",
0x7FFEE285B670, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   ioctl(0x0, 0x4004667A, 0x7FFEE285F564) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   ioctl(0x0, 0x40487413, 0x7FFEE285F6B8) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   getuid(0x0, 0x0, 0x0) = 502 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   geteuid(0x0, 0x0, 0x0) = 502 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   sysctl([CTL_KERN, 10, 0, 0, 0, 0] (2), 0x10D69B970,
0x7FFEE285F2C8, 0x0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   getrlimit(0x1008, 0x7FFEE285F270, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   open_nocancel("/private/etc/ssl/openssl.cnf\0",
0x0, 0x1B6) = 3 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   fstat64(0x3, 0x7FFEE285F108, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   read_nocancel(0x3, "[ req ]\n#default_bits\t\t=
2048\n#default_md\t\t= sha256\n#default_keyfile \t=
privkey.pem\ndistinguished_name\t= req_distinguished_name\nattributes\t\t=
req_attributes\n\n[ req_distinguished_name ]\ncountryName\t\t\t= Country Name
(2 letter code)\ncountryName_min\t\t\t= 2\ncoun", 0x1000) = 745 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   read_nocancel(0x3, "\0", 0x1000) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   close_nocancel(0x3) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   socket(0x1E, 0x2, 0x0) = 3 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   close(0x3) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   issetugid(0x0, 0x0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   issetugid(0x0, 0x0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   pipe(0x0, 0x0, 0x0) = 3 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   fcntl(0x4, 0x3, 0x0) = 1 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   fcntl(0x4, 0x4, 0x5) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   fcntl(0x3, 0x3, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   fcntl(0x3, 0x4, 0x4) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   fcntl(0x4, 0x1, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   fcntl(0x4, 0x2, 0x1) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   fcntl(0x3, 0x1, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   fcntl(0x3, 0x2, 0x1) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   bsdthread_create(0x10D48FEC4, 0x7FCE20607AA0, 0x70000D280000)
= 220725248 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b15:   thread_selfid(0x0, 0x0, 0x0) = 15125 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   geteuid(0x0, 0x0, 0x0) = 502 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   issetugid(0x0, 0x0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   geteuid(0x0, 0x0, 0x0) = 502 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   shm_open(0x7FFF6DA3ACD8, 0x0, 0x0) = 5 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   mmap(0x0, 0x1000, 0x1, 0x1, 0x5, 0x0) = 0x10D42B000 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   close_nocancel(0x5) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   open_nocancel("/etc/.mdns_debug\0", 0x0, 0x0) = -1
Err#2&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   issetugid(0x0, 0x0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   issetugid(0x0, 0x0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   proc_info(0x2, 0x396, 0x11) = 56 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   proc_info(0x2, 0x396, 0x11) = 56 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   sysctl([CTL_KERN, 14, 1, 918, 0, 0] (4), 0x7FFEE285ED28,
0x7FFEE285ED18, 0x0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   issetugid(0x0, 0x0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   openat(0xFFFFFFFFFFFFFFFE,
"/Library/Preferences/Logging/com.apple.diagnosticd.filter.plist\0",
0x1000104, 0xFFFFFFFFE285EB40) = 5 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   lseek(0x5, 0x0, 0x2) = 62 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   pread(0x5, "bplist00\321\001\002Vglobal\023\0",
0x3E, 0x0) = 62 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   close(0x5) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   open("/usr/local/bin/virsh\0", 0x8004, 0x6DA83DD2)
= 5 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   fcntl(0x5, 0x32, 0x7FFEE285E590) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   close(0x5) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
access("/Users/AB84394/.config/libvirt/libvirt.conf\0", 0x0, 0x0 = -1
Err#2&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   issetugid(0x0, 0x0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   geteuid(0x0, 0x0, 0x0) = 502 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   getuid(0x0, 0x0, 0x0) = 502 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   geteuid(0x0, 0x0, 0x0) = 502 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   getuid(0x0, 0x0, 0x0) = 502 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   geteuid(0x0, 0x0, 0x0) = 502 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   issetugid(0x0, 0x0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   issetugid(0x0, 0x0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   geteuid(0x0, 0x0, 0x0) = 502 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   issetugid(0x0, 0x0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   issetugid(0x0, 0x0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   issetugid(0x0, 0x0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   geteuid(0x0, 0x0, 0x0) = 502 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   stat64("/Users/AB84394/.cache/libvirt\0",
0x7FFEE285EFA0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
open("/Users/AB84394/.cache/libvirt/libvirtd.lock\0", 0x202, 0x180) =
5 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   fcntl(0x5, 0x1, 0x206084A0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   fcntl(0x5, 0x2, 0x1) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   fcntl(0x5, 0x9, 0x7FFEE285F058) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   socket(0x1, 0x1, 0x0) = 6 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   connect(0x6, 0x7FFEE285F0E0, 0x6A) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   getsockname(0x6, 0x7FFEE285F170, 0x7FFEE285F1F0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   fcntl(0x6, 0x1, 0xD65B4AF) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   fcntl(0x6, 0x2, 0x1) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   fcntl(0x6, 0x3, 0x0) = 2 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   fcntl(0x6, 0x4, 0x6) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:  
unlink("/Users/AB84394/.cache/libvirt/libvirtd.lock\0", 0x0, 0x0 = 0
0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   close(0x5) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   pipe(0x0, 0x0, 0x0) = 5 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   fcntl(0x7, 0x1, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   fcntl(0x7, 0x2, 0x1) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   fcntl(0x5, 0x1, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   fcntl(0x5, 0x2, 0x1) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   write(0x4, "\0", 0x1) = 1 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b15:   select(0x4, 0x70000D27FC20, 0x70000D27FCA0, 0x70000D27FD20,
0x0) = 1 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b15:   recvfrom(0x3, 0x0, 0x0) = -1 Err#38&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b15:   ioctl(0x3, 0x4004667F, 0x70000D27FDC0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b15:   read(0x3, "\0", 0x1) = 1 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   write(0x4, "\0", 0x1) = 1 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   __pthread_sigmask(0x1, 0x7FFEE285F04C, 0x7FFEE285F05C) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b15:   select(0x7, 0x70000D27FC20, 0x70000D27FCA0, 0x70000D27FD20,
0x0) = 1 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   select(0x7, 0x7FFEE285EE50, 0x7FFEE285EED0, 0x7FFEE285EF50,
0x0) = 1 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b15:   recvfrom(0x3, 0x0, 0x0) = -1 Err#38&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   __pthread_sigmask(0x3, 0x7FFEE285F05C, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b15:   ioctl(0x3, 0x4004667F, 0x70000D27FDC0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b15:   read(0x3, "\0", 0x1) = 1 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   write(0x6, "\0", 0x1C) = 28 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   __pthread_sigmask(0x1, 0x7FFEE285F04C, 0x7FFEE285F05C) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   select(0x7, 0x7FFEE285EE50, 0x7FFEE285EED0, 0x7FFEE285EF50,
0x0) = 1 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   recvfrom(0x6, 0x0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   ioctl(0x6, 0x4004667F, 0x7FFEE285EFF0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   __pthread_sigmask(0x3, 0x7FFEE285F05C, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   read(0x6, "\0", 0x4) = 4 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   read(0x6, " \0", 0x20) = 32 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   write(0x4, "\0", 0x1) = 1 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b15:   select(0x4, 0x70000D27FC20, 0x70000D27FCA0, 0x70000D27FD20,
0x0) = 1 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   write(0x4, "\0", 0x1) = 1 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b15:   recvfrom(0x3, 0x0, 0x0) = -1 Err#38&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   __pthread_sigmask(0x1, 0x7FFEE285F04C, 0x7FFEE285F05C) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b15:   ioctl(0x3, 0x4004667F, 0x70000D27FDC0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   select(0x7, 0x7FFEE285EE50, 0x7FFEE285EED0, 0x7FFEE285EF50,
0x0) = 1 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b15:   read(0x3, "\0", 0x1) = 1 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   __pthread_sigmask(0x3, 0x7FFEE285F05C, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b15:   select(0x4, 0x70000D27FC20, 0x70000D27FCA0, 0x70000D27FD20,
0x0) = 1 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   write(0x6, "\0", 0x20) = 32 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b15:   recvfrom(0x3, 0x0, 0x0) = -1 Err#38&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   __pthread_sigmask(0x1, 0x7FFEE285F04C, 0x7FFEE285F05C) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b15:   ioctl(0x3, 0x4004667F, 0x70000D27FDC0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b15:   read(0x3, "\0", 0x1) = 1 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   select(0x7, 0x7FFEE285EE50, 0x7FFEE285EED0, 0x7FFEE285EF50,
0x0) = 1 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   recvfrom(0x6, 0x0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   ioctl(0x6, 0x4004667F, 0x7FFEE285EFF0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   __pthread_sigmask(0x3, 0x7FFEE285F05C, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   read(0x6, "\0", 0x4) = 4 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   read(0x6, " \0", 0x1C) = 28 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   write(0x4, "\0", 0x1) = 1 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   write(0x4, "\0", 0x1) = 1 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b15:   select(0x4, 0x70000D27FC20, 0x70000D27FCA0, 0x70000D27FD20,
0x0) = 1 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   __pthread_sigmask(0x1, 0x7FFEE285F04C, 0x7FFEE285F05C) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b15:   recvfrom(0x3, 0x0, 0x0) = -1 Err#38&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   select(0x7, 0x7FFEE285EE50, 0x7FFEE285EED0, 0x7FFEE285EF50,
0x0) = 1 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b15:   ioctl(0x3, 0x4004667F, 0x70000D27FDC0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   __pthread_sigmask(0x3, 0x7FFEE285F05C, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b15:   read(0x3, "\0", 0x1) = 1 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   write(0x6, "\0", 0x38) = 56 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b15:   select(0x4, 0x70000D27FC20, 0x70000D27FCA0, 0x70000D27FD20,
0x0) = 1 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   __pthread_sigmask(0x1, 0x7FFEE285F04C, 0x7FFEE285F05C) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b15:   recvfrom(0x3, 0x0, 0x0) = -1 Err#38&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b15:   ioctl(0x3, 0x4004667F, 0x70000D27FDC0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b15:   read(0x3, "\0", 0x1) = 1 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   select(0x7, 0x7FFEE285EE50, 0x7FFEE285EED0, 0x7FFEE285EF50,
0x0) = 1 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   recvfrom(0x6, 0x0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   ioctl(0x6, 0x4004667F, 0x7FFEE285EFF0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   __pthread_sigmask(0x3, 0x7FFEE285F05C, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   read(0x6, "\0", 0x4) = 4 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   read(0x6, " \0", 0xCC) = 204 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   write(0x4, "\0", 0x1) = 1 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   write(0x4, "\0", 0x1) = 1 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b15:   select(0x4, 0x70000D27FC20, 0x70000D27FCA0, 0x70000D27FD20,
0x0) = 1 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b15:   recvfrom(0x3, 0x0, 0x0) = -1 Err#38&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b15:   ioctl(0x3, 0x4004667F, 0x70000D27FDC0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b15:   read(0x3, "\0", 0x1) = 1 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   write_nocancel(0x2, "error: \0", 0x7) = 7 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b15:   close(0x7) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b15:   close(0x5) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   write_nocancel(0x2, "failed to connect to the
hypervisor\n\0", 0x24) = 36 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   write_nocancel(0x2, "error: \0", 0x7) = 7 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   write_nocancel(0x2, "internal error: unable to
initialize VirtualBox driver API\n\0", 0x3B) = 59 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   write(0x4, "\0", 0x1) = 1 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b15:   close(0x6) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b15:   __disable_threadsignal(0x1, 0x0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b15:   ulock_wake(0x1000002, 0x70000D280034, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   ulock_wait(0x1020002, 0x70000D280034, 0x1303) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
918/0x3b12:   issetugid(0x0, 0x0, 0x0) = 0 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;  
919/0x3b1a:   thread_selfid(0x70000D1FF000, 0x81000, 0x1303) = 15130 0&lt;/p&gt;

&lt;p style="margin:0in;font-family:Consolas;font-size:8.25pt;color:black"&gt;    
95/0x3b19:   thread_selfid(0x1, 0x0, 0x0) = 15129 0&lt;/p&gt;

&lt;div class="gmail_default" \
style="font-family:georgia,serif;color:rgb(102,51,255)"&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190108191942</emailId><senderName>Keith Bierman</senderName><senderEmail>khbkhb@gmail.com</senderEmail><timestampReceived>2019-01-08 19:19:42-0400</timestampReceived><subject>Re: [libvirt-users] virsh on mac os X</subject><body>

[Attachment #2 (multipart/alternative)]


Borrowed an old lab mac running 10.13.6 installed brew from scratch,
installed libvirt  ... same failure. Advise about how to debug would be
appreciated!

*=E2=9E=9C  * virsh -c vbox:///session list


error: failed to connect to the hypervisor

error: internal error: Failed to create vbox driver object.


virsh -V


Virsh command line tool of libvirt 4.10.0

See web site at https://libvirt.org/


Compiled with support for:

 Hypervisors: QEMU/KVM VMware VirtualBox ESX Test

 Networking: Remote Bridging

 Storage: Dir

 Miscellaneous: Daemon Secrets Debug


*=E2=9E=9C  * uname -a

Darwin khb-Air-REAL-2.local 17.7.0 Darwin Kernel Version 17.7.0: Thu Jun 21
22:53:14 PDT 2018; root:xnu-4570.71.2~1/RELEASE_X86_64 x86_64



Keith Bierman
khbkhb@gmail.com
303 997 2749


&gt;

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;&lt;div \
class="gmail_default" \
style="font-family:georgia,serif;color:rgb(102,51,255)"&gt;Borrowed an old lab mac \
running 10.13.6 installed brew from scratch, installed libvirt   ... same failure. \
Advise about how to debug would be appreciated!&lt;/div&gt;&lt;div class="gmail_default" \
style="font-family:georgia,serif;color:rgb(102,51,255)"&gt;&lt;br&gt;&lt;/div&gt;&lt;div \
class="gmail_default" style="color:rgb(102,51,255)"&gt;&lt;p \
class="gmail-m_5354456739117771693gmail-p1" \
style="font-variant-numeric:normal;font-variant-east-asian:normal;font-stretch:normal;font-size:18px;line-height:normal;margin:0px;color:rgb(0,0,0)"&gt;&lt;span \
class="gmail-m_5354456739117771693gmail-s1" \
style="font-family:Courier;font-variant-ligatures:no-common-ligatures;color:rgb(52,188,38)"&gt;&lt;b&gt;➜ \
&lt;span class="gmail-m_5354456739117771693gmail-Apple-converted-space"&gt;  \
&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;span class="gmail-m_5354456739117771693gmail-s2" \
style="font-variant-ligatures:no-common-ligatures"&gt;&lt;font face="monospace, monospace"&gt; \
virsh -c vbox:///session list&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;&lt;p \
class="gmail-m_5354456739117771693gmail-p1" \
style="font-family:Courier;font-variant-numeric:normal;font-variant-east-asian:normal; \
font-stretch:normal;font-size:18px;line-height:normal;margin:0px;color:rgb(0,0,0)"&gt;&lt;br&gt;&lt;/p&gt;&lt;p \
class="gmail-m_5354456739117771693gmail-p1" \
style="font-family:Courier;font-variant-numeric:normal;font-variant-east-asian:normal; \
font-stretch:normal;font-size:18px;line-height:normal;margin:0px;color:rgb(0,0,0)"&gt;&lt;span \
class="gmail-m_5354456739117771693gmail-s2" \
style="font-variant-ligatures:no-common-ligatures"&gt;error: failed to connect to the \
hypervisor&lt;/span&gt;&lt;/p&gt;&lt;p class="gmail-m_-1923552182495628042gmail-p1" \
style="font-family:Courier;font-variant-numeric:normal;font-variant-east-asian:normal; \
font-stretch:normal;font-size:18px;line-height:normal;margin:0px;color:rgb(0,0,0)"&gt;&lt;span \
class="gmail-m_-1923552182495628042gmail-s1" \
style="font-variant-ligatures:no-common-ligatures"&gt;&lt;/span&gt;&lt;/p&gt;&lt;p \
class="gmail-m_5354456739117771693gmail-p1" \
style="font-family:Courier;font-variant-numeric:normal;font-variant-east-asian:normal; \
font-stretch:normal;font-size:18px;line-height:normal;margin:0px;color:rgb(0,0,0)"&gt;&lt;span \
class="gmail-m_5354456739117771693gmail-s2" \
style="font-variant-ligatures:no-common-ligatures"&gt;error: internal error: Failed to \
create vbox driver object.&lt;/span&gt;&lt;/p&gt;&lt;p class="gmail-m_5354456739117771693gmail-p1" \
style="font-family:Courier;font-variant-numeric:normal;font-variant-east-asian:normal; \
font-stretch:normal;font-size:18px;line-height:normal;margin:0px;color:rgb(0,0,0)"&gt;&lt;span \
class="gmail-m_5354456739117771693gmail-s2" \
style="font-variant-ligatures:no-common-ligatures"&gt;&lt;br&gt;&lt;/span&gt;&lt;/p&gt;&lt;p \
class="gmail-m_-1923552182495628042gmail-p1" \
style="font-family:Courier;font-variant-numeric:normal;font-variant-east-asian:normal; \
font-stretch:normal;font-size:18px;line-height:normal;margin:0px;color:rgb(0,0,0)"&gt;&lt;span \
class="gmail-m_-1923552182495628042gmail-s1" \
style="font-variant-ligatures:no-common-ligatures"&gt;virsh -V&lt;/span&gt;&lt;/p&gt;&lt;p \
class="gmail-m_-1923552182495628042gmail-p1" \
style="font-family:Courier;font-variant-numeric:normal;font-variant-east-asian:normal; \
font-stretch:normal;font-size:18px;line-height:normal;margin:0px;color:rgb(0,0,0)"&gt;&lt;span \
class="gmail-m_-1923552182495628042gmail-s1" \
style="font-variant-ligatures:no-common-ligatures"&gt;&lt;br&gt;&lt;/span&gt;&lt;/p&gt;&lt;p \
class="gmail-m_-1923552182495628042gmail-p1" \
style="font-family:Courier;font-variant-numeric:normal;font-variant-east-asian:normal; \
font-stretch:normal;font-size:18px;line-height:normal;margin:0px;color:rgb(0,0,0)"&gt;&lt;span \
class="gmail-m_-1923552182495628042gmail-s1" \
style="font-variant-ligatures:no-common-ligatures"&gt;Virsh command line tool of libvirt \
4.10.0&lt;/span&gt;&lt;/p&gt;&lt;p class="gmail-m_-1923552182495628042gmail-p1" \
style="font-family:Courier;font-variant-numeric:normal;font-variant-east-asian:normal; \
font-stretch:normal;font-size:18px;line-height:normal;margin:0px;color:rgb(0,0,0)"&gt;&lt;span \
class="gmail-m_-1923552182495628042gmail-s1" \
style="font-variant-ligatures:no-common-ligatures"&gt;See web site at  &lt;a \
href="https://libvirt.org/" target="_blank"&gt;https://libvirt.org/&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;&lt;p \
class="gmail-m_-1923552182495628042gmail-p2" \
style="font-family:Courier;font-variant-numeric:normal;font-variant-east-asian:normal; \
font-stretch:normal;font-size:18px;line-height:normal;margin:0px;color:rgb(0,0,0);min-height:22px"&gt;&lt;span \
class="gmail-m_-1923552182495628042gmail-s1" \
style="font-variant-ligatures:no-common-ligatures"&gt;&lt;/span&gt;&lt;br&gt;&lt;/p&gt;&lt;p \
class="gmail-m_-1923552182495628042gmail-p1" \
style="font-family:Courier;font-variant-numeric:normal;font-variant-east-asian:normal; \
font-stretch:normal;font-size:18px;line-height:normal;margin:0px;color:rgb(0,0,0)"&gt;&lt;span \
class="gmail-m_-1923552182495628042gmail-s1" \
style="font-variant-ligatures:no-common-ligatures"&gt;Compiled with support \
for:&lt;/span&gt;&lt;/p&gt;&lt;p class="gmail-m_-1923552182495628042gmail-p1" \
style="font-family:Courier;font-variant-numeric:normal;font-variant-east-asian:normal; \
font-stretch:normal;font-size:18px;line-height:normal;margin:0px;color:rgb(0,0,0)"&gt;&lt;span \
class="gmail-m_-1923552182495628042gmail-s1" \
style="font-variant-ligatures:no-common-ligatures"&gt;&lt;span \
class="gmail-m_-1923552182495628042gmail-Apple-converted-space"&gt;  &lt;/span&gt;Hypervisors: \
QEMU/KVM VMware VirtualBox ESX Test&lt;/span&gt;&lt;/p&gt;&lt;p \
class="gmail-m_-1923552182495628042gmail-p1" \
style="font-family:Courier;font-variant-numeric:normal;font-variant-east-asian:normal; \
font-stretch:normal;font-size:18px;line-height:normal;margin:0px;color:rgb(0,0,0)"&gt;&lt;span \
class="gmail-m_-1923552182495628042gmail-s1" \
style="font-variant-ligatures:no-common-ligatures"&gt;&lt;span \
class="gmail-m_-1923552182495628042gmail-Apple-converted-space"&gt;  &lt;/span&gt;Networking: \
Remote Bridging&lt;/span&gt;&lt;/p&gt;&lt;p class="gmail-m_-1923552182495628042gmail-p1" \
style="font-family:Courier;font-variant-numeric:normal;font-variant-east-asian:normal; \
font-stretch:normal;font-size:18px;line-height:normal;margin:0px;color:rgb(0,0,0)"&gt;&lt;span \
class="gmail-m_-1923552182495628042gmail-s1" \
style="font-variant-ligatures:no-common-ligatures"&gt;&lt;span \
class="gmail-m_-1923552182495628042gmail-Apple-converted-space"&gt;  &lt;/span&gt;Storage: \
Dir&lt;/span&gt;&lt;/p&gt;&lt;p class="gmail-m_-1923552182495628042gmail-p1" \
style="font-family:Courier;font-variant-numeric:normal;font-variant-east-asian:normal; \
font-stretch:normal;font-size:18px;line-height:normal;margin:0px;color:rgb(0,0,0)"&gt;&lt;span \
class="gmail-m_-1923552182495628042gmail-s1" \
style="font-variant-ligatures:no-common-ligatures"&gt;&lt;span \
class="gmail-m_-1923552182495628042gmail-Apple-converted-space"&gt;  \
&lt;/span&gt;Miscellaneous: Daemon Secrets Debug&lt;/span&gt;&lt;/p&gt;&lt;p \
class="gmail-m_-1923552182495628042gmail-p3" \
style="font-family:Courier;font-variant-numeric:normal;font-variant-east-asian:normal; \
font-stretch:normal;font-size:18px;line-height:normal;margin:0px;color:rgb(52,188,38)"&gt;&lt;br&gt;&lt;/p&gt;&lt;p \
class="gmail-m_-1923552182495628042gmail-p1" \
style="font-family:Courier;font-variant-numeric:normal;font-variant-east-asian:normal; \
font-stretch:normal;font-size:18px;line-height:normal;margin:0px;color:rgb(0,0,0)"&gt;&lt;span \
class="gmail-m_-1923552182495628042gmail-s3" \
style="font-variant-ligatures:no-common-ligatures;color:rgb(52,188,38)"&gt;&lt;b&gt;➜  &lt;span \
class="gmail-m_-1923552182495628042gmail-Apple-converted-space"&gt;  \
&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;span class="gmail-m_-1923552182495628042gmail-s1" \
style="font-variant-ligatures:no-common-ligatures"&gt;  uname -a&lt;/span&gt;&lt;/p&gt;&lt;p \
class="gmail-m_-1923552182495628042gmail-p1" \
style="font-family:Courier;font-variant-numeric:normal;font-variant-east-asian:normal; \
font-stretch:normal;font-size:18px;line-height:normal;margin:0px;color:rgb(0,0,0)"&gt;&lt;span \
class="gmail-m_-1923552182495628042gmail-s1" \
style="font-variant-ligatures:no-common-ligatures"&gt;Darwin khb-Air-REAL-2.local 17.7.0 \
Darwin Kernel Version 17.7.0: Thu Jun 21 22:53:14 PDT 2018; \
root:xnu-4570.71.2~1/RELEASE_X86_64 x86_64&lt;/span&gt;&lt;/p&gt;&lt;p \
class="gmail-m_-1923552182495628042gmail-p3" \
style="font-family:Courier;font-variant-numeric:normal;font-variant-east-asian:normal; \
font-stretch:normal;font-size:18px;line-height:normal;margin:0px;color:rgb(52,188,38)"&gt;&lt;br&gt;&lt;/p&gt;&lt;/div&gt;&lt;div \
class="gmail_default" \
style="font-family:georgia,serif;color:rgb(102,51,255)"&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div dir="ltr" \
class="gmail_signature"&gt;&lt;div dir="ltr"&gt;&lt;div&gt;&lt;div dir="ltr"&gt;&lt;div&gt;&lt;div \
dir="ltr"&gt;&lt;div&gt;Keith Bierman&lt;br&gt;&lt;a href="mailto:khbkhb@gmail.com" \
target="_blank"&gt;khbkhb@gmail.com&lt;/a&gt;&lt;br&gt;&lt;span&gt;&lt;span title="Call with Google \
Voice"&gt;&lt;span title="Call with Google Voice"&gt;303 997 \
2749&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;div \
class="gmail_quote"&gt;&lt;blockquote class="gmail_quote" style="margin:0px 0px 0px \
0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"&gt;&lt;div dir="ltr"&gt;&lt;div \
dir="ltr"&gt;&lt;br&gt;

&lt;div style="font-family:georgia,serif;color:rgb(102,51,255)"&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;
&lt;/blockquote&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190104162748</emailId><senderName>daggs</senderName><senderEmail>daggs@gmx.com</senderEmail><timestampReceived>2019-01-04 16:27:48-0400</timestampReceived><subject>Re: [libvirt-users] script called from qemu hook freezes.</subject><body>

Greetings Peter,

&gt; Sent: Friday, January 04, 2019 at 4:47 PM
&gt; From: "Peter Krempa" &lt;pkrempa@redhat.com&gt;
&gt; To: daggs &lt;daggs@gmx.com&gt;
&gt; Cc: libvirt-users@redhat.com
&gt; Subject: Re: [libvirt-users] script called from qemu hook freezes.
&gt; 
&gt; On Thu, Jan 03, 2019 at 18:07:58 +0100, daggs wrote:
&gt; &gt; Greetings,
&gt; &gt; 
&gt; &gt; I'm executing an external script when the qemu hook is called with start or \
&gt; &gt; release, the script is rather simple, upon start it iterates over the output of \
&gt; &gt; lsusb -t and for each device, it looks if it should be added to the vm we \
&gt; &gt; started, if so, it attaches it to the vm as follows: virsh --connect \
&gt; &gt; qemu:///system "${cmd}" "${domain}" /dev/stdin &lt;&lt; END &lt;hostdev mode='subsystem' \
&gt; &gt; type='usb'&gt; &lt;source&gt;
&gt; &gt; &lt;address bus='${busnum}' device='${devnum}' /&gt;
&gt; &gt; &lt;/source&gt;
&gt; &gt; &lt;/hostdev&gt;
&gt; &gt; END
&gt; &gt; 
&gt; &gt; where cmd is attach-device, domain is the vm's name, busnum and devnum come from \
&gt; &gt; the output of the lsusb -t. my issue is that upon the first attach attempt, the \
&gt; &gt; cmd hangs, I need to kill it and after than I cannot preform any virsh cmd, I \
&gt; &gt; must restart the host. if I try to execute the same cmd after the vm is up, it \
&gt; &gt; works great. 
&gt; &gt; why the attach process gets stuck? do I need to execute it under different stage?
&gt; 
&gt; Hook scripts shall never call any libvirt API (even through virsh). At
&gt; the point when the hook script is called the VM startup process is
&gt; paused until the script returns. If the script attempts to modify the VM
&gt; it gets stuck as the VM is locked at that point.
&gt; 
&gt; You either need to add the device prior to startup, but AFAIK that is
&gt; not possible with a hook script or after but the script needs to return.
&gt; 
&gt; So you either fork off a process which will wait for the startup to
&gt; finish from the hook script or write an APP using the libvirt API which
&gt; will wait for the VM start event and then execute what's necessary.
&gt; 

I see, is there another way to do what I need (on startup usb hotplug) or maybe \
optional hotplug (e.g. don't fail the device isn't present)?

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20190104191600</emailId><senderName>Laine Stump</senderName><senderEmail>laine@redhat.com</senderEmail><timestampReceived>2019-01-04 19:16:00-0400</timestampReceived><subject>Re: [libvirt-users] script called from qemu hook freezes.</subject><body>

On 1/4/19 11:27 AM, daggs wrote:
&gt; Greetings Peter,
&gt; 
&gt; &gt; Sent: Friday, January 04, 2019 at 4:47 PM
&gt; &gt; From: "Peter Krempa" &lt;pkrempa@redhat.com&gt;
&gt; &gt; To: daggs &lt;daggs@gmx.com&gt;
&gt; &gt; Cc: libvirt-users@redhat.com
&gt; &gt; Subject: Re: [libvirt-users] script called from qemu hook freezes.
&gt; &gt; 
&gt; &gt; On Thu, Jan 03, 2019 at 18:07:58 +0100, daggs wrote:
&gt; &gt; &gt; Greetings,
&gt; &gt; &gt; 
&gt; &gt; &gt; I'm executing an external script when the qemu hook is called with start or \
&gt; &gt; &gt; release, the script is rather simple, upon start it iterates over the output of \
&gt; &gt; &gt; lsusb -t and for each device, it looks if it should be added to the vm we \
&gt; &gt; &gt; started, if so, it attaches it to the vm as follows: virsh --connect \
&gt; &gt; &gt; qemu:///system "${cmd}" "${domain}" /dev/stdin &lt;&lt; END &lt;hostdev mode='subsystem' \
&gt; &gt; &gt; type='usb'&gt; &lt;source&gt;
&gt; &gt; &gt; &lt;address bus='${busnum}' device='${devnum}' /&gt;
&gt; &gt; &gt; &lt;/source&gt;
&gt; &gt; &gt; &lt;/hostdev&gt;
&gt; &gt; &gt; END
&gt; &gt; &gt; 
&gt; &gt; &gt; where cmd is attach-device, domain is the vm's name, busnum and devnum come \
&gt; &gt; &gt; from the output of the lsusb -t. my issue is that upon the first attach \
&gt; &gt; &gt; attempt, the cmd hangs, I need to kill it and after than I cannot preform any \
&gt; &gt; &gt; virsh cmd, I must restart the host. if I try to execute the same cmd after the \
&gt; &gt; &gt; vm is up, it works great. 
&gt; &gt; &gt; why the attach process gets stuck? do I need to execute it under different \
&gt; &gt; &gt; stage?
&gt; &gt; 
&gt; &gt; Hook scripts shall never call any libvirt API (even through virsh). At
&gt; &gt; the point when the hook script is called the VM startup process is
&gt; &gt; paused until the script returns. If the script attempts to modify the VM
&gt; &gt; it gets stuck as the VM is locked at that point.
&gt; &gt; 
&gt; &gt; You either need to add the device prior to startup, but AFAIK that is
&gt; &gt; not possible with a hook script or after but the script needs to return.
&gt; &gt; 
&gt; &gt; So you either fork off a process which will wait for the startup to
&gt; &gt; finish from the hook script or write an APP using the libvirt API which
&gt; &gt; will wait for the VM start event and then execute what's necessary.
&gt; &gt; 
&gt; 
&gt; I see, is there another way to do what I need (on startup usb hotplug) or maybe \
&gt; optional hotplug (e.g. don't fail the device isn't present)?

I've never used it, but does the "startupPolicy" attribute do what you 
need? Search for that string at:

    https://libvirt.org/formatdomain.html#elementsHostDevSubsys

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20190105065719</emailId><senderName>daggs</senderName><senderEmail>daggs@gmx.com</senderEmail><timestampReceived>2019-01-05 06:57:19-0400</timestampReceived><subject>Re: [libvirt-users] script called from qemu hook freezes.</subject><body>

Greetings Laine,

&gt; Sent: Friday, January 04, 2019 at 9:16 PM
&gt; From: "Laine Stump" &lt;laine@redhat.com&gt;
&gt; To: libvirt-users@redhat.com
&gt; Cc: daggs &lt;daggs@gmx.com&gt;
&gt; Subject: Re: [libvirt-users] script called from qemu hook freezes.
&gt; 
&gt; On 1/4/19 11:27 AM, daggs wrote:
&gt; &gt; Greetings Peter,
&gt; &gt; 
&gt; &gt; &gt; Sent: Friday, January 04, 2019 at 4:47 PM
&gt; &gt; &gt; From: "Peter Krempa" &lt;pkrempa@redhat.com&gt;
&gt; &gt; &gt; To: daggs &lt;daggs@gmx.com&gt;
&gt; &gt; &gt; Cc: libvirt-users@redhat.com
&gt; &gt; &gt; Subject: Re: [libvirt-users] script called from qemu hook freezes.
&gt; &gt; &gt; 
&gt; &gt; &gt; On Thu, Jan 03, 2019 at 18:07:58 +0100, daggs wrote:
&gt; &gt; &gt; &gt; Greetings,
&gt; &gt; &gt; &gt; 
&gt; &gt; &gt; &gt; I'm executing an external script when the qemu hook is called with start or \
&gt; &gt; &gt; &gt; release, the script is rather simple, upon start it iterates over the output \
&gt; &gt; &gt; &gt; of lsusb -t and for each device, it looks if it should be added to the vm we \
&gt; &gt; &gt; &gt; started, if so, it attaches it to the vm as follows: virsh --connect \
&gt; &gt; &gt; &gt; qemu:///system "${cmd}" "${domain}" /dev/stdin &lt;&lt; END &lt;hostdev \
&gt; &gt; &gt; &gt; mode='subsystem' type='usb'&gt; &lt;source&gt;
&gt; &gt; &gt; &gt; &lt;address bus='${busnum}' device='${devnum}' /&gt;
&gt; &gt; &gt; &gt; &lt;/source&gt;
&gt; &gt; &gt; &gt; &lt;/hostdev&gt;
&gt; &gt; &gt; &gt; END
&gt; &gt; &gt; &gt; 
&gt; &gt; &gt; &gt; where cmd is attach-device, domain is the vm's name, busnum and devnum come \
&gt; &gt; &gt; &gt; from the output of the lsusb -t. my issue is that upon the first attach \
&gt; &gt; &gt; &gt; attempt, the cmd hangs, I need to kill it and after than I cannot preform any \
&gt; &gt; &gt; &gt; virsh cmd, I must restart the host. if I try to execute the same cmd after \
&gt; &gt; &gt; &gt; the vm is up, it works great. 
&gt; &gt; &gt; &gt; why the attach process gets stuck? do I need to execute it under different \
&gt; &gt; &gt; &gt; stage?
&gt; &gt; &gt; 
&gt; &gt; &gt; Hook scripts shall never call any libvirt API (even through virsh). At
&gt; &gt; &gt; the point when the hook script is called the VM startup process is
&gt; &gt; &gt; paused until the script returns. If the script attempts to modify the VM
&gt; &gt; &gt; it gets stuck as the VM is locked at that point.
&gt; &gt; &gt; 
&gt; &gt; &gt; You either need to add the device prior to startup, but AFAIK that is
&gt; &gt; &gt; not possible with a hook script or after but the script needs to return.
&gt; &gt; &gt; 
&gt; &gt; &gt; So you either fork off a process which will wait for the startup to
&gt; &gt; &gt; finish from the hook script or write an APP using the libvirt API which
&gt; &gt; &gt; will wait for the VM start event and then execute what's necessary.
&gt; &gt; &gt; 
&gt; &gt; 
&gt; &gt; I see, is there another way to do what I need (on startup usb hotplug) or maybe \
&gt; &gt; optional hotplug (e.g. don't fail the device isn't present)?
&gt; 
&gt; I've never used it, but does the "startupPolicy" attribute do what you 
&gt; need? Search for that string at:
&gt; 
&gt; https://libvirt.org/formatdomain.html#elementsHostDevSubsys
&gt; 

yes! this it.

Thanks,

Dagg.

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20190107090615</emailId><senderName>Peter Krempa</senderName><senderEmail>pkrempa@redhat.com</senderEmail><timestampReceived>2019-01-07 09:06:15-0400</timestampReceived><subject>Re: [libvirt-users] script called from qemu hook freezes.</subject><body>

[Attachment #2 (multipart/signed)]


On Fri, Jan 04, 2019 at 17:27:48 +0100, daggs wrote:
&gt; Greetings Peter,
&gt; 
&gt; &gt; Sent: Friday, January 04, 2019 at 4:47 PM
&gt; &gt; From: "Peter Krempa" &lt;pkrempa@redhat.com&gt;
&gt; &gt; To: daggs &lt;daggs@gmx.com&gt;
&gt; &gt; Cc: libvirt-users@redhat.com
&gt; &gt; Subject: Re: [libvirt-users] script called from qemu hook freezes.
&gt; &gt; 
&gt; &gt; On Thu, Jan 03, 2019 at 18:07:58 +0100, daggs wrote:
&gt; &gt; &gt; Greetings,
&gt; &gt; &gt; 
&gt; &gt; &gt; I'm executing an external script when the qemu hook is called with start or \
&gt; &gt; &gt; release, the script is rather simple, upon start it iterates over the output of \
&gt; &gt; &gt; lsusb -t and for each device, it looks if it should be added to the vm we \
&gt; &gt; &gt; started, if so, it attaches it to the vm as follows: virsh --connect \
&gt; &gt; &gt; qemu:///system "${cmd}" "${domain}" /dev/stdin &lt;&lt; END &lt;hostdev mode='subsystem' \
&gt; &gt; &gt; type='usb'&gt; &lt;source&gt;
&gt; &gt; &gt; &lt;address bus='${busnum}' device='${devnum}' /&gt;
&gt; &gt; &gt; &lt;/source&gt;
&gt; &gt; &gt; &lt;/hostdev&gt;
&gt; &gt; &gt; END
&gt; &gt; &gt; 
&gt; &gt; &gt; where cmd is attach-device, domain is the vm's name, busnum and devnum come \
&gt; &gt; &gt; from the output of the lsusb -t. my issue is that upon the first attach \
&gt; &gt; &gt; attempt, the cmd hangs, I need to kill it and after than I cannot preform any \
&gt; &gt; &gt; virsh cmd, I must restart the host. if I try to execute the same cmd after the \
&gt; &gt; &gt; vm is up, it works great. 
&gt; &gt; &gt; why the attach process gets stuck? do I need to execute it under different \
&gt; &gt; &gt; stage?
&gt; &gt; 
&gt; &gt; Hook scripts shall never call any libvirt API (even through virsh). At
&gt; &gt; the point when the hook script is called the VM startup process is
&gt; &gt; paused until the script returns. If the script attempts to modify the VM
&gt; &gt; it gets stuck as the VM is locked at that point.
&gt; &gt; 
&gt; &gt; You either need to add the device prior to startup, but AFAIK that is
&gt; &gt; not possible with a hook script or after but the script needs to return.
&gt; &gt; 
&gt; &gt; So you either fork off a process which will wait for the startup to
&gt; &gt; finish from the hook script or write an APP using the libvirt API which
&gt; &gt; will wait for the VM start event and then execute what's necessary.
&gt; &gt; 
&gt; 
&gt; I see, is there another way to do what I need (on startup usb hotplug) or maybe \
&gt; optional hotplug (e.g. don't fail the device isn't present)?

If you need programatic logic to decide which device to plug in you
either use the above suggestion to use a daemon using libvirt API or
fork off a separate process or do the logic prior to start by
pre-constructing the XML and using 'virsh create xmlfile' which will be
used as the running config without modifying the persistent one.


["signature.asc" (application/pgp-signature)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190102163430</emailId><senderName>Laine Stump</senderName><senderEmail>laine@redhat.com</senderEmail><timestampReceived>2019-01-02 16:34:30-0400</timestampReceived><subject>Re: [libvirt-users] macvtap and tagged VLANs to the VM</subject><body>

On 12/16/18 4:59 PM, Marc Haber wrote:
&gt; Hi,
&gt; 
&gt; I would like to run a network firewall as a VM on a KVM host. There are
&gt; ~ 25 VLANs delivered to the KVM host on three dedicated links, no LACP
&gt; or other things. I have the VLANs 100-180 on the host's enp1s0, the VLANs
&gt; 200-280 on the host's enp2s0 and the VLANs 300-380 on the host's enp3s0.
&gt; 
&gt; To save myself from configuring all VLANs on the KVM host, I'd like to
&gt; hand the entire ethernet link to the VM and to have the VLAN interfaces
&gt; there. Using classical Linux bridges (brctl), things work fine.

When I asked the person I go to with questions about macvtap (because he 
knows the internals), his response was "if a Linux host bridge works, 
then he should use that". In other words, he was skeptical that what you 
want to do could be made to work with macvtap.

Is there a specific reason you need to use macvtap than a Linux host bridge?


&gt; 
&gt; They don't when I try macvlan:
&gt; 
&gt; On the host:
&gt; 4: enp3s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP \
&gt; mode DEFAULT group default qlen 1000 link/ether 00:0d:b9:34:2a:fe brd \
&gt; ff:ff:ff:ff:ff:ff promiscuity 1 addrgenmode eui64 numtxqueues 1 numrxqueues 1 \
&gt;                 gso_max_size 65536 gso_max_segs 65535
&gt; 5: unt382@enp3s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP \
&gt; mode DEFAULT group default qlen 1000 link/ether 00:0d:b9:34:2a:fe brd \
&gt; ff:ff:ff:ff:ff:ff promiscuity 0 vlan protocol 802.1Q id 382 &lt;REORDER_HDR&gt; \
&gt;                 addrgenmode eui64 numtxqueues 1 numrxqueues 1 gso_max_size 65536 \
&gt;                 gso_max_segs 65535
&gt; 15: macvtap3@enp3s0: &lt;BROADCAST,MULTICAST,ALLMULTI,UP,LOWER_UP&gt; mtu 1500 qdisc \
&gt; pfifo_fast state UP mode DEFAULT group default qlen 500 link/ether \
&gt; 52:54:00:bf:bb:ab brd ff:ff:ff:ff:ff:ff promiscuity 0 macvtap mode bridge \
&gt; addrgenmode eui64 numtxqueues 1 numrxqueues 1 gso_max_size 65536 gso_max_segs 65535 \
&gt;                 
&gt; 4: enp3s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP \
&gt; group default qlen 1000 link/ether 00:0d:b9:34:2a:fe brd ff:ff:ff:ff:ff:ff
&gt; inet6 fe80::20d:b9ff:fe34:2afe/64 scope link
&gt; valid_lft forever preferred_lft forever
&gt; 5: unt382@enp3s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP \
&gt; group default qlen 1000 link/ether 00:0d:b9:34:2a:fe brd ff:ff:ff:ff:ff:ff
&gt; inet6 fe80::20d:b9ff:fe34:2afe/64 scope link
&gt; valid_lft forever preferred_lft forever
&gt; 15: macvtap3@enp3s0: &lt;BROADCAST,MULTICAST,ALLMULTI,UP,LOWER_UP&gt; mtu 1500 qdisc \
&gt; pfifo_fast state UP group default qlen 500 link/ether 52:54:00:bf:bb:ab brd \
&gt; ff:ff:ff:ff:ff:ff inet6 fe80::5054:ff:febf:bbab/64 scope link
&gt; valid_lft forever preferred_lft forever
&gt; 
&gt; 
&gt; In the XML:
&gt; &lt;interface type='direct'&gt;
&gt; &lt;mac address='52:54:00:bf:bb:ab'/&gt;
&gt; &lt;source dev='enp3s0' mode='bridge'/&gt;
&gt; &lt;target dev='macvtap3'/&gt;
&gt; &lt;model type='virtio'/&gt;
&gt; &lt;alias name='net0'/&gt;
&gt; &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/&gt;
&gt; &lt;/interface&gt;
&gt; 
&gt; And in the VM:
&gt; root@grml ~ # ip -d link show
&gt; 1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT \
&gt; group default qlen 1 link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00 \
&gt; promiscuity 0 addrgenmode eui64 numtxqueues 1 numrxqueues 1 gso_max_size 65536 \
&gt;                 gso_max_segs 65535
&gt; 2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP mode \
&gt; DEFAULT group default qlen 1000 link/ether 52:54:00:bf:bb:ab brd ff:ff:ff:ff:ff:ff \
&gt; promiscuity 0 addrgenmode eui64 numtxqueues 1 numrxqueues 1 gso_max_size 65536 \
&gt;                 gso_max_segs 65535
&gt; 3: vlan0@eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP \
&gt; mode DEFAULT group default qlen 1000 link/ether 52:54:00:bf:bb:ab brd \
&gt; ff:ff:ff:ff:ff:ff promiscuity 0 vlan protocol 802.1Q id 382 &lt;REORDER_HDR&gt; \
&gt; addrgenmode eui64 numtxqueues 1 numrxqueues 1 gso_max_size 65536 gso_max_segs 65535 \
&gt;                 root@grml ~ # ip a
&gt; 1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default \
&gt; qlen 1 link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
&gt; inet 127.0.0.1/8 scope host lo
&gt; valid_lft forever preferred_lft forever
&gt; inet6 ::1/128 scope host
&gt; valid_lft forever preferred_lft forever
&gt; 2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP group \
&gt; default qlen 1000 link/ether 52:54:00:bf:bb:ab brd ff:ff:ff:ff:ff:ff
&gt; inet6 fe80::5054:ff:febf:bbab/64 scope link
&gt; valid_lft forever preferred_lft forever
&gt; 3: vlan0@eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP \
&gt; group default qlen 1000 link/ether 52:54:00:bf:bb:ab brd ff:ff:ff:ff:ff:ff
&gt; inet 192.168.252.220/24 brd 192.168.252.255 scope global vlan0
&gt; valid_lft forever preferred_lft forever
&gt; inet6 fe80::5054:ff:febf:bbab/64 scope link
&gt; valid_lft forever preferred_lft forever
&gt; root@grml ~ #
&gt; 
&gt; I then ping from the VM to 192.168.252.241, which is a differnt host on
&gt; the network, neither the VM host the VM is running on nor another VM on
&gt; the same host. That should rule out the connectivity issues that a
&gt; macvtap interface has, right? On the VM, I see ARP requests going out,
&gt; but no answers come in.
&gt; 
&gt; On the pinged host, I see:
&gt; 22:50:23.881163 52:54:00:bf:bb:ab &gt; ff:ff:ff:ff:ff:ff, ethertype ARP (0x0806), \
&gt; length 60: Request who-has 192.168.252.241 tell 192.168.252.220, length 46 \
&gt; 22:50:23.881242 52:54:00:95:df:a6 &gt; 52:54:00:bf:bb:ab, ethertype ARP (0x0806), \
&gt; length 42: Reply 192.168.252.241 is-at 52:54:00:95:df:a6, length 28 
&gt; So, the packets going out from my VM are correctly delivered to the
&gt; target, the target replies, but the replies never make it back to the
&gt; VM.
&gt; 
&gt; Do I see correctly that tcpdump on the VM host won't give accurate
&gt; readings since macvtap will divert the frame before tcpdump will see it?
&gt; 
&gt; On the other hand, a VM directly configured to the host's unt382
&gt; interface works fine:
&gt; &lt;interface type='direct'&gt;
&gt; &lt;mac address='52:54:00:cb:ed:34'/&gt;
&gt; &lt;source dev='unt382' mode='bridge'/&gt;
&gt; &lt;model type='virtio'/&gt;
&gt; &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/&gt;
&gt; &lt;/interface&gt;
&gt; I would however like to avoid having 25 interface stanzas in my XML.
&gt; 
&gt; I would appeciate any ideas to solve this issue. I know this is most
&gt; probably not a libvirt issue, but this list is about the only place that
&gt; comes to my mind where people knowledgeable about those complex network
&gt; stuff might hang around. If there is a better place to ask, I am open
&gt; for suggestion. Please pardon my intrusion.
&gt; 
&gt; Greetings
&gt; Marc
&gt; 

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20190103142307</emailId><senderName>Marc Haber</senderName><senderEmail>mh+libvirt-users@zugschlus.de</senderEmail><timestampReceived>2019-01-03 14:23:07-0400</timestampReceived><subject>Re: [libvirt-users] macvtap and tagged VLANs to the VM</subject><body>

Hi Laine,

thanks for your answer, I really appreciate that.

On Wed, Jan 02, 2019 at 11:34:30AM -0500, Laine Stump wrote:
&gt; On 12/16/18 4:59 PM, Marc Haber wrote:
&gt; &gt; I would like to run a network firewall as a VM on a KVM host. There are
&gt; &gt; ~ 25 VLANs delivered to the KVM host on three dedicated links, no LACP
&gt; &gt; or other things. I have the VLANs 100-180 on the host's enp1s0, the VLANs
&gt; &gt; 200-280 on the host's enp2s0 and the VLANs 300-380 on the host's enp3s0.
&gt; &gt; 
&gt; &gt; To save myself from configuring all VLANs on the KVM host, I'd like to
&gt; &gt; hand the entire ethernet link to the VM and to have the VLAN interfaces
&gt; &gt; there. Using classical Linux bridges (brctl), things work fine.
&gt; 
&gt; When I asked the person I go to with questions about macvtap (because he
&gt; knows the internals), his response was "if a Linux host bridge works, then
&gt; he should use that". In other words, he was skeptical that what you want to
&gt; do could be made to work with macvtap.

I see.

A Linux host bridge is what I build with brctl?

&gt; Is there a specific reason you need to use macvtap than a Linux host bridge?

I somehow got the impression that using macvtap is the more "modern"
and also more performant approach to bring network to VMs. Since the VM
in question is a Firewall, I'd love to have the performance impact
caused by virtualization minimized[1].

If this is a misconception, it might have been partially caused by some
colleagues at my last customer's site who very vocal about deprecating
the classical brctl bridges in favor of macvtap/macvlan, and the fact
that virt-manager uses macvtap by default and needs to be massaged into
allowing a classic brctl bridge.

Greetings
Marc

[1] The transfer rate of a tunneled IPv6 link with a dedicated VM
handling the tunnel and a dedicated VM handling firewalling with brctl
bridges (ingress packet - hypervisor - firewall VM - hypervisor - tunnel
VM - hypervisor - firewall VM - hypervisor - egress packet) maxes out at
about 15 Mbit on the APU device being used, with negligible load on the
two VMs and the hypervisor kernel spending a non-negligible amount of
its time inside the kernel wich I interpret as the context changes
killing the machine


-- 
-----------------------------------------------------------------------------
Marc Haber         | "I don't trust Computers. They | Mailadresse im Header
Leimen, Germany    |  lose things."    Winona Ryder | Fon: *49 6224 1600402
Nordisch by Nature |  How to make an American Quilt | Fax: *49 6224 1600421

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190103221529</emailId><senderName>Laine Stump</senderName><senderEmail>laine@redhat.com</senderEmail><timestampReceived>2019-01-03 22:15:29-0400</timestampReceived><subject>Re: [libvirt-users] macvtap and tagged VLANs to the VM</subject><body>

On 1/3/19 9:23 AM, Marc Haber wrote:
&gt; Hi Laine,
&gt; 
&gt; thanks for your answer, I really appreciate that.
&gt; 
&gt; On Wed, Jan 02, 2019 at 11:34:30AM -0500, Laine Stump wrote:
&gt;&gt; On 12/16/18 4:59 PM, Marc Haber wrote:
&gt;&gt;&gt; I would like to run a network firewall as a VM on a KVM host. There are
&gt;&gt;&gt; ~ 25 VLANs delivered to the KVM host on three dedicated links, no LACP
&gt;&gt;&gt; or other things. I have the VLANs 100-180 on the host's enp1s0, the VLANs
&gt;&gt;&gt; 200-280 on the host's enp2s0 and the VLANs 300-380 on the host's enp3s0.
&gt;&gt;&gt;
&gt;&gt;&gt; To save myself from configuring all VLANs on the KVM host, I'd like to
&gt;&gt;&gt; hand the entire ethernet link to the VM and to have the VLAN interfaces
&gt;&gt;&gt; there. Using classical Linux bridges (brctl), things work fine.
&gt;&gt;
&gt;&gt; When I asked the person I go to with questions about macvtap (because he
&gt;&gt; knows the internals), his response was "if a Linux host bridge works, then
&gt;&gt; he should use that". In other words, he was skeptical that what you want to
&gt;&gt; do could be made to work with macvtap.
&gt; 
&gt; I see.
&gt; 
&gt; A Linux host bridge is what I build with brctl?

Yes, although I wouldn't use the brctl command directly if I were you - 
much simpler an more stable to set it up in your host's system network 
config, and let initscripts/NetworkManager/whatever your distro uses 
take care of creating the bridge / attaching your physical ethernet each 
time the host boots.

&gt; 
&gt;&gt; Is there a specific reason you need to use macvtap than a Linux host bridge?
&gt; 
&gt; I somehow got the impression that using macvtap is the more "modern"
&gt; and also more performant approach to bring network to VMs. Since the VM
&gt; in question is a Firewall, I'd love to have the performance impact
&gt; caused by virtualization minimized[1].
&gt; 
&gt; If this is a misconception, it might have been partially caused by some
&gt; colleagues at my last customer's site who very vocal about deprecating
&gt; the classical brctl bridges in favor of macvtap/macvlan,

Not really. macvtap is useful because it's simple to setup (doesn't 
require a change to the host's network config), but is also problematic 
in some ways, e.g. it doesn't allow host&lt;-&gt;guest communication (unless 
you have a switch that reflects all traffic back to the sender). A long 
time ago people were theorizing that macvtap would provide much better 
performance than a host bridge connection, but I don't think that has 
been the case in practice (it may be somewhat better in some situations, 
but not really in others).

These days use of macvtap for guest connection is more the exception 
than the rule.

&gt; and the fact
&gt; that virt-manager uses macvtap by default and needs to be massaged into
&gt; allowing a classic brctl bridge.

On my host that has a bridge named "br0", *that* is what is offered for 
connection of a new guest interface by default, not any macvtap 
interface. And on another host that has no br0 device, libvirt's own 
"default" network is the default selection for new network devices, 
followed in the list by other libvirt virtual networks. In all cases, 
the selections for macvtap connections to the host's physical ethernets 
are included all the way at the bottom of the list, below both libvirt 
virtual networks *and* host bridges.

&gt; 
&gt; Greetings
&gt; Marc
&gt; 
&gt; [1] The transfer rate of a tunneled IPv6 link with a dedicated VM
&gt; handling the tunnel and a dedicated VM handling firewalling with brctl
&gt; bridges (ingress packet - hypervisor - firewall VM - hypervisor - tunnel
&gt; VM - hypervisor - firewall VM - hypervisor - egress packet) maxes out at
&gt; about 15 Mbit on the APU device being used,

1) I guess this APU is something other than x86? 15Mbits is *glacially* 
slow, regardless of what's used for the connection.

2) have you tried the same setup with macvtap (since you can't get vlans 
working, maybe just try an apples-apples comparison of traffic with no 
vlans on both setups) and seen markedly better performance?

3) You should be able to get some amount of improvement with host 
bridges if you define a libvirt network pointing at the bridge you're 
using, with macTableManager="libvirt" in the definition. e.g. if you 
have a bridge in your host network config called "br0", define this network:

     &lt;network&gt;
       &lt;name&gt;nolearn&lt;/name&gt;
       &lt;bridge name='br0'macTableManager='libvirt'/&gt;
       &lt;forward mode='bridge'/&gt;
     &lt;/network&gt;

then use this for your guest interfaces:

    &lt;interface type='network'/&gt;
      &lt;source network='nolearn'/&gt;
      ...
    &lt;/interface&gt;

Setting macTableManager='libvirt' causes libvirt to disable learning on 
the bridge ports, and manually update the FDB of the bridge with the MAC 
addresses of the guest interfaces. If learning is disabled on all ports 
except one (that "one" being the physical ethernet of the host that is 
attached to the bridge), then the kernel also disables promiscuous mode 
on the physical ethernet. The combination of disabling learning and 
disabling promiscuous mode on the physdev should have a noticeable 
impact on performance (although I'm not certain if this panned out as 
nicely in practice as it did in the minds of kernel network developers 
either :-)

(note that if you play around with this you'll need to understand that 
only traffic sent to the broadcast MAC, and to the specific MAC of the 
guest as specified in the libvirt config for the guest, will actually 
make it to the guest - no playing tricks with modifying the MAC address 
only in the guest!)

&gt; with negligible load on the
&gt; two VMs and the hypervisor kernel spending a non-negligible amount of
&gt; its time inside the kernel wich I interpret as the context changes
&gt; killing the machine
&gt; 
&gt; 

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190103102253</emailId><senderName>Riccardo Ravaioli</senderName><senderEmail>riccardoravaioli@gmail.com</senderEmail><timestampReceived>2019-01-03 10:22:53-0400</timestampReceived><subject>Re: [libvirt-users] assigning PCI addresses with bus &gt; 0x09</subject><body>

[Attachment #2 (multipart/alternative)]


On Thu, 20 Dec 2018 at 15:39, Laine Stump &lt;laine@redhat.com&gt; wrote:

&gt; I think you're right. Each bus requires some amount of IO space, and I
&gt; thought I recalled someone saying that all of the available IO space is
&gt; exhausted after 7 or 8 buses. [...]
&gt;

Laine,

Do you have by any chance a link to a page explaining this in more details?
Thanks again! :)

Riccardo

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;&lt;/div&gt;&lt;div class="gmail_quote"&gt;&lt;div dir="ltr"&gt;On Thu, \
20 Dec 2018 at 15:39, Laine Stump &lt;&lt;a \
href="mailto:laine@redhat.com"&gt;laine@redhat.com&lt;/a&gt;&gt; wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote \
class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid \
rgb(204,204,204);padding-left:1ex"&gt;&lt;div&gt;

I think you're right. Each bus requires some amount of IO space, and I &lt;br&gt;
thought I recalled someone saying that all of the available IO space is &lt;br&gt;
exhausted after 7 or 8 buses. \
[...]&lt;br&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Laine,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Do \
you have by any chance a link to a page explaining this in more \
details?&lt;/div&gt;&lt;div&gt;Thanks again! \
:)&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Riccardo&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190221131633</emailId><senderName>Josh Mcneil</senderName><senderEmail>josh@mcneilio.com</senderEmail><timestampReceived>2019-02-21 13:16:33-0400</timestampReceived><subject>Re: [libvirt-users] virsh confirmed edits do not persist</subject><body>

[Attachment #2 (multipart/alternative)]


Thanks Ján!

&gt;What were the exact changes you were trying to make?

I was following this guide:
https://wiki.archlinux.org/index.php/PCI_passthrough_via_OVMF#Passing_keyboard/mouse_via_Evdev

Specifically, I was updating the domain tag to include `xmlns:qemu='
http://libvirt.org/schemas/domain/qemu/1.0'`

&gt;both call virDomainDefineXMLFlags under the hood.

That is good to know, thanks for the explanation.

I appreciate the help, if you have any suggestions I'm happy to hear them

Josh

On Thu, Feb 21, 2019 at 2:16 AM Ján Tomko &lt;jtomko@redhat.com&gt; wrote:

&gt; On Thu, Feb 21, 2019 at 01:06:48AM -0500, Josh Mcneil wrote:
&gt; &gt;This may be user error, I am new to libvirt.
&gt; &gt;
&gt;
&gt; Welcome,
&gt;
&gt; &gt;I am using libvirt 5.0.0. I have created a VM (win10) in the system URI
&gt; &gt;using virt-manager. I stopped the VM to edit it.
&gt; &gt;
&gt; &gt;I set my LIBVIRT_DEFAULT_URI="qemu:///system" and am able to read the
&gt; &gt;domain configuration with `EDITOR=nano virsh edit win10`. When I save
&gt; &gt;(ctrl+o) and exit (ctrl+x) I see the message "Domain win10 XML
&gt; &gt;configuration edited." as expected.
&gt;
&gt; that means libvirt successfully parsed the changed XML file.
&gt; The elements libvirt does not parse will not appear in the changed
&gt; configuration. Usually those should get caught by the schema validation,
&gt; but it's not perfect.
&gt;
&gt; What were the exact changes you were trying to make?
&gt;
&gt; &gt;However, when I run the edit command
&gt; &gt;again the changes do not appear to have persisted.
&gt; &gt;
&gt; &gt;I have tried starting and stopping the VM. I read that I may need to
&gt; define
&gt; &gt;the domain with virsh so I did that. None of these things seem to work.
&gt;
&gt; Calling 'virsh define' with the same domain name and UUID in the XML and
&gt; 'virsh edit' is equivalent - both call virDomainDefineXMLFlags under the
&gt; hood.
&gt;
&gt; Jano
&gt;
&gt; &gt;
&gt; &gt;I would appreciate it if someone could help me solve this issue in order
&gt; to
&gt; &gt;be able to modify domains from virsh!
&gt; &gt;
&gt; &gt;Thanks in advance for any help!
&gt; &gt;
&gt; &gt;Josh
&gt;
&gt; &gt;_______________________________________________
&gt; &gt;libvirt-users mailing list
&gt; &gt;libvirt-users@redhat.com
&gt; &gt;https://www.redhat.com/mailman/listinfo/libvirt-users
&gt;
&gt;

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;&lt;div&gt;Thanks Ján!&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&gt;What \
were the exact changes you were trying to make?&lt;span \
class="gmail-im"&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span \
class="gmail-im"&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span class="gmail-im"&gt;I was following this \
guide: &lt;a href="https://wiki.archlinux.org/index.php/PCI_passthrough_via_OVMF#Passing_ \
keyboard/mouse_via_Evdev"&gt;https://wiki.archlinux.org/index.php/PCI_passthrough_via_OVMF#Passing_keyboard/mouse_via_Evdev&lt;/a&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span \
class="gmail-im"&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span class="gmail-im"&gt;Specifically, I was \
updating the domain tag to include `&lt;/span&gt;xmlns:qemu='&lt;a \
href="http://libvirt.org/schemas/domain/qemu/1.0"&gt;http://libvirt.org/schemas/domain/qemu/1.0&lt;/a&gt;'&lt;span \
class="gmail-im"&gt;&lt;/span&gt;`&lt;/div&gt;&lt;div&gt;&lt;span \
class="gmail-im"&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span class="gmail-im"&gt;&gt;both call \
virDomainDefineXMLFlags under the hood.&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span \
class="gmail-im"&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span class="gmail-im"&gt;That is good to know, \
thanks for the explanation.&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div dir="ltr"&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I \
appreciate the help, if you have any suggestions I'm happy to hear \
them&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Josh&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;div class="gmail_quote"&gt;&lt;div \
dir="ltr" class="gmail_attr"&gt;On Thu, Feb 21, 2019 at 2:16 AM Ján Tomko &lt;&lt;a \
href="mailto:jtomko@redhat.com"&gt;jtomko@redhat.com&lt;/a&gt;&gt; wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote \
class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid \
rgb(204,204,204);padding-left:1ex"&gt;On Thu, Feb 21, 2019 at 01:06:48AM -0500, Josh \
Mcneil wrote:&lt;br&gt; &gt;This may be user error, I am new to libvirt.&lt;br&gt;
&gt;&lt;br&gt;
&lt;br&gt;
Welcome,&lt;br&gt;
&lt;br&gt;
&gt;I am using libvirt 5.0.0. I have created a VM (win10) in the system URI&lt;br&gt;
&gt;using virt-manager. I stopped the VM to edit it.&lt;br&gt;
&gt;&lt;br&gt;
&gt;I set my LIBVIRT_DEFAULT_URI="qemu:///system" and am able to read \
the&lt;br&gt; &gt;domain configuration with `EDITOR=nano virsh edit win10`. When I save&lt;br&gt;
&gt;(ctrl+o) and exit (ctrl+x) I see the message "Domain win10 XML&lt;br&gt;
&gt;configuration edited." as expected.&lt;br&gt;
&lt;br&gt;
that means libvirt successfully parsed the changed XML file.&lt;br&gt;
The elements libvirt does not parse will not appear in the changed&lt;br&gt;
configuration. Usually those should get caught by the schema validation,&lt;br&gt;
but it's not perfect.&lt;br&gt;
&lt;br&gt;
What were the exact changes you were trying to make?&lt;br&gt;
&lt;br&gt;
&gt;However, when I run the edit command&lt;br&gt;
&gt;again the changes do not appear to have persisted.&lt;br&gt;
&gt;&lt;br&gt;
&gt;I have tried starting and stopping the VM. I read that I may need to define&lt;br&gt;
&gt;the domain with virsh so I did that. None of these things seem to work.&lt;br&gt;
&lt;br&gt;
Calling 'virsh define' with the same domain name and UUID in the XML and&lt;br&gt;
'virsh edit' is equivalent - both call virDomainDefineXMLFlags under the&lt;br&gt;
hood.&lt;br&gt;
&lt;br&gt;
Jano&lt;br&gt;
&lt;br&gt;
&gt;&lt;br&gt;
&gt;I would appreciate it if someone could help me solve this issue in order to&lt;br&gt;
&gt;be able to modify domains from virsh!&lt;br&gt;
&gt;&lt;br&gt;
&gt;Thanks in advance for any help!&lt;br&gt;
&gt;&lt;br&gt;
&gt;Josh&lt;br&gt;
&lt;br&gt;
&gt;_______________________________________________&lt;br&gt;
&gt;libvirt-users mailing list&lt;br&gt;
&gt;&lt;a href="mailto:libvirt-users@redhat.com" \
target="_blank"&gt;libvirt-users@redhat.com&lt;/a&gt;&lt;br&gt; &gt;&lt;a \
href="https://www.redhat.com/mailman/listinfo/libvirt-users" rel="noreferrer" \
target="_blank"&gt;https://www.redhat.com/mailman/listinfo/libvirt-users&lt;/a&gt;&lt;br&gt; &lt;br&gt;
&lt;/blockquote&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190215152536</emailId><senderName>Shashwat shagun</senderName><senderEmail>me@shashwat.tech</senderEmail><timestampReceived>2019-02-15 15:25:36-0400</timestampReceived><subject>[libvirt-users] HELP!</subject><body>

[Attachment #2 (multipart/alternative)]


I'm getting this error (below)


 [root@localhost test]# ./test
virError(Code=6, Domain=20, Message='invalid connection pointer in
virConnectListAllDomains')
0 running domains:

when running this program :- (below)


package main

import (
    "fmt"
    libvirt "github.com/libvirt/libvirt-go"
)

type DomService struct {
        Conn *libvirt.Connect
}

func (d *DomService) Connect() error {
        var err error
        d.Conn, err = libvirt.NewConnect("qemu:///system")
        if err != nil {
                fmt.Println(err)
        }
defer d.Conn.Close()
        return nil
}

func (d *DomService) ListDoms() error {
        doms, err :=
d.Conn.ListAllDomains(libvirt.CONNECT_LIST_DOMAINS_ACTIVE)
        if err != nil {
                fmt.Println(err)
        }
//fmt.Println(doms)
        fmt.Printf("%d running domains:\n", len(doms))
        for _, dom := range doms {
                name, err := dom.GetName()
                if err == nil {
                        fmt.Printf("  %s\n", name)
                }
        dom.Free()
        }
return nil
}

func main() {
doms := DomService{}
        doms.Connect()
        doms.ListDoms()
}
-- 
Regards,
Shashwat Shagun

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I'm getting this \
error (below)&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;  [root@localhost test]# \
./test&lt;/div&gt;&lt;div&gt;virError(Code=6, Domain=20, Message='invalid connection pointer \
in virConnectListAllDomains')&lt;/div&gt;&lt;div&gt;0 running domains:&lt;/div&gt;&lt;div \
dir="ltr"&gt;&lt;br&gt;&lt;/div&gt;&lt;div dir="ltr"&gt;when running this program :- (below)&lt;/div&gt;&lt;div \
dir="ltr"&gt;&lt;br&gt;&lt;/div&gt;&lt;div dir="ltr"&gt;&lt;br clear="all"&gt;&lt;div&gt;&lt;div&gt;package \
main&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;import (&lt;/div&gt;&lt;div&gt;      "fmt"&lt;/div&gt;&lt;div&gt;     \
libvirt "&lt;a href="http://github.com/libvirt/libvirt-go"&gt;github.com/libvirt/libvirt-go&lt;/a&gt;"&lt;/div&gt;&lt;div&gt;)&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;type \
DomService struct {&lt;/div&gt;&lt;div&gt;            Conn \
*libvirt.Connect&lt;/div&gt;&lt;div&gt;}&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;func (d *DomService) Connect() \
error {&lt;/div&gt;&lt;div&gt;            var err error&lt;/div&gt;&lt;div&gt;            d.Conn, err = \
libvirt.NewConnect("qemu:///system")&lt;/div&gt;&lt;div&gt;            if err != nil \
{&lt;/div&gt;&lt;div&gt;                        fmt.Println(err)&lt;/div&gt;&lt;div&gt;            \
}&lt;/div&gt;&lt;div&gt;&lt;span class="gmail-Apple-tab-span" style="white-space:pre"&gt;	&lt;/span&gt;defer \
d.Conn.Close()&lt;/div&gt;&lt;div&gt;            return \
nil&lt;/div&gt;&lt;div&gt;}&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;func (d *DomService) ListDoms() error \
{&lt;/div&gt;&lt;div&gt;            doms, err := \
d.Conn.ListAllDomains(libvirt.CONNECT_LIST_DOMAINS_ACTIVE)&lt;/div&gt;&lt;div&gt;            if \
err != nil {&lt;/div&gt;&lt;div&gt;                        fmt.Println(err)&lt;/div&gt;&lt;div&gt;            \
}&lt;/div&gt;&lt;div&gt;&lt;span class="gmail-Apple-tab-span" \
style="white-space:pre"&gt;	&lt;/span&gt;//fmt.Println(doms)&lt;/div&gt;&lt;div&gt;            \
fmt.Printf("%d running domains:\n", len(doms))&lt;/div&gt;&lt;div&gt;            for _, \
dom := range doms {&lt;/div&gt;&lt;div&gt;                        name, err := \
dom.GetName()&lt;/div&gt;&lt;div&gt;                        if err == nil {&lt;/div&gt;&lt;div&gt;            \
fmt.Printf("   %s\n", name)&lt;/div&gt;&lt;div&gt;                        }&lt;/div&gt;&lt;div&gt;  \
dom.Free()&lt;/div&gt;&lt;div&gt;            }&lt;/div&gt;&lt;div&gt;&lt;span class="gmail-Apple-tab-span" \
style="white-space:pre"&gt;	&lt;/span&gt;return nil&lt;/div&gt;&lt;div&gt;}&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;func \
main() {&lt;/div&gt;&lt;div&gt;&lt;span class="gmail-Apple-tab-span" \
style="white-space:pre"&gt;	&lt;/span&gt;doms := DomService{}&lt;/div&gt;&lt;div&gt;            \
doms.Connect()&lt;/div&gt;&lt;div&gt;            doms.ListDoms()&lt;/div&gt;&lt;div&gt;}&lt;/div&gt;&lt;/div&gt;-- \
&lt;br&gt;&lt;div dir="ltr" class="gmail_signature"&gt;&lt;div dir="ltr"&gt;Regards,&lt;div&gt;Shashwat \
Shagun&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190211133152</emailId><senderName>Peter Krempa</senderName><senderEmail>pkrempa@redhat.com</senderEmail><timestampReceived>2019-02-11 13:31:52-0400</timestampReceived><subject>Re: [libvirt-users] virsh migrate --copy-storage-inc</subject><body>

[Attachment #2 (multipart/signed)]


On Sun, Feb 10, 2019 at 12:11:42 +0100, Paul van der Vlis wrote:
&gt; Hello,
&gt; 
&gt; I use libvirt on machines without shared storage. My VM's have all one
&gt; qcow2-disk, with the same name as the VM.
&gt; 
&gt; When I want to migrate a VM, I check if there is an qcow2 image on the
&gt; other host with that name. When that's not the case, I copy the image
&gt; using rsync first. If the image excist, I don't do that, and I think
&gt; that "--copy-storage-inc" will do it.

Note that using the 'inc' or incremental mode will copy only the data in
the top level image rather than a full copy. This means that you need to
pre-create empty qcow2 files which point to the correct backing store.

&gt; But I don't know how intelligent "--copy-storage-inc" is. I use LVM
&gt; inside the VM's, and it's possible that I have changed the size of a
&gt; volume for example.

Non shared storage migration preserves the guest visible state.

&gt; 
&gt; My questions:
&gt; Is "--copy-storage-inc" intelligent enough for such tasks?

If used with --tunelled you can only use it if you wish to migrate ALL
disks in such a VM and need to pre-create the correct files.

If you wish to migrate only certain disks you need to stop using
--tunelled.

&gt; Is there documentation what is done during migration? Is it using rsync?

Normally (if --tunneled is not used) it's using blockdev-mirror or
drive-mirror in qemu over an NBD connection to destination.

In your case it's using the old storage migration protocol.

&gt; Is it possible to make the migration process more verbose?

What do you mean by this? In case if --tunelled there's nothing we can
do though. Everything is done inside qemu.

&gt; Is what I do a good way?
&gt; 
&gt; With regards,
&gt; Paul van der Vlis
&gt; 
&gt; BTW: this is what I do, sometimes the lines are broken wrong:
&gt; -----------
&gt; # Rsync image when not on the other host:
&gt; if test `ssh $other "if test -e /data/$vm.qcow2; then echo ja; else echo
&gt; nee; fi"` = "nee"; then
&gt;   echo "rsync..."
&gt;   rsync /data/$vm.qcow2 $other://data/$vm.qcow2
&gt;   if test $? = 0; then echo "gelukt"; else echo "niet gelukt"; exit; fi
&gt; fi
&gt; 
&gt; # migrate
&gt; echo "migrate..."
&gt; virsh migrate --live --p2p --tunnelled --copy-storage-inc --persistent

As said above this implies the old storage migration protocol which
transports the data in the migration stream. This stream is then
tunelled over the libvirt connection. This is very inefficient and also
uses the old storage migration protocol which is obsolete and qemu will
attempt to remove it in the future.


&gt; --undefinesource --verbose $vm qemu+ssh://$other/system
&gt; if test $? = 0; then echo "gelukt"; else echo "niet gelukt"; exit; fi
&gt; -----------
&gt; 
&gt; 
&gt; -- 
&gt; Paul van der Vlis Linux systeembeheer Groningen
&gt; https://www.vandervlis.nl/
&gt; 
&gt; _______________________________________________
&gt; libvirt-users mailing list
&gt; libvirt-users@redhat.com
&gt; https://www.redhat.com/mailman/listinfo/libvirt-users

["signature.asc" (application/pgp-signature)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190208035552</emailId><senderName>Sharath Kurudi</senderName><senderEmail>kurudisharath@gmail.com</senderEmail><timestampReceived>2019-02-08 03:55:52-0400</timestampReceived><subject>[libvirt-users] libvirtd (4.9) version takes a long time to start</subject><body>

[Attachment #2 (multipart/alternative)]


 Hi,

    I have installed libvirt 4.9. libvirtd 4.9 takes a long time to come
up. I enabled debug prints and also put my own prints Logs are below


2019-02-06 05:55:49.082+0000: 377: info : libvirt version: 4.9.0
2019-02-06 05:55:49.082+0000: 377: info : hostname: draco
2019-02-06 05:55:49.082+0000: 377: info : virObjectNew:248 : OBJECT_NEW:
obj=0x558e782d8bb0 classname=virAccessManager
2019-02-06 05:55:49.082+0000: 377: debug : virAccessManagerNewDriver:105 :
Initialized with stack
2019-02-06 05:55:49.082+0000: 377: info : virObjectNew:248 : OBJECT_NEW:
obj=0x558e782cd870 classname=virAccessManager
2019-02-06 05:55:49.082+0000: 377: debug : virAccessManagerNewDriver:105 :
Initialized with none
2019-02-06 05:55:49.082+0000: 377: info : virObjectRef:382 : OBJECT_REF:
obj=0x558e782d8bb0
2019-02-06 05:55:49.082+0000: 377: info : virObjectUnref:344 :
OBJECT_UNREF: obj=0x558e782d8bb0
2019-02-06 05:55:49.082+0000: 377: debug : main:1200 : Decided on pid file
path '/var/run/libvirtd.pid'
2019-02-06 05:55:49.082+0000: 377: debug : main:1213 : Decided on socket
paths '/var/run/libvirt/libvirt-sock', '/var/run/libvirt/libvirt-sock-ro'
and '/var/run/libvirt/libvirt-admin-sock'
2019-02-06 05:55:49.082+0000: 377: debug : virFileClose:109 : Closed fd 5
2019-02-06 05:55:49.082+0000: 378: debug : virFileClose:109 : Closed fd 4
2019-02-06 05:55:49.082+0000: 378: debug : virFileClose:109 : Closed fd 4
2019-02-06 05:55:49.082+0000: 378: debug : virFileClose:109 : Closed fd 6
2019-02-06 05:55:49.083+0000: 379: debug : main:1255 : Ensuring run dir
'/var/run/libvirt' exists
2019-02-06 05:55:49.083+0000: 379: debug : virFileMakePathHelper:3034 :
path=/var/run/libvirt mode=0777
2019-02-06 05:55:49.083+0000: 379: debug : virNetlinkStartup:137 : Running
global netlink initialization
2019-02-06 05:55:49.083+0000: 379: debug : virNetlinkStartup:144 : Sharath
Returning from global netlink initialization
2019-02-06 05:55:49.083+0000: 379: debug : main:1270 : Sharath
virNetlinkStartup done
2019-02-06 05:55:49.083+0000: 379: debug : virNetDaemonNew:127 : Sharath
Running virNetDaemonNew
2019-02-06 05:55:49.083+0000: 379: debug : virNetDaemonNew:131 : Sharath
virNetDaemonInitalize done
2019-02-06 05:55:49.083+0000: 379: info : virObjectNew:248 : OBJECT_NEW:
obj=0x558e782ce1b0 classname=virNetDaemon
2019-02-06 05:55:49.083+0000: 379: debug : virNetDaemonNew:136 : Sharath
virNetDaemonInitalize done

The above logs loop till libvirtd comes up. It is also seen that more than
one instance of libvirtd runs simultaneously during delay.

Any ideas on how to resolve?

Thanks

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;
&lt;div&gt;Hi,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;       I have installed libvirt 4.9. 
libvirtd 4.9 takes a long time to come up. I enabled debug prints and 
also put my own prints Logs are \
below&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;2019-02-06 05:55:49.082+0000: 377: info \
: libvirt version: 4.9.0&lt;br&gt;2019-02-06 05:55:49.082+0000: 377: info : hostname: \
draco&lt;br&gt;2019-02-06 05:55:49.082+0000: 377: info : virObjectNew:248 : OBJECT_NEW: \
obj=0x558e782d8bb0 classname=virAccessManager&lt;br&gt;2019-02-06 05:55:49.082+0000: 377: \
debug : virAccessManagerNewDriver:105 : Initialized with stack&lt;br&gt;2019-02-06 \
05:55:49.082+0000: 377: info : virObjectNew:248 : OBJECT_NEW: obj=0x558e782cd870 \
classname=virAccessManager&lt;br&gt;2019-02-06 05:55:49.082+0000: 377: debug : \
virAccessManagerNewDriver:105 : Initialized with none&lt;br&gt;2019-02-06 \
05:55:49.082+0000: 377: info : virObjectRef:382 : OBJECT_REF: \
obj=0x558e782d8bb0&lt;br&gt;2019-02-06 05:55:49.082+0000: 377: info : virObjectUnref:344 : \
OBJECT_UNREF: obj=0x558e782d8bb0&lt;br&gt;2019-02-06 05:55:49.082+0000: 377: debug : \
main:1200 : Decided on pid file path '/var/run/libvirtd.pid'&lt;br&gt;2019-02-06 \
05:55:49.082+0000: 377: debug : main:1213 : Decided on socket paths \
'/var/run/libvirt/libvirt-sock', '/var/run/libvirt/libvirt-sock-ro' \
and '/var/run/libvirt/libvirt-admin-sock'&lt;br&gt;2019-02-06 05:55:49.082+0000: \
377: debug : virFileClose:109 : Closed fd 5&lt;br&gt;2019-02-06 05:55:49.082+0000: 378: \
debug : virFileClose:109 : Closed fd 4&lt;br&gt;2019-02-06 05:55:49.082+0000: 378: debug : \
virFileClose:109 : Closed fd 4&lt;br&gt;2019-02-06 05:55:49.082+0000: 378: debug : \
virFileClose:109 : Closed fd 6&lt;br&gt;2019-02-06 05:55:49.083+0000: 379: debug : \
main:1255 : Ensuring run dir '/var/run/libvirt' exists&lt;br&gt;2019-02-06 \
05:55:49.083+0000: 379: debug : virFileMakePathHelper:3034 : path=/var/run/libvirt \
mode=0777&lt;br&gt;2019-02-06 05:55:49.083+0000: 379: debug : virNetlinkStartup:137 : \
Running global netlink initialization&lt;br&gt;2019-02-06 05:55:49.083+0000: 379: debug : \
virNetlinkStartup:144 : Sharath Returning from global netlink \
initialization&lt;br&gt;2019-02-06 05:55:49.083+0000: 379: debug : main:1270 : Sharath \
virNetlinkStartup done&lt;br&gt;2019-02-06 05:55:49.083+0000: 379: debug : \
virNetDaemonNew:127 : Sharath Running virNetDaemonNew&lt;br&gt;2019-02-06 \
05:55:49.083+0000: 379: debug : virNetDaemonNew:131 : Sharath virNetDaemonInitalize \
done&lt;br&gt;2019-02-06 05:55:49.083+0000: 379: info : virObjectNew:248 : OBJECT_NEW: \
obj=0x558e782ce1b0 classname=virNetDaemon&lt;br&gt;2019-02-06 05:55:49.083+0000: 379: debug \
: virNetDaemonNew:136 : Sharath virNetDaemonInitalize \
done&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The  above logs loop till libvirtd comes up. It is also \
seen that more than  one instance of libvirtd runs simultaneously during \
delay.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Any ideas on how to \
resolve?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks&lt;/div&gt;

&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190102163850</emailId><senderName>Laine Stump</senderName><senderEmail>laine@redhat.com</senderEmail><timestampReceived>2019-01-02 16:38:50-0400</timestampReceived><subject>Re: [libvirt-users] Network filters with clean-traffic not working on Debian Stretch</subject><body>

On 12/29/18 5:51 AM, fatal wrote:
&gt; Dear Yalang,
&gt; 
&gt; that did the trick. If I look in the NAT table of the bridge I can see
&gt; the generated rules. Probably wouldn't have though about that ever.

Yes, it is fairly strange that rules to filter traffic are in a table 
called "nat". My understanding is that it was implemented this way in 
order to avoid duplicating all the rules in both the input and forward 
chains (or something like that).


&gt; 
&gt; Thanks a lot!
&gt; 
&gt; Best
&gt; 
&gt; Sam
&gt; 
&gt; 
&gt; On 29.12.18 06:51, Yalan Zhang wrote:
&gt;&gt; Hi Sam,
&gt;&gt;
&gt;&gt; You can find the rules by below command, and it looks as below:
&gt;&gt; # ebtables -t nat --list
&gt;&gt; Bridge table: nat
&gt;&gt;
&gt;&gt; Bridge chain: PREROUTING, entries: 2, policy: ACCEPT
&gt;&gt; -j PREROUTING_direct
&gt;&gt; -i vnet0 -j libvirt-I-vnet0
&gt;&gt;
&gt;&gt; Bridge chain: OUTPUT, entries: 1, policy: ACCEPT
&gt;&gt; -j OUTPUT_direct
&gt;&gt;
&gt;&gt; Bridge chain: POSTROUTING, entries: 2, policy: ACCEPT
&gt;&gt; -j POSTROUTING_direct
&gt;&gt; -o vnet0 -j libvirt-O-vnet0
&gt;&gt;
&gt;&gt; Bridge chain: PREROUTING_direct, entries: 0, policy: RETURN
&gt;&gt;
&gt;&gt; Bridge chain: POSTROUTING_direct, entries: 0, policy: RETURN
&gt;&gt;
&gt;&gt; Bridge chain: OUTPUT_direct, entries: 0, policy: RETURN
&gt;&gt;
&gt;&gt; Bridge chain: libvirt-I-vnet0, entries: 9, policy: ACCEPT
&gt;&gt; -j I-vnet0-mac
&gt;&gt; -p IPv4 -j I-vnet0-ipv4-ip
&gt;&gt; -p IPv4 -j ACCEPT
&gt;&gt; -p ARP -j I-vnet0-arp-mac
&gt;&gt; -p ARP -j I-vnet0-arp-ip
&gt;&gt; -p ARP -j ACCEPT
&gt;&gt; -p 0x8035 -j I-vnet0-rarp
&gt;&gt; -p 0x835 -j ACCEPT
&gt;&gt; -j DROP
&gt;&gt;
&gt;&gt; Bridge chain: libvirt-O-vnet0, entries: 4, policy: ACCEPT
&gt;&gt; -p IPv4 -j O-vnet0-ipv4
&gt;&gt; -p ARP -j ACCEPT
&gt;&gt; -p 0x8035 -j O-vnet0-rarp
&gt;&gt; -j DROP
&gt;&gt;
&gt;&gt; Bridge chain: I-vnet0-mac, entries: 2, policy: ACCEPT
&gt;&gt; -s 52:54:0:3a:40:b7 -j RETURN
&gt;&gt; -j DROP
&gt;&gt;
&gt;&gt; Bridge chain: I-vnet0-ipv4-ip, entries: 3, policy: ACCEPT
&gt;&gt; -p IPv4 --ip-src 0.0.0.0 --ip-proto udp -j RETURN
&gt;&gt; -p IPv4 --ip-src 172.16.1.2 -j RETURN
&gt;&gt; -j DROP
&gt;&gt;
&gt;&gt; Bridge chain: O-vnet0-ipv4, entries: 1, policy: ACCEPT
&gt;&gt; -j ACCEPT
&gt;&gt;
&gt;&gt; Bridge chain: I-vnet0-arp-mac, entries: 2, policy: ACCEPT
&gt;&gt; -p ARP --arp-mac-src 52:54:0:3a:40:b7 -j RETURN
&gt;&gt; -j DROP
&gt;&gt;
&gt;&gt; Bridge chain: I-vnet0-arp-ip, entries: 2, policy: ACCEPT
&gt;&gt; -p ARP --arp-ip-src 172.16.1.2 -j RETURN
&gt;&gt; -j DROP
&gt;&gt;
&gt;&gt; Bridge chain: I-vnet0-rarp, entries: 2, policy: ACCEPT
&gt;&gt; -p 0x8035 -s 52:54:0:3a:40:b7 -d Broadcast --arp-op Request_Reverse
&gt;&gt; --arp-ip-src 0.0.0.0 --arp-ip-dst 0.0.0.0 --arp-mac-src 52:54:0:3a:40:b7
&gt;&gt; --arp-mac-dst 52:54:0:3a:40:b7 -j ACCEPT
&gt;&gt; -j DROP
&gt;&gt;
&gt;&gt; Bridge chain: O-vnet0-rarp, entries: 2, policy: ACCEPT
&gt;&gt; -p 0x8035 -d Broadcast --arp-op Request_Reverse --arp-ip-src 0.0.0.0
&gt;&gt; --arp-ip-dst 0.0.0.0 --arp-mac-src 52:54:0:3a:40:b7 --arp-mac-dst
&gt;&gt; 52:54:0:3a:40:b7 -j ACCEPT
&gt;&gt; -j DROP
&gt;&gt;
&gt;&gt; For interface set as:
&gt;&gt;      &lt;interface type='bridge'&gt;
&gt;&gt;        &lt;mac address='52:54:00:3a:40:b7'/&gt;
&gt;&gt;        &lt;source bridge='br0'/&gt;
&gt;&gt;        &lt;target dev='vnet0'/&gt;
&gt;&gt;        &lt;model type='rtl8139'/&gt;
&gt;&gt;        &lt;filterref filter='clean-traffic'&gt;
&gt;&gt;          &lt;parameter name='IP' value='172.16.1.2'/&gt;
&gt;&gt;        &lt;/filterref&gt;
&gt;&gt;        &lt;alias name='net0'/&gt;
&gt;&gt;        &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x03'
&gt;&gt; function='0x0'/&gt;
&gt;&gt;      &lt;/interface&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; -------
&gt;&gt; Best Regards,
&gt;&gt; Yalan Zhang
&gt;&gt; IRC: yalzhang
&gt; 
&gt; _______________________________________________
&gt; libvirt-users mailing list
&gt; libvirt-users@redhat.com
&gt; https://www.redhat.com/mailman/listinfo/libvirt-users
&gt; 

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190102182411</emailId><senderName>b f31415</senderName><senderEmail>bf31415@gmail.com</senderEmail><timestampReceived>2019-01-02 18:24:11-0400</timestampReceived><subject>Re: [libvirt-users] avoiding PCI bus 8 / using PCI function / virt-install</subject><body>

[Attachment #2 (multipart/alternative)]


Thanks-- i get this eco-system setup isn't mainstream (yet).  just wanted
to double check to see if there was some pre-existing way to use the
function aspect.

B


On Wed, Jan 2, 2019 at 9:29 AM Laine Stump &lt;laine@redhat.com&gt; wrote:

&gt; On 12/26/18 6:59 PM, b f31415 wrote:
&gt; &gt; Thanks.  Maybe I'm missing something but when I try virt-install
&gt; &gt; --dry-run --print-xml it generates this snippet of XML:
&gt; &gt;
&gt; &gt; &lt;interface type="bridge"&gt;
&gt; &gt;
&gt; &gt; &lt;source bridge="ge_0_0_0_77"/&gt;
&gt; &gt;
&gt; &gt; &lt;mac address="52:54:00:01:00:4e"/&gt;
&gt; &gt;
&gt; &gt; &lt;model type="virtio"/&gt;
&gt; &gt;
&gt; &gt; &lt;/interface&gt;
&gt; &gt;
&gt; &gt;
&gt; &gt; but what i need (and get from virsh dumpxml) has this extra PCI line.
&gt; &gt;
&gt; &gt; &lt;interface type='bridge'&gt;
&gt; &gt;
&gt; &gt; &lt;mac address='52:54:00:01:00:4e'/&gt;
&gt; &gt;
&gt; &gt; &lt;source bridge='ge_0_0_0_77'/&gt;
&gt; &gt;
&gt; &gt; &lt;target dev='vnet78'/&gt;
&gt; &gt;
&gt; &gt; &lt;model type='virtio'/&gt;
&gt; &gt;
&gt; &gt; &lt;alias name='net78'/&gt;
&gt; &gt;
&gt; &gt; &lt;address type='pci' domain='0x0000' bus='0x01' slot='0x0a'
&gt; function='0x6' /&gt;
&gt; &gt;
&gt; &gt; &lt;/interface&gt;
&gt; &gt;
&gt; &gt;
&gt; &gt; Did I miss something?  Do you see PCI in the XML when you do the
&gt; &gt; virt-install --dryrun approach?
&gt;
&gt; virt-install never explicitly specifies a PCI address in the XML it
&gt; creates and sends to libvirt, and what you're seeing as the output from
&gt; --print-xml is the XML before it has been sent to libvirt.
&gt;
&gt; Additionally, in response to a question in the original mail, there is
&gt; no way to tell virt-install (or libvirt itself) to use non-0 functions
&gt; for devices (except to manually specify the entire PCI address).
&gt;
&gt; Since 99 44/100% of users (probably much higher, but that number has
&gt; such a nice ring to anyone who recalls the old Ivory Soap commercials
&gt; :-) never need more devices than are possible using only function 0,
&gt; there has been no effort made to automate assignment of non-0 functions.
&gt;
&gt; So if you need this many devices, you should probably consider just
&gt; using virt-install once to generate proto-template XML, then "virsh
&gt; define" that template to get an XML that has an &lt;address...&gt; element for
&gt; every device that needs it, write a script that condenses all the device
&gt; PCI addresses into less slots by using non-0 functions (and saves that
&gt; as the "final" template), and finally modify your installation to do a
&gt; series of virsh commands using that template XML as a start.
&gt;
&gt;
&gt; I know it sounds awkward, but there is really nothing in libvirt or
&gt; virt-install to automate assignment of PCI devices to non-0 functions.
&gt;
&gt;
&gt; &gt; On Wed, Dec 26, 2018 at 2:57 PM Peter Crowther
&gt; &gt; &lt;peter.crowther@melandra.com &lt;mailto:peter.crowther@melandra.com&gt;&gt;
&gt; wrote:
&gt; &gt;
&gt; &gt;     On Wed, 26 Dec 2018 at 16:26, b f31415 &lt;bf31415@gmail.com
&gt; &gt;     &lt;mailto:bf31415@gmail.com&gt;&gt; wrote:
&gt; &gt;
&gt; &gt;         If not, is there a way with one of the virt command line tools
&gt; &gt;         to create the XML (with the PCI addresses specified) so that I
&gt; &gt;         can process that XML and re-write the PCI addressing values?
&gt; &gt;         Right now the only way I've been able to get that detailed XML
&gt; &gt;         file is to 1) virt-install and let the VM begin the boot process
&gt; &gt;         and then do a 2) virsh dumpxml and then 3) virsh
&gt; &gt;         destroy/undefine that VM, 4) modify the XML and then 5) virsh
&gt; &gt;         create ./modified.xml.  Is there a cleaner way to do this?
&gt; &gt;
&gt; &gt;
&gt; &gt;     It won't do everything you want, but check out virt-install
&gt; &gt;     --print-step --dry-run.  This should at least allow you to get at
&gt; &gt;     the XML for the intermediate steps and remove the brittleness of
&gt; &gt;     defining, destroying, undefining the VM.
&gt; &gt;
&gt; &gt;     Cheers,
&gt; &gt;
&gt; &gt;     - Peter
&gt; &gt;
&gt; &gt;
&gt; &gt; _______________________________________________
&gt; &gt; libvirt-users mailing list
&gt; &gt; libvirt-users@redhat.com
&gt; &gt; https://www.redhat.com/mailman/listinfo/libvirt-users
&gt; &gt;
&gt;
&gt;

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;Thanks-- i get this eco-system setup isn't \
mainstream (yet).   just wanted to double check to see if there was some pre-existing \
way to use the function aspect.    \
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;B&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;div class="gmail_quote"&gt;&lt;div \
dir="ltr"&gt;On Wed, Jan 2, 2019 at 9:29 AM Laine Stump &lt;&lt;a \
href="mailto:laine@redhat.com"&gt;laine@redhat.com&lt;/a&gt;&gt; wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote \
class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid \
rgb(204,204,204);padding-left:1ex"&gt;On 12/26/18 6:59 PM, b f31415 wrote:&lt;br&gt; &gt; \
Thanks.   Maybe I'm missing something but when I try virt-install &lt;br&gt; &gt; \
--dry-run --print-xml it generates this snippet of XML:&lt;br&gt; &gt; &lt;br&gt;
&gt; &lt;interface type="bridge"&gt;&lt;br&gt;
&gt; &lt;br&gt;
&gt; &lt;source bridge="ge_0_0_0_77"/&gt;&lt;br&gt;
&gt; &lt;br&gt;
&gt; &lt;mac address="52:54:00:01:00:4e"/&gt;&lt;br&gt;
&gt; &lt;br&gt;
&gt; &lt;model type="virtio"/&gt;&lt;br&gt;
&gt; &lt;br&gt;
&gt; &lt;/interface&gt;&lt;br&gt;
&gt; &lt;br&gt;
&gt; &lt;br&gt;
&gt; but what i need (and get from virsh dumpxml) has this extra PCI line.&lt;br&gt;
&gt; &lt;br&gt;
&gt; &lt;interface type='bridge'&gt;&lt;br&gt;
&gt; &lt;br&gt;
&gt; &lt;mac address='52:54:00:01:00:4e'/&gt;&lt;br&gt;
&gt; &lt;br&gt;
&gt; &lt;source bridge='ge_0_0_0_77'/&gt;&lt;br&gt;
&gt; &lt;br&gt;
&gt; &lt;target dev='vnet78'/&gt;&lt;br&gt;
&gt; &lt;br&gt;
&gt; &lt;model type='virtio'/&gt;&lt;br&gt;
&gt; &lt;br&gt;
&gt; &lt;alias name='net78'/&gt;&lt;br&gt;
&gt; &lt;br&gt;
&gt; &lt;address type='pci' domain='0x0000' bus='0x01' \
slot='0x0a' function='0x6' /&gt;&lt;br&gt; &gt; &lt;br&gt;
&gt; &lt;/interface&gt;&lt;br&gt;
&gt; &lt;br&gt;
&gt; &lt;br&gt;
&gt; Did I miss something?   Do you see PCI in the XML when you do the &lt;br&gt;
&gt; virt-install --dryrun approach?&lt;br&gt;
&lt;br&gt;
virt-install never explicitly specifies a PCI address in the XML it &lt;br&gt;
creates and sends to libvirt, and what you're seeing as the output from &lt;br&gt;
--print-xml is the XML before it has been sent to libvirt.&lt;br&gt;
&lt;br&gt;
Additionally, in response to a question in the original mail, there is &lt;br&gt;
no way to tell virt-install (or libvirt itself) to use non-0 functions &lt;br&gt;
for devices (except to manually specify the entire PCI address).&lt;br&gt;
&lt;br&gt;
Since 99 44/100% of users (probably much higher, but that number has &lt;br&gt;
such a nice ring to anyone who recalls the old Ivory Soap commercials &lt;br&gt;
&gt; -) never need more devices than are possible using only function 0, &lt;br&gt;
there has been no effort made to automate assignment of non-0 functions.&lt;br&gt;
&lt;br&gt;
So if you need this many devices, you should probably consider just &lt;br&gt;
using virt-install once to generate proto-template XML, then "virsh &lt;br&gt;
define" that template to get an XML that has an &lt;address...&gt; element for \
&lt;br&gt; every device that needs it, write a script that condenses all the device &lt;br&gt;
PCI addresses into less slots by using non-0 functions (and saves that &lt;br&gt;
as the "final" template), and finally modify your installation to do a &lt;br&gt;
series of virsh commands using that template XML as a start.&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
I know it sounds awkward, but there is really nothing in libvirt or &lt;br&gt;
virt-install to automate assignment of PCI devices to non-0 functions.&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&gt; On Wed, Dec 26, 2018 at 2:57 PM Peter Crowther &lt;br&gt;
&gt; &lt;&lt;a href="mailto:peter.crowther@melandra.com" \
target="_blank"&gt;peter.crowther@melandra.com&lt;/a&gt; &lt;mailto:&lt;a \
href="mailto:peter.crowther@melandra.com" \
target="_blank"&gt;peter.crowther@melandra.com&lt;/a&gt;&gt;&gt; wrote:&lt;br&gt; &gt; &lt;br&gt;
&gt;        On Wed, 26 Dec 2018 at 16:26, b f31415 &lt;&lt;a \
href="mailto:bf31415@gmail.com" target="_blank"&gt;bf31415@gmail.com&lt;/a&gt;&lt;br&gt; &gt;        \
&lt;mailto:&lt;a href="mailto:bf31415@gmail.com" \
target="_blank"&gt;bf31415@gmail.com&lt;/a&gt;&gt;&gt; wrote:&lt;br&gt; &gt; &lt;br&gt;
&gt;              If not, is there a way with one of the virt command line tools&lt;br&gt;
&gt;              to create the XML (with the PCI addresses specified) so that I&lt;br&gt;
&gt;              can process that XML and re-write the PCI addressing values? &lt;br&gt;
&gt;              Right now the only way I've been able to get that detailed XML&lt;br&gt;
&gt;              file is to 1) virt-install and let the VM begin the boot \
process&lt;br&gt; &gt;              and then do a 2) virsh dumpxml and then 3) virsh&lt;br&gt;
&gt;              destroy/undefine that VM, 4) modify the XML and then 5) virsh&lt;br&gt;
&gt;              create ./modified.xml.   Is there a cleaner way to do this?&lt;br&gt;
&gt; &lt;br&gt;
&gt; &lt;br&gt;
&gt;        It won't do everything you want, but check out virt-install&lt;br&gt;
&gt;        --print-step --dry-run.   This should at least allow you to get at&lt;br&gt;
&gt;        the XML for the intermediate steps and remove the brittleness of&lt;br&gt;
&gt;        defining, destroying, undefining the VM.&lt;br&gt;
&gt; &lt;br&gt;
&gt;        Cheers,&lt;br&gt;
&gt; &lt;br&gt;
&gt;        - Peter&lt;br&gt;
&gt; &lt;br&gt;
&gt; &lt;br&gt;
&gt; _______________________________________________&lt;br&gt;
&gt; libvirt-users mailing list&lt;br&gt;
&gt; &lt;a href="mailto:libvirt-users@redhat.com" \
target="_blank"&gt;libvirt-users@redhat.com&lt;/a&gt;&lt;br&gt; &gt; &lt;a \
href="https://www.redhat.com/mailman/listinfo/libvirt-users" rel="noreferrer" \
target="_blank"&gt;https://www.redhat.com/mailman/listinfo/libvirt-users&lt;/a&gt;&lt;br&gt; &gt; \
&lt;br&gt; &lt;br&gt;
&lt;/blockquote&gt;&lt;/div&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190104122657</emailId><senderName>b f31415</senderName><senderEmail>bf31415@gmail.com</senderEmail><timestampReceived>2019-01-04 12:26:57-0400</timestampReceived><subject>[libvirt-users] guest runs into watch dog reset</subject><body>

[Attachment #2 (multipart/alternative)]


I'm spinning up a guest, using virt-install.  i'm passing the guest a
single vcpu and many network interfaces.  On the guest side all the
interfaces are initially in the down state.  I've notice then when I
manually bring a specific one of these interfaces up (eg the 64th
interface), the guest system hangs.  Doing an "strace ifconfig etX up", it
looks like the system hangs when doing the ioctl to bring the interface up.

This guest is 18.04.  Host is 16.04.

Are there any qemu/virt commands i can run from the host which would
provide me a better understanding as to why the guest gets into this hung
state?

If I pass two vcpu, I don't suffer from this hang issue.

Thanks

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;I'm spinning up a guest, using virt-install.   i'm passing the \
guest a single vcpu and many network interfaces.   On the guest side all the \
interfaces are initially in the down state.   I've notice then when I manually \
bring a specific one of these interfaces up (eg the 64th interface), the guest system \
hangs.   Doing an "strace ifconfig etX up", it looks like the system hangs \
when doing the ioctl to bring the interface up.&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;This guest is \
18.04.   Host is 16.04.&lt;br&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Are there any qemu/virt commands i can \
run from the host which would provide me a better understanding as to why the guest \
gets into this hung state?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;If I pass two vcpu, I don't \
suffer from this hang \
issue.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;




_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190104191204</emailId><senderName>Laine Stump</senderName><senderEmail>laine@redhat.com</senderEmail><timestampReceived>2019-01-04 19:12:04-0400</timestampReceived><subject>Re: [libvirt-users] assigning PCI addresses with bus &gt; 0x09</subject><body>

On 1/3/19 5:22 AM, Riccardo Ravaioli wrote:
&gt; On Thu, 20 Dec 2018 at 15:39, Laine Stump &lt;laine@redhat.com 
&gt; &lt;mailto:laine@redhat.com&gt;&gt; wrote:
&gt; 
&gt;     I think you're right. Each bus requires some amount of IO space, and I
&gt;     thought I recalled someone saying that all of the available IO space is
&gt;     exhausted after 7 or 8 buses. [...]
&gt; 
&gt; 
&gt; Laine,
&gt; 
&gt; Do you have by any chance a link to a page explaining this in more details?
&gt; Thanks again! :)

No, sorry. There are mentions of it in bugzilla records (e.g. 
https://bugzilla.redhat.com/show_bug.cgi?id=1067777 ) but all the info I 
have is just recalled from email and irc conversations over the last 3-4 
years. Basically the amount of IO address space is limited, and SeaBIOS 
allocates some minimum-sized chunk of that for each PCI controller that 
is probed and "seems to need IO address space for its devices". After 8 
or so controllers, all the space is used up.

You can avoid the IO address space limit if you're using a PCI Express 
based machinetype, *and* all PCIe devices, but you'll run up against 
different limits that need to be worked around in a different way - PCIe 
devices are required to be usable with no IO address space (and so QEMU 
specifically creates the PCIe controllers beyond pcie-root without any). 
But each PCIe controller only has a single slot (with 8 functions), each 
consumes a "bus number" and the bus number is an 8-bit value, so you're 
limited to 256 total (x8 if you don't need hotplug and don't mind 
manually assigning addresses).

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190104202610</emailId><senderName>Marc Haber</senderName><senderEmail>mh+libvirt-users@zugschlus.de</senderEmail><timestampReceived>2019-01-04 20:26:10-0400</timestampReceived><subject>Re: [libvirt-users] macvtap and tagged VLANs to the VM</subject><body>

On Thu, Jan 03, 2019 at 05:15:29PM -0500, Laine Stump wrote:
&gt; On 1/3/19 9:23 AM, Marc Haber wrote:
&gt; &gt; On Wed, Jan 02, 2019 at 11:34:30AM -0500, Laine Stump wrote:
&gt; &gt; &gt; On 12/16/18 4:59 PM, Marc Haber wrote:
&gt; &gt; &gt; &gt; I would like to run a network firewall as a VM on a KVM host. There are
&gt; &gt; &gt; &gt; ~ 25 VLANs delivered to the KVM host on three dedicated links, no LACP
&gt; &gt; &gt; &gt; or other things. I have the VLANs 100-180 on the host's enp1s0, the VLANs
&gt; &gt; &gt; &gt; 200-280 on the host's enp2s0 and the VLANs 300-380 on the host's enp3s0.
&gt; &gt; &gt; &gt; 
&gt; &gt; &gt; &gt; To save myself from configuring all VLANs on the KVM host, I'd like to
&gt; &gt; &gt; &gt; hand the entire ethernet link to the VM and to have the VLAN interfaces
&gt; &gt; &gt; &gt; there. Using classical Linux bridges (brctl), things work fine.
&gt; &gt; &gt; 
&gt; &gt; &gt; When I asked the person I go to with questions about macvtap (because he
&gt; &gt; &gt; knows the internals), his response was "if a Linux host bridge works, then
&gt; &gt; &gt; he should use that". In other words, he was skeptical that what you want to
&gt; &gt; &gt; do could be made to work with macvtap.
&gt; &gt; 
&gt; &gt; I see.
&gt; &gt; 
&gt; &gt; A Linux host bridge is what I build with brctl?
&gt; 
&gt; Yes, although I wouldn't use the brctl command directly if I were you - much
&gt; simpler an more stable to set it up in your host's system network config,
&gt; and let initscripts/NetworkManager/whatever your distro uses take care of
&gt; creating the bridge / attaching your physical ethernet each time the host
&gt; boots.

Of course. Network is managed with systemd-networkd on the system in
question. I was just trying to make clear which construct I mean.

&gt; &gt; &gt; Is there a specific reason you need to use macvtap than a Linux host bridge?
&gt; &gt; 
&gt; &gt; I somehow got the impression that using macvtap is the more "modern"
&gt; &gt; and also more performant approach to bring network to VMs. Since the VM
&gt; &gt; in question is a Firewall, I'd love to have the performance impact
&gt; &gt; caused by virtualization minimized[1].
&gt; &gt; 
&gt; &gt; If this is a misconception, it might have been partially caused by some
&gt; &gt; colleagues at my last customer's site who very vocal about deprecating
&gt; &gt; the classical brctl bridges in favor of macvtap/macvlan,
&gt; 
&gt; Not really. macvtap is useful because it's simple to setup (doesn't require
&gt; a change to the host's network config), but is also problematic in some

Ah. If that's the only reason to use it, then it it of couse unsuitable
for the more complex setups.

&gt; ways, e.g. it doesn't allow host&lt;-&gt;guest communication (unless you have a
&gt; switch that reflects all traffic back to the sender).

I have my hosts on a different VLAN than the guests, so that traffic
between host and guest is forced over the router and the firewall. That
is, IMO, the most standard-conforming way to solve the issue.

&gt; These days use of macvtap for guest connection is more the exception than
&gt; the rule.

Interesting, that was not my perception. Thanks for setting me straight
on that.

&gt; &gt; and the fact
&gt; &gt; that virt-manager uses macvtap by default and needs to be massaged into
&gt; &gt; allowing a classic brctl bridge.
&gt; 
&gt; On my host that has a bridge named "br0", *that* is what is offered for
&gt; connection of a new guest interface by default, not any macvtap interface.

Interesting. I had to create a dummy network in libvirt. But I guess
that you have generated that network from inside libvirt, right?

That does not work for me since I use systemd-networkd, and Debian's
netcf version cannot interface with systemd-networkd. Also I'd like my
network to be up withlit libvirt ;-)

&gt; And on another host that has no br0 device, libvirt's own "default" network
&gt; is the default selection for new network devices, followed in the list by
&gt; other libvirt virtual networks. In all cases, the selections for macvtap
&gt; connections to the host's physical ethernets are included all the way at the
&gt; bottom of the list, below both libvirt virtual networks *and* host bridges.

It might be my own fault that my libvirt needs to be massaged into
showing the actually preferred interface.

I'll use brctl bridges in my setup. Thanks for setting me straight.

Greetings
Marc

-- 
-----------------------------------------------------------------------------
Marc Haber         | "I don't trust Computers. They | Mailadresse im Header
Leimen, Germany    |  lose things."    Winona Ryder | Fon: *49 6224 1600402
Nordisch by Nature |  How to make an American Quilt | Fax: *49 6224 1600421

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190107124918</emailId><senderName>daggs</senderName><senderEmail>daggs@gmx.com</senderEmail><timestampReceived>2019-01-07 12:49:18-0400</timestampReceived><subject>Re: [libvirt-users] script called from qemu hook freezes.</subject><body>

Greetings Peter,

&gt; Sent: Monday, January 07, 2019 at 11:06 AM
&gt; From: "Peter Krempa" &lt;pkrempa@redhat.com&gt;
&gt; To: daggs &lt;daggs@gmx.com&gt;
&gt; Cc: libvirt-users@redhat.com
&gt; Subject: Re: [libvirt-users] script called from qemu hook freezes.
&gt; 
&gt; On Fri, Jan 04, 2019 at 17:27:48 +0100, daggs wrote:
&gt; &gt; Greetings Peter,
&gt; &gt; 
&gt; &gt; &gt; Sent: Friday, January 04, 2019 at 4:47 PM
&gt; &gt; &gt; From: "Peter Krempa" &lt;pkrempa@redhat.com&gt;
&gt; &gt; &gt; To: daggs &lt;daggs@gmx.com&gt;
&gt; &gt; &gt; Cc: libvirt-users@redhat.com
&gt; &gt; &gt; Subject: Re: [libvirt-users] script called from qemu hook freezes.
&gt; &gt; &gt; 
&gt; &gt; &gt; On Thu, Jan 03, 2019 at 18:07:58 +0100, daggs wrote:
&gt; &gt; &gt; &gt; Greetings,
&gt; &gt; &gt; &gt; 
&gt; &gt; &gt; &gt; I'm executing an external script when the qemu hook is called with start or \
&gt; &gt; &gt; &gt; release, the script is rather simple, upon start it iterates over the output \
&gt; &gt; &gt; &gt; of lsusb -t and for each device, it looks if it should be added to the vm we \
&gt; &gt; &gt; &gt; started, if so, it attaches it to the vm as follows: virsh --connect \
&gt; &gt; &gt; &gt; qemu:///system "${cmd}" "${domain}" /dev/stdin &lt;&lt; END &lt;hostdev \
&gt; &gt; &gt; &gt; mode='subsystem' type='usb'&gt; &lt;source&gt;
&gt; &gt; &gt; &gt; &lt;address bus='${busnum}' device='${devnum}' /&gt;
&gt; &gt; &gt; &gt; &lt;/source&gt;
&gt; &gt; &gt; &gt; &lt;/hostdev&gt;
&gt; &gt; &gt; &gt; END
&gt; &gt; &gt; &gt; 
&gt; &gt; &gt; &gt; where cmd is attach-device, domain is the vm's name, busnum and devnum come \
&gt; &gt; &gt; &gt; from the output of the lsusb -t. my issue is that upon the first attach \
&gt; &gt; &gt; &gt; attempt, the cmd hangs, I need to kill it and after than I cannot preform any \
&gt; &gt; &gt; &gt; virsh cmd, I must restart the host. if I try to execute the same cmd after \
&gt; &gt; &gt; &gt; the vm is up, it works great. 
&gt; &gt; &gt; &gt; why the attach process gets stuck? do I need to execute it under different \
&gt; &gt; &gt; &gt; stage?
&gt; &gt; &gt; 
&gt; &gt; &gt; Hook scripts shall never call any libvirt API (even through virsh). At
&gt; &gt; &gt; the point when the hook script is called the VM startup process is
&gt; &gt; &gt; paused until the script returns. If the script attempts to modify the VM
&gt; &gt; &gt; it gets stuck as the VM is locked at that point.
&gt; &gt; &gt; 
&gt; &gt; &gt; You either need to add the device prior to startup, but AFAIK that is
&gt; &gt; &gt; not possible with a hook script or after but the script needs to return.
&gt; &gt; &gt; 
&gt; &gt; &gt; So you either fork off a process which will wait for the startup to
&gt; &gt; &gt; finish from the hook script or write an APP using the libvirt API which
&gt; &gt; &gt; will wait for the VM start event and then execute what's necessary.
&gt; &gt; &gt; 
&gt; &gt; 
&gt; &gt; I see, is there another way to do what I need (on startup usb hotplug) or maybe \
&gt; &gt; optional hotplug (e.g. don't fail the device isn't present)?
&gt; 
&gt; If you need programatic logic to decide which device to plug in you
&gt; either use the above suggestion to use a daemon using libvirt API or
&gt; fork off a separate process or do the logic prior to start by
&gt; pre-constructing the XML and using 'virsh create xmlfile' which will be
&gt; used as the running config without modifying the persistent one.
&gt; 

Laine's suggestion was the missing part, now it is a udev issue as it seems that not \
all the usb dev have settled when the rule is executed.

Dagg.

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20190107185949</emailId><senderName>Jim Fehlig</senderName><senderEmail>jfehlig@suse.com</senderEmail><timestampReceived>2019-01-07 18:59:49-0400</timestampReceived><subject>Re: [libvirt-users] xen and libvirt</subject><body>

On 1/5/19 2:32 AM, Christoph wrote:
&gt; Hi
&gt; 
&gt; I need the e820_host option for a passthrough of an digitaldevices dvb-s2 card. 
&gt; Without this I'cant initialize the card in the domU.

The xl.cfg man page claims the option is set to 'true' if any PCI passthrough 
devices are configured, 'false' otherwise. It is also advised to set the option 
if no PCI passthrough devices are configured but hotplug is later expected. I 
wonder if there are any downsides to unconditionally setting this option to 
'true' for PV domains?

&gt; 
&gt; On an all my domU's with high IO load like an file server I need to set 
&gt; max_grant_frames = 64 or higher. Without this I get a lot of messages on 
&gt; dom0/domU and kernel exceptions.
&gt; I've read it should be ok to set it = 256 on all domU's (somewhere on SuSE 
&gt; pages), so if there is a possibility to set it global on hyperviser, this could 
&gt; be a solution for me.
&gt; With xl.conf it is possible but libvirt doesnt look there for the settings. I've 
&gt; tried to set it in libxl.conf, but this doesnt work to.

Currently max_grant_frames is not supported in libxl.conf, but that sounds like 
a good place to start. Per-domain adjustment of the setting can be done later if 
we find it necessary. Do you have any interest in providing a patch to support 
setting max_grant_frames in libvirt's libxl.conf file? Commit 5194eb95646 could 
be used as an example

https://libvirt.org/git/?p=libvirt.git;a=commit;h=5194eb956464b0a7f848e2e0769a0c2dbd3e18be

Regards,
Jim

&gt; 
&gt; Am 2019-01-04 18:42, schrieb Jim Fehlig:
&gt;&gt; On 1/4/19 9:14 AM, Christoph wrote:
&gt;&gt;&gt; Hi
&gt;&gt;&gt;
&gt;&gt;&gt; Does someone know how it is possible these parameters:
&gt;&gt;&gt;
&gt;&gt;&gt; e820_host
&gt;&gt;&gt; max_grant_frames
&gt;&gt;&gt;
&gt;&gt;&gt; to set with libvirt xml config?
&gt;&gt;
&gt;&gt; Currently, those settings are not supported by libvirt. Do you need to
&gt;&gt; adjust them for PCI passthrough to PV domains?
&gt;&gt;
&gt;&gt; I took a quick peek at xl.cfg(5) and based on the description of those
&gt;&gt; settings didn't see a counterpart in the libvirt domain schema.
&gt;&gt; Perhaps understanding use-cases will help with modeling those settings
&gt;&gt; in libvirt domain XML.
&gt;&gt;
&gt;&gt; Regards,
&gt;&gt; Jim
&gt; 

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190108205719</emailId><senderName>Keith Bierman</senderName><senderEmail>khbkhb@gmail.com</senderEmail><timestampReceived>2019-01-08 20:57:19-0400</timestampReceived><subject>Re: [libvirt-users] virsh on mac os X</subject><body>

[Attachment #2 (multipart/alternative)]


export LIBVIRT_DEBUG=2
Produces the attached ....

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;&lt;div class="gmail_default" \
style="font-family:georgia,serif;color:rgb(102,51,255)"&gt;&lt;span \
style="font-family:Menlo;font-size:8.25pt;text-decoration-line:underline;color:rgb(155,156,27)"&gt;expor&lt;/span&gt;&lt;span \
style="font-family:Menlo;font-size:8.25pt;color:rgb(155,156,27)"&gt;t&lt;/span&gt;&lt;span \
style="font-family:Menlo;font-size:8.25pt;color:black"&gt; LIBVIRT_DEBUG=2  \
&lt;/span&gt;&lt;/div&gt;&lt;div class="gmail_default" \
style="font-family:georgia,serif;color:rgb(102,51,255)"&gt;&lt;span \
style="font-family:Menlo;font-size:8.25pt;color:black"&gt;Produces the attached \
....&lt;/span&gt;&lt;/div&gt;&lt;div class="gmail_default" \
style="font-family:georgia,serif;color:rgb(102,51,255)"&gt;&lt;span \
style="color:black;font-family:Menlo;font-size:8.25pt"&gt;  &lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;

--0000000000007deb62057ef899c5--


["debug.txt" (text/plain)]

2019-01-08 20:34:52.030+0000: 4433659328: info : libvirt version: 4.10.0
2019-01-08 20:34:52.030+0000: 4433659328: info : hostname: khb-X1078182.local
2019-01-08 20:34:52.030+0000: 4433659328: info : virEventPollAddHandle:137 : \
EVENT_POLL_ADD_HANDLE: watch=1 fd=3 events=1 cb=0x107fe692d opaque=0x0 ff=0x0 \
2019-01-08 20:34:52.031+0000: 4433659328: info : virEventPollAddTimeout:250 : \
EVENT_POLL_ADD_TIMEOUT: timer=1 frequency=-1 cb=0x107f73c44 opaque=0x7ffee7cbe5e0 \
ff=0x0 2019-01-08 20:34:52.031+0000: 123145513340928: info : virEventPollRunOnce:637 \
: EVENT_POLL_RUN: nhandles=1 timeout=-1 2019-01-08 20:34:52.031+0000: 4433659328: \
info : virObjectNew:248 : OBJECT_NEW: obj=0x7f7fe412f7f0 classname=virConnect \
2019-01-08 20:34:52.031+0000: 4433659328: info : virObjectNew:248 : OBJECT_NEW: \
obj=0x7f7fe2404040 classname=virNetSocket 2019-01-08 20:34:52.031+0000: 4433659328: \
info : virNetSocketNew:290 : RPC_SOCKET_NEW: sock=0x7f7fe2404040 fd=6 errfd=-1 pid=0 \
localAddr=127.0.0.1;0, remoteAddr=127.0.0.1;0 2019-01-08 20:34:52.031+0000: \
4433659328: info : virObjectNew:248 : OBJECT_NEW: obj=0x7f7fe2404230 \
classname=virNetClient 2019-01-08 20:34:52.031+0000: 4433659328: info : \
virNetClientNew:325 : RPC_CLIENT_NEW: client=0x7f7fe2404230 sock=0x7f7fe2404040 \
2019-01-08 20:34:52.031+0000: 4433659328: info : virObjectRef:382 : OBJECT_REF: \
obj=0x7f7fe2404230 2019-01-08 20:34:52.031+0000: 4433659328: info : virObjectRef:382 \
: OBJECT_REF: obj=0x7f7fe2404040 2019-01-08 20:34:52.031+0000: 4433659328: info : \
virEventPollAddHandle:137 : EVENT_POLL_ADD_HANDLE: watch=2 fd=6 events=1 \
cb=0x1080cd2ea opaque=0x7f7fe2404040 ff=0x1080cd337 2019-01-08 20:34:52.031+0000: \
4433659328: info : virObjectNew:248 : OBJECT_NEW: obj=0x7f7fe2404380 \
classname=virKeepAlive 2019-01-08 20:34:52.031+0000: 4433659328: info : \
virKeepAliveNew:212 : RPC_KEEPALIVE_NEW: ka=0x7f7fe2404380 client=0x7f7fe2404230 \
2019-01-08 20:34:52.031+0000: 4433659328: info : virObjectRef:382 : OBJECT_REF: \
obj=0x7f7fe2404230 2019-01-08 20:34:52.031+0000: 4433659328: info : virObjectNew:248 \
: OBJECT_NEW: obj=0x7f7fe2403d40 classname=virConnectCloseCallbackData 2019-01-08 \
20:34:52.031+0000: 4433659328: info : virObjectRef:382 : OBJECT_REF: \
obj=0x7f7fe2403d40 2019-01-08 20:34:52.031+0000: 4433659328: info : virObjectNew:248 \
: OBJECT_NEW: obj=0x7f7fe24044a0 classname=virNetClientProgram 2019-01-08 \
20:34:52.031+0000: 123145513340928: info : virEventPollDispatchHandles:503 : \
EVENT_POLL_DISPATCH_HANDLE: watch=1 events=1 2019-01-08 20:34:52.031+0000: \
123145513340928: info : virEventPollRunOnce:637 : EVENT_POLL_RUN: nhandles=2 \
timeout=-1 2019-01-08 20:34:52.031+0000: 4433659328: info : virObjectNew:248 : \
OBJECT_NEW: obj=0x7f7fe2404420 classname=virNetClientProgram 2019-01-08 \
20:34:52.031+0000: 4433659328: info : virObjectNew:248 : OBJECT_NEW: \
obj=0x7f7fe2404450 classname=virNetClientProgram 2019-01-08 20:34:52.032+0000: \
4433659328: info : virObjectRef:382 : OBJECT_REF: obj=0x7f7fe24044a0 2019-01-08 \
20:34:52.032+0000: 4433659328: info : virObjectRef:382 : OBJECT_REF: \
obj=0x7f7fe2404420 2019-01-08 20:34:52.032+0000: 4433659328: info : virObjectRef:382 \
: OBJECT_REF: obj=0x7f7fe2404450 2019-01-08 20:34:52.032+0000: 4433659328: info : \
virNetClientSendInternal:2118 : RPC_CLIENT_MSG_TX_QUEUE: client=0x7f7fe2404230 len=28 \
prog=536903814 vers=1 proc=66 type=0 status=0 serial=0 2019-01-08 20:34:52.032+0000: \
4433659328: info : virEventPollUpdateHandle:149 : EVENT_POLL_UPDATE_HANDLE: watch=2 \
events=0 2019-01-08 20:34:52.032+0000: 123145513340928: info : \
virEventPollDispatchHandles:503 : EVENT_POLL_DISPATCH_HANDLE: watch=1 events=1 \
2019-01-08 20:34:52.032+0000: 123145513340928: info : virEventPollRunOnce:637 : \
EVENT_POLL_RUN: nhandles=1 timeout=-1 2019-01-08 20:34:52.032+0000: 4433659328: info \
: virNetClientCallDispatch:1264 : RPC_CLIENT_MSG_RX: client=0x7f7fe2404230 len=36 \
prog=536903814 vers=1 proc=66 type=1 status=0 serial=0 2019-01-08 20:34:52.032+0000: \
4433659328: info : virEventPollUpdateHandle:149 : EVENT_POLL_UPDATE_HANDLE: watch=2 \
events=1 2019-01-08 20:34:52.032+0000: 4433659328: info : \
virNetClientSendInternal:2118 : RPC_CLIENT_MSG_TX_QUEUE: client=0x7f7fe2404230 len=32 \
prog=536903814 vers=1 proc=60 type=0 status=0 serial=1 2019-01-08 20:34:52.032+0000: \
4433659328: info : virEventPollUpdateHandle:149 : EVENT_POLL_UPDATE_HANDLE: watch=2 \
events=0 2019-01-08 20:34:52.032+0000: 123145513340928: info : \
virEventPollDispatchHandles:503 : EVENT_POLL_DISPATCH_HANDLE: watch=1 events=1 \
2019-01-08 20:34:52.032+0000: 123145513340928: info : virEventPollRunOnce:637 : \
EVENT_POLL_RUN: nhandles=2 timeout=-1 2019-01-08 20:34:52.032+0000: 123145513340928: \
info : virEventPollDispatchHandles:503 : EVENT_POLL_DISPATCH_HANDLE: watch=1 events=1 \
2019-01-08 20:34:52.032+0000: 123145513340928: info : virEventPollRunOnce:637 : \
EVENT_POLL_RUN: nhandles=1 timeout=-1 2019-01-08 20:34:52.032+0000: 4433659328: info \
: virNetClientCallDispatch:1264 : RPC_CLIENT_MSG_RX: client=0x7f7fe2404230 len=32 \
prog=536903814 vers=1 proc=60 type=1 status=0 serial=1 2019-01-08 20:34:52.032+0000: \
4433659328: info : virEventPollUpdateHandle:149 : EVENT_POLL_UPDATE_HANDLE: watch=2 \
events=1 2019-01-08 20:34:52.032+0000: 4433659328: info : \
virNetClientSendInternal:2118 : RPC_CLIENT_MSG_TX_QUEUE: client=0x7f7fe2404230 len=56 \
prog=536903814 vers=1 proc=1 type=0 status=0 serial=2 2019-01-08 20:34:52.032+0000: \
4433659328: info : virEventPollUpdateHandle:149 : EVENT_POLL_UPDATE_HANDLE: watch=2 \
events=0 2019-01-08 20:34:52.032+0000: 123145513340928: info : \
virEventPollDispatchHandles:503 : EVENT_POLL_DISPATCH_HANDLE: watch=1 events=1 \
2019-01-08 20:34:52.032+0000: 123145513340928: info : virEventPollRunOnce:637 : \
EVENT_POLL_RUN: nhandles=2 timeout=-1 2019-01-08 20:34:52.032+0000: 123145513340928: \
info : virEventPollDispatchHandles:503 : EVENT_POLL_DISPATCH_HANDLE: watch=1 events=1 \
2019-01-08 20:34:52.032+0000: 123145513340928: info : virEventPollRunOnce:637 : \
EVENT_POLL_RUN: nhandles=1 timeout=-1 2019-01-08 20:34:52.032+0000: 4433659328: info \
: virNetClientCallDispatch:1264 : RPC_CLIENT_MSG_RX: client=0x7f7fe2404230 len=208 \
prog=536903814 vers=1 proc=1 type=1 status=1 serial=2 2019-01-08 20:34:52.032+0000: \
4433659328: info : virEventPollUpdateHandle:149 : EVENT_POLL_UPDATE_HANDLE: watch=2 \
events=1 2019-01-08 20:34:52.032+0000: 4433659328: info : virObjectUnref:344 : \
OBJECT_UNREF: obj=0x7f7fe24044a0 2019-01-08 20:34:52.032+0000: 4433659328: info : \
virObjectUnref:344 : OBJECT_UNREF: obj=0x7f7fe2404420 2019-01-08 20:34:52.032+0000: \
4433659328: info : virObjectUnref:344 : OBJECT_UNREF: obj=0x7f7fe2404450 2019-01-08 \
20:34:52.032+0000: 4433659328: info : virEventPollRemoveHandle:183 : \
EVENT_POLL_REMOVE_HANDLE: watch=2 2019-01-08 20:34:52.032+0000: 123145513340928: info \
: virEventPollDispatchHandles:503 : EVENT_POLL_DISPATCH_HANDLE: watch=1 events=1 \
2019-01-08 20:34:52.033+0000: 123145513340928: info : virEventPollRunOnce:637 : \
EVENT_POLL_RUN: nhandles=2 timeout=-1 2019-01-08 20:34:52.033+0000: 4433659328: info \
: virObjectUnref:344 : OBJECT_UNREF: obj=0x7f7fe2404040 2019-01-08 20:34:52.033+0000: \
4433659328: info : virObjectRef:382 : OBJECT_REF: obj=0x7f7fe2404230 2019-01-08 \
20:34:52.033+0000: 123145513340928: info : virEventPollDispatchHandles:503 : \
EVENT_POLL_DISPATCH_HANDLE: watch=1 events=1 2019-01-08 20:34:52.033+0000: \
123145513340928: info : virEventPollCleanupHandles:584 : EVENT_POLL_PURGE_HANDLE: \
watch=2 2019-01-08 20:34:52.033+0000: 123145513340928: info : virObjectUnref:344 : \
OBJECT_UNREF: obj=0x7f7fe2404230 2019-01-08 20:34:52.033+0000: 123145513340928: info \
: virObjectUnref:344 : OBJECT_UNREF: obj=0x7f7fe2404040 2019-01-08 20:34:52.033+0000: \
123145513340928: info : virObjectUnref:346 : OBJECT_DISPOSE: obj=0x7f7fe2404040 \
2019-01-08 20:34:52.033+0000: 123145513340928: info : virNetSocketDispose:1320 : \
RPC_SOCKET_DISPOSE: sock=0x7f7fe2404040 2019-01-08 20:34:52.033+0000: 4433659328: \
info : virKeepAliveStop:304 : RPC_KEEPALIVE_STOP: ka=0x7f7fe2404380 \
client=0x7f7fe2404230 2019-01-08 20:34:52.033+0000: 4433659328: info : \
virObjectUnref:344 : OBJECT_UNREF: obj=0x7f7fe2404380 2019-01-08 20:34:52.033+0000: \
4433659328: info : virObjectUnref:346 : OBJECT_DISPOSE: obj=0x7f7fe2404380 2019-01-08 \
20:34:52.033+0000: 4433659328: info : virKeepAliveDispose:224 : \
RPC_KEEPALIVE_DISPOSE: ka=0x7f7fe2404380 2019-01-08 20:34:52.033+0000: 4433659328: \
info : virObjectUnref:344 : OBJECT_UNREF: obj=0x7f7fe2404230 2019-01-08 \
20:34:52.033+0000: 4433659328: info : virObjectUnref:344 : OBJECT_UNREF: \
obj=0x7f7fe2404230 2019-01-08 20:34:52.033+0000: 4433659328: info : \
virObjectUnref:344 : OBJECT_UNREF: obj=0x7f7fe2404230 2019-01-08 20:34:52.033+0000: \
4433659328: info : virObjectUnref:346 : OBJECT_DISPOSE: obj=0x7f7fe2404230 2019-01-08 \
20:34:52.033+0000: 4433659328: info : virNetClientDispose:741 : RPC_CLIENT_DISPOSE: \
client=0x7f7fe2404230 2019-01-08 20:34:52.033+0000: 4433659328: info : \
virObjectUnref:344 : OBJECT_UNREF: obj=0x7f7fe2403d40 2019-01-08 20:34:52.033+0000: \
4433659328: info : virObjectUnref:344 : OBJECT_UNREF: obj=0x7f7fe24044a0 2019-01-08 \
20:34:52.033+0000: 4433659328: info : virObjectUnref:346 : OBJECT_DISPOSE: \
obj=0x7f7fe24044a0 2019-01-08 20:34:52.033+0000: 4433659328: info : \
virObjectUnref:344 : OBJECT_UNREF: obj=0x7f7fe2404420 2019-01-08 20:34:52.033+0000: \
4433659328: info : virObjectUnref:346 : OBJECT_DISPOSE: obj=0x7f7fe2404420 2019-01-08 \
20:34:52.033+0000: 4433659328: info : virObjectUnref:344 : OBJECT_UNREF: \
obj=0x7f7fe2404450 2019-01-08 20:34:52.033+0000: 4433659328: info : \
virObjectUnref:346 : OBJECT_DISPOSE: obj=0x7f7fe2404450 2019-01-08 20:34:52.033+0000: \
4433659328: info : virObjectUnref:344 : OBJECT_UNREF: obj=0x7f7fe2403d40 2019-01-08 \
20:34:52.033+0000: 4433659328: info : virObjectUnref:346 : OBJECT_DISPOSE: \
obj=0x7f7fe2403d40 2019-01-08 20:34:52.033+0000: 4433659328: info : \
virObjectUnref:344 : OBJECT_UNREF: obj=0x7f7fe412f7f0 2019-01-08 20:34:52.033+0000: \
                4433659328: info : virObjectUnref:346 : OBJECT_DISPOSE: \
                obj=0x7f7fe412f7f0
commands: "list"
error: 2019-01-08 20:34:52.033+0000: 123145513340928: info : virEventPollRunOnce:637 \
: EVENT_POLL_RUN: nhandles=1 timeout=-1 failed to connect to the hypervisor
error: internal error: unable to initialize VirtualBox driver API
2019-01-08 20:34:52.033+0000: 4433659328: info : virEventPollAddTimeout:250 : \
EVENT_POLL_ADD_TIMEOUT: timer=2 frequency=0 cb=0x107f45a56 opaque=0x0 ff=0x0 \
2019-01-08 20:34:52.033+0000: 123145513340928: info : \
virEventPollDispatchTimeouts:452 : EVENT_POLL_DISPATCH_TIMEOUT: timer=2 2019-01-08 \
20:34:52.033+0000: 123145513340928: info : virEventPollDispatchHandles:503 : \
EVENT_POLL_DISPATCH_HANDLE: watch=1 events=1 2019-01-08 20:34:52.033+0000: \
4433659328: info : virEventPollRemoveTimeout:302 : EVENT_POLL_REMOVE_TIMEOUT: timer=2 \
2019-01-08 20:34:52.033+0000: 4433659328: info : virEventPollRemoveTimeout:302 : \
EVENT_POLL_REMOVE_TIMEOUT: timer=1



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190109100403</emailId><senderName>Daniel =?utf-8?B?UC4gQmVycmFuZ8Op?=</senderName><senderEmail>berrange@redhat.com</senderEmail><timestampReceived>2019-01-09 10:04:03-0400</timestampReceived><subject>Re: [libvirt-users] Golang libvirt bindings problem</subject><body>

On Thu, Jan 03, 2019 at 01:37:51AM +0000, Branimir Pejakovic wrote:
&gt; Hello everybody!
&gt; 
&gt; First, allow me to wish you all a Happy New year!
&gt; 
&gt; I have a problem with a small app that I wrote in Go and which uses libvirt
&gt; go bindings. Actually, the problem exists only when I want to compile the
&gt; code statically. Basically, when CGO_ENABLED=0 is exported, go (running go
&gt; test, go run, go build) complains:
&gt; 
&gt; undefined: libvirt.NewConnect

The libvirt bindings use CGo, so when you set CGO_ENABLED=0 you break
the bindings. You must not set that env variable.

Regards,
Daniel
-- 
|: https://berrange.com      -o-    https://www.flickr.com/photos/dberrange :|
|: https://libvirt.org         -o-            https://fstop138.berrange.com :|
|: https://entangle-photo.org    -o-    https://www.instagram.com/dberrange :|

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190109163724</emailId><senderName>lejeczek</senderName><senderEmail>peljasz@yahoo.co.uk</senderEmail><timestampReceived>2019-01-09 16:37:24-0400</timestampReceived><subject>[libvirt-users] openVswitch</subject><body>

hi guys

I'm trying a typical, I'd presume, setup: two libvirt hosts with one lxc 
guest each.

boxA:

$  ovs-vsctl show
1a6a2e4f-11f3-48df-becd-03b59d00a1fb
     Bridge "ovsbr0"
         Port nm-team
             trunks: [55]
             Interface nm-team
         Port "vnet12"
             trunks: [55]
             Interface "vnet12"
         Port "ovsbr0"
             Interface "ovsbr0"
                 type: internal
     ovs_version: "2.0.0"

boxB:

$  ovs-vsctl show
05ffa96c-a961-41e7-9f8a-74dbe214153a
     Bridge "ovsbr0"
         Port "vnet41"
             trunks: [55]
             Interface "vnet41"
         Port nm-team
             trunks: [55]
             Interface nm-team
         Port "ovsbr0"
             Interface "ovsbr0"
                 type: internal
     ovs_version: "2.0.0"

In libvirt openvswitch network defines &amp; starts okey, both guests start 
okey, yet guests cannot ping one another.

Ifaces in guests seem to instantiate okey cause each guest can ping its 
own IP (on libvirt openvswitch net)

You can see that on each host openvswitch port is nm-team, which I 
presume must be pretty "regular" situation.

Only thing I'm not sure is that the same nm-team (on each host) is also 
a port to NM's bridge. (which works fine, these bridge ifaces on both 
hosts ping each other no problems).

Which bits I get wrong or am missing?

many thanks, L.



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190113122010</emailId><senderName>daggs</senderName><senderEmail>daggs@gmx.com</senderEmail><timestampReceived>2019-01-13 12:20:10-0400</timestampReceived><subject>Re: [libvirt-users] forcing order of vnet creation</subject><body>

apparently something went wrong while writing the question, so here it is properly, \
my bad.

Greetings,

I have a host that has two vms, one is a router that all the machines on the network \
connect to it and that other a test virtual machine. the router vm is connected to \
the host using a virt net, the test virtual machine is connected to the router via a \
virtual switch. my /etc/network/interfaces defines vnet1 as dhcp by assuming that it \
is the vnet for the host (it was seen multiple times). yesterday I came back from a \
vacation, booted the system and didn't got any ip to the host, the rest of the \
machines on the network got ip. at the end, the issue was that vnet1 was the virtual \
switch rather than the host's virtual nic. is there a way for "lock" the vnics config \
so they won't change?

the host is Debian 9.6, the output of ifconfig -a is below (the "faulty" scenario)
dummy0 Link encap:Ethernet HWaddr C6:C8:2A:04:FD:23
BROADCAST NOARP MTU:1500 Metric:1
RX packets:0 errors:0 dropped:0 overruns:0 frame:0
TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
collisions:0 txqueuelen:1000
RX bytes:0 (0.0 B) TX bytes:0 (0.0 B)

lo Link encap:Local Loopback
inet addr:127.0.0.1 Mask:255.0.0.0
inet6 addr: ::1/128 Scope:Host
UP LOOPBACK RUNNING MTU:65536 Metric:1
RX packets:22048 errors:0 dropped:0 overruns:0 frame:0
TX packets:22048 errors:0 dropped:0 overruns:0 carrier:0
collisions:0 txqueuelen:1000
RX bytes:1068960 (1.0 MiB) TX bytes:1068960 (1.0 MiB)

virtsw0 Link encap:Ethernet HWaddr 52:54:00:6B:1B:92
UP BROADCAST RUNNING MULTICAST MTU:1500 Metric:1
RX packets:92908 errors:0 dropped:0 overruns:0 frame:0
TX packets:18 errors:0 dropped:0 overruns:0 carrier:0
collisions:0 txqueuelen:1000
RX bytes:13257095 (12.6 MiB) TX bytes:756 (756.0 B)

virtsw0-nic Link encap:Ethernet HWaddr 52:54:00:6B:1B:92
BROADCAST MULTICAST MTU:1500 Metric:1
RX packets:0 errors:0 dropped:0 overruns:0 frame:0
TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
collisions:0 txqueuelen:1000
RX bytes:0 (0.0 B) TX bytes:0 (0.0 B)

vnet0 Link encap:Ethernet HWaddr FE:54:00:8B:66:C1
inet addr:10.0.0.3 Bcast:10.0.0.255 Mask:255.255.255.0
inet6 addr: fe80::fc54:ff:fe8b:66c1/64 Scope:Link
inet6 addr: fdab:9802:eb52:0:fc54:ff:fe8b:66c1/64 Scope:Global
UP BROADCAST RUNNING MULTICAST MTU:1500 Metric:1
RX packets:528665 errors:0 dropped:0 overruns:0 frame:0
TX packets:752585 errors:0 dropped:0 overruns:0 carrier:0
collisions:0 txqueuelen:1000
RX bytes:44311555 (42.2 MiB) TX bytes:2165654771 (2.0 GiB)

vnet1 Link encap:Ethernet HWaddr FE:54:00:A7:79:6B
inet6 addr: fe80::fc54:ff:fea7:796b/64 Scope:Link
UP BROADCAST RUNNING MULTICAST MTU:1500 Metric:1
RX packets:92983 errors:0 dropped:0 overruns:0 frame:0
TX packets:81658 errors:0 dropped:0 overruns:0 carrier:0
collisions:0 txqueuelen:1000
RX bytes:14566221 (13.8 MiB) TX bytes:4249914 (4.0 MiB)

vnet2 Link encap:Ethernet HWaddr FE:54:00:54:78:BE
inet6 addr: fe80::fc54:ff:fe54:78be/64 Scope:Link
UP BROADCAST RUNNING MULTICAST MTU:1500 Metric:1
RX packets:15 errors:0 dropped:0 overruns:0 frame:0
TX packets:257 errors:0 dropped:0 overruns:0 carrier:0
collisions:0 txqueuelen:1000
RX bytes:1962 (1.9 KiB) TX bytes:42261 (41.2 KiB)

thanks,

Dagg.

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email><email><emailId>20190116093404</emailId><senderName>Christophe Dumont</senderName><senderEmail>christophedumont5@gmail.com</senderEmail><timestampReceived>2019-01-16 09:34:04-0400</timestampReceived><subject>Re: [libvirt-users] cpu0 unhandled rdmsr:</subject><body>

[Attachment #2 (multipart/alternative)]


Thanks for the tip!

Le mer. 16 janv. 2019 Ã  10:07, Daniel P. BerrangÃ© &lt;berrange@redhat.com&gt; a
Ã©crit :

&gt; On Wed, Jan 16, 2019 at 09:42:21AM +0100, Christophe Dumont wrote:
&gt; &gt; Hello,
&gt; &gt;
&gt; &gt; Do you know what this means :
&gt; &gt;
&gt; &gt; kvm: 2918: cpu0 unhandled rdmsr: 0x345
&gt; &gt; kvm: 2918: cpu0 unhandled rdmsr: 0x1c9
&gt; &gt; kvm: 2918: cpu0 unhandled rdmsr: 0x1a6
&gt; &gt; kvm: 2918: cpu0 unhandled rdmsr: 0x1a7
&gt; &gt; kvm: 2918: cpu0 unhandled rdmsr: 0x3f6
&gt; &gt; tap110i0: no IPv6 routers present
&gt; &gt; kvm: 2952: cpu0 unhandled rdmsr: 0x345
&gt; &gt; kvm: 2952: cpu0 unhandled rdmsr: 0x1c9
&gt; &gt; kvm: 2952: cpu0 unhandled rdmsr: 0x1a6
&gt; &gt; kvm: 2952: cpu0 unhandled rdmsr: 0x1a7
&gt; &gt; kvm: 2952: cpu0 unhandled rdmsr: 0x3f6
&gt; &gt;
&gt; &gt; I think it causes instability, we had to reboot the server twice and a
&gt; &gt; backup script still fails.
&gt;
&gt; KVM has a whitelist of MSRs that it handles. These messages show
&gt; that the guest has been doing reads on various MSRs that KVM does
&gt; not support. These can sometimes be the the cause of bugs, but
&gt; others may be harmless. Best to report these to the KVM community,
&gt; with details about your host hardware CPU models, and what guest
&gt; OS you are running
&gt;
&gt;
&gt; Regards,
&gt; Daniel
&gt; --
&gt; |: https://berrange.com      -o-
&gt; https://www.flickr.com/photos/dberrange :|
&gt; |: https://libvirt.org         -o-
&gt; https://fstop138.berrange.com :|
&gt; |: https://entangle-photo.org    -o-
&gt; https://www.instagram.com/dberrange :|
&gt;


-- 
Christophe Dumont
4, Passage du LycÃ©e
38000 Grenoble
0633475733

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;Thanks for the tip!  &lt;br&gt;&lt;/div&gt;&lt;br&gt;&lt;div class="gmail_quote"&gt;&lt;div \
dir="ltr"&gt;Le  mer. 16 janv. 2019 Ã   10:07, Daniel P. BerrangÃ© &lt;&lt;a \
href="mailto:berrange@redhat.com"&gt;berrange@redhat.com&lt;/a&gt;&gt; a Ã©crit  \
:&lt;br&gt;&lt;/div&gt;&lt;blockquote class="gmail_quote" style="margin:0px 0px 0px \
0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"&gt;On Wed, Jan 16, 2019 \
at 09:42:21AM +0100, Christophe Dumont wrote:&lt;br&gt; &gt; Hello,&lt;br&gt;
&gt; &lt;br&gt;
&gt; Do you know what this means :&lt;br&gt;
&gt; &lt;br&gt;
&gt; kvm: 2918: cpu0 unhandled rdmsr: 0x345&lt;br&gt;
&gt; kvm: 2918: cpu0 unhandled rdmsr: 0x1c9&lt;br&gt;
&gt; kvm: 2918: cpu0 unhandled rdmsr: 0x1a6&lt;br&gt;
&gt; kvm: 2918: cpu0 unhandled rdmsr: 0x1a7&lt;br&gt;
&gt; kvm: 2918: cpu0 unhandled rdmsr: 0x3f6&lt;br&gt;
&gt; tap110i0: no IPv6 routers present&lt;br&gt;
&gt; kvm: 2952: cpu0 unhandled rdmsr: 0x345&lt;br&gt;
&gt; kvm: 2952: cpu0 unhandled rdmsr: 0x1c9&lt;br&gt;
&gt; kvm: 2952: cpu0 unhandled rdmsr: 0x1a6&lt;br&gt;
&gt; kvm: 2952: cpu0 unhandled rdmsr: 0x1a7&lt;br&gt;
&gt; kvm: 2952: cpu0 unhandled rdmsr: 0x3f6&lt;br&gt;
&gt; &lt;br&gt;
&gt; I think it causes instability, we had to reboot the server twice and a&lt;br&gt;
&gt; backup script still fails.&lt;br&gt;
&lt;br&gt;
KVM has a whitelist of MSRs that it handles. These messages show&lt;br&gt;
that the guest has been doing reads on various MSRs that KVM does&lt;br&gt;
not support. These can sometimes be the the cause of bugs, but&lt;br&gt;
others may be harmless. Best to report these to the KVM community,&lt;br&gt;
with details about your host hardware CPU models, and what guest&lt;br&gt;
OS you are running&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
Regards,&lt;br&gt;
Daniel&lt;br&gt;
-- &lt;br&gt;
&gt; &gt; &lt;a href="https://berrange.com" rel="noreferrer" \
&gt; &gt; target="_blank"&gt;https://berrange.com&lt;/a&gt;         -o-      &lt;a \
&gt; &gt; href="https://www.flickr.com/photos/dberrange" rel="noreferrer" \
&gt; &gt; target="_blank"&gt;https://www.flickr.com/photos/dberrange&lt;/a&gt; :|&lt;br&gt;
&gt; &gt; &lt;a href="https://libvirt.org" rel="noreferrer" \
&gt; &gt; target="_blank"&gt;https://libvirt.org&lt;/a&gt;              -o-                  &lt;a \
&gt; &gt; href="https://fstop138.berrange.com" rel="noreferrer" \
&gt; &gt; target="_blank"&gt;https://fstop138.berrange.com&lt;/a&gt; :|&lt;br&gt;
&gt; &gt; &lt;a href="https://entangle-photo.org" rel="noreferrer" \
&gt; &gt; target="_blank"&gt;https://entangle-photo.org&lt;/a&gt;      -o-      &lt;a \
&gt; &gt; href="https://www.instagram.com/dberrange" rel="noreferrer" \
&gt; &gt; target="_blank"&gt;https://www.instagram.com/dberrange&lt;/a&gt; :|&lt;br&gt;
&lt;/blockquote&gt;&lt;/div&gt;&lt;br clear="all"&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;-- &lt;br&gt;&lt;div dir="ltr" \
class="gmail_signature"&gt;&lt;div dir="ltr"&gt;&lt;div&gt;&lt;div dir="ltr"&gt;&lt;div&gt;Christophe \
Dumont&lt;br&gt;&lt;/div&gt;&lt;div&gt;4, Passage du LycÃ©e&lt;br&gt;&lt;/div&gt;&lt;div&gt;38000 \
Grenoble&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;0633475733&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190117103418</emailId><senderName>"Roosen, Nicolas"</senderName><senderEmail>nicolas.roosen@hpe.com</senderEmail><timestampReceived>2019-01-17 10:34:18-0400</timestampReceived><subject>Re: [libvirt-users] VM running with storage image file deleted</subject><body>

[Attachment #2 (text/html)]

&lt;html&gt;
  &lt;head&gt;
    &lt;meta http-equiv="Content-Type" content="text/html;
      charset=windows-1252"&gt;
  &lt;/head&gt;
  &lt;body text="#000000" bgcolor="#FFFFFF"&gt;
    &lt;p&gt;Hi,&lt;br&gt;
    &lt;/p&gt;
    &lt;div class="moz-cite-prefix"&gt;On 1/15/19 3:18 PM, Peter Krempa wrote:&lt;br&gt;
    &lt;/div&gt;
    &lt;blockquote type="cite"
      cite="mid:20190115141808.GK3382@angien.pipo.sk"&gt;
      &lt;pre class="moz-quote-pre" wrap=""&gt;On Thu, Jan 10, 2019 at 11:35:13 +0100, \
Michal Privoznik wrote: &lt;/pre&gt;
      &lt;blockquote type="cite"&gt;
        &lt;pre class="moz-quote-pre" wrap=""&gt;On 1/10/19 11:19 AM, Roosen, Nicolas \
wrote: &lt;/pre&gt;
        &lt;blockquote type="cite"&gt;
          &lt;pre class="moz-quote-pre" wrap=""&gt;Hello, I have a strange issue I'd like \
to have some insights on.


We have 2 running VM, the storage pool is over NFS. Unfortunately, the backend \
storage folder has been deleted (so the image file in it as well, obviously) ...


Yet, the 2 VM are still up and running, with their root filesystem being mounted \
"rw".


- how does that work? I was expecting that with the file image being deleted, the VM \
would not work at all.

- since the VM is still running, is there a way to create a snapshot of it in order \
to re-create the image file on another storage pool ? I'm currently exploring "virsh \
snapshot-create-as ...", but if access to the image file is needed, it will fail.

&lt;/pre&gt;
        &lt;/blockquote&gt;
        &lt;pre class="moz-quote-pre" wrap=""&gt;
On Linux a file is not deleted right away if there's a process that has
the file opened, which is your case. The deletion is deferred until the
last process closed the file.

In order to rescue the file you could get the PID of qemu that still has
the disk open, and then find the FD corresponding to the file and with
some magic you should be able to recover the file:

# pgrep qemu
221472

# ls -l /proc/221472/fd/ | grep deleted
lr-x------ 1 root root 64 Jan 10 11:31 29 -&gt;
/var/lib/libvirt/images/fd.img (deleted)

(Here, 29 is the FD we're looking for)

# dd if=/proc/221472/fd/29 of=blah.img

snapshot-create-* won't work because that will instruct qemu to open the
file again which will fail because the filename is gone.
&lt;/pre&gt;
      &lt;/blockquote&gt;
      &lt;pre class="moz-quote-pre" wrap=""&gt;
You can use 'virsh blockcopy $domname $diskname /path/to/other/location --pivot
--transient-job' to rescue this situation.

The above command will copy the full block device from qemu's point of
view (thus without any change) into the new location and then switch to
it when done.

Your VM will even continue running as it did but will use the new file.&lt;/pre&gt;
    &lt;/blockquote&gt;
    &lt;p&gt;Ah good to know, thanks for the tip !&lt;/p&gt;
    &lt;p&gt;Nicolas&lt;/p&gt;
  &lt;/body&gt;
&lt;/html&gt;


["smime.p7s" (application/pkcs7-signature)]

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
--===============6791677405320379403==--


</body></email><email><emailId>20190118095457</emailId><senderName>Daniel =?utf-8?B?UC4gQmVycmFuZ8Op?=</senderName><senderEmail>berrange@redhat.com</senderEmail><timestampReceived>2019-01-18 09:54:57-0400</timestampReceived><subject>Re: [libvirt-users] virt-install and IOThreads</subject><body>

On Thu, Jan 17, 2019 at 08:46:23PM +0100, Igor Gnatenko wrote:
&gt; On Thu, Jan 17, 2019 at 4:35 PM Cole Robinson &lt;crobinso@redhat.com&gt; wrote:
&gt; &gt;
&gt; &gt; On 01/17/2019 05:58 AM, Igor Gnatenko wrote:
&gt; &gt; &gt; Hello,
&gt; &gt; &gt;
&gt; &gt; &gt; is there any way of specifying iothreads via virt-install command?
&gt; &gt; &gt;
&gt; &gt; &gt; I've tried appending ",iothread='1'" but that didn't work.
&gt; &gt; &gt;
&gt; &gt; &gt; Thanks in advance!
&gt; &gt; &gt;
&gt; &gt;
&gt; &gt; No unfortunately it's not wired up in virt-install. It's fairly easy to
&gt; &gt; patch+extend the command line if you're interested, this is a bit out of
&gt; &gt; date but still pretty close
&gt; &gt;
&gt; &gt; https://blog.wikichoon.com/2014/03/extending-virt-xml-command-line.html
&gt; 
&gt; Thanks for reference!
&gt; 
&gt; I'm still not sure how the commandline would look like, what do you
&gt; think about something like…
&gt; --iothreads=X --disk=…,iothread=1 --disk=…,iothread=X

That would seems reasonable to me.

Regards,
Daniel
-- 
|: https://berrange.com      -o-    https://www.flickr.com/photos/dberrange :|
|: https://libvirt.org         -o-            https://fstop138.berrange.com :|
|: https://entangle-photo.org    -o-    https://www.instagram.com/dberrange :|

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190118212353</emailId><senderName>Keith Bierman</senderName><senderEmail>khbkhb@gmail.com</senderEmail><timestampReceived>2019-01-18 21:23:53-0400</timestampReceived><subject>[libvirt-users] *-sock created as part of normal daemon startup?</subject><body>

[Attachment #2 (multipart/alternative)]


As noted in another thread, I've not had success with homebrew/Mac OSX's
libvirt install.

On  Ubuntu  and CentOS virtual machines, installing "libvirt-daemon" and
friends, I end up with various "-sock" files in /var/run/libvirt. This
seems sensible.

After installing on MacOS X with homebrew

ls /usr/local/var/run/libvirt
hostdevmgr lockd qemu storage


so perhaps it isn't surprising that virsh -c vbox:/// fails.

Am I right in believing that the lack of -sock files means that the "brew
services start libvirt" is either misconfigured or otherwise failing?

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;&lt;div class="gmail_default" \
style="font-family:georgia,serif;color:rgb(102,51,255)"&gt;As noted in another thread, \
I've not had success with homebrew/Mac OSX's libvirt install.&lt;/div&gt;&lt;div \
class="gmail_default" \
style="font-family:georgia,serif;color:rgb(102,51,255)"&gt;&lt;br&gt;&lt;/div&gt;&lt;div \
class="gmail_default" style="font-family:georgia,serif;color:rgb(102,51,255)"&gt;On   \
Ubuntu   and CentOS virtual machines, installing "libvirt-daemon" and \
friends, I end up with various "-sock" files in /var/run/libvirt. This \
seems sensible.&lt;/div&gt;&lt;div class="gmail_default" \
style="font-family:georgia,serif;color:rgb(102,51,255)"&gt;&lt;br&gt;&lt;/div&gt;&lt;div \
class="gmail_default" style="font-family:georgia,serif;color:rgb(102,51,255)"&gt;After \
installing on MacOS X with homebrew&lt;/div&gt;&lt;div class="gmail_default"&gt;&lt;div \
class="gmail_default"&gt;&lt;font color="#6633ff" face="georgia, \
serif"&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;blockquote style="margin:0 0 0 \
40px;border:none;padding:0px"&gt;&lt;div&gt;&lt;div class="gmail_default"&gt;&lt;div \
class="gmail_default"&gt;&lt;font color="#6633ff" face="monospace, monospace"&gt;ls \
/usr/local/var/run/libvirt&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div \
class="gmail_default"&gt;&lt;div class="gmail_default"&gt;&lt;font color="#6633ff" \
face="monospace, monospace"&gt;hostdevmgr&lt;span \
style="white-space:pre"&gt;	&lt;/span&gt;lockd&lt;span style="white-space:pre"&gt;		&lt;/span&gt;qemu&lt;span \
style="white-space:pre"&gt;		&lt;/span&gt;storage&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div \
dir="ltr"&gt;&lt;div class="gmail_default"&gt;&lt;div class="gmail_default"&gt;&lt;br&gt;&lt;/div&gt;&lt;div \
style="color:rgb(102,51,255);font-family:georgia,serif"&gt;so perhaps it isn't \
surprising that virsh -c vbox:/// fails.&lt;/div&gt;&lt;div \
style="color:rgb(102,51,255);font-family:georgia,serif"&gt;&lt;br&gt;&lt;/div&gt;&lt;div \
style="color:rgb(102,51,255);font-family:georgia,serif"&gt;Am I right in believing that \
the lack of -sock files means that the "brew services start libvirt" is \
either misconfigured or otherwise failing?&lt;/div&gt;&lt;/div&gt;&lt;div class="gmail_default" \
style="font-family:georgia,serif;color:rgb(102,51,255)"&gt;&lt;br&gt;&lt;/div&gt;&lt;div \
class="gmail_default" \
style="font-family:georgia,serif;color:rgb(102,51,255)"&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190121104102</emailId><senderName>mxs kolo</senderName><senderEmail>kolomaxes@gmail.com</senderEmail><timestampReceived>2019-01-21 10:41:02-0400</timestampReceived><subject>[libvirt-users] libvirt 5.0.0 - LXC container still in "virsh list" output after shutdown</subject><body>

 Hello.

Centos 7.6 with libvirt build from base "virt" repository:
libvirt-daemon-driver-lxc-5.0.0-1.el7.x86_64
libvirt-client-5.0.0-1.el7.x86_64
libvirt-daemon-5.0.0-1.el7.x86_64
libvirt-daemon-driver-network-5.0.0-1.el7.x86_64
libvirt-libs-5.0.0-1.el7.x86_64
+
systemd-219-62.el7_6.2.x86_64

Now lxc containers with  type='direct' can be started,  but can't be stopped :)
Before shutdown.
# virsh  list --all
 Id      Name                   State
------------------------------------------
 16312   test.lxc               running

# machinectl | grep test
lxc-16312-test.lxc            container libvirt-lxc

# pstree -apA  16312
libvirt_lxc,16312 --name test.lxc --console 42 --security=none
--handshake 45 --veth macvlan0
  |-systemd,16315
  |   |-agetty,16690 --noclear --keep-baud console 115200 38400 9600 vt220
  |   |-dbus-daemon,16659 --system --address=systemd: --nofork
--nopidfile --systemd-activation
  |   |-rsyslogd,17614 -n
  |   |   |-{rsyslogd},17616
  |   |   `-{rsyslogd},17626
  |   |-sshd,17613 -D
  |   |-systemd-journal,16613
  |   `-systemd-logind,16657
  `-{libvirt_lxc},16319


Shutdown.
# virsh  shutdown 16312
Domain 16312 is being shutdown
# echo $?
0

After.
In list output still present:
# virsh  list --all
 Id      Name                   State
------------------------------------------
 16312   test.lxc               running
# machinectl | grep test | wc -l
0

No main process:
# ps axuwwf | grep libvirt_lxc | grep test | wc -l
0

LXC realy stopped, but only virsh still show it in list
Cgroups "blkio, cpuacct, memory, cpu, cpu,cpuacct, devices, hugetlb,
pids" deleted.
But another cgroups still present in fs:
drwxr-xr-x 2 root root 0 Jan 21 13:07
/sys/fs/cgroup/cpuset/machine.slice/machine-lxc\x2d16312\x2dtest.lxc.scope
drwxr-xr-x 2 root root 0 Jan 21 13:07
/sys/fs/cgroup/freezer/machine.slice/machine-lxc\x2d16312\x2dtest.lxc.scope
drwxr-xr-x 2 root root 0 Jan 21 13:07
/sys/fs/cgroup/net_cls/machine.slice/machine-lxc\x2d16312\x2dtest.lxc.scope
drwxr-xr-x 2 root root 0 Jan 21 13:07
/sys/fs/cgroup/net_cls,net_prio/machine.slice/machine-lxc\x2d16312\x2dtest.lxc.scope
drwxr-xr-x 2 root root 0 Jan 21 13:07
/sys/fs/cgroup/net_prio/machine.slice/machine-lxc\x2d16312\x2dtest.lxc.scope
drwxr-xr-x 2 root root 0 Jan 21 13:07
/sys/fs/cgroup/perf_event/machine.slice/machine-lxc\x2d16312\x2dtest.lxc.scope

Restarted libvirtd temporary place container in correct state:
# systemctl restart libvirtd
# virsh list --all | grep test
 -       test.lxc            shut off

libvirt 4.5.0 and 4.10.0 perform correct LXC shutdown.

b.r.
  Maxim Kozin

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190118185613</emailId><senderName>jsl6uy js16uy</senderName><senderEmail>js16uy@gmail.com</senderEmail><timestampReceived>2019-01-18 18:56:13-0400</timestampReceived><subject>[libvirt-users] stuck in pxe loop from uefi + tianocore/ovmf</subject><body>

Hello all, hope all is well
Was wondering if I'm doing something wrong/missing something.
I have pxe+tftp+uefi working between 2 vms. However after the build is
done and I reboot, I still come up to pxe b/c tianocore always starts,
from what I've seen, with trying PXE first. Great for initial builds
:) but I would like to it stop after.
In the xml I am pointing to the disk to boot first. if I virsh destory
and run qemu directly on the qcow image, the vm comes up as expected
and boots into the OS
I have tried removing the nvram under
/var/lib/libvirt/qemu/nvram/virtmachine. But the vm boots up and
starts looking for pxe again.
If I let that timeout, then type exit and select continue in the
tianocore boot firmware, I just loop back into trying pxe over ipv4
etc
I tried &lt;rom bar='off'/&gt; on the e1000 and that does work to stop pxe.
Then I get to the uefi shell quickly, but all I see at that point is 2
BLK maps pointing to floppy 1 and 2. I see nothing when I try to
manually add a new boot option.

any help/wisdom would be appreciated.

libvirtd (libvirt) 4.9.0

qemu command:
sudo qemu-system-x86_64 -m 2048 -L /usr/share/ovmf/x64/ -bios
OVMF_CODE.fd -drive
file=/images/rdhcli02,format=qcow2,cache=writeback,if=virtio -device
virtio-net,netdev=net10,mac=52:54:00:11:22:33 -netdev
tap,id=net10,ifname=rdhcli02,script=no,downscript=no
Is there a way to address this?

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190225161244</emailId><senderName>mxs kolo</senderName><senderEmail>kolomaxes@gmail.com</senderEmail><timestampReceived>2019-02-25 16:12:44-0400</timestampReceived><subject>Re: [libvirt-users] libvirt 5.0.0 - LXC container still in "virsh list" output after shutdown</subject><body>

https://bugzilla.redhat.com/show_bug.cgi?id=1681180

b.r.
  Maxim Kozin

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190122064215</emailId><senderName>Tony Brian Albers</senderName><senderEmail>tba@kb.dk</senderEmail><timestampReceived>2019-01-22 06:42:15-0400</timestampReceived><subject>Re: [libvirt-users] Slow ssh</subject><body>

hostname lookups that are not working correctly is usually the culprit
here. Check that the machines can do forward and reverse lookup of
themselves and their peers, use hosts-files if necessary.

HTH

/tony

On Mon, 2019-01-21 at 14:15 +0100, Pascal Legrand wrote:
&gt; Hello,
&gt; i'm using libvirt/kvm/qemu on a stable Debian Linux KVM 4.9.0-6-amd64 
&gt; .
&gt; 
&gt; qemu-kvm : 1:2.8+dfsg-6+deb9u5
&gt; libvirt-daemon : 3.0.0-4+deb9u3
&gt; libvirt-clients : 3.0.0-4+deb9u3
&gt; virt-manager : 1:1.4.0-5
&gt; virt-viewer : 5.0-1
&gt; virtinst : 1:1.4.0-5
&gt; 
&gt; 
&gt; My guests are made with this kind of command line :
&gt; 
&gt; virt-install --connect=qemu:///system --name=debian --ram=2048 --
&gt; disk 
&gt; /home/vm/debian.qcow2,size=10,format=qcow2 
&gt; --network=bridge:bridge-0-1,model=virtio 
&gt; --network=bridge:bridge-0-2,model=virtio 
&gt; --network=bridge:bridge-0-3,model=virtio --accelerate --
&gt; noautoconsole 
&gt; --vnc --vnclisten=0.0.0.0 --keymap=fr 
&gt; --cdrom=/home/iso/debian-6.0.1a-i386-netinst.iso --os-type=linux 
&gt; --os-variant=debiansqueeze --hvm
&gt; 
&gt; 
&gt; Since a long time ago now (may be a Debian upgrade) i noticed that
&gt; ssh 
&gt; session from my personal PC to guests are very slow (connection and 
&gt; behaviour)
&gt; 
&gt; My ssh configuration is the same on all my real/vm servers.
&gt; The problem occure only on my guest.
&gt; 
&gt; 
&gt; Have you got a solution or an idea to solve this problem ?
&gt; 
&gt; Thanks for your help
&gt; 
-- 
Tony Albers - Systems Architect - IT Development
Royal Danish Library, Victor Albecks Vej 1, 8000 Aarhus C, Denmark
Tel: +45 2566 2383 - CVR/SE: 2898 8842 - EAN: 5798000792142

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190125163512</emailId><senderName>Nick Howitt</senderName><senderEmail>nick@howitts.co.uk</senderEmail><timestampReceived>2019-01-25 16:35:12-0400</timestampReceived><subject>[libvirt-users] Keyboard problems with VNC access</subject><body>

Hi,
I am pretty new to libvirt, but have succeeded in setting up two VM's, 
Windows 10 and ClearOS (a Centos derivative) and they both have the same 
issue. I have installed both of them with a UK English keyboard, but the 
host machine is remote and in the US with a US locale. When I access 
either through VNC (I've tried TightVNC and VNC-Viewer), a number of my 
keys don't map correctly. As an example the \ key comes up with a #, and 
the # key comes up with a 3 (as does the 3 key). Other keys are the 
standard US type of mapping, but the  £ (above 3) comes up blank and the 
$ (above 4) comes up with $ which, I think is the UK setting and not the 
US setting. At this point I am thoroughly confused.
Does anyone have any ideas?
Thanks,
Nick

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190130164247</emailId><senderName>David Gilmour</senderName><senderEmail>david@gilmour.net</senderEmail><timestampReceived>2019-01-30 16:42:47-0400</timestampReceived><subject>[libvirt-users] Hook problem</subject><body>

I am trying to use /etc/libvirt/hooks/qemu to control the startup of several guests \
with interdependencies.  The goal is to delay the start of guest B until the DNS \
server on guest A is running.  To accomplish this, I wrote a qemu hook script that \
detects the normal startup of guest B and start a second script in the background to \
wait until the preconditions to start B are fulfilled, then start B using a call to \
the virsh command.

For this strategy to work, it must handle the case where libvirt has chosen guest B \
as the first guest to attempt to start.  (Although renaming the symlinks in \
/etc/libvirt/qemu/autostart to force starting the guests in a particular order might \
work, I do not want to rely on this undocumented behavior).  In the case where \
libvirt happens to attempt to start guest B before it starts guest A, the hook script \
needs to somehow tell libvirt to skip guest B and go on to starting the next guest.  \
Otherwise a deadlock would result as libvirt waited for B to start, but B was waiting \
for A to start.   I have tried to handle this by returning failure from the hook \
script for the initial attempt to start B once the background script has been started \
to implement the DNS check and eventually the delayed start of B.

Unfortunately, I cannot find a way to force libvirt to continue until the background \
script exits.  No combination of background execution, nohup, disown, setsid -f, or \
at seems to detach the process sufficiently to "fool" libvirt into acting on the \
"exit 1" line in the qemu script and proceed on to start other guests.  As a result, \
the dependency of B on A deadlocks, and neither guest ever starts.

Can someone please either find an error in my approach or propose a different \
strategy to implement this customized dependency of the startup of one guest on \
another?

Thanks -

======

Here is my qemu script:

#!/bin/bash
if [[ "$2" == 'start' ]]; then
        echo "$0: Starting $1..." |&amp; logger
        if [[ "$1" == 'B' ]]; then
            # The next line is where the background script is invoked
                /bin/bash /usr/local/bin/startB &amp;
            # These also don't work:
            # (/bin/bash /usr/local/bin/startB) &amp; ; disown
# setsid -f (/bin/bash /usr/local/bin/startB) &amp; ; disown
            # Unfortunately, the exit in the following line doesn't force libvirt to \
move on to the next guest to start until the background command has itself exited  \
exit 1;  fi
fi

Here is the startB script, including a call to a program named in the $dnssuccess \
variable that does the testing of DNS availability on guest A:

#!/bin/bash
until $dnssuccess
do
    echo "$0: Delaying start of guest B 10 seconds" |&amp; logger
    sleep 10;
done
# It's now OK to start guest
echo "$0: Now starting guest B" |&amp; logger
virsh start B;

=====


[Attachment #3 (text/html)]

&lt;html xmlns:v="urn:schemas-microsoft-com:vml" \
xmlns:o="urn:schemas-microsoft-com:office:office" \
xmlns:w="urn:schemas-microsoft-com:office:word" \
xmlns:m="http://schemas.microsoft.com/office/2004/12/omml" \
xmlns="http://www.w3.org/TR/REC-html40"&gt; &lt;head&gt;
&lt;meta http-equiv="Content-Type" content="text/html; charset=us-ascii"&gt;
&lt;meta name="Generator" content="Microsoft Word 15 (filtered medium)"&gt;
&lt;style&gt;&lt;!--
/* Font Definitions */
@font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
/* Style Definitions */
p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0in;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Calibri",sans-serif;}
a:link, span.MsoHyperlink
	{mso-style-priority:99;
	color:#0563C1;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{mso-style-priority:99;
	color:#954F72;
	text-decoration:underline;}
span.EmailStyle17
	{mso-style-type:personal-compose;
	font-family:"Calibri",sans-serif;
	font-weight:normal;
	font-style:normal;
	text-decoration:none none;}
.MsoChpDefault
	{mso-style-type:export-only;
	font-family:"Calibri",sans-serif;}
@page WordSection1
	{size:8.5in 11.0in;
	margin:1.0in 1.0in 1.0in 1.0in;}
div.WordSection1
	{page:WordSection1;}
--&gt;&lt;/style&gt;&lt;!--[if gte mso 9]&gt;&lt;xml&gt;
&lt;o:shapedefaults v:ext="edit" spidmax="1026" /&gt;
&lt;/xml&gt;&lt;![endif]--&gt;&lt;!--[if gte mso 9]&gt;&lt;xml&gt;
&lt;o:shapelayout v:ext="edit"&gt;
&lt;o:idmap v:ext="edit" data="1" /&gt;
&lt;/o:shapelayout&gt;&lt;/xml&gt;&lt;![endif]--&gt;
&lt;/head&gt;
&lt;body lang="EN-US" link="#0563C1" vlink="#954F72"&gt;
&lt;div class="WordSection1"&gt;
&lt;p class="MsoNormal"&gt;&lt;span style="font-size:12.0pt"&gt;I am trying to use \
/etc/libvirt/hooks/qemu to control the startup of several guests with \
interdependencies.  The goal is to delay the start of guest B until the DNS \
server on guest A is running.  To accomplish  this, I wrote a qemu hook script \
that detects the normal startup of guest B and start a second script in the \
background to wait until the preconditions to start B are fulfilled, then start B \
using a call to the virsh command.&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span \
style="font-size:12.0pt"&gt;&lt;o:p&gt; &lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span \
style="font-size:12.0pt"&gt;For this strategy to work, it must handle the case where \
libvirt has chosen guest B as the first guest to attempt to start.  (Although \
renaming the symlinks in /etc/libvirt/qemu/autostart to force starting  the guests in \
a particular order might work, I do not want to rely on this undocumented \
behavior).  In the case where libvirt happens to attempt to start guest B before \
it starts guest A, the hook script needs to somehow tell libvirt to skip guest B and \
go  on to starting the next guest.  Otherwise a deadlock would result as libvirt \
waited for B to start, but B was waiting for A to start.   I have tried to \
handle this by returning failure from the hook script for the initial attempt to \
start B once the background  script has been started to implement the DNS check and \
eventually the delayed start of B.&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span \
style="font-size:12.0pt"&gt;&lt;o:p&gt; &lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span \
style="font-size:12.0pt"&gt;Unfortunately, I cannot find a way to force libvirt to \
continue until the background script exits.  No combination of background \
execution, nohup, disown, setsid -f, or at seems to detach the process sufficiently  \
to “fool” libvirt into acting on the “exit 1” line in the \
qemu script and proceed on to start other guests.  As a result, the dependency \
of B on A deadlocks, and neither guest ever starts.&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p \
class="MsoNormal"&gt;&lt;span style="font-size:12.0pt"&gt;&lt;o:p&gt; &lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p \
class="MsoNormal"&gt;&lt;span style="font-size:12.0pt"&gt;Can someone please either find an \
error in my approach or propose a different strategy to implement this customized \
dependency of the startup of one guest on another?&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p \
class="MsoNormal"&gt;&lt;span style="font-size:12.0pt"&gt;&lt;o:p&gt; &lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p \
class="MsoNormal"&gt;&lt;span style="font-size:12.0pt"&gt;Thanks –&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; \
&lt;p class="MsoNormal"&gt;&lt;span style="font-size:12.0pt"&gt;&lt;o:p&gt; &lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p \
class="MsoNormal"&gt;&lt;span style="font-size:12.0pt"&gt;======&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p \
class="MsoNormal"&gt;&lt;span style="font-size:12.0pt"&gt;&lt;o:p&gt; &lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p \
class="MsoNormal"&gt;&lt;span style="font-size:12.0pt"&gt;Here is my qemu \
script:&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span \
style="font-size:12.0pt"&gt;&lt;o:p&gt; &lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span \
style="font-size:12.0pt"&gt;#!/bin/bash&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span \
style="font-size:12.0pt"&gt;if [[ "$2" == 'start' ]]; \
then&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span \
style="font-size:12.0pt"&gt;        echo "$0: \
Starting $1..." |&amp; logger&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span \
style="font-size:12.0pt"&gt;        if [[ \
"$1" == 'B' ]]; then&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span \
style="font-size:12.0pt"&gt;            \
# The next line is where the background script is invoked&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p \
class="MsoNormal"&gt;&lt;span \
style="font-size:12.0pt"&gt;                \
/bin/bash /usr/local/bin/startB &amp;&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p \
class="MsoNormal"&gt;&lt;span \
style="font-size:12.0pt"&gt;            \
# These also don’t work:&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span \
style="font-size:12.0pt"&gt;            \
# (/bin/bash /usr/local/bin/startB) &amp; ; disown&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p \
class="MsoNormal" style="margin-left:.5in"&gt;&lt;span style="font-size:12.0pt"&gt;# setsid -f \
(/bin/bash /usr/local/bin/startB) &amp; ; disown&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p \
class="MsoNormal"&gt;&lt;span \
style="font-size:12.0pt"&gt;            \
# Unfortunately, the exit in the following line doesn’t force libvirt to move \
on to the next guest to start until the background command has itself \
exited&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span \
style="font-size:12.0pt"&gt;                \
exit 1;&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span \
style="font-size:12.0pt"&gt;        \
fi&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span \
style="font-size:12.0pt"&gt;fi&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span \
style="font-size:12.0pt"&gt;&lt;o:p&gt; &lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span \
style="font-size:12.0pt"&gt;Here is the startB script, including a call to a program \
named in the $dnssuccess variable that does the testing of DNS availability on guest \
A:&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span \
style="font-size:12.0pt"&gt;&lt;o:p&gt; &lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span \
style="font-size:12.0pt"&gt;#!/bin/bash&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span \
style="font-size:12.0pt"&gt;until $dnssuccess&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p \
class="MsoNormal"&gt;&lt;span style="font-size:12.0pt"&gt;do&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p \
class="MsoNormal"&gt;&lt;span style="font-size:12.0pt"&gt;    echo "$0: \
Delaying start of guest B 10 seconds" |&amp; logger&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p \
class="MsoNormal"&gt;&lt;span style="font-size:12.0pt"&gt;    sleep \
10;&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span \
style="font-size:12.0pt"&gt;done&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span \
style="font-size:12.0pt"&gt;# It’s now OK to start guest&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p \
class="MsoNormal"&gt;&lt;span style="font-size:12.0pt"&gt;echo "$0: Now starting guest \
B" |&amp; logger&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="MsoNormal"&gt;&lt;span \
style="font-size:12.0pt"&gt;virsh start B;&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p \
class="MsoNormal"&gt;&lt;span style="font-size:12.0pt"&gt;&lt;o:p&gt; &lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;p \
class="MsoNormal"&gt;&lt;span style="font-size:12.0pt"&gt;===== &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt; &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
--===============0137201772493811112==--


</body></email><email><emailId>20190130120828</emailId><senderName>Nick Howitt</senderName><senderEmail>nick@howitts.co.uk</senderEmail><timestampReceived>2019-01-30 12:08:28-0400</timestampReceived><subject>Re: [libvirt-users] Keyboard problems with VNC access</subject><body>

Anyone?

It looks I can get the "\" to work if I configure the VM Win10 instance 
to use a US keyboard and it does not matter if the local keyboard also 
on Win10 running the TightVNC client is UK or US. However I can never 
get the  £ key to work in the VM.

On 25/01/2019 16:35, Nick Howitt wrote:
&gt; Hi,
&gt; I am pretty new to libvirt, but have succeeded in setting up two VM's, 
&gt; Windows 10 and ClearOS (a Centos derivative) and they both have the 
&gt; same issue. I have installed both of them with a UK English keyboard, 
&gt; but the host machine is remote and in the US with a US locale. When I 
&gt; access either through VNC (I've tried TightVNC and VNC-Viewer), a 
&gt; number of my keys don't map correctly. As an example the \ key comes 
&gt; up with a #, and the # key comes up with a 3 (as does the 3 key). 
&gt; Other keys are the standard US type of mapping, but the  £ (above 3) 
&gt; comes up blank and the $ (above 4) comes up with $ which, I think is 
&gt; the UK setting and not the US setting. At this point I am thoroughly 
&gt; confused.
&gt; Does anyone have any ideas?
&gt; Thanks,
&gt; Nick
&gt;
&gt; _______________________________________________
&gt; libvirt-users mailing list
&gt; libvirt-users@redhat.com
&gt; https://www.redhat.com/mailman/listinfo/libvirt-users



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190122172837</emailId><senderName>mxs kolo</senderName><senderEmail>kolomaxes@gmail.com</senderEmail><timestampReceived>2019-01-22 17:28:37-0400</timestampReceived><subject>Re: [libvirt-users] LXC guest to have/make a device node (FUSE)</subject><body>

 Hello

Device must be present on hardware node. For pass Character Device
inside lxc container:
&lt;device&gt;
  &lt;hostdev mode='capabilities' type='misc'&gt;
     &lt;source&gt;
       &lt;char&gt;/dev/CHAR_DEV_NAME&lt;/char&gt;
     &lt;/source&gt;
   &lt;/hostdev&gt;
      .....
&lt;/device&gt;

for Block Device:
&lt;hostdev mode='capabilities' type='storage'&gt;
   &lt;source&gt;
     &lt;block&gt;/dev/BLOCK_DEV_NAME&lt;/block&gt;
   &lt;/source&gt;
 &lt;/hostdev&gt;

After LXC container start, corresponding device would be created
inside container's /dev/
Details here: https://libvirt.org/formatdomain.html#elementsHostDevCaps

b.r.
 Maxim Kozin

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190122182904</emailId><senderName>mxs kolo</senderName><senderEmail>kolomaxes@gmail.com</senderEmail><timestampReceived>2019-01-22 18:29:04-0400</timestampReceived><subject>Re: [libvirt-users] libvirt 5.0.0 - LXC container still in "virsh list" output after shutdown</subject><body>

&gt; Centos 7.6 with libvirt build from base "virt" repository:
&gt; libvirt-daemon-driver-lxc-5.0.0-1.el7.x86_64
&gt; libvirt-client-5.0.0-1.el7.x86_64
&gt; libvirt-daemon-5.0.0-1.el7.x86_64
&gt; libvirt-daemon-driver-network-5.0.0-1.el7.x86_64
&gt; libvirt-libs-5.0.0-1.el7.x86_64
&gt; +
&gt; systemd-219-62.el7_6.2.x86_64
&gt;
&gt; Now lxc containers with  type='direct' can be started,  but can't be stopped
Additional info.
When shutdown LZXC container with --mode signal, nothing happened on
virsh console LXC_NAME
If use --mode initctl, container powering off:
...
[  OK  ] Removed slice User and Session Slice.
[  OK  ] Stopped target Remote File Systems.
[  OK  ] Stopped Load/Save Random Seed.
[  OK  ] Stopped Update UTMP about System Boot/Shutdown.
[  OK  ] Stopped Create Volatile Files and Directories.
[  OK  ] Stopped target Local File Systems.
         Unmounting /proc/sys/net/ipv4...
[  OK  ] Stopped target Local File Systems (Pre).
         Unmounting /proc/sys/net/ipv6...
         Unmounting /dev/tty1...
         Unmounting /proc/meminfo...
         Unmounting /dev/ptmx...
[  OK  ] Stopped Configure read-only root support.
[  OK  ] Stopped Remount Root and Kernel File Systems.
[  OK  ] Reached target Shutdown.
[  OK  ] Reached target Final Step.
         Starting Power-Off...
and virsh console disconnected.
But as reported before, virsh list show container in status running.
Interesting, that in test python script for such stucked container we
get error on call domain.info():
(Pdb)  self.state_id, self.maxmem, self.mem, self.cpus, self.cput =
self.domain.info()
*** libvirtError: operation failed: Cannot read cputime for domain

where self.domain is correct domain pointer:
(Pdb) self.domain.__dict__
{'_conn': &lt;libvirt.virConnect object at 0x7ff95f881550&gt;, '_o':
&lt;capsule object "virDomainPtr" at 0x7ff95f8cca80&gt;}

Compare with case just after libvirtd restart and domain stopped:
(Pdb) self.domain.info()
[5, 2097152L, 2097152L, 2, 0L]

Problem reproduced on 2 nodes for lxc. Qemu container on same nodes
shutdown correct.
b.r.
 Maxim Kozin

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190124130700</emailId><senderName>David Gra</senderName><senderEmail>david.grafberger@googlemail.com</senderEmail><timestampReceived>2019-01-24 13:07:00-0400</timestampReceived><subject>[libvirt-users] Problems with incoming multicasts</subject><body>

[Attachment #2 (multipart/alternative)]


Hello

I have realized a problem with incomming multicast packages to a VM.

My Setup is:
1 Host with 1 VM. On the external Network (Host: eth0), there ist a
Multicast Stream. The packages are visible at the hosts eth0. The Guest is
connected via macvtap to the eth0 from the Host.

Host and Guest ist CentOS 7.6 in Future it should be RedHat 7.6.

The guest is connected via macvtap0 to eth0.
If i performe tcpdump on eth0 of the host, i can see teh packages.
If i performe tcpdump on macvtap0 on the host, i can see the packages
anyway.
If i performe tcpdump on the guests eth0, i can't see the multicast
packages.

Normal unicast communications to the external systems are still working.
All my network is only IPv4.

Is there a limitation to multicast on libvirt?

Best regards and thank's a lot for your help!

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;Hello&lt;br clear="all"&gt;&lt;div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I have realized a \
problem with incomming multicast packages to a VM. &lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;My \
Setup is: &lt;br&gt;&lt;/div&gt;&lt;div&gt;1 Host with 1 VM. On the external Network (Host: eth0), \
there ist a Multicast Stream. The packages are visible at the hosts eth0. The Guest \
is connected via macvtap to the eth0 from the Host. \
&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Host and Guest ist CentOS 7.6 in Future it should be \
RedHat 7.6. &lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The guest is connected via macvtap0 to \
eth0.  &lt;/div&gt;&lt;div&gt;If i performe tcpdump on eth0 of the host, i can see teh packages. \
&lt;br&gt;&lt;/div&gt;&lt;div&gt;If i performe tcpdump on macvtap0 on the host, i can see the packages \
anyway. &lt;br&gt;&lt;/div&gt;&lt;div&gt;If i performe tcpdump on the guests eth0, i can't see the \
multicast packages.  &lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Normal unicast communications to the \
external systems are still working. All my network is only IPv4. \
&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Is there a limitation to multicast on libvirt? \
&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Best regards and thank's a lot for your help! \
&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;



_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190124162303</emailId><senderName>jsl6uy js16uy</senderName><senderEmail>js16uy@gmail.com</senderEmail><timestampReceived>2019-01-24 16:23:03-0400</timestampReceived><subject>Re: [libvirt-users] stuck in pxe loop from uefi + tianocore/ovmf</subject><body>

Any thoughts all?
Just a final check-in. I have had help before and it is/was appreciated!
Probably not explaining effectively or too corner case
regards all


On Fri, Jan 18, 2019 at 12:56 PM jsl6uy js16uy &lt;js16uy@gmail.com&gt; wrote:
&gt;
&gt; Hello all, hope all is well
&gt; Was wondering if I'm doing something wrong/missing something.
&gt; I have pxe+tftp+uefi working between 2 vms. However after the build is
&gt; done and I reboot, I still come up to pxe b/c tianocore always starts,
&gt; from what I've seen, with trying PXE first. Great for initial builds
&gt; :) but I would like to it stop after.
&gt; In the xml I am pointing to the disk to boot first. if I virsh destory
&gt; and run qemu directly on the qcow image, the vm comes up as expected
&gt; and boots into the OS
&gt; I have tried removing the nvram under
&gt; /var/lib/libvirt/qemu/nvram/virtmachine. But the vm boots up and
&gt; starts looking for pxe again.
&gt; If I let that timeout, then type exit and select continue in the
&gt; tianocore boot firmware, I just loop back into trying pxe over ipv4
&gt; etc
&gt; I tried &lt;rom bar='off'/&gt; on the e1000 and that does work to stop pxe.
&gt; Then I get to the uefi shell quickly, but all I see at that point is 2
&gt; BLK maps pointing to floppy 1 and 2. I see nothing when I try to
&gt; manually add a new boot option.
&gt;
&gt; any help/wisdom would be appreciated.
&gt;
&gt; libvirtd (libvirt) 4.9.0
&gt;
&gt; qemu command:
&gt; sudo qemu-system-x86_64 -m 2048 -L /usr/share/ovmf/x64/ -bios
&gt; OVMF_CODE.fd -drive
&gt; file=/images/rdhcli02,format=qcow2,cache=writeback,if=virtio -device
&gt; virtio-net,netdev=net10,mac=52:54:00:11:22:33 -netdev
&gt; tap,id=net10,ifname=rdhcli02,script=no,downscript=no
&gt; Is there a way to address this?

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190125214218</emailId><senderName>François_Marsy</senderName><senderEmail>fmarsy@gmail.com</senderEmail><timestampReceived>2019-01-25 21:42:18-0400</timestampReceived><subject>[libvirt-users] unable to list virtualbox domain remotely</subject><body>

[Attachment #2 (multipart/alternative)]


Hi dear all,
I have the following issue :
I have a libvirtd intstalled on an ubuntu desktop. The libvirtd is
listening on port 16509 (options listen_tls = 0 and listen_tcp = 1)
On the desktop I have a virtualbox installed with a running VM :
"styx32-dry-run3"
I want to control my VM remotely by using libvirt.
I performed following tests :
1)Local virsh running fine :
 virsh -c vbox:///session list
 Id    Name                           State
----------------------------------------------------
 2     styx32-dry-run3                running

2)Using the tcp port is showing an empty list:
virsh -c vbox+tcp://127.0.0.1:16509/session list
 Id    Name                           State
----------------------------------------------------

3)net-list command works
virsh -c vbox+tcp://127.0.0.1:16509/session net-list
 Name                 State      Autostart     Persistent
----------------------------------------------------------
 vboxnet0             active     no autostart  yes


Can any of you help me please, I really don't understand why my VM is not
showing up in the 2 ) list  .. and I really don't know where to look at :-(

Kind regards
Francois

[Attachment #5 (text/html)]

&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;&lt;div dir="ltr"&gt;&lt;div&gt;Hi dear \
all,&lt;/div&gt;&lt;div&gt;I have the following issue :  &lt;/div&gt;&lt;div&gt;I have a libvirtd intstalled \
on an ubuntu desktop. The libvirtd is listening on port 16509 (options listen_tls = 0 \
and listen_tcp = 1)&lt;/div&gt;&lt;div&gt;On the desktop I have a virtualbox installed with a \
running VM : "styx32-dry-run3"&lt;/div&gt;&lt;div&gt;I want to control my VM remotely \
by using libvirt. &lt;br&gt;&lt;/div&gt;&lt;div&gt;I performed following tests :&lt;/div&gt;&lt;div&gt;1)Local \
virsh running fine : &lt;br&gt;&lt;/div&gt;&lt;div&gt;  virsh -c vbox:///session list&lt;br&gt;  Id       \
Name                                                     \
State&lt;br&gt;----------------------------------------------------&lt;br&gt;  2         \
styx32-dry-run3                               running&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;2)Using the \
tcp port is showing an empty list:&lt;/div&gt;&lt;div&gt;virsh -c vbox+tcp://&lt;a \
href="http://127.0.0.1:16509/session"&gt;127.0.0.1:16509/session&lt;/a&gt; list&lt;br&gt;  Id       \
Name                                                     \
State&lt;br&gt;----------------------------------------------------&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;3)net-list \
command works &lt;br&gt;&lt;/div&gt;&lt;div&gt;virsh -c vbox+tcp://&lt;a \
href="http://127.0.0.1:16509/session"&gt;127.0.0.1:16509/session&lt;/a&gt; net-list&lt;br&gt;  Name  \
State           Autostart         \
Persistent&lt;br&gt;----------------------------------------------------------&lt;br&gt;  \
vboxnet0                         active         no autostart   \
yes&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Can any of you help me please, I really don't \
understand why my VM is not showing up in the 2 ) list   .. and I really don't \
know where to look at :-(&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Kind \
regards&lt;/div&gt;&lt;div&gt;Francois&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;




_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users

</body></email><email><emailId>20190129091231</emailId><senderName>Andreas Tscharner</senderName><senderEmail>sternenfeuer@gmail.com</senderEmail><timestampReceived>2019-01-29 09:12:31-0400</timestampReceived><subject>[libvirt-users] Workaround for "internal snapshots of a VM with pflash based firmware are not suppor</subject><body>

Hello World,

We were hit by the "internal snapshots of a VM with pflash based 
firmware are not supported" problem. Is there a workaround for it (for 
which revert works)? Another format perhaps?

Our use case: We have an image (Win10, UEFI) with some software 
installed. This image is used by Jenkins to execute some tests. After 
the tests, the image should be reverted to the original state. Jenkins 
uses the libvirt plugin to connect to and start/stop and revert the 
virtual machines. The images are in qcow2 format.

We've usually created a snapshot of the base state using "virsh 
snapshot-create-as" on the host system, but this is no longer possible.

What is the recommended workaround?

TIA and best regards
	Andreas
-- 
Andreas Tscharner                             sternenfeuer@gmail.com

Gordon's Law:
If you think you have the solution, the question was poorly phrased.

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190130123241</emailId><senderName>Daniel =?utf-8?B?UC4gQmVycmFuZ8Op?=</senderName><senderEmail>berrange@redhat.com</senderEmail><timestampReceived>2019-01-30 12:32:41-0400</timestampReceived><subject>Re: [libvirt-users] Keyboard problems with VNC access</subject><body>

On Fri, Jan 25, 2019 at 04:35:12PM +0000, Nick Howitt wrote:
&gt; Hi,
&gt; I am pretty new to libvirt, but have succeeded in setting up two VM's,
&gt; Windows 10 and ClearOS (a Centos derivative) and they both have the same
&gt; issue. I have installed both of them with a UK English keyboard, but the
&gt; host machine is remote and in the US with a US locale. When I access either
&gt; through VNC (I've tried TightVNC and VNC-Viewer), a number of my keys don't
&gt; map correctly. As an example the \ key comes up with a #, and the # key
&gt; comes up with a 3 (as does the 3 key). Other keys are the standard US type
&gt; of mapping, but the  £ (above 3) comes up blank and the $ (above 4) comes up
&gt; with $ which, I think is the UK setting and not the US setting. At this
&gt; point I am thoroughly confused.
&gt; Does anyone have any ideas?

With the traditional VNC protocol, key presses are as key symbols which
means your local client key map conversion has already been applied. When
QEMU injects keys into the guest OS, it has to undo this key map conversion
to get the scancodes again.  This undo is a lossy procedure unless the
keymap in your VNC client machine 100% matches the keymap used by QEMU.
For sanity the guest OS keymap also has to match or it will convert the
scancodes it gets from QEMU back into different key symbols.

NB, QEMU does not use its host OS keyboard layout -  it uses the layout
given by the "-k" argument to QEMU, which defaults to "us" if not specified.

This is likely the problem you are facing since you say the VMs have
UK keyboard layout and your QEMU is probably using US layout  and so
is your client machine.

QEMU defined a VNC protocol extension which allows the client  to pass
raw scancodes to QEMU. This avoids the need for QEMU todo any lossy
conversion, as it can send them straight to the guest OS.

This extension is supported by the GTK-VNC library used by virt-manager,
virt-viewer, GNOME boxes, and Vinagre clients. I believe the extension
is also supported by TigerVNC, and the HTML5  noVNC web client (though
that has plenty of other pain with keyboards).

If you have a client that supports this extension, then you must make
sure that *no* -k arg is gievn to QEMU.

Regards,
Daniel
-- 
|: https://berrange.com      -o-    https://www.flickr.com/photos/dberrange :|
|: https://libvirt.org         -o-            https://fstop138.berrange.com :|
|: https://entangle-photo.org    -o-    https://www.instagram.com/dberrange :|

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users
</body></email><email><emailId>20190130170616</emailId><senderName>Daniel =?utf-8?B?UC4gQmVycmFuZ8Op?=</senderName><senderEmail>berrange@redhat.com</senderEmail><timestampReceived>2019-01-30 17:06:16-0400</timestampReceived><subject>Re: [libvirt-users] Hook problem</subject><body>

On Wed, Jan 30, 2019 at 04:42:47PM +0000, David Gilmour wrote:
&gt; I am trying to use /etc/libvirt/hooks/qemu to control the startup of
&gt; several guests with interdependencies.  The goal is to delay the start
&gt; of guest B until the DNS server on guest A is running.  To accomplish
&gt; this, I wrote a qemu hook script that detects the normal startup of
&gt; guest B and start a second script in the background to wait until the
&gt; preconditions to start B are fulfilled, then start B using a call to
&gt; the virsh command.
&gt; 
&gt; For this strategy to work, it must handle the case where libvirt has
&gt; chosen guest B as the first guest to attempt to start.  (Although
&gt; renaming the symlinks in /etc/libvirt/qemu/autostart to force starting
&gt; the guests in a particular order might work, I do not want to rely on
&gt; this undocumented behavior).  In the case where libvirt happens to
&gt; attempt to start guest B before it starts guest A, the hook script
&gt; needs to somehow tell libvirt to skip guest B and go on to starting
&gt; the next guest.  Otherwise a deadlock would result as libvirt waited
&gt; for B to start, but B was waiting for A to start.   I have tried to
&gt; handle this by returning failure from the hook script for the initial
&gt; attempt to start B once the background script has been started to
&gt; implement the DNS check and eventually the delayed start of B.
&gt; 
&gt; Unfortunately, I cannot find a way to force libvirt to continue until
&gt; the background script exits.  No combination of background execution,
&gt; nohup, disown, setsid -f, or at seems to detach the process
&gt; sufficiently to "fool" libvirt into acting on the "exit 1" line in the
&gt; qemu script and proceed on to start other guests.  As a result, the
&gt; dependency of B on A deadlocks, and neither guest ever starts.
&gt; 
&gt; Can someone please either find an error in my approach or propose a
&gt; different strategy to implement this customized dependency of the
&gt; startup of one guest on another?

When libvirt runs the hooks, it will capture stdout/stderr of
the script. It will expect to see EOF from stdout/stderr before
it will allow execution to continue. It will wait for EOF, even
if the hook script itself has exited. It only checks for exit
once the EOF is seen, which leads me to the bug......

&gt; Here is my qemu script:
&gt; 
&gt; #!/bin/bash
&gt; if [[ "$2" == 'start' ]]; then
&gt; echo "$0: Starting $1..." |&amp; logger
&gt; if [[ "$1" == 'B' ]]; then
&gt; # The next line is where the background script is invoked
&gt; /bin/bash /usr/local/bin/startB &amp;

.... startB is inheriting stdout + stderr of the hook script and so
will keep them open, even after the hook script exits. Thus libvirtd
still considers the script active.

Your startB script needs to explicitly close its stdout + stderr, and/or
replace them with /dev/null or a logfile if you want to see any debug
messages.

&gt; # These also don't work:
&gt; # (/bin/bash /usr/local/bin/startB) &amp; ; disown
&gt; # setsid -f (/bin/bash /usr/local/bin/startB) &amp; ; disown
&gt; # Unfortunately, the exit in the following line doesn't force libvirt to move on to \
&gt; the next guest to start until the background command has itself exited exit 1;
&gt; fi
&gt; fi
&gt; 
&gt; Here is the startB script, including a call to a program named in the $dnssuccess \
&gt; variable that does the testing of DNS availability on guest A: 
&gt; #!/bin/bash
&gt; until $dnssuccess
&gt; do
&gt; echo "$0: Delaying start of guest B 10 seconds" |&amp; logger
&gt; sleep 10;
&gt; done
&gt; # It's now OK to start guest
&gt; echo "$0: Now starting guest B" |&amp; logger
&gt; virsh start B;
&gt; 


Regards,
Daniel
-- 
&gt; &gt; https://berrange.com      -o-    https://www.flickr.com/photos/dberrange :|
&gt; &gt; https://libvirt.org         -o-            https://fstop138.berrange.com :|
&gt; &gt; https://entangle-photo.org    -o-    https://www.instagram.com/dberrange :|

_______________________________________________
libvirt-users mailing list
libvirt-users@redhat.com
https://www.redhat.com/mailman/listinfo/libvirt-users


</body></email></emails>